<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title><![CDATA[Windowsç³»ç»ŸCç›˜æ¸…ç†]]></title>
    <url>%2Fwindows%2Fclean_c_drive.html</url>
    <content type="text"><![CDATA[Â¶æ¦‚è¿°éšç€ä½¿ç”¨æ—¶é—´çš„å¢žé•¿ï¼ŒWindowsç³»ç»ŸCç›˜ä¸Šä¼šäº§ç”Ÿå¤§é‡çš„ä¸´æ—¶æ–‡ä»¶ã€è½¯ä»¶ç¼“å­˜ã€æ—¥å¿—æ–‡ä»¶ç­‰ï¼Œè¿™äº›æ–‡ä»¶ä¼šå ç”¨è¶Šæ¥è¶Šå¤šçš„ç£ç›˜ç©ºé—´ï¼Œä»Žè€Œå¯¼è‡´ç³»ç»Ÿè¿è¡Œç¼“æ…¢ã€å“åº”è¿Ÿé’ç­‰é—®é¢˜ã€‚å¦‚æžœåŠæ—¶æ¸…ç†è¿™äº›æ— å…³ç´§è¦çš„æ–‡ä»¶ï¼Œå°±å¯ä»¥ä¸ºè®¡ç®—æœºè…¾å‡ºæ›´å¤šçš„ç£ç›˜ç©ºé—´ï¼Œæé«˜ç³»ç»Ÿæ€§èƒ½å’Œå“åº”é€Ÿåº¦ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡ SpaceSniffer ç­‰ç£ç›˜ç©ºé—´åˆ†æžè½¯ä»¶å¯ä»¥åˆ†æžå‡ºCç›˜ä¸­å ç”¨ç©ºé—´æ¯”è¾ƒå¤§çš„ç›®å½•æˆ–æ–‡ä»¶ã€‚é€šå¸¸å®‰è£…çš„åº”ç”¨ç¨‹åºéƒ½ä¼šå°†è¿è¡Œæ—¶çš„æ•°æ®ã€ç¼“å­˜ã€æ—¥å¿—ã€ä¸´æ—¶æ–‡ä»¶ç­‰å­˜åˆ°Cç›˜çš„ C:\Users\%username%\AppData ç›®å½•ä¸‹ï¼Œæ‰€ä»¥è¿™ä¸ªç›®å½•ä¸€èˆ¬ä¼šæ¯”è¾ƒå ç”¨ç©ºé—´ã€‚Windowsç³»ç»Ÿçš„AppDataç›®å½•æ˜¯ç”¨äºŽå­˜å‚¨åº”ç”¨ç¨‹åºæ•°æ®çš„æ–‡ä»¶å¤¹ï¼Œå®ƒä½äºŽæ¯ä¸ªç”¨æˆ·çš„ä¸ªäººæ–‡ä»¶å¤¹ä¸­ã€‚é€šå¸¸æƒ…å†µä¸‹ï¼Œè¿™ä¸ªæ–‡ä»¶å¤¹æ˜¯éšè—çš„ï¼Œéœ€è¦åœ¨æ–‡ä»¶å¤¹é€‰é¡¹ä¸­é€‰æ‹©â€œæ˜¾ç¤ºéšè—çš„æ–‡ä»¶ã€æ–‡ä»¶å¤¹å’Œé©±åŠ¨å™¨â€æ‰èƒ½çœ‹åˆ°ã€‚AppDataç›®å½•åŒ…å«ä¸‰ä¸ªå­ç›®å½•ï¼šLocalã€Roamingå’ŒLocalLowã€‚å…¶ä¸­ï¼šLocalï¼šå­˜å‚¨åº”ç”¨ç¨‹åºæ— éœ€è·¨å¤šè®¾å¤‡åŒæ­¥çš„æ•°æ®ï¼ŒåŒ…æ‹¬æœ¬åœ°åº”ç”¨ç¨‹åºæ•°æ®ï¼ŒåŒ…æ‹¬ç¼“å­˜ã€æ—¥å¿—ã€ä¸´æ—¶æ–‡ä»¶ç­‰ã€‚ä¾‹å¦‚ï¼šç¼–è¯‘å™¨æž„å»ºç¼“å­˜ï¼Œæµè§ˆå™¨ç¼“å­˜ç­‰ã€‚Roamingï¼šå­˜å‚¨ç”¨æˆ·é…ç½®æ–‡ä»¶å’Œè·¨å¤šè®¾å¤‡åŒæ­¥çš„æ•°æ®ã€‚ä¾‹å¦‚ï¼švscodeé…ç½®ã€QQèŠå¤©è®°å½•ã€æµè§ˆå™¨ä¹¦ç­¾ç­‰ã€‚LocalLowï¼šå­˜å‚¨ä½Žæƒé™è®¿é—®æ•°æ®ï¼Œä¾‹å¦‚ï¼šåœ¨å—ä¿æŠ¤æ¨¡å¼ä¸‹è¿è¡Œæ—¶æµè§ˆå™¨çš„ä¸´æ—¶æ–‡ä»¶ã€‚ä¸€èˆ¬Localç›®å½•æ˜¯ä¸‹çš„æ–‡ä»¶éƒ½æ˜¯å¯ä»¥åˆ é™¤çš„ï¼Œå› ä¸ºè¿™äº›æ–‡ä»¶é€šå¸¸ä¸ä¼šå½±å“åˆ°æ“ä½œç³»ç»Ÿçš„æ­£å¸¸è¿è¡Œã€‚ä½†æ˜¯å¯¹äºŽç”¨æˆ·å®‰è£…çš„åº”ç”¨ç¨‹åºï¼Œå¦‚æžœåˆ é™¤åˆ°è¿™äº›ç¨‹åºçš„æ•°æ®æ–‡ä»¶ï¼Œåˆ™å¯èƒ½ä¼šå½±å“åº”ç”¨ç¨‹åºçš„æ­£å¸¸è¿è¡Œã€‚ç¼“å­˜ã€æ—¥å¿—ã€ä¸´æ—¶æ–‡ä»¶ç­‰éƒ½æ˜¯å¯ä»¥åˆ é™¤çš„ï¼Œä½†æ˜¯ç”±äºŽè¿™ä¸ªç›®å½•å­˜æ”¾äº†å¤ªå¤šç¨‹åºçš„æ•°æ®ï¼Œä»¥è‡³äºŽå¾ˆéš¾æ‰¾åˆ°å®ƒä»¬ï¼Œå¦å¤–åº”ç”¨ç¨‹åºçš„æ•°æ®æ–‡ä»¶åˆä¸çŸ¥é“è¯¥ä¸è¯¥åˆ é™¤ï¼Œæ‰€ä»¥åˆ é™¤è¿™ä¸ªç›®å½•é‡Œçš„æ–‡ä»¶å°±ä¼šå˜å¾—å¾ˆæ£˜æ‰‹ã€‚ç‰¹åˆ«è¯´æ˜Žçš„æ˜¯C:\Users\%username%\AppData\Local\Tempé‡Œçš„æ–‡ä»¶æ˜¯å¯ä»¥æ”¾å¿ƒåˆ é™¤çš„ï¼Œä¸ä¼šå½±å“åˆ°åº”ç”¨ç¨‹åºçš„æ­£å¸¸è¿è¡Œã€‚ä¸ºäº†åº”ç”¨ç¨‹åºçš„æ­£å¸¸è¿è¡Œï¼Œä¸€èˆ¬å¯¹äºŽRoamingç›®å½•ä¸‹çš„æ–‡ä»¶éƒ½ä¸å»ºè®®åˆ é™¤ã€‚ä¸ºäº†è§£å†³ä»¥ä¸Šé—®é¢˜ï¼Œè¿™é‡Œç»™å‡ºä¸¤ç§å¤„ç†æ–¹æ¡ˆï¼šÂ¶å®šæœŸæ¸…ç†æ–¹æ¡ˆç¬¬ä¸€ç§å°±æ˜¯æ€»ç»“Cç›˜åžƒåœ¾æ¸…ç†ç»éªŒç»™å‡ºçš„Windowsæ‰¹å¤„ç†è„šæœ¬ï¼Œåªéœ€åŒå‡»æ‰§è¡Œè¿™ä¸ªè„šæœ¬å°±èƒ½æ¸…é™¤å¤§éƒ¨åˆ†ä¸å½±å“æ“ä½œç³»ç»Ÿå’Œåº”ç”¨ç¨‹åºè¿è¡Œçš„åžƒåœ¾ï¼Œä¸è¿‡è¿™ç§æ–¹å¼åªèƒ½ä¸€æ¬¡æ€§æ¸…ç†ï¼Œéœ€è¦å®šæœŸæ‰§è¡Œæ¸…ç†è„šæœ¬ã€‚è„šæœ¬å¦‚ä¸‹ï¼šåˆ›å»ºè„šæœ¬æ–‡ä»¶ï¼šCç›˜åžƒåœ¾æ¸…ç†.bat123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475@echo off::------------------------------ è‡ªåŠ¨æå‡è¿è¡Œæƒé™ ------------------------------:::BatchGetAdmin&gt;nul 2&gt;&amp;1 "%Windir%\System32\cacls.exe" "%Windir%\System32\config\system"if '%ERRORLEVEL%' NEQ '0' (echo æ­£åœ¨èŽ·å–ç®¡ç†å‘˜æƒé™...goto UACPrompt) else ( goto gotAdmin ):UACPromptecho Set UAC = CreateObject^("Shell.Application"^) &gt; "%TEMP%\getAdmin.vbs"echo UAC.ShellExecute "%~s0", "", "", "runas", 1 &gt;&gt; "%TEMP%\getAdmin.vbs""%TEMP%\getAdmin.vbs"exit:gotAdminif exist "%TEMP%\getadmin.vbs" ( del "%TEMP%\getadmin.vbs" )pushd "%cd%"cd /d "%~dp0"::------------------------------------------------------------------------------::echo æ­£åœ¨æ¸…é™¤ç³»ç»Ÿåžƒåœ¾æ–‡ä»¶ï¼Œè¯·ç¨ç­‰......goto han**********è¿™é‡Œæ˜¯ï¼ˆliulangzhehwmï¼‰æ³¨é‡Š************************å‚è€ƒï¼šhttps://blog.csdn.net/xiaiming0/article/details/123843813del DOSä¸‹çš„åˆ é™¤å‘½ä»¤/f åŠ ä¸ªå‚æ•°/fè¡¨ç¤ºå¼ºåˆ¶åˆ é™¤åªè¯»æ–‡ä»¶/s è¿™ä¸ªè¡¨ç¤ºåŒ…æ‹¬æ‰€æœ‰å­ç›®å½•ä¸­çš„æ–‡ä»¶/q è¿™ä¸ªè¡¨ç¤ºä¸éœ€è¦åˆ é™¤ç¡®è®¤*.tmp æ‰€æœ‰çš„ä¸´æ—¶æ–‡ä»¶ï¼Œ*æ˜¯é€šé…ç¬¦ï¼Œtmpæ˜¯ä¸´æ—¶æ–‡ä»¶çš„æ‰©å±•åã€‚LOG æ›°å¿—æ–‡ä»¶BAK å¤‡ä»½æ–‡ä»¶CHK ç”±Windowsç£ç›˜ç¢Žç‰‡æ•´ç†å™¨æˆ–ç£ç›˜æ‰«æä¿å­˜çš„æ–‡ä»¶ç¢Žç‰‡recycled è¿™å°±æ˜¯å›žæ”¶ç«™ã€‚prefetch é¢„è¯»å–æ–‡ä»¶å¤¹ã€‚ç”¨æ¥å­˜æ”¾ç³»ç»Ÿå·²è®¿é—®è¿‡çš„æ–‡ä»¶çš„é¢„è¯»ä¿¡æ¯ï¼Œæ‰©å±•åä¸ºPFã€‚ä¹‹æ‰€ä»¥è‡ªåŠ¨åˆ›å»ºPrefetchæ–‡ä»¶å¤¹ï¼Œæ˜¯ä¸ºäº†åŠ å¿«ç³»ç»Ÿå¯åŠ¨çš„è¿›ç¨‹.temp æ˜¯ä¸´æ—¶æ–‡ä»¶å¤¹cookies æ˜¯IEæµè§ˆå™¨ä¸‹çš„æ–‡ä»¶å¤¹ï¼Œä¸»è¦è®°å½•ä½ æµè§ˆç½‘é¡µä¿¡æ¯ï¼ŒåŒ…æ‹¬ï¼šç½‘å€ã€ç¼©ç•¥å›¾ã€IDç­‰ã€‚å½“ä½ å†æ¬¡æµè§ˆè¿™äº›ç½‘é¡µæ—¶ï¼Œå°±ä¸å†éœ€è¦ä¸‹è½½æŸäº›å›¾ç‰‡ã€è¾“å…¥IDã€å¯†ç ç­‰ï¼Œå¯ä»¥æé«˜ç½‘é¡µæ‰“å¼€çš„é€Ÿåº¦ï¼Œæé«˜æµè§ˆé€Ÿåº¦ã€‚local settings æ–‡ä»¶å¤¹æ˜¯Windowsæ“ä½œç³»ç»Ÿä¸­ä¸€ä¸ªéšè—æ–‡ä»¶å¤¹ï¼Œæˆ‘ä»¬åœ¨ä¸Šç½‘ä¸­äº§ç”Ÿçš„åŽ†å²è®°å½•ç¼“å­˜éƒ½å­˜æ”¾åœ¨local settingsè¿™ä¸ªæ–‡ä»¶å¤¹ä¸­ã€‚Recent æ˜¯ç³»ç»Ÿæ–‡ä»¶å¤¹ï¼Œé‡Œé¢å­˜æ”¾ç€ä½ æœ€è¿‘ä½¿ç”¨çš„æ–‡æ¡£çš„å¿«æ·æ–¹å¼ï¼Œä»¥æ–¹ä¾¿ä½ å†æ¬¡è®¿é—®ã€‚ä¸æŽ¨èåˆ é™¤ï¼Œå› ä¸ºè¿™äº›æ–‡ä»¶éƒ½æ˜¯å¿«æ·æ–¹å¼ï¼Œä¸ä¼šå ç”¨ä½ å¤šå°‘å†…å­˜ç©ºé—´çš„ã€‚%USERPROFILE% =C:\Users\ç”¨æˆ·å%SystemRoot% =C:\WINDOWS%SystemDrive% =C:%APPDATA% =C:\Users\ç”¨æˆ·å\AppData\Roaming%LOCALAPPDATA% =C:\Users\ç”¨æˆ·å\AppData\Local%windir% =C:\WINDOWS%Path% =C:\Windows\system32;C:\Windows; %ProgramData% =C:\ProgramData%ProgramFiles% =C:\Program Files%ProgramFiles(x86)% =C:\Program Files (x86)************************æ³¨é‡Šç»“æŸ**********************:handel /f /s /q %systemdrive%\*.tmpdel /f /s /q %systemdrive%\*._mpdel /f /s /q %systemdrive%\*.logdel /f /s /q %systemdrive%\*.giddel /f /s /q %systemdrive%\*.chkdel /f /s /q %systemdrive%\*.olddel /f /s /q %systemdrive%\recycled\*.*del /f /s /q %windir%\*.bakdel /f /s /q %windir%\prefetch\*.*rd /s /q %windir%\temp &amp; md %windir%\tempdel /f /q %userprofile%\cookies\*.*del /f /q %userprofile%\recent\*.*del /f /s /q "%userprofile%\Local Settings\Temporary Internet Files\*.*"del /f /s /q "%userprofile%\Local Settings\Temp\*.*"del /f /s /q "%userprofile%\recent\*.*"echo æ¸…é™¤ç³»ç»ŸLJå®Œæˆï¼echo. &amp; pauseÂ¶é€šè¿‡è½¯é“¾æŽ¥è¿ç§»ç›®å½•æ–¹æ¡ˆÂ¶1. æ¦‚è¿°ç¬¬äºŒç§æ–¹æ¡ˆæ˜¯é’ˆå¯¹äºŽä¸èƒ½åˆ é™¤æˆ–è€…ä¸æ¸…æ¥šæ˜¯å¦å¯ä»¥åˆ é™¤çš„æƒ…å†µï¼Œå³é€šè¿‡å°†Cç›˜ä¸­çš„ç›®å½•ç§»åŠ¨åˆ°å…¶ä»–ç›˜çš„ç›®å½•ï¼Œç„¶åŽå†åœ¨Cç›˜åŽŸç›®å½•ä¸‹å»ºç«‹åŒåçš„è½¯é“¾æŽ¥æŒ‡å‘æ–°ç›®å½•ï¼Œè½¯é“¾æŽ¥æœ¬èº«å‡ ä¹Žä¸å ç”¨å­˜å‚¨ç©ºé—´ï¼ˆå‡ ä¸ªå­—èŠ‚ï¼‰ï¼Œè¿™ç§æ–¹å¼å³èƒ½èŠ‚çœCç›˜ç©ºé—´åˆä¸å½±å“æ“ä½œç³»ç»Ÿå’Œåº”ç”¨ç¨‹åºçš„è¿è¡Œã€‚å¦å¤–è¿™ç§æ–¹å¼çš„ä¼˜ç‚¹å°±æ˜¯æ¯”è¾ƒçœå¿ƒï¼Œä¸ç”¨å®šæœŸæ¸…ç†Cç›˜ã€‚Â¶2. è¿ç§»ç›®å½•å¹¶åˆ›å»ºè½¯é“¾æŽ¥Â¶æ–¹å¼1ï¼šcmdå‘½ä»¤è¿ç§»ç®¡ç†å‘˜èº«ä»½è¿è¡Œcmdå‘½ä»¤æ‰§è¡Œï¼š12345678910#åˆ›å»ºç›®å½•mkdir æ–°ç›®å½•è·¯å¾„#å¤åˆ¶åŽŸç›®å½•æ–‡ä»¶åˆ°æ–°ç›®å½•ï¼ˆç”±äºŽWindows11ä¸Šmoveå‘½ä»¤æ— æ³•è·¨ç›˜ç¬¦ç§»åŠ¨ï¼Œæ•…æ”¹ç”¨xcopy+rdå®žçŽ°ï¼‰xcopy /s /e /h /y åŽŸç›®å½•è·¯å¾„ æ–°ç›®å½•è·¯å¾„#åˆ é™¤åŽŸç›®å½•rd /s /q åŽŸç›®å½•è·¯å¾„#åˆ›å»ºè½¯é“¾æŽ¥ï¼ˆåŽŸç›®å½•ï¼‰mklink /D åŽŸç›®å½•è·¯å¾„ æ–°ç›®å½•è·¯å¾„å¯ä»¥é€šè¿‡ SpaceSniffer å·¥å…·æŸ¥æ‰¾å‡ºC:/Users/%username%ç›®å½•é‡Œç©ºé—´å ç”¨æ¯”è¾ƒå¤§çš„ç›®å½•ï¼Œç„¶åŽé€šè¿‡é€‰æ‹©æ€§çš„è¿›è¡Œå¤„ç†ã€‚å»ºè®®åŽŸç›®å½•å’Œæ–°ç›®å½•é‡Œçš„å­ç›®å½•ä¿æŒä¸€è‡´ï¼Œè¿™æ ·ä¹Ÿæ›´å¥½ç»´æŠ¤ä¸€ç‚¹ï¼Œä¹Ÿèƒ½åŽŸç›®å½•å’Œæ–°ç›®å½•çš„å­ç›®å½•ç›¸å¯¹è·¯å¾„ä¸€è‡´ï¼ŒæŸ¥æ‰¾èµ·æ¥ä¹Ÿæ¯”è¾ƒæ–¹ä¾¿ã€‚ðŸ’â€â™‚ æç¤ºï¼šè¯·åŠ¡å¿…ç¡®ä¿æ‰€æ“ä½œçš„ç›®å½•æ²¡æœ‰è¢«ç¨‹åºå ç”¨ï¼Œä¸€å®šæ³¨æ„è¦æŠŠç›¸å…³ç›®å½•å ç”¨çš„ç¨‹åºå…³æŽ‰ï¼ˆæ¯”å¦‚QQã€Chromeç­‰ï¼‰ï¼Œå¦åˆ™è¿ç§»å¤±è´¥ã€‚ðŸ“‘ ç¤ºä¾‹ï¼šé€šè¿‡è½¯é“¾æŽ¥è¿ç§»è…¾è®¯è½¯ä»¶ï¼ˆQQã€å¾®ä¿¡ç­‰ï¼‰çš„æ•°æ®å’Œç¼“å­˜ç›®å½•1234mkdir E:\Cache\SymlinkData\AppData\Local\Googlexcopy /s /e /h /y C:\Users\%username%\AppData\Roaming\Tencent E:\Cache\SymlinkData\AppData\Roaming\Tencentrd /s /q C:\Users\%username%\AppData\Roaming\Tencentmklink /D C:\Users\%username%\AppData\Roaming\Tencent E:\Cache\SymlinkData\AppData\Roaming\TencentðŸ”– å¸¸è§çš„éœ€è¦è¿ç§»çš„ç›®å½•å¦‚ä¸‹ï¼š123456789101112131415##ï¼ˆ1ï¼‰Chromeæ•°æ®å’Œç¼“å­˜ç›®å½•ï¼šC:\Users\%username%\AppData\Local\Google #å¯è¿ç§»è‡³ï¼šE:\Cache\SymlinkData\AppData\Local\Google##ï¼ˆ2ï¼‰è…¾è®¯è½¯ä»¶ï¼ˆQQã€å¾®ä¿¡ç­‰ï¼‰çš„æ•°æ®å’Œç¼“å­˜ç›®å½•ï¼šC:\Users\%username%\AppData\Roaming\Tencent #å¯è¿ç§»è‡³ï¼šE:\Cache\SymlinkData\AppData\Roaming\Tencent##ï¼ˆ3ï¼‰vscode#vscodeæ’ä»¶ç›®å½•ï¼šC:\Users\%username%\.vscode #å¯è¿ç§»è‡³ï¼šE:\Cache\SymlinkData\.vscode#vscodeæ•°æ®ç›®å½•ï¼šC:\Users\%username%\AppData\Roaming\Code #å¯è¿ç§»è‡³ï¼šE:\Cache\SymlinkData\AppData\Roaming\Code#vscodeç¼“å­˜ç›®å½•ï¼ˆCç›˜æ²¡æœ‰æ•°æ®çš„è¯å¯ä»¥ä¸è¿ç§»ï¼‰ï¼šC:\Users\%username%\AppData\Local\Programs\Microsoft VS Code #å¯è¿ç§»è‡³ï¼šE:\Cache\SymlinkData\AppData\Local\Programs\Microsoft VS Code#vscode C/C++ç¼–è¯‘ç¼“å­˜ç›®å½•ï¼šC:\Users\%username%\AppData\Local\Microsoft\vscode-cpptools #å¯è¿ç§»è‡³ï¼šE:\Cache\SymlinkData\AppData\Local\Microsoft\vscode-cpptoolsÂ¶æ–¹å¼2ï¼šæ‰¹å¤„ç†è„šæœ¬è¿ç§»å¦‚æžœä»¥ä¸Šæ“ä½œæ¯”è¾ƒéº»çƒ¦ä¹Ÿå¯ä»¥å°†è¿™äº›å‘½ä»¤å†™æˆè„šæœ¬æ‰§è¡Œï¼Œå¦‚ä¸‹ï¼šåˆ›å»ºè„šæœ¬æ–‡ä»¶ï¼šé€šè¿‡è½¯é“¾æŽ¥è¿ç§»ç›®å½•.bat123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165@echo offsetlocal enabledelayedexpansion::------------------------------ è‡ªåŠ¨æå‡è¿è¡Œæƒé™ ------------------------------:::BatchGetAdmin&gt;nul 2&gt;&amp;1 "%Windir%\System32\cacls.exe" "%Windir%\System32\config\system"if '%ERRORLEVEL%' NEQ '0' (echo æ­£åœ¨èŽ·å–ç®¡ç†å‘˜æƒé™...goto UACPrompt) else ( goto gotAdmin ):UACPromptecho Set UAC = CreateObject^("Shell.Application"^) &gt; "%TEMP%\getAdmin.vbs"echo UAC.ShellExecute "%~s0", "", "", "runas", 1 &gt;&gt; "%TEMP%\getAdmin.vbs""%TEMP%\getAdmin.vbs"exit:gotAdminif exist "%TEMP%\getadmin.vbs" ( del "%TEMP%\getadmin.vbs" )pushd "%cd%"cd /d "%~dp0"::------------------------------------------------------------------------------:::menuclsecho. ------------------------------------------------------------echo. æŒ‡ä»¤èœå•ï¼š echo. 1.å¼€å§‹è¿ç§»ç›®å½• echo. 2.åªåˆ›å»ºè½¯é“¾æŽ¥ echo. 3.é€€å‡º echo. ------------------------------------------------------------set choose=""set /p choose= è¯·è¾“å…¥æŒ‡ä»¤[1/2/3]:if /i "%choose%"=="1" (goto:start)if /i "%choose%"=="2" (goto:tolink)if /i "%choose%"=="3" (goto:exit) else ( goto:menu ):start@REM gotoæ¨ªè¡Œçš„ä»£ç ä¸­ï¼Œæœ€å¥½é‡ç½®ä¸€ä¸‹å˜é‡çš„å€¼ï¼Œå¦åˆ™å¯èƒ½ä¼šå˜é‡æ±¡æŸ“set old_path_dir=""@REM éœ€è¦è¿ç§»çš„åŽŸç›®å½•è·¯å¾„set /p old_path_dir=éœ€è¦è¿ç§»çš„åŽŸç›®å½•è·¯å¾„ï¼šfor /f "delims=" %%i in ('echo %old_path_dir%') do set old_path_dir_value=%%iif not exist "%old_path_dir_value%" ( cls &amp; echo. &amp;&amp; echo åŽŸç›®å½•ä¸å­˜åœ¨ï¼ pause goto:menu)@REM éœ€è¦è¿ç§»çš„æ–°ç›®å½•è·¯å¾„set new_path_dir=""set /p new_path_dir=éœ€è¦è¿ç§»çš„æ–°ç›®å½•è·¯å¾„ï¼šfor /f "delims=" %%i in ('echo %new_path_dir%') do set new_path_dir_value=%%iif "%new_path_dir_value%"=="" ( cls &amp; echo. &amp;&amp; echo è¾“å…¥éžæ³•ï¼Œè¯·é‡è¯•ï¼ pause goto:menu)if exist "%new_path_dir_value%" ( cls &amp; echo. &amp;&amp; echo %new_path_dir_value% ç›®å½•å·²å­˜åœ¨ï¼ pause goto:menu):confirmset is_confirm=""set /p is_confirm=è¯·åŠ¡å¿…ç¡®ä¿æ‰€æ“ä½œçš„ç›®å½•æ²¡æœ‰è¢«ç¨‹åºå ç”¨ï¼Œç¡®è®¤è¾“å…¥y å¦è¾“å…¥nï¼šif /i not "%is_confirm%" == "y" if /i not "%is_confirm%" == "n" ( echo è¯·è¾“å…¥ y æˆ– n goto:confirm) else if /i "%is_confirm%" == "n" ( goto:menu)@REM åˆ›å»ºæ–°ç›®å½•mkdir "%new_path_dir_value%"echo åˆ›å»ºæ–°ç›®å½•%new_path_dir_value%å®Œæˆ@REM ç§»åŠ¨åŽŸç›®å½•åˆ°æ–°ç›®å½•ï¼Œç”±äºŽWindows11ä¸Šmoveå‘½ä»¤æ— æ³•è·¨ç›˜ç¬¦ç§»åŠ¨ï¼Œæ•…æ”¹ç”¨xcopy+delå®žçŽ°xcopy /s /e /h /y "%old_path_dir_value%" "%new_path_dir_value%"@REM echo "====%ERRORLEVEL%====="if %ERRORLEVEL% NEQ 0 ( cls &amp; echo. &amp;&amp; echo å¤åˆ¶ç›®å½•æ–‡ä»¶å¤±è´¥ï¼è¯·æŽ’æŸ¥æ˜¯å¦æœ‰ç¨‹åºå ç”¨%old_path_dir_value%ç›®å½•çš„æ–‡ä»¶ï¼ pause goto:menu)@REM åˆ é™¤åŽŸç›®å½•rd /s /q "%old_path_dir_value%"if exist "%old_path_dir_value%" ( cls &amp; echo. &amp;&amp; echo åˆ é™¤åŽŸç›®å½•å¤±è´¥,è¯·æŽ’æŸ¥æ˜¯å¦æœ‰ç¨‹åºå ç”¨ç›¸å…³ç›®å½•å†…çš„æ–‡ä»¶ï¼ set is_confirm_rd="" set /p is_confirm_rd=æ˜¯å¦éœ€è¦åˆ é™¤å·²å¤åˆ¶çš„æ–°ç›®å½•ï¼Œç¡®è®¤è¾“å…¥y å¦è¾“å…¥nï¼š if /i "!is_confirm_rd!" == "y" ( echo "åˆ é™¤ä¸­...." rd /s /q "!new_path_dir_value!" ) else ( echo "æ‚¨æœªåˆ é™¤å·²å¤åˆ¶çš„æ–°ç›®å½•ï¼Œå¦‚éœ€é‡è¯•åˆ™éœ€è¦è‡ªè¡Œæ‰‹åŠ¨åˆ é™¤ï¼" ) pause goto:menu)echo ç§»åŠ¨åŽŸç›®å½•åˆ°æ–°ç›®å½•å®Œæˆgoto:dolink:tolink@REM è®¾ç½®è½¯é“¾æŽ¥è·¯å¾„set old_path_dir=""set /p old_path_dir=è®¾ç½®è½¯é“¾æŽ¥è·¯å¾„ï¼šfor /f "delims=" %%i in ('echo %old_path_dir%') do set old_path_dir_value=%%iif "%old_path_dir_value%"=="" ( cls &amp; echo. &amp;&amp; echo è¾“å…¥éžæ³•ï¼Œè¯·é‡è¯•ï¼ pause goto:menu)@REM è®¾ç½®è½¯é“¾æŽ¥çš„ç›®æ ‡ç›®å½•è·¯å¾„set new_path_dir=""set /p new_path_dir=è®¾ç½®ç›®æ ‡ç›®å½•è·¯å¾„ï¼šfor /f "delims=" %%i in ('echo %new_path_dir%') do set new_path_dir_value=%%iif "%new_path_dir_value%"=="" ( cls &amp; echo. &amp;&amp; echo è¾“å…¥éžæ³•ï¼Œè¯·é‡è¯•ï¼ pause goto:menu):dolink@REM åˆ›å»ºè½¯é“¾æŽ¥if exist "%old_path_dir_value%" ( cls &amp; echo. &amp;&amp; echo %old_path_dir_value% ç›®å½•å·²å­˜åœ¨ï¼Œä¸å…è®¸åœ¨å·²å­˜åœ¨çš„ç›®å½•åˆ›å»ºé“¾æŽ¥ï¼ pause goto:menu)if not exist "%new_path_dir_value%" ( cls &amp; echo. &amp;&amp; echo ç›®æ ‡ç›®å½•ï¼š%new_path_dir_value% ä¸å­˜åœ¨ï¼ pause goto:menu)mklink /D "%old_path_dir_value%" "%new_path_dir_value%"if %ERRORLEVEL% NEQ 0 ( cls &amp; echo. &amp;&amp; echo åˆ›å»ºè½¯é“¾æŽ¥å¤±è´¥ï¼ï¼ pause goto:menu )set "tip= åˆ›å»ºè½¯é“¾æŽ¥å®Œæˆï¼š%old_path_dir_value% ==ã€‹ %new_path_dir_value%"cls &amp; echo. &amp;&amp; echo %tip%pausegoto:menu::--------------------------------- å€’è®¡æ—¶é€€å‡º ---------------------------------:::exitfor /l %%t in (3,-1,0) do ( echo. &amp; echo %%t ç§’åŽé€€å‡º... choice.exe /t 1 /d y /n &gt;nul)ExitÂ¶3. æŸ¥æ‰¾åˆ›å»ºçš„è½¯é“¾æŽ¥åœ¨åŽæœŸçš„ç»´æŠ¤ä¸­åˆ›å»ºçš„è½¯é“¾æŽ¥è¶Šæ¥è¶Šå¤šï¼Œéœ€è¦æ‰¾å‡ºåˆ›å»ºçš„è½¯é“¾æŽ¥å’Œå…¶æŒ‡å‘è·¯å¾„å°±ä¼šå˜å¾—å¾ˆéº»çƒ¦ã€‚ä¸‹é¢ç»™å‡ºå‡ ç§æŸ¥æ‰¾å·²åˆ›å»ºè½¯é“¾æŽ¥çš„æ–¹å¼ã€‚Â¶æ–¹å¼1ï¼šcmdå‘½ä»¤æŸ¥æ‰¾å¯ä»¥é€šè¿‡å¦‚ä¸‹cmdå‘½ä»¤æŸ¥æ‰¾å·²åˆ›å»ºè½¯é“¾æŽ¥ï¼Œæ“ä½œå¦‚ä¸‹ï¼š1234#æŸ¥çœ‹æŸç›®å½•åŠå…¶å­ç›®å½•ä¸‹çš„æ‰€æœ‰è½¯è½¯é“¾æŽ¥dir /a:l /s#å¦‚æžœæ‰“å°çš„å†…å®¹æ¯”è¾ƒå¤šè¿˜å¯ä»¥è¿›ä¸€æ­¥è¿‡æ»¤dir /a:l /s | findstr /r "SYMLINKD"Â¶æ–¹å¼2ï¼špythonè„šæœ¬æŸ¥æ‰¾å¦‚æžœä¸Šé¢çš„cmdå‘½ä»¤æŸ¥æ‰¾ä¸ç†æƒ³ï¼Œè¿˜å¯ä»¥é€šè¿‡æ‰§è¡Œpythonè„šæœ¬æ¥æŸ¥æ‰¾ï¼Œæ“ä½œå¦‚ä¸‹ï¼šåˆ›å»ºè„šæœ¬æ–‡ä»¶ï¼šget_symlinks.py1234567891011121314151617181920212223242526import osimport tkinterfrom tkinter import filedialogdef get_symlinks(path): count = 0 for root, dirs, files in os.walk(path): for name in dirs + files: fullpath = os.path.join(root, name) if os.path.islink(fullpath): print(f"&#123;fullpath&#125; -&gt; &#123;os.readlink(fullpath)&#125;") count += 1 if count == 0: print("è¯¥ç›®å½•ä¸‹æ²¡æœ‰è½¯é“¾æŽ¥ï¼")if __name__ == '__main__': tk = tkinter.Tk() tk.withdraw() directory = filedialog.askdirectory( initialdir='C:\\Users\\'+os.environ.get("username")) if len(directory) == 0: exit(1) get_symlinks(directory)Â¶4. å…¶ä»–è¯´æ˜Žï¼ˆ1ï¼‰å…³äºŽå¿«æ·æ–¹å¼å’Œè½¯é“¾æŽ¥çš„è¯´æ˜Žå¿«æ·æ–¹å¼(shortcut)ï¼šå®žé™…ä¸Šæ˜¯ä¸€ä¸ªåŽç¼€.linkçš„æ–‡ä»¶ï¼Œåˆ é™¤å¿«æ·æ–¹å¼æ–‡ä»¶ä¸å½±å“åŽŸå§‹æ–‡ä»¶ï¼Œåˆ é™¤åŽŸå§‹æ–‡ä»¶åˆ™å¿«æ·æ–¹å¼æ–‡ä»¶å°†å˜æˆæ— æ•ˆæ–‡ä»¶ã€‚è¿™ä¸ªæ–‡ä»¶åªæœ‰åœ¨windowså›¾å½¢ç•Œé¢ä¸‹ç‚¹å‡»æ‰èƒ½åˆ°è¾¾ç›®æ ‡æ–‡ä»¶è·¯å¾„ï¼Œåœ¨å‘½ä»¤è¡Œä¸‹ä»…æ˜¯ä¸€ä¸ªæ–‡ä»¶ï¼Œç¨‹åºä¸ä¼šå°†å…¶å½“ä½œé“¾æŽ¥ã€‚è½¯é“¾æŽ¥(symbolic link)ï¼šä¹Ÿç§°ç¬¦å·é“¾æŽ¥ï¼Œæœ¬è´¨æ˜¯ä¸€ä¸ªæŒ‡å‘æ–‡ä»¶æˆ–ç›®å½•çš„æŒ‡é’ˆæ–‡ä»¶ï¼Œåˆ é™¤è½¯é“¾æŽ¥æ–‡ä»¶ä¸å½±å“åŽŸå§‹æ–‡ä»¶ï¼Œåˆ é™¤åŽŸå§‹æ–‡ä»¶åˆ™è½¯é“¾æŽ¥æ–‡ä»¶å°†å˜æˆæ— æ•ˆæ–‡ä»¶ã€‚è¿™ä¸ªæ–‡ä»¶åœ¨å›¾å½¢ç•Œé¢ä¸Žå¿«æ·æ–¹å¼æ— å¼‚ï¼Œä½†åœ¨å‘½ä»¤è¡Œä¸‹ç¨‹åºä¼šæŠŠå®ƒå½“åšä¸€ä¸ªé“¾æŽ¥ã€‚]]></content>
      <categories>
        <category>windows</category>
      </categories>
      <tags>
        <tag>windows</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[lvså­¦ä¹ ç¬”è®°]]></title>
    <url>%2Fdevops%2Flvs.html</url>
    <content type="text"><![CDATA[Â¶ä¸€ã€ç®€è¦æ¦‚è¿°LVSï¼ˆLinux Virtual Serverï¼‰æ˜¯åœ¨ LInux ä¸­çš„ä¸€ç§åŸºäºŽç½‘ç»œå±‚çš„é«˜æ€§èƒ½è´Ÿè½½å‡è¡¡æŠ€æœ¯ã€‚LVS çš„æ ¸å¿ƒæ¨¡å—ï¼ˆå³ ipvsï¼‰å·²è¢«é›†æˆåˆ° Linux å†…æ ¸ä¸­ã€‚LVS æ˜¯ç« æ–‡åµ©åšå£«ä¸»å¯¼çš„å¼€æºçš„è´Ÿè½½å‡è¡¡é¡¹ç›®ã€‚æ³¨æ„ï¼šLVS æ˜¯åŸºäºŽç½‘ç»œå±‚çš„è´Ÿè½½å‡è¡¡è§£å†³æ–¹æ¡ˆï¼Œé€šè¿‡ IP æ•°æ®åŒ…è½¬å‘å®žçŽ°è´Ÿè½½å‡è¡¡ã€‚HAProxy å’Œ Nginx æ˜¯åŸºäºŽåº”ç”¨å±‚çš„è´Ÿè½½å‡è¡¡è§£å†³æ–¹æ¡ˆï¼Œé€šè¿‡ä»£ç†è¯·æ±‚å’Œå“åº”æ¥å®žçŽ°è´Ÿè½½å‡è¡¡ã€‚LVS ç”±äºŽæ˜¯åŸºäºŽç½‘ç»œå±‚çš„ä¸”ç›´æŽ¥åœ¨å†…æ ¸å±‚è¿›è¡Œæ“ä½œçš„ï¼Œæ•…ç›¸å¯¹äºŽå¯¹äºŽ Nginx å…·æœ‰æ›´ä½³çš„æ€§èƒ½å’Œåžåé‡ã€‚ä½†ç”±äºŽå…¶åŸºäºŽç½‘ç»œå±‚æ— æ³•å¤„ç†æ•°æ®æŠ¥æ–‡ä»¥å¯¼è‡´æ— æ³•åƒ Nginx é‚£æ ·åŸºäºŽ URL åšè´Ÿè½½å‡è¡¡ï¼Œæ•…åœ¨å®žé™…ç”Ÿäº§çŽ¯å¢ƒä¸‹é€šå¸¸åŒæ—¶ä½¿ç”¨ LVS + Nginx å…±åŒå®žçŽ°è´Ÿè½½å‡è¡¡éœ€æ±‚ï¼ˆå³ LVS è´Ÿè´£ IP æµé‡åˆ†æµåˆ° Nginxï¼ŒNginx è´Ÿè´£æ ¹æ®æ•°æ®æŠ¥æ–‡ï¼ˆå¦‚ï¼šURLç­‰ï¼‰è¿›è¡Œè¿žæŽ¥åˆ†æµï¼‰ï¼Œè¿™æ ·çš„ç»„åˆæž¶æž„å……åˆ†å‘æŒ¥äº†LVSçš„æ€§èƒ½ä¼˜åŠ¿å’ŒNginxçš„é«˜çº§åŠŸèƒ½ï¼Œæ»¡è¶³äº†ä¸åŒå±‚æ¬¡çš„è´Ÿè½½å‡è¡¡éœ€æ±‚ã€‚Â¶äºŒã€LVS å·¥ä½œæ¨¡å¼LVSï¼ˆLinux Virtual Serverï¼‰æ˜¯ä¸€ä¸ªå¼€æºçš„è´Ÿè½½å‡è¡¡è§£å†³æ–¹æ¡ˆï¼Œå®ƒæä¾›äº†å¤šç§å·¥ä½œæ¨¡å¼æ¥å®žçŽ°è´Ÿè½½å‡è¡¡å’Œé«˜å¯ç”¨æ€§ã€‚LVSæœ‰ä¸‰ç§ä¸»è¦å·¥ä½œæ¨¡å¼ï¼Œå³ï¼šNAT æ¨¡å¼ã€TUN æ¨¡å¼ã€DR æ¨¡å¼ã€‚æ¯ç§å·¥ä½œæ¨¡å¼éƒ½æœ‰å…¶é€‚ç”¨çš„åœºæ™¯å’Œç‰¹ç‚¹ï¼Œé€‰æ‹©åˆé€‚çš„æ¨¡å¼å–å†³äºŽå…·ä½“çš„éœ€æ±‚å’ŒçŽ¯å¢ƒã€‚ï¼Œé€šå¸¸ NAT æ¨¡å¼ã€å°¤å…¶æ˜¯ DR æ¨¡å¼æ˜¯åº”ç”¨æ¯”è¾ƒå¤šçš„ä¸¤ç§æ¨¡å¼ã€‚æç¤ºï¼šä¸€èˆ¬è€Œè¨€ï¼ŒNATæ¨¡å¼å’ŒDRæ¨¡å¼ä¸‹çš„LVSå·¥ä½œåœ¨ç½‘ç»œå±‚ï¼Œè€ŒTUNæ¨¡å¼ä¸‹çš„LVSå·¥ä½œåœ¨ä¼ è¾“å±‚Â¶NAT æ¨¡å¼NATï¼ˆNetwork Address Translationï¼‰æ¨¡å¼ï¼šä¹Ÿç§°ç½‘ç»œåœ°å€è½¬æ¢æ¨¡å¼ã€‚åœ¨NATæ¨¡å¼ä¸‹ï¼ŒLVSä½œä¸ºä¸€ä¸ªç½‘ç»œå±‚çš„è´Ÿè½½å‡è¡¡å™¨ï¼Œå°†å®¢æˆ·ç«¯è¯·æ±‚çš„æ•°æ®åŒ…çš„ç›®æ ‡IPåœ°å€å’Œç«¯å£ä¿®æ”¹ä¸ºåŽç«¯æœåŠ¡å™¨çš„IPåœ°å€å’Œç«¯å£ï¼Œç„¶åŽå°†æ•°æ®åŒ…è½¬å‘ç»™åŽç«¯æœåŠ¡å™¨ã€‚å½“åŽç«¯æœåŠ¡å™¨è¿”å›žå“åº”æ—¶ï¼ŒLVSå†å°†å“åº”çš„æ•°æ®åŒ…çš„æºIPåœ°å€å’Œç«¯å£ä¿®æ”¹ä¸ºè´Ÿè½½å‡è¡¡å™¨çš„IPåœ°å€å’Œç«¯å£ï¼Œå†å°†å“åº”å‘é€ç»™å®¢æˆ·ç«¯ã€‚NATæ¨¡å¼é€‚ç”¨äºŽè´Ÿè½½å‡è¡¡å’Œç½‘ç»œåœ°å€è½¬æ¢çš„åœºæ™¯ã€‚NAT æ¨¡å¼é›†ç¾¤ç½‘ç»œæ‹“æ‰‘ç±»ä¼¼äºŽ Nginxã€‚ä½† LVS å’Œ Nginx çš„å®žçŽ°åŽŸç†ä¸åŒï¼ŒNginx çš„å®žçŽ°åŽŸç†æ˜¯ä»£ç†ï¼Œè€Œ LVS NATæ¨¡å¼çš„å®žçŽ°åŽŸç†æ˜¯æµé‡ï¼ˆæ•°æ®åŒ…ï¼‰è½¬å‘ï¼Œå¯ä»¥ç†è§£ LVS ä¸ºè·¯ç”±å™¨ã€‚ä»£ç†å’Œæ•°æ®åŒ…è½¬å‘çš„åŒºåˆ«ï¼šä»£ç†å’Œæ•°æ®åŒ…è½¬å‘æ˜¯ä¸¤ç§ä¸åŒçš„ç½‘ç»œé€šä¿¡æ–¹å¼ï¼Œå®ƒä»¬åœ¨å®žçŽ°åŽŸç†å’ŒåŠŸèƒ½ä¸Šæœ‰ä¸€äº›åŒºåˆ«ã€‚ï¼ˆ1ï¼‰æ¦‚å¿µï¼šä»£ç†æ˜¯ä¸€ç§é€šè¿‡ä¸­é—´æœåŠ¡å™¨æ¥è½¬å‘ç½‘ç»œè¯·æ±‚å’Œå“åº”çš„æ–¹å¼ã€‚å½“å®¢æˆ·ç«¯å‘é€è¯·æ±‚æ—¶ï¼Œè¯·æ±‚é¦–å…ˆå‘é€ç»™ä»£ç†æœåŠ¡å™¨ï¼Œç„¶åŽä»£ç†æœåŠ¡å™¨å†å°†è¯·æ±‚å‘é€åˆ°ç›®æ ‡æœåŠ¡å™¨ï¼Œå¹¶å°†å“åº”è¿”å›žç»™å®¢æˆ·ç«¯ã€‚ä»£ç†æœåŠ¡å™¨åœ¨è¯·æ±‚å’Œå“åº”çš„ä¼ é€’è¿‡ç¨‹ä¸­å¯ä»¥å¯¹æ•°æ®è¿›è¡Œä¿®æ”¹ã€è¿‡æ»¤æˆ–ç¼“å­˜ï¼Œè¿˜å¯ä»¥å®žçŽ°è´Ÿè½½å‡è¡¡å’Œå†…å®¹è·¯ç”±ç­‰åŠŸèƒ½ã€‚ä»£ç†é€šå¸¸å·¥ä½œåœ¨åº”ç”¨å±‚ï¼Œä¾‹å¦‚ HTTP ä»£ç†ï¼ˆå¦‚ Nginxã€Apacheï¼‰ã€åå‘ä»£ç†ç­‰ã€‚æ•°æ®åŒ…è½¬å‘æ˜¯ä¸€ç§ç›´æŽ¥å°†ç½‘ç»œæ•°æ®åŒ…ä»Žæºåœ°å€è½¬å‘åˆ°ç›®æ ‡åœ°å€çš„æ–¹å¼ã€‚æ•°æ®åŒ…è½¬å‘é€šå¸¸åœ¨ç½‘ç»œå±‚è¿›è¡Œï¼Œé€šè¿‡è·¯ç”±å™¨æˆ–äº¤æ¢æœºç­‰ç½‘ç»œè®¾å¤‡è¿›è¡Œæ•°æ®åŒ…çš„è½¬å‘ã€‚æ•°æ®åŒ…è½¬å‘æ˜¯åŸºäºŽ IP åœ°å€å’Œç«¯å£å·æ¥å†³å®šè½¬å‘è·¯å¾„çš„ï¼Œå®ƒä¸ä¼šä¿®æ”¹è¯·æ±‚å’Œå“åº”çš„å†…å®¹ï¼Œåªè´Ÿè´£å°†æ•°æ®åŒ…ä»Žæºè®¾å¤‡è½¬å‘åˆ°ç›®æ ‡è®¾å¤‡ã€‚å¸¸è§çš„æ•°æ®åŒ…è½¬å‘æŠ€æœ¯åŒ…æ‹¬ IP è·¯ç”±ã€ç½‘ç»œåœ°å€è½¬æ¢ï¼ˆNATï¼‰ç­‰ã€‚ï¼ˆ2ï¼‰åŒºåˆ«ï¼šä»£ç†æ˜¯åœ¨åº”ç”¨å±‚å·¥ä½œï¼Œå¯ä»¥å¯¹æ•°æ®è¿›è¡Œå¤„ç†å’Œä¿®æ”¹ï¼Œå¯ä»¥å®žçŽ°æ›´çµæ´»çš„åŠŸèƒ½ï¼Œå¦‚è´Ÿè½½å‡è¡¡ã€ç¼“å­˜ã€å®‰å…¨è¿‡æ»¤ç­‰ã€‚æ•°æ®åŒ…è½¬å‘æ˜¯åœ¨ç½‘ç»œå±‚å·¥ä½œï¼Œä¸»è¦è´Ÿè´£å°†æ•°æ®åŒ…ä»Žæºåœ°å€è½¬å‘åˆ°ç›®æ ‡åœ°å€ï¼Œä¸ä¼šå¯¹æ•°æ®åŒ…è¿›è¡Œä¿®æ”¹ã€‚ä»£ç†é€šå¸¸éœ€è¦å¯¹è¯·æ±‚è¿›è¡Œè§£æžå’Œé‡æ–°å°è£…ï¼Œå› æ­¤ä¼šæœ‰ä¸€å®šçš„æ€§èƒ½å¼€é”€ã€‚æ•°æ®åŒ…è½¬å‘åˆ™æ›´åŠ ç›´æŽ¥å’Œé«˜æ•ˆï¼Œå› ä¸ºå®ƒåªæ¶‰åŠæ•°æ®åŒ…çš„è½¬å‘ã€‚ä»£ç†é€šå¸¸å·¥ä½œåœ¨è¾¹ç¼˜èŠ‚ç‚¹ï¼Œç›´æŽ¥ä¸Žå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨äº¤äº’ï¼Œå¯ä»¥åœ¨ä¸¤è€…ä¹‹é—´èµ·åˆ°ä¸­é—´å±‚çš„ä½œç”¨ã€‚æ•°æ®åŒ…è½¬å‘é€šå¸¸åœ¨ç½‘ç»œè®¾å¤‡ä¸Šè¿›è¡Œï¼Œä½œç”¨äºŽæ•´ä¸ªç½‘ç»œä¸­çš„æ•°æ®åŒ…è½¬å‘è¿‡ç¨‹ã€‚ï¼ˆ3ï¼‰é€‚ç”¨åœºæ™¯ï¼šé€‰æ‹©ä½¿ç”¨ä»£ç†è¿˜æ˜¯æ•°æ®åŒ…è½¬å‘å–å†³äºŽå…·ä½“çš„éœ€æ±‚å’Œåœºæ™¯ã€‚ä»£ç†é€‚åˆéœ€è¦å¯¹è¯·æ±‚å’Œå“åº”è¿›è¡Œå¤„ç†å’Œä¿®æ”¹çš„åœºæ™¯ï¼Œè€Œæ•°æ®åŒ…è½¬å‘é€‚åˆéœ€è¦ç›´æŽ¥è½¬å‘ç½‘ç»œæ•°æ®åŒ…çš„åœºæ™¯ã€‚Â¶TUN æ¨¡å¼TUNï¼ˆTunnelingï¼‰æ¨¡å¼ï¼šä¹Ÿç§° IP éš§é“æ¨¡å¼ã€‚ åœ¨TUNæ¨¡å¼ä¸‹ï¼ŒLVSå°†å®¢æˆ·ç«¯è¯·æ±‚çš„æ•°æ®åŒ…å°è£…æˆIPéš§é“ï¼Œåœ¨ä¼ è¾“å±‚ï¼ˆTCP/UDPï¼‰ä¸Šè¿›è¡Œè´Ÿè½½å‡è¡¡ã€‚LVSå°†éš§é“æ•°æ®åŒ…è½¬å‘ç»™åŽç«¯æœåŠ¡å™¨ï¼ŒåŽç«¯æœåŠ¡å™¨è¿›è¡Œè§£å°è£…å¹¶å¤„ç†è¯·æ±‚ã€‚åŽç«¯æœåŠ¡å™¨å°†å“åº”çš„æ•°æ®åŒ…è¿”å›žç»™LVSï¼ŒLVSå†å°†å“åº”å°è£…æˆéš§é“æ•°æ®åŒ…å‘é€ç»™å®¢æˆ·ç«¯ã€‚TUNæ¨¡å¼é€‚ç”¨äºŽéœ€è¦åœ¨ä¼ è¾“å±‚è¿›è¡Œè´Ÿè½½å‡è¡¡çš„åœºæ™¯ã€‚TUN æ¨¡å¼æœ‰ä¸ªç¡¬æ€§çš„è¦æ±‚æ˜¯çœŸå®žæœåŠ¡å™¨éœ€è¦æš´éœ²åœ¨å…¬ç½‘çŽ¯å¢ƒä¸‹ï¼ˆå³ç½‘å¡ IP éœ€è¦æš´éœ²åœ¨å…¬ç½‘çŽ¯å¢ƒï¼‰ï¼Œè¿™æ ·ä¼šå­˜åœ¨æ¯”è¾ƒå¤§çš„å®‰å…¨éšæ‚£ï¼Œæ•…è€ŒçœŸå®žç”Ÿäº§çŽ¯å¢ƒä¸‹ç”¨çš„æ¯”è¾ƒå°‘ã€‚Â¶DR æ¨¡å¼DRï¼ˆDirect Routingï¼‰æ¨¡å¼ï¼š ä¹Ÿç§°ç›´æŽ¥è·¯ç”±æ¨¡å¼ã€‚åœ¨DRæ¨¡å¼ä¸‹ï¼ŒLVSä½œä¸ºä¸€ä¸ªäºŒå±‚è´Ÿè½½å‡è¡¡å™¨ï¼Œå®¢æˆ·ç«¯è¯·æ±‚çš„æ•°æ®åŒ…åˆ°è¾¾è´Ÿè½½å‡è¡¡å™¨åŽï¼Œè´Ÿè½½å‡è¡¡å™¨ä¼šç›´æŽ¥å°†æ•°æ®åŒ…è½¬å‘ç»™åŽç«¯æœåŠ¡å™¨ï¼Œä¸å¯¹æ•°æ®åŒ…çš„IPåœ°å€å’Œç«¯å£è¿›è¡Œä¿®æ”¹ã€‚åŽç«¯æœåŠ¡å™¨å°†å“åº”ç›´æŽ¥å‘é€ç»™å®¢æˆ·ç«¯ï¼Œç»•è¿‡äº†è´Ÿè½½å‡è¡¡å™¨ã€‚DRæ¨¡å¼é€‚ç”¨äºŽé«˜æ€§èƒ½çš„è´Ÿè½½å‡è¡¡éœ€æ±‚ã€‚DR æ¨¡å¼ä¸‹çœŸå®žæœåŠ¡å™¨å¯ä»¥åœ¨ç§ç½‘çŽ¯å¢ƒï¼Œè€Œä¸éœ€è¦æš´éœ²åœ¨å…¬ç½‘çŽ¯å¢ƒä¸‹ï¼ŒçœŸå®žæœåŠ¡å™¨å“åº”æ—¶åªéœ€ç»è·¯ç”±å™¨è¿”å›žç»™å®¢æˆ·ç«¯å³å¯ï¼ˆå¤šä¸ªçœŸå®žæœåŠ¡å™¨å¯ä»¥ç»Ÿä¸€ä½¿ç”¨ä¸€ä¸ªè·¯ç”±å™¨ï¼Œä½†ä¸ºäº†æå‡å“åº”åžåæ€§èƒ½ä¹Ÿå¯ä»¥è€ƒè™‘ä¸ºæ¯ä¸ªçœŸå®žæœåŠ¡å™¨é…ç½®å•ç‹¬çš„è·¯ç”±å™¨ï¼Œå…·ä½“å®žçŽ°å¾…ç ”ç©¶å­¦ä¹ ï¼ˆTODOï¼‰â€¦ï¼‰ã€‚æç¤ºï¼šå¦‚æžœä»…æ˜¯å®žéªŒæµ‹è¯•ï¼Œå®¢æˆ·ç«¯ã€LVSã€çœŸå®žæœåŠ¡å™¨ç½‘ç»œè¿žé€šï¼Œå¯ä»¥ä¸ä¸ºçœŸå®žæœåŠ¡å™¨é…ç½®è·¯ç”±å™¨è€Œæ˜¯ç›´æŽ¥è¿”å›žç»™å®¢æˆ·ç«¯ã€‚Â¶ä¸‰ã€LVS NAT æ¨¡å¼é›†ç¾¤Â¶1. å‡†å¤‡çŽ¯å¢ƒï¼ˆ1ï¼‰LVS æœåŠ¡å™¨ï¼šDIPï¼š192.168.60.101VIPï¼š192.168.17.101ï¼ˆæä¾›ç»™å®¢æˆ·ç«¯è®¿é—®çš„ IPï¼‰ï¼ˆ2ï¼‰Real Server1ï¼šRIPï¼š192.168.60.201ï¼ˆå¿…é¡»é…ç½®ç½‘å…³ä¸º DIPï¼‰ï¼ˆ2ï¼‰Real Server2ï¼šRIPï¼š192.168.60.202ï¼ˆå¿…é¡»é…ç½®ç½‘å…³ä¸º DIPï¼‰æ³¨æ„ï¼šå¦‚ä»¥ä¸ŠçŽ¯å¢ƒä¸º Vmware è™šæ‹Ÿæœºï¼ŒDIP ã€VIPã€RIP çš„ Vmware ç½‘å¡ç½‘ç»œè¿žæŽ¥æ–¹å¼å¯ä¸ºä»»æ„ç½‘ç»œæ¨¡å¼ï¼Œä½†éœ€è¦æ³¨æ„ï¼ŒDIP å’Œ RIP éœ€è¦æ˜¯åŒä¸€ç½‘æ®µï¼ˆå³åŒä¸€ç½‘å¡ï¼‰ï¼Œè€Œ VIP éœ€è¦æ˜¯å¦ä¸€ç½‘æ®µï¼ˆå³å¦ä¸€ä¸ªç½‘å¡ï¼‰ã€‚æœ¬æ¬¡å®žéªŒå¯¹å‡ ä¸ªè™šæ‹Ÿæœºçš„ç½‘å¡è®¾å®šä¸ºï¼šDIP å’Œ RIP ä½¿ç”¨ VMnet8 ç½‘å¡ï¼ˆNATæ¨¡å¼ï¼‰ï¼Œè€Œ VIP ä½¿ç”¨æ–°å¢žçš„ VMnet1 ç½‘å¡ï¼ˆä»…ä¸»æœºæ¨¡å¼ï¼‰ã€‚Vmware è™šæ‹Ÿæœºé…ç½®å¦‚ä¸‹ï¼šÂ¶2. çœŸå®žæœåŠ¡å™¨é…ç½®Â¶1ï¼‰ç½‘ç»œé…ç½®Real Server1 ç½‘ç»œé…ç½®ï¼š12345678910111213141516171819202122232425#é…ç½®RIPå¹¶è®¾ç½®ç½‘å…³ä¸ºDIPcat &gt; /etc/sysconfig/network-scripts/ifcfg-ens33 &lt;&lt; 'EOF'TYPE="Ethernet"PROXY_METHOD="none"BROWSER_ONLY="no"BOOTPROTO="static"DEFROUTE="yes"IPV4_FAILURE_FATAL="no"IPV6INIT="yes"IPV6_AUTOCONF="yes"IPV6_DEFROUTE="yes"IPV6_FAILURE_FATAL="no"IPV6_ADDR_GEN_MODE="stable-privacy"NAME="ens33"UUID="4f676de2-5673-431b-b8fc-2dc4ad9accfc"DEVICE="ens33"ONBOOT="yes"IPADDR="192.168.60.201"GATEWAY="192.168.60.101"NETMASK="255.255.255.0"#DNS1="8.8.8.8"EOF#é‡å¯ç½‘ç»œservice network restartæ³¨æ„ï¼šä»¥ä¸Š GATEWAY éœ€è¦é…ç½®ä¸º DIP çš„å€¼ã€‚Real Server2 ç½‘ç»œé…ç½®ï¼š12345678910111213141516171819202122232425#é…ç½®RIPå¹¶è®¾ç½®ç½‘å…³ä¸ºDIPcat &gt; /etc/sysconfig/network-scripts/ifcfg-ens33 &lt;&lt; 'EOF'TYPE="Ethernet"PROXY_METHOD="none"BROWSER_ONLY="no"BOOTPROTO="static"DEFROUTE="yes"IPV4_FAILURE_FATAL="no"IPV6INIT="yes"IPV6_AUTOCONF="yes"IPV6_DEFROUTE="yes"IPV6_FAILURE_FATAL="no"IPV6_ADDR_GEN_MODE="stable-privacy"NAME="ens33"UUID="4f676de2-5673-431b-b8fc-2dc4ad9accfc"DEVICE="ens33"ONBOOT="yes"IPADDR="192.168.60.202"GATEWAY="192.168.60.101"NETMASK="255.255.255.0"#DNS1="8.8.8.8"EOF#é‡å¯ç½‘ç»œservice network restartÂ¶2ï¼‰éƒ¨ç½²webæœåŠ¡ï¼ˆNginxï¼‰åœ¨ Real Server1 å’Œ Real Server2 ä¸¤å°çœŸå®žæœåŠ¡å™¨ä¸Šæ‰§è¡Œä»¥ä¸‹æ­¥éª¤æ“ä½œï¼š12345678910111213141516171819202122232425262728293031323334353637#æ‹‰å–(ä¸‹è½½)é•œåƒdocker pull nginx:latest#é¦–å…ˆç®€å•è¿è¡Œä¸€ä¸ªnginxä¸´æ—¶å®¹å™¨ï¼Œç”¨äºŽå¤åˆ¶å®¹å™¨å†…éƒ¨çš„ä¸€äº›nginxç›¸å…³é‡è¦æ–‡ä»¶åˆ°å®¿ä¸»æœºdocker run -d --name nginx nginx:latest#åˆ›å»ºæ˜ å°„ç›®å½•mkdir -p /opt/nginx/&#123;conf,html,logs&#125;#å¤åˆ¶å®¹å™¨å†…éƒ¨çš„ä¸€äº›nginxç›¸å…³é‡è¦æ–‡ä»¶åˆ°æ˜ å°„ç›®å½•ä¸­(æ³¨æ„å‘½ä»¤ä¸­çš„æœ«å°¾çš„ç‚¹ï¼Œå®ƒè¡¨ç¤ºå¤åˆ¶ç›®å½•ä¸­çš„æ‰€æœ‰å†…å®¹è€Œä¸æ˜¯æ•´ä¸ªç›®å½•æœ¬èº«)docker cp nginx:/etc/nginx/. /opt/nginx/confdocker cp nginx:/usr/share/nginx/html/. /opt/nginx/htmldocker cp nginx:/var/log/nginx/. /opt/nginx/logs#åˆ é™¤nginxä¸´æ—¶å®¹å™¨docker rm -f nginx#ç”Ÿäº§çŽ¯å¢ƒä¸‹è¿è¡Œnginxå®¹å™¨#ï¼ˆ1ï¼‰ä½¿ç”¨hostç½‘ç»œæ¨¡å¼ç›´æŽ¥ä½¿ç”¨å®¿ä¸»æœºç½‘ç»œIPåœ°å€å’Œç«¯å£ï¼ˆå¯ä»¥é¿å…æ¯æ¬¡é…ç½®æ–°çš„ç›‘å¬ç«¯å£éƒ½éœ€è¦é‡æ–°docker runæ˜ å°„ç«¯å£ï¼‰#ï¼ˆ2ï¼‰é™åˆ¶å†…å­˜ä¸Šé™ä¸º200MB#ï¼ˆ3ï¼‰æŒ‡å®šæ—¶åŒºå¹¶åŒæ­¥å®¿ä¸»æœºå’Œå®¹å™¨çš„æ—¶é—´#ï¼ˆ4ï¼‰æ˜ å°„å‡ ä¸ªä¸»è¦çš„nginxç›¸å…³ç›®å½•docker run -d --name nginx \--net=host \-m 200m \-e TZ=Asia/Shanghai \-v /etc/localtime:/etc/localtime:ro \-v /opt/nginx/conf:/etc/nginx \-v /opt/nginx/html:/usr/share/nginx/html \-v /opt/nginx/logs:/var/log/nginx \nginx:latest#é˜²ç«å¢™è®¾ç½®ï¼ˆå¼€æ”¾nginxé»˜è®¤é…ç½®çš„80ç«¯å£ï¼‰firewall-cmd --permanent --add-port=80/tcpfirewall-cmd --reload#å¤‡ä»½nginxè®¿é—®é¦–é¡µæ–‡ä»¶cp /opt/nginx/html/index.html /opt/nginx/html/index.old.html#å°†å®¿ä¸»æœºé»˜è®¤ç½‘å¡çš„IPå†™åˆ°nginxè®¿é—®é¦–é¡µæ–‡ä»¶ip route get 8.8.8.8 | grep -oP 'src\s+\K\S+' &gt; /opt/nginx/html/index.htmlÂ¶3. LVS æœåŠ¡å™¨é…ç½®Â¶1ï¼‰ç½‘ç»œé…ç½®123456789101112131415161718192021222324252627282930313233343536373839404142434445464748#é…ç½®DIPcat &gt; /etc/sysconfig/network-scripts/ifcfg-ens33 &lt;&lt; 'EOF'TYPE="Ethernet"PROXY_METHOD="none"BROWSER_ONLY="no"BOOTPROTO="static"DEFROUTE="yes"IPV4_FAILURE_FATAL="no"IPV6INIT="yes"IPV6_AUTOCONF="yes"IPV6_DEFROUTE="yes"IPV6_FAILURE_FATAL="no"IPV6_ADDR_GEN_MODE="stable-privacy"NAME="ens33"UUID="4f676de2-5673-431b-b8fc-2dc4ad9accfc"DEVICE="ens33"ONBOOT="yes"IPADDR="192.168.60.101"GATEWAY="192.168.60.2"NETMASK="255.255.255.0"#DNS1="8.8.8.8"EOF#é…ç½®VIPcat &gt; /etc/sysconfig/network-scripts/ifcfg-ens36 &lt;&lt; 'EOF'TYPE="Ethernet"PROXY_METHOD="none"BROWSER_ONLY="no"BOOTPROTO="static"DEFROUTE="yes"IPV4_FAILURE_FATAL="no"IPV6INIT="yes"IPV6_AUTOCONF="yes"IPV6_DEFROUTE="yes"IPV6_FAILURE_FATAL="no"IPV6_ADDR_GEN_MODE="stable-privacy"NAME="ens36"UUID="73c77ea7-8794-4f1b-8773-88ccd2348a8b"DEVICE="ens36"ONBOOT="yes"IPADDR="192.168.17.101"GATEWAY="192.168.17.1"NETMASK="255.255.255.0"DNS1="8.8.8.8"EOF#é‡å¯ç½‘ç»œservice network restartæç¤ºï¼šä»¥ä¸Šé…ç½® DIP çš„ GATEWAY å€¼ä¸º VMnet8 ç½‘å¡çš„é»˜è®¤ç½‘å…³ IPï¼ˆå¯ä»¥åœ¨ vmware çš„â€œè™šæ‹Ÿç½‘ç»œç¼–è¾‘å™¨â€ä¸­æŸ¥çœ‹ï¼‰ã€‚é…ç½® VIP çš„ GATEWAY å€¼ä¸º VMnet8 ç½‘å¡åœ¨ç‰©ç†æœºåˆ†é…çš„ IPã€‚æ–°å¢žçš„ VMware ç½‘å¡åŽï¼ŒLinux ä¼šè‡ªåŠ¨å¤šå‡ºä¸€ä¸ªç½‘ç»œæŽ¥å£ï¼Œå¯é€šè¿‡ ip addr æˆ–è€… ls /sys/class/net æŸ¥çœ‹æ–°å¢žçš„ç½‘å¡åç§°ï¼ˆå¦‚ï¼šens36ï¼‰Â¶2ï¼‰é…ç½®æœåŠ¡å™¨å…è®¸è·¯ç”±è½¬å‘åŠŸèƒ½12345678#ä¿®æ”¹å†…æ ¸å‚æ•°ï¼Œé…ç½®LVSæœåŠ¡å™¨å…è®¸è·¯ç”±è½¬å‘åŠŸèƒ½ï¼Œ1ä¸ºå¼€å¯ï¼Œ0ä¸ºå…³é—­ï¼ˆé»˜è®¤ï¼‰cat &gt;&gt; /etc/sysctl.conf &lt;&lt; 'EOF'net.ipv4.ip_forward = 1EOF#ä½¿sysctl.confé…ç½®ä¿®æ”¹ç”Ÿæ•ˆsysctl -p#æŸ¥çœ‹é…ç½®æ˜¯å¦ç”Ÿæ•ˆcat /proc/sys/net/ipv4/ip_forward #æ³¨æ„ä¸è¦ç›´æŽ¥ä¿®æ”¹è¿™ä¸ªæ–‡ä»¶çš„å€¼ï¼Œå› ä¸ºè¿™ä¸ªæ–‡ä»¶æ—¶ä¸´æ—¶æ–‡ä»¶ï¼Œé‡å¯ç³»ç»ŸåŽå°†ä¼šè¢«è¿˜åŽŸï¼Œæ‰€ä»¥åº”è¯¥æ˜¯ä¿®æ”¹sysctl.confæ¥å®žçŽ°æ°¸ä¹…ç”Ÿæ•ˆÂ¶3ï¼‰é…ç½®LVS-NATé›†ç¾¤Â¶ï¼ˆ1ï¼‰å®‰è£…LVSé›†ç¾¤ç®¡ç†å·¥å…·1yum install -y ipvsadmÂ¶ï¼ˆ2ï¼‰é…ç½®NATé›†ç¾¤1234567891011121314151617181920212223242526272829#æ“ä½œå‰æœ€å¥½æ¸…ç©ºæ‰€æœ‰é›†ç¾¤è§„åˆ™ï¼ˆé˜²æ­¢æ“ä½œè¿‡å½±å“å®žéªŒç»“æžœï¼‰ipvsadm -C#åˆ›å»ºé›†ç¾¤ -t æŒ‡å®šVIPåœ°å€å’Œç«¯å£ä½œä¸ºé›†ç¾¤IDæ ‡è¯†ï¼Œ-sæŒ‡å®šè´Ÿè½½å‡è¡¡ç­–ç•¥ï¼ˆrrè¡¨ç¤ºè½®è¯¢ï¼‰ipvsadm -A -t 192.168.60.101:80 -s rr#æ·»åŠ çœŸå®žæœåŠ¡å™¨ -ræŒ‡å®šRIPï¼›-mæŒ‡å®šLVSå·¥ä½œæ¨¡å¼ä¸ºNATæ¨¡å¼ipvsadm -a -t 192.168.60.101:80 -r 192.168.17.201 -mipvsadm -a -t 192.168.60.101:80 -r 192.168.17.202 -m#æŸ¥çœ‹é›†ç¾¤è§„åˆ™ #-Lï¼šå‚æ•°è¡¨ç¤ºåˆ—å‡ºå½“å‰çš„ IPVS é…ç½®ã€‚ #-nï¼šå‚æ•°è¡¨ç¤ºä»¥æ•°å­—å½¢å¼æ˜¾ç¤º IP åœ°å€å’Œç«¯å£å·ï¼Œè€Œä¸è¿›è¡Œ DNS è§£æžã€‚ #-cï¼šå‚æ•°è¡¨ç¤ºè¿žç»­æ˜¾ç¤º IPVS çš„çŠ¶æ€ä¿¡æ¯ï¼Œè€Œä¸è¿›è¡Œåˆ†é¡µæ˜¾ç¤ºã€‚ipvsadm -Ln#æŸ¥çœ‹é›†ç¾¤è¿žæŽ¥çŠ¶æ€ipvsadm -Lnc#é˜²ç«å¢™è®¾ç½®##æ–¹å¼1ï¼šå…³é—­é˜²ç«å¢™#å…³é—­firewalldé˜²ç«å¢™systemctl stop firewalldsystemctl disable firewalld#æ¸…ç©ºå½“å‰çš„iptablesè§„åˆ™ï¼Œä½¿é˜²ç«å¢™æ¢å¤åˆ°é»˜è®¤çŠ¶æ€ã€‚å³ï¼šå…è®¸æ‰€æœ‰çš„ç½‘ç»œæµé‡é€šè¿‡ï¼Œä¸è¿›è¡Œä»»ä½•è¿‡æ»¤æˆ–é™åˆ¶#iptables -F##æ–¹å¼2ï¼šé…ç½®é˜²ç«å¢™è§„åˆ™ï¼ˆTODOï¼šæœªæˆåŠŸï¼Œå°šæœªæ‰¾åˆ°è§£å†³åŠžæ³•ï¼‰#firewall-cmd --permanent --add-port=80/tcp#firewall-cmd --reloadæ³¨æ„ï¼šVIP å’Œ RIP ä¸€å®šä¸èƒ½æ˜¯ä¸€ä¸ªç½‘æ®µï¼Œå¦åˆ™NATè½¬å‘å¤±è´¥ã€‚Â¶4. å®¢æˆ·ç«¯æµ‹è¯•1curl http://192.168.60.101:80Â¶å››ã€LVS DR æ¨¡å¼é›†ç¾¤Â¶1. å‡†å¤‡çŽ¯å¢ƒï¼ˆ1ï¼‰LVS æœåŠ¡å™¨ï¼šDIPï¼š192.168.60.101VIPï¼š192.168.60.100ï¼ˆæä¾›ç»™å®¢æˆ·ç«¯è®¿é—®çš„ IPï¼‰ï¼ˆ2ï¼‰Real Server1ï¼šRIPï¼š192.168.60.201VIPï¼š192.168.60.100ï¼ˆå“åº”å®¢æˆ·ç«¯è¯·æ±‚çš„ IPï¼‰ï¼ˆ2ï¼‰Real Server2ï¼šRIPï¼š192.168.60.202VIPï¼š192.168.60.100ï¼ˆå“åº”å®¢æˆ·ç«¯è¯·æ±‚çš„ IPï¼‰è¯´æ˜Žï¼šDIPï¼ˆDirector IPï¼‰ï¼šå³ LVS è´Ÿè½½å‡è¡¡å™¨çš„ IP åœ°å€RIPï¼ˆReal IPï¼‰ï¼šå³åŽç«¯çœŸå®žæœåŠ¡å™¨çš„ IP åœ°å€VIPï¼ˆVirtual IPï¼‰ï¼šå³ LVS é›†ç¾¤çš„è™šæ‹Ÿ IP åœ°å€LVS çš„ VIP æ˜¯ç”¨äºŽæŽ¥æ”¶å®¢æˆ·ç«¯çš„è¯·æ±‚ï¼ŒLVS é€šè¿‡è‡ªèº«çš„ DIP å°†è¯·æ±‚è´Ÿè½½å‡è¡¡è½¬å‘åˆ°åŽç«¯çœŸå®žæœåŠ¡å™¨ï¼ˆReal Serverï¼‰çš„ RIP ä¸Šï¼Œå“åº”åˆ™æ˜¯é€šè¿‡ Real Server çš„ VIP è¿”å›žç»™å®¢æˆ·ç«¯ã€‚æ³¨æ„ï¼šå¦‚ä»¥ä¸ŠçŽ¯å¢ƒä¸º Vmware è™šæ‹Ÿæœºï¼ŒDIP ã€VIPã€RIP çš„ Vmware ç½‘å¡ç½‘ç»œè¿žæŽ¥æ–¹å¼å¯ä¸ºä»»æ„ç½‘ç»œæ¨¡å¼ï¼Œä½†éœ€è¦æ³¨æ„ï¼ŒDIP å’Œ RIP éœ€è¦æ˜¯åŒä¸€ç½‘æ®µï¼ˆå³åŒä¸€ç½‘å¡ï¼‰ï¼Œè€Œ VIP åˆ™é€šè¿‡ç½‘å¡å­æŽ¥å£çš„æ–¹å¼é…ç½®ï¼Œæ— éœ€å¢žåŠ ç½‘å¡ã€‚æœ¬æ¬¡å®žéªŒå¯¹å‡ ä¸ªè™šæ‹Ÿæœºçš„ç½‘å¡è®¾å®šä¸ºï¼šDIP å’Œ RIP ä½¿ç”¨ VMnet8 ç½‘å¡ï¼ˆNATæ¨¡å¼ï¼‰ï¼Œè€Œ VIP é€šè¿‡ç½‘å¡å­æŽ¥å£çš„æ–¹å¼é…ç½®ã€‚Vmware è™šæ‹Ÿæœºé…ç½®å¦‚ä¸‹ï¼šÂ¶2. çœŸå®žæœåŠ¡å™¨é…ç½®Â¶1ï¼‰ç½‘ç»œé…ç½®Real Server1 ç½‘ç»œé…ç½®ï¼š12345678910111213141516171819202122232425#é…ç½®RIPcat &gt; /etc/sysconfig/network-scripts/ifcfg-ens33 &lt;&lt; 'EOF'TYPE="Ethernet"PROXY_METHOD="none"BROWSER_ONLY="no"BOOTPROTO="static"DEFROUTE="yes"IPV4_FAILURE_FATAL="no"IPV6INIT="yes"IPV6_AUTOCONF="yes"IPV6_DEFROUTE="yes"IPV6_FAILURE_FATAL="no"IPV6_ADDR_GEN_MODE="stable-privacy"NAME="ens33"UUID="4f676de2-5673-431b-b8fc-2dc4ad9accfc"DEVICE="ens33"ONBOOT="yes"IPADDR="192.168.60.201"GATEWAY="192.168.60.2"NETMASK="255.255.255.0"#DNS1="8.8.8.8"EOF#é‡å¯ç½‘ç»œservice network restartReal Server2 ç½‘ç»œé…ç½®ï¼š12345678910111213141516171819202122232425#é…ç½®RIPcat &gt; /etc/sysconfig/network-scripts/ifcfg-ens33 &lt;&lt; 'EOF'TYPE="Ethernet"PROXY_METHOD="none"BROWSER_ONLY="no"BOOTPROTO="static"DEFROUTE="yes"IPV4_FAILURE_FATAL="no"IPV6INIT="yes"IPV6_AUTOCONF="yes"IPV6_DEFROUTE="yes"IPV6_FAILURE_FATAL="no"IPV6_ADDR_GEN_MODE="stable-privacy"NAME="ens33"UUID="4f676de2-5673-431b-b8fc-2dc4ad9accfc"DEVICE="ens33"ONBOOT="yes"IPADDR="192.168.60.202"GATEWAY="192.168.60.2"NETMASK="255.255.255.0"#DNS1="8.8.8.8"EOF#é‡å¯ç½‘ç»œservice network restartåœ¨ Real Server1 å’Œ Real Server2 ä¸¤å°çœŸå®žæœåŠ¡å™¨ä¸Šéƒ½æ‰§è¡Œä»¥ä¸‹æ­¥éª¤æ“ä½œï¼š12345678910111213141516171819202122232425262728#é…ç½®VIPï¼ˆé€šè¿‡é…ç½®loå›žçŽ¯ç½‘å¡å­æŽ¥å£è®¾ç½®VIPï¼‰cat &gt; /etc/sysconfig/network-scripts/ifcfg-lo:1 &lt;&lt; 'EOF'DEVICE=lo:1IPADDR=192.168.60.100NETMASK=255.255.255.255NETWORK=192.168.60.100BROADCAST=127.255.255.255ONBOOT=yesNAME=loopbackEOF#ç”±äºŽLVSæœåŠ¡å™¨å’Œä¸¤å°çœŸå®žæœåŠ¡å™¨å­˜åœ¨ç›¸åŒçš„VIPï¼Œä¼šäº§ç”ŸIPåœ°å€å†²çªï¼Œè§£å†³åŠžæ³•æ˜¯ä¿®æ”¹å†…æ ¸å‚æ•°ã€‚å¦‚ä¸‹ï¼š#arp_ignoreä¸º1è¡¨ç¤ºï¼šå½“æœ‰arpå¹¿æ’­é—®è°æ˜¯VIPæ—¶ï¼Œæœ¬æœºå¿½ç•¥æŽ‰ARPå¹¿æ’­ï¼Œä¸åšä»»ä½•å›žåº”#arp_announceä¸º2è¡¨ç¤ºï¼šæœ¬æœºä¸è¦å‘å¤–å®£å‘Šè‡ªå·±çš„loå›žçŽ¯åœ°å€æ˜¯VIPcat &gt;&gt; /etc/sysctl.conf &lt;&lt; 'EOF'net.ipv4.conf.all.arp_ignore = 1net.ipv4.conf.lo.arp_ignore = 1net.ipv4.conf.lo.arp_announce = 2net.ipv4.conf.all.arp_announce = 2EOF#ä½¿sysctl.confé…ç½®ä¿®æ”¹ç”Ÿæ•ˆsysctl -p#é‡å¯ç½‘ç»œservice network restart#æŸ¥çœ‹IPé…ç½®æ˜¯å¦ç”Ÿæ•ˆip addrÂ¶2ï¼‰éƒ¨ç½²webæœåŠ¡ï¼ˆNginxï¼‰12345678910111213141516171819202122232425262728293031323334353637#æ‹‰å–(ä¸‹è½½)é•œåƒdocker pull nginx:latest#é¦–å…ˆç®€å•è¿è¡Œä¸€ä¸ªnginxä¸´æ—¶å®¹å™¨ï¼Œç”¨äºŽå¤åˆ¶å®¹å™¨å†…éƒ¨çš„ä¸€äº›nginxç›¸å…³é‡è¦æ–‡ä»¶åˆ°å®¿ä¸»æœºdocker run -d --name nginx nginx:latest#åˆ›å»ºæ˜ å°„ç›®å½•mkdir -p /opt/nginx/&#123;conf,html,logs&#125;#å¤åˆ¶å®¹å™¨å†…éƒ¨çš„ä¸€äº›nginxç›¸å…³é‡è¦æ–‡ä»¶åˆ°æ˜ å°„ç›®å½•ä¸­(æ³¨æ„å‘½ä»¤ä¸­çš„æœ«å°¾çš„ç‚¹ï¼Œå®ƒè¡¨ç¤ºå¤åˆ¶ç›®å½•ä¸­çš„æ‰€æœ‰å†…å®¹è€Œä¸æ˜¯æ•´ä¸ªç›®å½•æœ¬èº«)docker cp nginx:/etc/nginx/. /opt/nginx/confdocker cp nginx:/usr/share/nginx/html/. /opt/nginx/htmldocker cp nginx:/var/log/nginx/. /opt/nginx/logs#åˆ é™¤nginxä¸´æ—¶å®¹å™¨docker rm -f nginx#ç”Ÿäº§çŽ¯å¢ƒä¸‹è¿è¡Œnginxå®¹å™¨#ï¼ˆ1ï¼‰ä½¿ç”¨hostç½‘ç»œæ¨¡å¼ç›´æŽ¥ä½¿ç”¨å®¿ä¸»æœºç½‘ç»œIPåœ°å€å’Œç«¯å£ï¼ˆå¯ä»¥é¿å…æ¯æ¬¡é…ç½®æ–°çš„ç›‘å¬ç«¯å£éƒ½éœ€è¦é‡æ–°docker runæ˜ å°„ç«¯å£ï¼‰#ï¼ˆ2ï¼‰é™åˆ¶å†…å­˜ä¸Šé™ä¸º200MB#ï¼ˆ3ï¼‰æŒ‡å®šæ—¶åŒºå¹¶åŒæ­¥å®¿ä¸»æœºå’Œå®¹å™¨çš„æ—¶é—´#ï¼ˆ4ï¼‰æ˜ å°„å‡ ä¸ªä¸»è¦çš„nginxç›¸å…³ç›®å½•docker run -d --name nginx \--net=host \-m 200m \-e TZ=Asia/Shanghai \-v /etc/localtime:/etc/localtime:ro \-v /opt/nginx/conf:/etc/nginx \-v /opt/nginx/html:/usr/share/nginx/html \-v /opt/nginx/logs:/var/log/nginx \nginx:latest#é˜²ç«å¢™è®¾ç½®ï¼ˆå¼€æ”¾nginxé»˜è®¤é…ç½®çš„80ç«¯å£ï¼‰firewall-cmd --permanent --add-port=80/tcpfirewall-cmd --reload#å¤‡ä»½nginxè®¿é—®é¦–é¡µæ–‡ä»¶cp /opt/nginx/html/index.html /opt/nginx/html/index.old.html#å°†å®¿ä¸»æœºé»˜è®¤ç½‘å¡çš„IPå†™åˆ°nginxè®¿é—®é¦–é¡µæ–‡ä»¶ip route get 8.8.8.8 | grep -oP 'src\s+\K\S+' &gt; /opt/nginx/html/index.htmlÂ¶3. LVS æœåŠ¡å™¨é…ç½®åœ¨ LVS æœåŠ¡å™¨ä¸Šæ‰§è¡Œä»¥ä¸‹æ­¥éª¤æ“ä½œï¼šÂ¶1ï¼‰ç½‘ç»œé…ç½®123456789101112131415161718192021222324252627282930313233343536#é…ç½®DIPcat &gt; /etc/sysconfig/network-scripts/ifcfg-ens33 &lt;&lt; 'EOF'TYPE="Ethernet"PROXY_METHOD="none"BROWSER_ONLY="no"BOOTPROTO="static"DEFROUTE="yes"IPV4_FAILURE_FATAL="no"IPV6INIT="yes"IPV6_AUTOCONF="yes"IPV6_DEFROUTE="yes"IPV6_FAILURE_FATAL="no"IPV6_ADDR_GEN_MODE="stable-privacy"NAME="ens33"UUID="4f676de2-5673-431b-b8fc-2dc4ad9accfc"DEVICE="ens33"ONBOOT="yes"IPADDR="192.168.60.101"GATEWAY="192.168.60.2"NETMASK="255.255.255.0"#DNS1="8.8.8.8"EOF#é…ç½®VIPï¼ˆé€šè¿‡é…ç½®ç½‘å¡å­æŽ¥å£è®¾ç½®VIPï¼‰cat &gt; /etc/sysconfig/network-scripts/ifcfg-ens33:1 &lt;&lt; 'EOF'BOOTPROTO="static"DEVICE="ens33:1"ONBOOT="yes"IPADDR="192.168.60.100"NETMASK="255.255.255.0"EOF#é‡å¯ç½‘ç»œservice network restart#æŸ¥çœ‹IPé…ç½®æ˜¯å¦ç”Ÿæ•ˆip addrÂ¶2ï¼‰é…ç½®LVS-DRé›†ç¾¤Â¶ï¼ˆ1ï¼‰å®‰è£…LVSé›†ç¾¤ç®¡ç†å·¥å…·1yum install -y ipvsadmæç¤ºï¼šipvsadm å¹¶ä¸æ˜¯ LVSï¼Œipvs ä½œä¸º LVS çš„æ ¸å¿ƒæ¨¡å—å·²ç»å†…ç½®åœ¨äº† Linux å†…æ ¸ä¸­ï¼Œä½†æ˜¯ç”±äºŽä¸èƒ½ç›´æŽ¥æ“ä½œå†…æ ¸ï¼Œæ•…æ‰éœ€è¦ä½¿ç”¨åˆ° ipvsadm ä½œä¸º ipvs çš„ç®¡ç†å·¥å…·ã€‚Â¶ï¼ˆ2ï¼‰é…ç½®DRé›†ç¾¤12345678910111213141516171819#æ“ä½œå‰æœ€å¥½æ¸…ç©ºæ‰€æœ‰é›†ç¾¤è§„åˆ™ï¼ˆé˜²æ­¢æ“ä½œè¿‡å½±å“å®žéªŒç»“æžœï¼‰ipvsadm -C#åˆ›å»ºé›†ç¾¤ -t æŒ‡å®šVIPåœ°å€å’Œç«¯å£ä½œä¸ºé›†ç¾¤IDæ ‡è¯†ï¼Œ-sæŒ‡å®šè´Ÿè½½å‡è¡¡ç­–ç•¥ï¼ˆrrè¡¨ç¤ºè½®è¯¢ï¼‰ipvsadm -A -t 192.168.60.100:80 -s rr#æ·»åŠ çœŸå®žæœåŠ¡å™¨ -ræŒ‡å®šRIPï¼›-gæŒ‡å®šLVSå·¥ä½œæ¨¡å¼ä¸ºDRæ¨¡å¼ï¼ˆDRä¸ºé»˜è®¤æ¨¡å¼ï¼Œå¯ä»¥ä¸æŒ‡å®šï¼‰ipvsadm -a -t 192.168.60.100:80 -r 192.168.60.201 -gipvsadm -a -t 192.168.60.100:80 -r 192.168.60.202 -g#å­˜é…ç½®æˆ–è§„åˆ™ï¼ˆä»¥ä¸Šæ·»åŠ çš„é›†ç¾¤é…ç½®åœ¨ç³»ç»Ÿé‡å¯åŽå°†ä¼šä¸¢å¤±ï¼Œå¦‚éœ€æŒä¹…åŒ–å¯å¦‚ä¸‹æ“ä½œï¼šï¼‰ipvsadm -S #æˆ–è€…ï¼šipvsadm --save &gt; /etc/sysconfig/ipvsadm#æŸ¥çœ‹é›†ç¾¤è§„åˆ™ipvsadm -Ln#é˜²ç«å¢™è®¾ç½®firewall-cmd --permanent --add-port=80/tcpfirewall-cmd --reloadÂ¶4. å®¢æˆ·ç«¯æµ‹è¯•1curl http://192.168.60.100:80å‚è€ƒhttps://www.jianshu.com/p/2ed85a5204ccÂ¶äº”ã€Keepalived + LVSï¼ˆDR æ¨¡å¼ï¼‰+ Nginx å®žçŽ°é«˜å¯ç”¨è´Ÿè½½å‡è¡¡æž¶æž„Keepalived é»˜è®¤å°±æ”¯æŒ LVS é›†ç¾¤è§„åˆ™è‡ªåŠ¨åŒ–é…ç½®åŠŸèƒ½ï¼ˆè€Œä¸éœ€è¦ä½¿ç”¨ ipvsadm æ¥æ‰‹åŠ¨åˆ›å»º LVS é›†ç¾¤è§„åˆ™ï¼‰ï¼Œæ­¤å¤– Keepalived è¿˜æ”¯æŒå¯¹çœŸå®žæœåŠ¡å™¨è¿›è¡Œå¥åº·æ£€æŸ¥çš„ï¼Œå¦å¤–ä½¿ç”¨ Keepalived é…ç½®è™šæ‹Ÿ IPï¼ˆVIPï¼‰ è¿˜èƒ½è‡ªåŠ¨æ·»åŠ åˆ°ç³»ç»Ÿç½‘å¡é…ç½®é‡Œï¼Œè€Œæ— éœ€å†é€šè¿‡é…ç½®ç½‘å¡å­æŽ¥å£è®¾ç½®VIPã€‚ç”±äºŽ Keepalived å¯¹ LVS çš„æžä½³æ”¯æŒï¼Œæ•…è€Œç”Ÿäº§çŽ¯å¢ƒä¸Šæ›´æŽ¨èä½¿ç”¨ Keepalived æ¥å®Œæˆ LVS çš„é›†ç¾¤é…ç½®ã€‚æç¤ºï¼šipvsadm æ‰‹åŠ¨åˆ›å»ºçš„ LVS é›†ç¾¤è§„åˆ™é»˜è®¤æ˜¯ä¸æ”¯æŒå¯¹çœŸå®žæœåŠ¡å™¨è¿›è¡Œå¥åº·æ£€æŸ¥çš„ï¼Œåªèƒ½å€ŸåŠ©è„šæœ¬æ¥é—´æŽ¥å®žçŽ°å¥åº·æ£€æŸ¥ã€‚Â¶1. å‡†å¤‡çŽ¯å¢ƒï¼ˆ1ï¼‰LVS1 æœåŠ¡å™¨ï¼šDIPï¼š192.168.60.101VIPï¼š192.168.60.100ï¼ˆkeepalived çš„ masterèŠ‚ç‚¹ï¼Œæä¾›ç»™å®¢æˆ·ç«¯è®¿é—®çš„ IPï¼‰ï¼ˆ2ï¼‰LVS2 æœåŠ¡å™¨ï¼šDIPï¼š192.168.60.102VIPï¼š192.168.60.100ï¼ˆkeepalived çš„ backup èŠ‚ç‚¹ï¼Œæä¾›ç»™å®¢æˆ·ç«¯è®¿é—®çš„ IPï¼‰ï¼ˆ3ï¼‰Real Server1ï¼šRIPï¼š192.168.60.201VIPï¼š192.168.60.100ï¼ˆå“åº”å®¢æˆ·ç«¯è¯·æ±‚çš„ IPï¼‰ï¼ˆ4ï¼‰Real Server2ï¼šRIPï¼š192.168.60.202VIPï¼š192.168.60.100ï¼ˆå“åº”å®¢æˆ·ç«¯è¯·æ±‚çš„ IPï¼‰æ³¨æ„ï¼šå¦‚ä»¥ä¸ŠçŽ¯å¢ƒä¸º Vmware è™šæ‹Ÿæœºï¼Œé…ç½®å¯å‚è€ƒä¸Šæ–‡â€œLVS DR æ¨¡å¼é›†ç¾¤â€ã€‚Â¶2. çœŸå®žæœåŠ¡å™¨é…ç½®Â¶1ï¼‰ç½‘ç»œé…ç½®Real Server1 ç½‘ç»œé…ç½®ï¼š12345678910111213141516171819202122232425#é…ç½®RIPcat &gt; /etc/sysconfig/network-scripts/ifcfg-ens33 &lt;&lt; 'EOF'TYPE="Ethernet"PROXY_METHOD="none"BROWSER_ONLY="no"BOOTPROTO="static"DEFROUTE="yes"IPV4_FAILURE_FATAL="no"IPV6INIT="yes"IPV6_AUTOCONF="yes"IPV6_DEFROUTE="yes"IPV6_FAILURE_FATAL="no"IPV6_ADDR_GEN_MODE="stable-privacy"NAME="ens33"UUID="4f676de2-5673-431b-b8fc-2dc4ad9accfc"DEVICE="ens33"ONBOOT="yes"IPADDR="192.168.60.201"GATEWAY="192.168.60.2"NETMASK="255.255.255.0"#DNS1="8.8.8.8"EOF#é‡å¯ç½‘ç»œservice network restartReal Server2 ç½‘ç»œé…ç½®ï¼š12345678910111213141516171819202122232425#é…ç½®RIPcat &gt; /etc/sysconfig/network-scripts/ifcfg-ens33 &lt;&lt; 'EOF'TYPE="Ethernet"PROXY_METHOD="none"BROWSER_ONLY="no"BOOTPROTO="static"DEFROUTE="yes"IPV4_FAILURE_FATAL="no"IPV6INIT="yes"IPV6_AUTOCONF="yes"IPV6_DEFROUTE="yes"IPV6_FAILURE_FATAL="no"IPV6_ADDR_GEN_MODE="stable-privacy"NAME="ens33"UUID="4f676de2-5673-431b-b8fc-2dc4ad9accfc"DEVICE="ens33"ONBOOT="yes"IPADDR="192.168.60.202"GATEWAY="192.168.60.2"NETMASK="255.255.255.0"#DNS1="8.8.8.8"EOF#é‡å¯ç½‘ç»œservice network restartåœ¨ Real Server1 å’Œ Real Server2 ä¸¤å°çœŸå®žæœåŠ¡å™¨ä¸Šéƒ½æ‰§è¡Œä»¥ä¸‹æ­¥éª¤æ“ä½œï¼š12345678910111213141516171819202122232425262728#é…ç½®VIPï¼ˆé€šè¿‡é…ç½®loå›žçŽ¯ç½‘å¡å­æŽ¥å£è®¾ç½®VIPï¼‰cat &gt; /etc/sysconfig/network-scripts/ifcfg-lo:1 &lt;&lt; 'EOF'DEVICE=lo:1IPADDR=192.168.60.100NETMASK=255.255.255.255NETWORK=192.168.60.100BROADCAST=127.255.255.255ONBOOT=yesNAME=loopbackEOF#ç”±äºŽLVSæœåŠ¡å™¨å’Œä¸¤å°çœŸå®žæœåŠ¡å™¨å­˜åœ¨ç›¸åŒçš„VIPï¼Œä¼šäº§ç”ŸIPåœ°å€å†²çªï¼Œè§£å†³åŠžæ³•æ˜¯ä¿®æ”¹å†…æ ¸å‚æ•°ã€‚å¦‚ä¸‹ï¼š#arp_ignoreä¸º1è¡¨ç¤ºï¼šå½“æœ‰arpå¹¿æ’­é—®è°æ˜¯VIPæ—¶ï¼Œæœ¬æœºå¿½ç•¥æŽ‰ARPå¹¿æ’­ï¼Œä¸åšä»»ä½•å›žåº”#arp_announceä¸º2è¡¨ç¤ºï¼šæœ¬æœºä¸è¦å‘å¤–å®£å‘Šè‡ªå·±çš„loå›žçŽ¯åœ°å€æ˜¯VIPcat &gt;&gt; /etc/sysctl.conf &lt;&lt; 'EOF'net.ipv4.conf.all.arp_ignore = 1net.ipv4.conf.lo.arp_ignore = 1net.ipv4.conf.lo.arp_announce = 2net.ipv4.conf.all.arp_announce = 2EOF#ä½¿sysctl.confé…ç½®ä¿®æ”¹ç”Ÿæ•ˆsysctl -p#é‡å¯ç½‘ç»œservice network restart#æŸ¥çœ‹IPé…ç½®æ˜¯å¦ç”Ÿæ•ˆip addrÂ¶2ï¼‰éƒ¨ç½²webæœåŠ¡ï¼ˆNginxï¼‰12345678910111213141516171819202122232425262728293031323334353637#æ‹‰å–(ä¸‹è½½)é•œåƒdocker pull nginx:latest#é¦–å…ˆç®€å•è¿è¡Œä¸€ä¸ªnginxä¸´æ—¶å®¹å™¨ï¼Œç”¨äºŽå¤åˆ¶å®¹å™¨å†…éƒ¨çš„ä¸€äº›nginxç›¸å…³é‡è¦æ–‡ä»¶åˆ°å®¿ä¸»æœºdocker run -d --name nginx nginx:latest#åˆ›å»ºæ˜ å°„ç›®å½•mkdir -p /opt/nginx/&#123;conf,html,logs&#125;#å¤åˆ¶å®¹å™¨å†…éƒ¨çš„ä¸€äº›nginxç›¸å…³é‡è¦æ–‡ä»¶åˆ°æ˜ å°„ç›®å½•ä¸­(æ³¨æ„å‘½ä»¤ä¸­çš„æœ«å°¾çš„ç‚¹ï¼Œå®ƒè¡¨ç¤ºå¤åˆ¶ç›®å½•ä¸­çš„æ‰€æœ‰å†…å®¹è€Œä¸æ˜¯æ•´ä¸ªç›®å½•æœ¬èº«)docker cp nginx:/etc/nginx/. /opt/nginx/confdocker cp nginx:/usr/share/nginx/html/. /opt/nginx/htmldocker cp nginx:/var/log/nginx/. /opt/nginx/logs#åˆ é™¤nginxä¸´æ—¶å®¹å™¨docker rm -f nginx#ç”Ÿäº§çŽ¯å¢ƒä¸‹è¿è¡Œnginxå®¹å™¨#ï¼ˆ1ï¼‰ä½¿ç”¨hostç½‘ç»œæ¨¡å¼ç›´æŽ¥ä½¿ç”¨å®¿ä¸»æœºç½‘ç»œIPåœ°å€å’Œç«¯å£ï¼ˆå¯ä»¥é¿å…æ¯æ¬¡é…ç½®æ–°çš„ç›‘å¬ç«¯å£éƒ½éœ€è¦é‡æ–°docker runæ˜ å°„ç«¯å£ï¼‰#ï¼ˆ2ï¼‰é™åˆ¶å†…å­˜ä¸Šé™ä¸º200MB#ï¼ˆ3ï¼‰æŒ‡å®šæ—¶åŒºå¹¶åŒæ­¥å®¿ä¸»æœºå’Œå®¹å™¨çš„æ—¶é—´#ï¼ˆ4ï¼‰æ˜ å°„å‡ ä¸ªä¸»è¦çš„nginxç›¸å…³ç›®å½•docker run -d --name nginx \--net=host \-m 200m \-e TZ=Asia/Shanghai \-v /etc/localtime:/etc/localtime:ro \-v /opt/nginx/conf:/etc/nginx \-v /opt/nginx/html:/usr/share/nginx/html \-v /opt/nginx/logs:/var/log/nginx \nginx:latest#é˜²ç«å¢™è®¾ç½®ï¼ˆå¼€æ”¾nginxé»˜è®¤é…ç½®çš„80ç«¯å£ï¼‰firewall-cmd --permanent --add-port=80/tcpfirewall-cmd --reload#å¤‡ä»½nginxè®¿é—®é¦–é¡µæ–‡ä»¶cp /opt/nginx/html/index.html /opt/nginx/html/index.old.html#å°†å®¿ä¸»æœºé»˜è®¤ç½‘å¡çš„IPå†™åˆ°nginxè®¿é—®é¦–é¡µæ–‡ä»¶ip route get 8.8.8.8 | grep -oP 'src\s+\K\S+' &gt; /opt/nginx/html/index.htmlÂ¶3. LVS æœåŠ¡å™¨é…ç½®Â¶1ï¼‰ç½‘ç»œé…ç½®LVS1 ç½‘ç»œé…ç½®ï¼š12345678910111213141516171819202122232425#é…ç½®DIPcat &gt; /etc/sysconfig/network-scripts/ifcfg-ens33 &lt;&lt; 'EOF'TYPE="Ethernet"PROXY_METHOD="none"BROWSER_ONLY="no"BOOTPROTO="static"DEFROUTE="yes"IPV4_FAILURE_FATAL="no"IPV6INIT="yes"IPV6_AUTOCONF="yes"IPV6_DEFROUTE="yes"IPV6_FAILURE_FATAL="no"IPV6_ADDR_GEN_MODE="stable-privacy"NAME="ens33"UUID="4f676de2-5673-431b-b8fc-2dc4ad9accfc"DEVICE="ens33"ONBOOT="yes"IPADDR="192.168.60.101"GATEWAY="192.168.60.2"NETMASK="255.255.255.0"#DNS1="8.8.8.8"EOF#é‡å¯ç½‘ç»œservice network restartLVS2 ç½‘ç»œé…ç½®ï¼š12345678910111213141516171819202122232425#é…ç½®DIPcat &gt; /etc/sysconfig/network-scripts/ifcfg-ens33 &lt;&lt; 'EOF'TYPE="Ethernet"PROXY_METHOD="none"BROWSER_ONLY="no"BOOTPROTO="static"DEFROUTE="yes"IPV4_FAILURE_FATAL="no"IPV6INIT="yes"IPV6_AUTOCONF="yes"IPV6_DEFROUTE="yes"IPV6_FAILURE_FATAL="no"IPV6_ADDR_GEN_MODE="stable-privacy"NAME="ens33"UUID="4f676de2-5673-431b-b8fc-2dc4ad9accfc"DEVICE="ens33"ONBOOT="yes"IPADDR="192.168.60.102"GATEWAY="192.168.60.2"NETMASK="255.255.255.0"#DNS1="8.8.8.8"EOF#é‡å¯ç½‘ç»œservice network restartÂ¶2ï¼‰å®‰è£… LVS é›†ç¾¤ç®¡ç†å·¥å…·åœ¨ LVS1 å’Œ LVS2 ä¸¤å°æœåŠ¡å™¨ä¸Šéƒ½æ‰§è¡Œä»¥ä¸‹æ­¥éª¤æ“ä½œï¼š1yum install -y ipvsadmè¿™é‡Œå®‰è£… ipvsadm çš„ç›®çš„ä¸»è¦æ˜¯ç”¨äºŽæ¸…ç©º LVS é›†ç¾¤é…ç½®è§„åˆ™ä»¥åŠæŸ¥çœ‹ LVS é›†ç¾¤è§„åˆ™ï¼Œè€Œä¸éœ€è¦ä½¿ç”¨æ¥åˆ›å»º LVS é›†ç¾¤è§„åˆ™ã€‚Â¶3ï¼‰æ¸…ç©º LVS é›†ç¾¤é…ç½®è§„åˆ™12#æ“ä½œå‰æœ€å¥½æ¸…ç©ºæ‰€æœ‰é›†ç¾¤è§„åˆ™ï¼ˆé˜²æ­¢æ“ä½œè¿‡å½±å“å®žéªŒç»“æžœï¼‰ipvsadm -CÂ¶4ï¼‰é€šè¿‡ Keepalived é…ç½® VIP å’Œ LVS çš„ DR æ¨¡å¼é›†ç¾¤åœ¨ LVS1 å’Œ LVS2 ä¸¤å°æœåŠ¡å™¨ä¸Šéƒ½æ‰§è¡Œä»¥ä¸‹æ­¥éª¤æ“ä½œï¼šÂ¶ï¼ˆ1ï¼‰å®‰è£… Keepalived12345678910111213#å®‰è£…ç¼–è¯‘ä¾èµ–yum -y install gcc curl openssl-devel libnl3-devel net-snmp-devel#ä¸‹è½½keepalivedæºç åŒ…wget https://keepalived.org/software/keepalived-2.0.20.tar.gz#è§£åŽ‹æºç åŒ…tar -zxvf keepalived-2.0.20.tar.gz#è¿›å…¥æºç åŒ…è§£åŽ‹ç›®å½•cd keepalived-2.0.20#ç”ŸæˆMakefileæ–‡ä»¶./configure --prefix=/opt/keepalived#å¯ä»¥é€šè¿‡æŒ‡å®š--sysconfæ¥æŒ‡å®šé…ç½®æ–‡ä»¶çš„å®‰è£…è·¯å¾„ï¼Œå¦‚ï¼š./configure --prefix=/opt/keepalived --sysconf=/etc#ç¼–è¯‘å¹¶å®‰è£…make &amp;&amp; make installÂ¶ï¼ˆ2ï¼‰é…ç½® Keepalived1vim /opt/keepalived/etc/keepalived/keepalived.confLVS1 æœåŠ¡å™¨é…ç½®ï¼š12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364global_defs &#123; #è¿è¡ŒkeepalivedæœåŠ¡å™¨çš„ä¸€ä¸ªæ ‡è¯†(æ¯ä¸ªæœåŠ¡çš„ä¸ä¸€æ ·)ï¼Œå¯ä»¥ç”¨ä½œå‘é€é‚®ä»¶çš„ä¸»é¢˜ä¿¡æ¯ router_id lvs1&#125;vrrp_instance VI_1 &#123; #åˆå§‹åŒ–å½“å‰èŠ‚ç‚¹çš„é»˜è®¤ä¸»å¤‡ç±»åž‹ï¼Œæœ‰ä¸¤ä¸ªå€¼å¯é€‰MASTERä¸» BACKUPå¤‡(å¯ä»¥éƒ½è®¾ç½®ä¸ºBACKUPï¼Œè®©keepalivedè‡ªå·±æ ¹æ®priorityå€¼å¤§å°è‡ªå·±é€‰ä¸¾MASTER) state MASTER #vrrpå®žä¾‹ç»‘å®šçš„ç½‘å¡æŽ¥å£åç§°ï¼ˆå¯ä»¥é€šè¿‡ifconfigå‘½ä»¤æŸ¥çœ‹ï¼‰ï¼Œç”¨äºŽå‘é€VRRP interface ens33 #æŒ‡å®šVRRPå®žä¾‹ID(ç›¸åŒè™šæ‹Ÿipçš„å¤šä¸ªæœåŠ¡è¯¥å€¼è¦ç›¸åŒ)ï¼ŒèŒƒå›´æ˜¯0-255 virtual_router_id 51 #æŒ‡å®šä¼˜å…ˆçº§ï¼Œä¼˜å…ˆçº§é«˜çš„å°†æˆä¸ºMASTERï¼ˆæ³¨æ„ï¼šBACKUPèŠ‚ç‚¹çš„ä¼˜å…ˆçº§åº”è¯¥è¦æ¯”MASTERçš„å°ï¼‰ priority 100 #æŒ‡å®šå‘é€VRRPé€šå‘Šçš„é—´éš”ï¼Œå•ä½æ˜¯ç§’ advert_int 1 authentication &#123; #æŒ‡å®šè®¤è¯æ–¹å¼ã€‚PASSç®€å•å¯†ç è®¤è¯(æŽ¨è) auth_type PASS #æŒ‡å®šè®¤è¯ä½¿ç”¨çš„å¯†ç ï¼Œæœ€å¤š8ä½ auth_pass 1111 &#125; #è™šæ‹ŸIPåœ°å€è®¾ç½®è™šæ‹ŸIPåœ°å€ï¼ˆéœ€è¦å’Œä»¥ä¸Šinterfaceç½‘å¡æŽ¥å£çš„çœŸå®žipåœ¨åŒä¸€ç½‘æ®µï¼‰ï¼Œä¾›ç”¨æˆ·è®¿é—®ä½¿ç”¨ï¼Œå¯è®¾ç½®å¤šä¸ªï¼Œä¸€è¡Œä¸€ä¸ª virtual_ipaddress &#123; 192.168.60.100 &#125;&#125;##é…ç½®LVSçš„VIPè§„åˆ™virtual_server 192.168.60.100 80 &#123; #å¥åº·æ£€æŸ¥çš„æ—¶é—´ delay_loop 6 #è®¾ç½®LVSè°ƒåº¦ç®—æ³•ä¸ºRR lb_algo rr #è®¾ç½®LVSçš„æ¨¡å¼ä¸ºDR lb_kind DR #å¼€å¯åŽï¼Œå®¢æˆ·ç«¯åœ¨ä¸€å®šæ—¶é—´å†…å§‹ç»ˆè®¿é—®ç›¸åŒæœåŠ¡å™¨ #persistence_timeout 50 #ä½¿ç”¨çš„åè®® protocol TCP #è®¾ç½®Real Server1çš„RIP real_server 192.168.60.201 80 &#123; #è®¾ç½®æƒé‡ä¸º1 weight 1 #å¯¹åŽå°real_serveråšå¥åº·æ£€æŸ¥ TCP_CHECK &#123; #æ¯æ¬¡è¿žæŽ¥çš„è¶…æ—¶æ—¶é—´3s connect_timeout 3 #å¤±è´¥ä»¥åŽï¼Œé‡å¤æ£€æŸ¥å¤šå°‘æ¬¡ nb_get_retry 3 #æ¯éš”3sæ£€æŸ¥ä¸€ä¸‹ delay_before_retry 3 &#125; &#125; #è®¾ç½®Real Server2çš„RIP real_server 192.168.60.202 80 &#123; weight 1 TCP_CHECK &#123; connect_timeout 3 nb_get_retry 3 delay_before_retry 3 &#125; &#125;&#125;LVS2 æœåŠ¡å™¨é…ç½®ï¼š12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364global_defs &#123; #è¿è¡ŒkeepalivedæœåŠ¡å™¨çš„ä¸€ä¸ªæ ‡è¯†(æ¯ä¸ªæœåŠ¡çš„ä¸ä¸€æ ·)ï¼Œå¯ä»¥ç”¨ä½œå‘é€é‚®ä»¶çš„ä¸»é¢˜ä¿¡æ¯ router_id lvs2&#125;vrrp_instance VI_1 &#123; #åˆå§‹åŒ–å½“å‰èŠ‚ç‚¹çš„é»˜è®¤ä¸»å¤‡ç±»åž‹ï¼Œæœ‰ä¸¤ä¸ªå€¼å¯é€‰MASTERä¸» BACKUPå¤‡(å¯ä»¥éƒ½è®¾ç½®ä¸ºBACKUPï¼Œè®©keepalivedè‡ªå·±æ ¹æ®priorityå€¼å¤§å°è‡ªå·±é€‰ä¸¾MASTER) state BACKUP #vrrpå®žä¾‹ç»‘å®šçš„ç½‘å¡æŽ¥å£åç§°ï¼ˆå¯ä»¥é€šè¿‡ifconfigå‘½ä»¤æŸ¥çœ‹ï¼‰ï¼Œç”¨äºŽå‘é€VRRP interface ens33 #æŒ‡å®šVRRPå®žä¾‹ID(ç›¸åŒè™šæ‹Ÿipçš„å¤šä¸ªæœåŠ¡è¯¥å€¼è¦ç›¸åŒ)ï¼ŒèŒƒå›´æ˜¯0-255 virtual_router_id 51 #æŒ‡å®šä¼˜å…ˆçº§ï¼Œä¼˜å…ˆçº§é«˜çš„å°†æˆä¸ºMASTERï¼ˆæ³¨æ„ï¼šBACKUPèŠ‚ç‚¹çš„ä¼˜å…ˆçº§åº”è¯¥è¦æ¯”MASTERçš„å°ï¼‰ priority 50 #æŒ‡å®šå‘é€VRRPé€šå‘Šçš„é—´éš”ï¼Œå•ä½æ˜¯ç§’ advert_int 1 authentication &#123; #æŒ‡å®šè®¤è¯æ–¹å¼ã€‚PASSç®€å•å¯†ç è®¤è¯(æŽ¨è) auth_type PASS #æŒ‡å®šè®¤è¯ä½¿ç”¨çš„å¯†ç ï¼Œæœ€å¤š8ä½ auth_pass 1111 &#125; #è™šæ‹ŸIPåœ°å€è®¾ç½®è™šæ‹ŸIPåœ°å€ï¼ˆéœ€è¦å’Œä»¥ä¸Šinterfaceç½‘å¡æŽ¥å£çš„çœŸå®žipåœ¨åŒä¸€ç½‘æ®µï¼‰ï¼Œä¾›ç”¨æˆ·è®¿é—®ä½¿ç”¨ï¼Œå¯è®¾ç½®å¤šä¸ªï¼Œä¸€è¡Œä¸€ä¸ª virtual_ipaddress &#123; 192.168.60.100 &#125;&#125;##é…ç½®LVSçš„VIPè§„åˆ™virtual_server 192.168.60.100 80 &#123; #å¥åº·æ£€æŸ¥çš„æ—¶é—´ delay_loop 6 #è®¾ç½®LVSè°ƒåº¦ç®—æ³•ä¸ºRR lb_algo rr #è®¾ç½®LVSçš„æ¨¡å¼ä¸ºDR lb_kind DR #å¼€å¯åŽï¼Œå®¢æˆ·ç«¯åœ¨ä¸€å®šæ—¶é—´å†…å§‹ç»ˆè®¿é—®ç›¸åŒæœåŠ¡å™¨ #persistence_timeout 50 #ä½¿ç”¨çš„åè®® protocol TCP #è®¾ç½®Real Server1çš„RIP real_server 192.168.60.201 80 &#123; #è®¾ç½®æƒé‡ä¸º1 weight 1 #å¯¹åŽå°real_serveråšå¥åº·æ£€æŸ¥ TCP_CHECK &#123; #æ¯æ¬¡è¿žæŽ¥çš„è¶…æ—¶æ—¶é—´3s connect_timeout 3 #å¤±è´¥ä»¥åŽï¼Œé‡å¤æ£€æŸ¥å¤šå°‘æ¬¡ nb_get_retry 3 #æ¯éš”3sæ£€æŸ¥ä¸€ä¸‹ delay_before_retry 3 &#125; &#125; #è®¾ç½®Real Server2çš„RIP real_server 192.168.60.202 80 &#123; weight 1 TCP_CHECK &#123; connect_timeout 3 nb_get_retry 3 delay_before_retry 3 &#125; &#125;&#125;keepalived å¤‡èŠ‚ç‚¹é…ç½®å’Œä¸»èŠ‚ç‚¹å·®ä¸å¤šï¼Œåªéœ€è¦ä¿®æ”¹router_idã€stateã€priority å³å¯ã€‚Â¶ï¼ˆ3ï¼‰è¿è¡Œ keepalived12345678910111213#å¯åŠ¨è¿è¡Œkeepalivedï¼ˆé€šè¿‡-fæŒ‡å®šé…ç½®æ–‡ä»¶ï¼Œå¦‚æžœä¸æŒ‡å®šåˆ™é»˜è®¤ä½¿ç”¨çš„é…ç½®æ–‡ä»¶è·¯å¾„ä¸ºï¼š/etc/keepalived/keepalived.confï¼‰/opt/keepalived/sbin/keepalived -f /opt/keepalived/etc/keepalived/keepalived.conf##é˜²ç«å¢™é…ç½®#æ”¾è¡Œkeepalivedä¸»å¤‡æ£€æµ‹firewall-cmd --permanent --add-protocol=vrrpfirewall-cmd --reload#æ”¾è¡ŒLVSå¤„ç†è½¬å‘çš„ç«¯å£firewall-cmd --permanent --add-port=80/tcpfirewall-cmd --reload#è¿è¡ŒkeepalivedåŽï¼Œkeepalivedä¼šè‡ªåŠ¨æ·»åŠ LVSé›†ç¾¤è§„åˆ™ï¼Œå¯ä»¥é€šè¿‡å¦‚ä¸‹å‘½ä»¤éªŒè¯æŸ¥çœ‹é›†ç¾¤è§„åˆ™ipvsadm -LnÂ¶4. é›†ç¾¤æµ‹è¯•Â¶1ï¼‰è´Ÿè½½å‡è¡¡æµ‹è¯•å®¢æˆ·ç«¯è®¿é—® VIP è§‚æµ‹æ˜¯å¦å®žçŽ°è´Ÿè½½å‡è¡¡1curl http://192.168.60.100:80Â¶2ï¼‰LVS æœåŠ¡å™¨æ•…éšœæ¢å¤ä¸»å¤‡åˆ‡æ¢æµ‹è¯•æŠŠ LVS1 çš„ keepalived åœæŽ‰åŽè§‚æµ‹æ˜¯å¦è¿˜èƒ½æ­£å¸¸è®¿é—®12ps -ef | grep keepalivedkill -9 è¿›ç¨‹å·ç„¶åŽåœ¨ LVS2 ä¸Šé€šè¿‡ ip addr å‘½ä»¤æŸ¥çœ‹æ˜¯å¦å‘ç”Ÿ VIP â€œé£˜ç§»â€Â¶3ï¼‰çœŸå®žæœåŠ¡å™¨å¥åº·æ£€æŸ¥æµ‹è¯•å…³é—­ Real Server1 çš„ Nginx åŽè§‚æµ‹æ˜¯å¦ä¸å†è½¬å‘åˆ° Real Server1ï¼Œå†å¯åŠ¨ Real Server1 çš„ Nginx è§‚æµ‹æ˜¯å¦æ¢å¤è½¬å‘åˆ° Real Server1ã€‚123456789#åœ¨Real Server1ä¸Šå…³é—­nginxdocker stop nginx#åœ¨ä»»æ„ä¸€å°LVSæœåŠ¡å™¨ä¸Šï¼ˆå¦‚LVS1ï¼‰æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤æŸ¥çœ‹æ˜¯å¦è‡ªåŠ¨ç§»é™¤Real Server1çœŸå®žæœåŠ¡å™¨é…ç½®è§„åˆ™ipvsadm -Ln#åœ¨Real Server1ä¸Šå¯åŠ¨nginxdocker start nginx#åœ¨ä»»æ„ä¸€å°LVSæœåŠ¡å™¨ä¸Šï¼ˆå¦‚LVS1ï¼‰æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤æŸ¥çœ‹æ˜¯å¦è‡ªåŠ¨å¢žåŠ Real Server1çœŸå®žæœåŠ¡å™¨é…ç½®è§„åˆ™ipvsadm -Ln]]></content>
      <categories>
        <category>devops</category>
      </categories>
      <tags>
        <tag>linux</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Keepalived+MySQLå®žçŽ°é«˜å¯ç”¨]]></title>
    <url>%2Fdevops%2Fmysql_ha.html</url>
    <content type="text"><![CDATA[Â¶ä¸€ã€çŽ¯å¢ƒè§„åˆ’ä¸»æœºåIPåœ°å€å¤‡æ³¨æœåŠ¡å™¨Ahosta192.168.60.101keepaliveä¸»èŠ‚ç‚¹ã€Mysqlä¸»èŠ‚ç‚¹1æœåŠ¡å™¨Bhostb192.168.60.102keepaliveå¤‡èŠ‚ç‚¹ã€Mysqlä¸»èŠ‚ç‚¹2192.168.60.222keepaliveè™šæ‹ŸIPï¼Œä¼šåœ¨keepaliveå¯åŠ¨åŽåˆ†é…åˆ°ä¸Šé¢2å°æœºå™¨çš„ä¸»èŠ‚ç‚¹ä¸ŠÂ¶äºŒã€Mysqlå®‰è£…é…ç½®ä¸ºäº†ç®€åŒ–mysqlå®‰è£…è¿‡ç¨‹ï¼Œè¿™é‡Œä½¿ç”¨dockeræ¥è¿›è¡Œå®‰è£…é…ç½®ã€‚1234docker pull mysql:5.7mkdir /opt/mysql/conf -pmkdir /opt/mysql/data -pvim /opt/mysql/conf/my.cnfæœåŠ¡å™¨Aé…ç½®ï¼š1234567891011121314151617181920212223242526272829## my.cnf[mysql]# è®¾ç½®mysqlå®¢æˆ·ç«¯é»˜è®¤å­—ç¬¦é›†default-character-set=utf8[mysqld]# è®¾ç½®3306ç«¯å£port = 3306# è®¾ç½®mysqlçš„å®‰è£…ç›®å½•# basedir=/var/lib/mysql# è®¾ç½® mysqlæ•°æ®åº“çš„æ•°æ®çš„å­˜æ”¾ç›®å½•ï¼Œå¦‚æžœæ˜¯MySQL 8+ ä¸éœ€è¦ä»¥ä¸‹é…ç½®ï¼Œç³»ç»Ÿè‡ªå·±ç”Ÿæˆå³å¯ï¼Œå¦åˆ™æœ‰å¯èƒ½æŠ¥é”™datadir=/var/lib/mysql/data# å…è®¸æœ€å¤§è¿žæŽ¥æ•°max_connections=20# æœåŠ¡ç«¯ä½¿ç”¨çš„å­—ç¬¦é›†é»˜è®¤ä¸º8æ¯”ç‰¹ç¼–ç çš„latin1å­—ç¬¦é›†character-set-server=utf8# åˆ›å»ºæ–°è¡¨æ—¶å°†ä½¿ç”¨çš„é»˜è®¤å­˜å‚¨å¼•æ“Ždefault-storage-engine=INNODB# æœ€å¤§è¿žæŽ¥æ•°max_connections=500server_id = 1 #æœåŠ¡ç¼–å·ï¼ˆé›†ç¾¤ä¸­æ¯ä¸ªèŠ‚ç‚¹çš„æœåŠ¡ç¼–å·éœ€è¦å”¯ä¸€ï¼‰binlog_format=ROWlog_bin=/var/lib/mysql/binlogauto-increment-increment = 2 #ä¸»é”®é€’å¢žçš„æ­¥é•¿ã€ç”±äºŽæ•°åŒä¸»ï¼Œå¦‚æžœæ˜¯è‡ªåŠ¨é€’å¢žçš„ä¸»é”®çš„è¯ï¼Œä¼šå‡ºçŽ°ä¸»é”®å†²çªçš„é—®é¢˜ã€‘auto-increment-offset = 1 #ä¸»é”®è‡ªåŠ¨é€’å¢žçš„åˆå§‹å€¼ã€åŒä¸»çš„èµ·å§‹å€¼è®¾ç½®çš„æ—¶å€™éœ€è¦é”™å¼€ã€‘slave-skip-errors = all #å¿½ç•¥æ‰€æœ‰å¤åˆ¶äº§ç”Ÿçš„é”™è¯¯gtid_mode=ONenforce-gtid-consistency=ONæœåŠ¡å™¨Bé…ç½®ï¼š1234567891011121314151617181920212223242526272829## my.cnf[mysql]# è®¾ç½®mysqlå®¢æˆ·ç«¯é»˜è®¤å­—ç¬¦é›†default-character-set=utf8[mysqld]# è®¾ç½®3306ç«¯å£port = 3306# è®¾ç½®mysqlçš„å®‰è£…ç›®å½•# basedir=/var/lib/mysql# è®¾ç½® mysqlæ•°æ®åº“çš„æ•°æ®çš„å­˜æ”¾ç›®å½•ï¼Œå¦‚æžœæ˜¯MySQL 8+ ä¸éœ€è¦ä»¥ä¸‹é…ç½®ï¼Œç³»ç»Ÿè‡ªå·±ç”Ÿæˆå³å¯ï¼Œå¦åˆ™æœ‰å¯èƒ½æŠ¥é”™datadir=/var/lib/mysql/data# å…è®¸æœ€å¤§è¿žæŽ¥æ•°max_connections=20# æœåŠ¡ç«¯ä½¿ç”¨çš„å­—ç¬¦é›†é»˜è®¤ä¸º8æ¯”ç‰¹ç¼–ç çš„latin1å­—ç¬¦é›†character-set-server=utf8# åˆ›å»ºæ–°è¡¨æ—¶å°†ä½¿ç”¨çš„é»˜è®¤å­˜å‚¨å¼•æ“Ždefault-storage-engine=INNODB# æœ€å¤§è¿žæŽ¥æ•°max_connections=500server_id = 2 #æœåŠ¡ç¼–å·ï¼ˆé›†ç¾¤ä¸­æ¯ä¸ªèŠ‚ç‚¹çš„æœåŠ¡ç¼–å·éœ€è¦å”¯ä¸€ï¼‰binlog_format=ROWlog_bin=/var/lib/mysql/binlogauto-increment-increment = 2 #ä¸»é”®é€’å¢žçš„æ­¥é•¿ã€ç”±äºŽæ•°åŒä¸»ï¼Œå¦‚æžœæ˜¯è‡ªåŠ¨é€’å¢žçš„ä¸»é”®çš„è¯ï¼Œä¼šå‡ºçŽ°ä¸»é”®å†²çªçš„é—®é¢˜ã€‘auto-increment-offset = 2 #ä¸»é”®è‡ªåŠ¨é€’å¢žçš„åˆå§‹å€¼ã€åŒä¸»çš„èµ·å§‹å€¼è®¾ç½®çš„æ—¶å€™éœ€è¦é”™å¼€ã€‘slave-skip-errors = all #å¿½ç•¥æ‰€æœ‰å¤åˆ¶äº§ç”Ÿçš„é”™è¯¯gtid_mode=ONenforce-gtid-consistency=ON123456789#è¿è¡Œmysqlå®žä¾‹docker run -d --name mysql -p 3306:3306 -v /opt/mysql/conf:/etc/mysql/conf.d -v /opt/mysql/data:/var/lib/mysql/data -e MYSQL_ROOT_PASSWORD=123456 mysql:5.7#è¿›å…¥mysqlå®¹å™¨å†…docker exec -it mysql bash#åˆ›å»ºå¤åˆ¶ç”¨æˆ·ï¼Œ2ä¸ªæ•°æ®åº“ä¸Šéƒ½è¦åˆ›å»ºmysql -uroot -p123456grant replication slave on *.* to 'rep'@'%' identified by '123';å°†æœåŠ¡å™¨Aæ•°æ®åº“æ•°æ®å¯¼å‡ºå¹¶å¯¼å…¥åˆ°æ•°æ®åº“Bä¸­ã€‚åœ¨æœåŠ¡å™¨Bä¸Šè¿›è¡Œå¦‚ä¸‹æ“ä½œï¼š12mysqldump -uroot -p123456 -h 192.168.60.101 --single-transaction --all-databases --master-data=2 &gt; hosta.sqlmysql -uroot -p123456 &lt; hosta.sqlåœ¨æœåŠ¡å™¨Bä¸Šå¼€å¯æ•°æ®åº“å¤åˆ¶1mysql -uroot -p123456123456789101112131415161718192021222324252627282930-- é…ç½®å¤åˆ¶mysql&gt; CHANGE MASTER TO -&gt; master_host='192.168.60.101', -&gt; master_port=3306, -&gt; master_user='rep', -&gt; master_password='123', -&gt; MASTER_AUTO_POSITION = 1;Query OK, 0 rows affected, 2 warnings (0.01 sec)-- å¼€å¯å¤åˆ¶mysql&gt; start slave; Query OK, 0 rows affected (0.00 sec)-- æŸ¥çœ‹å¤åˆ¶çŠ¶æ€mysql&gt; show slave status \G*************************** 1. row *************************** Slave_IO_State: Waiting for master to send event Master_Host: 192.168.60.101 Master_User: rep Master_Port: 3306 Connect_Retry: 60 Master_Log_File: binlog.000001 Read_Master_Log_Pos: 611 Relay_Log_File: a8bb67ca2607-relay-bin.000011 Relay_Log_Pos: 445 Relay_Master_Log_File: binlog.000001 #ä¸‹é¢å‡ºçŽ°ä¸¤ä¸ªYeså°±è¡¨ç¤ºè¿žæŽ¥æœåŠ¡å™¨AæˆåŠŸ Slave_IO_Running: Yes Slave_SQL_Running: Yesåœ¨æœåŠ¡å™¨Aä¸Šå¼€å¯æ•°æ®åº“å¤åˆ¶1mysql -uroot -p1234561234567891011121314151617181920212223242526272829-- é…ç½®å¤åˆ¶mysql&gt; CHANGE MASTER TO -&gt; master_host='192.168.60.102', -&gt; master_port=3306, -&gt; master_user='rep', -&gt; master_password='123', -&gt; MASTER_AUTO_POSITION = 1;Query OK, 0 rows affected, 2 warnings (0.01 sec)-- å¼€å¯å¤åˆ¶mysql&gt; start slave; Query OK, 0 rows affected (0.00 sec)-- æŸ¥çœ‹å¤åˆ¶çŠ¶æ€mysql&gt; show slave status \G*************************** 1. row *************************** Slave_IO_State: Waiting for master to send event Master_Host: 192.168.60.102 Master_User: rep Master_Port: 3306 Connect_Retry: 60 Master_Log_File: binlog.000001 Read_Master_Log_Pos: 614 Relay_Log_File: 85921dd2dd0a-relay-bin.000011 Relay_Log_Pos: 445 Relay_Master_Log_File: binlog.000001 Slave_IO_Running: Yes Slave_SQL_Running: Yesæµ‹è¯•åŒä¸»å¤åˆ¶123456789--åœ¨æœåŠ¡å™¨Aä¸Šåˆ›å»ºæ•°æ®åº“create database testa;--åœ¨æœåŠ¡å™¨Bä¸ŠæŸ¥çœ‹æ•°æ®åº“show databases;--åœ¨æœåŠ¡å™¨Bä¸Šåˆ›å»ºæ•°æ®åº“create database testb;--åœ¨æœåŠ¡å™¨Aä¸ŠæŸ¥çœ‹æ•°æ®åº“show databases;Â¶ä¸‰ã€Keepalivedå®‰è£…é…ç½®å®‰è£…è¿‡ç¨‹ä»¥åŠä½¿ç”¨è¯·çœ‹ã€Škeepalivedå­¦ä¹ ç¬”è®°ã€‹ä¸€æ–‡ã€‚åœ¨æœ¬æ¬¡æ¡ˆä¾‹ä¸­Keepalivedé…ç½®å¦‚ä¸‹ï¼šæœåŠ¡å™¨Aï¼š123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263! Configuration File for keepalivedglobal_defs &#123; #é€šçŸ¥é‚®ä»¶ï¼Œå½“keepalivedå‘ç”Ÿåˆ‡æ¢æ—¶éœ€è¦å‘emailç»™å…·ä½“çš„é‚®ç®±åœ°å€ notification_email &#123; acassen@firewall.loc failover@firewall.loc sysadmin@firewall.loc &#125; #è®¾ç½®å‘ä»¶äººçš„é‚®ç®±ä¿¡æ¯ notification_email_from Alexandre.Cassen@firewall.loc #æŒ‡å®šsmptæœåŠ¡åœ°å€ smtp_server 192.168.200.1 #æŒ‡å®šsmptæœåŠ¡è¿žæŽ¥è¶…æ—¶æ—¶é—´ smtp_connect_timeout 30 #è¿è¡ŒkeepalivedæœåŠ¡å™¨çš„ä¸€ä¸ªæ ‡è¯†(æ¯ä¸ªæœåŠ¡çš„ä¸ä¸€æ ·)ï¼Œå¯ä»¥ç”¨ä½œå‘é€é‚®ä»¶çš„ä¸»é¢˜ä¿¡æ¯ router_id keepalived1 #é»˜è®¤æ˜¯ä¸è·³è¿‡æ£€æŸ¥ã€‚æ£€æŸ¥æ”¶åˆ°çš„VRRPé€šå‘Šä¸­çš„æ‰€æœ‰åœ°å€å¯èƒ½ä¼šæ¯”è¾ƒè€—æ—¶ï¼Œè®¾ç½®æ­¤å‘½ä»¤çš„æ„æ€æ˜¯ï¼Œå¦‚æžœé€šå‘Šä¸ŽæŽ¥æ”¶çš„ä¸Šä¸€ä¸ªé€šå‘Šæ¥è‡ªç›¸åŒçš„masterè·¯ç”±å™¨ï¼Œåˆ™ä¸æ‰§è¡Œæ£€æŸ¥(è·³è¿‡æ£€æŸ¥) vrrp_skip_check_adv_addr #æ³¨é‡ŠæŽ‰ä¸¥æ ¼éµå®ˆVRRPåè®®ï¼Œå¦åˆ™æ— æ³•æ­£å¸¸ä½¿ç”¨è™šæ‹Ÿipï¼Œå¦‚ping #vrrp_strict #åœ¨ä¸€ä¸ªæŽ¥å£å‘é€çš„ä¸¤ä¸ªå…è´¹ARPä¹‹é—´çš„å»¶è¿Ÿã€‚å¯ä»¥ç²¾ç¡®åˆ°æ¯«ç§’çº§ã€‚é»˜è®¤æ˜¯0 vrrp_garp_interval 0 #åœ¨ä¸€ä¸ªç½‘å¡ä¸Šæ¯ç»„naæ¶ˆæ¯ä¹‹é—´çš„å»¶è¿Ÿæ—¶é—´ï¼Œé»˜è®¤ä¸º0 vrrp_gna_interval 0&#125;#åŠ å…¥ä»¥ä¸‹vrrp_scriptvrrp_script chk_mysql_port &#123; #æ‰§è¡Œè„šæœ¬çš„ä½ç½® script "/etc/keepalived/chk_mysql_port" #æ‰§è¡Œè„šæœ¬çš„å‘¨æœŸï¼Œç§’ä¸ºå•ä½ interval 2 #æƒé‡çš„è®¡ç®—æ–¹å¼ weight -20&#125;vrrp_instance VI_1 &#123; #æœ‰ä¸¤ä¸ªå€¼å¯é€‰MASTERä¸» BACKUPå¤‡(å¯ä»¥éƒ½è®¾ç½®ä¸ºBACKUPï¼Œè®©keepalivedè‡ªå·±æ ¹æ®priorityå€¼å¤§å°è‡ªå·±é€‰ä¸¾MASTER) state MASTER #vrrpå®žä¾‹ç»‘å®šçš„ç½‘å¡æŽ¥å£åç§°ï¼ˆå¯ä»¥é€šè¿‡ifconfigå‘½ä»¤æŸ¥çœ‹ï¼‰ï¼Œç”¨äºŽå‘é€VRRP interface ens33 #æŒ‡å®šVRRPå®žä¾‹ID(ç›¸åŒè™šæ‹Ÿipçš„å¤šä¸ªæœåŠ¡è¯¥å€¼è¦ç›¸åŒ)ï¼ŒèŒƒå›´æ˜¯0-255 virtual_router_id 51 #æŒ‡å®šä¼˜å…ˆçº§ï¼Œä¼˜å…ˆçº§é«˜çš„å°†æˆä¸ºMASTER priority 100 #æŒ‡å®šå‘é€VRRPé€šå‘Šçš„é—´éš”ï¼Œå•ä½æ˜¯ç§’ advert_int 1 authentication &#123; #æŒ‡å®šè®¤è¯æ–¹å¼ã€‚PASSç®€å•å¯†ç è®¤è¯(æŽ¨è) auth_type PASS #æŒ‡å®šè®¤è¯ä½¿ç”¨çš„å¯†ç ï¼Œæœ€å¤š8ä½ auth_pass 1111 &#125; #è™šæ‹ŸIPåœ°å€è®¾ç½®è™šæ‹ŸIPåœ°å€ï¼ˆéœ€è¦å’Œä»¥ä¸Šç½‘å¡æŽ¥å£çš„çœŸå®žipåœ¨åŒä¸€ç½‘æ®µï¼‰ï¼Œä¾›ç”¨æˆ·è®¿é—®ä½¿ç”¨ï¼Œå¯è®¾ç½®å¤šä¸ªï¼Œä¸€è¡Œä¸€ä¸ª virtual_ipaddress &#123; 192.168.60.222 &#125; #åŠ å…¥ä»¥ä¸‹track_script track_script &#123; chk_mysql_port &#125;&#125;æœåŠ¡å™¨Bï¼š123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263! Configuration File for keepalivedglobal_defs &#123; #é€šçŸ¥é‚®ä»¶ï¼Œå½“keepalivedå‘ç”Ÿåˆ‡æ¢æ—¶éœ€è¦å‘emailç»™å…·ä½“çš„é‚®ç®±åœ°å€ notification_email &#123; acassen@firewall.loc failover@firewall.loc sysadmin@firewall.loc &#125; #è®¾ç½®å‘ä»¶äººçš„é‚®ç®±ä¿¡æ¯ notification_email_from Alexandre.Cassen@firewall.loc #æŒ‡å®šsmptæœåŠ¡åœ°å€ smtp_server 192.168.200.1 #æŒ‡å®šsmptæœåŠ¡è¿žæŽ¥è¶…æ—¶æ—¶é—´ smtp_connect_timeout 30 #è¿è¡ŒkeepalivedæœåŠ¡å™¨çš„ä¸€ä¸ªæ ‡è¯†(æ¯ä¸ªæœåŠ¡çš„ä¸ä¸€æ ·)ï¼Œå¯ä»¥ç”¨ä½œå‘é€é‚®ä»¶çš„ä¸»é¢˜ä¿¡æ¯ router_id keepalived2 #é»˜è®¤æ˜¯ä¸è·³è¿‡æ£€æŸ¥ã€‚æ£€æŸ¥æ”¶åˆ°çš„VRRPé€šå‘Šä¸­çš„æ‰€æœ‰åœ°å€å¯èƒ½ä¼šæ¯”è¾ƒè€—æ—¶ï¼Œè®¾ç½®æ­¤å‘½ä»¤çš„æ„æ€æ˜¯ï¼Œå¦‚æžœé€šå‘Šä¸ŽæŽ¥æ”¶çš„ä¸Šä¸€ä¸ªé€šå‘Šæ¥è‡ªç›¸åŒçš„masterè·¯ç”±å™¨ï¼Œåˆ™ä¸æ‰§è¡Œæ£€æŸ¥(è·³è¿‡æ£€æŸ¥) vrrp_skip_check_adv_addr #æ³¨é‡ŠæŽ‰ä¸¥æ ¼éµå®ˆVRRPåè®®ï¼Œå¦åˆ™æ— æ³•æ­£å¸¸ä½¿ç”¨è™šæ‹Ÿipï¼Œå¦‚ping #vrrp_strict #åœ¨ä¸€ä¸ªæŽ¥å£å‘é€çš„ä¸¤ä¸ªå…è´¹ARPä¹‹é—´çš„å»¶è¿Ÿã€‚å¯ä»¥ç²¾ç¡®åˆ°æ¯«ç§’çº§ã€‚é»˜è®¤æ˜¯0 vrrp_garp_interval 0 #åœ¨ä¸€ä¸ªç½‘å¡ä¸Šæ¯ç»„naæ¶ˆæ¯ä¹‹é—´çš„å»¶è¿Ÿæ—¶é—´ï¼Œé»˜è®¤ä¸º0 vrrp_gna_interval 0&#125;#åŠ å…¥ä»¥ä¸‹vrrp_scriptvrrp_script chk_mysql_port &#123; #æ‰§è¡Œè„šæœ¬çš„ä½ç½® script "/etc/keepalived/chk_mysql_port" #æ‰§è¡Œè„šæœ¬çš„å‘¨æœŸï¼Œç§’ä¸ºå•ä½ interval 2 #æƒé‡çš„è®¡ç®—æ–¹å¼ weight -20&#125;vrrp_instance VI_1 &#123; #æœ‰ä¸¤ä¸ªå€¼å¯é€‰MASTERä¸» BACKUPå¤‡(å¯ä»¥éƒ½è®¾ç½®ä¸ºBACKUPï¼Œè®©keepalivedè‡ªå·±æ ¹æ®priorityå€¼å¤§å°è‡ªå·±é€‰ä¸¾MASTER) state BACKUP #vrrpå®žä¾‹ç»‘å®šçš„ç½‘å¡æŽ¥å£åç§°ï¼ˆå¯ä»¥é€šè¿‡ifconfigå‘½ä»¤æŸ¥çœ‹ï¼‰ï¼Œç”¨äºŽå‘é€VRRP interface ens33 #æŒ‡å®šVRRPå®žä¾‹ID(ç›¸åŒè™šæ‹Ÿipçš„å¤šä¸ªæœåŠ¡è¯¥å€¼è¦ç›¸åŒ)ï¼ŒèŒƒå›´æ˜¯0-255 virtual_router_id 51 #æŒ‡å®šä¼˜å…ˆçº§ï¼Œä¼˜å…ˆçº§é«˜çš„å°†æˆä¸ºMASTER priority 90 #æŒ‡å®šå‘é€VRRPé€šå‘Šçš„é—´éš”ï¼Œå•ä½æ˜¯ç§’ advert_int 1 authentication &#123; #æŒ‡å®šè®¤è¯æ–¹å¼ã€‚PASSç®€å•å¯†ç è®¤è¯(æŽ¨è) auth_type PASS #æŒ‡å®šè®¤è¯ä½¿ç”¨çš„å¯†ç ï¼Œæœ€å¤š8ä½ auth_pass 1111 &#125; #è™šæ‹ŸIPåœ°å€è®¾ç½®è™šæ‹ŸIPåœ°å€ï¼ˆéœ€è¦å’Œä»¥ä¸Šç½‘å¡æŽ¥å£çš„çœŸå®žipåœ¨åŒä¸€ç½‘æ®µï¼‰ï¼Œä¾›ç”¨æˆ·è®¿é—®ä½¿ç”¨ï¼Œå¯è®¾ç½®å¤šä¸ªï¼Œä¸€è¡Œä¸€ä¸ª virtual_ipaddress &#123; 192.168.60.222 &#125; #åŠ å…¥ä»¥ä¸‹track_script track_script &#123; chk_mysql_port &#125;&#125;1vim /etc/keepalived/chk_mysql_port12345#!/bin/bashcounter=$(netstat -na|grep "LISTEN"|grep "3306"|wc -l)if [ "$&#123;counter&#125;" -eq 0 ]; then killall keepalivedfiÂ¶å››ã€æµ‹è¯•åœ¨å®¢æˆ·ç«¯é€šè¿‡è™šæ‹Ÿipï¼š192.168.60.222è¿žæŽ¥mysqlã€‚ç„¶åŽå°è¯•å…³é—­æœåŠ¡å™¨Açš„mysqlçœ‹æ˜¯å¦å®¢æˆ·ç«¯è¿˜èƒ½æ­£å¸¸ä½¿ç”¨ï¼ˆè™šæ‹ŸipæŒ‡å‘æœåŠ¡å™¨Bï¼‰ã€‚12#åœ¨æœåŠ¡å™¨Aä¸Šå…³é—­mysqldocker stop mysqlå‚è€ƒï¼šhttps://www.cnblogs.com/lijiaman/p/13430668.htmlhttps://zhuanlan.zhihu.com/p/70820683http://t.zoukankan.com/twodog-p-12139262.html]]></content>
      <categories>
        <category>devops</category>
      </categories>
      <tags>
        <tag>linux</tag>
        <tag>mysql</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[keepalivedå­¦ä¹ ç¬”è®°]]></title>
    <url>%2Fdevops%2Fkeepalived.html</url>
    <content type="text"><![CDATA[Keepalivedæ˜¯ä¸€ä¸ªç”¨äºŽå®žçŽ°è™šæ‹Ÿè·¯ç”±å†—ä½™åè®®ï¼ˆVirtual Router Redundancy Protocolï¼ŒVRRPï¼‰çš„å¼€æºè½¯ä»¶ã€‚å®ƒæ—¨åœ¨æä¾›é«˜å¯ç”¨æ€§å’Œæ•…éšœæ¢å¤èƒ½åŠ›ï¼Œç”¨äºŽç¡®ä¿åœ¨ä¸»æœåŠ¡å™¨å‘ç”Ÿæ•…éšœæ—¶è‡ªåŠ¨å°†æµé‡åˆ‡æ¢åˆ°å¤‡ä»½æœåŠ¡å™¨ã€‚â€œé«˜å¯ç”¨â€ï¼ˆHigh Availabilityï¼ŒHAï¼‰æ˜¯æŒ‡ç³»ç»Ÿæˆ–æœåŠ¡èƒ½å¤Ÿåœ¨é¢å¯¹ç¡¬ä»¶æ•…éšœã€è½¯ä»¶æ•…éšœã€ç½‘ç»œæ•…éšœæˆ–å…¶ä»–ä¸å¯é¢„è§çš„äº‹ä»¶æ—¶ï¼Œä»èƒ½å¤ŸæŒç»­æä¾›æ­£å¸¸çš„è¿è¡Œå’Œå¯ç”¨æ€§ã€‚åœ¨ä¸€ä¸ªé«˜å¯ç”¨ç³»ç»Ÿä¸­ï¼Œæ•…éšœçš„éƒ¨åˆ†å¯ä»¥è¢«æ— ç¼åœ°æ›¿ä»£ï¼Œç”¨æˆ·ä¸ä¼šæ„ŸçŸ¥åˆ°æœåŠ¡ä¸­æ–­æˆ–é™çº§ã€‚Keepalivedé€šè¿‡åˆ›å»ºä¸€ä¸ªå†—ä½™çš„è™šæ‹ŸIPï¼ˆVirtual IPï¼ŒVIPï¼‰åœ°å€ï¼Œä½¿å¤šä¸ªæœåŠ¡å™¨å…±äº«åŒä¸€ä¸ªVIPåœ°å€ã€‚è¿™äº›æœåŠ¡å™¨ä¸­çš„ä¸€ä¸ªè¢«é…ç½®ä¸ºä¸»æœåŠ¡å™¨ï¼ˆMasterï¼‰ï¼Œè´Ÿè´£æŽ¥æ”¶å’Œå¤„ç†æ‰€æœ‰æµé‡ï¼Œè€Œå…¶ä»–æœåŠ¡å™¨åˆ™å¤„äºŽå¤‡ä»½çŠ¶æ€ï¼ˆBackupï¼‰ã€‚ä¸»æœåŠ¡å™¨è´Ÿè´£å°†æµé‡ä¼ é€’ç»™åŽç«¯çš„çœŸå®žæœåŠ¡å™¨ï¼ˆReal Serversï¼‰ï¼Œå¤‡ä»½æœåŠ¡å™¨ç›‘æŽ§ä¸»æœåŠ¡å™¨çš„çŠ¶æ€ï¼Œå¹¶åœ¨ä¸»æœåŠ¡å™¨å‘ç”Ÿæ•…éšœæ—¶æŽ¥ç®¡æµé‡ã€‚Keepalivedä½¿ç”¨VRRPåè®®æ¥åè°ƒä¸»å¤‡æœåŠ¡å™¨ä¹‹é—´çš„çŠ¶æ€ã€‚VRRPæ˜¯ä¸€ç§ç½‘ç»œåè®®ï¼Œå®šä¹‰äº†ä¸»æœåŠ¡å™¨çš„é€‰ä¸¾å’ŒçŠ¶æ€è½¬æ¢è¿‡ç¨‹ï¼Œä»¥åŠå®¢æˆ·ç«¯è¯·æ±‚çš„è½¬å‘ã€‚ä¸»æœåŠ¡å™¨é€šè¿‡å‘¨æœŸæ€§çš„VRRPå¹¿æ’­æ¥å®£å‘Šè‡ªå·±çš„å­˜åœ¨å’ŒçŠ¶æ€ï¼Œå¹¶é€šè¿‡VRRPæ¶ˆæ¯åè®®ä¸Žå¤‡ä»½æœåŠ¡å™¨è¿›è¡Œé€šä¿¡ï¼Œä»¥ç¡®ä¿ä¸€è‡´æ€§å’Œå¯é æ€§ã€‚VRRPï¼ˆVirtual Route Redundancy Protocolï¼‰åè®®ï¼Œç¿»è¯‘è¿‡æ¥ä¸ºè™šæ‹Ÿè·¯ç”±å†—ä½™åè®®ã€‚VRRPåè®®å°†ä¸¤å°æˆ–å¤šå°è·¯ç”±å™¨è®¾å¤‡è™šæ‹Ÿæˆä¸€ä¸ªè®¾å¤‡ï¼Œå¯¹å¤–æä¾›è™šæ‹Ÿè·¯ç”±å™¨IPï¼Œè€Œåœ¨è·¯ç”±å™¨ç»„å†…éƒ¨ï¼Œå¦‚æžœå®žé™…æ‹¥æœ‰è¿™ä¸ªå¯¹å¤–IPçš„è·¯ç”±å™¨å¦‚æžœå·¥ä½œæ­£å¸¸çš„è¯å°±æ˜¯MASTERï¼ŒMASTERå®žçŽ°é’ˆå¯¹è™šæ‹Ÿè·¯ç”±å™¨IPçš„å„ç§ç½‘ç»œåŠŸèƒ½ã€‚å…¶ä»–è®¾å¤‡ä¸æ‹¥æœ‰è¯¥è™šæ‹ŸIPï¼ŒçŠ¶æ€ä¸ºBACKUPï¼Œé™¤äº†æŽ¥æ”¶MASTERçš„VRRPçŠ¶æ€é€šå‘Šä¿¡æ¯ä»¥å¤–ï¼Œä¸æ‰§è¡Œå¯¹å¤–çš„ç½‘ç»œåŠŸèƒ½ã€‚å½“ä¸»æœºå¤±æ•ˆæ—¶ï¼ŒBACKUPå°†æŽ¥ç®¡åŽŸå…ˆMASTERçš„ç½‘ç»œåŠŸèƒ½ã€‚Masterè·¯ç”±å’ŒBackupè·¯ç”±ä¹‹é—´ä¼šæœ‰ä¸€ä¸ªå¿ƒè·³æ£€æµ‹ï¼ŒMasterä¼šå®šæ—¶å‘ŠçŸ¥Backupè‡ªå·±çš„çŠ¶æ€ï¼Œå¦‚æžœåœ¨æŒ‡å®šçš„æ—¶é—´å†…ï¼ŒBackupæ²¡æœ‰æŽ¥æ”¶åˆ°è¿™ä¸ªé€šçŸ¥å†…å®¹ï¼ŒBackupå°±ä¼šæ›¿ä»£Masteræˆä¸ºæ–°çš„Masterï¼ˆå¦‚æžœæœ‰å¤šä¸ªBACKUPï¼Œé‚£ä¹ˆä¼šé€‰ä¸¾å…¶ä¸­ä¸€ä¸ªä¼˜å…ˆçº§é«˜çš„ä½œä¸ºMASTERï¼‰ã€‚Masterè·¯ç”±æœ‰ä¸€ä¸ªç‰¹æƒå°±æ˜¯è™šæ‹Ÿè·¯ç”±å’ŒåŽç«¯æœåŠ¡å™¨éƒ½æ˜¯é€šè¿‡Masterè¿›è¡Œæ•°æ®ä¼ é€’äº¤äº’çš„ï¼Œè€Œå¤‡ä»½èŠ‚ç‚¹åˆ™ä¼šç›´æŽ¥ä¸¢å¼ƒè¿™äº›è¯·æ±‚å’Œæ•°æ®ï¼Œä¸åšå¤„ç†ï¼Œåªæ˜¯åŽ»ç›‘å¬Masterçš„çŠ¶æ€ã€‚å¦‚ä¸Šå›¾Keepalivedå®žçŽ°Nginxè´Ÿè½½å‡è¡¡çš„åŽŸç†å°±æ˜¯åœ¨ä¸¤ä¸ªNginxèŠ‚ç‚¹ä¸­å¼•å…¥è™šæ‹ŸIPçš„æ¦‚å¿µï¼ˆæ¯å°Nginxéƒ½å®‰è£…Keepalivedå¹¶éƒ½é…ç½®åŒä¸€ä¸ªè™šæ‹ŸIPï¼‰ï¼Œå…¶ä¸­ä¸€å°Nginxå®•æœºï¼Œé‚£ä¹ˆè™šæ‹ŸIpå°†ä¼šé£˜ç§»åˆ°å¦ä¸€å°Nginxä¸ŠåŽ»ï¼Œè€Œå®¢æˆ·ç«¯å°±æ˜¯é€šè¿‡è¿™ä¸ªè™šæ‹ŸIPæ¥è®¿é—®Nginxçš„ã€‚Â¶ä¸€ã€å®‰è£…12345678910111213#å®‰è£…ç¼–è¯‘ä¾èµ–yum -y install gcc curl openssl-devel libnl3-devel net-snmp-devel#ä¸‹è½½keepalivedæºç åŒ…wget https://keepalived.org/software/keepalived-2.0.20.tar.gz#è§£åŽ‹æºç åŒ…tar -zxvf keepalived-2.0.20.tar.gz#è¿›å…¥æºç åŒ…è§£åŽ‹ç›®å½•cd keepalived-2.0.20#ç”ŸæˆMakefileæ–‡ä»¶./configure --prefix=/opt/keepalived#å¯ä»¥é€šè¿‡æŒ‡å®š--sysconfæ¥æŒ‡å®šé…ç½®æ–‡ä»¶çš„å®‰è£…è·¯å¾„ï¼Œå¦‚ï¼š./configure --prefix=/opt/keepalived --sysconf=/etc#ç¼–è¯‘å¹¶å®‰è£…make &amp;&amp; make installÂ¶äºŒã€é…ç½®12#ç¼–è¾‘keepalivedé…ç½®æ–‡ä»¶vim /opt/keepalived/etc/keepalived/keepalived.confæœåŠ¡å™¨1é…ç½®123456789101112131415161718192021222324252627global_defs &#123; #è¿è¡ŒkeepalivedæœåŠ¡å™¨çš„ä¸€ä¸ªæ ‡è¯†(æ¯ä¸ªæœåŠ¡çš„ä¸ä¸€æ ·)ï¼Œå¯ä»¥ç”¨ä½œå‘é€é‚®ä»¶çš„ä¸»é¢˜ä¿¡æ¯ router_id keepalived1&#125;vrrp_instance VI_1 &#123; #åˆå§‹åŒ–å½“å‰èŠ‚ç‚¹çš„é»˜è®¤ä¸»å¤‡ç±»åž‹ï¼Œæœ‰ä¸¤ä¸ªå€¼å¯é€‰MASTERä¸» BACKUPå¤‡(å¯ä»¥éƒ½è®¾ç½®ä¸ºBACKUPï¼Œè®©keepalivedè‡ªå·±æ ¹æ®priorityå€¼å¤§å°è‡ªå·±é€‰ä¸¾MASTER) state MASTER #vrrpå®žä¾‹ç»‘å®šçš„ç½‘å¡æŽ¥å£åç§°ï¼ˆå¯ä»¥é€šè¿‡ifconfigå‘½ä»¤æŸ¥çœ‹ï¼‰ï¼Œç”¨äºŽå‘é€VRRP interface ens33 #æŒ‡å®šVRRPå®žä¾‹ID(ç›¸åŒè™šæ‹Ÿipçš„å¤šä¸ªæœåŠ¡è¯¥å€¼è¦ç›¸åŒ)ï¼ŒèŒƒå›´æ˜¯0-255 virtual_router_id 51 #æŒ‡å®šä¼˜å…ˆçº§ï¼Œä¼˜å…ˆçº§é«˜çš„å°†æˆä¸ºMASTERï¼ˆæ³¨æ„ï¼šBACKUPèŠ‚ç‚¹çš„ä¼˜å…ˆçº§åº”è¯¥è¦æ¯”MASTERçš„å°ï¼‰ priority 100 #æŒ‡å®šå‘é€VRRPé€šå‘Šçš„é—´éš”ï¼Œå•ä½æ˜¯ç§’ advert_int 1 authentication &#123; #æŒ‡å®šè®¤è¯æ–¹å¼ã€‚PASSç®€å•å¯†ç è®¤è¯(æŽ¨è) auth_type PASS #æŒ‡å®šè®¤è¯ä½¿ç”¨çš„å¯†ç ï¼Œæœ€å¤š8ä½ auth_pass 1111 &#125; #è™šæ‹ŸIPåœ°å€è®¾ç½®è™šæ‹ŸIPåœ°å€ï¼ˆéœ€è¦å’Œä»¥ä¸Šinterfaceç½‘å¡æŽ¥å£çš„çœŸå®žipåœ¨åŒä¸€ç½‘æ®µï¼‰ï¼Œä¾›ç”¨æˆ·è®¿é—®ä½¿ç”¨ï¼Œå¯è®¾ç½®å¤šä¸ªï¼Œä¸€è¡Œä¸€ä¸ª virtual_ipaddress &#123; 192.168.60.222 &#125;&#125;ä»¥ä¸Šé…ç½®ä¸­æ²¡æœ‰ç‰¹åˆ«éœ€æ±‚çš„è¯ï¼Œæœ€ç®€å•å°±æ˜¯ä¿®æ”¹router_idã€vrrp_strictã€stateã€interfaceã€priorityã€virtual_ipaddressä¸‰å¤„åœ°æ–¹å³å¯ã€‚æœåŠ¡å™¨2é…ç½®123456789101112131415161718global_defs &#123; router_id keepalived2&#125;vrrp_instance VI_1 &#123; state BACKUP interface ens33 virtual_router_id 51 priority 90 advert_int 1 authentication &#123; auth_type PASS auth_pass 1111 &#125; virtual_ipaddress &#123; 192.168.60.222 &#125;&#125;keepalived å¤‡èŠ‚ç‚¹é…ç½®å’Œä¸»èŠ‚ç‚¹å·®ä¸å¤šï¼Œåªéœ€è¦ä¿®æ”¹router_idã€stateã€priority å³å¯ã€‚Â¶ä¸‰ã€ä½¿ç”¨Â¶1. å¯åŠ¨123456#å¯åŠ¨è¿è¡Œkeepalivedï¼ˆé€šè¿‡-fæŒ‡å®šé…ç½®æ–‡ä»¶ï¼Œå¦‚æžœä¸æŒ‡å®šåˆ™é»˜è®¤ä½¿ç”¨çš„é…ç½®æ–‡ä»¶è·¯å¾„ä¸ºï¼š/etc/keepalived/keepalived.confï¼‰/opt/keepalived/sbin/keepalived -f /opt/keepalived/etc/keepalived/keepalived.conf#é˜²ç«å¢™é…ç½®firewall-cmd --permanent --add-protocol=vrrpfirewall-cmd --reloadÂ¶2. æµ‹è¯•æµ‹è¯•æ•ˆæžœå¦‚ä¸‹ï¼šé€šè¿‡æŸ¥çœ‹MASTERèŠ‚ç‚¹æœåŠ¡å™¨çš„æ‰€æœ‰ipæ—¶ï¼Œèƒ½å¤Ÿå‘çŽ°åœ¨MASTERèŠ‚ç‚¹çš„ç½‘å¡æŽ¥å£ens33ä¸­å¤šå‡ºäº†192.168.60.222è¿™ä¸ªè™šæ‹Ÿipåœ°å€ã€‚123456789101112131415$ ip a1: lo: &lt;LOOPBACK,UP,LOWER_UP&gt; mtu 65536 qdisc noqueue state UNKNOWN group default qlen 1000 link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00 inet 127.0.0.1/8 scope host lo valid_lft forever preferred_lft forever inet6 ::1/128 scope host valid_lft forever preferred_lft forever2: ens33: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc pfifo_fast state UP group default qlen 1000 link/ether 00:0c:29:34:1d:18 brd ff:ff:ff:ff:ff:ff inet 192.168.60.101/24 brd 192.168.60.255 scope global noprefixroute ens33 valid_lft forever preferred_lft forever inet 192.168.60.222/32 scope global ens33 valid_lft forever preferred_lft forever inet6 fe80::20c:29ff:fe34:1d18/64 scope link noprefixroute valid_lft forever preferred_lft foreverè€Œé€šè¿‡æŸ¥çœ‹BACKUPèŠ‚ç‚¹æœåŠ¡å™¨çš„æ‰€æœ‰ipæ—¶ï¼Œä¸ä¼šå‡ºçŽ°è™šæ‹Ÿipåœ°å€ã€‚12345678910111213$ ip a1: lo: &lt;LOOPBACK,UP,LOWER_UP&gt; mtu 65536 qdisc noqueue state UNKNOWN group default qlen 1000 link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00 inet 127.0.0.1/8 scope host lo valid_lft forever preferred_lft forever inet6 ::1/128 scope host valid_lft forever preferred_lft forever2: ens33: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc pfifo_fast state UP group default qlen 1000 link/ether 00:0c:29:be:9b:55 brd ff:ff:ff:ff:ff:ff inet 192.168.60.102/24 brd 192.168.60.255 scope global noprefixroute ens33 valid_lft forever preferred_lft forever inet6 fe80::20c:29ff:febe:9b55/64 scope link noprefixroute valid_lft forever preferred_lft foreverÂ¶3. å…³é—­éªŒè¯æƒ…æ™¯ï¼š MASTER èŠ‚ç‚¹å®•æœºæˆ–è€…å‡ºçŽ°æ•…éšœæ—¶ï¼ŒåŽŸæœ¬çš„ MASTER èŠ‚ç‚¹ä¼šè‡ªåŠ¨å¤±åŽ»è™šæ‹Ÿipï¼Œè€Œåœ¨ BACKUP èŠ‚ç‚¹ä¸Šå°†è‡ªåŠ¨èŽ·å¾—è™šæ‹Ÿ IPï¼ˆå‘ç”Ÿäº† IP é£˜ç§»ï¼‰ã€‚æ“ä½œæ–¹å¼ï¼šåœ¨åŽŸæœ¬çš„MASTERèŠ‚ç‚¹ä¸­å…³é—­ keepalivedï¼Œç„¶åŽæŸ¥çœ‹ MASTER å’Œ BACKUP èŠ‚ç‚¹çš„è™šæ‹Ÿ IP æƒ…å†µã€‚1234567#å…³é—­ps -ef | grep keepalivedkill -9 è¿›ç¨‹å·#ä½¿ç”¨killallæ¥æ€æŽ‰è¿›ç¨‹ä¼šæ›´æ–¹ä¾¿yum install psmisc -ykillall keepalivedÂ¶4. è„šæœ¬keepalivedçš„ä½œç”¨å…¶å®žä¹Ÿå°±æ˜¯ç»™å¤šä¸ªæœåŠ¡å™¨ä¸­åŠ å…¥å”¯ä¸€çš„è™šæ‹ŸIPï¼Œä½†å…³æ³¨åˆ°å…·ä½“ä¸šåŠ¡çš„è¯ï¼Œè¿˜å­˜åœ¨è®¸å¤šé—®é¢˜ï¼Œæ¯”å¦‚åšNginxé«˜å¯ç”¨çš„æƒ…å†µä¸‹ï¼Œå‡è®¾æœ‰ä¸¤ä¸ªNginxèŠ‚ç‚¹ï¼Œå…¶ä¸­ä¸€å°Nginxå‡ºçŽ°æ•…éšœä¸å¯ç”¨ï¼Œè€Œå…¶æ‰€åœ¨çš„æœåŠ¡å™¨è¿˜åœ¨æ­£å¸¸è¿è¡Œï¼Œæ‰€ä»¥å…¶å¯¹åº”çš„keepalivedç¨‹åºä¹Ÿæ­£å¸¸è¿è¡Œï¼Œå¾ˆæ˜¾ç„¶è¿™æ˜¯ä¸ä¼šå‘ç”Ÿäº†IPé£˜ç§»çš„ã€‚è€Œæˆ‘ä»¬çš„ç›®çš„æ˜¯Nginxå‡ºçŽ°æ•…éšœä¸å¯ç”¨æ—¶å…¶å¯¹åº”çš„keepalivedä¹Ÿåº”è¯¥è¦è·Ÿç€å…³æŽ‰ï¼Œè¿™æ ·è™šæ‹Ÿipæ‰ä¼šé£˜ç§»åˆ°BACKUPèŠ‚ç‚¹ã€‚keepalivedå…è®¸æˆ‘ä»¬é€šè¿‡ç¼–å†™è„šæœ¬å¯¹ä¸šåŠ¡è¿›ç¨‹è¿›è¡Œæ£€æµ‹ç›‘æŽ§ã€‚1vim /opt/keepalived/etc/keepalived/ck_nginx.shå†…å®¹å¦‚ä¸‹ï¼š1234567891011#!/bin/bashnum=`ps -C nginx --no-header | wc -l`if [ $num -eq 0 ];then #æ³¨æ„nginxçš„å®‰è£…è·¯å¾„ /usr/local/nginx/sbin/nginx sleep 2 if [ `ps -C nginx --no-header | wc -l` -eq 0 ]; then #éœ€è¦å®‰è£…psmiscï¼šyum install psmisc -y killall keepalived fifi12#ä¸ºè„šæœ¬æ–‡ä»¶è®¾ç½®æ‰§è¡Œæƒé™chmod 755 /opt/keepalived/etc/keepalived/ck_nginx.shå°†è„šæœ¬æ·»åŠ åˆ°keepalivedé…ç½®æ–‡ä»¶ä¸­1vim /opt/keepalived/etc/keepalived/keepalived.conf1234567891011121314151617181920212223#åŠ å…¥ä»¥ä¸‹vrrp_scriptvrrp_script ck_nginx &#123; #æ‰§è¡Œè„šæœ¬çš„ä½ç½® script "/etc/keepalived/ck_nginx.sh" #æ‰§è¡Œè„šæœ¬çš„å‘¨æœŸï¼Œç§’ä¸ºå•ä½ interval 2 #æƒé‡çš„è®¡ç®—æ–¹å¼ weight -20&#125;vrrp_instance VI_1 &#123; state MASTER interface ens33 ... ... virtual_ipaddress &#123; 192.168.200.111 &#125; #åŠ å…¥ä»¥ä¸‹track_script track_script &#123; ck_nginx &#125;&#125;Â¶6. æ—¥å¿—1tail -f /var/log/messages]]></content>
      <categories>
        <category>devops</category>
      </categories>
      <tags>
        <tag>linux</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[pythonç‰ˆæœ¬ç®¡ç†å·¥å…·pyenv]]></title>
    <url>%2Ftools%2Fpyenv.html</url>
    <content type="text"><![CDATA[ç”±äºŽåœ¨æ—¥å¸¸åŠžå…¬ç”µè„‘ä¸­æˆ–è€…æœåŠ¡å™¨ä¸Šéƒ½æœ‰ python å¤šç‰ˆæœ¬åŒæ—¶ä½¿ç”¨éœ€æ±‚ï¼Œæ¯”å¦‚ python2 å’Œ python3ã€‚ä½¿ç”¨ pythonç‰ˆæœ¬ç®¡ç†å·¥å…· pyenv æˆ–è€… anaconda å°±èƒ½å¤Ÿæ–¹ä¾¿éšæ„åˆ‡æ¢ python ç‰ˆæœ¬ã€‚Â¶ä¸€ã€pyenvÂ¶1ã€Linuxé¡¹ç›®åœ°å€ï¼šhttps://github.com/pyenv/pyenvÂ¶1ï¼‰å®‰è£…ä¾èµ–12345678#CentOS/Fedora 21 and belowyum install -y gcc make patch zlib-devel bzip2 bzip2-devel readline-devel sqlite sqlite-devel openssl-devel tk-devel libffi-devel xz-devel#Ubuntu/Debian/Mintapt updateapt install build-essential libssl-dev zlib1g-dev \libbz2-dev libreadline-dev libsqlite3-dev curl \libncursesw5-dev xz-utils tk-dev libxml2-dev libxmlsec1-dev libffi-dev liblzma-devæ›´å¤š Linux å‘è¡Œç‰ˆç³»ç»Ÿå®‰è£…ä¾èµ–å‚è€ƒï¼šhttps://github.com/pyenv/pyenv/wiki#suggested-build-environmentÂ¶2ï¼‰å®‰è£…pyenv1234567#è‡ªåŠ¨åŒ–å®‰è£…æ–¹å¼ï¼ˆæŽ¨èï¼Œä¼šåŒæ—¶å®‰è£…pyenvå’Œpyenv-doctorã€pyenv-updateã€pyenv-virtualenvç­‰æ’ä»¶ï¼‰curl https://pyenv.run | bash##æŒ‡å®šç‰ˆæœ¬å®‰è£…æ–¹å¼ï¼ˆä»…ä¼šå®‰è£…pyenvï¼Œä¸ä¼šè‡ªåŠ¨å®‰è£…pyenv-doctorã€pyenv-updateã€pyenv-virtualenvç­‰æ’ä»¶ï¼Œå¦‚éœ€æ’ä»¶è¦è‡ªè¡Œå®‰è£…ï¼‰wget -O pyenv-2.3.17.tar.gz https://github.com/pyenv/pyenv/archive/refs/tags/v2.3.17.tar.gztar -zxvf pyenv-2.3.17.tar.gzmv pyenv-2.3.17 ~/.pyenvÂ¶3ï¼‰é…ç½®çŽ¯å¢ƒå˜é‡123456789101112#æ·»åŠ çŽ¯å¢ƒå˜é‡ã€‚catåŽçš„&gt;&gt;è¡¨ç¤ºè¿½åŠ ï¼Œ&gt;åˆ™è¡¨ç¤ºè¦†ç›–ã€‚&lt;&lt; åŽçš„EOFç”¨å¼•å·å¯ä»¥é¿å…$èµ‹å€¼ï¼Œå¦‚æžœå¸Œæœ›èµ‹å€¼åˆ™ä¸åŠ å¼•å·cat &gt;&gt; ~/.bashrc &lt;&lt; 'EOF'export PYENV_ROOT="$HOME/.pyenv"export PATH="$PYENV_ROOT/bin:$PATH"if command -v pyenv 1&gt;/dev/null 2&gt;&amp;1; then eval "$(pyenv init -)"fiEOF#ä½¿çŽ¯å¢ƒå˜é‡ç”Ÿæ•ˆsource ~/.bashrcÂ¶4ï¼‰å®‰è£…pythonç‰ˆæœ¬12345678#æŒ‡å®šç‰ˆæœ¬å®‰è£…pythonpyenv install 3.7.10pyenv install 2.7.16pyenv install 3.10.10#è®¾ç½®å½“å‰å…¨å±€pythonç‰ˆæœ¬pyenv global 3.7.10 #å…¨å±€ä½¿ç”¨python3.7.10#pyenv global 2.7.16 #å…¨å±€ä½¿ç”¨python2.7.16#pyenv global system #ä½¿ç”¨æ“ä½œç³»ç»ŸåŽŸæœ¬è‡ªå¸¦çš„pythonç‰ˆæœ¬æç¤ºï¼šä¸Ž Windows å¹³å°ä¸Šçš„ pyenv-win ä¸åŒï¼Œpyenv-win æ˜¯äºŒè¿›åˆ¶åŒ…å®‰è£…ï¼Œè€Œ pyenv åˆ™æ˜¯å¯¹æŒ‡å®šç‰ˆæœ¬çš„ python æºç åŒ…è¿›è¡Œç¼–è¯‘å®‰è£…ï¼Œæ‰€ä»¥å®‰è£…ä¼šæ¯”è¾ƒä¹…ã€‚ç»æµ‹è¯• Python 3.7.0 åœ¨ WSL Ubuntu 22.04 ä¸­ä¼šç¼–è¯‘å¤±è´¥ï¼Œæš‚ä¸æ¸…æ¥šåŽŸå› ã€‚Â¶5ï¼‰å¸¸ç”¨å‘½ä»¤123456789101112pyenv commands æŸ¥çœ‹pyenvå‘½ä»¤pyenv install --list #æŸ¥çœ‹å¯å®‰è£…çš„pythonç‰ˆæœ¬pyenv versions #æŸ¥çœ‹å·²å®‰è£…ç‰ˆæœ¬pyenv version #æŸ¥çœ‹å½“å‰ä½¿ç”¨çš„pythonç‰ˆæœ¬pyenv update #æ›´æ–°pyenvåŠå…¶æ’ä»¶ï¼ˆä¾èµ–pyenv-updateæ’ä»¶ï¼Œå‚è€ƒï¼šhttps://github.com/pyenv/pyenv/tree/master?tab=readme-ov-file#upgrading-with-installer-or-git-checkoutï¼Œè¿™é‡Œè¯¥å‘½ä»¤å’Œ Windows ç‰ˆæœ¬ä¸ä¸€æ ·ï¼Œå¹¶éžæ›´æ–°æœ¬åœ°pythonç‰ˆæœ¬é…ç½®ï¼‰pyenv install -v ç‰ˆæœ¬å· #æŒ‡å®šç‰ˆæœ¬å®‰è£…pythonï¼Œ-v å¯çœç•¥pyenv rehash #åˆ·æ–°pythonå·²å®‰è£…åˆ—è¡¨pyenv uninstall ç‰ˆæœ¬å· #åˆ é™¤pythonpyenv virtualenv å·²æœ‰ç‰ˆæœ¬çŽ¯å¢ƒåå æ–°ç‰ˆæœ¬çŽ¯å¢ƒå #æŒ‰å·²æœ‰ç‰ˆåˆ›å»ºæ–°çš„pythonçŽ¯å¢ƒï¼ˆè°ƒç”¨virtualenv,python3 è‡ªå¸¦äº†virtualenv,py2è¦è‡ªè¡Œè£…ï¼‰pyenv global ç‰ˆæœ¬å· #è®¾ç½®å½“å‰å…¨å±€pythonç‰ˆæœ¬pyenv local ç‰ˆæœ¬å· #è®¾ç½®å½“å‰ç›®å½•å±€éƒ¨pythonç‰ˆæœ¬ï¼Œä»¥åŽè¿›å…¥ç›®å½•å°±ä¼šè‡ªåŠ¨åˆ‡æ¢åˆ°è¿™ä¸ªç‰ˆæœ¬pyenv local --unset #å–æ¶ˆå±€éƒ¨pythonç‰ˆæœ¬è®¾ç½®,æˆ–è€…åˆ é™¤å½“å‰ç›®å½•ä¸‹çš„.python-versionæ–‡ä»¶Â¶6ï¼‰pyenv-virtualenv å‘½ä»¤ä½¿ç”¨1234567891011121314#åˆ›å»ºè™šæ‹ŸçŽ¯å¢ƒï¼ˆä½¿ç”¨ç‰¹å®šçš„Pythonç‰ˆæœ¬åˆ›å»ºè™šæ‹ŸçŽ¯å¢ƒï¼‰pyenv virtualenv 3.7.10 env-name#åˆ—å‡ºåˆ›å»ºçš„æ‰€æœ‰è™šæ‹ŸçŽ¯å¢ƒpyenv virtualenvs# æ¿€æ´»è™šæ‹ŸçŽ¯å¢ƒpyenv activate env-name#é€€å‡ºè™šæ‹ŸçŽ¯å¢ƒï¼Œå›žåˆ°ç³»ç»ŸçŽ¯å¢ƒpyenv deactivate#åˆ é™¤è™šæ‹ŸçŽ¯å¢ƒpyenv uninstall env-name # æˆ–è€…åˆ é™¤å…¶çœŸå®žç›®å½• rm -rf ~/.pyenv/versions/env-nameè¯´æ˜Žï¼špyenv-virtualenv æ’ä»¶ç›¸æ¯”äºŽ Python é»˜è®¤çš„ Virtualenvï¼Œå…¶èƒ½å¤Ÿé›†ä¸­ç®¡ç†è™šæ‹ŸçŽ¯å¢ƒï¼Œä¾‹å¦‚å¯ä»¥åˆ—å‡ºåˆ›å»ºçš„æ‰€æœ‰è™šæ‹ŸçŽ¯å¢ƒï¼Œä½† Virtualenv ä¸å¯ä»¥ã€‚pyenv-virtualenv æ’ä»¶ä½¿ç”¨å‚è€ƒï¼šhttps://github.com/pyenv/pyenv-virtualenvhttps://einverne.github.io/post/2017/04/pyenv.htmlhttps://zhuanlan.zhihu.com/p/36402791Â¶7ï¼‰å¸è½½1234#åˆ é™¤æ‰€æœ‰å·²ç¼–è¯‘çš„ Python ç‰ˆæœ¬æºç å’Œç›¸å…³æ—¥å¿—ï¼ˆæç¤ºï¼šPython ç‰ˆæœ¬ç¼–è¯‘æˆåŠŸæ—¶ä¼šè‡ªåŠ¨åˆ é™¤æºç ï¼Œä½†ä¼šä¿ç•™æ—¥å¿—ï¼Œç¼–è¯‘å¤±è´¥åˆ™ä¸ä¼šåˆ é™¤æºç ï¼‰rm -rf /tmp/python-build* -rf#åˆ é™¤ pyenvï¼ˆåŒ…æ‹¬å·²å®‰è£…çš„ Python ç‰ˆæœ¬ï¼‰rm -rf ~/.pyenvç„¶åŽåˆ é™¤~/.bashrcä¸­çš„çŽ¯å¢ƒå˜é‡é…ç½®å³å¯Â¶8ï¼‰å‚è€ƒhttps://juejin.cn/post/7167731442418941983Â¶2ã€windowsÂ¶1ï¼‰æ‰‹åŠ¨å®‰è£…Â¶ï¼ˆ1ï¼‰å®‰è£…pyenvå¦‚æžœæ²¡æœ‰å®‰è£…è¿‡åˆ™å¯ä»¥ä¸‹è½½æºç åŽ‹ç¼©åŒ…è§£åŽ‹åˆ°è‡ªå®šä¹‰å®‰è£…ç›®å½•ï¼Œå¦‚ï¼šE:/Cache/pyenv/.pyenvä¸‹è½½åœ°å€ï¼šhttps://github.com/pyenv-win/pyenv-win/archive/refs/tags/v3.1.1.zipè¯´æ˜Žï¼šå¦‚æžœæœ¬åœ°å·²ç»æœ‰pythonçŽ¯å¢ƒä¹Ÿå¯ä»¥ç›´æŽ¥ä½¿ç”¨pipæ¥å®‰è£…ï¼Œå®‰è£…å®ŒæˆåŽå†æŠŠåŽŸæ¥pythonå’Œå…¶çŽ¯å¢ƒå˜é‡ï¼ˆå¦‚æžœæœ‰é…ç½®çš„è¯ï¼‰åˆ é™¤æŽ‰å³å¯ã€‚1&gt;pip install pyenv-win --target E:/Cache/pyenv/.pyenvÂ¶ï¼ˆ2ï¼‰é…ç½®çŽ¯å¢ƒå˜é‡å…ˆåŠ çŽ¯å¢ƒå˜é‡ PYENV ï¼šE:\Cache\pyenv\.pyenv\pyenv-winç„¶åŽå†åœ¨ Path ä¸­åŠ å…¥ï¼š%PYENV%\bin%PYENV%\shimsÂ¶2ï¼‰è‡ªåŠ¨å®‰è£…æ‰“å¼€ PowerShell å¹¶æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ï¼š12345678#å…è®¸ PowerShell æ‰§è¡Œè„šæœ¬ï¼ˆéœ€è¦ç®¡ç†å‘˜èº«ä»½è¿è¡Œ PowerShellï¼‰Set-ExecutionPolicy -ExecutionPolicy RemoteSigned -Scope LocalMachine#å®‰è£…Invoke-WebRequest -UseBasicParsing -Uri "https://raw.githubusercontent.com/pyenv-win/pyenv-win/master/pyenv-win/install-pyenv-win.ps1" -OutFile "./install-pyenv-win.ps1"; &amp;"./install-pyenv-win.ps1"#å¸è½½Invoke-WebRequest -UseBasicParsing -Uri "https://raw.githubusercontent.com/pyenv-win/pyenv-win/master/pyenv-win/install-pyenv-win.ps1" -OutFile "./install-pyenv-win.ps1"; &amp;"./install-pyenv-win.ps1" -UNINSTALLè¯´æ˜Žï¼šè‡ªåŠ¨å®‰è£…é»˜è®¤å®‰è£…ç›®å½•ä¸ºï¼šC:\Users\%username%\.pyenvã€‚å¦‚éœ€è‡ªå®šä¹‰å®‰è£…ç›®å½•ï¼Œéœ€åœ¨æ‰§è¡Œè„šæœ¬å‰ï¼Œä¿®æ”¹ install-pyenv-win.ps1 é‡Œçš„ $PyEnvDi å˜é‡å€¼ï¼ˆé»˜è®¤ä¸ºï¼š&quot;${env:USERPROFILE}\.pyenv&quot;ï¼‰ï¼Œå¯æ”¹ä¸ºå¦‚ï¼šE:\Cache\pyenv\.pyenvå®‰è£…è¿‡ç¨‹ä¼šè‡ªåŠ¨æ·»åŠ æ‰€éœ€çš„ç³»ç»ŸçŽ¯å¢ƒå˜é‡ã€‚Â¶3ï¼‰ä¼˜åŒ–ä¸‹è½½é•œåƒæ–¹å¼1ï¼šæ·»åŠ ç³»ç»ŸçŽ¯å¢ƒå˜é‡ï¼šPYTHON_BUILD_MIRROR_URLï¼Œå¯é€‰å€¼å¦‚ä¸‹ï¼šhttps://www.python.org/ftp/python/ ï¼ˆé»˜è®¤å€¼ï¼‰https://mirrors.huaweicloud.com/python/ ï¼ˆæŽ¨èï¼‰http://mirrors.sohu.com/python/http://npm.taobao.org/mirrors/python/æ–¹å¼2ï¼šåœ¨ pyenv-win/libexec/libs/pyenv-install-lib.vbs ä¸­æ‰¾åˆ°If mirror = &quot;&quot; Then mirror = &quot;https://www.python.org/ftp/python&quot;ï¼Œç„¶åŽå°†åœ°å€æ”¹æˆå¦‚ä¸‹ï¼šhttps://www.python.org/ftp/python/ ï¼ˆé»˜è®¤å€¼ï¼‰https://mirrors.huaweicloud.com/python/ ï¼ˆæŽ¨èï¼‰http://mirrors.sohu.com/python/https://npm.taobao.org/mirrors/python/ ï¼ˆç›®å‰å‘çŽ°åœ¨ pyenv ä¸­ä¸å¯ç”¨ï¼Œä¸æ¸…æ¥šåŽŸå› ï¼‰å‚è€ƒï¼šhttps://github.com/pyenv-win/pyenv-win/issues/398Â¶4ï¼‰æµ‹è¯•123456pyenv --version #PowerShellæ‰§è¡Œpyenvå¤±è´¥å¯ä»¥é€šè¿‡ç®¡ç†å‘˜æ–¹å¼PowerShellæ‰§è¡Œå‘½ä»¤è§£å†³ï¼šSet-ExecutionPolicy -ExecutionPolicy RemoteSigned -Scope LocalMachinepyenv install 3.7.10pyenv install 2.7.16pyenv install 3.10.10pyenv global 3.7.10python3 --version #è¿™ä¸€æ­¥å¯èƒ½ä¼šå¯åŠ¨Microsoft Storeã€‚è¿™æ˜¯ç”±äºŽçŽ¯å¢ƒå˜é‡äº§ç”Ÿäº†é—®é¢˜ã€‚ä¸¤ç§æ–¹æ³•è§£å†³ï¼š1ã€èœå•æœç´¢ã€ç®¡ç†åº”ç”¨æ‰§è¡Œåˆ«åã€‘å…³é—­ä¸¤ä¸ªæŒ‰é’®ã€åº”ç”¨å®‰è£…ç¨‹åºã€‘ï¼›2ã€å¯ä»¥åŒæ—¶å°†ç³»ç»Ÿå’Œç”¨æˆ·çš„çŽ¯å¢ƒå˜é‡ä¸­çš„%USERPROFILE%\AppData\Local\Microsoft\WindowsAppsåˆ é™¤æŽ‰ðŸ’â€â™‚çŽ¯å¢ƒå˜é‡é…ç½®å¥½åŽéœ€è¦é‡æ–°æ‰“å¼€ç»ˆç«¯ã€‚Â¶5ï¼‰å¸¸ç”¨å‘½ä»¤123456789101112pyenv commands æŸ¥çœ‹pyenvå‘½ä»¤pyenv install --list #æŸ¥çœ‹å¯å®‰è£…çš„pythonç‰ˆæœ¬pyenv versions #æŸ¥çœ‹å·²å®‰è£…ç‰ˆæœ¬pyenv version #æŸ¥çœ‹å½“å‰ä½¿ç”¨çš„pythonç‰ˆæœ¬pyenv update #æ›´æ–°æœ¬åœ°pythonç‰ˆæœ¬é…ç½®ï¼ˆæ›´æ–°.versions_cache.xmlæ–‡ä»¶ï¼Œè¯¥æ–‡ä»¶è®°å½•ç‰ˆæœ¬å’Œå…¶å¯¹åº”ä¸‹è½½åœ°å€ï¼‰pyenv install -v ç‰ˆæœ¬å· #æŒ‡å®šç‰ˆæœ¬å®‰è£…pythonï¼Œ-v å¯çœç•¥pyenv rehash #åˆ·æ–°pythonå·²å®‰è£…åˆ—è¡¨pyenv uninstall ç‰ˆæœ¬å· #åˆ é™¤pythonpyenv virtualenv å·²æœ‰ç‰ˆæœ¬çŽ¯å¢ƒåå æ–°ç‰ˆæœ¬çŽ¯å¢ƒå #æŒ‰å·²æœ‰ç‰ˆåˆ›å»ºæ–°çš„pythonçŽ¯å¢ƒï¼ˆè°ƒç”¨virtualenv,python3 è‡ªå¸¦äº†virtualenv,py2è¦è‡ªè¡Œè£…ï¼‰pyenv global ç‰ˆæœ¬å· #è®¾ç½®å½“å‰å…¨å±€pythonç‰ˆæœ¬pyenv local ç‰ˆæœ¬å· #è®¾ç½®å½“å‰ç›®å½•å±€éƒ¨pythonç‰ˆæœ¬ï¼Œä»¥åŽè¿›å…¥ç›®å½•å°±ä¼šè‡ªåŠ¨åˆ‡æ¢åˆ°è¿™ä¸ªç‰ˆæœ¬pyenv local --unset #å–æ¶ˆå±€éƒ¨pythonç‰ˆæœ¬è®¾ç½®,æˆ–è€…åˆ é™¤å½“å‰ç›®å½•ä¸‹çš„.python-versionæ–‡ä»¶Â¶6ï¼‰å®‰è£…vitualenv1234567891011121314# å®‰è£…python -m pip install --user virtualenv# åœ¨powershellä¸­ï¼Œè¿™æ ·å®‰è£…è™šæ‹ŸçŽ¯å¢ƒä¼šå‡ºé”™# virtualenv venv# æ­£ç¡®çš„å®‰è£…è™šæ‹ŸçŽ¯å¢ƒæ–¹å¼python -m virtualenv venv#æˆ–è€…æ‰§è¡Œ pyenv exec virtualenv venv #è¿™ç§éœ€è¦å…¨å±€å®‰è£…çš„æ–¹å¼python -m pip install virtualenv# æ¿€æ´»è™šæ‹ŸçŽ¯å¢ƒ.\venv\Scripts\activate# æŸ¥çœ‹å½“å‰è™šæ‹ŸçŽ¯å¢ƒå·²å®‰è£…çš„packagepip list# é€€å‡ºè™šæ‹ŸçŽ¯å¢ƒdeactivateÂ¶7ï¼‰å¸è½½åˆ é™¤æŽ‰E:/Cache/pyenv/.pyenvç›®å½•ï¼Œåˆ é™¤å¯¹åº”çŽ¯å¢ƒå˜é‡å³å¯ã€‚å‚è€ƒï¼šhttps://blog.csdn.net/weixin_45027467/article/details/123137457https://www.bilibili.com/read/cv12982089https://blog.csdn.net/weixin_43982238/article/details/108289616Â¶äºŒã€anacondaÂ¶1ã€centos7Â¶1ï¼‰å®‰è£…1234#ä¸‹è½½å®‰è£…è„šæœ¬wget https://mirrors.tuna.tsinghua.edu.cn/anaconda/archive/Anaconda3-2021.11-Linux-x86_64.sh#å®‰è£…ï¼ˆä¸æ–­å›žè½¦æˆ–yeså³å¯ï¼‰sh Anaconda3-2021.11-Linux-x86_64.shÂ¶2ï¼‰é…ç½®123456789101112131415161718192021222324252627#æ·»åŠ çŽ¯å¢ƒå˜é‡ã€‚catåŽçš„&gt;&gt;è¡¨ç¤ºè¿½åŠ ï¼Œ&gt;åˆ™è¡¨ç¤ºè¦†ç›–ã€‚&lt;&lt; åŽçš„EOFç”¨å¼•å·å¯ä»¥é¿å…$èµ‹å€¼ï¼Œå¦‚æžœå¸Œæœ›èµ‹å€¼åˆ™ä¸åŠ å¼•å·cat &gt;&gt; ~/.bashrc &lt;&lt; 'EOF'# &gt;&gt;&gt; conda initialize &gt;&gt;&gt;# !! Contents within this block are managed by 'conda init' !!__conda_setup="$('/root/anaconda3/bin/conda' 'shell.bash' 'hook' 2&gt; /dev/null)"if [ $? -eq 0 ]; then eval "$__conda_setup"else if [ -f "/root/anaconda3/etc/profile.d/conda.sh" ]; then . "/root/anaconda3/etc/profile.d/conda.sh" else export PATH="/root/anaconda3/bin:$PATH" fifiunset __conda_setup# &lt;&lt;&lt; conda initialize &lt;&lt;&lt;EOF#ä½¿çŽ¯å¢ƒå˜é‡ç”Ÿæ•ˆsource ~/.bashrc#æµ‹è¯•å®‰è£…é…ç½®æ˜¯å¦æˆåŠŸconda -v#å®‰è£…å¥½anacondaåŽï¼Œé»˜è®¤ç³»ç»Ÿå…¨å±€å°±ä¼šè‡ªåŠ¨é»˜è®¤ä½¿ç”¨anacondaè‡ªå¸¦çš„pythonç‰ˆæœ¬ï¼Œå¦‚æžœå¸Œæœ›ä¿æŒåŽŸæ¥ç³»ç»Ÿç‰ˆæœ¬å¯å¦‚ä¸‹è®¾ç½®conda config --set auto_activate_base falseÂ¶3ï¼‰ä½¿ç”¨12345678910#åˆ›å»ºä¸€ä¸ªé¡¹ç›®çš„è™šæ‹ŸçŽ¯å¢ƒï¼Œå¹¶æŒ‡å®šè™šæ‹ŸçŽ¯å¢ƒåç§°ä¸ºpy38ï¼Œä½¿ç”¨python3.8ç‰ˆæœ¬conda create -n py38 python=3.8#æŸ¥çœ‹å½“å‰åˆ›å»ºçš„æ‰€æœ‰è™šæ‹ŸçŽ¯å¢ƒconda env list#æ¿€æ´»å½“å‰çŽ¯å¢ƒä¸ºpy38ï¼Œå¦‚æ­¤åœ¨å½“å‰ç™»å½•ä¼šè¯è¿‡ç¨‹å…¨å±€å°±ä¼šä½¿ç”¨ç”¨python3.8ç‰ˆæœ¬conda activate py38# é€€å‡ºå½“å‰è™šæ‹ŸçŽ¯å¢ƒconda deactivate#åˆ é™¤ä¸€ä¸ªé¡¹ç›®çš„è™šæ‹ŸçŽ¯å¢ƒconda remove -n py38 *--all*Â¶2ã€windowsÂ¶1ï¼‰å®‰è£…ä¸‹è½½å®‰è£…åŒ…ï¼šhttps://www.anaconda.com/download/#windowså®‰è£…è¿‡ç¨‹ä¸€ç›´ä¸‹ä¸€æ­¥å³å¯ã€‚Â¶2ï¼‰é…ç½®Pathä¸­åŠ å…¥å¦‚ä¸‹çŽ¯å¢ƒå˜é‡ï¼ˆå‡è®¾anacondaå®‰è£…åˆ°D:\Development\Anaconda3ï¼‰ï¼š12345D:\Development\Anaconda3D:\Development\Anaconda3\condabinD:\Development\Anaconda3\ScriptsD:\Development\Anaconda3\Library\binD:\Development\Anaconda3\Library\mingw-w64ðŸ’â€â™‚å®˜æ–¹å»ºè®®ä½¿ç”¨Anaconda Prompt ç»ˆç«¯æ‰§è¡Œcondaæˆ–è€…pythonç­‰å‘½ä»¤ã€‚Â¶3ï¼‰ä½¿ç”¨å®‰è£…åŽä¼šæœ‰Anaconda Prompt (Anaconda3)ç»ˆç«¯ï¼Œæ‰“å¼€æ‰§è¡Œcondaæˆ–è€…pythonç­‰å‘½ä»¤å³å¯ã€‚Â¶å‚è€ƒhttps://zhuanlan.zhihu.com/p/32925500]]></content>
      <categories>
        <category>tools</category>
      </categories>
      <tags>
        <tag>python</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[é€šè¿‡ acme.sh è„šæœ¬ç”³è¯·å…è´¹çš„ SSL è¯ä¹¦]]></title>
    <url>%2Ftools%2Facme.sh.html</url>
    <content type="text"><![CDATA[Â¶ä¸€ã€ç®€è¦æ¦‚è¿°acme.sh æ˜¯ä¸€ä¸ªå…è´¹ã€å¼€æºã€è‡ªåŠ¨åŒ–çš„ ACME å®¢æˆ·ç«¯å·¥å…·ï¼Œå¯ç”¨äºŽç”³è¯·å…è´¹çš„ SSL è¯ä¹¦ã€‚å®ƒå¯ä»¥å¸®åŠ©ç½‘ç«™ç®¡ç†å‘˜è½»æ¾åœ°å®žçŽ° HTTPS ç­‰åŠŸèƒ½ï¼Œæé«˜ç½‘ç«™çš„å®‰å…¨æ€§å’Œå¯é æ€§ã€‚é¡¹ç›®å¼€æºåœ°å€ï¼šhttps://github.com/acmesh-official/acme.shä¸­æ–‡è¯´æ˜Žæ–‡æ¡£ï¼šhttps://github.com/acmesh-official/acme.sh/wiki/è¯´æ˜Žå®˜æ–¹å®Œæ•´æ–‡æ¡£ï¼šhttps://github.com/acmesh-official/acme.sh/wikiACME åè®®çš„è¯´æ˜Žï¼šè¯¥åè®®å®šä¹‰äº†å®¢æˆ·ç«¯ï¼ˆé€šå¸¸æ˜¯è¯ä¹¦ç”³è¯·è€…æˆ–æœåŠ¡å™¨ç®¡ç†å‘˜ï¼‰å’Œè¯ä¹¦é¢å‘æœºæž„ä¹‹é—´çš„äº¤äº’è¿‡ç¨‹ã€‚ACME å®¢æˆ·ç«¯ä½¿ç”¨ ACME åè®®ä¸Žè¯ä¹¦é¢å‘æœºæž„çš„ ACME æœåŠ¡ç«¯è¿›è¡Œé€šä¿¡ï¼Œå®žçŽ°è‡ªåŠ¨ç”³è¯·è¯ä¹¦ã€è¯æ˜ŽåŸŸåæ‰€æœ‰æƒã€èŽ·å–è¯ä¹¦ã€ä»¥åŠåœ¨è¯ä¹¦åˆ°æœŸå‰ç»­è®¢è¯ä¹¦ç­‰åŠŸèƒ½ã€‚æç¤ºï¼šacme.sh å’Œ Certbot éƒ½æ˜¯ ACME å®¢æˆ·ç«¯å·¥å…·ï¼Œè™½ç„¶å®ƒä»¬å’Œ ACME æœåŠ¡ç«¯çš„äº¤äº’é€»è¾‘éƒ½æ˜¯ç›¸ä¼¼çš„ï¼Œä½†å®ƒä»¬ç”±ä¸åŒå›¢é˜Ÿç»´æŠ¤ï¼Œæ‰€ä»¥ä½¿ç”¨ä¸Šä¼šæœ‰å¾ˆå¤šä¸åŒçš„åœ°æ–¹ï¼ˆä¾‹å¦‚ï¼šä¸åŒçš„å‘½ä»¤å‚æ•°ã€ä¸åŒçš„è¯ä¹¦ç”Ÿæˆè·¯å¾„ã€ä¸åŒçš„æ’ä»¶æ”¯æŒç­‰ï¼‰ã€‚ç›¸æ¯” Certbot è€Œè¨€ï¼Œacme.sh å…·æœ‰å¦‚ä¸‹ä¼˜åŠ¿ï¼šacme.sh æ›´åŠ è½»é‡å’Œæ˜“äºŽå®‰è£…ï¼ˆacme.sh æ˜¯ Shell è„šæœ¬ç¨‹åºï¼Œé»˜è®¤å°±èƒ½åœ¨å„ç§ Linux ç³»ç»Ÿä¸Šè¿è¡Œï¼Œä¸”æ²¡æœ‰å…¶ä»–ä¾èµ–å…³ç³»ï¼Œè€Œ Certbot æ˜¯ Python è„šæœ¬ç¨‹åºï¼Œä¾èµ– Python çŽ¯å¢ƒï¼‰ï¼›acme.sh æ”¯æŒæ›´å¤šçš„ CAï¼ˆCertbot é»˜è®¤åªæ”¯æŒ Letâ€™s Encryptï¼Œä½† acme.sh å¯åŒæ—¶æ”¯æŒ Letâ€™s Encryptã€ZeroSSLã€Buypassã€Googleã€SSL.com ç­‰ CA æœºæž„ï¼Œå‚è€ƒï¼šhttps://github.com/acmesh-official/acme.sh/wiki/CAï¼‰acme.sh å®˜æ–¹æ–‡æ¡£å¯¹äºŽä¸­æ–‡æ”¯æŒæ›´å‹å¥½ï¼›acme.sh å¯¹äºŽ DNS API çš„æ”¯æŒæ›´å®Œå–„ï¼ˆå¦‚ï¼šé˜¿é‡Œäº‘ã€è…¾è®¯äº‘ã€åŽä¸ºäº‘ç­‰ï¼Œå…·ä½“ DNS API æ”¯æŒå‚è€ƒï¼šhttps://github.com/acmesh-official/acme.sh/wiki/dnsapiï¼‰ï¼Œè€Œ Certbot é»˜è®¤å¯¹é˜¿é‡Œäº‘ã€è…¾è®¯äº‘ã€åŽä¸ºäº‘ç­‰ä¸æ”¯æŒã€‚Â¶äºŒã€å®‰è£…1234567891011#acme.shä¾èµ–ä¸€äº›å·¥å…·åŒ…ï¼ˆå¦‚æžœç³»ç»Ÿæ²¡æœ‰åˆ™éœ€è¦å®‰è£…ç›¸å…³ä¾èµ–åŒ…ï¼‰ #socatå·¥å…·åŒ…ï¼šacme.shç”¨å…¶å®žçŽ°è‡ªåŠ¨å¯åŠ¨ä¸´æ—¶çš„WebæœåŠ¡è¿›è¡ŒHTTPéªŒè¯ï¼ˆä»… --standaloneï¼‰ #cronå·¥å…·åŒ…ï¼šacme.shç”¨å…¶å®žçŽ°è‡ªåŠ¨åŒ–ç»­æœŸè¯ä¹¦ï¼ˆå¯é€šè¿‡å‘½ä»¤ï¼šcrontab -l æ£€æŸ¥æ˜¯å¦å®‰è£…æœ‰cronæœåŠ¡ï¼‰apt install -y socat cron#yum install -y socat cronie#å®‰è£…acme.sh #æ™®é€šç”¨æˆ·å’Œ root ç”¨æˆ·éƒ½å¯ä»¥å®‰è£…ä½¿ç”¨ï¼Œé»˜è®¤å®‰è£…åˆ°~/.acme.sh/ç›®å½•é‡Œ #ä¸ºäº†æ–¹ä¾¿ä½¿ç”¨ï¼Œå®‰è£…åŽï¼Œå®‰è£…è„šæœ¬ä¼šè‡ªå®šåœ¨~/.bashrcé‡Œé€šè¿‡aliasè®¾ç½®çŽ¯å¢ƒå˜é‡ï¼Œåªéœ€è¦æ‰§è¡Œsource ~/.bashrcå‘½ä»¤æˆ–è€…é‡æ–°æ‰“å¼€ç»ˆç«¯å³å¯ä½¿ç”¨curl https://get.acme.sh | shsource ~/.bashrcÂ¶ä¸‰ã€å¸è½½12acme.sh --uninstall #è‡ªåŠ¨åˆ é™¤aliasçŽ¯å¢ƒå˜é‡ç­‰rm -rf ~/.acme.shÂ¶å››ã€æ›´æ–°1234567#æ‰‹åŠ¨æ›´æ–°acme.sh --upgrade#å¼€å¯è‡ªåŠ¨å‡çº§ï¼ˆå¦‚éœ€ï¼‰acme.sh --upgrade --auto-upgrade#å…³é—­è‡ªåŠ¨æ›´æ–°acme.sh --upgrade --auto-upgrade 0Â¶äº”ã€ä½¿ç”¨123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172##ä¿®æ”¹é»˜è®¤CAï¼ˆå¯é€‰ï¼‰ #acme.shä¹‹å‰ä½¿ç”¨Letâ€™s Encryptä½œä¸ºé»˜è®¤CAï¼Œä½†v3.0ç‰ˆæœ¬åŽä½¿ç”¨ZeroSSLä½œä¸ºé»˜è®¤CA #CAå¯é€‰é…ç½®å€¼ï¼šletsencryptã€zerosslã€buypassã€googleã€ssl.comï¼ˆç®€å•æ¥è¯´ï¼Œå¦‚æžœæ²¡æœ‰ç‰¹æ®Šéœ€æ±‚ï¼Œå…è´¹ä½¿ç”¨å»ºè®®é€‰æ‹©letsencryptå’Œzerosslï¼Œå¦‚æžœæ„¿æ„ä»˜è´¹åˆ™å¯é€‰æ‹©buypassã€ssl.comï¼‰ #å¦‚æžœé»˜è®¤CAæ— æ³•é¢å‘ï¼Œå¯é€‰ä¿®æ”¹ CAacme.sh --set-default-ca --server &lt;CA&gt;#ç¤ºä¾‹ï¼šacme.sh --set-default-ca --server letsencrypt##æ³¨å†Œè´¦å·ï¼ˆéœ€æ”¹æˆè‡ªå·±çš„é‚®ç®±ï¼‰ #--email EMAILï¼ˆç®€å†™ï¼š-m EMAILï¼‰ï¼šè´¦å·é‚®ç®±åœ°å€ã€‚å¯ç”¨äºŽè‡ªåŠ¨æ³¨å†Œ ACME è´¦å·ï¼Œè¿˜å¯ç”¨äºŽè¯ä¹¦åˆ°æœŸå‰ 20 å¤©ã€10 å¤©å’Œ 1 å¤©æ—¶æŽ¥æ”¶åˆ°åˆ°æœŸé€šçŸ¥é‚®ä»¶ï¼ˆå¯¹äºŽletsencryptï¼‰ã€‚å¦‚ï¼š--email user@example.comacme.sh --register-account -m user@example.com##æ–¹å¼1ï¼šè‡ªåŠ¨HTTPéªŒè¯æ–¹å¼ç”³è¯·è¯ä¹¦ #ä½¿ç”¨æ¡ä»¶ï¼šï¼ˆ1ï¼‰éœ€è¦å…¬ç½‘ IPï¼›ï¼ˆ2ï¼‰å¼€å¯ HTTP éªŒè¯ç«¯å£ï¼ˆé»˜è®¤ 80ï¼Œå¯é€šè¿‡ --httpport é€‰é¡¹è‡ªå®šä¹‰ç›‘å¬ç«¯å£ï¼Œä½†ä»ç„¶ä¼šé€šè¿‡ 80 ç«¯å£è¿›è¡ŒéªŒè¯ï¼Œå½“ä½¿ç”¨ --httpport æ—¶ï¼Œéœ€è¦åå‘ä»£ç† 80 ç«¯å£åˆ°è‡ªå®šä¹‰ç«¯å£ï¼Œå‚è€ƒï¼šhttps://github.com/acmesh-official/acme.sh/issues/1230#issuecomment-362177631ï¼‰ #éœ€è¦æœ¬åœ°è¿è¡Œä¸€ä¸ªç›‘å¬80ç«¯å£çš„webæœåŠ¡ç”¨æ¥ç»™acmeæœåŠ¡å™¨éªŒè¯åŸŸåæ‰€æœ‰æƒï¼ˆå¦‚æžœæ²¡æœ‰å¯åŠ¨webæœåŠ¡ç›‘å¬è¯¥ç«¯å£ï¼Œåˆ™acme.shä¼šè‡ªåŠ¨ä¸´æ—¶å¯åŠ¨ä¸€ä¸ªç›‘å¬80ç«¯å£çš„webæœåŠ¡ï¼Œç”¨æ¥å®ŒæˆéªŒè¯ï¼‰ #ACME å®¢æˆ·ç«¯ä¼šåœ¨WebæœåŠ¡å™¨çš„æ ¹ç›®å½•ï¼ˆä»¥ä¸‹-wæŒ‡å®šçš„ç›®å½•è·¯å¾„ï¼‰ä¸‹è‡ªåŠ¨åˆ›å»ºä¸€ä¸ªç‰¹å®šçš„ä¸´æ—¶æ–‡ä»¶ï¼ˆå³ï¼š.well-known/acme-challenge/&lt;random_token&gt;ï¼‰ï¼Œç„¶åŽCAçš„ACMEæœåŠ¡ç«¯ä¼šé€šè¿‡HTTPåè®®è¯·æ±‚è®¿é—®æ­¤æ–‡ä»¶ï¼ˆå…¶ä¸­è®¿é—®çš„urlåœ°å€ä¸ºï¼šhttp://example.com/.well-known/acme-challenge/&lt;random_token&gt;ï¼‰ï¼Œè®¿é—®åˆ°è¯¥æ–‡ä»¶åˆ™è¯´æ˜Žç”¨æˆ·å¯¹åŸŸåå…·æœ‰æŽ§åˆ¶æƒï¼Œé€šè¿‡ç”¨æˆ·çš„æŽ§åˆ¶æƒæƒ…å†µé—´æŽ¥ç¡®å®šç”¨æˆ·æ˜¯å¦æ˜¯åŸŸåçš„æ‹¥æœ‰è€…ï¼ˆå³æ‰€æœ‰æƒï¼‰ã€‚ #-dï¼ˆ--domainï¼‰ï¼šæŒ‡å®šåŸŸåï¼Œå¦‚ï¼š-d example.comï¼Œæ”¯æŒæŒ‡å®šå¤šä¸ªåŸŸåï¼Œå¦‚ï¼š-d example.com -d www.example.com #-wï¼ˆ--webrootï¼‰ï¼šæŒ‡å®šWebæœåŠ¡çš„æ ¹ç›®å½•è·¯å¾„ï¼ˆéœ€è¦æ ¹æ®WebæœåŠ¡çš„ç›¸å…³é…ç½®æ¥è®¾ç½®ï¼Œå¦‚ï¼š-w /opt/nginx/htmlï¼‰ #--apache æˆ– --nginxï¼šå¦‚æžœæœ¬åœ°è¿è¡Œæœ‰apacheæˆ–nginxç­‰å·²è¿è¡Œ80ç«¯å£çš„æœåŠ¡å™¨ï¼Œå¯åŠ å‚æ•°ï¼š--apache æˆ– --nginxï¼Œä»¥ä»Žå…¶ç›¸å…³é…ç½®æ–‡ä»¶ä¸­è‡ªåŠ¨èŽ·å–80ç«¯å£çš„ç½‘ç«™æ ¹ç›®å½•ï¼Œè€Œä¸éœ€è¦æŒ‡å®šç½‘ç«™æ ¹ç›®å½•ã€‚æç¤ºï¼šæŒ‡å®š--apache æˆ– --nginxè¦æ±‚nginxæˆ–apacheæ˜¯é€šè¿‡æ ‡å‡†åŒ–å®‰è£…çš„ï¼ˆå³è½¯ä»¶åŒ…çš„å®‰è£…è·¯å¾„å’Œé…ç½®æ–‡ä»¶è·¯å¾„è¦å’Œåœ¨çº¿åŒ…ç®¡ç†å™¨å®‰è£…æ–¹å¼çš„è·¯å¾„ç›¸åŒï¼‰ #--standaloneï¼šå¦‚æžœæœ¬åœ°æ²¡æœ‰è¿è¡Œä»»ä½•WebæœåŠ¡, 80ç«¯å£æ˜¯ç©ºé—²çš„, é‚£ä¹ˆå¯ä»¥æŒ‡å®š--standaloneä»¥ä¸´æ—¶è¿è¡Œä¸€ä¸ªwebserver, ä¸´æ—¶å¬åœ¨80ç«¯å£, å®ŒæˆéªŒè¯: #-kï¼ˆ--keylengthï¼‰ï¼šæŒ‡å®šç”³è¯·çš„è¯ä¹¦ç±»åž‹ï¼ˆECCè¯ä¹¦æˆ–è€…RSAè¯ä¹¦ï¼‰ï¼Œå¯é€‰å€¼ï¼šECCè¯ä¹¦ï¼šec-256ï¼ˆé»˜è®¤ï¼‰ã€ec-384ã€ec-521ï¼›RSAè¯ä¹¦ï¼š2048ã€3072ã€4096ã€‚ç¤ºä¾‹ï¼šç”³è¯·ECCè¯ä¹¦ï¼š--keylength ec-256ï¼Œç”³è¯·RSAè¯ä¹¦ï¼š--keylength 2048ï¼ˆæç¤ºï¼šECCè¯ä¹¦é€šå¸¸æ¯”RSAè¯ä¹¦æ›´æŽ¨èï¼Œå› ä¸ºå®ƒæä¾›äº†æ›´é«˜çš„å®‰å…¨æ€§å’Œæ›´å°çš„å¯†é’¥é•¿åº¦ï¼‰#ç”³è¯·è¯ä¹¦å‰éœ€è¦å¼€æ”¾é˜²ç«å¢™çš„ tcp 80 ç«¯å£ï¼Œå¦‚ä¸‹ï¼š#ï¼ˆ1ï¼‰å¯¹äºŽ UFW é˜²ç«å¢™ufw allow 80/tcp#ï¼ˆ2ï¼‰å¯¹äºŽ FirewallD é˜²ç«å¢™ï¼šfirewall-cmd --zone=public --add-port=80/tcp --permanentfirewall-cmd --reload#ä½¿ç”¨ç¤ºä¾‹ï¼š#é€šè¿‡ --standalone è‡ªåŠ¨å¼€å¯ä¸€ä¸ª 80 ç«¯å£ç”¨äºŽ HTTP éªŒè¯å¹¶è‡ªåŠ¨ç”Ÿæˆè¯ä¹¦ï¼ˆè¦æ±‚ 80 ç«¯å£ä¸èƒ½è¢«å ç”¨ï¼‰acme.sh --issue \-d example.com \-d www.example.com \--standalone#ä½¿ç”¨ç³»ç»Ÿä¸­çš„ä»»æ„ HTTP æœåŠ¡è‡ªåŠ¨ç”Ÿæˆè¯ä¹¦ï¼ˆé€šè¿‡ -w æŒ‡å®šè®¿é—® HTTP æœåŠ¡ 80 ç«¯å£æ—¶çš„ Web æ ¹ç›®å½•è·¯å¾„ï¼‰acme.sh --issue \-d example.com \-d www.example.com \-w /opt/nginx/html#é€šè¿‡ --nginx æŒ‡å®šæ ¹æ®ç³»ç»Ÿä¸­çš„ nginx é…ç½®è‡ªåŠ¨ç”Ÿæˆè¯ä¹¦ #æç¤ºï¼šæŒ‡å®š--nginxè¦æ±‚nginxæ˜¯é€šè¿‡æ ‡å‡†åŒ–å®‰è£…çš„ï¼ˆå³è½¯ä»¶åŒ…çš„å®‰è£…è·¯å¾„å’Œé…ç½®æ–‡ä»¶è·¯å¾„è¦å’Œåœ¨çº¿åŒ…ç®¡ç†å™¨å®‰è£…æ–¹å¼çš„è·¯å¾„ç›¸åŒï¼‰acme.sh --issue \-d example.com \-d www.example.com \--nginx##æ–¹å¼2ï¼šæ‰‹åŠ¨DNSéªŒè¯æ–¹å¼ç”³è¯·è¯ä¹¦ #ä½¿ç”¨æ¡ä»¶ï¼šéœ€è¦æ‰‹åŠ¨åœ¨åŸŸåæ‰˜ç®¡æœåŠ¡å•†çš„é¢æ¿ä¸Šè§£æžç»™å®šçš„txtè®°å½•ç”¨æ¥éªŒè¯åŸŸåæ‰€æœ‰æƒ #ä¼˜åŠ¿ï¼šä¸éœ€è¦å…¬ç½‘ IPï¼Œä¸éœ€è¦å¼€æ”¾ HTTP éªŒè¯ç«¯å£acme.sh --issue \--dns \-d example.com \-d www.example.com \--yes-I-know-dns-manual-mode-enough-go-ahead-please#æ‰§è¡Œä»¥ä¸Šå‘½ä»¤åŽacme.shä¼šç”Ÿæˆç›¸åº”çš„txtè®°å½•æ˜¾ç¤ºå‡ºæ¥, åªéœ€è¦æ‰‹åŠ¨åœ¨åŸŸåæ‰˜ç®¡å•†çš„ç®¡ç†é¢æ¿ä¸­æ·»åŠ è¿™æ¡txtè®°å½•å³å¯ # è§£æžç¤ºä¾‹å¦‚ä¸‹ï¼š # _acme-challenge.example.com -&gt; cVe1Jgrp2BE3zLcLrDuJpckdAV9fHhJbe7XpO7rhiXo # _acme-challenge.www.example.comï¼ˆæ³¨æ„å¯¹äºŽå±‚çº§è¾ƒå¤šçš„åŸŸåä¸€å®šè¦å¡«å†™æ­£ç¡®ï¼‰-&gt; rPe1Jgrp2BE3zLcLrDuJpckdAV9fHhJbe7XpO7rhi # å¯æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤æ¥éªŒè¯txtè®°å½•æ˜¯å¦è§£æžæˆåŠŸ # dig TXT _acme-challenge.example.com # dig TXT _acme-challenge.www.example.com#ç­‰å¾…è§£æžå®Œæˆä¹‹åŽ, æœ€åŽåªéœ€è¦æŒ‡å®šé€‰é¡¹ï¼š--renew å†æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤å³é‡æ–°ç”Ÿæˆè¯ä¹¦å³å¯:acme.sh --renew \-d example.com \-d www.example.com \--yes-I-know-dns-manual-mode-enough-go-ahead-please##æ–¹å¼3ï¼šè‡ªåŠ¨dnséªŒè¯æ–¹å¼ç”³è¯·è¯ä¹¦ #éœ€è¦ä½¿ç”¨åˆ°DNS APIï¼Œå¹¶éœ€è¦é…ç½®åŸŸåè§£æžå•†çš„ API è®¤è¯ä¿¡æ¯ #å½“ acme.sh --issue --dns &lt;dns-name&gt; ç”Ÿæˆè¯ä¹¦æ—¶ï¼Œä¼šè‡ªåŠ¨æ›´æ–°ä¸€äº›é…ç½®æ–‡ä»¶ #ï¼ˆ1ï¼‰è®¾ç½®çš„ API è®¤è¯ä¿¡æ¯ä¼šè¢«è‡ªåŠ¨è®°å½•åœ¨/root/.acme.sh/account.confé…ç½®æ–‡ä»¶ä¸­, åŽç»­å†ä½¿ç”¨è¯¥ DNS æ’ä»¶æ—¶, å°±ä¸éœ€è¦æŒ‡å®šäº†ï¼Œå½“ç„¶ï¼Œå¦‚æžœé‡æ–°æŒ‡å®šï¼Œé‚£ä¹ˆä¼šè¦†ç›–account.confé…ç½®æ–‡ä»¶ä¸­åŽŸæ¥çš„é…ç½® #ï¼ˆ2ï¼‰è®¾ç½®çš„ DNS æ’ä»¶ç±»åž‹ä¼šè®°å½•åœ¨~/.acme.sh/example.com/example.com.confé…ç½®æ–‡ä»¶ä¸­ï¼Œå¦‚æžœé‡æ–°æŒ‡å®šï¼Œé‚£ä¹ˆä¼šè¦†ç›–account.confé…ç½®æ–‡ä»¶ä¸­åŽŸæ¥çš„é…ç½® #ä¸åŒçš„åŸŸåè§£æžå•†çš„DNS APIä½¿ç”¨æ–¹å¼ç›¸ä¼¼ï¼Œä½†æœ‰äº›è®¸åŒºåˆ«ï¼Œå¯å‚è€ƒï¼šhttps://github.com/acmesh-official/acme.sh/wiki/dnsapi#ä»¥DNSPod DNSä¸ºä¾‹ï¼Œæ“ä½œå¦‚ä¸‹ï¼š #å…ˆè®¿é—® https://console.dnspod.cn/account/token/token åˆ›å»ºâ€œDNSPod Tokenâ€ï¼ˆæ³¨æ„ä¸æ˜¯â€œè…¾è®¯äº‘ API å¯†é’¥â€ï¼‰ï¼Œç„¶åŽè¿›è¡Œå¦‚ä¸‹è®¾ç½®ï¼š#è®¾ç½® DNS æ’ä»¶çš„ API è®¤è¯ä¿¡æ¯export DP_Id="xxxxx"export DP_Key="xxxxx"#é€šè¿‡æŒ‡å®šDNS APIç±»åž‹è‡ªåŠ¨è¿›è¡ŒdnséªŒè¯å¹¶ç”³è¯·è¯ä¹¦acme.sh --issue --dns dns_dp -d example.com -d *.example.com#ä»¥Cloudflare DNSä¸ºä¾‹ï¼Œæ“ä½œå¦‚ä¸‹ï¼š #ä½¿ç”¨å‚è€ƒï¼šhttps://github.com/acmesh-official/acme.sh/wiki/dnsapi#dns_cf #å…ˆè®¿é—®ï¼šhttps://dash.cloudflare.com/profile/api-tokens åˆ›å»ºèŽ·å¾— â€œAPI Tokensâ€ æˆ–è€…æŸ¥çœ‹ä½¿ç”¨ â€œGlobal API Keyâ€ï¼ˆé€‰å…¶ä¸€å³å¯ï¼‰ï¼ŒæŽ¨èä½¿ç”¨ API Tokensï¼Œå› ä¸ºå…¶æƒé™ç›¸å¯¹è¾ƒå°ï¼Œæ›´å®‰å…¨ï¼Œæ³¨æ„ï¼šAPI Tokens åˆ›å»ºåŽåªèƒ½æŸ¥çœ‹ä¸€æ¬¡ï¼Œå¦‚æžœå¿˜è®°äº†åªèƒ½é‡æ–°åˆ›å»º#è®¾ç½® DNS æ’ä»¶çš„ API è®¤è¯ä¿¡æ¯#ä½¿ç”¨ API Tokens æ—¶ï¼ˆå¯é€‰ï¼‰export CF_Token="xxxxx"#ä½¿ç”¨ Global API Key æ—¶ï¼ˆå¯é€‰ï¼‰export CF_Key="xxxxx"export CF_Email="user@example.com"##é€šè¿‡æŒ‡å®šDNS APIç±»åž‹è‡ªåŠ¨è¿›è¡ŒdnséªŒè¯å¹¶ç”³è¯·è¯ä¹¦acme.sh --issue --dns dns_cf -d example.com -d *.example.com##å®‰è£…è¯ä¹¦ #æ³¨æ„ï¼šé»˜è®¤ç”Ÿæˆçš„è¯ä¹¦éƒ½ä¼šæ”¾åœ¨ ~/.acme.sh/example.com ç›®å½•é‡Œï¼Œè¯·ä¸è¦ç›´æŽ¥ä½¿ç”¨æ­¤ç›®å½•ä¸‹çš„æ–‡ä»¶ï¼Œå› ä¸ºè¿™é‡Œé¢çš„æ–‡ä»¶éƒ½æ˜¯ acme.sh å†…éƒ¨ä½¿ç”¨çš„ï¼Œè¯¥ç›®å½•ç»“æž„å¯èƒ½ä¼šå‘ç”Ÿå˜åŒ–ï¼Œæ•…å»ºè®®æŠŠè¯ä¹¦å®‰è£…å¤åˆ¶åˆ°çœŸæ­£éœ€è¦ç”¨å®ƒçš„åœ°æ–¹ã€‚å®‰è£…å‘½ä»¤å°†ä¸€äº›é‡è¦çš„å‘½ä»¤å‚æ•°ï¼ˆå¦‚ï¼šè¯ä¹¦ã€ç§é’¥ç­‰æ–‡ä»¶çš„å®‰è£…è·¯å¾„ã€reloadcmd ç­‰ hook å‘½ä»¤è„šæœ¬ç­‰ï¼Œå…¶ä¸­ hook å‘½ä»¤ä¼šç» base64 ç¼–ç ï¼‰è®°å½•åœ¨ ~/.acme.sh/example.com/example.com.conf é…ç½®æ–‡ä»¶ä¸­ï¼Œå½“è¯ä¹¦æ›´æ–°ï¼ˆå¦‚ç»­æœŸæ›´æ–°è¯ä¹¦ï¼‰æ—¶ï¼Œå°†ä¼šé‡æ–°å®‰è£…å¤åˆ¶æœ€æ–°è¯ä¹¦åˆ°é…ç½®æ–‡ä»¶æ‰€æŒ‡å®šçš„è·¯å¾„ä¸­ï¼Œå¹¶æ‰§è¡Œ reloadcmd ç­‰ hook å‘½ä»¤è„šæœ¬ï¼ˆå¦‚ï¼šé‡è½½ nginx é…ç½®æ–‡ä»¶ç­‰ï¼‰ã€‚ #å®‰è£…è¯ä¹¦åŽï¼Œå°±å¯ä»¥åˆ° web æœåŠ¡å™¨ï¼ˆå¦‚ï¼šNginxï¼‰é…ç½®ä½¿ç”¨è¯ä¹¦äº† #æç¤ºï¼š #ï¼ˆ1ï¼‰é‡å¤æ‰§è¡Œæ—¶ï¼Œå¦‚æžœè·¯å¾„æˆ– hook ç­‰å†…å®¹æœ‰å˜åŒ–ä¼šè‡ªåŠ¨ä¿®æ”¹ example.com.conf é…ç½®æ–‡ä»¶ï¼› #ï¼ˆ2ï¼‰æ‰§è¡Œè¯¥å‘½ä»¤å€™ä¼šç«‹å³æ‰§è¡Œ --reloadcmd å¯¹åº”çš„ hook å‘½ä»¤ #ï¼ˆ3ï¼‰å¯¹äºŽå¤šåŸŸåè¯ä¹¦ï¼Œå®‰è£…æ—¶åªè¦æŒ‡å®šç”¨äºŽå‘½åè¯ä¹¦çš„åŸŸåå³å¯ï¼ˆé»˜è®¤ä¸ºç”³è¯·è¯ä¹¦æ—¶çš„ç¬¬ä¸€ä¸ªæŒ‡å®šåŸŸåï¼‰ï¼Œä¸éœ€è¦æŒ‡å®šå…¨éƒ¨åŸŸåacme.sh --install-cert \-d example.com \--key-file /path/example.com-key.pem \--fullchain-file /path/example.com-fullchain.pem \--reloadcmd "nginx -s reload"##æŸ¥çœ‹å·²ç”³è¯·çš„è¯ä¹¦#åˆ—å‡ºå·²ç”³è¯·çš„æ‰€æœ‰è¯ä¹¦acme.sh --list#æŸ¥çœ‹å·²ç”³è¯·çš„æŒ‡å®šè¯ä¹¦é…ç½®ä¿¡æ¯acme.sh --info -d example.com##åŠé”€æŒ‡å®šè¯ä¹¦acme.sh --revoke -d example.com##ä»Žè¯ä¹¦ç”Ÿæˆç›®å½•ä¸­åˆ é™¤æŒ‡å®šè¯ä¹¦acme.sh --remove -d example.com #é€»è¾‘åˆ é™¤ï¼Œåªæ˜¯æ”¹æ–‡ä»¶åŽç¼€ï¼Œå®žé™…å¹¶ä¸ä¼šåˆ é™¤æŽ‰æ–‡ä»¶rm -rf ~/.acme.sh/example.com #å®žé™…åˆ é™¤ï¼ˆæç¤ºï¼šå¦‚æžœä¸ºECCè¯ä¹¦ï¼Œåˆ™ç›®å½•ä¸ºï¼šexample.com_eccï¼‰##ç»­æœŸè¯ä¹¦#ç”³è¯·è¯ä¹¦åŽacme.shä¼šè‡ªåŠ¨å°†ç»­æœŸä»»åŠ¡æ·»åŠ åˆ°ç³»ç»Ÿçš„ç”¨æˆ·å®šæ—¶ä»»åŠ¡ä¸­ã€‚(ç›®å‰é»˜è®¤æ¯60å¤©ä¼šè‡ªåŠ¨æ›´æ–°ï¼Œä»ŠåŽæœ‰å¯èƒ½ä¼šç¼©çŸ­è¿™ä¸ªæ—¶é—´)#åˆ—å‡ºç³»ç»Ÿçš„å®šæ—¶ä»»åŠ¡ï¼ˆå¯æŸ¥çœ‹acme.shè‡ªåŠ¨æ·»åŠ çš„å®šæ—¶ä»»åŠ¡ï¼‰crontab -l#ç»­æœŸæŒ‡å®šè¯ä¹¦ï¼ˆå¦‚éœ€æ‰‹åŠ¨éœ€æ±‚ï¼‰ #é»˜è®¤è¯ä¹¦æœªåˆ°æœŸï¼Œä¸ä¼šæˆåŠŸç»­æœŸï¼ˆå³é‡æ–°é¢å‘æ–°çš„è¯ä¹¦ï¼‰ï¼Œä½†å¯æŒ‡å®š --force æ¥å¼ºåˆ¶é‡æ–°é¢å‘è¯ä¹¦ï¼Œä½†ä¸å»ºè®®ï¼Œå› ä¸ºç”³è¯·é¢å‘å¤ªå¤šæ¬¡ä¼šè§¦å‘ç”³è¯·æ¬¡æ•°é™åˆ¶acme.sh --renew -d example.com#acme.sh --renew --force -d example.com #å¼ºåˆ¶é‡æ–°é¢å‘è¯ä¹¦#ç»­æœŸæ‰€æœ‰è¯ä¹¦ï¼ˆå¦‚éœ€æ‰‹åŠ¨éœ€æ±‚ï¼‰acme.sh --renew-all##ä¿®æ”¹å·²ç”Ÿè¯ä¹¦çš„ DNS æ’ä»¶ï¼ˆè®¾ä¹‹å‰ä½¿ç”¨ DNSPodï¼ŒçŽ°åœ¨æ”¹ä¸º Cloudflareï¼‰#ï¼ˆ1ï¼‰ç¼–è¾‘è´¦å·é…ç½®æ–‡ä»¶ï¼ˆ~/.acme.sh/account.confï¼‰ï¼Œæ·»åŠ æˆ–ä¿®æ”¹ç›¸åº” DNS æ’ä»¶çš„ API è®¤è¯ä¿¡æ¯ï¼ˆå¦‚æžœæ²¡æœ‰åˆ™éœ€è¦æ·»åŠ ï¼Œå¦‚æžœä¹‹å‰å·²ç»é…ç½®å­˜åœ¨å¯ä»¥è‡ªè¡Œé€‰æ‹©æ˜¯å¦éœ€è¦ä¿®æ”¹ï¼Œå…¶ä¸­è®¤è¯å˜é‡åå‰éœ€è¦åŠ  â€œSAVED_â€ å‰ç¼€ï¼‰ï¼Œå¦‚ä¸‹ï¼šSAVED_CF_Key='xxxxx'SAVED_CF_Email='user@example.com'#ï¼ˆ2ï¼‰ç¼–è¾‘æŒ‡å®šè¯ä¹¦çš„é…ç½®æ–‡ä»¶ï¼ˆ~/.acme.sh/example.com/example.com.confï¼‰ï¼Œå¯ä¿®æ”¹ Le_Webrootï¼ˆDNS æ’ä»¶åç§°ï¼‰ã€‚ä¹Ÿå¯æ ¹æ®è‡ªå·±è°ƒæ•´æƒ…å†µé€‰æ‹©ä¿®æ”¹ Le_RealKeyPathï¼ˆè¯ä¹¦ç§˜é’¥æ–‡ä»¶å®‰è£…è·¯å¾„ï¼‰ã€Le_RealFullChainPathï¼ˆè¯ä¹¦é“¾æ–‡ä»¶å®‰è£…è·¯å¾„ï¼Œå…¶ä¸­è¯ä¹¦é“¾æ–‡ä»¶å«è¯ä¹¦ï¼‰ã€Le_ReloadCmdï¼ˆè¯ä¹¦å®‰è£…å®ŒæˆåŽé‡æ–°åŠ è½½æ‰§è¡Œçš„ hook å‘½ä»¤ï¼ŒLe_ReloadCmd çš„å€¼çš„æ ¼å¼ä¸º __ACME_BASE64__START_&lt;ç» Base64 ç¼–ç çš„å‘½ä»¤&gt;__ACME_BASE64__END_ï¼‰ï¼Œå¦‚ä¸‹ï¼šLe_Webroot='dns_cf'Le_RealKeyPath='/opt/ssl-certs/acme.sh-qcmoke.link-key.pem'Le_ReloadCmd='__ACME_BASE64__START_L29wdC9uZ2lueC9zYmluL25naW54IC1zIHJlbG9hZA==__ACME_BASE64__END_'Le_RealFullChainPath='/opt/ssl-certs/acme.sh-qcmoke.link-fullchain.pem'#ï¼ˆ3ï¼‰å¦‚æžœä¸æ”¾å¿ƒä¿®æ”¹æ­£ä¸æ­£ç¡®ï¼Œå¯ä»¥å¼ºåˆ¶é‡æ–°ç”Ÿæˆè¯ä¹¦ï¼ˆå¯é€‰ï¼Œæ²¡å¿…è¦ï¼Œå› ä¸ºç”³è¯·é¢å‘å¤ªå¤šæ¬¡ä¼šè§¦å‘ç”³è¯·æ¬¡æ•°é™åˆ¶ï¼‰ï¼Œå¦‚ä¸‹ï¼šacme.sh --renew --force -d example.com#ï¼ˆ4ï¼‰æˆ–è€…å¼ºåˆ¶é‡æ–°é‡å¤´ç”³è¯·ç”Ÿæˆè¯ä¹¦ï¼ˆå¯é€‰ï¼Œæ²¡å¿…è¦ï¼Œå› ä¸ºç”³è¯·é¢å‘å¤ªå¤šæ¬¡ä¼šè§¦å‘ç”³è¯·æ¬¡æ•°é™åˆ¶ï¼‰ï¼Œå¦‚ä¸‹ï¼š#è®¾ç½® DNS æ’ä»¶çš„ API è®¤è¯ä¿¡æ¯ï¼ˆä»¥ Global API Key ä¸ºä¾‹ï¼‰export CF_Key="xxxxx"export CF_Email="user@example.com"#é‡æ–°ç”Ÿæˆè¯ä¹¦ï¼ˆä¼šåŒæ­¥æ›´æ–°example.com.confé…ç½®æ–‡ä»¶ï¼‰ #æç¤ºï¼šacme.sh --renew åªèƒ½ä½¿ç”¨ä¹‹å‰å­˜å‚¨çš„é…ç½®ä¿¡æ¯æ¥é‡æ–°ç”Ÿæˆè¯ä¹¦ï¼Œä½†ä¸èƒ½æŒ‡å®šå‚æ•°æ¥ä¿®æ”¹ DNS æ’ä»¶ç±»åž‹ã€DNS æ’ä»¶å¯¹åº” API è®¤è¯ä¿¡æ¯ã€è¯ä¹¦ã€å¯†é’¥å®‰è£…è·¯å¾„ç­‰çš„é…ç½®å†…å®¹ã€‚æ‰€ä»¥éœ€è¦æŒ‡å®š --issue --force æ¥é‡æ–°ç”Ÿæˆè¯ä¹¦å¹¶é‡ä¿®æ”¹é…ç½®æ–‡ä»¶ï¼ˆå…¶ä¸­æŒ‡å®š --force è¡¨ç¤ºå¼ºåˆ¶é‡æ–°é¢å‘è¯ä¹¦ï¼‰acme.sh --issue --force --dns dns_cf -d example.com -d *.example.com#é‡æ–°å®‰è£…è¯ä¹¦acme.sh --install-cert \-d example.com \--key-file /path/example.com-key.pem \--fullchain-file /path/example.com-fullchain.pem \--reloadcmd "nginx -s reload"ç”³è¯·è¯ä¹¦åŽï¼Œä¼šå°†è¯ä¹¦ä¿å­˜çš„ç›®å½•ä¸ºï¼š~/.acme.sh/example.comï¼ˆæç¤ºï¼šå¦‚æžœä¸º ECC è¯ä¹¦ï¼Œåˆ™ç›®å½•ä¸ºï¼šexample.com_eccï¼‰ï¼ŒåŒ…å«ä¸€ä¸‹æ–‡ä»¶ï¼šca.cerï¼šCA è¯ä¹¦æ–‡ä»¶fullchain.cerï¼šè¯ä¹¦é“¾æ–‡ä»¶ï¼ˆä¸­é—´è¯ä¹¦ï¼‰example.com.cerï¼šè¯ä¹¦æ–‡ä»¶example.com.keyï¼šç§é’¥æ–‡ä»¶example.com.confï¼šæŒ‡å®šè¯ä¹¦çš„é…ç½®æ–‡ä»¶example.com.csrï¼šè¯ä¹¦è¯·æ±‚æ–‡ä»¶example.com.csr.confï¼šacme.sh å¯¹äºŽç‰¹å®šè¯ä¹¦è¯·æ±‚æ–‡ä»¶çš„é…ç½®æ–‡ä»¶å…³äºŽ Letâ€™s Encrypt è¯ä¹¦ç”³è¯·æ¬¡æ•°é™åˆ¶ï¼šç”Ÿäº§çŽ¯å¢ƒé™åˆ¶æ¯ä¸ªåŸŸå/è¯ä¹¦æ¯å‘¨æœ€å¤šåªèƒ½ç­¾å‘ 5 æ¬¡æ¯ä¸ª IP åœ°å€æ¯å°æ—¶æœ€å¤šèƒ½æäº¤ 300 ä¸ªè¯ä¹¦ç”³è¯·è¯·æ±‚æµ‹è¯•çŽ¯å¢ƒé™åˆ¶ï¼ˆæŒ‡å®š --staging æˆ– --test é€‰é¡¹æ—¶ï¼‰æµ‹è¯•çŽ¯å¢ƒä¸‹é¢å‘çš„è¯ä¹¦æ— æ³•è¢«æµè§ˆå™¨æˆ–æ“ä½œç³»ç»Ÿä¿¡ä»»æµ‹è¯•çŽ¯å¢ƒä¸‹æ¯ä¸ªåŸŸå/è¯ä¹¦æ¯å‘¨æœ€å¤šå¯ç­¾å‘ 50 æ¬¡æµ‹è¯•çŽ¯å¢ƒä¸‹æ¯ä¸ª IP åœ°å€æ¯å°æ—¶æœ€å¤šèƒ½æäº¤ 300 ä¸ªè¯·æ±‚æµ‹è¯•çŽ¯å¢ƒä¸‹æ²¡æœ‰é€šè¿‡ HSTS é¢„è½½çš„åŸŸåï¼ˆç”Ÿäº§çŽ¯å¢ƒæ”¯æŒé€šè¿‡ HSTS é¢„è½½çš„åŸŸåï¼‰Â¶å…­ã€å¤‡ä»½è¿˜åŽŸå¤‡ä»½ï¼ˆåœ¨åŽŸæœåŠ¡å™¨ä¸Šè¿›è¡Œï¼‰12345678##å¤‡ä»½acme.shçš„è„šæœ¬ã€è¯ä¹¦ã€é…ç½®æ–‡ä»¶cd /root/#æ‰“åŒ…å¤‡ä»½ç›®å½•tar -zcvf acme.sh.tgz .acme.sh/# ä½¿ç”¨ sz ä¸‹è½½å¤‡ä»½åŒ…å¹¶åˆ é™¤å¤‡ä»½åŒ…ï¼ˆå¯é€‰ï¼‰# sz -y acme.sh.tgz# rm -f acme.sh.tgz .acme.sh/acme.sh.cron.tmpè¿˜åŽŸï¼ˆåœ¨æ–°æœåŠ¡å™¨ä¸Šè¿›è¡Œï¼‰12345678910111213141516171819202122#ä½¿ç”¨ rz ä¸Šä¼ å¤‡ä»½åŒ…åˆ° /root ç›®å½•ï¼ˆå¯é€‰ï¼‰# rz -y##è¿˜åŽŸ acme.sh çš„è„šæœ¬ã€è¯ä¹¦ã€é…ç½®æ–‡ä»¶cd /root/#åˆ é™¤ç›®å½•ï¼ˆå¦‚æœ‰ï¼‰# rm -rf .acme.sh/#è§£åŒ…è¿˜åŽŸç›®å½•tar xf acme.sh.tgz#åˆ é™¤å¤‡ä»½åŒ…ï¼ˆå¯é€‰ï¼‰# rm -f acme.sh.tgz#è¿˜åŽŸ acme.sh çš„å®šæ—¶ä»»åŠ¡#åˆ é™¤ acme.sh æœ‰å…³çš„å®šæ—¶ä»»åŠ¡ï¼ˆå¦‚æœ‰ï¼‰# acme.sh --uninstall-cronjob#å®‰è£… acme.sh æœ‰å…³çš„å®šæ—¶ä»»åŠ¡acme.sh --install-cronjob#è¿˜å¯é€šè¿‡ crontab -e å‘½ä»¤æ¥æ‰‹åŠ¨ç¼–è¾‘æ¥è¿½åŠ å®šæ—¶ä»»åŠ¡#æˆ–è€…ï¼ˆRedHat ç³»åˆ—ç³»ç»Ÿï¼‰ï¼šecho '35 0 * * * "/root/.acme.sh"/acme.sh --cron --home "/root/.acme.sh" &gt; /dev/null' &gt;&gt; /var/spool/cron/root#æˆ–è€…ï¼ˆDebian ç³»åˆ—ç³»ç»Ÿï¼‰ï¼šecho '35 0 * * * "/root/.acme.sh"/acme.sh --cron --home "/root/.acme.sh" &gt; /dev/null' &gt;&gt; /var/spool/cron/crontabs/root#æˆ–è€…ï¼š(crontab -l ; echo '35 0 * * * "/root/.acme.sh"/acme.sh --cron --home "/root/.acme.sh" &gt; /dev/null') | crontab -å‚è€ƒï¼šhttps://www.cnblogs.com/tssc/p/17428657.htmlÂ¶ä¸ƒã€å‚è€ƒhttps://blog.misaka.rest/2023/04/02/acme-ssl-cert/]]></content>
      <categories>
        <category>tools</category>
      </categories>
      <tags>
        <tag>ssl</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[JetBrainsç³»åˆ—å¼€å‘å·¥å…·ä½¿ç”¨æ–‡æ¡£]]></title>
    <url>%2Ftools%2Fjetbrains.html</url>
    <content type="text"><![CDATA[Â¶ä¸€ã€å®‰è£…JetBrainsç³»åˆ—å¼€å‘å·¥å…·åˆ° jetbrainså®˜ç½‘ ä¸‹è½½éœ€è¦çš„å¼€å‘å·¥å…·ã€‚æ¯”å¦‚é€‰æ‹©ä¸‹è½½IntelliJ IDEAï¼Œå®‰è£…å°±æ˜¯å‚»ç“œå¼çš„ä¸‹ä¸€æ­¥å³å¯ã€‚Â¶äºŒã€JetBrainsç³»åˆ—å¼€å‘å·¥å…·æ¿€æ´»Â¶1ã€æ—§ç‰ˆ - 2021.3ç‰ˆæœ¬ï¼ˆä¸å«ï¼‰ä¹‹å‰ç‰ˆæœ¬æœ‰æ•ˆæ’ä»¶å¸‚åœºå®‰è£…ï¼šåœ¨Settings/Preferences... -&gt; Plugins å†…æ‰‹åŠ¨æ·»åŠ ç¬¬ä¸‰æ–¹æ’ä»¶ä»“åº“åœ°å€ï¼šhttps://plugins.zhile.ioæœç´¢ï¼šIDE Eval Resetæ’ä»¶è¿›è¡Œå®‰è£…ã€‚å¦‚æžœæœç´¢ä¸åˆ°è¯·æ³¨æ„æ˜¯å¦åšå¥½äº†ä¸Šä¸€æ­¥ï¼Ÿç½‘ç»œæ˜¯å¦é€šç•…ï¼Ÿæ’ä»¶ä¼šæç¤ºå®‰è£…æˆåŠŸã€‚ä¸‹è½½å®‰è£…ï¼šä¸‹è½½ ide-eval-resetter æ’ä»¶ã€‚é€šå¸¸å¯ä»¥ç›´æŽ¥æŠŠzipåŒ…æ‹–è¿›IDEçš„çª—å£æ¥è¿›è¡Œæ’ä»¶çš„å®‰è£…ã€‚å¦‚æžœæ— æ³•æ‹–åŠ¨å®‰è£…ï¼Œä½ å¯ä»¥åœ¨Settings/Preferences... -&gt; Plugins é‡Œæ‰‹åŠ¨å®‰è£…æ’ä»¶ï¼ˆInstall Plugin From Disk...ï¼‰æ’ä»¶ä¼šæç¤ºå®‰è£…æˆåŠŸã€‚å¦‚æžœIDEå·²ç»è¿‡äº†è¯•ç”¨æ‰“ä¸å¼€ï¼Œå¯ä»¥è¿è¡Œè¯•ç”¨åˆ°æœŸé‡ç½®è„šæœ¬ï¼ˆæ³¨æ„é€‰æ‹©å¯¹åº”ç³»ç»Ÿç‰ˆæœ¬ï¼‰ï¼Œå®ƒå¯ä»¥è®©ä½ æš‚æ—¶è¿›å…¥IDEè¿›è¡Œä¸Šè¿°æ“ä½œã€‚å‚è€ƒï¼šhttps://zhile.io/2020/11/18/jetbrains-eval-reset-deprecated.htmlÂ¶2ã€æ–°ç‰ˆ - 2021.3ç‰ˆæœ¬ä¹‹åŽæœ‰æ•ˆæ¿€æ´»ä¸‹åˆ—ä»¥JetBrainsç³»åˆ—ä¸­çš„IDEAä¸ºä¾‹è®²è§£ï¼Œå…¶ä»–JetBrainså¼€å‘å·¥å…·ä¹Ÿé€‚ç”¨ã€‚1ã€ä¸‹è½½ja-netfilteræ’ä»¶ï¼šhttps://gitee.com/ja-netfilter/ja-netfilter/releases/download/2022.2.0/ja-netfilter-2022.2.0.zip2ã€è§£åŽ‹ä¸‹è½½çš„åŽ‹ç¼©åŒ…åˆ°æœ¬æœºä¸Šçš„ä»»æ„ç›®å½•ï¼Œå¦‚ï¼šD:\Development\JetBrains\ja-netfilter3ã€ä¿®æ”¹æ’ä»¶ja-netfilter/configç›®å½•ä¸‹é…ç½®æ–‡ä»¶ä¿®æ”¹dns.conf123[DNS]EQUAL,jetbrains.comEQUAL,plugin.obroom.comä¿®æ”¹power.conf1234567[Result]; Suit 220801EQUAL,108391492724719606277191711676038310454333436786970899072879934267610324870870961974305689698304529291751931883693569275416671653649715395540162187908455880751887548211257780817773830153477469379663893839249632010489688404104740814832791608983255964373246023808678041003248593298915323068020141515280275870731964298697511434302901212533563571472947179437111243030002421474283363073021442715554541318313064598900684758246291687123240210640543678544269324094608551763049140564128299834843381841274260516105408318037686490277144538983963856617365418526798235932271319705894170543971766101775628884107261100637290512593943587295268337137890353216997114446658051251047509442298463526766678103653729776506979657957966027949436493606289520405331110453990512846697802196701678785414928082416405650857741201229183421400567636999723106788808933737428330992184832395299929033666381663232693108552887968738513151493044369308652310586803160326722967115451573652070286501044484503083240302303438554529551204609089966636092666792347623413483134664670641246129954999815529917163967761617333572567787618346281658716181608204191963817312534492517480248086896060880038259592723773361709406277837609546030729611710076711450268767610513506889086815865283,65537,860106576952879101192782278876319243486072481962999610484027161162448933268423045647258145695082284265933019120714643752088997312766689988016808929265129401027490891810902278465065056686129972085119605237470899952751915070244375173428976413406363879128531449407795115913715863867259163957682164040613505040314747660800424242248055421184038777878268502955477482203711835548014501087778959157112423823275878824729132393281517778742463067583320091009916141454657614089600126948087954465055321987012989937065785013284988096504657892738536613208311013047138019418152103262155848541574327484510025594166239784429845180875774012229784878903603491426732347994359380330103328705981064044872334790365894924494923595382470094461546336020961505275530597716457288511366082299255537762891238136381924520749228412559219346777184174219999640906007205260040707839706131662149325151230558316068068139406816080119906833578907759960298749494098180107991752250725928647349597506532778539709852254478061194098069801549845163358315116260915270480057699929968468068015735162890213859113563672040630687357054902747438421559817252127187138838514773245413540030800888215961904267348727206110582505606182944023582459006406137831940959195566364811905585377246353-&gt;31872219281407242025505148642475109331663948030010491344733687844358944945421064967310388547820970408352359213697487269225694990179009814674781374751323403257628081559561462351695605167675284372388551941279783515209238245831229026662363729380633136520288327292047232179909791526492877475417113579821717193807584807644097527647305469671333646868883650312280989663788656507661713409911267085806708237966730821529702498972114194166091819277582149433578383639532136271637219758962252614390071122773223025154710411681628917523557526099053858210363406122853294409830276270946292893988830514538950951686480580886602618927728470029090747400687617046511462665469446846624685614084264191213318074804549715573780408305977947238915527798680393538207482620648181504876534152430149355791756374642327623133843473947861771150672096834149014464956451480803326284417202116346454345929350148770746553056995922154382822307758515805142704373984019252210715650875853634697920708113806880196144197384637328982263167395073688501517286678083973976140696077590122053014085412828620051470085033364773099146103525313018873319293728800442101520384088109603555959893639842091339193857485407672132882577840295039058621747654642202620767068924079813640067442975EQUAL,17430805040661904960217142128786500464864043257152786846745016761637330023130385628907046448630022920796670427977354189343808215815509511917604813946812068613694491683253995133209152077919891234968182248857838898199644443355241219225726139665337883043072574125580003765750846684062985504854965420309681346496007525845855594591340548416511522780366831902271789348331613580937547169576595371827264137623285493327295900285658920185041209960394118635722087939857728650109349728410946091579960723986601084785767630072314151995336592750869439606211427735380846313426999664229383327948871862419128418990267247800060898233458,65537,24521566609765666164947017540032021599255701751860227819512057581863724253675446227963662825786216373422117712052647819939094618512591273903731385388945941620956494535886991119537555521717683289574562412249381695575366776196301290570457146763799416784211789775179394339350479765228864277544252534115220169733628333836919758657866915165201332480467127194998195481209996470680276955438320553419743409285076366446411459237915876713514676197204668785300100857270615348770478845912795954436677863461158442534283102154396294509903255539003316675136070586165787963286744036831353098283719024130881707718857451774498022915819-&gt;986236757547332986472011617696226561292849812918563355472727826767720188564083584387121625107510786855734801053524719833194566624465665316622563244215340671405971599343902468620306327831715457360719532421388780770165778156818229863337344187575566725786793391480600129482653072861971002459947277805295727097226389568776499707662505334062639449916265137796823793276300221537201727072401742985542559596685092673521228140822200236743113743661549252453726123450722876929538747702356573783116366629850199080495560991841329893037291900147497007197055572787780928474439122050029863368156328679013185403585508633386797793[Args]EQUAL,65537,24773058818499217187577663886010908531303294206336895556072197892590450942803807164562754911175164262596715237551312004078542654996496301487027034803410086499747369353221485073240039340641397198525027728751956658900801359887190562885573922317930300068615009483578963467556425525328780085523172495307229112069939166202511721671904748968934606589702999279663332403655662225374084460291376706916679151764149324177444374590606643838366605181996272409014933080082205048098737253668016260658830645459388519595314928290853199112791333551144805347785109465401055719331231478162870216035573012645710763533896540021550083104281-&gt;3,24773058818499217187577663886010908531303294206336895556072197892590450942803807164562754911175164262596715237551312004078542654996496301487027034803410086499747369353221485073240039340641397198525027728751956658900801359887190562885573922317930300068615009483578963467556425525328780085523172495307229112069939166202511721671904748968934606589702999279663332403655662225374084460291376706916679151764149324177444374590606643838366605181996272409014933080082205048098737253668016260658830645459388519595314928290853199112791333551144805347785109465401055719331231478162870216035573012645710763533896540021550083104281ä¿®æ”¹url.conf12[URL]PREFIX,https://account.jetbrains.com/lservice/rpc/validateKey.action4ã€æ‰“å¼€IDEAå®‰è£…ç›®å½•é‡Œçš„binç›®å½•ï¼Œç„¶åŽä¿®æ”¹ idea64.exe.vmoptions æ–‡ä»¶ã€‚æ·»åŠ å¦‚ä¸‹å‚æ•°ï¼š123-javaagent:D:\\Development\\JetBrains\\ja-netfilter\\ja-netfilter.jar--add-opens=java.base/jdk.internal.org.objectweb.asm=ALL-UNNAMED--add-opens=java.base/jdk.internal.org.objectweb.asm.tree=ALL-UNNAMEDðŸ’â€â™‚ å¤‡æ³¨è¯´æ˜Žï¼šè·¯å¾„ä¸­çš„æ–œæ ä½¿ç”¨\\æˆ–è€…/ï¼Œå»ºè®®è·¯å¾„ä¸­ä¸è¦åŒ…å«ç©ºæ ¼ã€‚æ‡’äººé…ç½®æ–¹å¼ï¼šå¦‚æžœä¸æƒ³ä»¥ä¸Šé…ç½®é‚£ä¹ˆéº»çƒ¦ï¼Œä¹Ÿå¯ä»¥ç”¨åˆ«äººå¯¹ja-netfilteré…ç½®å¥½çš„æ‡’äººç‰ˆï¼Œæ‰“å¼€ https://3.jetbra.in ç„¶åŽé€‰æ‹©é¡µé¢åˆ·æ–°çš„ä»»æ„ä¸€ä¸ªå¯ç”¨çš„ç½‘å€ç‚¹å‡»è¿›å…¥ç¥žKç½‘ç«™ï¼Œä¸‹è½½é¡µé¢ä¸Šæ–¹çš„jetbra.zipæ–‡ä»¶ã€‚5ã€æ‰“å¼€è¿™ä¸ªç½‘ç«™ https://3.jetbra.in ç­‰å¾…ç‰‡åˆ»ï¼Œé€‰æ‹©ä¸€ä¸ªå¯ä»¥è®¿é—®çš„ç½‘ç«™ï¼Œç„¶åŽæ‰¾åˆ°å¯¹åº”ç³»åˆ—çš„å¡ç‰‡é€‰æ‹©å¤åˆ¶æ¿€æ´»ç ã€‚æ›´å¤šæ¿€æ´»ç èŽ·å–ï¼šhttp://jets.idejihuo.com/6ã€å¯åŠ¨IDEAï¼Œç„¶åŽå¤åˆ¶ä»¥ä¸ŠèŽ·å–çš„æ¿€æ´»ç è¿›è¡Œæ¿€æ´»å³å¯ã€‚å¦‚ä¸‹ï¼šIntelliJ IDEA çš„æ¿€æ´»ç ï¼š16G5NXCPJZB-eyJsaWNlbnNlSWQiOiI2RzVOWENQSlpCIiwibGljZW5zZWVOYW1lIjoic2lnbnVwIHNjb290ZXIiLCJhc3NpZ25lZU5hbWUiOiIiLCJhc3NpZ25lZUVtYWlsIjoiIiwibGljZW5zZVJlc3RyaWN0aW9uIjoiIiwiY2hlY2tDb25jdXJyZW50VXNlIjpmYWxzZSwicHJvZHVjdHMiOlt7ImNvZGUiOiJQU0kiLCJmYWxsYmFja0RhdGUiOiIyMDI1LTA4LTAxIiwicGFpZFVwVG8iOiIyMDI1LTA4LTAxIiwiZXh0ZW5kZWQiOnRydWV9LHsiY29kZSI6IlBEQiIsImZhbGxiYWNrRGF0ZSI6IjIwMjUtMDgtMDEiLCJwYWlkVXBUbyI6IjIwMjUtMDgtMDEiLCJleHRlbmRlZCI6dHJ1ZX0seyJjb2RlIjoiSUkiLCJmYWxsYmFja0RhdGUiOiIyMDI1LTA4LTAxIiwicGFpZFVwVG8iOiIyMDI1LTA4LTAxIiwiZXh0ZW5kZWQiOmZhbHNlfSx7ImNvZGUiOiJQUEMiLCJmYWxsYmFja0RhdGUiOiIyMDI1LTA4LTAxIiwicGFpZFVwVG8iOiIyMDI1LTA4LTAxIiwiZXh0ZW5kZWQiOnRydWV9LHsiY29kZSI6IlBHTyIsImZhbGxiYWNrRGF0ZSI6IjIwMjUtMDgtMDEiLCJwYWlkVXBUbyI6IjIwMjUtMDgtMDEiLCJleHRlbmRlZCI6dHJ1ZX0seyJjb2RlIjoiUFNXIiwiZmFsbGJhY2tEYXRlIjoiMjAyNS0wOC0wMSIsInBhaWRVcFRvIjoiMjAyNS0wOC0wMSIsImV4dGVuZGVkIjp0cnVlfSx7ImNvZGUiOiJQV1MiLCJmYWxsYmFja0RhdGUiOiIyMDI1LTA4LTAxIiwicGFpZFVwVG8iOiIyMDI1LTA4LTAxIiwiZXh0ZW5kZWQiOnRydWV9LHsiY29kZSI6IlBQUyIsImZhbGxiYWNrRGF0ZSI6IjIwMjUtMDgtMDEiLCJwYWlkVXBUbyI6IjIwMjUtMDgtMDEiLCJleHRlbmRlZCI6dHJ1ZX0seyJjb2RlIjoiUFJCIiwiZmFsbGJhY2tEYXRlIjoiMjAyNS0wOC0wMSIsInBhaWRVcFRvIjoiMjAyNS0wOC0wMSIsImV4dGVuZGVkIjp0cnVlfSx7ImNvZGUiOiJQQ1dNUCIsImZhbGxiYWNrRGF0ZSI6IjIwMjUtMDgtMDEiLCJwYWlkVXBUbyI6IjIwMjUtMDgtMDEiLCJleHRlbmRlZCI6dHJ1ZX1dLCJtZXRhZGF0YSI6IjAxMjAyMjA5MDJQU0FOMDAwMDA1IiwiaGFzaCI6IlRSSUFMOi0xMDc4MzkwNTY4IiwiZ3JhY2VQZXJpb2REYXlzIjo3LCJhdXRvUHJvbG9uZ2F0ZWQiOmZhbHNlLCJpc0F1dG9Qcm9sb25nYXRlZCI6ZmFsc2V9-SnRVlQQR1&#x2F;9nxZ2AXsQ0seYwU5OjaiUMXrnQIIdNRvykzqQ0Q+vjXlmO7iAUwhwlsyfoMrLuvmLYwoD7fV8Mpz9Gs2gsTR8DfSHuAdvZlFENlIuFoIqyO8BneM9paD0yLxiqxy&#x2F;WWuOqW6c1v9ubbfdT6z9UnzSUjPKlsjXfq9J2gcDALrv9E0RPTOZqKfnsg7PF0wNQ0&#x2F;d00dy1k3zI+zJyTRpDxkCaGgijlY&#x2F;LZ&#x2F;wqd&#x2F;kRfcbQuRzdJ&#x2F;JXa3nj26rACqykKXaBH5thuvkTyySOpZwZMJVJyW7B7ro&#x2F;hkFCljZug3K+bTw5VwySzJtDcQ9tDYuu0zSAeXrcv2qrOg&#x3D;&#x3D;-MIIETDCCAjSgAwIBAgIBDTANBgkqhkiG9w0BAQsFADAYMRYwFAYDVQQDDA1KZXRQcm9maWxlIENBMB4XDTIwMTAxOTA5MDU1M1oXDTIyMTAyMTA5MDU1M1owHzEdMBsGA1UEAwwUcHJvZDJ5LWZyb20tMjAyMDEwMTkwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQCUlaUFc1wf+CfY9wzFWEL2euKQ5nswqb57V8QZG7d7RoR6rwYUIXseTOAFq210oMEe++LCjzKDuqwDfsyhgDNTgZBPAaC4vUU2oy+XR+Fq8nBixWIsH668HeOnRK6RRhsr0rJzRB95aZ3EAPzBuQ2qPaNGm17pAX0Rd6MPRgjp75IWwI9eA6aMEdPQEVN7uyOtM5zSsjoj79Lbu1fjShOnQZuJcsV8tqnayeFkNzv2LTOlofU&#x2F;Tbx502Ro073gGjoeRzNvrynAP03pL486P3KCAyiNPhDs2z8&#x2F;COMrxRlZW5mfzo0xsK0dQGNH3UoG&#x2F;9RVwHG4eS8LFpMTR9oetHZBAgMBAAGjgZkwgZYwCQYDVR0TBAIwADAdBgNVHQ4EFgQUJNoRIpb1hUHAk0foMSNM9MCEAv8wSAYDVR0jBEEwP4AUo562SGdCEjZBvW3gubSgUouX8bOhHKQaMBgxFjAUBgNVBAMMDUpldFByb2ZpbGUgQ0GCCQDSbLGDsoN54TATBgNVHSUEDDAKBggrBgEFBQcDATALBgNVHQ8EBAMCBaAwDQYJKoZIhvcNAQELBQADggIBABqRoNGxAQct9dQUFK8xqhiZaYPd30TlmCmSAaGJ0eBpvkVeqA2jGYhAQRqFiAlFC63JKvWvRZO1iRuWCEfUMkdqQ9VQPXziE&#x2F;BlsOIgrL6RlJfuFcEZ8TK3syIfIGQZNCxYhLLUuet2HE6LJYPQ5c0jH4kDooRpcVZ4rBxNwddpctUO2te9UU5&#x2F;FjhioZQsPvd92qOTsV+8Cyl2fvNhNKD1Uu9ff5AkVIQn4JU23ozdB&#x2F;R5oUlebwaTE6WZNBs+TA&#x2F;qPj+5&#x2F;we9NH71WRB0hqUoLI2AKKyiPw++FtN4Su1vsdDlrAzDj9ILjpjJKA1ImuVcG329&#x2F;WTYIKysZ1CWK3zATg9BeCUPAV1pQy8ToXOq+RSYen6winZ2OO93eyHv2Iw5kbn1dqfBw1BuTE29V2FJKicJSu8iEOpfoafwJISXmz1wnnWL3V&#x2F;0NxTulfWsXugOoLfv0ZIBP1xH9kmf22jjQ2JiHhQZP7ZDsreRrOeIQ&#x2F;c4yR8IQvMLfC0WKQqrHu5ZzXTH4NO3CwGWSlTY74kE91zXB5mwWAx1jig+UXYc2w4RkVhy0&#x2F;&#x2F;lOmVya&#x2F;PEepuuTTI4+UJwC7qbVlh5zfhj8oTNUXgN0AOc+Q0&#x2F;WFPl1aw5VV&#x2F;VrO8FCoB15lFVlpKaQ1Yh+DVU8ke+rt9Th0BCHXe0uZOEmH0nOnH&#x2F;0onDWebStorm çš„æ¿€æ´»ç ï¼š18R927DG13X-eyJsaWNlbnNlSWQiOiI4UjkyN0RHMTNYIiwibGljZW5zZWVOYW1lIjoic2lnbnVwIHNjb290ZXIiLCJhc3NpZ25lZU5hbWUiOiIiLCJhc3NpZ25lZUVtYWlsIjoiIiwibGljZW5zZVJlc3RyaWN0aW9uIjoiIiwiY2hlY2tDb25jdXJyZW50VXNlIjpmYWxzZSwicHJvZHVjdHMiOlt7ImNvZGUiOiJQU0kiLCJmYWxsYmFja0RhdGUiOiIyMDI1LTA4LTAxIiwicGFpZFVwVG8iOiIyMDI1LTA4LTAxIiwiZXh0ZW5kZWQiOnRydWV9LHsiY29kZSI6IldTIiwiZmFsbGJhY2tEYXRlIjoiMjAyNS0wOC0wMSIsInBhaWRVcFRvIjoiMjAyNS0wOC0wMSIsImV4dGVuZGVkIjpmYWxzZX0seyJjb2RlIjoiUFdTIiwiZmFsbGJhY2tEYXRlIjoiMjAyNS0wOC0wMSIsInBhaWRVcFRvIjoiMjAyNS0wOC0wMSIsImV4dGVuZGVkIjp0cnVlfSx7ImNvZGUiOiJQQ1dNUCIsImZhbGxiYWNrRGF0ZSI6IjIwMjUtMDgtMDEiLCJwYWlkVXBUbyI6IjIwMjUtMDgtMDEiLCJleHRlbmRlZCI6dHJ1ZX1dLCJtZXRhZGF0YSI6IjAxMjAyMjA5MDJQU0FOMDAwMDA1IiwiaGFzaCI6IlRSSUFMOjIwMTEzMjMwMjYiLCJncmFjZVBlcmlvZERheXMiOjcsImF1dG9Qcm9sb25nYXRlZCI6ZmFsc2UsImlzQXV0b1Byb2xvbmdhdGVkIjpmYWxzZX0&#x3D;-Jev3eIT6wPDh59rzeBG67oHD8GcYHifz9+OkIePP3Qo49dGX1DqLTGJgOxSClHrshRzjOktdBYwkwpeTrDMwgeGu+cy0OhzvtQMeh7R3HrEQkhGbNBjfpbW6nq6Mhv8k6Duoiw3XiU434V5iM6DgRN3Yzo8VKxU7Kb4u&#x2F;SQnPTd+PR64hYJjblVXUzGHZUX4w8RBej3T0EREccs36bfnnPC2X91K&#x2F;qbvr9C0uY&#x2F;feHAMpuekMks0v4qApbInpw5O+elLE3l8txlNWhWSC8m&#x2F;O&#x2F;S7iydf27hV5mgePM5422Rpvm4dmA2DIQcq7xxdt4X67DmVGMC2yIFiH4hfkqySWg&#x3D;&#x3D;-MIIETDCCAjSgAwIBAgIBDTANBgkqhkiG9w0BAQsFADAYMRYwFAYDVQQDDA1KZXRQcm9maWxlIENBMB4XDTIwMTAxOTA5MDU1M1oXDTIyMTAyMTA5MDU1M1owHzEdMBsGA1UEAwwUcHJvZDJ5LWZyb20tMjAyMDEwMTkwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQCUlaUFc1wf+CfY9wzFWEL2euKQ5nswqb57V8QZG7d7RoR6rwYUIXseTOAFq210oMEe++LCjzKDuqwDfsyhgDNTgZBPAaC4vUU2oy+XR+Fq8nBixWIsH668HeOnRK6RRhsr0rJzRB95aZ3EAPzBuQ2qPaNGm17pAX0Rd6MPRgjp75IWwI9eA6aMEdPQEVN7uyOtM5zSsjoj79Lbu1fjShOnQZuJcsV8tqnayeFkNzv2LTOlofU&#x2F;Tbx502Ro073gGjoeRzNvrynAP03pL486P3KCAyiNPhDs2z8&#x2F;COMrxRlZW5mfzo0xsK0dQGNH3UoG&#x2F;9RVwHG4eS8LFpMTR9oetHZBAgMBAAGjgZkwgZYwCQYDVR0TBAIwADAdBgNVHQ4EFgQUJNoRIpb1hUHAk0foMSNM9MCEAv8wSAYDVR0jBEEwP4AUo562SGdCEjZBvW3gubSgUouX8bOhHKQaMBgxFjAUBgNVBAMMDUpldFByb2ZpbGUgQ0GCCQDSbLGDsoN54TATBgNVHSUEDDAKBggrBgEFBQcDATALBgNVHQ8EBAMCBaAwDQYJKoZIhvcNAQELBQADggIBABqRoNGxAQct9dQUFK8xqhiZaYPd30TlmCmSAaGJ0eBpvkVeqA2jGYhAQRqFiAlFC63JKvWvRZO1iRuWCEfUMkdqQ9VQPXziE&#x2F;BlsOIgrL6RlJfuFcEZ8TK3syIfIGQZNCxYhLLUuet2HE6LJYPQ5c0jH4kDooRpcVZ4rBxNwddpctUO2te9UU5&#x2F;FjhioZQsPvd92qOTsV+8Cyl2fvNhNKD1Uu9ff5AkVIQn4JU23ozdB&#x2F;R5oUlebwaTE6WZNBs+TA&#x2F;qPj+5&#x2F;we9NH71WRB0hqUoLI2AKKyiPw++FtN4Su1vsdDlrAzDj9ILjpjJKA1ImuVcG329&#x2F;WTYIKysZ1CWK3zATg9BeCUPAV1pQy8ToXOq+RSYen6winZ2OO93eyHv2Iw5kbn1dqfBw1BuTE29V2FJKicJSu8iEOpfoafwJISXmz1wnnWL3V&#x2F;0NxTulfWsXugOoLfv0ZIBP1xH9kmf22jjQ2JiHhQZP7ZDsreRrOeIQ&#x2F;c4yR8IQvMLfC0WKQqrHu5ZzXTH4NO3CwGWSlTY74kE91zXB5mwWAx1jig+UXYc2w4RkVhy0&#x2F;&#x2F;lOmVya&#x2F;PEepuuTTI4+UJwC7qbVlh5zfhj8oTNUXgN0AOc+Q0&#x2F;WFPl1aw5VV&#x2F;VrO8FCoB15lFVlpKaQ1Yh+DVU8ke+rt9Th0BCHXe0uZOEmH0nOnH&#x2F;0onDå¦‚æžœä¸æƒ³ä»¥ä¸Šé…ç½®é‚£ä¹ˆéº»çƒ¦ï¼Œä¹Ÿå¯ä»¥ç”¨åˆ«äººå¯¹ja-netfilteré…ç½®å¥½çš„æ‡’äººç‰ˆï¼Œæ‰“å¼€ https://3.jetbra.in ç„¶åŽé€‰æ‹©é¡µé¢åˆ·æ–°çš„ä»»æ„ä¸€ä¸ªå¯ç”¨çš„ç½‘å€ç‚¹å‡»è¿›å…¥ç¥žKç½‘ç«™ï¼Œä¸‹è½½é¡µé¢ä¸Šæ–¹çš„jetbra.zipæ–‡ä»¶ã€‚éœ€è¦æ³¨æ„ï¼Œä»Žè¿™ä¸ªç½‘ç«™ä¸‹è½½çš„æ‡’äººåŒ…åœ¨é…ç½®-javaagentå‚æ•°æ—¶è¦æ³¨æ„åœ¨åŽé¢åŠ å‚æ•°=jetbrainsï¼ˆè¿™ä¸ªå¾ˆå‘ï¼ ðŸ˜¢ ï¼‰ï¼Œå¦åˆ™åœ¨æ¿€æ´»æ—¶ä¼šæç¤ºKey is invalidä¸”æ— æ³•æ¿€æ´»ï¼ŒåŠ è¿™ä¸ªå‚æ•°çš„åŽŸå› æ˜¯å› ä¸ºæ‡’äººåŒ…é…ç½®æ–‡ä»¶åœ¨config-jetbrainsç›®å½•é‡Œè€Œä¸æ˜¯configç›®å½•é‡Œï¼ˆå¦‚æžœä¸åŠ è¿™ä¸ªå‚æ•°åˆ™ä¼šä»Žconfigç›®å½•é‡Œæ‰¾é…ç½®æ–‡ä»¶ï¼‰ã€‚åŠ å‚æ•°åŽçš„é…ç½®å¦‚ä¸‹ï¼š123-javaagent:D:\\Development\\JetBrains\\jetbra\\ja-netfilter.jar=jetbrains--add-opens=java.base/jdk.internal.org.objectweb.asm=ALL-UNNAMED--add-opens=java.base/jdk.internal.org.objectweb.asm.tree=ALL-UNNAMEDå‚è€ƒï¼šhttps://zhile.io/2021/11/29/ja-netfilter-javaagent-lib.html#more-1https://www.cnblogs.com/yanglang/p/16818245.htmlhttps://www.quanxiaoha.com/webstorm-pojie/webstorm-pojie-20231.htmlÂ¶ä¸‰ã€è§£å†³JetBrainsè½¯ä»¶å¯¹Cç›˜å ç”¨é—®é¢˜ä¸‹åˆ—ä»¥JetBrainsç³»åˆ—ä¸­çš„IDEAä¸ºä¾‹è®²è§£ï¼Œå…¶ä»–JetBrainså¼€å‘å·¥å…·ä¹Ÿé€‚ç”¨ã€‚é»˜è®¤IDEAä¸‹è½½çš„æ’ä»¶å’Œç¼“å­˜éƒ½ä¼šå­˜åˆ°Cç›˜çš„ç”¨æˆ·ç›®å½•é‡Œï¼Œå¦‚æžœæƒ³æ”¹åˆ°å…¶ä»–ç›˜ç¬¦ï¼Œåªè¦æ‰“å¼€IDEAå®‰è£…ç›®å½•é‡Œçš„binç›®å½•ï¼Œç„¶åŽä¿®æ”¹ idea.propertiesæ–‡ä»¶ï¼Œæ·»åŠ å¦‚ä¸‹é…ç½®ï¼š1234idea.config.path=E:/Cache/JetBrains/.IntelliJIdea/configidea.system.path=E:/Cache/JetBrains/.IntelliJIdea/systemidea.plugins.path=$&#123;idea.config.path&#125;/pluginsidea.log.path=$&#123;idea.system.path&#125;/logÂ¶å››ã€IDEAå¼€å‘å·¥å…·Â¶1ã€åˆ›å»ºjavaå·¥ç¨‹è®¾ç½®jdkè®¾ç½®é¡¹ç›®åç§°å’Œé¡¹ç›®å­˜æ”¾è·¯å¾„æ·»åŠ å·¥å…·æ å’Œå·¥å…·æŒ‰é’®åˆ›å»ºjavaæ–‡ä»¶è¾“å…¥psvmå¿«é€Ÿè‡ªåŠ¨è¡¥å…¨ç”Ÿæˆpublic static void main(String[] args) {}è¾“å…¥soutå¿«é€Ÿè‡ªåŠ¨è¡¥å…¨ç”ŸæˆSystem.out.println();å®Œæ•´ä»£ç å¦‚ä¸‹ï¼š1234567package com.qcmoke;public class Hello &#123; public static void main(String[] args) &#123; System.out.println("hello world !"); &#125;&#125;ç¼–è¯‘è¿è¡ŒHello.java ï¼Œæœ‰ä¸‰ç§æ–¹å¼ã€‚æ–¹å¼1ï¼šæ–¹å¼2ï¼šæ–¹å¼3ï¼šä¹Ÿå¯ä»¥æŒ‰å¿«æ·é”®ctrl+shift+F10å®Œæˆç¼–è¯‘è¿è¡Œã€‚è¿è¡Œç»“æžœï¼šÂ¶2ã€åˆ›å»ºwebå·¥ç¨‹ç¬¬ä¸€æ­¥ åˆ›å»ºå·¥ç¨‹æŒ‡å®šé¡¹ç›®åç§°å’Œå­˜æ”¾ä½ç½®ï¼Œç„¶åŽç‚¹å‡»Finishå¦‚æžœå‘çŽ°è¿™é‡Œæ˜¯ç©ºçš„æ²¡æœ‰tomcatï¼Œå¯ä»¥ç‚¹å‡»é…ç½®tomcatæœåŠ¡å™¨ç¬¬äºŒæ­¥ è¡¥å…¨ç›®å½•åœ¨webç›®å½•ä¸‹åˆ›å»ºclasseså’Œlibæ–‡ä»¶å¤¹ï¼Œåå­—ä¸å¯æ”¹æŽ¥ä¸‹æ¥ç»™classeså’Œlibèµ‹äºˆIDEAç›®å½•ç‰¹æ€§ï¼Œåœ¨Fileä¸­æ‰¾åˆ°Project Structureç‚¹å‡»Modules ,é€‰æ‹©Paths,é€‰ä¸­Use module compile output path ,æŠŠè·¯å¾„æ”¹æˆåˆšåˆšåˆ›å»ºçš„classesæ–‡ä»¶å¤¹applayåŽå†ç‚¹æ—è¾¹çš„Dependencies,ç‚¹å‡»&quot;+&quot;å·ï¼Œé€‰æ‹©1 JARs or directories ï¼Œé€‰æ‹©ä½ åˆšåˆšåˆ›å»ºçš„libæ–‡ä»¶å¤¹ï¼ŒOKé€‰ä¸­jar Directoryã€‚ç¬¬ä¸‰æ­¥ é¢å¤–é…ç½®ç¬¬å››æ­¥ ç¼–å†™æµ‹è¯•ä»£ç ï¼ˆ1ï¼‰æ”¾ç½®mysql-connector-java-5.1.28-bin.jaråˆ°libç›®å½•é‡Œï¼ˆ2ï¼‰åœ¨srcç›®å½•ä¸‹åˆ›å»ºDBServlet.javaæ–‡ä»¶1234567891011121314151617181920212223242526272829303132333435package com.qcmoke.servlet;import javax.servlet.ServletException;import javax.servlet.annotation.WebServlet;import javax.servlet.http.HttpServlet;import javax.servlet.http.HttpServletRequest;import javax.servlet.http.HttpServletResponse;import java.io.IOException;import java.sql.Connection;import java.sql.DriverManager;@WebServlet(name = "DBServlet",urlPatterns = "/DBServlet")public class DBServlet extends HttpServlet &#123; protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException &#123; request.setCharacterEncoding("utf-8"); response.setCharacterEncoding("utf-8"); try &#123; Class.forName("com.mysql.jdbc.Driver");// æ³¨å†Œ JDBC é©±åŠ¨ Connection conn = DriverManager.getConnection("jdbc:mysql://127.0.0.1:3306/ssm", "root", "123456");// èŽ·å–è¿žæŽ¥ if(conn !=null)&#123; System.out.println("db conn ok !"); response.getWriter().print("db conn success !"); &#125;else&#123; response.getWriter().print("db conn fail !"); &#125; &#125; catch (Exception e) &#123; e.printStackTrace(); response.getWriter().print("db conn fail !"); &#125; &#125; protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException &#123; doPost(request,response); &#125;&#125;ç¬¬å››æ­¥ è¿è¡Œæµ‹è¯•Â¶3ã€åˆ›å»ºmaven javaseå·¥ç¨‹æ­¥éª¤1 è®¾ç½®æœ¬åœ°å®‰è£…å¥½çš„mavenï¼ˆIDEAé»˜è®¤ä¹Ÿæœ‰mavenï¼Œä½†æ˜¯ä¸€èˆ¬å¼€å‘æ—¶è¿˜æ˜¯ä½¿ç”¨è‡ªå·±å®‰è£…é…ç½®çš„mavenï¼‰æ­¥éª¤2 åˆ›å»ºå·¥ç¨‹æ­¥éª¤3 å¯¼å…¥ä¾èµ–1234567&lt;!-- MySql-connector æ•°æ®åº“é©±åŠ¨ --&gt;&lt;!-- https://mvnrepository.com/artifact/mysql/mysql-connector-java --&gt;&lt;dependency&gt; &lt;groupId&gt;mysql&lt;/groupId&gt; &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt; &lt;version&gt;5.1.41&lt;/version&gt;&lt;/dependency&gt;æ­¥éª¤5 ç¼–å†™ä»£ç å¹¶è¿è¡Œæµ‹è¯•1234567891011121314151617181920212223242526package com.qcmoke;import java.sql.Connection;import java.sql.DriverManager;/** * Hello world! * */public class App &#123; public static void main( String[] args ) &#123; try &#123; Class.forName("com.mysql.jdbc.Driver");// æ³¨å†Œ JDBC é©±åŠ¨ Connection conn = DriverManager.getConnection("jdbc:mysql://127.0.0.1:3306/ssm", "root", "123456");// èŽ·å–è¿žæŽ¥ if(conn !=null)&#123; System.out.println("db conn ok !"); &#125;else&#123; System.out.println("db conn fail !"); &#125; &#125; catch (Exception e) &#123; System.out.println("db conn fail !"); &#125; &#125;&#125;Â¶4ã€åˆ›å»ºmaven webå·¥ç¨‹æ­¥éª¤1 è®¾ç½®æœ¬åœ°å®‰è£…å¥½çš„mavenï¼ˆIDEAé»˜è®¤ä¹Ÿæœ‰mavenï¼Œä½†æ˜¯ä¸€èˆ¬å¼€å‘æ—¶è¿˜æ˜¯ä½¿ç”¨è‡ªå·±å®‰è£…é…ç½®çš„mavenï¼‰æ­¥éª¤2 åˆ›å»ºå·¥ç¨‹æ­¥éª¤3 è¡¥å…¨ç›®å½•ç»™ç›®å½•èµ‹äºˆIDEAç›®å½•ç‰¹æ€§ã€‚æ­¥éª¤4 é…ç½®pom.xmlpom.xml1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"&gt; &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt; &lt;groupId&gt;com.qcmoke&lt;/groupId&gt; &lt;artifactId&gt;mavenWeb&lt;/artifactId&gt; &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt; &lt;packaging&gt;war&lt;/packaging&gt; &lt;name&gt;mavenWeb Maven Webapp&lt;/name&gt; &lt;!-- FIXME change it to the project's website --&gt; &lt;url&gt;http://www.example.com&lt;/url&gt; &lt;properties&gt; &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt; &lt;maven.compiler.source&gt;1.7&lt;/maven.compiler.source&gt; &lt;maven.compiler.target&gt;1.7&lt;/maven.compiler.target&gt; &lt;/properties&gt; &lt;dependencies&gt; &lt;dependency&gt; &lt;groupId&gt;junit&lt;/groupId&gt; &lt;artifactId&gt;junit&lt;/artifactId&gt; &lt;version&gt;4.11&lt;/version&gt; &lt;scope&gt;test&lt;/scope&gt; &lt;/dependency&gt; &lt;!-- MySql-connector æ•°æ®åº“é©±åŠ¨ --&gt; &lt;!-- https://mvnrepository.com/artifact/mysql/mysql-connector-java --&gt; &lt;dependency&gt; &lt;groupId&gt;mysql&lt;/groupId&gt; &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt; &lt;version&gt;5.1.41&lt;/version&gt; &lt;/dependency&gt; &lt;!-- https://mvnrepository.com/artifact/javax.servlet/javax.servlet-api --&gt; &lt;dependency&gt; &lt;groupId&gt;javax.servlet&lt;/groupId&gt; &lt;artifactId&gt;javax.servlet-api&lt;/artifactId&gt; &lt;version&gt;3.0.1&lt;/version&gt; &lt;scope&gt;provided&lt;/scope&gt; &lt;/dependency&gt; &lt;/dependencies&gt; &lt;build&gt; &lt;finalName&gt;mavenWeb&lt;/finalName&gt; &lt;plugins&gt; &lt;!-- tomcatæ’ä»¶(éƒ¨ç½²åˆ°tomcatä¸­è¿è¡Œ) åœ¨Goalsä¸­è¾“å…¥ï¼š clean tomcat7:redeploy æˆ– clean tomcat7:runï¼Œç‚¹å‡» Apply ä¿å­˜è®¾ç½® ï¼Œç„¶åŽrun æˆ– debugã€‚ http://localhost:8080/qcmoke/***.html --&gt; &lt;plugin&gt; &lt;groupId&gt;org.apache.tomcat.maven&lt;/groupId&gt; &lt;artifactId&gt;tomcat7-maven-plugin&lt;/artifactId&gt; &lt;version&gt;2.2&lt;/version&gt; &lt;configuration&gt; &lt;uriEncoding&gt;UTF-8&lt;/uriEncoding&gt; &lt;port&gt;8080&lt;/port&gt; &lt;path&gt;/&lt;/path&gt; &lt;/configuration&gt; &lt;/plugin&gt; &lt;/plugins&gt; &lt;/build&gt;&lt;/project&gt;æ­¥éª¤5 ç¼–å†™æµ‹è¯•ä»£ç DBServlet.java12345678910111213141516171819202122232425262728293031package com.qcmoke.servlet;import javax.servlet.annotation.WebServlet;import java.io.IOException;import java.sql.Connection;import java.sql.DriverManager;@WebServlet(name = "DBServlet",urlPatterns = "/DBServlet")public class DBServlet extends javax.servlet.http.HttpServlet &#123; protected void doPost(javax.servlet.http.HttpServletRequest request, javax.servlet.http.HttpServletResponse response) throws javax.servlet.ServletException, IOException &#123; request.setCharacterEncoding("utf-8"); response.setCharacterEncoding("utf-8"); try &#123; Class.forName("com.mysql.jdbc.Driver");// æ³¨å†Œ JDBC é©±åŠ¨ Connection conn = DriverManager.getConnection("jdbc:mysql://127.0.0.1:3306/ssm", "root", "123456");// èŽ·å–è¿žæŽ¥ if(conn !=null)&#123; System.out.println("db conn ok !"); response.getWriter().print("db conn success !"); &#125;else&#123; response.getWriter().print("db conn fail !"); &#125; &#125; catch (Exception e) &#123; e.printStackTrace(); response.getWriter().print("db conn fail !"); &#125; &#125; protected void doGet(javax.servlet.http.HttpServletRequest request, javax.servlet.http.HttpServletResponse response) throws javax.servlet.ServletException, IOException &#123; doPost(request,response); &#125;&#125;æ­¥éª¤6 è¿è¡Œæµ‹è¯•Â¶5ã€ä¼˜åŒ–jvmå‚æ•°é»˜è®¤IDEAç»™çš„JVMå‚æ•°æ¯”è¾ƒä½Žï¼Œæˆ‘ä»¬å¯ä»¥ä¿®æ”¹è¿™äº›å‚æ•°æ¥æå‡IDEAçš„è¿è¡Œé€Ÿåº¦å’Œæ€§èƒ½ã€‚é»˜è®¤ä¸ºï¼šæ ¹æ®ç”µè„‘é…ç½®åšä¿®æ”¹ï¼Œæ¯”å¦‚ç³»ç»Ÿ64ä½ï¼Œå†…å­˜8gã€‚é‚£ä¹ˆé…ç½®ä¸ºä»¥ä¸‹ï¼š123456789101112# custom IntelliJ IDEA VM options-Xms1024m-Xmx2048m-XX:ReservedCodeCacheSize=500m-XX:+UseConcMarkSweepGC-XX:SoftRefLRUPolicyMSPerMB=50-ea-Dsun.io.useCanonCaches=false-Djava.net.preferIPv4Stack=true-XX:+HeapDumpOnOutOfMemoryError-XX:-OmitStackTraceInFastThrowÂ¶6ã€è¿›å…¥ideaè®¾ç½®é¢æ¿ä»Žå¼€å¯é¡µé¢è¿›å…¥é…ç½®ä¸»é¡µï¼ˆå¯¹å…¨å±€èµ·ä½œç”¨ï¼‰å¦‚æžœåœ¨å·¥ä½œåŒºé‡Œï¼Œå¯ä»¥é€šè¿‡Close Projectå›žåˆ°å¼€å¯é¡µé¢å¼€å¯é¡µé¢ï¼šÂ¶7ã€è°ƒè¯•å…ˆè®¾ç½®æ–­ç‚¹ç„¶åŽç‚¹å‡»è°ƒè¯•æŒ‰é’®å¼€å§‹è°ƒè¯•æŒ‰F7ä»Žæ–­ç‚¹å¤„ä¸€è¡Œä¸€è¡Œå¾€ä¸‹ç»§ç»­,ä¼šè¿›å…¥æ–­ç‚¹æ‰€åœ¨çš„å‡½æ•°ä½“é‡Œå…¶ä»–è°ƒç”¨æ–¹æ³•çš„æ–¹æ³•ä½“é‡Œã€‚æŒ‰F8ä»Žæ–­ç‚¹å¤„ä¸€è¡Œä¸€è¡Œå¾€ä¸‹ç»§ç»­ï¼Œä¸ä¼šè¿›å…¥æ–­ç‚¹æ‰€åœ¨çš„å‡½æ•°ä½“é‡Œå…¶ä»–è°ƒç”¨æ–¹æ³•çš„æ–¹æ³•ä½“é‡Œã€‚æŒ‰F9ä»Žå½“å‰æ–­ç‚¹å¤„ç›´æŽ¥è·³åˆ°ä¸‹ä¸€ä¸ªæ–­ç‚¹å¤„æ‰§è¡Œã€‚æŸ¥çœ‹å˜é‡å€¼å˜åŒ–Â¶8ã€è§£å†³å¯åŠ¨åŽç›´æŽ¥è¿›å…¥ä¹‹å‰å·¥ç¨‹çš„é—®é¢˜Â¶9ã€å¸¸ç”¨å¿«æ·é”®å¿«æ·é”®åŠŸèƒ½Ctrl+Shift+Spaceè‡ªåŠ¨è¡¥å…¨ä»£ç Ctrl+Alt+Læ ¼å¼åŒ–ä»£ç alt+enterå¯¼åŒ…Shift+F6é‡å‘½åCtrl+Alt+Vå¯ä»¥å¼•å…¥å˜é‡ã€‚ä¾‹å¦‚ï¼šString string=new String();Ctrl+Oæ— å‚æž„é€ å‡½æ•°Ctrl+Shift+Uå¤§å°å†™è½¬åŒ–Ctrl+Yåˆ é™¤å½“å‰è¡ŒAlt+Insertsç”Ÿæˆget/setç­‰Shift+Enterå‘ä¸‹æ’å…¥æ–°è¡ŒCtrl+Enteråœ¨è¡Œé¦–å‰ä¸Šæ’ä¸€è¡ŒCtrl+Ræ›¿æ¢Ctrl+QæŸ¥çœ‹JavaDocAlt+left/rightåˆ‡æ¢ä»£ç è§†å›¾Alt+Up/Downåœ¨æ–¹æ³•é—´å¿«é€Ÿç§»åŠ¨å®šä½Ctrl+Shift+Eæœ€è¿‘æ›´æ”¹çš„æ–‡ä»¶Ctrl+Alt+Spaceç±»åæˆ–æŽ¥å£åæç¤ºCtrlï¼‹Eå¯ä»¥æ˜¾ç¤ºæœ€è¿‘ç¼–è¾‘çš„æ–‡ä»¶åˆ—è¡¨Ctrlï¼‹Shiftï¼‹Backspaceè·³è½¬åˆ°ä¸Šæ¬¡ç¼–è¾‘çš„åœ°æ–¹Ctrlï¼‹F12æ˜¾ç¤ºå½“å‰æ–‡ä»¶çš„ç»“æž„å‚è€ƒï¼šhttp://idea.lanyus.com/help/help.html]]></content>
      <categories>
        <category>tools</category>
      </categories>
      <tags>
        <tag>tools</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[é€šè¿‡ Certbot å·¥å…·ç”³è¯· Let's Encrypt SSL è¯ä¹¦]]></title>
    <url>%2Ftools%2Fcertbot.html</url>
    <content type="text"><![CDATA[Â¶ä¸€ã€ç®€è¦æ¦‚è¿°Certbot æ˜¯ä¸€ä¸ªå…è´¹ã€å¼€æºã€è‡ªåŠ¨åŒ–çš„ ACME å®¢æˆ·ç«¯å·¥å…·ï¼Œå¯ç”¨äºŽç”³è¯· Letâ€™s Encrypt SSL è¯ä¹¦ã€‚å®ƒå¯ä»¥å¸®åŠ©ç½‘ç«™ç®¡ç†å‘˜è½»æ¾åœ°å®žçŽ° HTTPS ç­‰åŠŸèƒ½ï¼Œæé«˜ç½‘ç«™çš„å®‰å…¨æ€§å’Œå¯é æ€§ã€‚ACME åè®®ï¼šå®šä¹‰äº†å®¢æˆ·ç«¯ï¼ˆé€šå¸¸æ˜¯è¯ä¹¦ç”³è¯·è€…æˆ–æœåŠ¡å™¨ç®¡ç†å‘˜ï¼‰å’Œè¯ä¹¦é¢å‘æœºæž„ä¹‹é—´çš„äº¤äº’è¿‡ç¨‹ã€‚ACME å®¢æˆ·ç«¯ä½¿ç”¨ ACME åè®®ä¸Žè¯ä¹¦é¢å‘æœºæž„çš„ ACME æœåŠ¡ç«¯è¿›è¡Œé€šä¿¡ï¼Œå®žçŽ°è‡ªåŠ¨ç”³è¯·è¯ä¹¦ã€è¯æ˜ŽåŸŸåæ‰€æœ‰æƒã€èŽ·å–è¯ä¹¦ã€ä»¥åŠåœ¨è¯ä¹¦åˆ°æœŸå‰ç»­è®¢è¯ä¹¦ç­‰åŠŸèƒ½ã€‚Letâ€™s Encryptï¼šä¸€ä¸ªå…è´¹çš„è¯ä¹¦é¢å‘æœºæž„ï¼Œæ”¯æŒ ACME åè®®è¿›è¡Œè¯ä¹¦ç”³è¯·å’Œç»´æŠ¤ã€‚Letâ€™s Encrypt SSL è¯ä¹¦ï¼šç”± Letâ€™s Encrypt é¢å‘æœºæž„é¢å‘çš„ SSL è¯ä¹¦ï¼Œä½¿ç”¨äº† SHA-256 ç­¾åç®—æ³•ï¼Œå¹¶æ”¯æŒæœ€æ–°ç‰ˆæœ¬çš„ TLS åè®®ï¼Œå› æ­¤å¯ä»¥æä¾›å¼ºå¤§çš„åŠ å¯†å’Œè®¤è¯ä¿æŠ¤ï¼Œä¿éšœç½‘ç«™å’Œç”¨æˆ·æ•°æ®çš„å®‰å…¨ã€‚åŒæ—¶ï¼ŒLetâ€™s Encrypt è¯ä¹¦çš„æ ¹è¯ä¹¦å·²è¢«æ‰€æœ‰ä¸»æµæµè§ˆå™¨ä¿¡ä»»ï¼Œè¿™æ„å‘³ç€ç”¨æˆ·ä¸éœ€è¦æ‰‹åŠ¨æ·»åŠ ä»»ä½•ä¿¡ä»»æ¡ç›®æˆ– CA è¯ä¹¦åˆ°æµè§ˆå™¨ä¸­ã€‚æç¤ºï¼šCertbot æ˜¯ä½¿ç”¨ Python ç¼–å†™çš„ï¼Œå› æ­¤åœ¨ä½¿ç”¨ä¹‹å‰éœ€è¦ç¡®ä¿ç³»ç»Ÿä¸Šå·²ç»å®‰è£…äº† Python è§£é‡Šå™¨å’Œç›¸å…³ä¾èµ–åº“ï¼ˆä¸€èˆ¬ Linux æœåŠ¡å™¨éƒ½é»˜è®¤å®‰è£…æœ‰ Pythonï¼‰ã€‚å®˜æ–¹æ–‡æ¡£ï¼šhttps://certbot.eff.org/docsÂ¶äºŒã€å®‰è£… certbotÂ¶1. é€šè¿‡ç³»ç»Ÿé»˜è®¤åŒ…ç®¡ç†å™¨å®‰è£…æ—§ç‰ˆ certboté€šè¿‡ç³»ç»Ÿé»˜è®¤åŒ…ç®¡ç†å™¨å®‰è£…çš„ç‰ˆæœ¬é€šå¸¸æ˜¯ certbot v1 çš„æ—§ç‰ˆï¼Œè™½ç„¶ä¸åŒä½¿ç”¨æ²¡æœ‰ä»€ä¹ˆé—®é¢˜ï¼Œä½†æ˜¯åœ¨ä½¿ç”¨ä¸€äº›é«˜çº§åŠŸèƒ½ï¼ˆå¦‚ï¼šDNS æ’ä»¶ï¼‰ç­‰å¯èƒ½ä¼šå‡ºçŽ°ç‰ˆæœ¬ä¸æ”¯æŒçš„é—®é¢˜ã€‚123456789101112131415#aptå®‰è£…certbotapt install -y certbot#yumå®‰è£…certbotyum install -y epel-releaseyum install -y certbot#é€šè¿‡æŸ¥çœ‹certbotç‰ˆæœ¬éªŒè¯å®‰è£…æ˜¯å¦æˆåŠŸcertbot --version##å¸è½½certbotï¼ˆå¦‚éœ€è¦ï¼‰yum remove -y certbot #yumå¸è½½apt remove -y certbot #aptå¸è½½#åˆ é™¤æ®‹ä½™ç›®å½•æˆ–æ–‡ä»¶ï¼ˆåŒ…æ‹¬è¯ä¹¦ï¼‰rm -rf /var/lib/letsencrypt /etc/letsencryptðŸ’â€â™‚ æç¤ºï¼šcertbot-auto æ˜¯è¾ƒæ—§çš„ç‰ˆæœ¬ï¼Œå®˜æ–¹å·²ä¸å†æ”¯æŒã€‚Â¶2. é€šè¿‡ pip åŒ…ç®¡ç†å™¨å®‰è£…æœ€æ–°ç‰ˆ certbot1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950#é€šè¿‡ pip å®‰è£…æœ€æ–°ç‰ˆ certbotï¼Œè¦æ±‚ python 3.6+ï¼Œæ•…éœ€è¦åœ¨ç³»ç»Ÿä¸­å®‰è£…ç‰ˆæœ¬é«˜äºŽ 3.6 çš„ python ç‰ˆæœ¬ã€‚å¯ä»¥å€ŸåŠ© pyenv æ¥å®‰è£…ä»»æ„ç‰ˆæœ¬çš„ pythonã€‚#ï¼ˆ1ï¼‰å®‰è£…ä¾èµ–yum install -y gcc make patch zlib-devel bzip2 bzip2-devel readline-devel sqlite sqlite-devel openssl-devel tk-devel libffi-devel xz-devel#ï¼ˆ2ï¼‰å®‰è£…pyenvwget -O pyenv-2.3.17.tar.gz https://github.com/pyenv/pyenv/archive/refs/tags/v2.3.17.tar.gztar -zxvf pyenv-2.3.17.tar.gzmv pyenv-2.3.17 ~/.pyenv#ï¼ˆ3ï¼‰é…ç½®çŽ¯å¢ƒå˜é‡#æ·»åŠ çŽ¯å¢ƒå˜é‡ã€‚catåŽçš„&gt;&gt;è¡¨ç¤ºè¿½åŠ ï¼Œ&gt;åˆ™è¡¨ç¤ºè¦†ç›–ã€‚&lt;&lt; åŽçš„EOFç”¨å¼•å·å¯ä»¥é¿å…$èµ‹å€¼ï¼Œå¦‚æžœå¸Œæœ›èµ‹å€¼åˆ™ä¸åŠ å¼•å·cat &gt;&gt; ~/.bashrc &lt;&lt; 'EOF'export PYENV_ROOT="$HOME/.pyenv"export PATH="$PYENV_ROOT/bin:$PATH"if command -v pyenv 1&gt;/dev/null 2&gt;&amp;1; then eval "$(pyenv init -)"fiEOF#ï¼ˆ4ï¼‰ä½¿çŽ¯å¢ƒå˜é‡ç”Ÿæ•ˆsource ~/.bashrc#ï¼ˆ5ï¼‰å®‰è£…pythonç‰ˆæœ¬pyenv install 3.7.0#ï¼ˆ6ï¼‰è®¾ç½®å…¨å±€pythonç‰ˆæœ¬ï¼ˆç³»ç»Ÿå…¨å±€çŽ¯å¢ƒä½¿ç”¨çš„ç‰ˆæœ¬ï¼‰pyenv global 3.7.0#ï¼ˆ6ï¼‰å‡çº§æŒ‡å®špythonç‰ˆæœ¬çš„pipç‰ˆæœ¬pip install --upgrade pip#ï¼ˆ7ï¼‰é€šè¿‡æŒ‡å®špythonç‰ˆæœ¬çš„pipå®‰è£…certbotpip install certbot#ï¼ˆ8ï¼‰å®‰è£…æŒ‡å®šç‰ˆæœ¬çš„urllibï¼Œé˜²æ­¢certbotè¿è¡ŒæŠ¥é”™pip install 'urllib3&lt;2.0'#ï¼ˆ9ï¼‰é“¾æŽ¥certbotåˆ°ç³»ç»Ÿ/usr/binç›®å½•é‡Œln -s /root/.pyenv/versions/3.7.0/bin/certbot /usr/bin/certbot#ï¼ˆ10ï¼‰æŸ¥çœ‹certbotç‰ˆæœ¬certbot --version#ï¼ˆ11ï¼‰å‡çº§certbotç‰ˆæœ¬ï¼ˆå¦‚éœ€è¦ï¼‰pip install --upgrade certbot#ï¼ˆ12ï¼‰æ”¹å›žç³»ç»ŸåŽŸæœ¬è‡ªå¸¦çš„pythonç‰ˆæœ¬ï¼ˆå¦‚éœ€è¦ï¼‰pyenv global systemå‚è€ƒï¼šhttps://certbot.eff.org/instructions?ws=nginx&amp;os=pipÂ¶3. é€šè¿‡ snap åŒ…ç®¡ç†å™¨å®‰è£…æœ€æ–°ç‰ˆ certbotæç¤ºï¼šé€šè¿‡ snap åŒ…ç®¡ç†å™¨å¯ä»¥å®‰è£…æœ€æ–°ç‰ˆçš„ certbotï¼Œè¿™ä¹Ÿæ˜¯ certbot å®˜æ–¹æŽ¨èçš„å®‰è£…æ–¹å¼ï¼Œä½†ç›¸å¯¹äºŽç³»ç»Ÿé»˜è®¤åŒ…ç®¡ç†å™¨çš„å®‰è£…æ–¹å¼ï¼Œ snap çš„å®‰è£…åŒ…æ–‡ä»¶å ç”¨æ›´å¤§ï¼Œå¦‚æžœæœåŠ¡å™¨ç£ç›˜ç©ºé—´ä¸å¤Ÿçš„è¯å¹¶ä¸å»ºè®®ä½¿ç”¨ï¼Œå¦å¤–snap çš„ç®¡ç†å‘½ä»¤ä¹Ÿéœ€è¦æœ‰ä¸€å®šçš„å­¦ä¹ æˆæœ¬ï¼Œå…¶å®žç›®å‰ç³»ç»Ÿé»˜è®¤åŒ…ç®¡ç†å™¨å®‰è£…çš„æ—§ç‰ˆ certbot å·²ç»è¶³å¤Ÿæ—¥å¸¸ä½¿ç”¨äº†ï¼Œä¸ä¸€å®šéžè¦ä½¿ç”¨ snapã€‚Â¶å¸è½½æ—§ç‰ˆ certbotï¼ˆå¦‚æœ‰ï¼‰1234#aptå¸è½½apt remove -y certbot#yumå¸è½½yum remove -y certbotÂ¶å®‰è£… snap1234567891011121314151617181920212223242526##ï¼ˆ1ï¼‰å®‰è£…snapd# aptå®‰è£…ï¼ˆæç¤ºï¼šubuntu16.04ä¹‹åŽçš„ç‰ˆæœ¬å·²ç»å†…ç½®äº†snapï¼Œåœ¨debianç³»ç»Ÿä¸Šåˆ™éœ€è¦æ‰‹åŠ¨å®‰è£…ï¼‰apt updateapt install -y snapd# yumå®‰è£…ï¼ˆæ“ä½œå‘½ä»¤ç›¸å¯¹ä¼šå¤šä¸€äº›ï¼‰yum install -y epel-releaseyum install -y snapd##ï¼ˆ2ï¼‰å¯åŠ¨snadçš„å¥—æŽ¥å­—å•å…ƒ# å¯åŠ¨snapdå¥—æŽ¥å­—å•å…ƒï¼ˆæ³¨æ„å¥—æŽ¥å­—å•å…ƒæ˜¯snapd.socketï¼Œè€Œä¸æ˜¯snapd.serviceï¼Œå…¶ä¸­snapd.serviceå¯ç®€å†™ä¸ºsnapdï¼‰systemctl enable --now snapd.socket #ç­‰åŒäºŽ sudo systemctl enable snapd.socket &amp;&amp; sudo systemctl start snapd.socket# æŸ¥çœ‹æ˜¯å¦æˆåŠŸå¯åŠ¨snapdsystemctl status snapd.socket##ï¼ˆ3ï¼‰éœ€è¦æ³¨é”€å¹¶é‡æ–°ç™»å½•ï¼ˆé‡æ–°æ‰“å¼€ç»ˆç«¯å³å¯ï¼‰æˆ–é‡æ–°å¯åŠ¨ç³»ç»Ÿä»¥ç¡®ä¿æ­£ç¡®æ›´æ–°snapçš„è·¯å¾„exit##ï¼ˆ4ï¼‰å®‰è£…snapæ ¸å¿ƒåŒ…# å®‰è£…snapæ ¸å¿ƒåŒ…snap install coresnap refresh core##ï¼ˆ5ï¼‰é…ç½®æ”¯æŒsnapç»å…¸æ¨¡å¼å®‰è£…ï¼ˆä»…yumå®‰è£…snapæ—¶éœ€è¦ï¼‰# è¯´æ˜Žï¼šç”±äºŽsnapç»å…¸æ¨¡å¼å®‰è£…éœ€è¦æ“ä½œ/snapç›®å½•ã€‚é€šè¿‡yumå®‰è£…snapdæ—¶ï¼Œsnapæ‰€å®‰è£…çš„ç»å…¸åŒ…å­˜æ”¾åœ¨/var/lib/snapd/snapç›®å½•ä¸­è€Œéž/snapç›®å½•ï¼Œæ‰€ä»¥éœ€è¦åˆ›å»ºä¸€ä¸ªç¬¦å·é“¾æŽ¥/snapæŒ‡å‘åˆ°/var/lib/snapd/snapï¼Œå¦åˆ™snapåªèƒ½å®‰è£…æ ‡å‡†åŒ…è€Œæ— æ³•å®‰è£…ç»å…¸åŒ…ã€‚è€Œä½¿ç”¨aptå®‰è£…snapdæ—¶ï¼Œsnapæ‰€å®‰è£…çš„ç»å…¸åŒ…å°±å­˜æ”¾åœ¨/snapç›®å½•ä¸­ï¼Œæ•…è€Œä¸éœ€è¦åˆ›å»ºç¬¦å·é“¾æŽ¥ã€‚ln -s /var/lib/snapd/snap /snapsnap å®‰è£…å‚è€ƒï¼šhttps://snapcraft.io/docs/installing-snapdæŠ¥é”™è§£å†³ï¼šï¼ˆ1ï¼‰snap install core æ—¶å¦‚æžœæŠ¥é”™æç¤ºï¼šerror: system does not fully support snapd: open /tmp/syscheck-squashfs-1411954570: no such file or directoryï¼Œåªéœ€é‡å¯ç³»ç»Ÿé‡è¯•å³å¯è§£å†³ã€‚Â¶å®‰è£… certbot123456#é€šè¿‡snapå®‰è£…certbotsnap install --classic certbotln -s /snap/bin/certbot /usr/bin/certbot#é€šè¿‡æŸ¥çœ‹certbotç‰ˆæœ¬éªŒè¯å®‰è£…æ˜¯å¦æˆåŠŸcertbot --versioncertbot å®‰è£…å‚è€ƒï¼šhttps://certbot.eff.orgÂ¶å¸è½½ certbotï¼ˆå¦‚éœ€è¦ï¼‰1234#å¸è½½certbotsnap remove certbot#åˆ é™¤æ®‹ä½™ç›®å½•æˆ–æ–‡ä»¶ï¼ˆåŒ…æ‹¬è¯ä¹¦ï¼‰rm -rf /var/lib/letsencrypt /etc/letsencrypt /usr/bin/certbotÂ¶å¸è½½ snap12345678910111213#å…³é—­snapdå¥—æŽ¥å­—å•å…ƒï¼ˆå¸è½½å‰å…ˆåœæŽ‰snapdå¥—æŽ¥å­—å•å…ƒï¼Œå¦åˆ™å¸è½½å¤±è´¥ï¼‰systemctl stop snapd.socket##å¸è½½snap#1ã€yumå¸è½½yum remove -y snapd#åˆ é™¤æ®‹ä½™ç›®å½•æˆ–æ–‡ä»¶rm -rf /var/lib/snapd /snap ~/snap#2ã€aptå¸è½½apt remove --purge -y snapd #å¦‚æžœä¸åŠ --purgeåˆ™éœ€è¦æ‰‹åŠ¨åˆ é™¤/var/lib/snapdå’Œ/snap#åˆ é™¤æ®‹ä½™ç›®å½•æˆ–æ–‡ä»¶rm -rf ~/snapÂ¶ä¸‰ã€ç”³è¯·ç­¾å‘è¯ä¹¦Â¶1. ç®€è¦æ¦‚è¿°éœ€è¦è¯´æ˜Žçš„æ˜¯ï¼šåœ¨ Certbot ç”³è¯·è¯ä¹¦æ—¶ï¼Œè¯ä¹¦æ˜¯ç”± Letâ€™s Encrypt å®˜æ–¹ ACME æœåŠ¡å™¨ç”Ÿæˆçš„ï¼Œè€Œä¸æ˜¯ç”±æœ¬åœ°æœåŠ¡å™¨ç”Ÿæˆçš„ã€‚Certbot å°†å‘ Letâ€™s Encrypt CAï¼ˆè¯ä¹¦é¢å‘æœºæž„ï¼‰å‘å‡ºç­¾å‘è¯·æ±‚ï¼Œå¹¶å°†éªŒè¯åŸŸåçš„æŽ§åˆ¶æƒã€‚ä¸€æ—¦éªŒè¯é€šè¿‡ï¼ŒLetâ€™s Encrypt å°†å‘ Certbot è¿”å›ž SSL è¯ä¹¦ï¼Œä»¥ä¾¿åœ¨æ‚¨çš„ Web æœåŠ¡å™¨ä¸Šéƒ¨ç½²å’Œä½¿ç”¨ã€‚Â¶2. certbot å¸¸ç”¨çš„é€‰é¡¹å’Œå‚æ•°--webrootï¼šä½¿ç”¨è‡ªåŠ¨ HTTP éªŒè¯æ–¹å¼æ–¹å¼ï¼ˆé»˜è®¤æ¨¡å¼ï¼‰ã€‚åœ¨ .well-known/acme-challenge/ è·¯å¾„ä¸‹åˆ›å»ºä¸€ä¸ªä¸´æ—¶æ–‡ä»¶ï¼Œå¹¶é€šè¿‡ HTTP èŽ·å–è¯¥æ–‡ä»¶æ¥éªŒè¯åŸŸåæ‰€æœ‰æƒã€‚--manualï¼šæ‰‹åŠ¨æ¨¡å¼ï¼Œè¯¥æ¨¡å¼éœ€è¦æ‚¨æ‰‹åŠ¨æ‰§è¡Œä¸€äº›æ­¥éª¤ï¼Œä¾‹å¦‚åœ¨ DNS è®°å½•ä¸­æ·»åŠ  TXT è®°å½•ä»¥éªŒè¯åŸŸåæ‰€æœ‰æƒã€‚--nginxï¼šä½¿ç”¨ Nginx Web æœåŠ¡å™¨æ’ä»¶ã€‚è¯¥æ¨¡å¼å…è®¸ Certbot è‡ªåŠ¨é…ç½® Nginx Web æœåŠ¡å™¨ï¼Œä»¥ä¾¿éªŒè¯åŸŸåæ‰€æœ‰æƒå¹¶éƒ¨ç½²è¯ä¹¦ã€‚--apacheï¼šä½¿ç”¨ Apache Web æœåŠ¡å™¨æ’ä»¶ã€‚è¯¥æ¨¡å¼å…è®¸ Certbot è‡ªåŠ¨é…ç½® Apache Web æœåŠ¡å™¨ï¼Œä»¥ä¾¿éªŒè¯åŸŸåæ‰€æœ‰æƒå¹¶éƒ¨ç½²è¯ä¹¦ã€‚--standaloneï¼šä½¿ç”¨ç‹¬ç«‹ Web æœåŠ¡å™¨æ’ä»¶ã€‚è¯¥æ¨¡å¼å…è®¸ Certbot åœ¨è‡ªå·±çš„ Web æœåŠ¡å™¨ï¼ˆstandaloneï¼‰ä¸Šè¿è¡Œï¼Œä»¥éªŒè¯åŸŸåæ‰€æœ‰æƒå’Œé¢å‘è¯ä¹¦--serverï¼š ACME æœåŠ¡å™¨åœ°å€ã€‚é»˜è®¤ä¸º Letâ€™s Encrypt å®˜æ–¹ ACME æœåŠ¡å™¨åœ°å€ï¼Œå³ï¼šhttps://acme-v02.api.letsencrypt.org/directoryã€‚--domains DOMAINï¼ˆç®€å†™ï¼š-d DOMAINï¼‰ï¼šè¦ç­¾å‘è¯ä¹¦çš„åŸŸåã€‚å¦‚ï¼š-d example.com--stagingï¼šç­¾å‘æµ‹è¯•çŽ¯å¢ƒè¯ä¹¦ã€‚--cert-name CERTNAMEï¼šä¸ºè¯ä¹¦å‘½åã€‚--expandï¼šæ›´æ–°çŽ°æœ‰è¯ä¹¦ä»¥åŒ…æ‹¬æ–°çš„å­åŸŸåã€‚--duplicateï¼šå¤åˆ¶çŽ°æœ‰è¯ä¹¦ã€‚--reinstallï¼šé‡æ–°å®‰è£…çŽ°æœ‰è¯ä¹¦ã€‚--force-renewalï¼šåœ¨æœ‰æ•ˆæœŸå†…å¼ºåˆ¶æ›´æ–°è¯ä¹¦ã€‚--email EMAILï¼ˆç®€å†™ï¼š-m EMAILï¼‰ï¼šè´¦å·é‚®ç®±åœ°å€ã€‚å¯ç”¨äºŽè‡ªåŠ¨æ³¨å†Œ ACME è´¦å·ï¼Œè¿˜å¯ç”¨äºŽè¯ä¹¦åˆ°æœŸå‰ 20 å¤©ã€10 å¤©å’Œ 1 å¤©æ—¶æŽ¥æ”¶åˆ°åˆ°æœŸé€šçŸ¥é‚®ä»¶ã€‚å¦‚ï¼š--email user@example.com--agree-tosï¼šåŒæ„ Letâ€™s Encrypt çš„æœåŠ¡æ¡æ¬¾ï¼Œå¹¶æŽ¥å—ç”± Letâ€™s Encrypt é¢å‘çš„ SSL/TLS è¯ä¹¦ã€‚å¦‚æžœæ‚¨ä¸åŒæ„æœåŠ¡æ¡æ¬¾ï¼Œåˆ™æ— æ³•ä½¿ç”¨ Letâ€™s Encrypt é¢å‘çš„è¯ä¹¦ã€‚--preferred-challenges PREF_CHALLENGESï¼šé¦–é€‰çš„åŸŸåæ‰€æœ‰æƒéªŒè¯ç±»åž‹ã€‚å¦‚ï¼š--preferred-challenges dns-01æ”¯æŒçš„éªŒè¯ç±»åž‹å¦‚ä¸‹ï¼šï¼ˆ1ï¼‰http-01ï¼šé»˜è®¤éªŒè¯æ–¹æ³•ï¼Œå°†å‘å…¬å¼€åœ¨ HTTP ä¸Šè¿è¡Œçš„ Web æœåŠ¡å™¨å‘é€è¯·æ±‚ï¼Œåœ¨ .well-known/acme-challenge/ è·¯å¾„ä¸‹åˆ›å»ºä¸€ä¸ªä¸´æ—¶æ–‡ä»¶ï¼Œå¹¶é€šè¿‡ HTTP èŽ·å–è¯¥æ–‡ä»¶æ¥éªŒè¯æ‚¨æ‹¥æœ‰è¯¥åŸŸåã€‚ï¼ˆ2ï¼‰dns-01ï¼šä½¿ç”¨ DNS è®°å½•éªŒè¯åŸŸåæ‰€æœ‰æƒã€‚æ­¤æ–¹æ³•éœ€è¦æ‚¨æ‰‹åŠ¨æ›´æ–°ç›¸åº”çš„ DNS è®°å½•ã€‚åœ¨ DNS è®°å½•æ›´æ–°åŽï¼ŒLetâ€™s Encrypt å°†ä½¿ç”¨ DNS æŸ¥æ‰¾è¯¥è®°å½•ä»¥éªŒè¯æ‚¨æ‹¥æœ‰è¯¥åŸŸåã€‚ï¼ˆ3ï¼‰tls-sni-01ï¼šå·²å¼ƒç”¨ï¼Œä¸å†ä½¿ç”¨ã€‚åŽŸæœ¬æ˜¯åœ¨ HTTPS è¿žæŽ¥çš„ SNI æ‰©å±•ä¸­å‘é€éªŒè¯ä¿¡æ¯ï¼Œä½†ç”±äºŽå®‰å…¨é—®é¢˜è€Œè¢«å¼ƒç”¨ã€‚ï¼ˆ4ï¼‰tls-alpn-01ï¼šä¸€ç§åŸºäºŽ TLS çš„éªŒè¯æ–¹æ³•ï¼Œå®ƒä½¿ç”¨æ–°çš„ ALPN åè®®æ‰©å±•æ¥å‘é€éªŒè¯ä¿¡æ¯ã€‚ä¸Ž tls-sni-01 ä¸åŒï¼Œå®ƒä¸ä¼šå…¬å¼€ä»»ä½•ä¿¡æ¯ï¼Œå› æ­¤æ›´åŠ å®‰å…¨ã€‚--non-interactiveï¼šç¦ç”¨äº¤äº’å¼æ¨¡å¼ã€‚ï¼ˆé»˜è®¤certonly å‘½ä»¤æ˜¯äº¤äº’å¼çš„ï¼‰--no-eff-emailï¼šç¦æ­¢å‘ç”Ÿç»Ÿè®¡ä¿¡æ¯é‚®ä»¶ç»™EFFã€‚ï¼ˆé»˜è®¤æƒ…å†µä¸‹ï¼ŒCertbot åœ¨ç”Ÿæˆ SSL/TLS è¯ä¹¦æ—¶ä¼šå‘ EFF å‘é€ç”µå­é‚®ä»¶ï¼Œä»¥ä¾¿æ”¶é›†æœ‰å…³è¯ä¹¦ä½¿ç”¨æƒ…å†µçš„ç»Ÿè®¡ä¿¡æ¯ï¼‰--dry-runï¼šæµ‹è¯•è¯ä¹¦é¢å‘æµç¨‹ï¼Œä½†ä¸å®žé™…ç­¾å‘è¯ä¹¦ã€‚-hï¼šèŽ·å–å¸®åŠ©ä¿¡æ¯ã€‚--versionï¼šæŸ¥çœ‹ Certbot ç‰ˆæœ¬å·ã€‚--config-dir CONFIG_DIRï¼šæŒ‡å®šé…ç½®æ–‡ä»¶ç›®å½•ã€‚--work-dir WORK_DIRï¼šæŒ‡å®šå·¥ä½œç›®å½•ã€‚--logs-dir LOGS_DIRï¼šæŒ‡å®šæ—¥å¿—ç›®å½•ã€‚ðŸ’â€â™‚ è¯´æ˜Žï¼šå¦‚æžœä¸æŒ‡å®šé€‰é¡¹å’Œå‚æ•°ï¼Œåˆ™ä¸€äº›å¿…è¦çš„é€‰é¡¹å‚æ•°å°†ä¼šåœ¨äº¤äº’å¼å‘½ä»¤ä¸­è¦æ±‚æŒ‡å®šã€‚Â¶3. Letâ€™s Encrypt è¯ä¹¦ç”³è¯·è¯·æ±‚é™åˆ¶ç”Ÿäº§çŽ¯å¢ƒé™åˆ¶æ¯ä¸ªåŸŸå/è¯ä¹¦æ¯å‘¨æœ€å¤šåªèƒ½ç­¾å‘ 5 æ¬¡æ¯ä¸ª IP åœ°å€æ¯å°æ—¶æœ€å¤šèƒ½æäº¤ 300 ä¸ªè¯ä¹¦ç”³è¯·è¯·æ±‚æµ‹è¯•çŽ¯å¢ƒé™åˆ¶ï¼ˆcertbot ä½¿ç”¨ --staging é€‰é¡¹æ—¶ï¼‰æµ‹è¯•çŽ¯å¢ƒä¸‹é¢å‘çš„è¯ä¹¦æ— æ³•è¢«æµè§ˆå™¨æˆ–æ“ä½œç³»ç»Ÿä¿¡ä»»æµ‹è¯•çŽ¯å¢ƒä¸‹æ¯ä¸ªåŸŸå/è¯ä¹¦æ¯å‘¨æœ€å¤šå¯ç­¾å‘ 50 æ¬¡æµ‹è¯•çŽ¯å¢ƒä¸‹æ¯ä¸ª IP åœ°å€æ¯å°æ—¶æœ€å¤šèƒ½æäº¤ 300 ä¸ªè¯·æ±‚æµ‹è¯•çŽ¯å¢ƒä¸‹æ²¡æœ‰é€šè¿‡ HSTS é¢„è½½çš„åŸŸåï¼ˆç”Ÿäº§çŽ¯å¢ƒæ”¯æŒé€šè¿‡ HSTS é¢„è½½çš„åŸŸåï¼‰Â¶4. ç”³è¯·è¯ä¹¦æ–¹å¼Letâ€™s Encrypt CAï¼ˆACME æœåŠ¡å™¨ï¼‰åˆ¤æ–­æ˜¯å¦å…è®¸ç”¨æˆ·ç”³è¯·åŸŸåå¯¹åº”çš„è¯ä¹¦ï¼Œéœ€è¦éªŒè¯ç”¨æˆ·æ˜¯å¦ä¸ºåŸŸåçš„æ‹¥æœ‰è€…ï¼Œåªæœ‰ç¡®å®šç”¨æˆ·ä¸ºåŸŸåæ‹¥æœ‰è€…æ‰èƒ½ç­¾å‘è¯ä¹¦ã€‚Â¶æ–¹å¼1ï¼šè‡ªåŠ¨ HTTP éªŒè¯æ–¹å¼ç”³è¯·è¯ä¹¦ç®€è¦æ¦‚è¿°ï¼šï¼ˆ1ï¼‰certbotï¼ˆACME å®¢æˆ·ç«¯ï¼‰ä¼šåœ¨ Web æœåŠ¡å™¨çš„æ ¹ç›®å½•ä¸‹è‡ªåŠ¨åˆ›å»ºä¸€ä¸ªç‰¹å®šçš„ä¸´æ—¶æ–‡ä»¶ï¼ˆå³ï¼š.well-known/acme-challenge/&lt;random_token&gt; ï¼‰ï¼Œç„¶åŽ Letâ€™s Encrypt CAï¼ˆACME æœåŠ¡å™¨ï¼‰é€šè¿‡ HTTP åè®®è¯·æ±‚è®¿é—®æ­¤æ–‡ä»¶ï¼ˆè®¿é—®åœ°å€ï¼šhttp://example.com/.well-known/acme-challenge/&lt;random_token&gt;ï¼‰ï¼Œè®¿é—®åˆ°è¯¥æ–‡ä»¶åˆ™è¯´æ˜Žç”¨æˆ·å¯¹åŸŸåå…·æœ‰æŽ§åˆ¶æƒï¼Œé€šè¿‡ç”¨æˆ·çš„æŽ§åˆ¶æƒæƒ…å†µé—´æŽ¥ç¡®å®šç”¨æˆ·æ˜¯å¦æ˜¯åŸŸåçš„æ‹¥æœ‰è€…ã€‚ï¼ˆ2ï¼‰å¦‚æžœéªŒè¯ç¡®å®šç”¨æˆ·æ˜¯åŸŸåçš„æ‹¥æœ‰è€…ï¼Œåˆ™å…è®¸ä¸ºå…¶ç­¾å‘ç”Ÿæˆ SSL è¯ä¹¦ï¼Œå¦åˆ™ç”³è¯·å¤±è´¥ã€‚ï¼ˆ3ï¼‰éªŒè¯å®Œæˆå¹¶ç­¾å‘ç”Ÿæˆè¯ä¹¦åŽï¼Œcertbot ä¼šè‡ªåŠ¨åˆ é™¤ Web æœåŠ¡å™¨æ ¹ç›®å½•ä¸‹çš„.well-knownä¸´æ—¶ç›®å½•æ–‡ä»¶ã€‚Â¶1ï¼‰å•åŸŸåè¯ä¹¦å‡†å¤‡å·¥ä½œï¼šï¼ˆ1ï¼‰éœ€è¦æœ‰ä¸€ä¸ªéœ€è¦ç”³è¯·è¯ä¹¦çš„åŸŸåã€‚å¦‚ï¼šexample.comï¼ˆ2ï¼‰éœ€è¦æœ‰ä¸€å°æ‹¥æœ‰å…¬ç½‘ IP çš„æœåŠ¡å™¨ï¼Œå¹¶ä¸”å…¬ç½‘æœåŠ¡å™¨é‡Œè¿è¡Œæœ‰ Web æœåŠ¡ï¼ˆå¦‚ï¼šnginxï¼Œtomcatç­‰ï¼‰ï¼ˆ3ï¼‰éœ€è¦æå‰åœ¨ DNS æœåŠ¡æä¾›å•†çš„ç®¡ç†åŽå°é‡ŒæŠŠéœ€è¦ç”³è¯·è¯ä¹¦çš„åŸŸåè§£æžåˆ°æœåŠ¡å™¨çš„å…¬ç½‘ IP ä¸Š123456#è‡ªåŠ¨ HTTP éªŒè¯æ–¹å¼ç”³è¯·ç­¾å‘å•åŸŸåè¯ä¹¦ï¼ˆæ¨¡æ¿ï¼‰ï¼ˆå¯åŠ  --staging é€‰é¡¹æ¥ç”³è¯·ç­¾å‘æµ‹è¯•çŽ¯å¢ƒçš„è¯ä¹¦ï¼‰certbot certonly \--agree-tos --no-eff-email \--webroot -w /opt/nginx/html \-m user@example.com \-d example.comðŸ’â€â™‚ è¯´æ˜Žï¼š--webrootï¼šæŒ‡å®š certbot åˆ›å»ºä¸´æ—¶æ–‡ä»¶æ‰€åœ¨çš„ Web æœåŠ¡å™¨æ ¹ç›®å½•è·¯å¾„ã€‚é™¤äº†é€šè¿‡æŒ‡å®š--webrooté€‰é¡¹ä½¿ç”¨è‡ªåŠ¨ HTTP éªŒè¯æ–¹å¼å¤–ï¼Œè¿˜å¯ä»¥ä»…ä½¿ç”¨ --preferred-challenges http-01 (æˆ–éƒ½ä¸æŒ‡å®šï¼Œå› ä¸º http-01 æ˜¯é»˜è®¤å€¼)ï¼Œä½†è¿™ç§æ–¹å¼éœ€è¦æ‰‹åŠ¨åˆ›å»º.well-known/acme-challenge/&lt;random_token&gt; ä¸´æ—¶æ–‡ä»¶ï¼Œå¹¶æ ¹æ®æç¤ºç»™æ–‡ä»¶å†™å…¥å†…å®¹ï¼Œæ˜Žæ˜¾ä¼šæ¯”è¾ƒéº»çƒ¦ï¼Œæ•…ä¸æŽ¨èã€‚Â¶2ï¼‰å¤šåŸŸåè¯ä¹¦ï¼ˆæŽ¨èï¼‰å‡†å¤‡å·¥ä½œï¼šï¼ˆ1ï¼‰éœ€è¦æœ‰å¤šä¸ªéœ€è¦ç”³è¯·è¯ä¹¦çš„åŸŸåã€‚å¦‚ä¸‹ï¼šexample.comwww.example.comï¼ˆ2ï¼‰éœ€è¦æœ‰ä¸€å°æ‹¥æœ‰å…¬ç½‘ IP çš„æœåŠ¡å™¨ï¼Œå¹¶ä¸”å…¬ç½‘æœåŠ¡å™¨é‡Œè¿è¡Œæœ‰ Web æœåŠ¡ï¼ˆå¦‚ï¼šnginxï¼Œtomcatç­‰ï¼‰ã€‚ï¼ˆ3ï¼‰éœ€è¦æå‰åœ¨ DNS æœåŠ¡æä¾›å•†çš„ç®¡ç†åŽå°é‡ŒæŠŠæ‰€æœ‰éœ€è¦ç”³è¯·è¯ä¹¦çš„åŸŸåè§£æžåˆ°åˆ°æœåŠ¡å™¨çš„å…¬ç½‘ IPä¸Šã€‚å¤šåŸŸåè¯ä¹¦å¯ä»¥é€šè¿‡ç±»ä¼¼ -d example.com -d www.example.com çš„æŒ‡å®šæ–¹å¼ç”³è¯·ç­¾å‘ã€‚1234567#è‡ªåŠ¨ HTTP éªŒè¯æ–¹å¼ç”³è¯·ç­¾å‘å¤šåŸŸåè¯ä¹¦ï¼ˆæ¨¡æ¿ï¼‰ï¼ˆå¯åŠ  --staging é€‰é¡¹æ¥ç”³è¯·ç­¾å‘æµ‹è¯•çŽ¯å¢ƒçš„è¯ä¹¦ï¼‰certbot certonly \--agree-tos --no-eff-email \--webroot -w /opt/nginx/html \-m user@example.com \-d example.com \-d www.example.comè¯´æ˜Žï¼šå¤šåŸŸåè¯ä¹¦å¦‚æžœä¸æŒ‡å®šåç§°ï¼Œå°†ä¼šä»¥ç¬¬ä¸€ä¸ªåŸŸåä½œä¸ºè¯ä¹¦åç§°ã€‚Letâ€™s Encrypt CAï¼ˆACME æœåŠ¡å™¨ï¼‰ä¼šæ ¹æ®æŒ‡å®šçš„å¤šä¸ªåŸŸåä¾æ¬¡å‘èµ· HTTP è¯·æ±‚è®¿é—® Web æœåŠ¡å™¨æ ¹ç›®å½•ä¸‹çš„ä¸´æ—¶æ–‡ä»¶ä»¥ç¡®å®šç”³è¯·ç”¨æˆ·å¯¹æ¯ä¸ªåŸŸåçš„æ‰€æœ‰æƒã€‚æ³¨æ„ï¼šå¤šåŸŸåè¯ä¹¦æ˜¯ä¸€ä¸ª SSL è¯ä¹¦ï¼Œè¯¥è¯ä¹¦å¯ä»¥åŒ…å«å¤šä¸ªåŸŸåçš„ä¿¡æ¯ï¼Œæ•…ä¸€ä¸ªè¯ä¹¦å¯ä»¥åŒæ—¶ç”¨äºŽå¤šä¸ªåŸŸåçš„ SSL éªŒè¯ã€‚Â¶3ï¼‰é€šé…ç¬¦åŸŸåè¯ä¹¦ï¼ˆä¸æ”¯æŒï¼‰ä½¿ç”¨è‡ªåŠ¨ HTTP éªŒè¯æ–¹å¼ä¸æ”¯æŒé€šé…ç¬¦åŸŸåè¯ä¹¦ç”³è¯·ï¼ŒLetâ€™s Encrypt åªå…è®¸ä½¿ç”¨ DNS-01 éªŒè¯æ¨¡å¼æ¥èŽ·å–é€šé…ç¬¦åŸŸåè¯ä¹¦ã€‚ðŸ’â€â™‚ å…³äºŽâ€œä½¿ç”¨è‡ªåŠ¨ HTTP éªŒè¯æ–¹å¼ä¸æ”¯æŒç”³è¯·é€šé…ç¬¦åŸŸåè¯ä¹¦â€çš„è¯´æ˜Žï¼šç”³è¯·é€šé…ç¬¦åŸŸåï¼ˆå¦‚ï¼š*.example.comï¼‰è¯ä¹¦æ—¶ï¼ŒLetâ€™s Encrypt CAï¼ˆACME æœåŠ¡å™¨ï¼‰éœ€è¦éªŒè¯ç”¨æˆ·æ˜¯å¦ä¸ºé€šé…ç¬¦åŸŸåçš„çˆ¶çº§åŸŸåï¼ˆå¦‚ï¼šexample.comï¼‰çš„æ‹¥æœ‰è€…ï¼Œåªæœ‰ç¡®å®šç”¨æˆ·ä¸ºåŸŸåæ‹¥æœ‰è€…æ‰èƒ½ç­¾å‘è¯ä¹¦ã€‚ä½¿ç”¨è‡ªåŠ¨ HTTP éªŒè¯æ–¹å¼éªŒè¯ç”¨æˆ·æ˜¯å¦ä¸ºåŸŸåçš„æ‹¥æœ‰è€…æ—¶ï¼ŒACME å®¢æˆ·ç«¯ä¼šåœ¨ Web æœåŠ¡å™¨ä¸Šæ”¾ç½®ä¸€ä¸ªç‰¹å®šçš„ä¸´æ—¶æ–‡ä»¶ï¼ŒACME æœåŠ¡å™¨é€šè¿‡ HTTP åè®®è¯·æ±‚è®¿é—®æ­¤æ–‡ä»¶æ˜¯å¦å­˜åœ¨æ¥è¯æ˜Žç”¨æˆ·å¯¹è¯¥åŸŸåçš„æŽ§åˆ¶æƒï¼Œå†é€šè¿‡åŸŸåæŽ§åˆ¶æƒéªŒè¯ç»“æžœæ¥é—´æŽ¥ç¡®å®šç”¨æˆ·æ˜¯å¦æ˜¯åŸŸåçš„æ‹¥æœ‰è€…ï¼Œç”±äºŽå…¶éªŒè¯æ˜¯é—´æŽ¥çš„ï¼Œä¸èƒ½ç›´æŽ¥ç¡®å®šç”¨æˆ·å°±æ˜¯åŸŸåçš„æ‹¥æœ‰è€…ï¼Œæ‰€ä»¥ä½¿ç”¨è‡ªåŠ¨ HTTP éªŒè¯æ–¹å¼ä¸æ”¯æŒç”³è¯·é€šé…ç¬¦åŸŸåè¯ä¹¦ã€‚è€Œä½¿ç”¨ DNS éªŒè¯æ¨¡å¼éªŒè¯ç”¨æˆ·æ˜¯å¦æ˜¯åŸŸåçš„æ‹¥æœ‰è€…æ˜¯å¯ä»¥ç›´æŽ¥ç¡®å®šçš„ï¼Œå› ä¸ºæ‹¥æœ‰ DNS åŸŸåè§£æžæƒé™çš„ç”¨æˆ·é‚£è‚¯å®šå¯ä»¥ç†è§£ä¸ºåŸŸåçš„æ‹¥æœ‰è€…ã€‚æ‰€ä»¥ä½¿ç”¨ DNS éªŒè¯æ¨¡å¼æ”¯æŒç”³è¯·é€šé…ç¬¦åŸŸåè¯ä¹¦ã€‚å¦‚ä¸‹æµ‹è¯•åœ¨è‡ªåŠ¨ HTTP éªŒè¯æ–¹å¼ä¸‹ç”³è¯·é€šé…ç¬¦åŸŸåè¯ä¹¦ä¼šæç¤ºä¸æ”¯æŒã€‚12345678910111213141516$ certbot certonly \--staging \--agree-tos --no-eff-email \--webroot -w /opt/nginx/html \-m user@example.com \-d example.com \-d *.example.com#å¦‚ä¸‹æ˜¯ç”³è¯·å¤±è´¥æç¤ºå†…å®¹ï¼šSaving debug log to /var/log/letsencrypt/letsencrypt.logPlugins selected: Authenticator webroot, Installer NoneStarting new HTTPS connection (1): acme-staging-v02.api.letsencrypt.orgRequesting a certificate for example.com and *.example.comPerforming the following challenges:Client with the currently selected authenticator does not support any combination of challenges that will satisfy the CA. You may need to use an authenticator plugin that can do challenges over DNS.Client with the currently selected authenticator does not support any combination of challenges that will satisfy the CA. You may need to use an authenticator plugin that can do challenges over DNS.Â¶4ï¼‰Web æœåŠ¡å™¨é…ç½®æ³¨æ„äº‹é¡¹å¯¹äºŽè‡ªåŠ¨ HTTP éªŒè¯æ–¹å¼è¿›è¡Œè¯ä¹¦ç”³è¯·çš„æƒ…å†µä¸‹ï¼Œå¦‚æžœè¿™ä¸ªåŸŸåå¯¹åº” 80 ç«¯å£åšäº†é‡å®šå‘ã€åå‘ä»£ç†ç­‰é…ç½®å¯¼è‡´ Letâ€™s Encrypt CAï¼ˆACME æœåŠ¡å™¨ï¼‰æ— æ³•èŽ·å–.well-known/acme-challengeç›®å½•ä¸‹çš„ä¸´æ—¶æ–‡ä»¶ï¼Œé‚£ä¹ˆä¼šå¯¼è‡´è‡ªåŠ¨ç»­æœŸå¤±è´¥ã€‚æ‰€ä»¥éœ€è¦æ³¨æ„å¯¹äºŽ /.well-known/acme-challenge/ è¿™ä¸ªè®¿é—®è·¯å¾„ï¼ˆè®¿é—®åœ°å€ï¼šhttp://example.com/.well-known/acme-challenge/&lt;random_token&gt;ï¼‰éœ€è¦ç¡®ä¿ä¸€å®šèƒ½å¤Ÿè®¿é—®åˆ°ä¸´æ—¶æ–‡ä»¶ï¼Œåœ¨åŸŸåçš„ 80 ç«¯å£é…ç½®é‡Œæ·»åŠ å¦‚ä¸‹é…ç½®ï¼ˆä»¥ Nginx ä¸ºä¾‹ï¼‰ï¼š1234# certbot è‡ªåŠ¨ HTTP éªŒè¯æ–¹å¼ç”³è¯·è¯ä¹¦ï¼Œä¸´æ—¶æ–‡ä»¶è®¿é—®éªŒè¯é…ç½®location /.well-known/acme-challenge &#123; root /opt/nginx/html; # è¯¥è·¯å¾„åº”è¯¥ä¸ºcertbot certonlyå‘½ä»¤ç”³è¯·è¯ä¹¦æ—¶ --webroot -w æŒ‡å®šçš„è·¯å¾„å‚æ•°ã€‚&#125;ç¤ºä¾‹ï¼š12345678910111213server &#123; listen 80 default_server; listen [::]:80 default_server; # certbot è‡ªåŠ¨ HTTP éªŒè¯æ–¹å¼ç”³è¯·è¯ä¹¦ï¼Œä¸´æ—¶æ–‡ä»¶è®¿é—®éªŒè¯é…ç½® location /.well-known/acme-challenge &#123; root /opt/nginx/html; # è¯¥è·¯å¾„åº”è¯¥ä¸ºcertbot certonlyå‘½ä»¤ç”³è¯·è¯ä¹¦æ—¶ --webroot -w æŒ‡å®šçš„è·¯å¾„å‚æ•°ã€‚ &#125; location / &#123; return 301 https://$host$request_uri; &#125;&#125;æç¤ºï¼šåªæœ‰åœ¨è‡ªåŠ¨ HTTP éªŒè¯æ–¹å¼ç”³è¯·åŸŸåè¯ä¹¦æ‰éœ€è¦è¯¥é…ç½®ã€‚ä¸€èˆ¬å®‰è£…äº† SSL ä»¥åŽå¾ˆå¤šç”¨æˆ·é€‰æ‹©å°† http è·³è½¬åˆ° httpsï¼Œå¯ä»¥é€šè¿‡é…ç½®default_serverï¼Œè¡¨ç¤ºä½œä¸ºé»˜è®¤æœåŠ¡å™¨é…ç½®ï¼Œå³å½“ Nginx æŽ¥æ”¶åˆ°è¯·æ±‚æ—¶ï¼Œå¦‚æžœè¯·æ±‚çš„åŸŸåä¸ŽæœåŠ¡å™¨å—çš„ç›‘å¬åœ°å€ï¼ˆlistenï¼‰ä¸­çš„åŸŸåéƒ½ä¸åŒ¹é…æ—¶ï¼ŒNginx å°†ä¼šé€‰æ‹©é…ç½®äº† default_server çš„æœåŠ¡å™¨å—ä½œä¸ºé»˜è®¤çš„æœåŠ¡å™¨å—è¿›è¡Œå¤„ç†ã€‚æ¯”å¦‚è¿›è¡Œé‡å®šå‘åˆ° https åœ°å€å¤„ç†ï¼Œè¿™æ ·åšå°±å¯ä»¥è®©ä¸€å¤„é…ç½®å°±èƒ½åŒæ—¶æ”¯æŒå¤šä¸ªåŸŸåè®¿é—® http è¯·æ±‚æ—¶éƒ½è‡ªåŠ¨è·³è½¬åˆ° httpsã€‚Â¶æ–¹å¼2ï¼šæ‰‹åŠ¨ DNS éªŒè¯æ–¹å¼ç”³è¯·è¯ä¹¦ç®€è¦æ¦‚è¿°ï¼šï¼ˆ1ï¼‰certbotï¼ˆACME å®¢æˆ·ç«¯ï¼‰ä¼šç”Ÿæˆä¸€ä¸²éšæœºå­—ç¬¦ä¸²ï¼Œå¹¶è¦æ±‚ç”¨æˆ·å°†è¿™ä¸ªå­—ç¬¦ä¸²ä½œä¸ºåŸŸåçš„ TXT è®°å½•å€¼è®¾ç½®åˆ°DNSåŸŸåæ‰˜ç®¡å¹³å°çš„å¯¹åº”åŸŸåè§£æžè®¾ç½®é‡Œã€‚ç­‰ç”¨æˆ·è®¾ç½®å®ŒæˆåŽï¼Œcertbot å°†ä¼šè¯·æ±‚åŸŸååœ°å€ï¼Œé€šè¿‡åˆ¤æ–­æ˜¯å¦èƒ½èŽ·å–æœ‰æ•ˆä¸”ä¸Žç”Ÿæˆå­—ç¬¦ä¸²ç›¸ç­‰çš„è®°å½•å€¼æ¥ç¡®å®šç”¨æˆ·æ˜¯å¦æ˜¯åŸŸåçš„æ‹¥æœ‰è€…ã€‚è¿™ä¸ªè¿‡ç¨‹ä¸­æ·»åŠ  TXT è®°å½•æƒ…å†µå¦‚ä¸‹ï¼šè®°å½•ç±»åž‹ï¼šTXTä¸»æœºè®°å½•ï¼š_acme-challenge.example.comè®°å½•å€¼ï¼š certbot å·¥å…·ç”Ÿæˆçš„éšæœºå­—ç¬¦ä¸²ï¼ˆå¦‚ï¼švrZwcxxxxxx5k42XUr025UWRNl4ï¼‰ï¼ˆ2ï¼‰å¦‚æžœéªŒè¯ç¡®å®šç”¨æˆ·æ˜¯åŸŸåçš„æ‹¥æœ‰è€…ï¼Œåˆ™å…è®¸ä¸ºå…¶ç­¾å‘ç”Ÿæˆ SSL è¯ä¹¦ï¼Œå¦åˆ™ç”³è¯·å¤±è´¥ã€‚è¯´æ˜Žï¼šæ‰‹åŠ¨ DNS åŸŸåéªŒè¯å³éœ€è¦é€šè¿‡åœ¨ DNS æœåŠ¡å™¨æ‰‹åŠ¨æ·»åŠ  TXT è®°å½•æ¥ä½¿è®© certbot ç¡®å®šç”¨æˆ·å¯¹åŸŸåçš„æŒæœ‰æƒã€‚Â¶1ï¼‰å•åŸŸåè¯ä¹¦å‡†å¤‡å·¥ä½œï¼šï¼ˆ1ï¼‰éœ€è¦æœ‰ä¸€å°èƒ½è®¿é—®äº’è”ç½‘çš„ä¸»æœºï¼ˆå¯ä¸ºå†…ç½‘ä¸»æœºï¼‰ã€‚ï¼ˆ2ï¼‰éœ€è¦æœ‰ä¸€ä¸ªéœ€è¦ç”³è¯·è¯ä¹¦çš„åŸŸåã€‚å¦‚ï¼šexample.comï¼ˆ3ï¼‰éœ€è¦åœ¨ DNS æœåŠ¡æä¾›å•†çš„ç®¡ç†åŽå°é‡Œæ·»åŠ åŸŸåçš„ TXT è®°å½•ã€‚å¦‚ä¸‹ï¼š_acme-challenge.example.com - &gt; vrZwcxxxxxx5k42XUr025UWRNl4æç¤ºï¼šTXT è®°å½•å€¼ç”±ä¸‹æ–¹æ‰§è¡Œcertbotå‘½ä»¤èŽ·å¾—ã€‚123456#DNS éªŒè¯æ¨¡å¼ç”³è¯·ç­¾å‘å•åŸŸåè¯ä¹¦ï¼ˆæ¨¡æ¿ï¼‰ï¼ˆå¯åŠ  --staging é€‰é¡¹æ¥ç”³è¯·ç­¾å‘æµ‹è¯•çŽ¯å¢ƒçš„è¯ä¹¦ï¼‰certbot certonly \--manual --preferred-challenges dns-01 \--agree-tos --no-eff-email \-m user@example.com \-d example.comå½“ç”³è¯·å®ŒæˆåŽå³åœ¨ DNS æœåŠ¡æä¾›å•†çš„ç®¡ç†åŽå°åˆ é™¤æŽ‰è¿™ä¸ªä¸´æ—¶çš„ TXT è®°å½•ã€‚Â¶2ï¼‰å¤šåŸŸåè¯ä¹¦å‡†å¤‡å·¥ä½œï¼šï¼ˆ1ï¼‰éœ€è¦æœ‰ä¸€å°èƒ½è®¿é—®äº’è”ç½‘çš„ä¸»æœºï¼ˆå¯ä¸ºå†…ç½‘ä¸»æœºï¼‰ã€‚ï¼ˆ2ï¼‰éœ€è¦å‡†å¤‡å¤šä¸ªéœ€è¦ç”³è¯·è¯ä¹¦çš„åŸŸåã€‚å¦‚ä¸‹ï¼šexample.comwww.example.comï¼ˆ3ï¼‰éœ€è¦åœ¨ DNS æœåŠ¡æä¾›å•†çš„ç®¡ç†åŽå°é‡Œä¸ºæ¯ä¸ªåŸŸåæ·»åŠ  TXT è®°å½•ã€‚å¦‚ä¸‹ï¼š_acme-challenge.example.com - &gt; vrZwcxxxxxx5k42XUr025UWRNl4_acme-challenge.www.example.com - &gt; fr5wcxxxxxx7ko2PUr025UWRGo5æç¤ºï¼šTXT è®°å½•å€¼ç”±ä¸‹æ–¹æ‰§è¡Œcertbotå‘½ä»¤èŽ·å¾—ã€‚1234567#DNS éªŒè¯æ¨¡å¼ç”³è¯·ç­¾å‘å¤šåŸŸåè¯ä¹¦ï¼ˆæ¨¡æ¿ï¼‰ï¼ˆå¯åŠ  --staging é€‰é¡¹æ¥ç”³è¯·ç­¾å‘æµ‹è¯•çŽ¯å¢ƒçš„è¯ä¹¦ï¼‰certbot certonly \--manual --preferred-challenges dns-01 \--agree-tos --no-eff-email \-m user@example.com \-d example.com \-d www.example.comå¤šåŸŸåè¯ä¹¦å¯ä»¥é€šè¿‡ç±»ä¼¼ -d example.com -d www.example.com çš„æŒ‡å®šæ–¹å¼ç”³è¯·ç­¾å‘ã€‚å¤šåŸŸåè¯ä¹¦ç”³è¯·è¿‡ç¨‹ä¸­ï¼Œéœ€è¦ç»™æ¯ä¸ªåŸŸåæ·»åŠ  TXT è®°å½•ï¼ŒLetâ€™s Encrypt CAï¼ˆACME æœåŠ¡å™¨ï¼‰ä¼šä¾æ¬¡æ ¡éªŒæ¯ä¸ªåŸŸåçš„ TXT è®°å½•ä»¥ç¡®å®šæ¯ä¸ªåŸŸåçš„æ‰€æœ‰æƒã€‚Â¶3ï¼‰é€šé…ç¬¦åŸŸåè¯ä¹¦å‡†å¤‡å·¥ä½œï¼šï¼ˆ1ï¼‰éœ€è¦æœ‰ä¸€å°èƒ½è®¿é—®äº’è”ç½‘çš„ä¸»æœºï¼ˆå¯ä¸ºå†…ç½‘ä¸»æœºï¼‰ã€‚ï¼ˆ2ï¼‰éœ€è¦æœ‰ä¸€ä¸ªéœ€è¦ç”³è¯·è¯ä¹¦çš„åŸŸåã€‚å¦‚ï¼šexample.comï¼ˆ3ï¼‰éœ€è¦åœ¨ DNS æœåŠ¡æä¾›å•†çš„ç®¡ç†åŽå°é‡Œæ·»åŠ åŸŸåçš„ TXT è®°å½•ã€‚å¦‚ä¸‹ï¼š_acme-challenge.example.com - &gt; vrZwcxxxxxx5k42XUr025UWRNl4æç¤ºï¼šTXT è®°å½•å€¼ç”±ä¸‹æ–¹æ‰§è¡Œcertbotå‘½ä»¤èŽ·å¾—ã€‚1234567#DNS éªŒè¯æ¨¡å¼ç”³è¯·ç­¾å‘é€šé…ç¬¦è¯ä¹¦ï¼ˆæ¨¡æ¿ï¼‰ï¼ˆå¯åŠ  --staging é€‰é¡¹æ¥ç”³è¯·ç­¾å‘æµ‹è¯•çŽ¯å¢ƒçš„è¯ä¹¦ï¼‰certbot certonly \--manual --preferred-challenges dns-01 \--agree-tos --no-eff-email \-m user@example.com \-d example.com \-d *.example.comDNS-01 éªŒè¯æ¨¡å¼æ˜¯æ”¯æŒé€šé…ç¬¦åŸŸåè¯ä¹¦ç”³è¯·çš„ã€‚é€šé…ç¬¦åŸŸåè¯ä¹¦å¯ä»¥é€šè¿‡ç±»ä¼¼-d *.example.comçš„æŒ‡å®šæ–¹å¼æ¥ç”³è¯·ç­¾å‘ã€‚é€šé…ç¬¦åŸŸåè¯ä¹¦ç”³è¯·è¿‡ç¨‹ä¸­ï¼Œå¯¹äºŽé€šé…ç¬¦åŸŸåï¼Œåªéœ€è¦ç»™é™¤åŽ»é€šé…ç¬¦åŽå‰©ä¸‹çš„åŸŸåæ·»åŠ ä¸€æ¡ TXT è®°å½•å³å¯å®ŒæˆéªŒè¯ã€‚è¿™ç§éªŒè¯æ–¹å¼ä¸éœ€è¦ä¸ºé€šé…ç¬¦ä¸­çš„æ¯ä¸ªå­åŸŸåæ·»åŠ è®°å½•ï¼Œè¿™ä¹Ÿæ˜¯ DNS-01 éªŒè¯æ¨¡å¼æ¯” HTTP-01 æ›´åŠ çµæ´»å’Œå®‰å…¨çš„é‡è¦åŽŸå› ã€‚é€šå¸¸åšä¸‰çº§é€šé…ç¬¦åŸŸåè¯ä¹¦æ—¶ï¼Œä¸ºäº†æ”¯æŒå…¶çˆ¶çº§åŸŸåï¼Œç”³è¯·è¯ä¹¦æ—¶éƒ½ä¼šåŠ ä¸Šå…¶çˆ¶çº§åŸŸåï¼ˆå³äºŒçº§åŸŸåï¼‰ï¼Œå¦‚ï¼š-d example.comã€‚*.example.comè¡¨ç¤ºçš„é€šé…ç¬¦åŸŸåè¯ä¹¦è¡¨ç¤ºåªæ”¯æŒä¸‰çº§åŸŸåè¯ä¹¦ï¼ˆå¦‚ï¼šwww.example.comã€blog.example.comã€mail.example.com ç­‰ï¼‰ï¼Œä½†è¿™ä¸ªé€šé…ç¬¦ä¸æ”¯æŒå…¶çˆ¶çº§åŸŸåï¼ˆå¦‚ï¼šexample.comï¼‰ï¼Œä¹Ÿä¸æ”¯æŒå››çº§åŸŸåï¼ˆå¦‚ï¼šdev.www.example.comï¼‰Â¶å››ã€åˆ—å‡ºæ‹¥æœ‰çš„è¯ä¹¦ä¿¡æ¯12345#åˆ—å‡ºæ‹¥æœ‰çš„è¯ä¹¦åŠå…¶æœ‰æ•ˆæœŸç­‰ä¿¡æ¯certbot certificates#æŸ¥çœ‹è¯ä¹¦æœ‰æ•ˆæœŸopenssl x509 -noout -dates -in cert.pemÂ¶äº”ã€é…ç½®ä½¿ç”¨è¯ä¹¦certbot ç”³è¯·ç­¾å‘çš„è¯ä¹¦é»˜è®¤å­˜å‚¨åœ¨ /etc/letsencrypt/live/example.com å’Œ /etc/letsencrypt/archive/example.com ç›®å½•ä¸‹ã€‚/etc/letsencrypt/live/example.com ç›®å½•ï¼šåŒ…å«å½“å‰ä½¿ç”¨çš„ SSL/TLS è¯ä¹¦çš„ç¬¦å·é“¾æŽ¥ï¼ŒæŒ‡å‘ /etc/letsencrypt/archive ç›®å½•ä¸­ç›¸åº”çš„è¯ä¹¦æ–‡ä»¶ã€‚/etc/letsencrypt/archive/example.com ç›®å½•ï¼šåŒ…å«æŒ‰åŸŸåå’Œæ—¶é—´æˆ³å‘½åçš„ SSL/TLS è¯ä¹¦æ–‡ä»¶ã€‚ä½¿ç”¨ certbot ç”³è¯·ç­¾å‘è¯ä¹¦æ—¶ï¼Œä¼šå¾—åˆ°ä»¥ä¸‹å‡ ä¸ªæ–‡ä»¶ï¼šæœåŠ¡ç«¯è¯ä¹¦ (cert.pem)ï¼šè¯¥æ–‡ä»¶ä¸»è¦åŒ…å«æœ‰åŸŸåå’Œå…¬é’¥ï¼Œç”±è¯ä¹¦é¢å‘æœºæž„ï¼ˆCAï¼‰ç­¾å‘ï¼Œç”¨äºŽå®¢æˆ·ç«¯éªŒè¯æœåŠ¡å™¨ä¸ŠåŸŸåçš„èº«ä»½ã€‚ä¸­é—´è¯ä¹¦ (chain.pem)ï¼šè¯¥æ–‡ä»¶åŒ…å« CA çš„è¯ä¹¦é“¾ï¼Œå…¶ä¸­å¯èƒ½åŒ…å«ä¸€ä¸ªæˆ–å¤šä¸ªä¸­é—´è¯ä¹¦å’Œæ ¹è¯ä¹¦ã€‚ä¸­é—´è¯ä¹¦ç”± CA ç­¾å‘ï¼Œç”¨äºŽå°† CA æ ¹è¯ä¹¦å’ŒæœåŠ¡ç«¯è¯ä¹¦è¿žæŽ¥èµ·æ¥ï¼Œä»¥èƒ½å¤Ÿä½¿å®¢æˆ·ç«¯éªŒè¯æœåŠ¡ç«¯è¯ä¹¦çš„çœŸå®žæ€§ã€‚å…¨é“¾è¯ä¹¦ (fullchain.pem)ï¼šä¹Ÿç§°è¯ä¹¦é“¾æ–‡ä»¶ï¼Œè¯¥æ–‡ä»¶åŒ…å«äº†æœåŠ¡ç«¯è¯ä¹¦ä»¥åŠæ‰€æœ‰ä¸­é—´è¯ä¹¦å’Œæ ¹è¯ä¹¦ï¼ŒåŒ…å«äº†å®Œæ•´çš„ SSL è¯ä¹¦é“¾ã€‚ç”¨äºŽå®¢æˆ·ç«¯éªŒè¯æœåŠ¡ç«¯è¯ä¹¦çš„çœŸå®žæ€§ã€‚ç§é’¥æ–‡ä»¶ (privkey.pem)ï¼šè¯¥æ–‡ä»¶åŒ…å«ç§é’¥å†…å®¹ã€‚ç”¨äºŽè§£å¯†è¯·æ±‚çš„æ•°æ®ä»¥åŠåŠ å¯†å“åº”çš„æ•°æ®ã€‚è¯ä¹¦çš„å®šä¹‰ï¼šè¯ä¹¦æ˜¯ä¸€ç§ç”¨äºŽéªŒè¯èº«ä»½å’ŒåŠ å¯†é€šä¿¡çš„ç”µå­æ–‡ä»¶ã€‚é€šå¸¸åŒ…å«äº†èº«ä»½ä¿¡æ¯ã€å…¬é’¥ã€æœ‰æ•ˆæœŸé™ã€é¢å‘æœºæž„ä¿¡æ¯ç­‰å†…å®¹ã€‚ï¼ˆæ³¨æ„ï¼šä¸€èˆ¬è¯ä¹¦éƒ½æ˜¯ä¸åŒ…å«ç§é’¥å†…å®¹çš„ï¼‰å¸¸è§çš„ Web æœåŠ¡å™¨è½¯ä»¶æœ‰ nginxã€apacheã€tomcatç­‰ã€‚åœ¨è¿™äº› Web æœåŠ¡å™¨è½¯ä»¶ä¸­é…ç½® SSL è¯ä¹¦çš„æ–¹å¼ä¸ç»ç›¸åŒï¼Œä½†å®ƒä»¬éƒ½æ˜¯æ”¯æŒä½¿ç”¨ Letâ€™s Encrypt SSL è¯ä¹¦çš„ã€‚nginx é…ç½® SSL è¯ä¹¦å¯å‚è€ƒã€Šnginxå­¦ä¹ ç¬”è®°ã€‹apacheé…ç½® SSL è¯ä¹¦å¯å‚è€ƒã€Šapacheé…ç½®sslè¯ä¹¦ã€‹Â¶å…­ã€åŠé”€è¯ä¹¦åŠé”€è¯ä¹¦æ˜¯ä¸€ç§åœ¨è¯ä¹¦åˆ°æœŸä¹‹å‰åºŸæ­¢å…¶æœ‰æ•ˆæ€§çš„æ–¹æ³•ã€‚å¦‚æžœæ‚¨è®¤ä¸ºæ‚¨çš„ SSL/TLS è¯ä¹¦å·²ç»è¢«ç›—ç”¨æˆ–ä¸å†éœ€è¦ä½¿ç”¨ï¼Œåˆ™åº”è¯¥ç«‹å³å°†å…¶åŠé”€ã€‚é€šè¿‡åŠé”€è¯ä¹¦ï¼Œæ‚¨å¯ä»¥ç¡®ä¿ä¸ä¼šæœ‰äººå†ä½¿ç”¨è¯¥è¯ä¹¦æ¥è¿›è¡Œæ¶æ„æ´»åŠ¨ã€‚12345678#åŠé”€æŒ‡å®šåŸŸåçš„è¯ä¹¦certbot revoke --cert-name example.com#åŠé”€æŒ‡å®šæ–‡ä»¶è·¯å¾„çš„è¯ä¹¦ï¼ˆæ­¤å‘½ä»¤å°†åŠé”€å­˜å‚¨åœ¨ /etc/letsencrypt/live/example.com/cert.pem ä¸­çš„è¯ä¹¦ï¼‰certbot revoke --cert-path /etc/letsencrypt/live/example.com/cert.pem#åŠé”€æŒ‡å®šåŸŸåç›¸å…³çš„æ‰€æœ‰è¯ä¹¦ï¼ˆæ­¤å‘½ä»¤å°†åŠé”€ /etc/letsencrypt/archive/ ç›®å½•ä¸­ä¸Ž example.com åŸŸåç›¸å…³çš„æ‰€æœ‰è¯ä¹¦ï¼‰certbot revoke --cert-path /etc/letsencrypt/archive/ -d example.comæç¤ºï¼šä½¿ç”¨ Certbot æˆ–å…¶ä»–å·¥å…·åŠé”€äº† Letâ€™s Encrypt å‘æ”¾çš„ SSL/TLS è¯ä¹¦ï¼ŒLetâ€™s Encrypt åœ¨è¯ä¹¦åˆ°æœŸä¹‹å‰ä»ç„¶ä¼šå‘é€åˆ°æœŸæé†’é‚®ä»¶ã€‚åŠé”€è¯ä¹¦å¹¶ä¸ä¼šé˜»æ­¢ Letâ€™s Encrypt å‘é€åˆ°æœŸæé†’ã€‚ï¼ˆæ„Ÿè§‰æœ‰ç‚¹å‘å•Š~ï¼‰Â¶ä¸ƒã€åˆ é™¤è¯ä¹¦123456#åˆ é™¤æŒ‡å®šåŸŸåçš„è¯ä¹¦certbot delete --cert-name example.com#æˆ–è€…ï¼šï¼ˆcertbot deleteæ“ä½œåŒä¸‹ï¼‰rm -rf /etc/letsencrypt/live/example.comrm -rf /etc/letsencrypt/archive/example.comðŸ’â€â™‚ å¦‚æžœä»…ä»…åˆ é™¤è¯ä¹¦ï¼Œä½†åŽŸæœ¬è¯ä¹¦æ²¡æœ‰æ³¨é”€æˆ–è¿‡æœŸï¼Œé‚£ä¹ˆå†æ¬¡ç”³è¯·ç­¾å‘ç”Ÿæˆæ–°çš„è¯ä¹¦æ—¶ï¼Œé»˜è®¤ç”Ÿæˆçš„æ–°è¯ä¹¦ä¸Žæ—§è¯ä¹¦çš„ä¸€äº›åŸºæœ¬ä¿¡æ¯ï¼ˆå¦‚ç§é’¥ã€å…¬é’¥å’Œæœ‰æ•ˆæœŸç­‰ï¼‰ä¼šä¿æŒç›¸åŒï¼Œä»…åˆ°æœŸæ—¥æœŸå’Œå…¶ä»–å…ƒæ•°æ®ï¼ˆä¾‹å¦‚åºåˆ—å·ã€ç‰ˆæœ¬å·å’ŒæŒ‡çº¹ï¼‰ä¸åŒã€‚Â¶å…«ã€è¯ä¹¦ç»­æœŸç”³è¯·Â¶1. ç®€è¦æ¦‚è¿°Letâ€™s Encrypt è¯ä¹¦çš„æœ‰æ•ˆæœŸæ˜¯ 90 å¤©ï¼Œè¯ä¹¦åˆ°æœŸå‰ 20 å¤©ã€10 å¤©å’Œ 1 å¤©æ—¶å°†ä¼šæŽ¥æ”¶åˆ°åˆ°æœŸé€šçŸ¥é‚®ä»¶ï¼Œæé†’ç”¨æˆ·è¿›è¡Œè¯ä¹¦ç»­æœŸç”³è¯·æ“ä½œã€‚ç”¨æˆ·å¯ä»¥é€šè¿‡ certbot renew å‘½ä»¤æ¥ç»™å³å°†è¿‡æœŸçš„è¯ä¹¦ç»­æœŸï¼Œç»­æœŸä¼šç”Ÿæˆæ–°çš„è¯ä¹¦å¹¶è‡ªåŠ¨æ›¿æ¢æŽ‰åŽŸæ¥çš„è¯ä¹¦ã€‚ðŸ’â€â™‚ è¯´æ˜Žï¼šcertbot renew å‘½ä»¤ä¼šé»˜è®¤æ ¹æ®ç”³è¯·å„è¯ä¹¦æ—¶çš„å‚æ•°å¯¹æ‰€æœ‰è¯ä¹¦è¿›è¡Œç»­æœŸã€‚ç”³è¯·å„è¯ä¹¦æ—¶çš„å‚æ•°ä¼šè¢«ç”¨ä½œç»­è®¢å‚æ•°è®°å½•åœ¨ /etc/letsencrypt/renewal/example.com.conf é…ç½®æ–‡ä»¶é‡Œï¼ˆè¯¥æ–‡ä»¶æ˜¯ç”¨æˆ·åœ¨ç”³è¯·è¯ä¹¦å®ŒæˆåŽæ ¹æ®ç”³è¯·çš„å‚æ•°è‡ªåŠ¨ç”Ÿæˆçš„ï¼‰ã€‚ç”¨æˆ·å¯ä»¥ä¿®æ”¹ç»­æœŸé…ç½®æ–‡ä»¶ä»¥è°ƒæ•´é»˜è®¤çš„ç»­è®¢ç­–ç•¥ï¼ˆå¦‚ï¼šä¿®æ”¹éªŒè¯æ’ä»¶ã€ä¿®æ”¹æ‰‹åŠ¨éªŒè¯çš„ hook è„šæœ¬ç­‰ï¼‰ã€‚å¦‚æžœä¸ä¿®æ”¹ç»­æœŸé…ç½®æ–‡ä»¶ï¼Œä¹Ÿå¯ä»¥åœ¨æ‰§è¡Œ certbot renew å‘½ä»¤æ—¶æŒ‡å®šå‚æ•°æ¥è‡ªå®šä¹‰ç»­è®¢ç­–ç•¥ã€‚å¦‚æžœè¯ä¹¦å·²ç»è¿‡æœŸæˆ–è€…è¢«åŠé”€ï¼Œåˆ™ certbot å°†æ— æ³•å¯¹å…¶è¿›è¡Œç»­æœŸï¼Œå¯¹äºŽè¿™ç§æƒ…å†µåªèƒ½é‡æ–°ç”³è¯·ç­¾å‘æ–°çš„è¯ä¹¦ã€‚è¯ä¹¦åˆ°æœŸå‰ 30 å¤©å†…æ‰å¯ä»¥ç»­è®¢ï¼Œå¤šäºŽ30å¤©åˆ™ä¸å…è®¸ç»­è®¢ã€‚é€šè¿‡ certbot renew å‘½ä»¤æ¥ç»­è®¢ï¼Œé»˜è®¤ç”Ÿæˆçš„æ–°è¯ä¹¦ä¸Žæ—§è¯ä¹¦çš„ä¸€äº›åŸºæœ¬ä¿¡æ¯ï¼ˆå¦‚ç§é’¥ã€å…¬é’¥å’Œæœ‰æ•ˆæœŸç­‰ï¼‰ä¼šä¿æŒç›¸åŒï¼Œä»…åˆ°æœŸæ—¥æœŸå’Œå…¶ä»–å…ƒæ•°æ®ï¼ˆä¾‹å¦‚åºåˆ—å·ã€ç‰ˆæœ¬å·å’ŒæŒ‡çº¹ï¼‰ä¸åŒã€‚å¦‚æžœå¸Œæœ›é€šè¿‡æ—§çš„è¯ä¹¦ä¿¡æ¯å¼ºåˆ¶é‡æ–°ç”³è¯·ç­¾å‘æ–°çš„è¯ä¹¦å¹¶æ›¿æ¢åˆ™éœ€è¦åŠ é€‰é¡¹ --force-renewalã€‚å¦‚æžœç»­æœŸçš„æ˜¯æµ‹è¯•çŽ¯å¢ƒçš„è¯ä¹¦åˆ™éœ€è¦åŠ é€‰é¡¹ï¼š--break-my-certs ã€‚Â¶2. è‡ªåŠ¨ HTTP éªŒè¯æ–¹å¼ç»­æœŸè¯ä¹¦Â¶1ï¼‰æ‰‹åŠ¨ç»­æœŸ123456#è¯ä¹¦ç»­æœŸï¼ˆä½¿ç”¨ç»­æœŸé…ç½®æ–‡ä»¶çš„å‚æ•°ä½œä¸ºç»­è®¢ç­–ç•¥ï¼‰ #å¯ä»¥æŒ‡å®š -vï¼ˆ--verboseï¼‰é€‰é¡¹æŸ¥çœ‹æ›´è¯¦ç»†çš„æ—¥å¿—ä¿¡æ¯certbot renew#é‡æ–°åŠ è½½nginxé…ç½®nginx -s reloadðŸ’â€â™‚ æ³¨æ„ï¼šè‡ªåŠ¨ HTTP éªŒè¯æ–¹å¼ä¸‹åªæ”¯æŒå•åŸŸåè¯ä¹¦å’Œå¤šåŸŸåè¯ä¹¦çš„ç»­æœŸï¼Œä¸æ”¯æŒé€šé…ç¬¦åŸŸåè¯ä¹¦ã€‚Â¶2ï¼‰è‡ªåŠ¨ç»­æœŸå¯ä»¥é€šè¿‡Linuxçš„å®šæ—¶ä»»åŠ¡æ¥å®Œæˆè‡ªåŠ¨ç»­æœŸçš„éœ€æ±‚ï¼Œæ“ä½œå¦‚ä¸‹ï¼š12345678910#åˆ›å»ºæ—¥å¿—ä¿å­˜ç›®å½•mkdir -p /opt/certbot/logs#è®¾ç½®ç³»ç»Ÿçš„å®šæ—¶ä»»åŠ¡crontab -e#åœ¨æœ€åŽæ·»åŠ å¦‚ä¸‹å®šæ—¶è§„åˆ™ï¼ˆåœ¨æ¯ä¸ªæœˆçš„ç¬¬ä¸€å¤©å‡Œæ™¨3ç‚¹0åˆ†0ç§’æ—¶æ‰§è¡Œå®šæ—¶ä»»åŠ¡ï¼‰0 3 1 * * certbot renew --deploy-hook "nginx -s reload" &gt;&gt; /opt/certbot/logs/renew.log#åˆ—å‡ºç³»ç»Ÿçš„å®šæ—¶ä»»åŠ¡crontab -lå®šæ—¶ä»»åŠ¡è§„åˆ™ä¸­ certbot renew çš„ --deploy-hook é€‰é¡¹ç”¨äºŽæŒ‡å®šè¯ä¹¦ç»­æœŸæ›´æ–°å®ŒæˆåŽè‡ªåŠ¨è§¦å‘æ‰§è¡ŒæŸè‡ªå®šä¹‰è„šæœ¬æˆ–å‘½ä»¤ï¼Œè¿™é‡Œå¡«å†™çš„æ˜¯å‘½ä»¤æ˜¯é‡æ–°åŠ è½½ nginx é…ç½®ä»¥ä½¿å¾—æ–°çš„ SSL è¯ä¹¦ç”Ÿæ•ˆã€‚Â¶3. è‡ªåŠ¨ DNS åŸŸåéªŒè¯ç»­æœŸè¯ä¹¦å‚è€ƒä¸‹æ–‡ï¼šè‡ªåŠ¨ DNS éªŒè¯æ–¹å¼ç”³è¯·å’Œç»­æœŸè¯ä¹¦Â¶ä¹. è‡ªåŠ¨ DNS éªŒè¯æ–¹å¼ç”³è¯·å’Œç»­æœŸè¯ä¹¦å®žçŽ°åŽŸç†ï¼šé€šè¿‡ä½¿ç”¨ DNS æ’ä»¶æˆ–è€…è‡ªå®šä¹‰ hook è„šæœ¬æ¥è°ƒç”¨ DNS æœåŠ¡å™¨çš„ API æ›´æ–° DNS TXT è®°å½•ä»¥å®žçŽ°è‡ªåŠ¨ DNS éªŒè¯æ–¹å¼ç”³è¯·å’Œç»­æœŸè¯ä¹¦ã€‚Â¶1. ç®€è¦æ¦‚è¿°å¯¹äºŽæ‰‹åŠ¨dnséªŒè¯æ–¹å¼ç”³è¯·è¯ä¹¦çš„æƒ…å†µï¼Œé€šè¿‡ certbot renew å‘½ä»¤è¿›è¡Œè¯ä¹¦ç»­æœŸæ—¶é»˜è®¤æ˜¯ä¼šå¤±è´¥çš„ã€‚åŽŸå› æ˜¯ certbot é»˜è®¤æ— æ³•è‡ªåŠ¨æ›´æ–° DNS æœåŠ¡å™¨çš„ TXT è®°å½•ï¼Œä»Žè€Œæ— æ³•é€šè¿‡ DNS éªŒè¯ã€‚å¦‚æžœéœ€è¦åœ¨è¿™ç§æ¨¡å¼ä¸‹é€šè¿‡ DNS éªŒè¯ï¼Œåˆ™éœ€è¦å®‰è£… DNS æ’ä»¶æˆ–è€…è‡ªå®šä¹‰ hook è„šæœ¬å¹¶ä¸”é…ç½® DNS æœåŠ¡å™¨è®¿é—®ä»¤ç‰Œç­‰æ¥è°ƒç”¨ DNS æœåŠ¡å™¨çš„ API æ¥è‡ªåŠ¨æ›´æ–° DNS çš„ TXT è®°å½•ï¼Œå¦å¤–ä½¿ç”¨ DNS æ’ä»¶æˆ–è€…è‡ªå®šä¹‰ hook è„šæœ¬åŽï¼Œç”³è¯·ç”³è¯·è¯ä¹¦ä¹Ÿä¸éœ€è¦å†æ‰‹åŠ¨æ·»åŠ  DNS TXT è®°å½•äº†ï¼Œç»´æŠ¤ä¸Šä¼šæ›´åŠ ä¾¿åˆ©ã€‚ðŸ’â€â™‚ å¯¹äºŽ DNS éªŒè¯æ¨¡å¼ç”³è¯·çš„åŸŸåè¯ä¹¦ï¼Œæ‰§è¡Œcertbot renewå‘½ä»¤ç»­æœŸï¼Œä¸æŒ‡å®š DNS æ’ä»¶æˆ–è€… hook è„šæœ¬é€‰é¡¹æ—¶ä¼šæç¤ºå¦‚ä¸‹æŠ¥é”™ä¿¡æ¯ï¼šFailed to renew certificate example.com with error: The manual plugin is not working; there may be problems with your existing configuration. The error was: PluginError('An authentication script must be provided with --manual-auth-hook when using the manual plugin non-interactively.æ³¨æ„ï¼šä¸è®ºæ˜¯å•åŸŸåè¯ä¹¦ã€å¤šåŸŸåè¯ä¹¦ã€è¿˜æ˜¯é€šé…ç¬¦è¯ä¹¦ï¼Œéƒ½æ˜¯éœ€è¦æŒ‡å®šè‡ªåŠ¨æ›´æ–° DNS è®°å½•çš„æ–¹å¼ï¼Œå¦åˆ™æ— æ³•æˆåŠŸç»­æœŸã€‚ðŸ’â€â™‚ å…³äºŽåŸŸåæ³¨å†Œå•†å’Œ DNS æœåŠ¡æä¾›å•†çš„è¯´æ˜Žï¼šé€šå¸¸æƒ…å†µä¸‹ï¼ŒåŸŸåæ³¨å†Œå•†å’Œ DNS æœåŠ¡æä¾›å•†å¯ä»¥æ˜¯åŒä¸€ä¸ªå…¬å¸ï¼Œä¹Ÿå¯ä»¥æ˜¯ä¸åŒçš„å…¬å¸ã€‚ä¸€äº›å¸¸è§çš„åŸŸåæ³¨å†Œå•†å’Œ DNS æœåŠ¡æä¾›å•†åŒ…æ‹¬ï¼šAliDNSï¼ˆé˜¿é‡Œäº‘ DNSï¼Œä¸‡ç½‘ DNSï¼‰DNSPodï¼ˆè…¾è®¯äº‘ DNSï¼‰CloudflareGoDaddyNameSiloNamecheapå…¶ä»–Â¶2. DNS æ’ä»¶è‡ªåŠ¨æ›´æ–° DNS è®°å½•æ–¹å¼Â¶1ï¼‰å®‰è£…å¹¶é…ç½® DNS æ’ä»¶é»˜è®¤æ”¯æŒçš„ DNS æ’ä»¶ï¼šcertbot-dns-cloudflarecertbot-dns-digitaloceancertbot-dns-dnsimplecertbot-dns-dnsmadeeasycertbot-dns-gehirncertbot-dns-googlecertbot-dns-linodecertbot-dns-luadnscertbot-dns-nsonecertbot-dns-ovhcertbot-dns-rfc2136certbot-dns-route53certbot-dns-sakuracloudéžé»˜è®¤æ”¯æŒçš„ DNS æ’ä»¶ï¼šcertbot-dns-aliyunï¼ˆTODOï¼šæµ‹è¯•æœªæˆåŠŸï¼Œå¾…ç ”ç©¶ï¼‰certbot-dns-dnspodå…·ä½“ä½¿ç”¨å¯å‚è€ƒï¼šå®˜æ–¹æ–‡æ¡£ DNS-PluginsðŸ’â€â™‚ è¯´æ˜Žï¼šè¿™äº›æ’ä»¶ä¸åŒ…å«åœ¨é»˜è®¤çš„ Certbot å®‰è£…ä¸­ï¼Œå¿…é¡»å•ç‹¬å®‰è£…ã€‚certbot é»˜è®¤åªæ”¯æŒå¸¸è§çš„ DNS æœåŠ¡æä¾›å•†ç›¸å…³ DNS æ’ä»¶è¿›è¡Œè‡ªåŠ¨éªŒè¯ï¼Œä½†å¦‚æžœç”¨æˆ·çš„ DNS æœåŠ¡å™¨ä¸åœ¨æ”¯æŒåˆ—è¡¨ä¸­ï¼Œåˆ™éœ€è¦ç¼–å†™æ’ä»¶ï¼ˆå¯åœ¨ Github ä¸ŠæŸ¥æ‰¾ï¼‰æˆ–è€…ä½¿ç”¨è‡ªå®šä¹‰ hook è„šæœ¬æ¥è¿›è¡Œæ‰‹åŠ¨éªŒè¯ï¼ˆæ›´æ–° DNS TXT è®°å½•ï¼‰ã€‚Â¶ï¼ˆ1ï¼‰å®‰è£… Certbot DNS æ’ä»¶è¯´æ˜Žï¼šä»¥ Cloudflare çš„ DNS æ’ä»¶ä¸ºä¾‹Â¶ï¼ˆ1.1ï¼‰é€šè¿‡ç³»ç»ŸåŒ…ç®¡ç†å™¨å®‰è£… Certbot DNS æ’ä»¶1234567#yum å®‰è£… Certbot DNS æ’ä»¶yum install -y epel-releaseyum install -y python2-certbot-dns-cloudflare#apt å®‰è£… Certbot DNS æ’ä»¶apt updateapt install -y python3-certbot-dns-cloudflareÂ¶ï¼ˆ1.2ï¼‰é€šè¿‡ snap åŒ…ç®¡ç†å™¨å®‰è£… Certbot DNS æ’ä»¶123456#é€šè¿‡ snap å®‰è£… DNS æ’ä»¶snap set certbot trust-plugin-with-root=oksnap install certbot-dns-cloudflare#snap connect certbot:plugin certbot-dns-cloudflare#æŸ¥çœ‹æ’ä»¶æ˜¯å¦æˆåŠŸå®‰è£…åˆ°certbotï¼ˆçœ‹æœ‰æ²¡æœ‰å¤šå‡ºdns-aliyunçš„ä¸€æ¡è®°å½•ï¼‰certbot pluginsÂ¶ï¼ˆ1.3ï¼‰é€šè¿‡ pip åŒ…ç®¡ç†å™¨å®‰è£… Certbot DNS æ’ä»¶1pip install certbot-dns-cloudflareÂ¶ï¼ˆ2ï¼‰é…ç½® Certbot DNS æ’ä»¶12345678#é…ç½®DNSæœåŠ¡æä¾›å•†è®¤è¯å‡­è¯mkdir -p /opt/certbot/dns-pluginscat &gt; /opt/certbot/dns-plugins/cloudflare-credentials.ini &lt;&lt; 'EOF'dns_cloudflare_api_token = 0123xxxxxx4567EOF#è®¾ç½®é…ç½®æ–‡ä»¶æƒé™chmod 600 /opt/certbot/dns-plugins/cloudflare-credentials.iniåˆ›å»ºå¹¶èŽ·å¾— Cloudflare çš„ API ä»¤ç‰Œçš„è®¿é—®é“¾æŽ¥ï¼šhttps://dash.cloudflare.com/profile/api-tokensÂ¶2ï¼‰ç”³è¯·è¯ä¹¦123456certbot certonly \--dns-cloudflare \--dns-cloudflare-credentials /opt/certbot/dns-plugins/cloudflare-credentials.ini \-m user@example.com \-d example.com \-d *.example.comÂ¶3ï¼‰æ‰‹åŠ¨ç»­æœŸ1234567891011#è¯ä¹¦ç»­æœŸï¼ˆä½¿ç”¨ç»­æœŸé…ç½®æ–‡ä»¶çš„å‚æ•°ä½œä¸ºç»­è®¢ç­–ç•¥ï¼‰ #å¯ä»¥æŒ‡å®š -vï¼ˆ--verboseï¼‰é€‰é¡¹æŸ¥çœ‹æ›´è¯¦ç»†çš„æ—¥å¿—ä¿¡æ¯certbot renew#è¯ä¹¦ç»­æœŸï¼ˆæŒ‡å®šå‚æ•°ä»¥è‡ªå®šä¹‰ç»­è®¢ç­–ç•¥ï¼Œå¯é€‰ï¼‰certbot renew \--dns-cloudflare \--dns-cloudflare-credentials /opt/certbot/dns-plugins/cloudflare-credentials.ini#é‡æ–°åŠ è½½nginxé…ç½®nginx -s reloadÂ¶4ï¼‰è‡ªåŠ¨ç»­æœŸå¯ä»¥é…ç½® Linux çš„å®šæ—¶ä»»åŠ¡æ¥å®Œæˆè‡ªåŠ¨ç»­æœŸçš„éœ€æ±‚ï¼Œæ“ä½œå¦‚ä¸‹ï¼š12345678910#åˆ›å»ºæ—¥å¿—ä¿å­˜ç›®å½•mkdir -p /opt/certbot/logs#è®¾ç½®ç³»ç»Ÿçš„å®šæ—¶ä»»åŠ¡crontab -e#åœ¨æœ€åŽæ·»åŠ å¦‚ä¸‹å®šæ—¶è§„åˆ™ï¼ˆåœ¨æ¯ä¸ªæœˆçš„ç¬¬ä¸€å¤©å‡Œæ™¨3ç‚¹0åˆ†0ç§’æ—¶æ‰§è¡Œå®šæ—¶ä»»åŠ¡ï¼‰0 3 1 * * certbot renew --deploy-hook "nginx -s reload" &gt;&gt; /opt/certbot/logs/renew.log#åˆ—å‡ºç³»ç»Ÿçš„å®šæ—¶ä»»åŠ¡crontab -lÂ¶3. è‡ªå®šä¹‰ hook è„šæœ¬æ‰‹åŠ¨æ›´æ–° DNS è®°å½•æ–¹å¼certbot ç”³è¯·è¯ä¹¦æˆ–è€…ç»­æœŸå¯é€šè¿‡æŒ‡å®š hook é€‰é¡¹æ¥æ‰§è¡Œä¸€äº›å‘½ä»¤æˆ–è€…è„šæœ¬ä»Žè€Œå®žçŽ°æ›´æ–° DNS è®°å½•ç­‰ï¼Œæ¶‰åŠçš„ hook é€‰é¡¹åŒ…æ‹¬ï¼š--manual-auth-hook å’Œ --manual-cleanup-hookã€‚hook é€‰é¡¹è¯´æ˜Žï¼š--manual-auth-hook åœ¨ certbot è¿›è¡Œ TXT éªŒè¯å‰æ‰§è¡Œï¼ŒéªŒè¯å®ŒæˆåŽè¿˜å¯ä»¥é€šè¿‡æŒ‡å®š--manual-cleanup-hookæ¥åˆ é™¤å·²ç»éªŒè¯å®Œçš„ TXT ä¸´æ—¶è®°å½•ã€‚é€šè¿‡ hook è„šæœ¬æ›´æ–° DNS TXT è®°å½•ä¸€èˆ¬æ˜¯è°ƒç”¨å¯¹åº”åŸŸåæ‰˜ç®¡æœåŠ¡å•†çš„ API æ¥å®žçŽ°ã€‚å¯¹äºŽä¸åŒçš„åŸŸåæ‰˜ç®¡æœåŠ¡å•† API çš„å…·ä½“è°ƒç”¨æ–¹å¼ä¹Ÿä¸ä¸€æ ·ã€‚ä¸‹é¢ä¸»è¦ä»¥æ›´æ–°é˜¿é‡Œäº‘ DNS çš„åŸŸåè§£æžè®°å½•ä¸ºä¾‹ï¼šÂ¶1ï¼‰ç¼–å†™ hook è„šæœ¬Â¶è„šæœ¬1ï¼ˆæ”¯æŒå¤šå®¶ DNS æœåŠ¡æä¾›å•†ï¼ŒæŽ¨èï¼‰12345678910111213141516171819202122232425262728293031323334##ï¼ˆ1ï¼‰ä¸‹è½½å¹¶å®‰è£…è„šæœ¬ï¼ˆè¯¥è„šæœ¬åŒæ—¶æ”¯æŒé˜¿é‡Œäº‘ã€è…¾è®¯äº‘ã€åŽä¸ºäº‘ã€GoDaddy çš„ DNS è§£æžè®°å½•æ›´æ–°ï¼‰mkdir -p /opt/certbot/dns-hooksgit clone https://github.com/yangrongzhou/certbot-letencrypt-wildcardcertificates-alydns-au /opt/certbot/dns-hooks/auchmod 0777 /opt/certbot/dns-hooks/au/au.sh##ï¼ˆ2ï¼‰é…ç½®æ ¹åŸŸå#æŸ¥çœ‹æ˜¯å¦æœ‰å¯¹åº”çš„æ ¹åŸŸåï¼ˆå¦‚è¦æµ‹è¯•çš„åŸŸåä¸ºï¼šexample.siteï¼Œåˆ™æ ¹åŸŸåä¸ºï¼šsiteï¼‰cat /opt/certbot/dns-hooks/au/domain.ini | grep "site"#å¦‚æžœä»¥ä¸Šcatå‘½ä»¤æ²¡æœ‰æŸ¥åˆ°ï¼Œåˆ™å¯ä»¥é€šè¿‡å¦‚ä¸‹å‘½ä»¤è¿›è¡Œæ·»åŠ ï¼ˆå¦‚æžœå·²ç»æœ‰åˆ™ä¸éœ€è¦æ·»åŠ ï¼‰echo "site" &gt;&gt; /opt/certbot/dns-hooks/au/domain.ini##ï¼ˆ3ï¼‰é…ç½®é˜¿é‡Œäº‘DNSçš„ API key å’Œ Secrec vim /opt/certbot/dns-hooks/au/au.sh #é€šè¿‡vimå‘½ä»¤ç¼–è¾‘è„šæœ¬æ–‡ä»¶ï¼Œç„¶åŽä¿®æ”¹å¯¹åº”åŸŸåæ‰˜ç®¡æœåŠ¡å•†çš„KEYå’ŒTOKENå˜é‡å€¼ï¼Œï¼ˆå¦‚é˜¿é‡Œäº‘ä¸ºï¼šALY_KEY å’Œ ALY_TOKENï¼Œè€Œè…¾è®¯äº‘ä¸ºï¼šTXY_KEY å’Œ TXY_TOKENï¼‰#åˆ›å»ºcertbotæ‰‹åŠ¨æ·»åŠ dns txtè®°å½•çš„hookè„šæœ¬cat &gt; /opt/certbot/dns-hooks/manual-auth-hook.sh &lt;&lt; 'EOF'#é˜¿é‡Œäº‘/opt/certbot/dns-hooks/au/au.sh python aly add#è…¾è®¯äº‘#/opt/certbot/dns-hooks/au/au.sh python txy addEOF#åˆ›å»ºcertbotæ‰‹åŠ¨åˆ é™¤dns txtè®°å½•çš„hookè„šæœ¬cat &gt; /opt/certbot/dns-hooks/manual-cleanup-hook.sh &lt;&lt; 'EOF'#é˜¿é‡Œäº‘/opt/certbot/dns-hooks/au/au.sh python aly clean#è…¾è®¯äº‘#/opt/certbot/dns-hooks/au/au.sh python txy cleanEOF#ç»™è„šæœ¬èµ‹äºˆæ‰§è¡Œæƒé™chmod +x /opt/certbot/dns-hooks/manual-auth-hook.shchmod +x /opt/certbot/dns-hooks/manual-cleanup-hook.shALY_KEY å’Œ ALY_TOKENï¼šé˜¿é‡Œäº‘ API key å’Œ Secrec å®˜æ–¹ç”³è¯·æ–‡æ¡£ã€‚TXY_KEY å’Œ TXY_TOKENï¼šè…¾è®¯äº‘ API å¯†é’¥å®˜æ–¹ç”³è¯·æ–‡æ¡£ã€‚HWY_KEY å’Œ HWY_TOKEN: åŽä¸ºäº‘ API å¯†é’¥å®˜æ–¹ç”³è¯·æ–‡æ¡£GODADDY_KEY å’Œ GODADDY_TOKENï¼šGoDaddy API å¯†é’¥å®˜æ–¹ç”³è¯·æ–‡æ¡£ã€‚åŽŸé¡¹ç›®è„šæœ¬è¯´æ˜Žå‚è€ƒï¼šhttps://github.com/ywdblog/certbot-letencrypt-wildcardcertificates-alydns-auè…¾è®¯äº‘è§£æžå‡çº§è‡³ API 3.0ï¼Œè„šæœ¬æ›´æ–°å‚è€ƒï¼šhttps://github.com/yangrongzhou/certbot-letencrypt-wildcardcertificates-alydns-auÂ¶è„šæœ¬2ï¼ˆä»…æ”¯æŒé˜¿é‡Œäº‘ DNSï¼‰å®žçŽ°æ–¹å¼ï¼šç¼–å†™ shell è„šæœ¬è°ƒç”¨é˜¿é‡Œäº‘ CLI å·¥å…·æ¥æ›´æ–°çš„é˜¿é‡Œäº‘åŸŸåäº‘è§£æžï¼ˆ1ï¼‰éœ€è¦å…ˆå®‰è£…å¹¶é…ç½®é˜¿é‡Œäº‘ CLI å·¥å…·1234567891011121314151617181920212223242526#å®‰è£…é˜¿é‡Œäº‘ CLI å·¥å…·#pip install aliyuncliwget https://aliyuncli.alicdn.com/aliyun-cli-linux-3.0.16-amd64.tgztar xzvf aliyun-cli-linux-3.0.16-amd64.tgzmv aliyun /usr/local/binchown root:root /usr/local/bin/aliyun#é…ç½®ï¼ˆé…ç½®è°ƒç”¨é˜¿é‡Œäº‘èµ„æºæ‰€éœ€çš„å‡­è¯ä¿¡æ¯ã€åœ°åŸŸã€è¯­è¨€ç­‰ï¼‰ï¼Œé…ç½®ä¿å­˜åœ¨~/.aliyun/config.jsonæ–‡ä»¶é‡Œaliyun configure set \--profile akProfile \--mode AK \--region cn-hangzhou \--access-key-id LTAxxxxxxxx9x7a \--access-key-secret oNYXxxxxxxxxvFcz8F #æŸ¥çœ‹é…ç½®aliyun configure get#æµ‹è¯• CLI å·¥å…·æ˜¯å¦èƒ½æˆåŠŸæ›´æ–°è®°å½•#aliyun alidns AddDomainRecord --DomainName example.com --Type Txt --RR _txt-test --Line default --Value txt000 --TTL 600#å¸è½½ï¼ˆå¦‚æžœéœ€è¦ï¼‰rm -rf /usr/local/bin/aliyunrm -rf ~/.aliyuné˜¿é‡Œäº‘ CLI å·¥å…·ä½¿ç”¨è¯´æ˜Žå¯å‚è€ƒï¼šé˜¿é‡Œäº‘CLIã€CLI å·¥å…· DNS è§£æžã€CLIå·¥å…·é¡¹ç›®é˜¿é‡Œäº‘ API key å’Œ Secrec å¯åœ¨é˜¿é‡Œäº‘ç®¡ç†åŽå° AccessKey ç®¡ç† é¡µé¢åˆ›å»ºèŽ·å–ã€‚é˜¿é‡Œäº‘ API key å’Œ Secrec å®˜æ–¹ç”³è¯·æ–‡æ¡£ï¼ˆ2ï¼‰åˆ›å»º shell è„šæœ¬æ–‡ä»¶12mkdir -p /opt/certbot/dns-hooksvim /opt/certbot/dns-hooks/alidns.shå†…å®¹å¦‚ä¸‹ï¼š1234567891011121314151617181920212223242526272829303132333435#!/bin/bashif ! command -v aliyun &gt;/dev/null; then echo "é”™è¯¯: ä½ éœ€è¦å…ˆå®‰è£… aliyun å‘½ä»¤è¡Œå·¥å…· https://help.aliyun.com/document_detail/121541.htmlã€‚" 1&gt;&amp;2 exit 1fiDOMAIN=$(expr match "$CERTBOT_DOMAIN" '.*\.\(.*\..*\)')SUB_DOMAIN=$(expr match "$CERTBOT_DOMAIN" '\(.*\)\..*\..*')if [ -z $DOMAIN ]; then DOMAIN=$CERTBOT_DOMAINfiif [ ! -z $SUB_DOMAIN ]; then SUB_DOMAIN=.$SUB_DOMAINfiif [ $# -eq 0 ]; then aliyun alidns AddDomainRecord \ --DomainName $DOMAIN \ --RR "_acme-challenge"$SUB_DOMAIN \ --Type "TXT" \ --Value $CERTBOT_VALIDATION /bin/sleep 20else RecordId=$(aliyun alidns DescribeDomainRecords \ --DomainName $DOMAIN \ --RRKeyWord "_acme-challenge"$SUB_DOMAIN \ --Type "TXT" \ --ValueKeyWord $CERTBOT_VALIDATION \ | grep "RecordId" \ | grep -Eo "[0-9]+") aliyun alidns DeleteDomainRecord \ --RecordId $RecordIdfiè„šæœ¬æ¥æºï¼šhttps://github.com/justjavac/certbot-dns-aliyun12345678910111213#åˆ›å»ºcertbotæ‰‹åŠ¨æ·»åŠ dns txtè®°å½•çš„hookè„šæœ¬cat &gt; /opt/certbot/dns-hooks/manual-auth-hook.sh &lt;&lt; 'EOF'/opt/certbot/dns-hooks/alidns.shEOF#åˆ›å»ºcertbotæ‰‹åŠ¨åˆ é™¤dns txtè®°å½•çš„hookè„šæœ¬cat &gt; /opt/certbot/dns-hooks/manual-cleanup-hook.sh &lt;&lt; 'EOF'/opt/certbot/dns-hooks/alidns.sh cleanEOF#ç»™è„šæœ¬èµ‹äºˆæ‰§è¡Œæƒé™chmod +x /opt/certbot/dns-hooks/alidns.shchmod +x /opt/certbot/dns-hooks/manual-auth-hook.shchmod +x /opt/certbot/dns-hooks/manual-cleanup-hook.shÂ¶2ï¼‰ç”³è¯·è¯ä¹¦12345678certbot certonly \--manual --preferred-challenges dns-01 \--agree-tos --no-eff-email \--manual-auth-hook "/opt/certbot/dns-hooks/manual-auth-hook.sh" \--manual-cleanup-hook "/opt/certbot/dns-hooks/manual-cleanup-hook.sh" \-m user@example.com \-d example.site \-d *.example.siteÂ¶3ï¼‰æ‰‹åŠ¨ç»­æœŸ123456789101112#è¯ä¹¦ç»­æœŸï¼ˆä½¿ç”¨ç»­æœŸé…ç½®æ–‡ä»¶çš„å‚æ•°ä½œä¸ºç»­è®¢ç­–ç•¥ï¼‰ #å¯ä»¥æŒ‡å®š -vï¼ˆ--verboseï¼‰é€‰é¡¹æŸ¥çœ‹æ›´è¯¦ç»†çš„æ—¥å¿—ä¿¡æ¯certbot renew#è¯ä¹¦ç»­æœŸï¼ˆæŒ‡å®šå‚æ•°ä»¥è‡ªå®šä¹‰ç»­è®¢ç­–ç•¥ï¼Œå¯é€‰ï¼‰certbot renew \--manual --preferred-challenges dns-01 \--manual-auth-hook "/opt/certbot/dns-hooks/manual-auth-hook.sh" \--manual-cleanup-hook "/opt/certbot/dns-hooks/manual-cleanup-hook.sh"#é‡æ–°åŠ è½½nginxé…ç½®nginx -s reloadÂ¶4ï¼‰è‡ªåŠ¨ç»­æœŸå¯ä»¥é…ç½® Linux çš„å®šæ—¶ä»»åŠ¡æ¥å®Œæˆè‡ªåŠ¨ç»­æœŸçš„éœ€æ±‚ï¼Œæ“ä½œå¦‚ä¸‹ï¼š12345678910#åˆ›å»ºæ—¥å¿—ä¿å­˜ç›®å½•mkdir -p /opt/certbot/logs#è®¾ç½®ç³»ç»Ÿçš„å®šæ—¶ä»»åŠ¡crontab -e#åœ¨æœ€åŽæ·»åŠ å¦‚ä¸‹å®šæ—¶è§„åˆ™ï¼ˆåœ¨æ¯ä¸ªæœˆçš„ç¬¬ä¸€å¤©å‡Œæ™¨3ç‚¹0åˆ†0ç§’æ—¶æ‰§è¡Œå®šæ—¶ä»»åŠ¡ï¼‰0 3 1 * * certbot renew --deploy-hook "nginx -s reload" &gt;&gt; /opt/certbot/logs/renew.log#åˆ—å‡ºç³»ç»Ÿçš„å®šæ—¶ä»»åŠ¡crontab -l]]></content>
      <categories>
        <category>tools</category>
      </categories>
      <tags>
        <tag>ssl</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[WindowsåŒ…ç®¡ç†å·¥å…·scoop]]></title>
    <url>%2Fwindows%2Fscoop.html</url>
    <content type="text"><![CDATA[åœ¨å¹³å¸¸ç”Ÿæ´»ä¸­å¦‚æžœè¦å®‰è£…åƒgitã€javaã€nodeè¿™äº›çŽ¯å¢ƒçš„æ—¶éƒ½éœ€è¦å…ˆåŽ»å®˜ç½‘ä¸‹è½½å®‰è£…ç¨‹åºï¼Œç‚¹å‡»å®‰è£…ï¼Œä¹‹åŽè¿˜éœ€è¦é…ç½®ï¼Œä¸ä»…è¿‡ç¨‹éº»çƒ¦ï¼Œè€Œä¸”å·¥å…·å¤šäº†ä¹‹åŽæ•´ç†èµ·æ¥ä¹Ÿç›¸å½“ä¸å®¹æ˜“ï¼Œé…ç½®ä¹Ÿå¾ˆæ‚ï¼Œæ•´ä¸ªç”µè„‘å°±åƒè¢«æ±¡æŸ“äº†ä¸€æ ·ã€‚è€Œscoopå¯ä»¥å¾ˆå¥½åœ°è§£å†³è¿™ä¸€é—®é¢˜ï¼Œå®‰è£…scoopåŽï¼Œåªéœ€è¦åœ¨å‘½ä»¤è¡Œè¾“å…¥ç®€å•çš„ä¸€ä¸²å‘½ä»¤å³å¯å®‰è£…ä½ æƒ³è¦çš„è½¯ä»¶ã€‚Scoop æ˜¯ä¸€æ¬¾é€‚ç”¨äºŽ Windows å¹³å°çš„å‘½ä»¤è¡Œè½¯ä»¶ï¼ˆåŒ…ï¼‰ç®¡ç†å·¥å…·ï¼Œå¯ä»¥é€šè¿‡å‘½ä»¤è¡Œå·¥å…·ï¼ˆPowerShellã€CMDç­‰ï¼‰å®žçŽ°è½¯ä»¶ï¼ˆåŒ…ï¼‰çš„å®‰è£…ç®¡ç†ç­‰éœ€æ±‚ï¼Œé€šè¿‡ç®€å•çš„ä¸€è¡Œä»£ç å®žçŽ°è½¯ä»¶çš„ä¸‹è½½ã€å®‰è£…ã€å¸è½½ã€æ›´æ–°ç­‰æ“ä½œã€‚Scoop æ²¡æœ‰æä¾›ä»»ä½•æ³¨å†Œå‘å¸ƒåº”ç”¨çš„ä»“åº“ï¼ŒScoop çš„â€œBucketä»“åº“â€æä¾›äº†åº”ç”¨çš„ä¸‹è½½åœ°å€ã€å®‰è£…ã€å¸è½½æ–¹å¼ä»¥åŠä¾èµ–ç­‰ä¿¡æ¯ã€‚å®˜æ–¹ç½‘å€ï¼šhttps://scoop.shÂ¶å®‰è£… scoopÂ¶é…ç½®çŽ¯å¢ƒå˜é‡ä»¥ç®¡ç†å‘˜èº«ä»½æ‰“å¼€ PowerShell ç»ˆç«¯ï¼š123456# è®¾ç½®ç³»ç»Ÿç”¨æˆ·çŽ¯å¢ƒå˜é‡ï¼Œé…ç½®æ‰€æœ‰ç”¨æˆ·è½¯ä»¶ï¼ˆåŒ…æ‹¬scoopè½¯ä»¶ï¼‰å®‰è£…è·¯å¾„ï¼ˆä¸è®¾ç½®åˆ™é»˜è®¤å®‰è£…åˆ°C:\Users\&#123;username&#125;\scoopï¼‰$env:SCOOP='D:\Programs\Scoop\LocalApps'[Environment]::SetEnvironmentVariable('SCOOP',$env:SCOOP,'User')# è®¾ç½®ç³»ç»Ÿå…¨å±€çŽ¯å¢ƒå˜é‡ï¼Œé…ç½®æ‰€æœ‰å…¨å±€è½¯ä»¶å®‰è£…è·¯å¾„ï¼ˆä¸è®¾ç½®åˆ™é»˜è®¤å®‰è£…åˆ°C:\ProgramData\scoopï¼‰$env:SCOOP_GLOBAL='D:\Programs\Scoop\GlobalApps'[Environment]::SetEnvironmentVariable('SCOOP_GLOBAL', $env:SCOOP_GLOBAL, 'Machine')Â¶å®‰è£…å…³é—­ä»¥ä¸Šç»ˆç«¯ï¼Œä»¥éžç®¡ç†å‘˜èº«ä»½é‡æ–°æ‰“å¼€ä¸€ä¸ªæ–°çš„ PowerShell ç»ˆç«¯ã€‚æ³¨æ„æ˜¯éžç®¡ç†å‘˜èº«ä»½ï¼Œå¦åˆ™ä¼šæç¤ºé»˜è®¤ä¸èƒ½ä»¥ç®¡ç†å‘˜èº«ä»½è¿è¡Œè„šæœ¬å®‰è£…ã€‚123456# è®¾ç½®å½“å‰ç”¨æˆ·çš„æ‰§è¡Œç­–ç•¥ï¼šä¸ºäº†è®¡ç®—æœºå®‰å…¨ï¼Œè®¾ç½®åªå…è®¸åœ¨æœ¬åœ°è®¡ç®—æœºä¸Šè¿è¡Œæœ¬åœ°è„šæœ¬ï¼Œä½†ä¸å…è®¸ä»Žè¿œç¨‹è®¡ç®—æœºè¿è¡Œæœªç­¾åçš„è„šæœ¬Set-ExecutionPolicy RemoteSigned -scope CurrentUser# å®‰è£…scoopå‘½ä»¤iex (new-object net.webclient).downloadstring('https://get.scoop.sh')# å®‰è£…å®ŒæˆåŽï¼Œè¾“å…¥ä¸‹é¢å‘½ä»¤éªŒè¯æ˜¯å¦æˆåŠŸï¼ˆå¸¸è§çš„å‘½ä»¤å¯ä»¥é€šè¿‡æ­¤æ–¹æ³•æ¥æŸ¥çœ‹ï¼‰scoop helpðŸ’â€â™‚ è®¿é—® github ä¸ç•…æ—¶ä»¥ä¸Šå®‰è£…å¯èƒ½ä¼šå¤±è´¥ã€‚è§£å†³åŠžæ³•å°±æ˜¯è‡ªè¡Œæƒ³åŠžæ³•å¼€ä»£ç†æˆ–è€…é…ç½® hosts ä»¥ç¡®ä¿èƒ½å¤Ÿé¡ºåˆ©è®¿é—® github ï¼Œç„¶åŽé‡æ–°æ‰§è¡Œå®‰è£…å‘½ä»¤å³å¯ã€‚å¼€ä»£ç†çš„æ–¹å¼æ˜¯æœ€æŽ¨èçš„ï¼Œä½†ç”±äºŽä¸å¯æè¿°çš„åŽŸå› å°±ä¸å¤šä»‹ç»äº†ï¼Œè¿™é‡Œä¸»è¦ä»‹ç»ä¸‹é…ç½®hostsçš„æ–¹å¼ï¼šï¼ˆ1ï¼‰ç„¶åŽè®¿é—® https://raw.hellogithub.com/hosts èŽ·å–æœ€æ–°è®¿é—® github ç›¸å…³çš„ hosts é…ç½®ï¼ˆ2ï¼‰é€šè¿‡è®°äº‹æœ¬æ‰“å¼€ç³»ç»Ÿçš„ hosts æ–‡ä»¶ï¼Œå¤åˆ¶èŽ·å–åˆ°çš„é…ç½®å†…å®¹è¿½åŠ  hosts æ–‡ä»¶é‡Œã€‚1notepad "C:\Windows\System32\drivers\etc\hosts"ï¼ˆ3ï¼‰å¤§éƒ¨åˆ†æƒ…å†µä¸‹æ˜¯ç›´æŽ¥ç”Ÿæ•ˆï¼Œå¦‚æœªç”Ÿæ•ˆå¯å°è¯•ä¸‹é¢çš„åŠžæ³•ï¼Œå¯é€šè¿‡å¦‚ä¸‹å‘½ä»¤åˆ·æ–° DNSï¼š1ipconfig /flushdnsèŽ·å– hosts é…ç½®çš„æ–¹å¼å¯èƒ½ä¼šå¤±æ•ˆï¼Œå¯ä»¥å…³æ³¨è¿™ä¸ªé“¾æŽ¥æ¥æºçš„githubé¡¹ç›®ï¼šhttps://github.com/521xueweihan/GitHub520Â¶å¸è½½ scoop12#å¸è½½scoopï¼ˆæ³¨æ„è¿™ä¼šé™¤äº†å¸è½½scoopæœ¬èº«å¤–ï¼Œè¿˜ä¼šå¸è½½æ‰€æœ‰é€šè¿‡scoopå®‰è£…çš„è½¯ä»¶ï¼‰scoop uninstall scoopÂ¶å¸¸ç”¨å‘½ä»¤1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980818283848586#å¸®åŠ©scoop help#æœç´¢åŒ…å«æŒ‡å®šå…³é”®å­—çš„æ‰€æœ‰å¯ç”¨åº”ç”¨ç¨‹åºã€‚scoop search [keyword]#æŸ¥çœ‹åº”ç”¨ç¨‹åºçš„æè¿°ä¿¡æ¯scoop info [app]#å®‰è£…æŒ‡å®šçš„åº”ç”¨ç¨‹åºï¼Œä¾‹å¦‚scoop install gitscoop install [app]#å®‰è£…æŒ‡å®šç‰ˆæœ¬çš„åº”ç”¨ç¨‹åºï¼Œä¾‹å¦‚scoop install nodejs@14.17.6scoop install [app]@[version]#å®‰è£…æŒ‡å®šä»“åº“ä¸‹åº”ç”¨ç¨‹åºscoop install [bucket]/[app]#ä½¿ç”¨è¯¥å‘½ä»¤å¸è½½æŒ‡å®šçš„åº”ç”¨ç¨‹åºï¼Œä¾‹å¦‚scoop uninstall gitscoop uninstall [app]#å¸è½½æŒ‡å®šç‰ˆæœ¬çš„åº”ç”¨ç¨‹åºï¼Œä¾‹å¦‚scoop uninstall nodejs@14.17.6scoop uninstall [app]@[version]#åˆ‡æ¢å½“å‰appåˆ°å¦ä¸€ä¸ªç‰ˆæœ¬ï¼Œä¾‹å¦‚ï¼šè®¾å½“å‰ç‰ˆæœ¬æ˜¯python3ï¼Œéœ€è¦åˆ‡æ¢åˆ°python2.7ï¼Œåªéœ€è¦æ‰§è¡Œï¼šscoop reset python27scoop reset [other-app]#æ›´æ–°æ‰€æœ‰å·²å®‰è£…çš„åº”ç”¨ç¨‹åºï¼Œä½†ä¸åŒ…æ‹¬scoopscoop update#æ›´æ–°æ‰€æœ‰å·²å®‰è£…çš„åº”ç”¨ç¨‹åºå’Œscoopscoop update *#æŸ¥çœ‹æŒ‡å®šappå·²ç»å®‰è£…çš„ç‰ˆæœ¬scoop list [app]#åˆ—å‡ºå½“å‰å·²å®‰è£…çš„æ‰€æœ‰åº”ç”¨ç¨‹åºã€‚scoop list#æ˜¾ç¤ºå·²å®‰è£…çš„åº”ç”¨ç¨‹åºçš„çŠ¶æ€ä¿¡æ¯ï¼ˆå¦éœ€è¦æ›´æ–°æˆ–æ˜¯å·²ç»æŸåï¼‰ã€‚è¾“å‡ºä¸ºâ€œEverything is ok!â€ï¼Œåˆ™è¡¨ç¤ºæ‰€æœ‰å·²å®‰è£…çš„åº”ç”¨ç¨‹åºéƒ½æ˜¯æœ€æ–°ç‰ˆæœ¬ï¼Œä¸”æ²¡æœ‰ä»»ä½•æŸåæˆ–ä¸å®Œæ•´çš„æ–‡ä»¶scoop status#æ˜¾ç¤ºæŒ‡å®šå·²å®‰è£…åº”ç”¨ç¨‹åºçš„ä¿¡æ¯scoop status [app]#æŸ¥çœ‹å®˜æ–¹æŽ¨èå­˜å‚¨åº“scoop bucket known#åˆ—å‡ºæ‰€æœ‰å·²æ·»åŠ çš„å­˜å‚¨åº“scoop bucket list#æ·»åŠ æ–°çš„Scoopå­˜å‚¨åº“ï¼Œä¾‹å¦‚scoop bucket add extrasscoop bucket add [bucket]#æ·»åŠ æ–°çš„Scoopå­˜å‚¨åº“ï¼Œå¹¶æŒ‡å®šå­˜å‚¨åº“çš„åœ°å€ï¼ˆå¦‚æžœæ²¡æœ‰æŒ‡å®šbucketçš„åœ°å€ï¼Œåˆ™é»˜è®¤ä¸ºgithubçš„åœ°å€ï¼‰ï¼Œä¾‹å¦‚ï¼šscoop bucket add extras https://github.com/ScoopInstaller/Extras.gitscoop bucket add [bucket-name] [bucket-url]#åˆ é™¤æŒ‡å®šçš„Scoopå­˜å‚¨åº“ï¼Œä¾‹å¦‚scoop bucket rm extrasã€‚scoop bucket rm [bucket]#åˆ é™¤æŒ‡å®šè½¯ä»¶åœ¨ç¼“å­˜ç›®å½•ä¸­çš„å®‰è£…åŒ…scoop cache rm [app]#åˆ é™¤Scoopç¼“å­˜ç›®å½•ä¸­çš„æ‰€æœ‰å®‰è£…åŒ…scoop cache rm *#åˆ é™¤Scoopç¼“å­˜ç›®å½•ä¸­æ‰€æœ‰æ—§ç‰ˆæœ¬ï¼ˆä¸å†éœ€è¦ï¼‰çš„å®‰è£…åŒ…scoop cache clear#åˆ é™¤Scoopå®‰è£…çš„åº”ç”¨ç¨‹åºä¸­æ—§ç‰ˆæœ¬ï¼ˆä¸å†éœ€è¦ï¼‰çš„æ–‡ä»¶å’Œèµ„æºscoop cleanup [app]#æ£€æŸ¥æ­£åœ¨è¿è¡Œçš„Scoopç³»ç»Ÿå’Œå·²å®‰è£…çš„åº”ç”¨ç¨‹åºçš„å¥åº·çŠ¶å†µã€‚ï¼ˆåˆ—å‡ºä¸å†ä½¿ç”¨çš„Scoopæ¡¶ã€æ£€æµ‹åº”ç”¨ç¨‹åºéœ€è¦æ›´æ–°æˆ–æ˜¯å·²ç»æŸåã€æ£€æµ‹åº”ç”¨ç¨‹åºæ˜¯å¦ç¼ºå°‘æŸäº›å¿…éœ€çš„æ–‡ä»¶ã€æ£€æŸ¥åº”ç”¨ç¨‹åºæ˜¯å¦æœ‰ä»»ä½•ä¾èµ–é¡¹ç¼ºå¤±ã€æ£€æŸ¥Scoopæ˜¯å¦éœ€è¦æ›´æ–°ï¼Œä»¥åŠæ˜¯å¦å­˜åœ¨å…¶ä»–æ½œåœ¨é—®é¢˜ï¼‰scoop checkup#å°†å½“å‰çš„åº”ç”¨ç¨‹åºåˆ—è¡¨å¯¼å‡ºåˆ°JSONæ ¼å¼çš„æ–‡ä»¶ä¸­ã€‚scoop export##è®¾ç½®scoopå…¨å±€ä»£ç†ï¼ˆåŒ…æ‹¬gitæ“ä½œå’Œè½¯ä»¶ä¸‹è½½çš„ä»£ç†ï¼‰scoop config proxy 127.0.0.1:7890#å–æ¶ˆscoopå…¨å±€ä»£ç†scoop config rm proxy#æŸ¥çœ‹scoopé…ç½®scoop config#è®¾ç½®ç³»ç»Ÿä»£ç†set http_proxy=socks5://127.0.0.1:7890set https_proxy=socks5://127.0.0.1:7890#å–æ¶ˆç³»ç»Ÿä»£ç†unset http_proxyunset https_proxy##è®¾ç½®gitä»£ç†ï¼ˆåŒ…æ‹¬gitæ“ä½œçš„ä»£ç†ï¼‰git config --global http.proxy 'socks5://127.0.0.1:7890' git config --global https.proxy 'socks5://127.0.0.1:7890'#æŸ¥çœ‹å…¨å±€gité…ç½®git config -l --global#å–æ¶ˆgitä»£ç†git config --global --unset http.proxygit config --global --unset https.proxyè¿™äº›æ˜¯ä¸€äº›å¸¸ç”¨çš„Scoopå‘½ä»¤ï¼Œä½†è¿˜æœ‰å¾ˆå¤šå…¶ä»–å‘½ä»¤å’Œé€‰é¡¹å¯ä»¥ä½¿ç”¨ã€‚å¯ä»¥ä½¿ç”¨--helpé€‰é¡¹æŸ¥çœ‹æ¯ä¸ªå‘½ä»¤çš„å¸®åŠ©æ–‡æ¡£ï¼Œä¾‹å¦‚scoop install --helpã€‚Â¶é…ç½®å­˜å‚¨åº“Scoop ä¸­çš„ bucket æ˜¯æŒ‡ä¸€ç»„Scoopåº”ç”¨ç¨‹åºçš„å­˜å‚¨åº“ã€‚å…¶æä¾›äº†åº”ç”¨çš„ä¸‹è½½åœ°å€ã€å®‰è£…ã€å¸è½½æ–¹å¼ä»¥åŠä¾èµ–ç­‰ä¿¡æ¯ã€‚å¯ä»¥é€šè¿‡æ·»åŠ  bucket æ¥å®‰è£…æ›´å¤šçš„è½¯ä»¶ï¼Œ bucketé€šå¸¸éƒ½æ˜¯å­˜å‚¨åœ¨Gitä»“åº“é‡Œï¼ˆæ¯”å¦‚ï¼šgithubï¼‰ã€‚scoop å®‰è£…å¥½åŽé»˜è®¤çš„å­˜å‚¨åº“å°±åªæœ‰mainè¿™ä¸€ä¸ªbucketï¼Œå¯ä»¥åŠ å…¥ä¸€äº›å…¶ä»–çš„å­˜å‚¨åº“æ¥æ»¡è¶³èŽ·å–æ›´å¤šè½¯ä»¶çš„éœ€æ±‚ã€‚ç›¸å…³å‘½ä»¤ï¼š12345678910#æŸ¥çœ‹å®˜æ–¹æŽ¨èå­˜å‚¨åº“scoop bucket known#åˆ—å‡ºæ‰€æœ‰å·²æ·»åŠ çš„å­˜å‚¨åº“scoop bucket list#æ·»åŠ æ–°çš„Scoopå­˜å‚¨åº“ï¼Œä¾‹å¦‚scoop bucket add extrasscoop bucket add [bucket]#æ·»åŠ æ–°çš„Scoopå­˜å‚¨åº“ï¼Œå¹¶æŒ‡å®šå­˜å‚¨åº“çš„åœ°å€ï¼ˆå¦‚æžœæ²¡æœ‰æŒ‡å®šbucketçš„åœ°å€ï¼Œåˆ™é»˜è®¤ä¸ºgithubçš„åœ°å€ï¼‰ï¼Œä¾‹å¦‚ï¼šscoop bucket add extras https://github.com/ScoopInstaller/Extras.gitscoop bucket add [bucket-name] [bucket-url]#åˆ é™¤æŒ‡å®šçš„Scoopå­˜å‚¨åº“ï¼Œä¾‹å¦‚scoop bucket rm extrasã€‚scoop bucket rm [bucket]æ·»åŠ å­˜å‚¨åº“ç¤ºä¾‹ï¼š123456#å®‰è£…gitï¼ˆæ·»åŠ å­˜å‚¨åº“å³ä¸‹è½½Gitä»“åº“çš„å­˜å‚¨åº“ï¼Œä¸‹è½½åŠŸèƒ½ä¾èµ–gitï¼‰scoop install git#æ·»åŠ å­˜å‚¨åº“scoop bucket add extrasscoop bucket add versionså¸¸è§çš„bucketæœ‰å¦‚ä¸‹ï¼šmainï¼šScoopé»˜è®¤çš„å®˜æ–¹å­˜å‚¨åº“ï¼ŒåŒ…å«å¸¸è§çš„åº”ç”¨ç¨‹åºå’Œå·¥å…·ã€‚extrasï¼šå®˜æ–¹çš„è¡¥å……å­˜å‚¨åº“ï¼ŒåŒ…å«éžæ ‡å‡†çš„åº”ç”¨ç¨‹åºå’Œå·¥å…·ã€‚versionsï¼šå®˜æ–¹å­˜å‚¨åº“çš„åŽ†å²ç‰ˆæœ¬å­˜æ¡£ã€‚nirsoftï¼šç”±NirSoftæä¾›çš„å­˜å‚¨åº“ï¼ŒåŒ…å«ä¸€ç³»åˆ—å°åž‹Windowså®žç”¨å·¥å…·ã€‚sysinternalsï¼šç”±Microsoft Sysinternalsæä¾›çš„å­˜å‚¨åº“ï¼ŒåŒ…å«Windowsç®¡ç†å’Œè¯Šæ–­å·¥å…·ã€‚phpï¼šç”±PHPç¤¾åŒºæä¾›çš„å­˜å‚¨åº“ï¼ŒåŒ…å«PHPç¼–ç¨‹è¯­è¨€åŠå…¶æ‰©å±•ã€‚nerd-fontsï¼šç”±ç¤¾åŒºç»´æŠ¤çš„å­˜å‚¨åº“ï¼ŒåŒ…å«ä¸“ä¸ºç¨‹åºå‘˜è®¾è®¡çš„å­—ä½“ã€‚nonportableï¼šç”±ç¤¾åŒºç»´æŠ¤çš„å­˜å‚¨åº“ï¼ŒåŒ…å«ä¸éœ€è¦å®‰è£…å³å¯ä½¿ç”¨çš„ç»¿è‰²è½¯ä»¶åŒ…ã€‚javaï¼šç”±Javaç¤¾åŒºæä¾›çš„å­˜å‚¨åº“ï¼ŒåŒ…å«Javaå¼€å‘ç›¸å…³çš„åº”ç”¨ç¨‹åºå’Œå·¥å…·ã€‚gamesï¼šç”±ç¤¾åŒºç»´æŠ¤çš„å­˜å‚¨åº“ï¼ŒåŒ…å«å¤šä¸ªæ¸¸æˆç›¸å…³çš„åº”ç”¨ç¨‹åºå’Œå·¥å…·ã€‚æ›´å¤š Buckets å‚è§ï¼šbucketsÂ¶é…ç½®å›½å†…å­˜å‚¨åº“åªè¦å›½å†…çš„gitä»“åº“gitcodeä¸Šæœ‰scoopçš„å®˜æ–¹ bucket é•œåƒå­˜å‚¨åº“ï¼Œèƒ½å¤Ÿç”¨äºŽæ›¿æ¢ github ä¸Šçš„ bucket ï¼Œè¿™æ ·å°±ä¸ç”¨æ‹…å¿ƒ github è®¿é—®çš„ç½‘ç»œé—®é¢˜äº†ã€‚123456789101112131415161718#æ›¿æ¢mainå­˜å‚¨åº“scoop bucket rm mainscoop bucket add main https://gitcode.net/mirrors/ScoopInstaller/Main.git#æ›¿æ¢extraså­˜å‚¨åº“scoop bucket rm extrasscoop bucket add extras https://gitcode.net/mirrors/ScoopInstaller/Extras.git#æ›¿æ¢versionså­˜å‚¨åº“scoop bucket rm versionsscoop bucket add versions https://gitcode.net/mirrors/ScoopInstaller/Versions.git#ç±»ä¼¼çš„æ›¿æ¢å…¶ä»–så­˜å‚¨åº“......scoop updateÂ¶å®‰è£…å¸¸ç”¨è½¯ä»¶1234567scoop install sudoscoop install git 7zip opensshscoop install aria2scoop install ffmpegscoop install nodejsscoop install pythonscoop install python@3.6.8Â¶å¤šçº¿ç¨‹åŠ é€Ÿä¸‹è½½1234# å®‰è£…aria2ï¼ŒåŠ é€Ÿä¸‹è½½scoop install aria2# é…ç½®æ˜¯å¦ä½¿ç”¨aria2ä¸‹è½½ï¼Œfalseä¸ºç¦ç”¨ï¼Œtrueä¸ºå¯ç”¨scoop config aria2-enabled trueå¯å¯¹ scoop ä½¿ç”¨ aria2 çš„é…ç½®å‚æ•°ï¼ˆå¯é€‰ï¼‰ï¼š1234scoop config aria2-retry-wait 4scoop config aria2-split 16scoop config aria2-max-connection-per-server 16scoop config aria2-min-split-size 4Må…³äºŽä»¥ä¸‹å‚æ•°çš„ä½œç”¨ï¼Œè¯¦è§ aria2 çš„ç›¸å…³èµ„æ–™Â¶å¸¸è§é—®é¢˜Â¶scoop å®‰è£… git é—®é¢˜scoop é»˜è®¤å®‰è£…çš„ git é»˜è®¤ä¸ä¼šåƒå¸¸è§„å®‰è£…é‚£æ ·ä¼šåœ¨å³é”®èœå•é‡Œæ·»åŠ  git bash å’Œ git gui æŒ‰é’®ã€‚å¦‚æžœéœ€è¦åˆ™å¯ä»¥é€šè¿‡ä¿®æ”¹æ³¨å†Œè¡¨é…ç½®æ¥å®žçŽ°ï¼Œå…·ä½“å¦‚ä¸‹ï¼šä»¥ç®¡ç†å‘˜èº«ä»½æ‰“å¼€ PowerShell ç»ˆç«¯ï¼š123456789101112131415161718192021222324252627282930313233##å³é”®èœå•æ·»åŠ  git bash å’Œ git gui æŒ‰é’®ï¼Œåªéœ€åœ¨æ³¨å†Œè¡¨å¢žåŠ ç›¸å…³ä¿¡æ¯å³å¯$env:GIT_HOME = $env:SCOOP + '\apps\git\current'New-Item -Path 'HKLM:\SOFTWARE\Classes\Directory\Background\shell\git_shell' ` -Name '' ` -Value 'Git Ba&amp;sh Here' ` -Force New-ItemProperty -Path 'HKLM:\SOFTWARE\Classes\Directory\Background\shell\git_shell' ` -Name 'Icon' ` -Value "$env:GIT_HOME\mingw64\share\git\git-for-windows.ico" ` -Force # '"ab" "cd"ef' = "ab `"$env:tmp_str`"efg" é€šè¿‡$env:å–å˜é‡å€¼åªæœ‰åœ¨åŒå¼•å·é‡Œæœ‰æ‰æœ‰ä½œç”¨ï¼Œå¦‚æžœåŒå¼•å­—ç¬¦ä¸²é‡Œè¿˜æœ‰åŒå¼•å·çš„è¯ï¼Œéœ€è¦ä½¿ç”¨ ` ç¬¦å·æ¥è½¬ä¹‰ã€‚New-Item -Path 'HKLM:\SOFTWARE\Classes\Directory\Background\shell\git_shell\command' ` -Name '' ` -Value "`"$env:GIT_HOME\git-bash.exe`" `"--cd=%v.`"" ` -ForceNew-Item -Path 'HKLM:\SOFTWARE\Classes\Directory\Background\shell\git_gui' ` -Name '' ` -Value 'Git &amp;GUI Here' ` -Force New-ItemProperty -Path 'HKLM:\SOFTWARE\Classes\Directory\Background\shell\git_gui' ` -Name 'Icon' ` -Value "$env:GIT_HOME\mingw64\share\git\git-for-windows.ico" ` -Force New-Item -Path 'HKLM:\SOFTWARE\Classes\Directory\Background\shell\git_gui\command' ` -Name '' ` -Value "`"$env:GIT_HOME\cmd\git-gui.exe`" `"--working-dir`" `"%v.`"" ` -Forceå¦‚æžœå¸è½½ git åŽï¼Œæˆ–è€…ä¸æƒ³è¦è¿™ä¸¤ä¸ªæŒ‰é’®äº†åˆ™éœ€è¦æ‰‹åŠ¨åˆ é™¤æ³¨å†Œè¡¨çš„ç›¸å…³ä¿¡æ¯ï¼Œæ“ä½œå¦‚ä¸‹ï¼šä»¥ç®¡ç†å‘˜èº«ä»½æ‰“å¼€ PowerShell ç»ˆç«¯ï¼š123##åˆ é™¤å³é”®èœå•çš„ git bash å’Œ git gui æŒ‰é’®ï¼Œåªéœ€åˆ é™¤æ³¨å†Œè¡¨ç›¸å…³ä¿¡æ¯å³å¯Remove-Item -Path 'HKLM:\SOFTWARE\Classes\Directory\Background\shell\git_shell' -Recurse -ForceRemove-Item -Path 'HKLM:\SOFTWARE\Classes\Directory\Background\shell\git_gui' -Recurse -Forceå¦‚æžœæƒ³åœ¨æ³¨å†Œè¡¨é‡ŒæŸ¥çœ‹å³é”®èœå•é…ç½®ï¼Œå¯å¦‚ä¸‹æ“ä½œï¼šæŒ‰ Win + R ç»„åˆé”®ï¼Œç„¶åŽè¾“å…¥å‘½ä»¤regeditæ¥æ‰“å¼€â€œæ³¨å†Œè¡¨ç¼–è¾‘å™¨â€ï¼Œåœ¨â€œæ³¨å†Œè¡¨ç¼–è¾‘å™¨â€çš„è¾“å…¥æ é‡Œå¡«å†™è·¯å¾„å€¼è®¡ç®—æœº\HKEY_CLASSES_ROOT\Directory\Background\shellè¿›è¡ŒæŸ¥æ‰¾ã€‚å¯é€šè¿‡æŒ‰ F5 é”®åˆ·æ–°â€œæ³¨å†Œè¡¨ç¼–è¾‘å™¨â€å†…å®¹å±•ç¤ºã€‚Â¶åº”ç”¨ç¼“å­˜æ•°æ®å’Œæ³¨å†Œè¡¨é—®é¢˜å¸¸è§„å®‰è£…çš„åº”ç”¨ç¨‹åºéƒ½ä¼šå°†è¿è¡Œæ—¶çš„æ•°æ®ã€ç¼“å­˜ã€æ—¥å¿—ã€ä¸´æ—¶æ–‡ä»¶ç­‰å­˜åˆ°Cç›˜çš„ C:\Users\%username%\AppData ç›®å½•ä¸‹ã€‚åœ¨ scoop çš„ç®¡ç†ä¸­ï¼Œscoop æ ¹æ® bucket é‡Œè½¯ä»¶å®‰è£…è§„åˆ™è¿›è¡Œå¤„ç†ï¼Œè§„åˆ™ä¸€èˆ¬ä¼šå°†è¿™äº›æ•°æ®å­˜åˆ°%Scoop%\LocalApps\persistç›®å½•é‡Œã€‚ä½†bucketä¹Ÿæœ‰ä¸€äº›è½¯ä»¶æ²¡æœ‰è¿™æ ·çš„è§„åˆ™ï¼Œè¿™æ ·å°±ä¼šæŒ‰ç…§ç¨‹åºåŽŸæœ¬çš„å¤„ç†è¿›è¡Œã€‚scoop å¸è½½è½¯ä»¶æ—¶ä¹Ÿæ˜¯æŒ‰ç…§buckeé‡Œå¯¹åº”è½¯ä»¶çš„å¸è½½é…ç½®è§„åˆ™è¿›è¡Œå¤„ç†ï¼Œå¦‚æžœé…ç½®é‡Œæœ‰åˆ é™¤åº”ç”¨ç¨‹åºè¿è¡Œæ—¶äº§ç”Ÿçš„æ•°æ®æ–‡ä»¶å’Œæ³¨å†Œè¡¨é¡¹çš„è§„åˆ™ï¼Œé‚£ä¹ˆå°±ä¼šæ¸…ç†ã€‚å¦åˆ™å°±ä¼šæŒ‰ç…§ç¨‹åºåŽŸæœ¬çš„å¸è½½é€»è¾‘ï¼Œæœ‰å¯èƒ½æ¸…ç†ä¹Ÿæœ‰å¯èƒ½ä¸æ¸…ç†ï¼Œè¿™å†³å®šäºŽåº”ç”¨ç¨‹åºæœ¬èº«ã€‚æ‰€ä»¥è¯´ scoop åœ¨ä¸è‡ªåŠ¨åˆ é™¤åº”ç”¨ç¨‹åºè¿è¡Œæ—¶äº§ç”Ÿçš„æ•°æ®æ–‡ä»¶å’Œæ³¨å†Œè¡¨é¡¹æ—¶ï¼Œä½†åˆæƒ³å®Œå…¨å¸è½½å¹²å‡€åŒ…æ‹¬æ•°æ®æ–‡ä»¶å’Œæ³¨å†Œè¡¨é¡¹ç­‰åœ¨å†…çš„æ•°æ®ï¼Œå°±éœ€è¦æ‰‹åŠ¨æˆ–è€…å€ŸåŠ© geekã€CCleaner ç­‰å·¥å…·è¿›è¡Œå¤„ç†ï¼Œå½“ç„¶ scoop ä¹Ÿæ”¯æŒåœ¨åº”ç”¨ç¨‹åºçš„ bucket ä¸­è‡ªè¡Œæ·»åŠ æˆ–è€…ä¿®æ”¹å¸è½½è„šæœ¬æ¥è¿›è¡Œç›¸å…³å¤„ç†ï¼Œä½†è¿™å°±éœ€è¦å¯¹åº”ç”¨ç¨‹åºå†…éƒ¨æ•°æ®ç¼“å­˜æœ‰æ‰€äº†è§£ï¼Œä¹Ÿéœ€è¦æœ‰ä¸€å®šçš„æŠ€æœ¯èƒ½åŠ›ã€‚Â¶å‚è€ƒhttps://www.cnblogs.com/sleepyocean/p/17017084.htmlhttps://dyphire.github.io/undefined/198c7fc6.htmlhttps://zhuanlan.zhihu.com/p/412417957?utm_id=0https://ericzong.github.io/posts/tool-scoop-get-start.html]]></content>
      <categories>
        <category>windows</category>
      </categories>
      <tags>
        <tag>windows</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[WindowsåŒ…ç®¡ç†å·¥å…·winget]]></title>
    <url>%2Fwindows%2Fwinget.html</url>
    <content type="text"><![CDATA[Â¶æ¦‚è¿°winget æ˜¯å¾®è½¯å…¬å¸æŽ¨å‡ºçš„è½¯ä»¶åŒ…ç®¡ç†å·¥å…·ã€‚è¯¥å·¥å…·æ”¯æŒWindows10ç³»ç»Ÿ1809ä»¥ä¸Šç‰ˆæœ¬ä½¿ç”¨ï¼Œå…·å¤‡æœç´¢ã€æ˜¾ç¤ºå®‰è£…åŒ…ä¿¡æ¯ã€ä¸‹è½½ã€å®‰è£…ã€æ›´æ–°ã€å¸è½½ã€æ˜¾ç¤ºå·²ç»å®‰è£…è½¯ä»¶åˆ—è¡¨ç­‰åŠŸèƒ½ã€‚å®˜æ–¹æ–‡æ¡£ï¼šhttps://learn.microsoft.com/zh-cn/windows/package-manager/wingetÂ¶å®‰è£…Â¶æ–¹å¼1åº”ç”¨å•†åº—æœç´¢ â€œwingetâ€ æˆ– â€œåº”ç”¨å®‰è£…ç¨‹åºâ€ è¿›è¡Œå®‰è£…ï¼Œå®‰è£…å¥½åŽæ‰“å¼€ cmd æˆ–è€… powershell ç»ˆç«¯è¾“å…¥å¦‚ä¸‹å‘½ä»¤è¿›è¡ŒéªŒè¯ï¼š1winget -vÂ¶æ–¹å¼2åˆ° winget çš„ github ä»“åº“ä¸‹è½½å®‰è£…åŒ…è¿›è¡Œå®‰è£…ï¼Œè¿™ç§æ–¹å¼ä¸ä¼šä»Ž Microsoft Store ä¸­å¯ç”¨è‡ªåŠ¨æ›´æ–°ã€‚ä¸‹è½½åœ°å€ï¼šhttps://github.com/microsoft/winget-cli/releasesÂ¶å¸¸ç”¨å‘½ä»¤1234567891011121314151617181920212223242526272829303132333435363738394041424344454647## 1ã€æœç´¢åº”ç”¨ç¨‹åºåŒ…winget search &lt;keyword&gt;#ä¾‹å¦‚ï¼šwinget search git## 2ã€æ˜¾ç¤ºåŒ…çš„ç›¸å…³ä¿¡æ¯ï¼ˆä¿¡æ¯åŒ…æ‹¬åç§°ã€ç‰ˆæœ¬ã€ä½œè€…ã€è¯´æ˜Žã€å‘å¸ƒæ—¥æœŸç­‰ï¼‰winget show &lt;app_id&gt;#ä¾‹å¦‚ï¼šwinget show firefox## 3ã€å®‰è£…åº”ç”¨ç¨‹åºåŒ…ã€‚-v æŒ‡å®šç‰ˆæœ¬å·ï¼ˆå¯é€‰ï¼Œé»˜è®¤æœ€æ–°ç‰ˆï¼‰ï¼Œ-l æŒ‡å®šå®‰è£…è·¯å¾„ï¼ˆå¯é€‰ï¼Œé»˜è®¤%ProgramFiles%\WindowsAppsï¼‰winget install &lt;app_id&gt;winget install &lt;app_id&gt; -v &lt;version&gt; -l &lt;app_path&gt;#ä¾‹å¦‚ï¼šwinget install firefox## 4ã€æ˜¾ç¤ºå·²å®‰è£…åº”ç”¨ç¨‹åºåˆ—è¡¨winget list## 5ã€å‡çº§å·²å®‰è£…çš„åº”ç”¨ç¨‹åºwinget upgrade## 6ã€å¸è½½åº”ç”¨ç¨‹åºwinget uninstall &lt;app_id&gt;#ä¾‹å¦‚ï¼šwinget uninstall firefox## 7ã€æ˜¾ç¤ºæœ‰å…³ç‰¹å®šåº”ç”¨ç¨‹åºåŒ…çš„è¯¦ç»†ä¿¡æ¯winget show &lt;app_id&gt;#ä¾‹å¦‚ï¼šwinget show firefox## 8ã€å¯¼å‡ºå·²å®‰è£…çš„åº”ç”¨ç¨‹åºåˆ—è¡¨åˆ°æ–‡ä»¶winget export -o &lt;file_path&gt;#ä¾‹å¦‚ï¼šwinget export -o C:\Users\&lt;user&gt;\Desktop\installed_apps.txt## 9ã€ä»Žå¯¼å‡ºçš„æ–‡ä»¶ä¸­å¯¼å…¥åº”ç”¨ç¨‹åºåˆ—è¡¨å¹¶å®‰è£…å®ƒä»¬winget import -i &lt;file_path&gt;#ä¾‹å¦‚ï¼šwinget import -i C:\Users\&lt;user&gt;\Desktop\installed_apps.txt## 10ã€å­˜å‚¨åº“ï¼ˆæºï¼‰ç®¡ç†#æ˜¾ç¤ºå·²æ·»åŠ çš„æºåˆ—è¡¨winget source list#æ˜¾ç¤ºæºçš„è¯¦ç»†ä¿¡æ¯ï¼ŒåŒ…æ‹¬åç§°ã€æºç±»åž‹ã€åœ°å€ã€æ›´æ–°æ—¶é—´ç­‰ï¼Œä¾‹å¦‚ï¼šwinget source list wingetwinget source list &lt;repo_name&gt; #æ·»åŠ æºwinget source add -n &lt;repo_name&gt; -a &lt;repo_url&gt;#æ›´æ–°æœ¬åœ°æºwinget source update #æ›´æ–°æ‰€æœ‰æºwinget source update -n &lt;repo_name&gt; #æ›´æ–°å•ä¸ªæº#åˆ é™¤æºwinget source remove -n &lt;repo_name&gt;Â¶wingetè®¾ç½®Â¶ç¼–è¾‘è®¾ç½®é…ç½®æ–‡ä»¶1winget settingsÂ¶é…ç½®é»˜è®¤å®‰è£…ä½ç½®é€šè¿‡winget settingså‘½ä»¤æ‰“å¼€é…ç½®æ–‡ä»¶åŽè¿›è¡Œå¦‚ä¸‹ä¿®æ”¹12345678&#123; "installBehavior": &#123; //è®¾ç½®ç”¨æˆ·ç¨‹åºå®‰è£…ç›®å½•ï¼Œé»˜è®¤ï¼š%LOCALAPPDATA%/Microsoft/WinGet/Packages/ "portablePackageUserRoot": "D:/Programs/WingetPrograms/LocalApps", //è®¾ç½®å…¨å±€ç¨‹åºå®‰è£…ç›®å½•ï¼Œé»˜è®¤ï¼š%PROGRAMFILES%/WinGet/Packages/ "portablePackageMachineRoot": "D:/Programs/WingetPrograms/GlobalApps" &#125;&#125;portablePackageUserRoot å’Œ portablePackageMachineRoot è®¾ç½®ä»…é€‚ç”¨äºŽå…·æœ‰ portable å®‰è£…ç¨‹åºç±»åž‹çš„åŒ…Â¶è®¾ç½®å®‰è£…åŒ…ç¼“å­˜ç›®å½•å­˜å‚¨è·¯å¾„ä¸ºï¼šC:\Users\&lt;user&gt;\AppData\Local\Temp\WinGetç¼“å­˜å­˜å‚¨ç›®å½•è·¯å¾„ç›®å‰è¿˜ä¸æ”¯æŒæ›´æ”¹ã€‚Â¶å‚è€ƒä½¿ç”¨wingetå¿«é€Ÿå®‰è£…å¸¸ç”¨è½¯ä»¶]]></content>
      <categories>
        <category>windows</category>
      </categories>
      <tags>
        <tag>windows</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[VirtualBoxç»„å»ºå†…ç½‘æœåŠ¡å™¨é›†ç¾¤]]></title>
    <url>%2Flinux%2Fvm.html</url>
    <content type="text"><![CDATA[Â¶ä¸€ã€çŽ¯å¢ƒå‡†å¤‡é¦–å…ˆé€šè¿‡VirtualBoxå®‰è£…å¥½ä¸€ä¸ªlinuxç³»ç»Ÿè™šæ‹Ÿæœºï¼Œæ¯”å¦‚è¿™å°è™šæ‹Ÿæœºä¸ºcentos7x64-dockeã€‚çŽ°åœ¨å¸Œæœ›é€šè¿‡è¿™å°è™šæ‹Ÿæœºå¿«é€Ÿå…‹éš†å¤åˆ¶å‡ºå¦å¤–å‡ å°è™šæ‹Ÿæœºï¼Œæ¯”å¦‚ä¸‹é¢ä¸‰å°è™šæ‹Ÿæœºã€‚box-centos7x64-docker-1box-centos7x64-docker-2box-centos7x64-docker-3ä¸‹é¢ä»¥å…‹éš†å‡ºbox-centos7x64-docker-1ä¸ºä¾‹ï¼Œå¦å¤–ä¸¤å°è™šæ‹Ÿæœºçš„å…‹éš†çš„æ–¹å¼ä¸€æ ·ã€‚Â¶äºŒã€ç»„ç½‘é…ç½®ç„¶åŽé€šè¿‡è¿™ä¸‰å°è™šæ‹Ÿæœºé…ç½®å‡ºä¸€ä¸ªå†…ç½‘ç»„ç½‘çŽ¯å¢ƒã€‚ä¸‹é¢æ˜¯å¤§ä½“ç»„ç½‘æ¸…å•ï¼šbox-centos7x64-docker-1ï¼ˆç½‘ç»œè¿žæŽ¥æ–¹å¼ï¼šæ¡¥æŽ¥ç½‘å¡+å†…ç½‘ç½‘ç»œï¼Œæ¡¥æŽ¥ç½‘å¡ï¼šç›®çš„æ˜¯å†…ç½‘ä¸­æœ‰ä¸€å°æœåŠ¡å™¨æœ‰èƒ½åŠ›å’Œå¤–ç½‘äº¤äº’ï¼Œå†…ç½‘ç½‘ç»œï¼šç›®çš„æ˜¯å’Œå¦å¤–ä¸¤å°æœåŠ¡å™¨åœ¨åŒä¸€ä¸ªå±€åŸŸç½‘ä¸­ï¼‰box-centos7x64-docker-2ï¼ˆç½‘ç»œè¿žæŽ¥æ–¹å¼ï¼šå†…ç½‘ç½‘ç»œï¼‰box-centos7x64-docker-3ï¼ˆç½‘ç»œè¿žæŽ¥æ–¹å¼ï¼šå†…ç½‘ç½‘ç»œï¼‰Â¶1. æ¡¥æŽ¥ç½‘å¡+å†…ç½‘ç½‘ç»œé€šè¿‡VirtualBoxå¯¹box-centos7x64-docker-1é…ç½®ç½‘ç»œè¿žæŽ¥æ–¹å¼ä¸ºâ€œæ¡¥æŽ¥ç½‘å¡+å†…ç½‘ç½‘ç»œâ€ã€‚é…ç½®å†…ç½‘ç½‘ç»œip12345678910111213141516171819$ vim /etc/sysconfig/network-scripts/ifcfg-enp0s3TYPE="Ethernet"PROXY_METHOD="none"BROWSER_ONLY="no"BOOTPROTO="static"IPADDR=192.168.0.11NETMASK=255.255.255.0NM_CONTROLLED="no"DEFROUTE="yes"IPV4_FAILURE_FATAL="no"IPV6INIT="yes"IPV6_AUTOCONF="yes"IPV6_DEFROUTE="yes"IPV6_FAILURE_FATAL="no"IPV6_ADDR_GEN_MODE="stable-privacy"NAME="enp0s3"UUID="66341b0a-99fb-4c89-87e1-e01aef46acf3"DEVICE="enp0s3"ONBOOT="yes"1234#é‡å¯ç½‘ç»œæœåŠ¡$ service network restart#é…ç½®ä¸»æœºå(å¯é€‰)ï¼Œéœ€è¦é€€å‡ºç»ˆç«¯ï¼Œå‘½ä»¤è¡Œé‡Œæ‰ä¼šæ˜¾ç¤ºå‡ºæ¥$ hostnamectl set-hostname box-centos7x64-docker-1ç”±äºŽVirtualBoxå¦å¤–è®¾ç½®äº†â€œæ¡¥æŽ¥ç½‘å¡â€çš„è¿žæŽ¥æ–¹å¼ï¼Œæ‰€ä»¥æœ‰â€œå†…ç½‘ç½‘ç»œipâ€å’Œâ€œæ¡¥æŽ¥ç½‘å¡çš„ipâ€1234567891011121314151617181920212223242526#æŸ¥çœ‹ç½‘å¡ip$ ip addr1: lo: &lt;LOOPBACK,UP,LOWER_UP&gt; mtu 65536 qdisc noqueue state UNKNOWN group default qlen 1000 link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00 inet 127.0.0.1/8 scope host lo valid_lft forever preferred_lft forever inet6 ::1/128 scope host valid_lft forever preferred_lft forever2: enp0s3: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc pfifo_fast state UP group default qlen 1000 link/ether 08:00:27:88:16:bf brd ff:ff:ff:ff:ff:ff #å†…ç½‘ç½‘ç»œipæ˜¯192.168.0.11ï¼ˆå¦‚æžœä»¥ä¸Šé…ç½®é…ç½®ï¼Œè¿™é‡Œæ˜¯æ²¡æœ‰ipçš„ï¼‰ inet 192.168.0.11/24 brd 192.168.0.255 scope global noprefixroute enp0s3 valid_lft forever preferred_lft forever inet6 fe80::cfe1:d02:cbcf:e72c/64 scope link tentative noprefixroute dadfailed valid_lft forever preferred_lft forever inet6 fe80::990d:e102:fe45:9979/64 scope link noprefixroute valid_lft forever preferred_lft forever3: enp0s8: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc pfifo_fast state UP group default qlen 1000 link/ether 08:00:27:75:13:8f brd ff:ff:ff:ff:ff:ff #è¿™é‡Œæ¡¥æŽ¥ç½‘å¡çš„ipæ˜¯192.168.1.21 inet 192.168.1.21/24 brd 192.168.1.255 scope global noprefixroute dynamic enp0s8 valid_lft 85995sec preferred_lft 85995sec inet6 2409:8a34:143:3320:c387:4e42:9af0:aba/64 scope global noprefixroute dynamic valid_lft 86243sec preferred_lft 86243sec inet6 fe80::56cc:38:49bb:6c18/64 scope link noprefixroute valid_lft forever preferred_lft foreveré—®é¢˜è§£å†³ï¼šSSHç™»å½•å¤ªæ…¢(ç­‰å¾ˆä¹…æ‰æç¤ºè¾“å…¥å¯†ç )çš„é—®é¢˜ï¼Ÿ123456#æ‰“å¼€UseDNSæ³¨é‡Šå¹¶å°†å€¼æ”¹æˆno$ vi /etc/ssh/sshd_configUseDNS no#é‡å¯sshd$ systemctl restart sshdå‚è€ƒï¼šhttps://blog.csdn.net/odeng888/article/details/80523827Â¶2. å†…ç½‘ç½‘ç»œé€šè¿‡VirtualBoxå¯¹box-centos7x64-docker-2å’Œbox-centos7x64-docker-3é…ç½®ç½‘ç»œè¿žæŽ¥æ–¹å¼ä¸ºâ€œå†…ç½‘ç½‘ç»œâ€ã€‚box-centos7x64-docker-2é…ç½®å†…ç½‘ip12345678910111213141516171819$ vi /etc/sysconfig/network-scripts/ifcfg-enp0s3TYPE="Ethernet"PROXY_METHOD="none"BROWSER_ONLY="no"BOOTPROTO="static"IPADDR=192.168.0.12NETMASK=255.255.255.0NM_CONTROLLED="no"DEFROUTE="yes"IPV4_FAILURE_FATAL="no"IPV6INIT="yes"IPV6_AUTOCONF="yes"IPV6_DEFROUTE="yes"IPV6_FAILURE_FATAL="no"IPV6_ADDR_GEN_MODE="stable-privacy"NAME="enp0s3"UUID="66341b0a-99fb-4c89-87e1-e01aef46acf3"DEVICE="enp0s3"ONBOOT="yes"1234#é‡å¯ç½‘ç»œæœåŠ¡$ service network restart#é…ç½®ä¸»æœºå(å¯é€‰)ï¼Œéœ€è¦é€€å‡ºç»ˆç«¯ï¼Œå‘½ä»¤è¡Œé‡Œæ‰ä¼šæ˜¾ç¤ºå‡ºæ¥$ hostnamectl set-hostname box-centos7x64-docker-2box-centos7x64-docker-3é…ç½®å†…ç½‘ip12345678910111213141516171819$ vi /etc/sysconfig/network-scripts/ifcfg-enp0s3TYPE="Ethernet"PROXY_METHOD="none"BROWSER_ONLY="no"BOOTPROTO="static"IPADDR=192.168.0.13NETMASK=255.255.255.0NM_CONTROLLED="no"DEFROUTE="yes"IPV4_FAILURE_FATAL="no"IPV6INIT="yes"IPV6_AUTOCONF="yes"IPV6_DEFROUTE="yes"IPV6_FAILURE_FATAL="no"IPV6_ADDR_GEN_MODE="stable-privacy"NAME="enp0s3"UUID="66341b0a-99fb-4c89-87e1-e01aef46acf3"DEVICE="enp0s3"ONBOOT="yes"1234#é‡å¯ç½‘ç»œæœåŠ¡$ service network restart#é…ç½®ä¸»æœºå(å¯é€‰)ï¼Œéœ€è¦é€€å‡ºç»ˆç«¯ï¼Œå‘½ä»¤è¡Œé‡Œæ‰ä¼šæ˜¾ç¤ºå‡ºæ¥$ hostnamectl set-hostname box-centos7x64-docker-3Â¶ä¸‰ã€æœ€ç»ˆå†…ç½‘çŽ¯å¢ƒbox-centos7x64-docker-1ï¼ˆå†…ç½‘ipï¼š192.168.0.11 å¤–ç½‘ipï¼š192.168.1.21ï¼‰è¿™é‡Œçš„å¤–ç½‘ipæŒ‡çš„æ˜¯å¯ä»¥å’Œäº’è”ç½‘è¿žæŽ¥çš„ipbox-centos7x64-docker-2ï¼ˆå†…ç½‘ipï¼š192.168.0.12ï¼‰box-centos7x64-docker-3 ï¼ˆå†…ç½‘ipï¼š192.168.0.13ï¼‰]]></content>
      <categories>
        <category>linux</category>
      </categories>
      <tags>
        <tag>linux</tag>
        <tag>centos</tag>
        <tag>virtualBox</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[react nativeå­¦ä¹ ç¬”è®°]]></title>
    <url>%2Fmobile%2Freact-native.html</url>
    <content type="text"><![CDATA[Â¶ä¸€ã€çŽ¯å¢ƒæ­å»ºæ³¨æ„ Node çš„ç‰ˆæœ¬åº”å¤§äºŽç­‰äºŽ 12ï¼ŒPython çš„ç‰ˆæœ¬å¿…é¡»ä¸º 2.xï¼ˆä¸æ”¯æŒ 3.xï¼‰ï¼Œè€Œ JDK çš„ç‰ˆæœ¬å¿…é¡»æ˜¯ 1.8ï¼ˆç›®å‰ä¸æ”¯æŒ 1.9 åŠæ›´é«˜ç‰ˆæœ¬ï¼Œæ³¨æ„ 1.8 ç‰ˆæœ¬å®˜æ–¹ä¹Ÿç›´æŽ¥ç§° 8 ç‰ˆæœ¬ï¼‰ã€‚å®‰è£…å®Œ Node åŽå»ºè®®è®¾ç½® npm é•œåƒï¼ˆæ·˜å®æºï¼‰ä»¥åŠ é€ŸåŽé¢çš„è¿‡ç¨‹ï¼ˆæˆ–ä½¿ç”¨ç§‘å­¦ä¸Šç½‘å·¥å…·ï¼‰ã€‚Â¶1.ä¸‹è½½JDKé€‰æ‹©é€‚åº”è‡ªå·±çš„æœºåž‹ï¼›å®˜ç½‘åœ°å€ï¼šhttp://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.htmlé…ç½®å¥½javaçŽ¯å¢ƒå˜é‡ï¼šJAVA_HOMEï¼šD:\Development\Java\jdk1.8.0_152CLASSPATHï¼š.;%JAVA_HOME%\lib;%JAVA_HOME%\lib\tools.jarPathï¼š%JAVA_HOME%\bin ï¼ˆè¿½åŠ è¿›åŽ»å³å¯ï¼‰Â¶2.å®‰è£…Python2ä¸‹è½½Python2ï¼Œä¸‹è½½åœ°å€ï¼šhttps://www.python.org/ftp/python/2.7.16/python-2.7.16.amd64.msiå‚»ç“œå¼å®‰è£…å¥½åŽï¼Œé…ç½®ä»¥ä¸‹çŽ¯å¢ƒå˜é‡ï¼šPathï¼šD:\Development\Python27ï¼ˆè¿½åŠ è¿›åŽ»å³å¯ï¼‰Â¶3.å®‰è£…Android Studioä¸‹è½½åœ°å€ï¼šhttps://developer.android.google.cn/studio3.1é…ç½®sdk3.2é…ç½®ANDROID_HOMEçŽ¯å¢ƒå˜é‡ANDROID_HOMEï¼šF:\Android\SdkPathçš„çŽ¯å¢ƒå˜é‡è¿½åŠ å¦‚ä¸‹å†…å®¹ï¼š1234%ANDROID_HOME%\platform-tools%ANDROID_HOME%\emulator%ANDROID_HOME%\tools%ANDROID_HOME%\tools\binä»¥ä¸Šå®ŒæˆåŽï¼Œè¿˜è¦å‡†å¤‡å®‰å“çœŸæœºæˆ–è€…å®‰å“æ¨¡æ‹Ÿå™¨ã€‚å‚è€ƒï¼šhttps://www.jianshu.com/p/be001734b7fdÂ¶4.å®‰è£…nodeå»ºè®®é€šè¿‡nvm nodeç‰ˆæœ¬ç®¡ç†å·¥å…·æ¥å®‰è£…nodeï¼Œæ–¹ä¾¿åˆ‡æ¢nodeç‰ˆæœ¬ï¼Œå¯å‚è€ƒï¼šã€Šnodeç‰ˆæœ¬ç®¡ç†å·¥å…·nvmã€‹Â¶5.å®‰è£…react-nativeè„šæ‰‹æž¶1$ npm install -g react-native-cliÂ¶6.å®‰è£…å®‰å“æ¨¡æ‹Ÿå™¨å¯è‡ªè¡Œé€‰æ‹©å¯ç”¨çš„å®‰å“æ¨¡æ‹Ÿå™¨å®‰è£…ã€‚è¿è¡Œå®‰å“æ¨¡æ‹Ÿå™¨åŽæ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ï¼Œå¦‚æžœèƒ½è¯†åˆ«å‡º&quot;device&quot;è®¾å¤‡å³å¯ã€‚123$ adb devicesList of devices attached192.168.108.101:5555 deviceæœ¬äººè¿™é‡Œå®‰å“çš„æ˜¯genymotionæ¨¡æ‹Ÿå™¨ï¼Œè¿è¡Œç«¯å£æ˜¯55555ã€‚ä¸åŒçš„æ¨¡æ‹Ÿå™¨å¯èƒ½è¿è¡Œç«¯å£ä¸ä¸€æ ·ã€‚ä»¥ä¸‹æ˜¯ä¸åŒæ¨¡æ‹Ÿå™¨å¯¹åº”çš„è¿è¡Œç«¯å£ï¼š1ã€æœ¨æœ¨ï¼š 75552ã€å¤œç¥žï¼š 620013ã€æµ·é©¬ï¼š530014ã€é€é¥ï¼š215035ã€å¤©å¤©ï¼š65556ã€é›·ç”µã€genymotionã€è°·æ­ŒåŽŸç”Ÿï¼š55557.é…ç½®gradleï¼ˆ1ï¼‰å¦‚æžœä¸è¿›è¡Œé…ç½®ï¼Œé»˜è®¤é¡¹ç›®ä¼šä¸‹è½½gradleä»¥åŠgradleä¾èµ–åˆ°Cç›˜é‡Œï¼Œæˆ‘ä»¬å¯ä»¥ä¿®æ”¹ä¸‹è½½çš„æ–‡ä»¶åˆ°å…¶ä»–ç›®å½•é‡Œï¼Œåªéœ€é…ç½®å¦‚ä¸‹çŽ¯å¢ƒå˜é‡ï¼šGRADLE_USER_HOMEï¼šF:\Download\myrepositoryï¼ˆ2ï¼‰å¦‚æžœæƒ³é…ç½®gradleçš„ç‰ˆæœ¬ï¼Œé‚£ä¹ˆå¯ä»¥æ·»åŠ å¦‚ä¸‹çŽ¯å¢ƒå˜é‡ã€‚ä¸å»ºè®®é…ç½®ï¼Œå› ä¸ºreact nativeé¡¹ç›®è‡ªèº«å°±å·²ç»é™å®šäº†gradleç‰ˆæœ¬ï¼Œåœ¨è¿è¡Œé¡¹ç›®çš„æ—¶å€™ä¼šè‡ªåŠ¨æ ¹æ®é¡¹ç›®çš„gardleé…ç½®æ–‡ä»¶ä¸‹è½½å¯¹åº”ç‰ˆæœ¬çš„gradleåˆ°%GRADLE_USER_HOME%\wrapper\distsç›®å½•é‡Œï¼Œå¦‚æžœéžè¦é…ç½®å¯å‚è€ƒä¸‹é¢ï¼šGRADLE_HOMEï¼šD:\Development\Gradle\gradle-6.2Â¶äºŒã€åˆ›å»ºæ–°é¡¹ç›®1234$ npx react-native init AwesomeProject$ cd AwesomeProject$ react-native run-android # npx react-native run-android]]></content>
      <categories>
        <category>mobile</category>
      </categories>
      <tags>
        <tag>react</tag>
        <tag>react native</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[reactå­¦ä¹ ç¬”è®°]]></title>
    <url>%2Ffront%2Freact.html</url>
    <content type="text"><![CDATA[Â¶ä¸€ã€ç®€ä»‹React æ˜¯ä¸€ä¸ªå£°æ˜Žå¼ï¼Œé«˜æ•ˆä¸”çµæ´»çš„ç”¨äºŽæž„å»ºç”¨æˆ·ç•Œé¢çš„ JavaScript åº“ã€‚Â¶äºŒã€å®‰è£…12#å®‰è£…è„šæ‰‹æž¶Create React App$ npm install -g create-react-appå¦‚æžœä¸‹è½½æ¯”è¾ƒæ…¢ï¼Œå»ºè®®æ›¿æ¢æ·˜å®æºï¼š1234#æ¢æº$ npm config set registry https://registry.npmmirror.com#é…ç½®åŽé€šè¿‡ä»¥ä¸‹æ–¹æ³•éªŒè¯æ˜¯å¦æˆåŠŸ$ npm config get registryÂ¶ä¸‰ã€åˆ›å»ºé¡¹ç›®Â¶1. è„šæ‰‹æž¶åˆ›å»ºreactå·¥ç¨‹12#åˆ›å»ºé¡¹ç›®$ create-react-app my-appåˆ é™¤æŽ‰éžå¿…é¡»çš„æ–‡ä»¶åŽï¼Œç•™ä¸‹å¦‚ä¸‹ç›®å½•ç»“æž„çš„æ–‡ä»¶ï¼š123456789.â”œâ”€â”€ package-lock.jsonâ”œâ”€â”€ package.jsonâ”œâ”€â”€ publicâ”‚ â”œâ”€â”€ index.htmlâ”‚ â””â”€â”€ manifest.jsonâ””â”€â”€ src â”œâ”€â”€ App.js â””â”€â”€ index.jsÂ¶2. ç¼–è¾‘ç›¸å…³æ–‡ä»¶manifest.json123456789&#123; "short_name": "React App", "name": "Create React App Sample", "icons": [], "start_url": ".", "display": "standalone", "theme_color": "#000000", "background_color": "#ffffff"&#125;index.html12345678910&lt;!DOCTYPE html&gt;&lt;html lang="en"&gt; &lt;head&gt; &lt;meta charset="utf-8" /&gt; &lt;link rel="manifest" href="%PUBLIC_URL%/manifest.json" /&gt; &lt;/head&gt; &lt;body&gt; &lt;div id="root"&gt;&lt;/div&gt; &lt;/body&gt;&lt;/html&gt;index.js1234567import React from "react";import ReactDOM from "react-dom";import App from "./App";//å°†&lt;App /&gt;æ¸²æŸ“åˆ°index.htmlçš„&lt;div id="root"&gt;&lt;/div&gt;é‡Œï¼Œå…¶ä¸­&lt;App/&gt;å°±æ˜¯jsxè¯­æ³•//è§£è¯»jsx:é‡åˆ°&lt;&gt;åˆ™å®‰è£…htmlè§£æžï¼Œé‡åˆ°&#123;&#125;åˆ™æŒ‰ç…§jsè§£æžReactDOM.render(&lt;App /&gt;, document.getElementById("root"));App.js123456789101112131415import React from "react";const msg = "React";/** * ç»„ä»¶App */function App() &#123; return ( &lt;div&gt; &#123;/*æ³¨é‡Š...... */&#125; Hello &#123;msg&#125; &lt;/div&gt; );&#125;export default App;Â¶3. è¿è¡Œé¡¹ç›®12$ cd my-app$ npm startÂ¶å››ã€Reactç»„ä»¶Father.jsxç»„ä»¶æ–‡ä»¶åŽç¼€å¯ä»¥æ˜¯.js,ä¹Ÿå¯ä»¥æ˜¯.jsxã€‚1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859import React from "react";const msg = "React";/** * å‡½æ•°å¼ç»„ä»¶ */// eslint-disable-next-linefunction AppFunction() &#123; return &lt;div&gt;Hello &#123;msg&#125;&lt;/div&gt;;&#125;/** * ç±»ç»„ä»¶ */// eslint-disable-next-lineclass AppClass extends React.Component &#123; //æ¸²æŸ“å‡½æ•° render() &#123; return &lt;div&gt;Hello &#123;msg&#125;&lt;/div&gt;; &#125;&#125;/** * å¤åˆç»„ä»¶ï¼šç»„ä»¶ä¸­åˆæœ‰å…¶ä»–çš„ç»„ä»¶ï¼Œå¤åˆç»„ä»¶ä¸­æ—¢å¯ä»¥æœ‰ç±»ç»„ä»¶åˆå¯ä»¥æœ‰å‡½æ•°ç»„ä»¶ */function ChildcomApp(props) &#123; console.log(props) let age = props.age return ( &lt;div style=&#123;childrencss&#125;&gt; &lt;h3&gt;Childcomç»„ä»¶&lt;/h3&gt; &#123;age&#125; &lt;/div&gt; )&#125;class FatherApp extends React.Component &#123; render() &#123; console.log(this) return ( &lt;div style=&#123;fathercss&#125;&gt; &lt;h3&gt;Fatherç»„ä»¶&lt;/h3&gt; &lt;h4&gt;hello:&#123;this.props.name&#125;&lt;/h4&gt; &lt;ChildcomApp age=&#123;this.props.age&#125; /&gt; &lt;/div&gt; ) &#125;&#125;/** * cssæ ·å¼ */let childrencss = &#123; width: "50%", backgroundColor: "red"&#125;let fathercss = &#123; width: "50%", backgroundColor: "skyblue"&#125;export default FatherApp;index.js12345import React from "react";import ReactDOM from "react-dom";import FatherApp from "./FatherApp";ReactDOM.render(&lt;FatherApp name="qcmoke" age="18" /&gt;, document.getElementById("root"));Â¶äº”ã€ç»„ä»¶çŠ¶æ€statestate æ˜¯ç»„ä»¶çš„å½“å‰çŠ¶æ€ï¼Œå¯ä»¥æŠŠç»„ä»¶ç®€å•çœ‹æˆä¸€ä¸ªâ€œçŠ¶æ€æœºâ€ï¼Œæ ¹æ®çŠ¶æ€ state å‘ˆçŽ°ä¸åŒçš„ UI å±•ç¤ºã€‚ä¸€æ—¦çŠ¶æ€ï¼ˆæ•°æ®ï¼‰æ›´æ”¹ï¼Œç»„ä»¶å°±ä¼šè‡ªåŠ¨è°ƒç”¨ render é‡æ–°æ¸²æŸ“ UIï¼Œè¿™ä¸ªæ›´æ”¹çš„åŠ¨ä½œä¼šé€šè¿‡ this.setState æ–¹æ³•æ¥è§¦å‘ã€‚StateApp.jsx123456789101112131415161718192021222324252627282930313233343536import React from "react";export default class StateApp extends React.Component &#123; //ç»„ä»¶çš„æž„é€ å‡½æ•°,å¦‚æžœè¦åœ¨æž„é€ å‡½æ•°ä¸­èŽ·å–ä¼ å€¼ï¼Œå¯ä»¥åœ¨å‚æ•°åˆ—è¡¨ä¸­åŠ props constructor(props) &#123; super(props); //ç»„ä»¶çš„çŠ¶æ€ï¼ˆæ•°æ®ï¼‰ this.state = &#123; count: 1 &#125;; &#125; clickEvent(e) &#123; this.setState(&#123; count: this.state.count + 1 &#125;) &#125; render() &#123; return ( &lt;div&gt; &#123;/**stateæ˜¯ç§æœ‰å±žæ€§ï¼Œåªèƒ½è¯»å–ä¸èƒ½ç›´æŽ¥ä¿®æ”¹ state(ç›´æŽ¥åŽ»æ”¹å˜çŠ¶æ€ï¼Œç»„ä»¶å°†ä¸ä¼šæ„ŸçŸ¥åˆ°ï¼Œæ›´ä¸ä¼šå› ä¸ºçŠ¶æ€çš„æ”¹å˜è€Œé‡æ–°æ¸²æŸ“),ä½†å¯é€šè¿‡ç»„ä»¶çš„setState()æ–¹æ³•ä¿®æ”¹ */&#125; &lt;h2&gt;It is &#123;this.state.count&#125;.&lt;/h2&gt; &#123;/*éœ€è¦åœ¨äº‹ä»¶ä¸­èŽ·å–ç»„ä»¶çš„thisï¼Œéœ€è¦bind(this) */&#125; &lt;button onClick=&#123;this.clickEvent.bind(this)&#125;&gt;click2&lt;/button&gt; &#123;/*å¦‚æžœä¸ä½¿ç”¨bind(this)ï¼Œå¯ä»¥ä½¿ç”¨ç®­å¤´å‡½æ•°è§£å†³ */&#125; &lt;button onClick=&#123;() =&gt; &#123; this.setState(&#123; count: this.state.count + 1 &#125;) &#125;&#125;&gt;click2&lt;/button&gt; &lt;/div&gt; ); &#125;&#125;index.js12345import React from "react";import ReactDOM from "react-dom";import StateApp from "./StateApp";ReactDOM.render(&lt;StateApp /&gt;, document.getElementById("root"));Â¶å…­ã€ç”Ÿå‘½å‘¨æœŸLifeApp.jsx1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556import React from "react";export default class LifeApp extends React.Component &#123; constructor(props) &#123; super(props); this.state = &#123; count: 1 &#125;; &#125; //(1)ç»„ä»¶å°†è¦æŒ‚è½½æ—¶è§¦å‘çš„å‡½æ•° componentWillUnmount() &#123; console.log("componentWillUnmount"); &#125; //(2)ç»„ä»¶æŒ‚è½½å®Œæˆæ—¶è§¦å‘çš„å‡½æ•° componentDidMount() &#123; console.log("componentDidMount"); &#125; //(3)æ˜¯å¦è¦æ›´æ–°æ•°æ®æ—¶è§¦å‘çš„å‡½æ•° shouldComponentUpdate() &#123; return true; &#125; //(4)æ•°æ®åœ¨æ”¹å˜ä¹‹å‰æ‰§è¡Œ componentWillUpdate() &#123; console.log("componentWillUpdate"); &#125; //(5)æ•°æ®åœ¨æ”¹å˜ä¹‹åŽæ‰§è¡Œ componentDidUpdate() &#123; console.log("componentDidUpdate"); &#125; //(6)ç»„ä»¶å°†è¦é”€æ¯æ—¶è§¦å‘çš„å‡½æ•° componentWillUnmount() &#123; console.log("componentWillUnmount"); &#125; //(7)çˆ¶ç»„ä»¶ä¸­æ”¹å˜äº†propsä¼ å€¼æ—¶è§¦å‘çš„å‡½æ•° componentWillReceiveProps() &#123; console.log("componentWillReceiveProps"); &#125; render() &#123; return ( &lt;div&gt; &#123;/**stateæ˜¯ç§æœ‰å±žæ€§ï¼Œåªèƒ½è¯»å–ä¸èƒ½ç›´æŽ¥ä¿®æ”¹ state(ç›´æŽ¥åŽ»æ”¹å˜çŠ¶æ€ï¼Œç»„ä»¶å°†ä¸ä¼šæ„ŸçŸ¥åˆ°ï¼Œæ›´ä¸ä¼šå› ä¸ºçŠ¶æ€çš„æ”¹å˜è€Œé‡æ–°æ¸²æŸ“),ä½†å¯é€šè¿‡ç»„ä»¶çš„setState()æ–¹æ³•ä¿®æ”¹ */&#125; &lt;h2&gt;It is &#123;this.state.count&#125;.&lt;/h2&gt; &lt;button onClick=&#123;() =&gt; &#123; this.setState(&#123; count: this.state.count + 1 &#125;) &#125;&#125;&gt;click&lt;/button&gt; &lt;/div&gt; ); &#125;&#125;index.js12345import React from "react";import ReactDOM from "react-dom";import LifeApp from "./LifeApp";ReactDOM.render(&lt;LifeApp /&gt;, document.getElementById("root"));Â¶ä¸ƒã€ç»„ä»¶ä¼ å€¼ä»¥ä¸‹ç¤ºä¾‹åŒ…å«ç»„ä»¶é—´çš„çˆ¶ä¼ å­å’Œå­ä¼ çˆ¶ä¸¤ç§æƒ…å†µã€‚FatherApp.jsx123456789101112131415161718192021222324252627282930313233import React from "react";import ChildcomApp from "./ChildcomApp"export default class FatherApp extends React.Component &#123; constructor(props) &#123; super(props) this.state = &#123; childData: "child", fatherData: "father" &#125;; &#125; /** * å­ä¼ çˆ¶çš„å›žè°ƒå‡½æ•° */ callback = (data) =&gt; &#123; this.setState(&#123; fatherData: data &#125;) &#125; render() &#123; return ( &lt;div style=&#123;fathercss&#125;&gt; &lt;h3&gt;&#123;this.state.fatherData&#125;&lt;/h3&gt; &#123;/**ä½¿ç”¨å­ç»„ä»¶å¹¶ä¼ å€¼æˆ–è€…å‡½æ•°ç»™å­ç»„ä»¶ */&#125; &lt;ChildcomApp childData=&#123;this.state.childData&#125; callback=&#123;this.callback&#125; /&gt; &lt;/div&gt; ) &#125;&#125;let fathercss = &#123; width: "50%", backgroundColor: "skyblue"&#125;ChildcomApp.jsx123456789101112131415161718192021import React from "react";export default class ChildcomApp extends React.Component &#123; render() &#123; return ( &lt;div style=&#123;childrencss&#125;&gt; &#123;/**èŽ·å–çˆ¶ç»„ä»¶çš„ä¼ å€¼ */&#125; &lt;div&gt;&#123;this.props.childData&#125;&lt;/div&gt; &lt;button onClick=&#123;() =&gt; &#123; //è°ƒç”¨çˆ¶ç»„ä»¶çš„å›žè°ƒå‡½æ•°ä»Žè€Œä¼ å€¼ç»™çˆ¶ç»„ä»¶ this.props.callback("hi father") &#125;&#125;&gt;å­ä¼ çˆ¶&lt;/button&gt; &lt;/div&gt; ) &#125;&#125;let childrencss = &#123; width: "50%", backgroundColor: "red"&#125;index.js12345import React from "react";import ReactDOM from "react-dom";import FatherApp from "./FatherApp";ReactDOM.render(&lt;FatherApp /&gt;, document.getElementById("root"));Â¶å…«ã€äº‹ä»¶å¤„ç†React å…ƒç´ çš„äº‹ä»¶å¤„ç†å’Œ DOM å…ƒç´ ç±»ä¼¼ã€‚ä½†æ˜¯æœ‰ä¸€ç‚¹è¯­æ³•ä¸Šçš„ä¸åŒ:React äº‹ä»¶ç»‘å®šå±žæ€§çš„å‘½åé‡‡ç”¨é©¼å³°å¼å†™æ³•ï¼Œè€Œä¸æ˜¯å°å†™ã€‚å¦‚æžœé‡‡ç”¨ JSX çš„è¯­æ³•ä½ éœ€è¦ä¼ å…¥ä¸€ä¸ªå‡½æ•°ä½œä¸ºäº‹ä»¶å¤„ç†å‡½æ•°ï¼Œè€Œä¸æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²(DOM å…ƒç´ çš„å†™æ³•)HTML é€šå¸¸å†™æ³•æ˜¯ï¼š1234&lt;!--æ­¤å¤„çš„onclickæ˜¯å°å†™çš„,ä¼ å…¥çš„å‡½æ•°å†™æ³•æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²--&gt;&lt;button onclick="activateLasers()"&gt; æ¿€æ´»æŒ‰é’®&lt;/button&gt;React ä¸­å†™æ³•ä¸ºï¼š1234&lt;!--æ­¤å¤„çš„onClickæ˜¯é©¼å³°å¼,ä¼ å…¥çš„å‡½æ•°å†™æ³•æ˜¯å‡½æ•°æœ¬èº«--&gt;&lt;button onClick=&#123;activateLasers&#125;&gt; æ¿€æ´»æŒ‰é’®&lt;/button&gt;äº‹ä»¶å¤„ç†æ¡ˆä¾‹ï¼š12345678910111213141516171819202122232425262728293031323334353637383940414243444546import React from "react";import ReactDOM from "react-dom";class Toggle extends React.Component &#123; constructor(props) &#123; super(props); this.state = &#123; isToggleOn: true &#125;; // handleClick1ç»‘å®šthisæ˜¯å¿…è¦çš„ï¼Œè¿™æ ·thisæ‰èƒ½åœ¨å›žè°ƒå‡½æ•°ä¸­ä½¿ç”¨ this.handleClick1 = this.handleClick1.bind(this); &#125; handleClick1() &#123; this.setState((prevState) =&gt; (&#123; isToggleOn: !prevState.isToggleOn, &#125;)); &#125; //ä½¿ç”¨ç®­å¤´å‡½æ•°æ¥å®šä¹‰äº‹ä»¶çš„å‡½æ•°(eå¯çœç•¥) handleClick2 = (e) =&gt; &#123; console.log(e); &#125;; //äº‹ä»¶å¯¹è±¡eè¦æ”¾åœ¨æœ€åŽ(eå¯çœç•¥) handleClick3(msg, e) &#123; console.log(msg, e); &#125; render() &#123; return ( &lt;div&gt; &#123;/*äº‹ä»¶çš„å‡½æ•°éœ€è¦ç»‘å®šå½“å‰ç»„ä»¶çš„this(å¦åˆ™åœ¨äº‹ä»¶å‡½æ•°ä¸­thisçš„å€¼ä¼šæ˜¯ undefined)ï¼Œå¯ä»¥ç›´æŽ¥åœ¨è°ƒç”¨æ—¶ç›´æŽ¥ç»‘å®šï¼Œä¹Ÿå¯ä»¥åœ¨ç»„ä»¶çš„æž„é€ å‡½æ•°ä¸­ç»‘å®šã€‚ å¦‚æžœä¸æƒ³ç»‘å®šthisï¼Œé‚£ä¹ˆä¹Ÿå¯ä»¥ä½¿ç”¨ç®­å¤´å‡½æ•°æ¥å®šä¹‰äº‹ä»¶çš„å‡½æ•°ã€‚*/&#125; &lt;button onClick=&#123;this.handleClick1&#125;&gt; &#123;this.state.isToggleOn ? "ON" : "OFF"&#125; &lt;/button&gt; &lt;button onClick=&#123;this.handleClick2&#125;&gt;btn2&lt;/button&gt; &#123;/* å‘äº‹ä»¶å¤„ç†ç¨‹åºä¼ é€’å‚æ•°(ä¸¤ç§æ–¹å¼) */&#125; &lt;button onClick=&#123;this.handleClick3.bind(this, "hello")&#125;&gt;btn3_1&lt;/button&gt; &lt;button onClick=&#123;(e) =&gt; this.handleClick3("hello", e)&#125;&gt;btn3_2&lt;/button&gt; &lt;/div&gt; ); &#125;&#125;ReactDOM.render(&lt;Toggle /&gt;, document.getElementById("root"));Â¶ä¹ã€æ¡ä»¶æ¸²æŸ“React ä¸­çš„æ¡ä»¶æ¸²æŸ“å’Œ JavaScript ä¸­çš„ä¸€è‡´ï¼Œä½¿ç”¨ JavaScript æ“ä½œç¬¦ if æˆ–æ¡ä»¶è¿ç®—ç¬¦æ¥åˆ›å»ºè¡¨ç¤ºå½“å‰çŠ¶æ€çš„å…ƒç´ ï¼Œç„¶åŽè®© React æ ¹æ®å®ƒä»¬æ¥æ›´æ–° UIã€‚123456789101112131415161718192021222324252627282930313233343536373839404142import React from "react";import ReactDOM from "react-dom";function WarningBanner(props) &#123; if (!props.warn) &#123; //è¿”å›ž nullå³å¯é˜»æ­¢ç»„ä»¶æ¸²æŸ“ return null; &#125; return &lt;div&gt;è­¦å‘Š!&lt;/div&gt;;&#125;class Toggle extends React.Component &#123; constructor(props) &#123; super(props); this.state = &#123; active: true, showWarning: true, &#125;; &#125; render() &#123; return ( &lt;div&gt; &#123;/* true &amp;&amp; expression æ€»æ˜¯è¿”å›ž expressionï¼Œè€Œ false &amp;&amp; expression æ€»æ˜¯è¿”å›ž false.å¦‚æžœæ¡ä»¶æ˜¯ trueï¼Œ&amp;&amp; å³ä¾§çš„å…ƒç´ å°±ä¼šè¢«æ¸²æŸ“ï¼Œå¦‚æžœæ˜¯ falseï¼ŒReact ä¼šå¿½ç•¥å¹¶è·³è¿‡å®ƒ */&#125; &#123;this.state.active &amp;&amp; &lt;div&gt;active&lt;/div&gt;&#125; &lt;WarningBanner warn=&#123;this.state.showWarning&#125; /&gt; &lt;button onClick=&#123;() =&gt; &#123; this.setState((prevState) =&gt; (&#123; showWarning: !prevState.showWarning, &#125;)); &#125;&#125; &gt; &#123;/* ä¸‰å…ƒè¿ç®—ç¬¦ */&#125; &#123;this.state.showWarning ? &lt;span&gt;éšè—&lt;/span&gt; : &lt;span&gt;æ˜¾ç¤º&lt;/span&gt;&#125; &lt;/button&gt; &lt;/div&gt; ); &#125;&#125;ReactDOM.render(&lt;Toggle /&gt;, document.getElementById("root"));Â¶åã€åˆ—è¡¨ &amp; Keys123456789101112131415161718192021import React from "react";import ReactDOM from "react-dom";const posts = [ &#123; id: 1, title: "Hello World", content: "Welcome to learning React!" &#125;, &#123; id: 2, title: "Installation", content: "You can install React from npm." &#125;,];function Blog(props) &#123; const content = props.posts.map((post) =&gt; ( /* å…ƒç´ çš„ key åœ¨ä»–çš„å…„å¼Ÿå…ƒç´ ä¹‹é—´åº”è¯¥å”¯ä¸€ã€‚ Keys å¯ä»¥åœ¨ DOM ä¸­çš„æŸäº›å…ƒç´ è¢«å¢žåŠ æˆ–åˆ é™¤çš„æ—¶å€™å¸®åŠ© React è¯†åˆ«å“ªäº›å…ƒç´ å‘ç”Ÿäº†å˜åŒ– */ &lt;div key=&#123;post.id&#125;&gt; &lt;h3&gt;&#123;post.title&#125;&lt;/h3&gt; &lt;p&gt;&#123;post.content&#125;&lt;/p&gt; &lt;/div&gt; )); return &lt;div&gt;&#123;content&#125;&lt;/div&gt;;&#125;ReactDOM.render(&lt;Blog posts=&#123;posts&#125; /&gt;, document.getElementById("root"));Â¶åä¸€ã€ç»„ä»¶æ’æ§½1234567891011121314151617181920212223242526272829303132333435363738394041424344454647import React from "react";import ReactDOM from "react-dom";class Child extends React.Component &#123; render() &#123; let header, main, footer; this.props.children.forEach((item, index) =&gt; &#123; switch (item.props['data-position']) &#123; case "header": header = item break; case "main": main = item break; case "footer": footer = item break; default: break; &#125; &#125;) return ( &lt;div&gt; &lt;h2&gt;ç»„ä»¶æ’æ§½&lt;/h2&gt; &lt;div&gt;&#123;header&#125;&lt;/div&gt; &lt;div&gt;&#123;main&#125;&lt;/div&gt; &lt;div&gt;&#123;footer&#125;&lt;/div&gt; &lt;/div&gt; ) &#125;&#125;class Parent extends React.Component &#123; render() &#123; return ( &lt;Child&gt; &#123;/* ä¼ ç»™å­ç»„ä»¶æ’æ§½çš„å†…å®¹ */&#125; &lt;h1 data-position="header"&gt;header&lt;/h1&gt; &lt;h1 data-position="main"&gt;main&lt;/h1&gt; &lt;h1 data-position="footer"&gt;footer&lt;/h1&gt; &lt;/Child&gt; ) &#125;&#125;ReactDOM.render(&lt;Parent&gt;&lt;/Parent&gt;, document.getElementById("root"));Â¶åäºŒã€è·¯ç”±å®‰è£…ä¾èµ–1$ npm install react-router-dom --saveHome.jsx123456import React from "react";export default class Home extends React.Component &#123; render() &#123; return &lt;div&gt;æ¬¢è¿Žæ¥åˆ°ä¸»é¡µ&lt;/div&gt; &#125;&#125;About.jsx123456import React from "react";export default class About extends React.Component &#123; render() &#123; return &lt;div&gt;å…³äºŽæˆ‘......&lt;/div&gt; &#125;&#125;index.js12345678910111213141516171819202122232425262728293031import React from "react";import ReactDOM from "react-dom";import Home from "./Home"import About from "./About"//hashæ¨¡å¼// import &#123; HashRouter as Router, Link, Route &#125; from "react-router-dom";//historyæ¨¡å¼import &#123; BrowserRouter as Router, Link, Route &#125; from "react-router-dom";class App extends React.Component &#123; render() &#123; return ( &lt;div&gt; &lt;Router&gt; &#123;/* &lt;Router basename="/admin"&gt; basenameå¯ä»¥è®¾å®šæ‰€æœ‰è·¯ç”±å‰ç¼€*/&#125; &lt;div className="nav"&gt; &lt;Link to="/"&gt;Home&lt;/Link&gt; &lt;Link to="/about"&gt;About&lt;/Link&gt; &lt;/div&gt; &lt;Route path="/" exact component=&#123;Home&#125;&gt;&lt;/Route&gt;&#123;/* exactè¡¨ç¤ºä¸¥æ ¼åŒ¹é…æ¨¡å¼ */&#125; &lt;Route path="/about" exact component=&#123;About&#125;&gt;&lt;/Route&gt; &lt;/Router&gt; &lt;/div&gt; ); &#125;&#125;ReactDOM.render(&lt;App&gt;&lt;/App&gt;, document.getElementById("root"));Â¶åä¸‰ã€çŠ¶æ€ç®¡ç†ReduxÂ¶1. reduxå·¥ä½œæµç¨‹Â¶2. æ ¸å¿ƒæ¦‚å¿µaction:æ ‡è¯†è¦æ‰§è¡Œè¡Œä¸ºçš„å¯¹è±¡(åŒæ­¥action)ã€‚å®ƒçš„å€¼ä¹Ÿå¯ä»¥æ˜¯å‡½æ•°(å¼‚æ­¥action)ï¼Œä½†éœ€è¦å¼•å…¥redux-thunkã€‚åŒ…å«2ä¸ªæ–¹é¢çš„å±žæ€§ï¼štype: æ ‡è¯†å±žæ€§, å€¼ä¸ºå­—ç¬¦ä¸², å”¯ä¸€, å¿…è¦å±žæ€§xxx(ä¸€èˆ¬èµ·åä¸ºdata): æ•°æ®å±žæ€§, å€¼ç±»åž‹ä»»æ„, å¯é€‰å±žæ€§reducerä¸ºä¸€ä¸ªå‡½æ•°ï¼Œæ ¹æ®è€çš„stateå’ŒæŒ‡å®šçš„action, è¿”å›žä¸€ä¸ªæ–°çš„stateï¼Œä¸èƒ½ä¿®æ”¹è€çš„stateã€‚storeå°†state,actionä¸Žreducerè”ç³»åœ¨ä¸€èµ·çš„å¯¹è±¡ï¼Œæ˜¯reduxæœ€æ ¸å¿ƒçš„ç®¡ç†å¯¹è±¡ã€‚å†…éƒ¨ç®¡ç†ç€stateå’Œreducerï¼Œæä¾›æ–¹æ³•æœ‰ï¼šgetState(): å¾—åˆ°statedispatch(action): åˆ†å‘action, è§¦å‘reducerè°ƒç”¨, äº§ç”Ÿæ–°çš„statesubscribe(listener): æ³¨å†Œç›‘å¬, å½“äº§ç”Ÿäº†æ–°çš„stateæ—¶, è‡ªåŠ¨è°ƒç”¨Â¶3. ç›¸å…³API123reduxä¸­åŒ…å«: createStore(), applyMiddleware(), combineReducers()storeå¯¹è±¡: getState(), dispatch(), subscribe()react-redux: &lt;Provider&gt;, connect()()Â¶4. å®‰è£…ä¾èµ–1$ npm install redux --saveÂ¶5. ä½¿ç”¨æ¡ˆä¾‹action-types.js12345/*actionå¯¹è±¡çš„typeå¸¸é‡åç§°æ¨¡å— */export const INCREMENT = 'increment'export const DECREMENT = 'decrement'actions.js1234567/*action creatoræ¨¡å— */import &#123;INCREMENT, DECREMENT&#125; from './action-types'export const increment = number =&gt; (&#123;type: INCREMENT, number&#125;)export const decrement = number =&gt; (&#123;type: DECREMENT, number&#125;)reducers.js12345678910111213141516171819import &#123; INCREMENT, DECREMENT &#125; from "./action-types";/** * å®šä¹‰ä¸€ä¸ªreducerå‡½æ•° * æ ¹æ®è€çš„stateå’ŒæŒ‡å®šaction, å¤„ç†è¿”å›žä¸€ä¸ªæ–°çš„state * @param &#123;*&#125; state * @param &#123;Object&#125; action */export const counter = (state = 0, action) =&gt; &#123; switch (action.type) &#123; case INCREMENT: // è¿”å›žä¸€ä¸ªæ–°çš„çŠ¶æ€ï¼Œä¸èƒ½ä¿®æ”¹åŽŸæ¥çš„çŠ¶æ€ return state + action.number; case DECREMENT: return state - action.number; default: return state; &#125;&#125;;App.jsx1234567891011121314151617181920import React from "react";import * as actions from "./redux/actions";export default class App extends React.Component &#123; render() &#123; return ( &lt;div&gt; &lt;h1&gt; &#123;/* getState(): å¾—åˆ°state */&#125; &#123;this.props.store.getState()&#125; &lt;/h1&gt; &lt;p&gt; &#123;/* dispatch(action)ï¼šåˆ†å‘action, è§¦å‘reducerè°ƒç”¨, äº§ç”Ÿæ–°çš„state */&#125; &lt;button onClick=&#123;() =&gt; this.props.store.dispatch(actions.increment(1))&#125;&gt;increment&lt;/button&gt; &lt;button onClick=&#123;() =&gt; this.props.store.dispatch(actions.decrement(1))&#125;&gt;decrement&lt;/button&gt; &lt;/p&gt; &lt;/div&gt; ) &#125;&#125;index.js12345678910111213141516171819import React from "react";import ReactDOM from "react-dom";import &#123; createStore &#125; from "redux";import &#123; counter &#125; from "./redux/reducers";import App from "./App";//æ ¹æ®ä¸€ä¸ªreduceråˆ›å»ºstoreå¯¹è±¡const store = createStore(counter);// å®šä¹‰æ¸²æŸ“æ ¹ç»„ä»¶æ ‡ç­¾çš„å‡½æ•°const render = () =&gt; &#123; ReactDOM.render(&lt;App store=&#123;store&#125; /&gt;, document.getElementById("root"));&#125;;// åˆå§‹åŒ–æ¸²æŸ“render();// æ³¨å†Œ(è®¢é˜…)ç›‘å¬, ä¸€æ—¦çŠ¶æ€å‘ç”Ÿæ”¹å˜, è‡ªåŠ¨é‡æ–°æ¸²æŸ“store.subscribe(render);Â¶åå››ã€react-reduxä¸“é—¨ç”¨æ¥ç®€åŒ–reactåº”ç”¨ä¸­ä½¿ç”¨reduxçš„æ’ä»¶åº“ã€‚Â¶1. ä¸ºä»€ä¹ˆè¦ä½¿ç”¨react-reduxï¼Ÿreduxä¸Žreactç»„ä»¶çš„ä»£ç è€¦åˆåº¦å¤ªé«˜ç¼–ç ä¸å¤Ÿç®€æ´Â¶2. ç»„ä»¶åˆ†ç±»React-Reduxå°†æ‰€æœ‰ç»„ä»¶åˆ†æˆä¸¤å¤§ç±»ï¼šUIç»„ä»¶a. åªè´Ÿè´£ UI çš„å‘ˆçŽ°ï¼Œä¸å¸¦æœ‰ä»»ä½•ä¸šåŠ¡é€»è¾‘b. é€šè¿‡propsæŽ¥æ”¶æ•°æ®(ä¸€èˆ¬æ•°æ®å’Œå‡½æ•°)c. ä¸ä½¿ç”¨ä»»ä½• Redux çš„ APIå®¹å™¨ç»„ä»¶a. è´Ÿè´£ç®¡ç†æ•°æ®å’Œä¸šåŠ¡é€»è¾‘ï¼Œä¸è´Ÿè´£UIçš„å‘ˆçŽ°b. ä½¿ç”¨ Redux çš„ APIé€šè¿‡React-Reduxçš„ä½¿ç”¨å¯ä»¥è®©UIç»„ä»¶ä¸­å±è”½reduxä¾èµ–ï¼Œä»Žè€Œå®žçŽ°è§£è€¦çš„æ•ˆæžœã€‚Â¶3. å®‰è£…ä¾èµ–1$ npm install --save react-reduxÂ¶4. ä½¿ç”¨æ¡ˆä¾‹action-types.js12345/*actionå¯¹è±¡çš„typeå¸¸é‡åç§°æ¨¡å— */export const INCREMENT = 'increment'export const DECREMENT = 'decrement'actions.js1234567/*action creatoræ¨¡å— */import &#123;INCREMENT, DECREMENT&#125; from './action-types'export const increment = number =&gt; (&#123;type: INCREMENT, number&#125;)export const decrement = number =&gt; (&#123;type: DECREMENT, number&#125;)reducers.js12345678910111213141516171819import &#123; INCREMENT, DECREMENT &#125; from "./action-types";/** * å®šä¹‰ä¸€ä¸ªreducerå‡½æ•° * æ ¹æ®è€çš„stateå’ŒæŒ‡å®šaction, å¤„ç†è¿”å›žä¸€ä¸ªæ–°çš„state * @param &#123;*&#125; state * @param &#123;Object&#125; action */export const counter = (state = 0, action) =&gt; &#123; switch (action.type) &#123; case INCREMENT: // è¿”å›žä¸€ä¸ªæ–°çš„çŠ¶æ€ï¼Œä¸èƒ½ä¿®æ”¹åŽŸæ¥çš„çŠ¶æ€ return state + action.number; case DECREMENT: return state - action.number; default: return state; &#125;&#125;;components/counter.jsx1234567891011121314151617181920212223242526272829303132/* UIç»„ä»¶: ä¸åŒ…å«ä»»ä½•redux API a.åªè´Ÿè´£ UI çš„å‘ˆçŽ°ï¼Œä¸å¸¦æœ‰ä»»ä½•ä¸šåŠ¡é€»è¾‘ b.é€šè¿‡propsæŽ¥æ”¶æ•°æ®(ä¸€èˆ¬æ•°æ®å’Œå‡½æ•°) c.ä¸ä½¿ç”¨ä»»ä½• Redux çš„ API */import React from 'react'import PropTypes from 'prop-types'export default class Counter extends React.Component &#123; //å£°æ˜Žstoreç®¡ç†çš„çŠ¶æ€å’Œactionå‡½æ•°ï¼Œæ­¤å¤„æŽ¥æ”¶çš„å†…å®¹è¦å’Œå®¹å™¨ç»„ä»¶Appä¸­connect()ä¸­å®šä¹‰çš„çŠ¶æ€å±žæ€§åå’Œactionå‡½æ•°åä¸€è‡´ã€‚ static propTypes = &#123; count: PropTypes.number.isRequired, increment: PropTypes.func.isRequired, decrement: PropTypes.func.isRequired &#125; render() &#123; return ( &lt;div&gt; &lt;h1&gt; &#123;this.props.count&#125; &lt;/h1&gt; &lt;p&gt; &lt;button onClick=&#123;() =&gt; this.props.increment(1)&#125;&gt;increment&lt;/button&gt; &lt;button onClick=&#123;() =&gt; this.props.decrement(1)&#125;&gt;decrement&lt;/button&gt; &lt;/p&gt; &lt;/div&gt; ) &#125;&#125;containters/App.jsx12345678910111213141516171819202122232425/* åŒ…å«Counterç»„ä»¶çš„å®¹å™¨ç»„ä»¶ a.è´Ÿè´£ç®¡ç†æ•°æ®å’Œä¸šåŠ¡é€»è¾‘ï¼Œä¸è´Ÿè´£UIçš„å‘ˆçŽ° b.ä½¿ç”¨ Redux çš„ API */// å¼•å…¥è¿žæŽ¥å‡½æ•°import &#123; connect &#125; from 'react-redux'import &#123; increment, decrement &#125; from "../redux/actions";import Counter from '../components/counter'/** connect()ï¼šç”¨äºŽåŒ…è£…UIç»„ä»¶ä»Žè€Œç”Ÿæˆå®¹å™¨ç»„ä»¶ ç”±äºŽstoreæ˜¯ç»‘å®šåœ¨&lt;Provider/&gt;ä¸­çš„ï¼Œè€Œä¸æ˜¯&lt;Counter/&gt;ä¸­ï¼Œè¦åœ¨Counterç»„ä»¶ä¸­æŽ¥æ”¶storeé‡Œçš„å†…å®¹ï¼Œåˆ™éœ€è¦è®©storeå’ŒCounterç»„ä»¶è¿›è¡Œå…³è”ï¼Œ connect()å‡½æ•°å°±èµ·åˆ°äº†å…³è”çš„ä½œç”¨ã€‚åŽŸç†å°±æ˜¯å°†Providerä¸­storeé‡Œçš„å†…å®¹è§£æžæ”¾åˆ°Counterç»„ä»¶ä¸­åŽ»ã€‚ */export default connect( state =&gt; (&#123; count: state &#125;), &#123; increment, decrement &#125;)(Counter)/* connect( mapStateToprops, //å³stateå¯¹è±¡çš„å±žæ€§ç»„æˆçš„å¯¹è±¡ mapDispatchToProps //actionçš„ç›¸å…³å‡½æ•°ç»„æˆçš„å¯¹è±¡ )(Counter)*/index.js12345678910111213141516171819import React from "react";import ReactDOM from "react-dom";import &#123; createStore &#125; from "redux";import &#123; counter &#125; from "./redux/reducers";import &#123; Provider &#125; from "react-redux";import App from "./containters/App";//æ ¹æ®ä¸€ä¸ªreduceråˆ›å»ºstoreå¯¹è±¡const store = createStore(counter);/** * Providerï¼šè®©æ‰€æœ‰ç»„ä»¶éƒ½å¯ä»¥å¾—åˆ°stateæ•°æ® */ReactDOM.render( &lt;Provider store=&#123;store&#125;&gt; &lt;App /&gt; &lt;/Provider&gt;, document.getElementById("root"),);Â¶åäº”ã€reduxå¼‚æ­¥ç¼–ç¨‹Â¶1. ä¸ºä»€ä¹ˆè¦ä½¿ç”¨å› ä¸ºreduxé»˜è®¤æ˜¯ä¸èƒ½è¿›è¡Œå¼‚æ­¥å¤„ç†çš„ï¼Œä½†å®žé™…åº”ç”¨ä¸­å´å¯èƒ½éœ€è¦åœ¨reduxä¸­ç”¨åˆ°å¼‚æ­¥å¤„ç†ã€‚Â¶2. å®‰è£…ä¾èµ–1$ npm install --save redux-thunkÂ¶3. ä½¿ç”¨æ¡ˆä¾‹action-types.js12345/*actionå¯¹è±¡çš„typeå¸¸é‡åç§°æ¨¡å— */export const INCREMENT = 'increment'export const DECREMENT = 'decrement'actions.js12345678910111213141516171819/*action creatoræ¨¡å—åŒæ­¥actionè°ƒç”¨æ—¶è¿”å›žå¯¹è±¡å¼‚æ­¥actionè°ƒç”¨æ—¶è¿”å›žä¸€ä¸ªå‡½æ•° */import &#123; INCREMENT, DECREMENT &#125; from "./action-types";export const increment = (number) =&gt; (&#123; type: INCREMENT, number &#125;);export const decrement = (number) =&gt; (&#123; type: DECREMENT, number &#125;);// å¼‚æ­¥action creator(è¿”å›žä¸€ä¸ªå‡½æ•°)export const incrementAsync = (number) =&gt; &#123; return (dispatch) =&gt; &#123; //å¼‚æ­¥å¤„ç† setTimeout(() =&gt; &#123; dispatch(increment(number)); &#125;, 2000); &#125;;&#125;;reducers.js12345678910111213141516171819import &#123; INCREMENT, DECREMENT &#125; from "./action-types";/** * å®šä¹‰ä¸€ä¸ªreducerå‡½æ•° * æ ¹æ®è€çš„stateå’ŒæŒ‡å®šaction, å¤„ç†è¿”å›žä¸€ä¸ªæ–°çš„state * @param &#123;*&#125; state * @param &#123;Object&#125; action */export const counter = (state = 0, action) =&gt; &#123; switch (action.type) &#123; case INCREMENT: // è¿”å›žä¸€ä¸ªæ–°çš„çŠ¶æ€ï¼Œä¸èƒ½ä¿®æ”¹åŽŸæ¥çš„çŠ¶æ€ return state + action.number; case DECREMENT: return state - action.number; default: return state; &#125;&#125;;components/counter.jsx12345678910111213141516171819202122232425262728293031323334/* UIç»„ä»¶: ä¸åŒ…å«ä»»ä½•redux API a.åªè´Ÿè´£ UI çš„å‘ˆçŽ°ï¼Œä¸å¸¦æœ‰ä»»ä½•ä¸šåŠ¡é€»è¾‘ b.é€šè¿‡propsæŽ¥æ”¶æ•°æ®(ä¸€èˆ¬æ•°æ®å’Œå‡½æ•°) c.ä¸ä½¿ç”¨ä»»ä½• Redux çš„ API */import React from 'react'import PropTypes from 'prop-types'export default class Counter extends React.Component &#123; //å£°æ˜Žstoreç®¡ç†çš„çŠ¶æ€å’Œactionå‡½æ•°ï¼Œæ­¤å¤„æŽ¥æ”¶çš„å†…å®¹è¦å’Œå®¹å™¨ç»„ä»¶Appä¸­connect()ä¸­å®šä¹‰çš„çŠ¶æ€å±žæ€§åå’Œactionå‡½æ•°åä¸€è‡´ã€‚ static propTypes = &#123; count: PropTypes.number.isRequired, increment: PropTypes.func.isRequired, decrement: PropTypes.func.isRequired, incrementAsync: PropTypes.func.isRequired &#125; render() &#123; return ( &lt;div&gt; &lt;h1&gt; &#123;this.props.count&#125; &lt;/h1&gt; &lt;p&gt; &lt;button onClick=&#123;() =&gt; this.props.increment(1)&#125;&gt;increment&lt;/button&gt; &lt;button onClick=&#123;() =&gt; this.props.decrement(1)&#125;&gt;decrement&lt;/button&gt; &lt;button onClick=&#123;() =&gt; this.props.incrementAsync(1)&#125;&gt;incrementAsync&lt;/button&gt; &lt;/p&gt; &lt;/div&gt; ) &#125;&#125;containters/App.jsx12345678910111213141516171819202122232425/* åŒ…å«Counterç»„ä»¶çš„å®¹å™¨ç»„ä»¶ a.è´Ÿè´£ç®¡ç†æ•°æ®å’Œä¸šåŠ¡é€»è¾‘ï¼Œä¸è´Ÿè´£UIçš„å‘ˆçŽ° b.ä½¿ç”¨ Redux çš„ API */// å¼•å…¥è¿žæŽ¥å‡½æ•°import &#123; connect &#125; from 'react-redux'import * as actions from "../redux/actions";import Counter from '../components/counter'/** connect()ï¼šç”¨äºŽåŒ…è£…UIç»„ä»¶ä»Žè€Œç”Ÿæˆå®¹å™¨ç»„ä»¶ ç”±äºŽstoreæ˜¯ç»‘å®šåœ¨&lt;Provider/&gt;ä¸­çš„ï¼Œè€Œä¸æ˜¯&lt;Counter/&gt;ä¸­ï¼Œè¦åœ¨Counterç»„ä»¶ä¸­æŽ¥æ”¶storeé‡Œçš„å†…å®¹ï¼Œåˆ™éœ€è¦è®©storeå’ŒCounterç»„ä»¶è¿›è¡Œå…³è”ï¼Œ connect()å‡½æ•°å°±èµ·åˆ°äº†å…³è”çš„ä½œç”¨ã€‚åŽŸç†å°±æ˜¯å°†Providerä¸­storeé‡Œçš„å†…å®¹è§£æžæ”¾åˆ°Counterç»„ä»¶ä¸­åŽ»ã€‚ */export default connect( state =&gt; (&#123; count: state &#125;), &#123; ...actions &#125;)(Counter)/* connect( mapStateToprops, //å³stateå¯¹è±¡çš„å±žæ€§ç»„æˆçš„å¯¹è±¡ mapDispatchToProps //actionçš„ç›¸å…³å‡½æ•°ç»„æˆçš„å¯¹è±¡ )(Counter)*/index.js1234567891011121314151617181920212223import React from "react";import ReactDOM from "react-dom";import &#123; createStore, applyMiddleware &#125; from "redux";import thunk from "redux-thunk";import &#123; counter &#125; from "./redux/reducers";import &#123; Provider &#125; from "react-redux";import App from "./containters/App";//æ ¹æ®ä¸€ä¸ªreduceråˆ›å»ºstoreå¯¹è±¡const store = createStore( counter, applyMiddleware(thunk), // åº”ç”¨ä¸Šå¼‚æ­¥ä¸­é—´ä»¶);/** * Providerï¼šè®©æ‰€æœ‰ç»„ä»¶éƒ½å¯ä»¥å¾—åˆ°stateæ•°æ® */ReactDOM.render( &lt;Provider store=&#123;store&#125;&gt; &lt;App /&gt; &lt;/Provider&gt;, document.getElementById("root"),);]]></content>
      <categories>
        <category>front</category>
      </categories>
      <tags>
        <tag>react</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[dockerå®‰è£…oracle]]></title>
    <url>%2Fdevops%2Foracle_docker.html</url>
    <content type="text"><![CDATA[è¿™é‡Œç»™å‡ºä¸¤ç§æ–¹å¼ï¼Œç¬¬ä¸€ç§æ˜¯ç›´æŽ¥ä½¿ç”¨åˆ«äººå·²ç»å®‰è£…å¹¶é…ç½®å¥½oracleçš„é•œåƒï¼Œç¬¬äºŒç§æ˜¯å·²ç»å†™å¥½å®‰è£…è„šæœ¬ï¼Œåªéœ€æŒ‡å®šå®‰è£…åŒ…ç›®å½•å°±èƒ½å¾—åˆ°oracleå®¹å™¨ã€‚Â¶ä¸€ã€oracle11gR2Â¶1ã€ç¬¬ä¸€ç§Â¶1.1 æ‹‰å–é•œåƒ1$ docker pull registry.cn-hangzhou.aliyuncs.com/helowin/oracle_11gè¯¥é•œåƒç”±é˜¿é‡Œäº‘æä¾›ï¼Œæ¯”è¾ƒå¤§ï¼Œå¯èƒ½éœ€è¦ä¸‹è½½ä¸€ä¼šï¼Œç­‰å¾…ä¸‹è½½å³å¯ã€‚Â¶1.2 è¿è¡Œå®¹å™¨1234#é€šè¿‡é•œåƒè¿è¡Œå®¹å™¨$ docker run -d -p 1521:1521 --name oracle registry.aliyuncs.com/helowin/oracle_11g#æ£€æŸ¥å®¹å™¨æ˜¯å¦è¿è¡ŒæˆåŠŸ$ docker psÂ¶1.3 é…ç½®oracleÂ¶ï¼ˆ1ï¼‰é…ç½®çŽ¯å¢ƒå˜é‡1234567891011121314151617#è¿›å…¥å®¹å™¨$ docker exec -it oracle bash#åˆ‡æ¢åˆ°rootç”¨æˆ·ï¼Œå¯†ç æ˜¯helowin$ su root$ vi /etc/profile#åœ¨æ–‡ä»¶çš„æœ«å°¾æ·»åŠ ä»¥ä¸‹å†…å®¹export ORACLE_HOME=/home/oracle/app/oracle/product/11.2.0/dbhome_2export ORACLE_SID=helowinexport PATH=$ORACLE_HOME/bin:$PATH# åˆ·æ–°é…ç½®æ–‡ä»¶ï¼Œä½¿å¾—çŽ¯å¢ƒå˜é‡ç”Ÿæ•ˆ$ source /etc/profile#åˆ›å»ºè½¯è¿žæŽ¥$ ln -s $ORACLE_HOME/bin/sqlplus /usr/binÂ¶ï¼ˆ2ï¼‰åˆ›å»ºæˆ–ä¿®æ”¹oracleç”¨æˆ·å¯†ç 12345678910111213141516#ä»Žrootç”¨æˆ·åˆ‡æ¢åˆ°oracleç”¨æˆ·$ su oracle#ä½¿ç”¨sysdba è¿žæŽ¥oracle$ sqlplus /nologSQL&gt; conn /as sysdba#åˆ›å»ºqcmokeç”¨æˆ·ï¼Œå¯†ç 123456SQL&gt; create user qcmoke identified by 123456;SQL&gt; grant connect,resource to qcmoke;SQL&gt; commit;#ä¿®æ”¹systemçš„å¯†ç ä¸ºsystemSQL&gt; alter user system identified by system;#ä¿®æ”¹sysçš„å¯†ç ä¸ºsysSQL&gt; alter user sys identified by sys;#é€€å‡ºorcleSQL&gt; exitÂ¶1.4 å®¢æˆ·ç«¯ç™»é™†oracleå®¢æˆ·ç«¯é…ç½®ï¼ˆå‡è®¾oracleæœåŠ¡ç«¯ipä¸ºï¼šexample.comï¼‰ï¼š123456789helowin = (DESCRIPTION = (ADDRESS_LIST = (ADDRESS = (PROTOCOL = TCP)(HOST = example.com)(PORT = 1521)) ) (CONNECT_DATA = (SERVICE_NAME = helowin) ) )è¿žæŽ¥æœåŠ¡åï¼šhelowinè´¦å·ï¼šsystemï¼Œå¯†ç ï¼šsystemæˆ–è€…è´¦å·ï¼šqcmokeï¼Œå¯†ç ï¼š123456springbooté…ç½®12345678spring: datasource: driver-class-name: oracle.jdbc.driver.OracleDriver url: jdbc:oracle:thin:@example.com:1521:helowin username: system password: system #username: qcmoke #password: 123456Â¶2ã€ç¬¬äºŒç§Â¶2.1 ä¸‹è½½å®‰è£…åŒ…å®‰è£…åŒ…ä¸‹è½½åœ°å€:https://www.oracle.com/database/technologies/112010-linx8664soft.htmlä¸‹è½½ä¸¤ä¸ªoracleå®‰è£…åŒ…ï¼šlinux.x64_11gR2_database_1of2.zip å’Œ linux.x64_11gR2_database_2of2.zipðŸ’â€â™‚æ¸©é¦¨æç¤ºï¼šå¦‚æžœå®˜æ–¹ä¸‹è½½åœ°å€å¤±æ•ˆï¼Œå¯åˆ°æœ¬äººç½‘ç›˜ä¸‹è½½ï¼šé“¾æŽ¥ï¼šhttps://pan.baidu.com/s/1YwFRecm1_O3pA5efxak7iwæå–ç ï¼še5rjÂ¶2.2 è¿è¡Œå®¹å™¨1234#è§£åŽ‹å®‰è£…åŒ…åˆ°/installç›®å½•$ mkdir /install/ &amp;&amp; unzip ~/linux.x64_11gR2_database_1of2.zip -d /install/ &amp;&amp; unzip ~/linux.x64_11gR2_database_2of2.zip -d /install/#æ‹‰åŽ»å¹¶è¿è¡Œå®¹å™¨$ docker run --privileged --name oracle11g -p 1522:1521 -v /install:/install jaspeen/oracle-11gÂ¶2.3 åˆ›å»ºæˆ–ä¿®æ”¹oracleç”¨æˆ·å¯†ç 123456789101112131415161718192021222324252627#è¿›å…¥oracle11gå®¹å™¨$ docker exec -it oracle11g /bin/bash#åˆ‡æ¢åˆ°imageçš„oracleç”¨æˆ·$ su - oracle#è¿›å…¥oracleæ•°æ®åº“$ sqlplus / as sysdba#åˆ›å»ºqcmokeç”¨æˆ·ï¼Œå¯†ç 123456SQL&gt; create user qcmoke identified by 123456;SQL&gt; grant connect,resource to qcmoke;SQL&gt; commit;#è§£é”scottç”¨æˆ·SQL&gt; alter user scott account unlock;User altered.SQL&gt; commit;Commit complete.SQL&gt; conn scott/tigerERROR:ORA-28001: the password has expiredChanging password for scott#è¾“å…¥tigerå³å¯New password:#åœ¨æ­¤è¾“å…¥tigerå³å¯Retype new password:Password changedConnected.SQL&gt;Â¶2.4 å®¢æˆ·ç«¯ç™»å½•oracleå®¢æˆ·ç«¯é…ç½®ï¼ˆå‡è®¾oracleæœåŠ¡ç«¯ipä¸º39.108.102.215ï¼‰ï¼š123456789orcl = (DESCRIPTION = (ADDRESS_LIST = (ADDRESS = (PROTOCOL = TCP)(HOST = 39.108.102.215)(PORT = 1522)) ) (CONNECT_DATA = (SERVICE_NAME = orcl) ) )è¿žæŽ¥æœåŠ¡åï¼šorclè´¦å·ï¼šscottï¼Œå¯†ç ï¼štigeræˆ–è€…è´¦å·ï¼šqcmokeï¼Œå¯†ç ï¼š123456springbooté…ç½®12345678spring: datasource: driver-class-name: oracle.jdbc.driver.OracleDriver url: jdbc:oracle:thin:@39.108.102.215:1522:orcl username: scott password: tiger #username: qcmoke #password: 123456Â¶äºŒã€oracle19cæœ‰æ—¶å€™ä¸ºäº†è¯•éªŒï¼Œéœ€è¦å®‰è£…Oracleæ–°ç‰ˆæœ¬æ•°æ®åº“ï¼Œç”±äºŽå®‰è£…æ¯”è¾ƒç¹çè€—æ—¶ï¼Œæ‰€ä»¥å¯é€šè¿‡dockerå¿«é€Ÿå®‰è£…éƒ¨ç½²ã€‚éœ€è¦æå‰ä¸‹è½½å¥½oracle19cçš„å®‰è£…åŒ…ï¼šhttps://www.oracle.com/database/technologies/oracle-database-software-downloads.html#19cï¼Œä¸‹è½½Linux x86-64çš„ZIPåŒ…å³å¯ï¼Œä¸‹è½½åŽå¾—åˆ°LINUX.X64_193000_db_home.zipã€‚123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263$ git clone https://github.com/oracle/docker-images.git#æŠŠä¸‹è½½å¥½çš„LINUX.X64_193000_db_home.zipåŽ‹ç¼©åŒ…æ”¾åˆ°docker-images/OracleDatabase/SingleInstance/dockerfiles/19.3.0é‡Œ$ cd docker-images/OracleDatabase/SingleInstance/dockerfiles/#ç”Ÿæˆdockeré•œåƒï¼ˆæ³¨æ„æž„ä»¶çš„è¿‡ç¨‹ä¸­ä¾èµ–oraclelinux:7-slimé•œåƒï¼Œå¦‚æžœæœåŠ¡å™¨å¯è¿žæŽ¥äº’è”ç½‘ï¼Œé‚£ä¹ˆæž„å»ºçš„è¿‡ç¨‹ä¼šè‡ªåŠ¨ä¸‹è½½è¯¥é•œåƒï¼Œå¦‚æžœæ˜¯å†…ç½‘çŽ¯å¢ƒæž„å»ºçš„è¯ï¼Œå¯ä»¥é€šè¿‡ç¦»çº¿å¯¼å…¥é•œåƒçš„æ–¹å¼å¾—åˆ°ï¼‰$ sh buildContainerImage.sh -v 19.3.0 -e#æŸ¥çœ‹ç”Ÿæˆçš„é•œåƒ$ docker imagesREPOSITORY TAG IMAGE ID CREATED SIZEoracle/database 19.3.0-ee 2f97d020b76a 3 hours ago 6.53GBoraclelinux 7-slim 0a28ba78f4c9 4 weeks ago 132MB#å‡è®¾å°†oracleçš„æ•°æ®æ–‡ä»¶æŒ‚è½½åˆ°å®¿ä¸»æœºä¸Šï¼Œæ³¨æ„ï¼šç›®å½•æƒé™ä¸€å®šè¦æ­£ç¡®ï¼Œåœ¨å®¹å™¨ä¸­oracleç”¨æˆ·çš„uidæ˜¯54321ï¼Œæ‰€ä»¥è¦ä¿è¯å®¹å™¨å†…çš„oracleç”¨æˆ·æœ‰æƒé™è¯»å†™è¯¥ç›®å½•ã€‚æ‰€ä»¥éœ€è¦åˆ›å»ºoracleç”¨æˆ·ä¸”uidæ˜¯54321ï¼Œå¹¶ç»™æŒ‚è½½çš„ç›®å½•è®¾ç½®æƒé™ã€‚$ groupadd -g 54321 oinstall $ groupadd -g 54322 dba$ groupadd -g 54323 oper$ groupadd -g 54324 backupdba$ groupadd -g 54325 dgdba$ groupadd -g 54326 kmdba$ groupadd -g 54330 racdba$ useradd -u 54321 -g oinstall -G dba,oper,backupdba,dgdba,kmdba,racdba -d /home/oracle -s /bin/bash -c "Oracle Software Owner" oracle echo "123456" | passwd --stdin oracle$ mkdir -p /data1/oracle/oradata$ chown oracle:oinstall /data1/oracle/oradata#é€šè¿‡é•œåƒåˆ›å»ºå¹¶è¿è¡Œoracle dockerå®¹å™¨å®žä¾‹ï¼Œè®¾ç½®æ•°æ®åº“çš„sidä¸ºxtcrmï¼›pdbåç§°ä¸ºpdbï¼›å¹¶ä¸”è®¾ç½®sysã€systemã€pdbadminç”¨æˆ·å¯†ç ä¸º123456$ docker run --name oracle-19c \-d \-p 1521:1521 -p 5500:5500 \-e ORACLE_SID=xtcrm \-e ORACLE_PDB=pdb \-e ORACLE_PWD=123456 \-v /data1/oracle/oradata:/opt/oracle/oradata \oracle/database:19.3.0-ee#æŸ¥çœ‹æ—¥å¿—$ docker logs -f oracle-19c#æ³¨æ„è¦ç­‰æ—¥å¿—åˆ°çœ‹åˆ°å¦‚ä¸‹æç¤ºï¼Œæ‰è¯´æ˜Žå¯åŠ¨å¹¶ä¸”åˆ›å»ºæ•°æ®åº“å®žä¾‹æˆåŠŸï¼Œè¿™ä¸ªæ—¶é—´æœ‰ç‚¹é•¿ï¼Œéœ€è¦è€å¿ƒç­‰å¾…ã€‚#########################DATABASE IS READY TO USE!##########################è¿›å…¥oracle dockerå®¹å™¨æ‰§è¡Œsql$ docker exec -it oracle-19c /bin/bash$ export ORACLE_SID=XTCRM #æ³¨æ„æ¯æ¬¡è¿›å…¥å®¹å™¨éƒ½æ‰§è¡Œä»¥ä¸‹è¿™ä¸ªå‘½ä»¤$ sqlplus / as sysdbaSQL&gt; show pdbs;#åˆ›å»ºæ™®é€šç”¨æˆ·$ docker exec -it oracle-19c /bin/bash$ export ORACLE_SID=XTCRM #æ³¨æ„æ¯æ¬¡è¿›å…¥å®¹å™¨éƒ½æ‰§è¡Œä»¥ä¸‹è¿™ä¸ªå‘½ä»¤$ sqlplus / as sysdbaSQL&gt; alter session set "_ORACLE_SCRIPT"=true; SQL&gt; create user qcmoke identified by 123456;SQL&gt; grant connect,resource to qcmoke;#SQL&gt; grant connect,resource,dba to qcmoke;#æŸ¥çœ‹å­—ç¬¦ç¼–ç SQL&gt; select userenv('language') from dual;å¯ä»¥åˆ†äº«é•œåƒç»™å…¶ä»–æœåŠ¡å™¨ä½¿ç”¨123456#é•œåƒå¯¼å‡º$ docker save -o oracle_database_19.3.0-ee.tar 2f97d020b76a#é•œåƒå¯¼å…¥$ docker load -i oracle_database_19.3.0-ee.tar#å¦‚æžœå·²ç»æ˜¯&lt;none&gt;å¾—åç§°äº†ï¼Œä¹Ÿå¯ä»¥é€šè¿‡ä»¥ä¸‹å‘½ä»¤é‡å‘½åé•œåƒåç§°$ docker tag 2f97d020b76a oracle/database:19.3.0-eeOracle Enterprise Manageè®¿é—®åœ°å€ï¼šhttps://10.223.117.106:5500/emUsernameï¼šsysPasswordï¼š123456Container Nameï¼špdbæ—¶é—´åŒæ­¥é—®é¢˜ï¼š12#åœ¨å®¿ä¸»æœºä¸Šå¤åˆ¶æ—¶é—´æ–‡ä»¶åˆ°å®¹å™¨ä¸­å³å¯$ docker cp /usr/share/zoneinfo/Asia/Shanghai oracle-19c:/etc/localtimeå‚è€ƒï¼šhttps://www.jianshu.com/p/4ede7dcc1d86https://hub.docker.com/r/jaspeen/oracle-11ghttps://github.com/oracle/docker-images/tree/main/OracleDatabase/SingleInstancehttps://www.jianshu.com/p/b683640677c9]]></content>
      <categories>
        <category>devops</category>
      </categories>
      <tags>
        <tag>oracle</tag>
        <tag>linux - docker</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[k8så­¦ä¹ ç¬”è®°]]></title>
    <url>%2Fdevops%2Fk8s.html</url>
    <content type="text"><![CDATA[Â¶ä¸€ã€æ¦‚å¿µÂ¶1. å®šä¹‰k8sæ˜¯Googleå¼€æºçš„ä¸€ä¸ªå®¹å™¨é›†ç¾¤ç®¡ç†ç³»ç»Ÿã€‚k8sç”¨äºŽå®¹å™¨åŒ–åº”ç”¨ç¨‹åºéƒ¨ç½²ã€æ‰©å±•å’Œç®¡ç†ã€‚k8sæä¾›äº†å®¹å™¨ç¼–æŽ’ï¼Œèµ„æºè°ƒåº¦ï¼Œè‡ªåŠ¨ä¿®å¤ï¼Œå¼¹æ€§ä¼¸ç¼©ï¼ˆè‡ªåŠ¨æ ¹æ®æœåŠ¡å™¨çš„å¹¶å‘æƒ…å†µæ‰©å¢žæˆ–è€…ç¼©å‡å®¹å™¨æ•°é‡)ï¼Œè‡ªåŠ¨éƒ¨ç½²ï¼Œå›žæ»šå¤„ç†ï¼ŒæœåŠ¡å‘çŽ°ï¼Œè´Ÿè½½å‡è¡¡ç­‰ä¸€äº›åˆ—åŠŸèƒ½ã€‚k8sç›®æ ‡æ˜¯è®©å®¹å™¨åŒ–åº”ç”¨ç®€å•é«˜æ•ˆã€‚å®˜ç½‘ï¼šhttps://kubernetes.ioå®˜æ–¹ä¸­æ–‡æ–‡æ¡£ï¼šhttps://kubernetes.io/zh/docs/homeç®€å•ç†è§£ï¼šä»…ç”¨ Dockerï¼Œåˆ™åªèƒ½ç®¡ç†å•ä¸ªæœåŠ¡å™¨èŠ‚ç‚¹çš„å®¹å™¨ï¼Œè€Œæ— æ³•åŒæ—¶ç»´æŠ¤å¤šä¸ªæœåŠ¡å™¨èŠ‚ç‚¹ã€‚é€šè¿‡ä½¿ç”¨k8såˆ™å¯ä»¥ä½¿ç”¨åŒä¸€å…¥å£å³å¯åŒæ—¶ç»´æŠ¤å¤šä¸ªæœåŠ¡å™¨èŠ‚ç‚¹çš„æ‰€æœ‰å®¹å™¨ï¼Œå¹¶å¯ä»¥å®žçŽ°å¤šæœåŠ¡å™¨ä¹‹é—´çš„è‡ªåŠ¨ä¿®å¤ï¼Œå¼¹æ€§ä¼¸ç¼©ï¼Œå›žæ»šå¤„ç†ï¼ŒæœåŠ¡å‘çŽ°ï¼Œè´Ÿè½½å‡è¡¡ç­‰ã€‚Â¶2. æ ¸å¿ƒå¯¹è±¡Kubernetes å¯¹è±¡Podæœ€å°å¯éƒ¨ç½²å•å…ƒï¼ˆk8sä¸èƒ½ç›´æŽ¥å¯åŠ¨å®¹å™¨ï¼Œè€Œæ˜¯éœ€è¦é€šè¿‡Podé—´æŽ¥å¯åŠ¨å®¹å™¨ï¼‰ä¸€ç»„å®¹å™¨ï¼ˆdockerï¼‰é›†åˆä¸€ä¸ªPodä¸­çš„æ‰€æœ‰å®¹å™¨å…±äº«ç½‘ç»œå‘½åç©ºé—´Podæ˜¯çŸ­æš‚çš„ï¼Œè¿è¡Œå®Œå°±ç»“æŸäº†Service æœåŠ¡å°†ä¸€ç»„Podï¼ˆæ¯”å¦‚mysql Podï¼‰å…³è”èµ·æ¥ï¼Œæä¾›ç»Ÿä¸€çš„å…¥å£é˜²æ­¢podå¤±è”ï¼ŒPodåœ°å€å‘ç”Ÿæ”¹å˜ï¼Œå…¥å£ä¸å—å½±å“Volume æ•°æ®å·ç±»ä¼¼äºŽDockerçš„VolumeNamespace å‘½åç©ºé—´ç”¨äºŽéš”ç¦»Podçš„è¿è¡ŒçŽ¯å¢ƒï¼ˆé»˜è®¤æƒ…å†µPodå¯ä»¥äº’ç›¸è®¿é—®ï¼‰ä½¿ç”¨åœºæ™¯ï¼šâ‘ ä¸ºå¼€å‘çŽ¯å¢ƒã€æµ‹è¯•çŽ¯å¢ƒã€ç”Ÿäº§çŽ¯å¢ƒå‡†å¤‡ä¸åŒçš„å‘½åç©ºé—´â‘¡ä¸ºä¸åŒçš„ç”¨æˆ·æä¾›ä¸åŒçš„éš”ç¦»çš„è¿è¡ŒçŽ¯å¢ƒController æŽ§åˆ¶å™¨ControlleræŽ§åˆ¶å™¨åŸºæœ¬å¯¹è±¡æž„å»ºå¹¶æä¾›é¢å¤–çš„åŠŸèƒ½å’Œæ–¹ä¾¿ä½¿ç”¨çš„ç‰¹æ€§ï¼Œç”¨äºŽæŽ§åˆ¶podå¯åŠ¨ã€åœæ­¢ã€åˆ é™¤ç­‰ã€‚DeploymentDaemonSetStatefulSetReplicaSetJobÂ¶3. èŠ‚ç‚¹åˆ†ç±»å’Œé‡è¦ç»„ä»¶master nodeï¼šä¸»æŽ§èŠ‚ç‚¹worker nodeï¼šå·¥ä½œèŠ‚ç‚¹ï¼ˆ1ï¼‰master node ç›¸å…³çš„ç»„ä»¶ï¼ˆç¨‹åºï¼‰apiserverï¼šæŽ¥æ”¶å®¢æˆ·ç«¯æ“ä½œk8sçš„æŒ‡ä»¤ï¼ˆå”¯ä¸€å…¥å£ï¼‰ï¼Œæ­¤å¤–ä¹Ÿæ˜¯å…¶ä»–ç»„ä»¶äº’è°ƒçš„æ¡¥æ¢ã€‚æä¾›è®¤è¯ã€æŽˆæƒã€è®¿é—®æŽ§åˆ¶ã€API æ³¨å†Œå’Œå‘çŽ°ç­‰æœºåˆ¶ã€‚schdulerï¼šè´Ÿè´£èµ„æºè°ƒåº¦ï¼Œæ ¹æ®è§„å®šçš„è°ƒåº¦ç­–ç•¥ï¼Œåœ¨å¤šä¸ªworker nodeæœåŠ¡å™¨çš„podä¸­é€‰ä¸¾ä¸€ä¸ªæ¥éƒ¨ç½²å®¹å™¨ã€‚controller managerï¼šç®¡ç†æŽ§åˆ¶å™¨ï¼Œè´Ÿè´£ç»´æŠ¤æŠ€å·§çš„çŠ¶æ€ï¼ŒåŒ…æ‹¬æ•…éšœæ£€æµ‹ã€è‡ªåŠ¨æ‰©å±•ã€æ»šåŠ¨æ›´æ–°ç­‰ï¼Œä»¥åŠç”¨äºŽå‘work nodeçš„kubeletå‘é€æŒ‡ä»¤ã€‚etcdï¼šåˆ†å¸ƒå¼é”®å€¼å¯¹æ•°æ®åº“ã€‚ç”¨äºŽä¿å­˜æ•´ä¸ªé›†ç¾¤çš„çŠ¶æ€æ•°æ®ï¼Œæ¯”å¦‚podã€serviceç­‰å¯¹è±¡ä¿¡æ¯ã€‚ï¼ˆ2ï¼‰worker node ç›¸å…³çš„ç»„ä»¶ï¼ˆç¨‹åºï¼‰kubeletï¼šå‘å®¹å™¨å‘é€æŒ‡ä»¤ä»¥ç®¡ç†å®¹å™¨ï¼ŒåŒæ—¶è´Ÿè´£ Volumeï¼ˆCVIï¼‰å’Œç½‘ç»œï¼ˆCNIï¼‰çš„ç®¡ç†ã€‚å¹¶æ±‡æŠ¥èŠ‚ç‚¹çŠ¶æ€ç»™apiserverï¼Œå†ä¿å­˜çŠ¶æ€è‡³etcdã€‚kubeproxyï¼šç®¡ç†dockerå®¹å™¨çš„ç½‘ç»œï¼ˆåŒ…æ‹¬æœåŠ¡å‘çŽ°ä¸Žè´Ÿè½½å‡è¡¡ç­‰ï¼Œä¸»è¦æä¾› iptablesã€ipvs è§„åˆ™ï¼‰ã€‚Â¶äºŒã€éƒ¨ç½² k8s é›†ç¾¤Â¶1. é›†ç¾¤è§„åˆ’ä¸»æœºåipç»„ä»¶k8s-master192.168.60.101kube-apiserverã€kube-controller-managerã€kube-schedulerã€etcdk8s-node1192.168.60.201kubeletã€kube-proxyk8s-node2192.168.60.202kubeletã€kube-proxyÂ¶2. ç³»ç»ŸçŽ¯å¢ƒæ“ä½œç³»ç»Ÿï¼šcentos7k8sç‰ˆæœ¬ï¼š1.23.6dockerç‰ˆæœ¬ï¼š18.09.9-3ç¡¬ä»¶é…ç½®ï¼šè‡³å°‘2Gå†…å­˜ï¼Œ2æ ¸CPUÂ¶3. åˆå§‹åŒ–æœåŠ¡å™¨ï¼ˆ1ï¼‰å…³é—­é˜²ç«å¢™12systemctl stop firewalldsystemctl disable firewalldå¦‚ä¸ºäº‘æœåŠ¡å™¨ï¼Œåˆ™éœ€è¦æ³¨æ„å¼€æ”¾ç›¸å…³å®‰å…¨ç»„ç«¯å£ï¼šmaster èŠ‚ç‚¹ï¼šTCPè‡³å°‘å¼€æ”¾ï¼š6443ã€2379ã€2380ã€60080ã€60081ï¼›UDPåè®®ç«¯å£å…¨å¼€worker èŠ‚ç‚¹ï¼šUDPåè®®ç«¯å£å…¨å¼€ï¼ˆ2ï¼‰å…³é—­selinux1234567# ä¸´æ—¶ç”Ÿæ•ˆsetenforce 0# æ°¸ä¹…ç”Ÿæ•ˆï¼ˆæŽ¨èï¼‰sed -i 's/enforcing/disabled/' /etc/selinux/config# é‡å¯ä»¥ç”Ÿæ•ˆrebootï¼ˆ3ï¼‰å…³é—­äº¤æ¢åˆ†åŒº1234567891011# ä¸´æ—¶ç”Ÿæ•ˆswapoff -a# æ°¸ä¹…ç”Ÿæ•ˆï¼ˆæ³¨é‡ŠæŽ‰swapçš„é…ç½®ï¼‰sed -ri 's/.*swap.*/#&amp;/' /etc/fstab# é‡å¯ä»¥ç”Ÿæ•ˆreboot#æ£€æµ‹æ˜¯å¦å…³é—­æˆåŠŸï¼ˆtotalä¸º0å³å¯ï¼‰free -mï¼ˆ4ï¼‰é…ç½®ä¸»æœºå12345678910#åœ¨k8s-masterä¸Šæ‰§è¡Œhostnamectl set-hostname k8s-master#åœ¨k8s-node1ä¸Šæ‰§è¡Œhostnamectl set-hostname k8s-node1#åœ¨k8s-node2ä¸Šæ‰§è¡Œhostnamectl set-hostname k8s-node2#æŸ¥çœ‹ä¸»æœºåï¼ˆéªŒè¯æ˜¯å¦ä¿®æ”¹æˆåŠŸï¼‰hostnameï¼ˆ5ï¼‰é…ç½®åç§°è§£æžä¸‰å°ä¸»æœºéƒ½åšå¦‚ä¸‹é…ç½®12345cat &lt;&lt; EOF &gt;&gt; /etc/hosts192.168.60.101 k8s-master192.168.60.201 k8s-node1192.168.60.202 k8s-node2EOFç„¶åŽäº’ç›¸pingæŸ¥çœ‹æ˜¯å¦éƒ½èƒ½é€šè¿‡ä¸»æœºåè¿žæŽ¥12$ ping ä¸»æœºå#å¦‚ï¼šping k8s-masterï¼ˆ6ï¼‰ä¿®æ”¹å†…æ ¸å‚æ•°ï¼ˆå¼€å¯æ•°æ®åŒ…è½¬å‘åŠŸèƒ½ï¼‰æ‰€æœ‰æœåŠ¡å™¨éƒ½æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ï¼š1234567891011121314cat &gt; /etc/sysctl.d/k8s.conf &lt;&lt; EOFnet.bridge.bridge-nf-call-ip6tables = 1net.bridge.bridge-nf-call-iptables = 1net.ipv4.ip_forward = 1#vm.swappiness = 0#vm.max_map_count = 262144EOF# åŠ è½½br_netfilteræ¨¡å—# æŸ¥çœ‹æ˜¯å¦åŠ è½½ï¼šlsmod | grep br_netfiltermodprobe br_netfilter# ä½¿é…ç½®ç”Ÿæ•ˆsysctl -p /etc/sysctl.d/k8s.confï¼ˆ7ï¼‰é…ç½®æ—¶é—´åŒæ­¥æ‰€æœ‰æœåŠ¡å™¨éƒ½æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ä»¥åŒæ­¥æ—¶é—´ï¼š1234yum install ntpdate -y#å¼ºåˆ¶å¿«é€ŸåŒæ­¥ç³»ç»Ÿæ—¶é—´ntpdate ntp1.aliyun.comhwclock -wï¼ˆ8ï¼‰å®‰è£… ipset å’Œ ipvsadmæ‰€æœ‰æœåŠ¡å™¨éƒ½æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ï¼šåœ¨kubernetesä¸­serviceæœ‰ä¸¤ç§ä»£ç†æ¨¡åž‹ï¼Œä¸€ç§æ˜¯åŸºäºŽiptablesï¼Œå¦ä¸€ç§æ˜¯åŸºäºŽipvsçš„ã€‚ipvsçš„æ€§èƒ½è¦é«˜äºŽiptablesçš„ï¼Œä½†æ˜¯å¦‚æžœè¦ä½¿ç”¨å®ƒï¼Œéœ€è¦æ‰‹åŠ¨è½½å…¥ipvsæ¨¡å—123456789101112131415# å®‰è£…yum install -y ipset ipvsadm# é…ç½®cat &gt; /etc/sysconfig/modules/ipvs.modules &lt;&lt;EOF#!/bin/bashmodprobe -- ip_vsmodprobe -- ip_vs_rrmodprobe -- ip_vs_wrrmodprobe -- ip_vs_shmodprobe -- nf_conntrack_ipv4EOF# æŽˆæƒã€è¿è¡Œã€æ£€æŸ¥æ˜¯å¦åŠ è½½ï¼šchmod 755 /etc/sysconfig/modules/ipvs.modules &amp;&amp; bash /etc/sysconfig/modules/ipvs.modules &amp;&amp; lsmod | grep -e ip_vs -e nf_conntrack_ipv4Â¶4. å®‰è£… Dockeræ‰€æœ‰æœåŠ¡å™¨éƒ½æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ï¼š123456789101112131415161718192021222324252627#å®‰è£Dockeræºwget https://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo -O /etc/yum.repos.d/docker-ce.repo#æŸ¥çœ‹å¯å®‰è£…çš„dockerç‰ˆæœ¬yum list docker-ce --showduplicates#é€‰æ‹©æŒ‡å®šç‰ˆæœ¬Dockerå®‰è£…yum install -y --setopt=obsoletes=0 docker-ce-18.06.3.ce-3.el7#å¯åŠ¨Dockersystemctl start dockersystemctl enable docker#é…ç½®DockeråŠ é€Ÿæºï¼Œå¹¶ä¿®æ”¹cgroupé©±åŠ¨ä¸ºk8så®˜æ–¹æŽ¨èçš„systemdï¼Œå¦åˆ™k8såˆå§‹åŒ–å¯èƒ½ä¼šæŠ¥é”™mkdir -p /etc/dockercat &gt; /etc/docker/daemon.json &lt;&lt; EOF&#123; "exec-opts": ["native.cgroupdriver=systemd"], "registry-mirrors": ["https://b9pmyelo.mirror.aliyuncs.com"]&#125;EOF#é‡å¯ docker æœåŠ¡systemctl restart docker#æŸ¥çœ‹ Docker é…ç½®æ˜¯å¦ä¿®æ”¹ç”Ÿæ•ˆï¼ˆå…³æ³¨ï¼šRegistry Mirrorsã€Cgroup Driverï¼‰docker infoæ³¨æ„ï¼šK8s å’Œ Docker ä¹‹é—´æœ‰ä¸€äº›ç‰ˆæœ¬å…¼å®¹æ€§è¦æ±‚ï¼Œä»¥ç¡®ä¿å®ƒä»¬å¯ä»¥æ­£å¸¸åä½œå·¥ä½œÂ¶5. å®‰è£ k8s ç›¸å…³å·¥å…·æ‰€æœ‰æœåŠ¡å™¨éƒ½æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ï¼š1234567891011121314151617181920212223#æ·»åŠ k8sçš„yumæºcat &gt; /etc/yum.repos.d/kubernetes.repo &lt;&lt; EOF[kubernetes]name=Kubernetesbaseurl=https://mirrors.aliyun.com/kubernetes/yum/repos/kubernetes-el7-x86_64enabled=1gpgcheck=0repo_gpgcheck=0gpgkey=https://mirrors.aliyun.com/kubernetes/yum/doc/yum-key.gpg https://mirrors.aliyun.com/kubernetes/yum/doc/rpm-package-key.gpgEOF#å®‰è£…kubeadmã€kubeletã€kubectlyum install -y kubelet-1.23.6 kubeadm-1.23.6 kubectl-1.23.6# ä¸ºäº†å®žçŽ°Dockerä½¿ç”¨çš„cgroup drvierå’Œkubeletä½¿ç”¨çš„cgroup drverä¸€è‡´ï¼Œéœ€è¦ä¿®æ”¹"/etc/sysconfig/kubelet"æ–‡ä»¶çš„å†…å®¹ï¼šcat &gt; /etc/sysconfig/kubelet &lt;&lt;EOFKUBELET_EXTRA_ARGS="--cgroup-driver=systemd"KUBE_PROXY_MODE="ipvs"EOF#è®¾ç½®kubeletå¼€æœºè‡ªå¯åŠ¨systemctl enable kubeletÂ¶6. åˆå§‹åŒ– Master èŠ‚ç‚¹åœ¨ Master èŠ‚ç‚¹ä¸Šæ‰§è¡Œï¼š1234567891011121314151617181920212223242526#åˆå§‹åŒ–k8sé›†ç¾¤ï¼ˆè‡ªåŠ¨è¿è¡Œå¿…è¦ç»„ä»¶åˆ°Dockerå®¹å™¨ä¸­ï¼‰ #apiserver-advertise-addresså¡«å†™å½“å‰MasterèŠ‚ç‚¹çš„å®žé™…ipï¼Œå…¶ä»–åœ°æ–¹ä¸ç”¨åŠ¨ #image-repositoryï¼šæŒ‡å®šæ‹‰å–é•œåƒçš„åœ°å€ï¼ˆç”±äºŽé»˜è®¤æ‹‰å–é•œåƒåœ°å€k8s.gcr.ioå›½å†…æ— æ³•è®¿é—®ï¼Œè¿™é‡Œéœ€è¦æŒ‡å®šé˜¿é‡Œäº‘é•œåƒä»“åº“åœ°å€ï¼‰ #service-cidrï¼šk8sæœåŠ¡å‘çŽ°ç½‘æ®µ #pod-network-cidrï¼šPodè¿è¡Œçš„ç½‘æ®µkubeadm init \ --apiserver-advertise-address=192.168.60.101 \ --image-repository registry.aliyuncs.com/google_containers \ --kubernetes-version v1.23.6 \ --service-cidr=10.1.0.0/16 \ --pod-network-cidr=10.2.0.0/16 \ --service-dns-domain=cluster.local \ --ignore-preflight-errors=Swap \ --ignore-preflight-errors=NumCPU \ --ignore-preflight-errors=Mem # é…ç½®çŽ¯å¢ƒå˜é‡å’Œé…ç½®æ–‡ä»¶mkdir -p $HOME/.kubesudo cp -i /etc/kubernetes/admin.conf $HOME/.kube/configsudo chown $(id -u):$(id -g) $HOME/.kube/config#echo "export KUBECONFIG=/etc/kubernetes/admin.conf" &gt;&gt; ~/.bash_profile#source ~/.bash_profileÂ¶7. åˆå§‹åŒ– Node èŠ‚ç‚¹12345678910111213#åœ¨MasterèŠ‚ç‚¹èŽ·å–tokenï¼ˆåœ¨Masteræ‰§è¡Œï¼‰kubeadm token create --print-join-command --ttl 0##åœ¨Nodeæ‰§è¡Œå¦‚ä¸‹å‘½ä»¤# åœ¨node1å’Œnode2æ·»åŠ å¦‚ä¸‹çš„å‘½ä»¤å‘k8sé›†ç¾¤ä¸­æ·»åŠ NodeèŠ‚ç‚¹ï¼ˆæ ¹æ®MasterèŠ‚ç‚¹èŽ·å–tokenå°†å½“å‰NodeèŠ‚ç‚¹åŠ å…¥åˆ°é›†ç¾¤ä¸­ï¼‰ï¼škubeadm join 192.168.60.101:6443 --token pikadq.zwpr1wpypqp71ssk --discovery-token-ca-cert-hash sha256:eaa3781137e6180b0a23d670335614f13b5b93f6f1ce5b0696a6fe930aef890c##åœ¨Masteræ‰§è¡Œå¦‚ä¸‹å‘½ä»¤# èŽ·å–æ‰€æœ‰èŠ‚ç‚¹ï¼ˆæ­£å¸¸å¯ä»¥èŽ·å–åˆ°masterï¼Œnode1å’Œnode2ï¼‰kubectl get nodes# èŽ·å–æ‰€æœ‰èŠ‚ç‚¹ï¼ˆå«æ›´å¤šè¯¦ç»†ä¿¡æ¯ï¼‰kubectl get nodes -owideå…¶ä»–ç›¸å…³ token ä»¤ç‰Œçš„å‘½ä»¤ï¼š12345678#åˆ—å‡ºå½“å‰æœ‰æ•ˆçš„tokenä»¤ç‰Œåˆ—è¡¨kubeadm token list#èŽ·å–è¯ä¹¦å…¬é’¥hashå€¼openssl x509 -pubkey -in /etc/kubernetes/pki/ca.crt | openssl rsa -pubin -outform der 2&gt;/dev/null | openssl dgst -sha256 -hex | sed 's/^.* //'#NodeåŠ å…¥é›†ç¾¤çš„å‘½ä»¤kubeadm join &lt;masterèŠ‚ç‚¹çš„IP&gt;:6443 --token &lt;æœ‰æ•ˆçš„tokenä»¤ç‰Œ&gt; --discovery-token-ca-cert-hash sha256:&lt;è¯ä¹¦å…¬é’¥hashå€¼&gt;Â¶8. éƒ¨ç½² CNI ç½‘ç»œæ’ä»¶åœ¨ Master èŠ‚ç‚¹éƒ¨ç½²CNIç½‘ç»œæ’ä»¶ï¼š12wget https://raw.githubusercontent.com/coreos/flannel/master/Documentation/kube-flannel.yml#ä»£ç†ä¸‹è½½ï¼šwget https://gh.con.sh/https://raw.githubusercontent.com/coreos/flannel/master/Documentation/kube-flannel.yml1234#ä¿®æ”¹flannelé…ç½®æ–‡ä»¶vim kube-flannel.yml#ï¼ˆ1ï¼‰ä¿®æ”¹ "Network": "10.244.0.0/16" çš„å€¼ä¸ºåˆå§‹åŒ–é›†ç¾¤æ—¶pod-network-cidrçš„ç½‘æ®µï¼Œå³ï¼š10.2.0.0/16#ï¼ˆ2ï¼‰åœ¨kube-flannelå®¹å™¨ä¸­æ·»åŠ ä¸€è¡Œå‚æ•°ï¼š- --iface=ens33 ï¼ˆå…¶ä¸­ens33ä¸ºMasterèŠ‚ç‚¹çš„ç½‘å¡åç§°ï¼‰å…·ä½“ä¿®æ”¹å¦‚ä¸‹ï¼š123456789101112131415161718 net-conf.json: | &#123; "Network": "10.2.0.0/16", #ï¼ˆ1ï¼‰ä¿®æ”¹Podç½‘æ®µ "Backend": &#123; "Type": "vxlan" &#125; &#125;#å…¶ä»–é…ç½®å†…å®¹ containers: - name: kube-flannel image: docker.io/flannel/flannel:v0.22.3 command: - /opt/bin/flanneld args: - --ip-masq - --kube-subnet-mgr - --iface=ens33 #ï¼ˆ2ï¼‰æ·»åŠ ç½‘å¡åç§°ï¼ˆå…¶ä¸­ens33ä¸ºMasterèŠ‚ç‚¹çš„ç½‘å¡åç§°ï¼‰12345678910111213kubectl apply -f kube-flannel.yml#æŸ¥çœ‹podeçš„çŠ¶æ€(æŸ¥çœ‹éƒ¨ç½²è¿›åº¦ï¼Œç­‰æ‰€æœ‰PodçŠ¶æ€éƒ½å˜æˆRunningï¼Œéœ€è¦è€å¿ƒç­‰å¾…ä¸€ä¸‹)ï¼Œkubectl get pods -n kube-system#èŽ·å–æ‰€æœ‰èŠ‚ç‚¹ï¼ˆç­‰å¾…æ‰€æœ‰èŠ‚ç‚¹çŠ¶æ€éƒ½ä¸ºReadyï¼‰kubectl get nodes -owide#æŸ¥çœ‹é›†ç¾¤å¥åº·çŠ¶æ€kubectl get cs#æ‰€æœ‰èŠ‚ç‚¹çŠ¶æ€éƒ½ä¸ºReadyï¼Œå¹¶ä¸”æ‰€æœ‰PodçŠ¶æ€éƒ½å˜æˆRunningæ—¶è¯´æ˜Žé›†ç¾¤éƒ¨ç½²å®Œæˆ#kube-controller-managerå’Œkube-scheduler-k8sçŠ¶æ€å¦‚æžœä¸ºCrashLoopBackOffï¼Œé€šå¸¸æ˜¯MasterèŠ‚ç‚¹åˆ†é…çš„èµ„æºå¤ªå°‘é€ æˆçš„ï¼Œå»ºè®®ç»™MasterèŠ‚ç‚¹åˆ†é…å¤šä¸€ç‚¹èµ„æºï¼Œè‡³å°‘2Gå†…å­˜ï¼Œ2æ ¸CUPï¼Œç„¶åŽé‡å¯å³å¯#æŸ¥çœ‹æŒ‡å®šPodçš„è¯¦ç»†ä¿¡æ¯ï¼ˆåŒ…æ‹¬Podçš„çŠ¶æ€ã€å®¹å™¨çš„çŠ¶æ€ã€äº‹ä»¶æ—¥å¿—ç­‰ï¼‰#kubectl describe pods kube-controller-manager-k8s-master -n kube-systemÂ¶9. é€šè¿‡ k8s å¯åŠ¨ nginx å®¹å™¨å¾… k8s é›†ç¾¤éƒ¨ç½²å¥½åŽï¼Œå°±å¯ä»¥åœ¨é›†ç¾¤ä¸­è¿è¡Œå®¹å™¨äº†ã€‚åœ¨masterèŠ‚ç‚¹ä¸Šæ‰§è¡Œæ“ä½œï¼š123456789101112131415161718192021222324252627282930313233343536373839404142434445#åˆ›å»ºPodæŽ§åˆ¶å™¨ï¼ˆé€šè¿‡éƒ¨ç½²é—´æŽ¥åˆ›å»ºå®¹å™¨ï¼‰ #åœ¨kubernetesä¸­ï¼ŒPodæ˜¯æœ€å°çš„æŽ§åˆ¶å•å…ƒï¼Œä½†æ˜¯kuberneteså¾ˆå°‘ç›´æŽ¥æŽ§åˆ¶Podï¼Œä¸€èˆ¬éƒ½æ˜¯é€šè¿‡PodæŽ§åˆ¶å™¨æ¥å®Œæˆçš„ã€‚PodæŽ§åˆ¶å™¨ç”¨äºŽpodçš„ç®¡ç†ï¼Œç¡®ä¿podèµ„æºç¬¦åˆé¢„æœŸçš„çŠ¶æ€ï¼Œå½“podçš„èµ„æºå‡ºçŽ°æ•…éšœæ—¶ï¼Œä¼šå°è¯•è¿›è¡Œé‡å¯æˆ–é‡å»ºpod #PodæŽ§åˆ¶å™¨çš„ç§ç±»æœ‰å¾ˆå¤šï¼Œå¦‚ï¼šDeploymentã€ReplicaSetã€StatefulSetã€DaemonSetã€Jobã€CronJobç­‰ #åœ¨é›†ç¾¤ä¸­åˆ›å»ºä¸€ä¸ªåä¸º "nginx-test" çš„PodæŽ§åˆ¶å™¨ï¼ˆDeploymentï¼‰ #k8sä¼šéšæœºé€‰æ‹©nodeèŠ‚ç‚¹è¿›è¡Œé•œåƒä¸‹è½½å’Œå¯åŠ¨ #nginx-test ä¸ºdockeræœåŠ¡åç§°ï¼Œå¯ä»¥è‡ªå®šä¹‰åç§° #--replicas æŒ‡å®šåˆ›å»ºçš„Podå‰¯æœ¬æ•° #--image æŒ‡å®šè¦ä½¿ç”¨çš„dockeré•œåƒç‰ˆæœ¬kubectl create deployment nginx-test --replicas=3 --image=nginx:1.8#åˆ—å‡ºæ‰€æœ‰Deploymentç±»åž‹çš„PodæŽ§åˆ¶å™¨kubectl get deployment#æŸ¥çœ‹podeçš„çŠ¶æ€ï¼ˆå«éƒ¨ç½²æœåŠ¡ï¼‰kubectl get pods -owide#ç»™PodæŽ§åˆ¶å™¨åˆ›å»ºæœåŠ¡ï¼ˆç®€å•ç†è§£ï¼šå³æš´éœ²å®¹å™¨çš„ç«¯å£ç»™å®¿ä¸»æœºï¼‰kubectl expose deployment nginx-test --type=NodePort --port=80#åˆ—å‡ºé›†ç¾¤ä¸­çš„æ‰€æœ‰æœåŠ¡ #æœåŠ¡ï¼šæœåŠ¡ä¸ŽPodæŽ§åˆ¶å™¨ç›¸å…³ï¼Œè¡¨ç¤ºå‘å®¢æˆ·ç«¯æä¾›è®¿é—®Podçš„æŽ¥å£ï¼Œæä¾›æœ‰è´Ÿè½½å‡è¡¡å’ŒæœåŠ¡å‘çŽ°çš„èƒ½åŠ›ã€‚ #ç®€å†™ï¼škubectl get svckubectl get services#NAME TYPE CLUSTER-IP EXTERNAL-IP PORT(S) AGE#kubernetes ClusterIP 10.1.0.1 &lt;none&gt; 443/TCP 60m#nginx-test NodePort 10.1.6.232 &lt;none&gt; 80:32724/TCP 6s#æ¯”å¦‚é€šè¿‡ä¸Šé¢çš„å‘½ä»¤æŸ¥nginxå®¹å™¨æ˜ å°„åˆ°å®¿ä¸»æœºç«¯å£æ˜¯32724ï¼Œé‚£ä¹ˆè®¿é—®é›†ç¾¤ä»»æ„ä¸€ä¸ªèŠ‚ç‚¹ï¼ˆï¼‰çš„32724ç«¯å£éƒ½èƒ½è®¿é—®nginxcurl http://192.168.60.101:32724curl http://192.168.60.201:32724#åˆ é™¤PodæŽ§åˆ¶å™¨ï¼ˆå¦‚éœ€ï¼‰kubectl delete deployment nginx-test#åˆ é™¤æœåŠ¡ï¼ˆå¦‚éœ€ï¼‰kubectl delete service nginx-test#ä¿®æ”¹æŒ‡å®šPodæŽ§åˆ¶å™¨çš„å‰¯æœ¬æ•°ï¼ˆå¦‚éœ€ï¼‰kubectl scale deployment --replicas=2 nginx-test#æ‰§è¡ŒPodå®¹å™¨å‘½ä»¤kubectl exec nginx-test-7cf98b694b-6p6xg -- ls /#è¿›å…¥Podå®¹å™¨æ‰§è¡Œå‘½ä»¤kubectl exec -it nginx-test-7cf98b694b-6p6xg -- bashÂ¶10. éƒ¨ç½² Dashboardåœ¨ Matser ä¸Šæ‰§è¡Œä¸‹é¢æ“ä½œå®‰è£… Dashboard123456789101112131415161718192021222324252627282930313233343536373839404142#ä¸‹è½½yamlé…ç½®æ–‡ä»¶wget https://raw.githubusercontent.com/kubernetes/dashboard/v2.0.0/aio/deploy/recommended.yaml#ä»£ç†ä¸‹è½½ï¼šwget https://gh.con.sh/https://raw.githubusercontent.com/kubernetes/dashboard/v2.0.0/aio/deploy/recommended.yaml#ç¼–è¾‘yamlé…ç½®æ–‡ä»¶vim recommended.yaml#ä¿®æ”¹å¦‚ä¸‹å†…å®¹ï¼škind: ServiceapiVersion: v1metadata: labels: k8s-app: kubernetes-dashboard name: kubernetes-dashboard namespace: kubernetes-dashboardspec: type: NodePort # æ–°å¢ž ports: - port: 443 targetPort: 8443 nodePort: 30009 # æ–°å¢ž selector: k8s-app: kubernetes-dashboard #éƒ¨ç½²kubectl create -f recommended.yaml#æŸ¥çœ‹Podå’ŒæœåŠ¡ä¿¡æ¯kubectl get pod,svc -n kubernetes-dashboard#æµè§ˆå™¨è®¿é—®ï¼šhttps://192.168.60.101:30009#è®¿é—®dashboardæ—¶éœ€è¦tokenä»¤ç‰Œæ‰èƒ½ä½¿ç”¨ï¼Œæ•…éœ€è¦å›žåˆ°MasterèŠ‚ç‚¹æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤åˆ›å»ºè´¦æˆ·tokenä»¤ç‰Œï¼š#åˆ›å»ºè´¦æˆ·kubectl create serviceaccount dashboard-admin -n kubernetes-dashboard#æŽˆæƒè´¦æˆ·kubectl create clusterrolebinding dashboard-admin-rb --clusterrole=cluster-admin --serviceaccount=kubernetes-dashboard:dashboard-admin#èŽ·å–è´¦æˆ·ç§˜é’¥#kubectl get secrets -n kubernetes-dashboard | grep dashboard-admin#æ ¹æ®è´¦æˆ·ç§˜é’¥èŽ·å–tokenä»¤ç‰Œ#kubectl describe secrets &lt;è´¦æˆ·ç§˜é’¥&gt; -n kubernetes-dashboard#æ ¹æ®è´¦æˆ·ç§˜é’¥èŽ·å–tokenä»¤ç‰Œkubectl describe secrets $(kubectl get secrets -n kubernetes-dashboard | grep dashboard-admin | awk '&#123;print $1&#125;') -n kubernetes-dashboardé»˜è®¤ Chrome ç­‰æµè§ˆå™¨ç”±äºŽ SSL è¯ä¹¦ä¸å—ä¿¡ä»»çš„åŽŸå› æ— æ³•æ­£å¸¸è®¿é—® Dashboardï¼Œéœ€è¦å¦‚ä¸‹æ“ä½œï¼š12345678910111213141516171819#ç”Ÿæˆè‡ªç­¾è¯ä¹¦openssl genrsa -out dashboard.key 2048 openssl req -new -out dashboard.csr -key dashboard.key -subj '/CN=10.0.0.10'openssl x509 -req -days 3650 -in dashboard.csr -signkey dashboard.key -out dashboard.crt#åˆ é™¤åŽŸæœ‰è¯ä¹¦kubectl get secret kubernetes-dashboard-certs -n kubernetes-dashboardkubectl delete secret kubernetes-dashboard-certs -n kubernetes-dashboard#é€šè¿‡æ–°ç”Ÿæˆçš„è¯ä¹¦åˆ›å»ºsecretkubectl create secret generic kubernetes-dashboard-certs --from-file=dashboard.key --from-file=dashboard.crt -n kubernetes-dashboard#æŸ¥çœ‹dashboardçš„podkubectl get pod -n kubernetes-dashboard | grep kubernetes-dashboard#åˆ é™¤åŽŸæœ‰podå³å¯ï¼ˆä¼šè‡ªåŠ¨åˆ›å»ºæ–°çš„podï¼‰kubectl delete pod $(kubectl get pod -n kubernetes-dashboard | grep kubernetes-dashboard | awk '&#123;print $1&#125;') -n kubernetes-dashboard#å†æ¬¡æŸ¥çœ‹ï¼Œç­‰å¾…é‡å»ºçš„podåˆ›å»ºå®Œæˆkubectl get pod -n kubernetes-dashboard | grep kubernetes-dashboardä»¥ä¸Šæ“ä½œå®Œæˆå°±å¯ä»¥ä½¿ç”¨ Chrome è®¿é—® Dashboard äº†ã€‚æç¤ºï¼šç«ç‹æµè§ˆå™¨ä¸éœ€è¦å¦‚ä¸Šæ“ä½œä¹Ÿèƒ½é»˜è®¤å¯ä»¥è®¿é—®å‚è€ƒï¼šhttps://blog.csdn.net/qq_35078688/article/details/130662916æ•ˆæžœå¦‚ä¸‹ï¼šÂ¶æ‹“å±•çŸ¥è¯†Â¶é‡ç½®èŠ‚ç‚¹å¦‚æžœé›†ç¾¤éƒ¨ç½²å‡ºé—®é¢˜äº†ï¼Œéœ€è¦é‡æ–°éƒ¨ç½²ï¼Œå¯ä»¥å…ˆé‡ç½®æ‰€æœ‰èŠ‚ç‚¹ç„¶åŽå†é‡æ–°éƒ¨ç½²ï¼Œå…¶ä¸­é‡ç½®èŠ‚ç‚¹æ“ä½œå¦‚ä¸‹ï¼š12345678910111213141516171819202122232425262728293031#é‡ç½®èŠ‚ç‚¹ï¼ˆMasteræˆ–NodeèŠ‚ç‚¹é€šç”¨ï¼‰kubeadm reset#å…³é—­kubeletå’ŒdockeræœåŠ¡systemctl stop kubeletsystemctl stop docker#æ¸…é™¤é—ç•™æ–‡ä»¶rm -rf /root/.kuberm -rf /etc/kubernetesrm -rf /var/lib/kubelet/*rm -rf /var/lib/etcdrm -rf /etc/cni/rm -rf /var/lib/cni/#æ¸…ç†ipvsadmipvsadm -C#é‡ç½®é˜²ç«å¢™iptables -F &amp;&amp; iptables -t nat -F &amp;&amp; iptables -t mangle -F &amp;&amp; iptables -X#é‡ç½®ç›¸å…³ç½‘å¡é…ç½®ifconfig cni0 downifconfig flannel.1 downifconfig docker0 downip link delete cni0ip link delete flannel.1#é‡å¯kubeletå’ŒdockeræœåŠ¡systemctl start kubeletsystemctl start docker12345#å¦‚æžœä»…é‡ç½®NodeèŠ‚ç‚¹ï¼Œéœ€è¦åœ¨MasterèŠ‚ç‚¹ä¸­æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ä»Žé›†ç¾¤ä¸­åˆ é™¤ç›¸å…³èŠ‚ç‚¹#å°†èŠ‚ç‚¹è®¾ç½®ä¸ºä¸å¯è°ƒåº¦çŠ¶æ€ï¼Œä»¥é˜²æ­¢æ–°çš„ Pod è¢«è°ƒåº¦åˆ°è¯¥èŠ‚ç‚¹ä¸Škubectl cordon &lt;node-name&gt;#ä»Žé›†ç¾¤ä¸­åˆ é™¤è¯¥èŠ‚ç‚¹kubectl delete node &lt;node-name&gt;Â¶å¸è½½ k8s1234567891011121314#åœæ­¢å¹¶åˆ é™¤ Kubernetes æœåŠ¡systemctl stop kubeletsystemctl disable kubeletkubeadm reset#åˆ é™¤ Kubernetes è½¯ä»¶åŒ…yum remove -y kubelet kubeadm kubectl#åˆ é™¤ç›¸å…³çš„ Docker å®¹å™¨å’Œé•œåƒdocker rm -f $(sudo docker ps -aq)docker rmi -f $(sudo docker images -q)#åˆ é™¤ Kubernetes ç›¸å…³çš„é…ç½®æ–‡ä»¶å’Œç›®å½•rm -rf ~/.kube /etc/kubernetesÂ¶åœ¨ä»»æ„èŠ‚ç‚¹ä½¿ç”¨ kubectl123456# 1. å°† master èŠ‚ç‚¹ä¸­ /etc/kubernetes/admin.conf æ‹·è´åˆ°éœ€è¦è¿è¡Œçš„æœåŠ¡å™¨çš„ /etc/kubernetes ç›®å½•ä¸­scp /etc/kubernetes/admin.conf root@k8s-node1:/etc/kubernetes# 2. åœ¨å¯¹åº”çš„æœåŠ¡å™¨ä¸Šé…ç½®çŽ¯å¢ƒå˜é‡echo "export KUBECONFIG=/etc/kubernetes/admin.conf" &gt;&gt; ~/.bash_profilesource ~/.bash_profileÂ¶ä¸‰ã€å‚è€ƒhttps://www.bilibili.com/video/BV19c411R73d ï¼ˆæ›´ç®€å•çš„k8séƒ¨ç½²æ–¹å¼ï¼‰https://znunwm.top/archives/k8s-xiang-xi-jiao-chenghttps://juejin.cn/post/7095568050597920781https://www.jianshu.com/p/f21fc213446cåŠ å…¥k8sé›†ç¾¤æŠ¥é”™this Docker version is not on the list of validated versions: 20.10.17. Latest validatedâ€¦]]></content>
      <categories>
        <category>devops</category>
      </categories>
      <tags>
        <tag>k8s</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[è®°ä¸€æ¬¡deepinä½¿ç”¨ä½“éªŒ]]></title>
    <url>%2Flinux%2Fdeepin_experience.html</url>
    <content type="text"><![CDATA[â€‹ ç”±äºŽæœ€è¿‘åšå®Œäº†æ¯•ä¸šè®¾è®¡ï¼Œå‡†å¤‡è€ƒè™‘è¿›å…¥äº‘æœåŠ¡éƒ¨ç½²çš„é˜¶æ®µï¼Œä½†æ¯•è®¾ä½œä¸ºå¾®æœåŠ¡é¡¹ç›®éžå¸¸åƒæœåŠ¡å™¨çš„æ€§èƒ½ï¼Œæˆ‘è‡ªå·±çš„ä¸¤å°é˜¿é‡Œäº‘å’Œè…¾è®¯äº‘å­¦ç”Ÿæœºå·²ç»å®Œå…¨ä¸å¤Ÿç”¨äº†ï¼Œä½†åˆæ²¡moneyå†ä¹°æœåŠ¡å™¨ï¼Œè€Œè‡ªå·±åˆæœ‰ä¸€å°åŽä¸ºmatebook Eç¬”è®°æœ¬åœ¨åƒç°ï¼Œæ‰€ä»¥æ‰“ç®—è®©å…¶å®‰è£…ä¸€ä¸ªUIåšçš„æ¯”è¾ƒç¾Žè§‚çš„deepin linuxç³»ç»Ÿæ¥åˆ†æ‹…ä¸€ä¸‹äº‘æœåŠ¡å™¨çš„åŽ‹åŠ›ã€‚äºŽæ˜¯å¼€å§‹äº†è¿™æ¡ä¸å½’è·¯â€¦â€‹ åœ¨å®‰è£…deepinåŽä½¿ç”¨çš„è¿‡ç¨‹ä¸­ï¼Œæ•´ä½“çš„ç”¨æˆ·ä½“éªŒè¿˜æ˜¯ä¸é”™çš„ï¼Œä½†æœ‰å‡ ä¸ªåœ°æ–¹éœ€è¦åæ§½ä¸€ä¸‹ï¼ˆè™½ç„¶ä¸å®Œæ˜¯deepinçš„é”…~~~ï¼‰ï¼ï¼ˆ1ï¼‰å®‰è£…å¥½deepinåŽé»˜è®¤ç³»ç»Ÿæ— çº¿ç½‘å¡ä¸æ”¯æŒï¼Œæ‰€ä»¥æ— æ³•æœç´¢åˆ°wifiï¼ŒäºŽæ˜¯ç½‘ä¸Šæ‰¾åˆ°å¦‚ä¸‹è§£å†³æ–¹æ¡ˆï¼šâ‘ é¦–å…ˆå¸è½½bcmwl-kernel-sourceï¼ˆæˆ–è€…ä¿è¯è¿™ä¸ªæ²¡æœ‰å®‰è£…ï¼‰å¯ä»¥ä½¿ç”¨ï¼šapt-get remove bcmwl-kernel-source æŒ‡ä»¤è¿›è¡Œå¸è½½â‘¡ç„¶åŽä¸‹è½½https://mirrors.tuna.tsinghua.edu.cn/ubuntu/pool/main/l/linux-firmware/ é©±åŠ¨å›ºä»¶ï¼Œæˆ‘ä¸‹è½½çš„æ˜¯linux-firmware_1.157_all.debä¸‹è½½å®ŒåŽè¿›è¡Œè§£åŽ‹ï¼Œæ‰¾åˆ°lib/firmware/brcm/brcmfmac4356-pcie.binè¿™ä¸ªæ–‡ä»¶ï¼ŒæŠŠè¿™ä¸ªæ–‡ä»¶ä»Žcopyåˆ°ç³»ç»Ÿçš„/lib/firmware/brcm/è¿›è¡Œæ›¿æ¢æ›¿æ¢åŽé‡æ–°å¯åŠ¨ç”µè„‘ï¼Œè¿™æ—¶åº”è¯¥å¯ä»¥çœ‹åˆ°wifiçš„æ ‡å¿—äº†ï¼Œä½†å¦‚æžœè¿˜æ˜¯æœç´¢ä¸åˆ°wifiä¿¡å·æ— æ³•è¿žæŽ¥ï¼Œç»§ç»­åŽé¢çš„æ“ä½œã€‚â‘¢ä¸‹é¢éœ€è¦ä¸‹è½½brcmfmac4356-pcie.txtæ–‡ä»¶ï¼ŒåŒæ ·copyåˆ°ç³»ç»Ÿçš„çš„/lib/firmware/brcm/ç›®å½•ä¸‹è¿™ä¸ªæ–‡ä»¶ä¸‹è½½åœ°å€ä¸ºï¼šhttps://fedorapeople.org/~jwrdegoede/brcmfmac4356-pcie.txtæŠŠé‡Œé¢æ‰€æœ‰å†…å®¹copyå‡ºæ¥ï¼Œè‡ªå·±å»ºä¸€ä¸ªbrcmfmac4356-pcie.txtçš„æ–‡ä»¶ï¼Œcopyåˆ°ä¸Šé¢æåˆ°çš„ç›®å½•ä¸‹ï¼Œç„¶åŽå†é‡æ–°å¯åŠ¨ç”µè„‘â‘£è¿™æ—¶åº”è¯¥å°±å¯ä»¥æ­£å¸¸ä½¿ç”¨wifiäº†ç»è¿‡å®žæµ‹å‘çŽ°ä¸Šé¢çš„æ–¹æ¡ˆå¯¹äºŽmatebookå®‰è£…Ubuntuæ—¶å¦‚æžœå‡ºçŽ°åŒæ ·çš„é—®é¢˜ä¸€æ ·é€‚ç”¨ã€‚ï¼ˆ2ï¼‰é€šè¿‡vimè¿›å…¥æ–‡ä»¶ç¼–è¾‘ç•Œé¢æ—¶ï¼Œæ²¡æ³•ä½¿ç”¨é¼ æ ‡å¤åˆ¶ç²˜è´´å†…å®¹ï¼ŒäºŽæ˜¯ç½‘ä¸Šæ‰¾äº†ä¸€æ³¢æ‰æ‰¾åˆ°å¦‚ä¸‹è§£å†³æ–¹æ¡ˆï¼š1$ vim ~/.vimrcç„¶åŽåŠ å…¥å¦‚ä¸‹å†…å®¹ï¼š12syntax onset mouse-=aï¼ˆ3ï¼‰rootç”¨æˆ·lsç­‰æ“ä½œæ— æ³•é«˜äº®æ˜¾ç¤ºè¿›å…¥ç³»ç»Ÿé»˜è®¤çš„æ™®é€šç”¨æˆ·ä¸»ç›®å½•(æ¯”å¦‚æ˜¯/home/qcmoke/)ï¼Œç„¶åŽå¤åˆ¶è¯¥ç›®å½•ä¸‹çš„.bashrcæ–‡ä»¶åˆ°/root/ç›®å½•å³å¯ã€‚123$ su$ cp /home/qcmoke/.bashrc /root/$ source /root/.bashrc]]></content>
      <categories>
        <category>linux</category>
      </categories>
      <tags>
        <tag>linux</tag>
        <tag>deepin</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[hexoä»£ç å—è¿›é˜¶å†™æ³•]]></title>
    <url>%2Fblog%2Fhexo_code.html</url>
    <content type="text"><![CDATA[å¦‚æžœä½ æ˜¯ä¸€åç¨‹åºçŒ´å­ðŸ’å¹¶ä¸”å–„äºŽåœ¨hexoä¸Šå†™åšå®¢çš„è¯ï¼Œæˆ‘ç›¸ä¿¡ä½ è‚¯å®šä¸å°‘æŽ¥è§¦markdownä»£ç å—è¯­æ³•ï¼Œä½†æ™®é€šçš„markdownä»£ç å—è¯­æ³•æä¾›çš„åŠŸèƒ½æ˜¯æœ‰é™çš„ï¼Œå¦‚æžœä½ æƒ³åœ¨ä»£ç å—æ ‡é¢˜æ æˆ–è€…å†…éƒ¨åŠ å…¥ä¸€ç‚¹æ–°é²œçš„ç‚¹ç¼€ï¼Œæ¯”å¦‚åœ¨æ ‡é¢˜æ ä¸Šæ˜¾ç¤ºæ–‡ä»¶åã€æ–‡ä»¶è·¯å¾„ã€ä¸‹è½½åœ°å€ç­‰ç­‰ï¼›åœ¨ä»£ç å†…éƒ¨æ ¹æ®è¡Œé¦–çš„+æˆ–è€…-è¿›è¡Œdiffé«˜äº®ï¼Œé‚£ä¹ˆä½ æ˜¯å¦æ— ä»Žä¸‹æ‰‹ï¼Ÿå“ˆå“ˆðŸ˜„ â€¦åºŸè¯ä¸å¤šè¯´ï¼ä¸‹é¢å°±ä¸ºæ‚¨æä¾›æ–¹æ¡ˆã€‚æ­£å¸¸markdownä»£ç å—çš„å†™æ³•æ˜¯è¿™æ ·çš„ï¼š&#x60;&#x60;&#x60; [language]code snippet&#x60;&#x60;&#x60;è€Œæœ¬æ–‡ä»‹ç»çš„hexoä»£ç å—è¿›é˜¶å†™æ³•æ˜¯å¦‚ä¸‹æ ¼å¼çš„ï¼š&#x60;&#x60;&#x60; [language] [title] [url] [link text]code snippet&#x60;&#x60;&#x60;å„å‚æ•°æ„ä¹‰å¦‚ä¸‹ï¼šlangugaeï¼šè¯­è¨€åç§°ï¼Œå¼•å¯¼æ¸²æŸ“å¼•æ“Žæ­£ç¡®è§£æžå¹¶é«˜äº®æ˜¾ç¤ºå…³é”®å­—titleï¼šä»£ç å—æ ‡é¢˜ï¼Œå°†ä¼šæ˜¾ç¤ºåœ¨å·¦ä¸Šè§’urlï¼šé“¾æŽ¥åœ°å€ï¼Œå¦‚æžœæ²¡æœ‰æŒ‡å®š link text åˆ™ä¼šåœ¨å³ä¸Šè§’æ˜¾ç¤º linklink textï¼šé“¾æŽ¥åç§°ï¼ŒæŒ‡å®š url åŽæœ‰æ•ˆï¼Œå°†ä¼šæ˜¾ç¤ºåœ¨å³ä¸Šè§’url å¿…é¡»ä¸ºæœ‰æ•ˆé“¾æŽ¥åœ°å€æ‰ä¼šä»¥é“¾æŽ¥çš„å½¢å¼æ˜¾ç¤ºåœ¨å³ä¸Šè§’ï¼Œå¦åˆ™å°†ä½œä¸ºæ ‡é¢˜æ˜¾ç¤ºåœ¨å·¦ä¸Šè§’ã€‚ä»¥ url ä¸ºåˆ†ç•Œï¼Œå·¦ä¾§é™¤äº†ç¬¬ä¸€ä¸ªå•è¯ä¼šè¢«è§£æžä¸º languageï¼Œå…¶ä»–æ‰€æœ‰å•è¯éƒ½ä¼šè¢«è§£æžä¸º titleï¼Œè€Œå³ä¾§çš„æ‰€æœ‰å•è¯éƒ½ä¼šè¢«è§£æžä¸º link textã€‚Â¶è¿›é˜¶ä¸€ã€langugae+titleæ¡ˆä¾‹ï¼š&#x60;&#x60;&#x60;java&nbsp;/root/Demo.javapublic class Demo{}&#x60;&#x60;&#x60;æ•ˆæžœå¦‚ä¸‹ï¼š/root/Demo.java1public class Demo&#123;&#125;Â¶è¿›é˜¶äºŒã€langugae + title + url + textæ¡ˆä¾‹ï¼š&#x60;&#x60;&#x60;java&nbsp;&nbsp;Demoç±»&nbsp;https://example.com/&nbsp;æˆ‘çš„ä¸»é¡µpublic class Demo{}&#x60;&#x60;&#x60;æ•ˆæžœå¦‚ä¸‹ï¼šDemoç±»æˆ‘çš„ä¸»é¡µ1public class Demo&#123;&#125;Â¶è¿›é˜¶ä¸‰ã€langugae + url + textå¦‚æžœä¸æƒ³å¡«å†™ titleï¼Œå¯ä»¥åœ¨ language å’Œ url ä¹‹é—´æ·»åŠ è‡³å°‘ä¸‰ä¸ªç©ºæ ¼ã€‚æ¡ˆä¾‹ï¼š&#x60;&#x60;&#x60;java&nbsp;&nbsp;&nbsp;https://example.com/public class Demo{}&#x60;&#x60;&#x60;æ•ˆæžœå¦‚ä¸‹ï¼šæˆ‘çš„ä¸»é¡µ1public class Demo&#123;&#125;Â¶è¿›é˜¶å››ã€langugae + urlæ¡ˆä¾‹ï¼š&#x60;&#x60;&#x60;java&nbsp;&nbsp;&nbsp;https://example.com/public class Demo{}&#x60;&#x60;&#x60;æ²¡æœ‰textçš„è¯ï¼Œé»˜è®¤æ˜¾ç¤ºçš„åç§°æ˜¯linkæ•ˆæžœå¦‚ä¸‹ï¼šlink1public class Demo&#123;&#125;Â¶è¿›é˜¶äº”ã€diffé«˜äº®åªéœ€åœ¨ [language] è¿™å†™ diffï¼Œç„¶åŽåœ¨ç›¸åº”ä»£ç å‰é¢åŠ ä¸Š - å’Œ + å°±è¡Œäº†ã€‚æ¡ˆä¾‹ï¼š&#x60;&#x60;&#x60;diff- public static void main(String[] args){-- }+ public static void main(String[] args){++ }&#x60;&#x60;&#x60;æ•ˆæžœå¦‚ä¸‹ï¼š12345678public class Demo&#123;- public static void main(String[] args)&#123;- - &#125; + public static void main(String[] args)&#123;+ + &#125;&#125;ðŸ’â€â™‚ å¦‚æžœdiffæ²¡æœ‰æ˜¾ç¤ºï¼Œå°è¯•ç¼–è¾‘ç«™ç‚¹é…ç½®æ–‡ä»¶é…ç½®æ–‡ä»¶ /myblog/_config.yml ï¼Œè®¾ç½®è‡ªåŠ¨é«˜äº®è¯•è¯•ï¼ˆåæ­£æˆ‘çš„ä¸è®¾ç½®ä¹Ÿèƒ½ç”¨ï¼‰ï¼š123456highlight: enable: true line_number: true- auto_detect: true+ auto_detect: true tab_replace:]]></content>
      <categories>
        <category>blog</category>
      </categories>
      <tags>
        <tag>hexo</tag>
        <tag>markdown</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[vueé¡¹ç›®ä¸­å¼•å…¥eslint]]></title>
    <url>%2Ffront%2Feslint.html</url>
    <content type="text"><![CDATA[ESLint æ˜¯ä¸€ä¸ªå¼€æºçš„ JavaScript ä»£ç æ£€æŸ¥å·¥å…·ï¼Œè‡ªä»Žes6æ™®åŠåŽã€‚åœ¨ä¼˜ç§€çš„vueå¼€å‘å›¢é˜Ÿé‡Œï¼Œå¼€å‘çš„è¿‡ç¨‹ä¸­å…ä¸äº†åˆ¶å®šä¸€äº›ä»£ç è§„èŒƒï¼Œè€ŒESLintæ­£å¥½å¾ˆå¥½çš„è§£å†³è¿™äº›é—®é¢˜ã€‚ä½†å¯¹äºŽæƒ³æˆ‘è¿™ç§åˆå­¦è€…æ¥è¯´ï¼Œåœ¨ideå·¥å…·é‡Œï¼Œå¦‚æžœä¸æ‡‚ç‚¹es6è¯­æ³•è§„èŒƒï¼Œé‚£ä¹ˆå¼€å‘çš„è¿‡ç¨‹ä¸­å°±ä¼šç»å¸¸å› ä¸ºä¸€å †çº¢è‰²çš„æŠ¥é”™ä¿¡æ¯è€Œè‹¦æ¼ã€‚ç”±æ­¤åœ¨å­¦ä¼šåŸºæœ¬çš„es6è¯­æ³•çš„åŒæ—¶ï¼Œå­¦ä¹ é…ç½®ESLintä¹Ÿæ˜¯ä¸€é—¨å¿…ä¸å¯å°‘çš„åŠŸè¯¾â€¦eslintä¸­æ–‡ç¤¾åŒºï¼šhttps://cn.eslint.orgÂ¶ä¸€ã€å®‰è£…ESLintæ’ä»¶å¦‚æžœä½¿ç”¨vscodeï¼Œé‚£ä¹ˆå®‰è£…å¦‚ä¸‹ä¸‰ä¸ªæ’ä»¶ï¼ˆ1ï¼‰ESLintï¼ˆ2ï¼‰Veturï¼ˆ3ï¼‰Prettier-Code Formatterç„¶åŽåœ¨vscodeçš„settings.jsonä¸­æ·»åŠ å¦‚ä¸‹ESLintæ’ä»¶é…ç½®ï¼š123456789101112131415161718//-------ä¿å­˜æ–‡ä»¶æ—¶eslintè‡ªåŠ¨æ ¼å¼åŒ–è®¾ç½®----------"editor.codeActionsOnSave": &#123; "source.fixAll.eslint": true&#125;,/** ä»£ç æ ¼å¼åŒ–é…ç½® */"editor.tabSize": 2,// å°½å¯èƒ½æŽ§åˆ¶å°¾éšé€—å·çš„æ‰“å°"prettier.trailingComma": "all",// åœ¨ä¿å­˜æ—¶æ ¼å¼åŒ–æ–‡ä»¶"editor.formatOnSave": false,// ä¿å­˜æ—¶è‡ªåŠ¨fix"eslint.autoFixOnSave": true,"[vue]": &#123; "editor.defaultFormatter": "esbenp.prettier-vscode"&#125;,"[javascript]": &#123; "editor.defaultFormatter": "esbenp.prettier-vscode"&#125;ä¸‹é¢æ˜¯ä»¥å‰ç‰ˆæœ¬vscodeçš„ESLintæ’ä»¶é…ç½®ï¼Œä¸Šé¢çš„å°è¯•ä¸æˆåŠŸï¼Œå¯ä»¥è¯•è¯•è¿™ä¸ªã€‚123456789101112131415161718//-------ä¿å­˜æ–‡ä»¶æ—¶eslintè‡ªåŠ¨æ ¼å¼åŒ–è®¾ç½®----------"prettier.eslintIntegration": true, //è®©prettierä½¿ç”¨eslintçš„ä»£ç æ ¼å¼è¿›è¡Œæ ¡éªŒ"vetur.format.defaultFormatter.js": "vscode-typescript", //è®©vueä¸­çš„jsæŒ‰ç¼–è¾‘å™¨è‡ªå¸¦çš„tsæ ¼å¼è¿›è¡Œæ ¼å¼åŒ–"vetur.format.defaultFormatterOptions": &#123; "js-beautify-html": &#123; "wrap_attributes": "force-aligned" //å±žæ€§å¼ºåˆ¶æŠ˜è¡Œå¯¹é½ &#125;&#125;,"eslint.autoFixOnSave": true,"eslint.validate": [ "javascript", &#123; "language": "vue", "autoFix": true &#125;, "html", "vue"]Â¶äºŒã€å…¨å±€å®‰è£…eslint1$ npm install -g eslintÂ¶ä¸‰ã€ä½¿ç”¨æ–¹å¼Â¶1. æ–¹å¼ä¸€Â¶1.1 å®‰è£…ä¾èµ–å°†ä»¥ä¸‹ä¾èµ–é…ç½®åˆ°package.jsonçš„devDependenciesä¸­ï¼š1234"@vue/cli-plugin-babel": "^3.0.1","@vue/cli-plugin-eslint": "^3.0.1","@vue/eslint-config-standard": "^3.0.0-beta.10","eslint-plugin-cypress": "^2.0.1"ç„¶åŽæ‰§è¡Œä¸‹é¢å‘½ä»¤å®‰è£…ä¾èµ–1$ npm installÂ¶1.2 é…ç½®eslintè§„åˆ™åœ¨é¡¹ç›®ç›®å½•åˆ›å»ºeslintrc.jsæ–‡ä»¶ï¼Œå†…å®¹å¦‚ä¸‹123456789101112131415161718192021module.exports = &#123; root: true, 'extends': [ 'plugin:vue/essential', '@vue/standard' ], rules: &#123; // allow async-await 'generator-star-spacing': 'off', // allow debugger during development 'no-debugger': process.env.NODE_ENV === 'production' ? 'error' : 'off', 'vue/no-parsing-error': [2, &#123; 'x-invalid-end-tag': false &#125;], 'no-undef': 'off', 'camelcase': 'off' &#125;, parserOptions: &#123; parser: 'babel-eslint' &#125;&#125;å¤‡æ³¨ï¼šåœ¨main.jsçš„new Vueæ‰€åœ¨çš„è¡Œä¸Šé¢åŠ /* eslint-disable no-new */æ³¨é‡Šï¼Œå¦‚ä¸‹ï¼š12345/* eslint-disable no-new */new Vue(&#123; el: '#app', render: h =&gt; h(App)&#125;)Â¶2. æ–¹å¼äºŒÂ¶2.1 å®‰è£…ä¾èµ–12345$ npm install eslint --save-dev$ npm install babel-eslint --save-dev$ npm install eslint-friendly-formatter --save-dev #æŒ‡å®šé”™è¯¯æŠ¥å‘Šçš„æ ¼å¼è§„èŒƒæ’ä»¶$ npm install eslint-loader --save-dev #å¯åŠ¨vuecliæ—¶å°±å¯ä»¥æ£€æµ‹$ npm install eslint-plugin-vue --save-dev #ç¬¦åˆvueé¡¹ç›®æŽ¨èçš„ä»£ç é£Žæ ¼Â¶2.3 é…ç½®eslintè§„åˆ™é¡¹ç›®ç›®å½•åˆ›å»ºeslintrc.jsæ–‡ä»¶ï¼Œå†…å®¹å¦‚ä¸‹ï¼š123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192module.exports = &#123; root: true, // æ ¹æ–‡ä»¶ï¼Œä¸ä¼šå¾€ä¸Šä¸€å±‚æŸ¥æ‰¾ parserOptions: &#123; parser: 'babel-eslint', sourceType: 'module' &#125;, env: &#123; browser: true, node: true, es6: true, &#125;, extends: ['plugin:vue/recommended', 'eslint:recommended'], // add your custom rules here //it is base on https://github.com/vuejs/eslint-config-vue rules: &#123; "vue/max-attributes-per-line": [2, &#123; "singleline": 10, "multiline": &#123; "max": 1, "allowFirstLine": false &#125; &#125;], "vue/name-property-casing": ["error", "PascalCase"], 'accessor-pairs': 2, 'arrow-spacing': [2, &#123; 'before': true, 'after': true &#125;], 'block-spacing': [2, 'always'], 'brace-style': [2, '1tbs', &#123; 'allowSingleLine': true &#125;], 'camelcase': [0, &#123; 'properties': 'always' &#125;], 'comma-dangle': [2, 'never'], 'comma-spacing': [2, &#123; 'before': false, 'after': true &#125;], 'comma-style': [2, 'last'], 'constructor-super': 2, 'curly': [2, 'multi-line'], 'dot-location': [2, 'property'], 'eol-last': 2, 'eqeqeq': [2, 'allow-null'], 'generator-star-spacing': [2, &#123; 'before': true, 'after': true &#125;], 'handle-callback-err': [2, '^(err|error)$'], 'indent': [2, 2, &#123; 'SwitchCase': 1 &#125;], 'jsx-quotes': [2, 'prefer-single'], 'key-spacing': [2, &#123; 'beforeColon': false, 'afterColon': true &#125;], 'keyword-spacing': [2, &#123; 'before': true, 'after': true &#125;], 'new-cap': [2, &#123; 'newIsCap': true, 'capIsNew': false &#125;], 'new-parens': 2, 'no-array-constructor': 2, 'no-caller': 2, 'no-console': 'off', 'no-class-assign': 2, 'no-cond-assign': 2, 'no-const-assign': 2, 'no-control-regex': 0, 'no-delete-var': 2, 'no-dupe-args': 2, 'no-dupe-class-members': 2, 'no-dupe-keys': 2, 'no-duplicate-case': 2, 'no-empty-character-class': 2, 'no-empty-pattern': 2, 'no-eval': 2, 'no-ex-assign': 2, 'no-extend-native': 2, 'no-extra-bind': 2, 'no-extra-boolean-cast': 2, 'no-extra-parens': [2, 'functions'], 'no-fallthrough': 2, 'no-floating-decimal': 2, 'no-func-assign': 2, 'no-implied-eval': 2, 'no-inner-declarations': [2, 'functions'], 'no-invalid-regexp': 2, 'no-irregular-whitespace': 2, 'no-iterator': 2, 'no-label-var': 2, 'no-labels': [2, &#123; 'allowLoop': false, 'allowSwitch': false &#125;], 'no-lone-blocks': 2, 'no-mixed-spaces-and-tabs': 2, 'no-multi-spaces': 2, 'no-multi-str': 2, 'no-multiple-empty-lines': [2, &#123; 'max': 1 &#125;], 'no-native-reassign': 2, 'no-negated-in-lhs': 2, 'no-new-object': 2, 'no-new-require': 2, 'no-new-symbol': 2, 'no-new-wrappers': 2, 'no-obj-calls': 2, 'no-octal': 2, 'no-octal-escape': 2, 'no-path-concat': 2, 'no-proto': 2, 'no-redeclare': 2, 'no-regex-spaces': 2, 'no-return-assign': [2, 'except-parens'], 'no-self-assign': 2, 'no-self-compare': 2, 'no-sequences': 2, 'no-shadow-restricted-names': 2, 'no-spaced-func': 2, 'no-sparse-arrays': 2, 'no-this-before-super': 2, 'no-throw-literal': 2, 'no-trailing-spaces': 2, 'no-undef': 0, 'no-undef-init': 2, 'no-unexpected-multiline': 2, 'no-unmodified-loop-condition': 2, 'no-unneeded-ternary': [2, &#123; 'defaultAssignment': false &#125;], 'no-unreachable': 2, 'no-unsafe-finally': 2, 'no-unused-vars': 0, 'no-useless-call': 2, 'no-useless-computed-key': 2, 'no-useless-constructor': 2, 'no-useless-escape': 0, 'no-whitespace-before-property': 2, 'no-with': 2, 'one-var': [2, &#123; 'initialized': 'never' &#125;], 'operator-linebreak': [2, 'after', &#123; 'overrides': &#123; '?': 'before', ':': 'before' &#125; &#125;], 'padded-blocks': [2, 'never'], 'quotes': [2, 'single', &#123; 'avoidEscape': true, 'allowTemplateLiterals': true &#125;], 'semi': [2, 'never'], 'semi-spacing': [2, &#123; 'before': false, 'after': true &#125;], 'space-before-blocks': [2, 'always'], 'space-before-function-paren': [2, 'never'], 'space-in-parens': [2, 'never'], 'space-infix-ops': 2, 'space-unary-ops': [2, &#123; 'words': true, 'nonwords': false &#125;], 'spaced-comment': [2, 'always', &#123; 'markers': ['global', 'globals', 'eslint', 'eslint-disable', '*package', '!', ','] &#125;], 'template-curly-spacing': [2, 'never'], 'use-isnan': 2, 'valid-typeof': 2, 'wrap-iife': [2, 'any'], 'yield-star-spacing': [2, 'both'], 'yoda': [2, 'never'], 'prefer-const': 2, 'no-debugger': process.env.NODE_ENV === 'production' ? 2 : 0, 'object-curly-spacing': [2, 'always', &#123; objectsInObjects: false &#125;], 'array-bracket-spacing': [2, 'never'] &#125;&#125;]]></content>
      <categories>
        <category>front</category>
      </categories>
      <tags>
        <tag>vue</tag>
        <tag>eslint</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ngrokåå‘ä»£ç†å†…ç½‘gitä»“åº“]]></title>
    <url>%2Ftools%2Fngrok_git.html</url>
    <content type="text"><![CDATA[ä½ æ˜¯å¦å› ä¸ºæ— æ³•è®¿é—®å…¬å¸å†…ç½‘çš„gitæœåŠ¡å™¨è€Œæ„Ÿåˆ°å‘æ¼ï¼Œåªè¦ä½ åœ¨å…¬å¸å†…éƒ¨æœ‰ä¸€å°pcç”µè„‘ï¼Œçœ‹çœ‹è¿™ç¯‡æ–‡ç« ï¼Œé—®é¢˜å°±èƒ½å¤Ÿå¾ˆå¿«è§£å†³â€¦éœ€è¦å…ˆå®‰è£…ngrokå¹¶ç¼–è¯‘ç”Ÿæˆä»£ç†æœåŠ¡ç«¯å’Œä»£ç†å®¢æˆ·ç«¯ç¨‹åºã€‚å…·ä½“æ“ä½œå¯å‚è€ƒï¼šã€Šngrokå®žçŽ°å†…ç½‘ç©¿é€ã€‹Â¶1. ä»£ç†æœåŠ¡ç«¯ï¼ˆå…¬ç½‘ï¼‰å¯åŠ¨æœåŠ¡ç«¯ç¨‹åº1$ ~/ngrok/bin/ngrokd -domain="ngrok.example.com"Â¶2. ä»£ç†å®¢æˆ·ç«¯ngroké…ç½®ï¼ˆå†…ç½‘ï¼‰ï¼ˆ1ï¼‰ä¸‹è½½ç¼–è¯‘ç”Ÿæˆçš„ä»£ç†å®¢æˆ·ç«¯ç¨‹åºåŽé…ç½®ngrok.cfg123456789$ vim ngrok.cfgserver_addr: "ngrok.example.com:4443"trust_host_root_certs: false#éš§é“åˆ—è¡¨tunnels: git: remote_port: 2222 proto: tcp: gitlab.company.com:2222ï¼ˆ2ï¼‰å¯åŠ¨å†…ç½‘ä¸­çš„ä»£ç†å®¢æˆ·ç«¯1$ ./ngrok.exe -config ngrok.cfg start gitÂ¶2. å¤–ç½‘ç”¨æˆ·ç«¯æ“ä½œï¼ˆå¤–ç½‘ï¼‰ï¼ˆ1ï¼‰ç”Ÿæˆå¯†é’¥é»˜è®¤å·²ç»æœ‰~/.ssh/id_rsaå¯†é’¥çš„è¯,å¯ä»¥ç”Ÿæˆä¸åŒåç§°çš„å¯†é’¥æ–‡ä»¶ã€‚ä¸ºä»€ä¹ˆä¸ç”¨é»˜è®¤çš„~/.ssh/id_rsaï¼Ÿå› ä¸ºå¦‚æžœgithubçš„gitæ³¨å†Œè´¦å·å’Œå…¬å¸çš„gitæ³¨å†Œè´¦å·ä¸ä¸€æ ·çš„è¯ï¼Œå¯¹åº”çš„ssh_keyä¹Ÿä¸ä¸€æ ·ã€‚1$ ssh-keygen -t rsa -C "qcmoke@company.com" -f ~/.ssh/id_rsa_companyï¼ˆ2ï¼‰ç»™sshç”¨æˆ·ç«¯æ·»åŠ ç§é’¥1$ ssh-add ~/.ssh/id_rsa_companyï¼ˆ3ï¼‰åœ¨å…¬å¸å†…ç½‘æœåŠ¡ä¸­åŠ å…¥å…¬é’¥ç”¨æˆ·ç«¯ssh_key,å³~/.ssh/id_rsa_company.pubé‡Œçš„å†…å®¹ã€‚ï¼ˆ4ï¼‰é…ç½®gitæœåŠ¡12345678910#å‡è®¾å…¬å¸å†…ç½‘gitåŸŸåä¸ºgitlab.company.comï¼Œè€Œç«¯å£æ˜¯2222(é»˜è®¤æ˜¯22)ï¼Œgitè´¦å·ä¸ºqcmoke#HostNameæŒ‡å‘ä»£ç†æœåŠ¡å™¨#IdentityFileä¸ºç”Ÿæˆçš„ç§é’¥æ–‡ä»¶è·¯å¾„$ vim ~/.ssh/configHost gitlab.company.com HostName ngrok.example.com PreferredAuthentications publickey IdentityFile ~/.ssh/id_rsa_company User qcmoke Port 2222ï¼ˆ5ï¼‰æ·»åŠ ç§é’¥åˆ°ç”¨æˆ·ç«¯çš„sshä¸­123456#å¯ç”¨sshä»£ç†$ ssh-agent bash#åˆ—å‡ºæ·»åŠ çš„æ‰€æœ‰ç§é’¥$ ssh-add -l#æ·»åŠ ç§é’¥$ ssh-add ~/.ssh/id_rsa_company #sshæ¸…ç©ºç§é’¥ssh-add -Dï¼ˆ6ï¼‰æµ‹è¯•å’Œå…‹éš†ä»“åº“12$ ssh -T git@gitlab.company.com$ git clone ssh://git@gitlab.company.com:2222/test.git]]></content>
      <categories>
        <category>tools</category>
      </categories>
      <tags>
        <tag>git</tag>
        <tag>å†…ç½‘ç©¿é€</tag>
        <tag>åå‘ä»£ç†</tag>
        <tag>ngrok</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Dockerå­¦ä¹ ç¬”è®°]]></title>
    <url>%2Fdevops%2Fdocker.html</url>
    <content type="text"><![CDATA[Â¶ä¸€ã€ç®€ä»‹Docker æ˜¯ä¸€ä¸ªå¼€æºçš„åº”ç”¨å®¹å™¨å¼•æ“Žï¼Œå®ƒæ˜¯ç”± Go è¯­è¨€ å¼€å‘å®žçŽ°çš„è½»é‡çº§å®¹å™¨æŠ€æœ¯ï¼Œå®ƒæ˜¯åŸºäºŽ Linux å†…æ ¸çš„ cgroupï¼Œnamespaceï¼Œä»¥åŠ AUFS ç±»çš„ Union FS ç­‰æŠ€æœ¯ï¼Œå¯¹è¿›ç¨‹è¿›è¡Œå°è£…éš”ç¦»ï¼Œå±žäºŽ æ“ä½œç³»ç»Ÿå±‚é¢çš„è™šæ‹ŸåŒ–æŠ€æœ¯ã€‚ç”±äºŽéš”ç¦»çš„è¿›ç¨‹ç‹¬ç«‹äºŽå®¿ä¸»å’Œå…¶å®ƒéš”ç¦»çš„è¿›ç¨‹ï¼Œå› æ­¤ä¹Ÿç§°å…¶ä¸ºå®¹å™¨ã€‚å®˜ç½‘ï¼šhttps://www.docker.comä¸­æ–‡ç½‘ï¼šhttps://dockerdocs.cnDocker Hubï¼ˆDocker é•œåƒä»“åº“ï¼‰ï¼šhttps://hub.docker.comÂ¶äºŒã€æ¦‚å¿µÂ¶1. æ¦‚è¦ç†è§£Dockeræ”¯æŒå®‰è£…å„ç§è½¯ä»¶å¹¶åšå¥½é…ç½®åŽç¼–è¯‘æˆé•œåƒï¼Œæœ€ç»ˆå¯ä»¥ç›´æŽ¥è¿è¡Œé•œåƒäº§ç”Ÿä¸€ä¸ªæˆ–å¤šä¸ªè¿è¡ŒäºŽå®¿ä¸»æœºå†…æ ¸ä¸Šçš„å®¹å™¨ã€‚ä¸ºäº†å½¢è±¡çš„ç†è§£å®¹å™¨ï¼Œå¯ä»¥ç®€å•çš„ç†è§£å®ƒä¸ºè¿è¡Œåœ¨æ“ä½œç³»ç»Ÿä¸Šçš„ç‹¬ç«‹æ²™ç®±ç³»ç»Ÿï¼Œè¿™äº›æ²™ç®±ç³»ç»Ÿå†…éƒ¨çš„æ–‡ä»¶ç³»ç»Ÿå’ŒLinuxçš„éžå¸¸ç›¸ä¼¼ï¼Œäº‹å®žä¸Šç¡®æ˜¯å¦‚æ­¤ï¼Œå› ä¸ºDockerå°±æ˜¯èžåˆäº†Linuxå†…æ ¸è€Œå®žçŽ°çš„è™šæ‹ŸåŒ–æŠ€æœ¯ï¼Œç”±äºŽå…·æœ‰æ²™ç®±çš„ç‰¹æ€§ï¼Œæ‰€ä»¥å„ä¸ªå®¹å™¨ä¹‹é—´æ˜¯éš”ç¦»è¿è¡Œçš„ã€ç‹¬ç«‹çš„ã€äº’ä¸å½±å“çš„ï¼Œç¨‹åºå‘˜ç”šè‡³ä¸ç”¨æ‹…å¿ƒå®¹å™¨å†…éƒ¨æŸåæˆ–è€…å´©æºƒå¯¼è‡´å®¿ä¸»æœºå‡ºé”™ï¼Œå› ä¸ºåªè¦åˆ é™¤æŽ‰è¿™äº›æœ‰é—®é¢˜çš„å®¹å™¨ï¼Œè€Œå†è¿è¡Œç›¸å…³çš„é•œåƒåˆä¼šå¾—åˆ°å…¨æ–°çš„å®¹å™¨äº†ï¼Œåªè¦ä¸è¿›è¡Œæ•°æ®æŒ‚è½½ï¼Œæ•´ä¸ªè¿‡ç¨‹ç”šè‡³å¹²å‡€ä¸ç•™æ®‹ä½™ã€‚Â¶2. æ ¸å¿ƒå†…å®¹dockerä¸»æœº(Host)ï¼šæˆ–è€…ç§°ä¸ºdockerå®¿ä¸»æœºï¼Œå³å®‰è£…äº†Dockerç¨‹åºçš„æœºå™¨ã€‚dockerå®¢æˆ·ç«¯(Client)ï¼šè¿žæŽ¥dockerä¸»æœºè¿›è¡Œæ“ä½œçš„ç¨‹åºã€‚dockeré•œåƒ(Images)ï¼šæ˜¯ä¸€ä¸ªç‰¹æ®Šçš„æ–‡ä»¶ç³»ç»Ÿï¼Œé™¤äº†æä¾›å®¹å™¨è¿è¡Œæ—¶æ‰€éœ€çš„ç¨‹åºã€åº“ã€èµ„æºã€é…ç½®ç­‰æ–‡ä»¶å¤–ï¼Œè¿˜åŒ…å«äº†ä¸€äº›ä¸ºè¿è¡Œæ—¶å‡†å¤‡çš„ä¸€äº›é…ç½®å‚æ•°ï¼ˆå¦‚åŒ¿åå·ã€çŽ¯å¢ƒå˜é‡ã€ç”¨æˆ·ç­‰ï¼‰ã€‚é•œåƒä¸åŒ…å«ä»»ä½•åŠ¨æ€æ•°æ®ï¼Œå…¶å†…å®¹åœ¨æž„å»ºä¹‹åŽä¹Ÿä¸ä¼šè¢«æ”¹å˜ã€‚dockerå®¹å™¨(Container)ï¼šè¿è¡Œé•œåƒåŽäº§ç”Ÿçš„å®žä¾‹ç§°ä¸ºå®¹å™¨ï¼Œå®žè´¨æ˜¯è¿è¡ŒäºŽç‹¬ç«‹çš„ å‘½åç©ºé—´çš„è¿›ç¨‹ã€‚dockerä»“åº“(Registry)ï¼šé›†ä¸­å­˜å‚¨ã€åˆ†å‘é•œåƒçš„ä»“åº“æœåŠ¡ç³»ç»Ÿï¼Œä½œç”¨æ˜¯å…è®¸ç”¨æˆ·ä¸Šä¼ ã€ä¸‹è½½å¹¶ç®¡ç†é•œåƒï¼ŒåŒ…æ‹¬å…¬æœ‰ä»“åº“å’Œç§æœ‰ä»“åº“ã€‚Â¶3. å¯¹æ¯”ä¼ ç»Ÿè™šæ‹Ÿæœºç‰¹æ€§è™šæ‹Ÿæœºçš„æž¶æž„å®¹å™¨çš„æž¶æž„å¯åŠ¨åˆ†é’Ÿçº§ç§’çº§æ€§èƒ½å¼±äºŽåŽŸç”ŸæŽ¥è¿‘åŽŸç”Ÿç¡¬ç›˜ä½¿ç”¨ä¸€èˆ¬ä¸ºGBä¸€èˆ¬ä¸ºMBç³»ç»Ÿæ”¯æŒé‡ä¸€èˆ¬å‡ åä¸ªå•æœºä¸Šåƒä¸ªå®¹å™¨è™šæ‹Ÿæœºçš„æž¶æž„ï¼š æ¯ä¸ªè™šæ‹Ÿæœºéƒ½åŒ…æ‹¬åº”ç”¨ç¨‹åºã€å¿…è¦çš„äºŒè¿›åˆ¶æ–‡ä»¶å’Œåº“ä»¥åŠä¸€ä¸ªå®Œæ•´çš„å®¢æˆ·æ“ä½œç³»ç»Ÿ(Guest OS)ï¼Œå°½ç®¡å®ƒä»¬è¢«åˆ†ç¦»ï¼Œå®ƒä»¬å…±äº«å¹¶åˆ©ç”¨ä¸»æœºçš„ç¡¬ä»¶èµ„æºï¼Œå°†è¿‘éœ€è¦åå‡ ä¸ª GB çš„å¤§å°ã€‚å®¹å™¨çš„æž¶æž„ï¼š å®¹å™¨åŒ…æ‹¬åº”ç”¨ç¨‹åºåŠå…¶æ‰€æœ‰çš„ä¾èµ–ï¼Œä½†ä¸Žå…¶ä»–å®¹å™¨å…±äº«å†…æ ¸ã€‚å®ƒä»¬ä»¥ç‹¬ç«‹çš„ç”¨æˆ·ç©ºé—´è¿›ç¨‹å½¢å¼è¿è¡Œåœ¨å®¿ä¸»æœºæ“ä½œç³»ç»Ÿä¸Šã€‚ä»–ä»¬ä¹Ÿä¸ä¾èµ–äºŽä»»ä½•ç‰¹å®šçš„åŸºç¡€è®¾æ–½ï¼ŒDocker å®¹å™¨å¯ä»¥è¿è¡Œåœ¨ä»»ä½•è®¡ç®—æœºä¸Šï¼Œä»»ä½•åŸºç¡€è®¾æ–½å’Œä»»ä½•äº‘ä¸Šã€‚ Â¶4. ä¼˜åŠ¿ï¼ˆ1ï¼‰å¿«é€Ÿçš„å¯åŠ¨æ—¶é—´ç”±äºŽDockerå®¹å™¨ç›´æŽ¥è¿è¡ŒäºŽå®¿ä¸»å†…æ ¸ï¼Œæ— éœ€å¯åŠ¨å®Œæ•´çš„æ“ä½œç³»ç»Ÿå³å¯è¿è¡Œï¼Œå› æ­¤å¯ä»¥åšåˆ°ç§’çº§ã€ç”šè‡³æ¯«ç§’çº§çš„å¯åŠ¨æ—¶é—´ï¼Œè¿™å¤§å¤§çš„èŠ‚çº¦äº†å¼€å‘ã€æµ‹è¯•ã€éƒ¨ç½²çš„æ—¶é—´ã€‚ï¼ˆ2ï¼‰ä¸€è‡´çš„è¿è¡ŒçŽ¯å¢ƒå¼€å‘è¿‡ç¨‹ä¸­ä¸€ä¸ªå¸¸è§çš„é—®é¢˜æ˜¯çŽ¯å¢ƒä¸€è‡´æ€§é—®é¢˜ã€‚ç”±äºŽä¸åŒç‰©ç†æœºçš„å¼€å‘çŽ¯å¢ƒä¸ä¸€è‡´ï¼Œç»å¸¸å‡ºçŽ°å®‰è£…äº†ç›¸åŒçš„è½¯ä»¶ä½†å´æœ‰ä¸åŒçš„è¿è¡Œæ•ˆæžœçŽ°è±¡ï¼Œç”šè‡³æœ‰çš„çŽ¯å¢ƒä¸‹è¿˜ä¼šå‡ºçŽ°bugã€‚è€Œ Docker çš„é•œåƒæä¾›äº†é™¤å†…æ ¸å¤–å®Œæ•´çš„è¿è¡Œæ—¶çŽ¯å¢ƒï¼Œç¡®ä¿äº†åº”ç”¨è¿è¡ŒçŽ¯å¢ƒä¸€è‡´æ€§ï¼Œä»¥è‡³äºŽä¸ä¼šå†å‡ºçŽ° â€œè¿™æ®µä»£ç åœ¨æˆ‘æœºå™¨ä¸Šæ²¡é—®é¢˜å•Šâ€ è¿™ç±»çš„é—®é¢˜ã€‚ï¼ˆ3ï¼‰æŒç»­äº¤ä»˜å’Œéƒ¨ç½²Dockerå¯ä»¥ä¸€æ¬¡åˆ›å»ºæˆ–é…ç½®é•œåƒï¼Œè€Œå¯ä»¥åœ¨ä»»æ„åœ°æ–¹æ­£å¸¸è¿è¡Œã€‚å³&quot;ä¸€å¤„æž„å»ºï¼Œåˆ°å¤„è¿è¡Œ&quot;ã€‚ï¼ˆ4ï¼‰æ›´æ–¹ä¾¿çš„è¿ç§»Docker å¯ä»¥åœ¨å¾ˆå¤šå¹³å°ä¸Šè¿è¡Œï¼Œæ— è®ºæ˜¯ç‰©ç†æœºã€è™šæ‹Ÿæœºã€å…¬æœ‰äº‘ã€ç§æœ‰äº‘ï¼Œç”šè‡³æ˜¯ç¬”è®°æœ¬ï¼Œå…¶è¿è¡Œç»“æžœæ˜¯ä¸€è‡´çš„ã€‚å› æ­¤ç”¨æˆ·å¯ä»¥å¾ˆè½»æ˜“çš„å°†åœ¨ä¸€ä¸ªå¹³å°ä¸Šè¿è¡Œçš„åº”ç”¨ï¼Œè¿ç§»åˆ°å¦ä¸€ä¸ªå¹³å°ä¸Šï¼Œè€Œä¸ç”¨æ‹…å¿ƒè¿è¡ŒçŽ¯å¢ƒçš„å˜åŒ–å¯¼è‡´åº”ç”¨æ— æ³•æ­£å¸¸è¿è¡Œçš„æƒ…å†µã€‚ï¼ˆ5ï¼‰æ›´è½»é‡çš„ç»´æŠ¤å’Œæ‰©å±•Docker ä½¿ç”¨çš„åˆ†å±‚å­˜å‚¨ä»¥åŠé•œåƒçš„æŠ€æœ¯ï¼Œä½¿å¾—åº”ç”¨é‡å¤éƒ¨åˆ†çš„å¤ç”¨æ›´ä¸ºå®¹æ˜“ï¼Œä¹Ÿä½¿å¾—åº”ç”¨çš„ç»´æŠ¤æ›´æ–°æ›´åŠ ç®€å•ï¼ŒåŸºäºŽåŸºç¡€é•œåƒè¿›ä¸€æ­¥æ‰©å±•é•œåƒä¹Ÿå˜å¾—éžå¸¸ç®€å•ã€‚æ­¤å¤–ï¼ŒDocker å›¢é˜ŸåŒå„ä¸ªå¼€æºé¡¹ç›®å›¢é˜Ÿä¸€èµ·ç»´æŠ¤äº†ä¸€å¤§æ‰¹é«˜è´¨é‡çš„ å®˜æ–¹é•œåƒï¼Œæ—¢å¯ä»¥ç›´æŽ¥åœ¨ç”Ÿäº§çŽ¯å¢ƒä½¿ç”¨ï¼Œåˆå¯ä»¥ä½œä¸ºåŸºç¡€è¿›ä¸€æ­¥å®šåˆ¶ï¼Œå¤§å¤§çš„é™ä½Žäº†åº”ç”¨æœåŠ¡çš„é•œåƒåˆ¶ä½œæˆæœ¬ã€‚Â¶5. åˆ†å±‚å­˜å‚¨å› ä¸ºé•œåƒåŒ…å«æ“ä½œç³»ç»Ÿå®Œæ•´çš„ root æ–‡ä»¶ç³»ç»Ÿï¼Œå…¶ä½“ç§¯å¾€å¾€æ˜¯åºžå¤§çš„ï¼Œå› æ­¤åœ¨ Docker è®¾è®¡æ—¶ï¼Œå°±å……åˆ†åˆ©ç”¨ Union FS çš„æŠ€æœ¯ï¼Œå°†å…¶è®¾è®¡ä¸ºåˆ†å±‚å­˜å‚¨çš„æž¶æž„ã€‚æ‰€ä»¥ä¸¥æ ¼æ¥è¯´ï¼Œé•œåƒå¹¶éžæ˜¯åƒä¸€ä¸ª ISO é‚£æ ·çš„æ‰“åŒ…æ–‡ä»¶ï¼Œé•œåƒåªæ˜¯ä¸€ä¸ªè™šæ‹Ÿçš„æ¦‚å¿µï¼Œå…¶å®žé™…ä½“çŽ°å¹¶éžç”±ä¸€ä¸ªæ–‡ä»¶ç»„æˆï¼Œè€Œæ˜¯ç”±ä¸€ç»„æ–‡ä»¶ç³»ç»Ÿç»„æˆï¼Œæˆ–è€…è¯´ï¼Œç”±å¤šå±‚æ–‡ä»¶ç³»ç»Ÿè”åˆç»„æˆã€‚é•œåƒæž„å»ºæ—¶ï¼Œä¼šä¸€å±‚å±‚æž„å»ºï¼Œå‰ä¸€å±‚æ˜¯åŽä¸€å±‚çš„åŸºç¡€ã€‚æ¯ä¸€å±‚æž„å»ºå®Œå°±ä¸ä¼šå†å‘ç”Ÿæ”¹å˜ï¼ŒåŽä¸€å±‚ä¸Šçš„ä»»ä½•æ”¹å˜åªå‘ç”Ÿåœ¨è‡ªå·±è¿™ä¸€å±‚ã€‚æ¯”å¦‚ï¼Œåˆ é™¤å‰ä¸€å±‚æ–‡ä»¶çš„æ“ä½œï¼Œå®žé™…ä¸æ˜¯çœŸçš„åˆ é™¤å‰ä¸€å±‚çš„æ–‡ä»¶ï¼Œè€Œæ˜¯ä»…åœ¨å½“å‰å±‚æ ‡è®°ä¸ºè¯¥æ–‡ä»¶å·²åˆ é™¤ã€‚åœ¨æœ€ç»ˆå®¹å™¨è¿è¡Œçš„æ—¶å€™ï¼Œè™½ç„¶ä¸ä¼šçœ‹åˆ°è¿™ä¸ªæ–‡ä»¶ï¼Œä½†æ˜¯å®žé™…ä¸Šè¯¥æ–‡ä»¶ä¼šä¸€ç›´è·Ÿéšé•œåƒã€‚å› æ­¤ï¼Œåœ¨æž„å»ºé•œåƒçš„æ—¶å€™ï¼Œéœ€è¦é¢å¤–å°å¿ƒï¼Œæ¯ä¸€å±‚å°½é‡åªåŒ…å«è¯¥å±‚éœ€è¦æ·»åŠ çš„ä¸œè¥¿ï¼Œä»»ä½•é¢å¤–çš„ä¸œè¥¿åº”è¯¥åœ¨è¯¥å±‚æž„å»ºç»“æŸå‰æ¸…ç†æŽ‰ã€‚åˆ†å±‚å­˜å‚¨çš„ç‰¹å¾è¿˜ä½¿å¾—é•œåƒçš„å¤ç”¨ã€å®šåˆ¶å˜çš„æ›´ä¸ºå®¹æ˜“ã€‚ç”šè‡³å¯ä»¥ç”¨ä¹‹å‰æž„å»ºå¥½çš„é•œåƒä½œä¸ºåŸºç¡€å±‚ï¼Œç„¶åŽè¿›ä¸€æ­¥æ·»åŠ æ–°çš„å±‚ï¼Œä»¥å®šåˆ¶è‡ªå·±æ‰€éœ€çš„å†…å®¹ï¼Œæž„å»ºæ–°çš„é•œåƒã€‚Â¶6. å®¹å™¨å­˜å‚¨å±‚é•œåƒä½¿ç”¨çš„æ˜¯åˆ†å±‚å­˜å‚¨ï¼Œå®¹å™¨ä¹Ÿæ˜¯å¦‚æ­¤ã€‚æ¯ä¸€ä¸ªå®¹å™¨è¿è¡Œæ—¶ï¼Œæ˜¯ä»¥é•œåƒä¸ºåŸºç¡€å±‚ï¼Œåœ¨å…¶ä¸Šåˆ›å»ºä¸€ä¸ªå½“å‰å®¹å™¨çš„å­˜å‚¨å±‚ï¼Œæˆ‘ä»¬å¯ä»¥ç§°è¿™ä¸ªä¸ºå®¹å™¨è¿è¡Œæ—¶è¯»å†™è€Œå‡†å¤‡çš„å­˜å‚¨å±‚ä¸º å®¹å™¨å­˜å‚¨å±‚ã€‚Â¶7. æ•°æ®å·æ•°æ®å· æ˜¯ä¸€ä¸ªå¯ä¾›ä¸€ä¸ªæˆ–å¤šä¸ªå®¹å™¨ä½¿ç”¨çš„ç‰¹æ®Šç›®å½•ï¼Œå½“å®¹å™¨å†…éƒ¨çš„ç›®å½•(æ–‡ä»¶)æ˜ å°„åˆ°å®¿ä¸»æœºçš„æŸç›®å½•(æ–‡ä»¶)æ—¶ï¼Œé‚£ä¹ˆå°±ç§°è¿™ä¸ªå®¿ä¸»æœºçš„ç›®å½•(æ–‡ä»¶)ä¸ºæ•°æ®å·ã€‚å®ƒç»•è¿‡ UFSï¼Œå¯ä»¥æä¾›å¾ˆå¤šæœ‰ç”¨çš„ç‰¹æ€§ï¼Œå¦‚ä¸‹ï¼šæ•°æ®å· å¯ä»¥åœ¨å®¹å™¨ä¹‹é—´å…±äº«å’Œé‡ç”¨å¯¹ æ•°æ®å· çš„ä¿®æ”¹ä¼šç«‹é©¬ç”Ÿæ•ˆå¯¹ æ•°æ®å· çš„æ›´æ–°ï¼Œä¸ä¼šå½±å“é•œåƒæ•°æ®å· é»˜è®¤ä¼šä¸€ç›´å­˜åœ¨ï¼Œå³ä½¿å®¹å™¨è¢«åˆ é™¤æ³¨æ„ï¼šæ•°æ®å· çš„ä½¿ç”¨ï¼Œç±»ä¼¼äºŽ Linux ä¸‹å¯¹ç›®å½•æˆ–æ–‡ä»¶è¿›è¡Œ mountï¼Œé•œåƒä¸­çš„è¢«æŒ‡å®šä¸ºæŒ‚è½½ç‚¹çš„ç›®å½•ä¸­çš„æ–‡ä»¶ä¼šéšè—æŽ‰ï¼Œèƒ½æ˜¾ç¤ºçœ‹çš„æ˜¯æŒ‚è½½çš„ æ•°æ®å·ã€‚æŒ‰ç…§ Docker æœ€ä½³å®žè·µçš„è¦æ±‚ï¼Œå®¹å™¨ä¸åº”è¯¥å‘å…¶å­˜å‚¨å±‚å†…å†™å…¥ä»»ä½•æ•°æ®ï¼Œå®¹å™¨å­˜å‚¨å±‚è¦ä¿æŒæ— çŠ¶æ€åŒ–ã€‚æ‰€æœ‰çš„æ–‡ä»¶å†™å…¥æ“ä½œï¼Œéƒ½åº”è¯¥ä½¿ç”¨æ•°æ®å·ï¼ˆVolumeï¼‰ã€æˆ–è€…ç»‘å®šå®¿ä¸»ç›®å½•ï¼Œåœ¨è¿™äº›ä½ç½®çš„è¯»å†™ä¼šè·³è¿‡å®¹å™¨å­˜å‚¨å±‚ï¼Œç›´æŽ¥å¯¹å®¿ä¸»ï¼ˆæˆ–ç½‘ç»œå­˜å‚¨ï¼‰å‘ç”Ÿè¯»å†™ï¼Œå…¶æ€§èƒ½å’Œç¨³å®šæ€§æ›´é«˜ã€‚æ•°æ®å·çš„ç”Ÿå­˜å‘¨æœŸç‹¬ç«‹äºŽå®¹å™¨ï¼Œå®¹å™¨æ¶ˆäº¡ï¼Œæ•°æ®å·ä¸ä¼šæ¶ˆäº¡ã€‚å› æ­¤ï¼Œä½¿ç”¨æ•°æ®å·åŽï¼Œå®¹å™¨åˆ é™¤æˆ–è€…é‡æ–°è¿è¡Œä¹‹åŽï¼Œæ•°æ®å´ä¸ä¼šä¸¢å¤±ã€‚Â¶ä¸‰ã€Docker å®‰è£…å’Œç»´æŠ¤Docker åˆ†ä¸º CE å’Œ EE ä¸¤å¤§ç‰ˆæœ¬ã€‚CE å³ç¤¾åŒºç‰ˆï¼ŒEE å³ä¼ä¸šç‰ˆï¼Œå¼ºè°ƒå®‰å…¨ï¼Œä»˜è´¹ä½¿ç”¨ã€‚Â¶1. åŒ…ç®¡ç†å™¨å®‰è£… Dockerè¯´æ˜Žï¼šä¸‹é¢ä»¥ä½¿ç”¨ CentOS7 çš„ Yum åŒ…ç®¡ç†å™¨å®‰è£… Docker ä¸ºä¾‹è¿›è¡Œè®²è§£ï¼Œå…¶ä»– Linux å‘è¡Œç‰ˆåŒ…ç®¡ç†å™¨çš„å®‰è£…è¯´æ˜Žå¯å‚è€ƒï¼šhttps://docs.docker.com/engine/install/Â¶1ï¼‰å®‰è£…æ—§ç‰ˆæœ¬ï¼ˆä¸æŽ¨èï¼‰CentOS7 ä»Žé»˜è®¤çš„ Yum æºä¸­å®‰è£…çš„ Docker ç‰ˆæœ¬æ˜¯æ—§ç‰ˆæœ¬ï¼Œæ—§ç‰ˆæœ¬çš„ Docker ç§°ä¸º docker æˆ– docker-engine ï¼Œç”±äºŽç›®å‰å®˜æ–¹ä¸åœ¨ç»´æŠ¤ï¼Œæ•…å»ºè®®è·³è¿‡ä»¥ä¸‹åŽ»å®‰è£…æ–°ç‰ˆæœ¬ã€‚12345678910#æ£€æŸ¥å†…æ ¸ç‰ˆæœ¬ï¼Œå¿…é¡»æ˜¯3.10åŠä»¥ä¸Šuname -r#å®‰è£…dockeryum install docker -y#å¯åŠ¨dockersystemctl start docker#å¼€æœºå¯åŠ¨dockersystemctl enable docker#æŸ¥çœ‹dockerç‰ˆæœ¬ï¼ŒéªŒè¯å®‰è£…æ˜¯å¦æˆåŠŸ(æœ‰clientå’Œserviceä¸¤éƒ¨åˆ†è¡¨ç¤ºdockerå®‰è£…å¯åŠ¨éƒ½æˆåŠŸäº†)docker -vÂ¶2ï¼‰å®‰è£…æ–°ç‰ˆæœ¬123456789101112131415161718192021222324252627282930#å¸è½½æ—§ç‰ˆæœ¬ï¼Œå¦‚æžœå·²å®‰è£…è¿™äº›ç¨‹åºï¼Œè¯·å¸è½½å®ƒä»¬ä»¥åŠç›¸å…³çš„ä¾èµ–é¡¹yum remove docker \ docker-client \ docker-client-latest \ docker-common \ docker-latest \ docker-latest-logrotate \ docker-logrotate \ docker-engine #å®‰è£Dockeræºwget https://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo -O /etc/yum.repos.d/docker-ce.repo#yum install yum-utils -y#yum-config-manager --add-repo https://mirrors.ustc.edu.cn/docker-ce/linux/centos/docker-ce.repo#æŸ¥çœ‹å¯å®‰è£…çš„dockerç‰ˆæœ¬yum list docker-ce --showduplicates#å®‰è£…docker-ceã€‚yum install docker-ce -y#é€‰æ‹©æŒ‡å®šç‰ˆæœ¬Dockerå®‰è£…#yum install -y --setopt=obsoletes=0 docker-ce-&lt;version&gt;#å¦‚ï¼šyum install -y --setopt=obsoletes=0 docker-ce-18.06.3.ce-3.el7#æŸ¥çœ‹dockerç‰ˆæœ¬ï¼ŒéªŒè¯å®‰è£…æ˜¯å¦æˆåŠŸ(æœ‰clientå’Œserviceä¸¤éƒ¨åˆ†è¡¨ç¤ºdockerå®‰è£…å¯åŠ¨éƒ½æˆåŠŸäº†)docker version#å¯åŠ¨å¹¶åŠ å…¥å¼€æœºå¯åŠ¨systemctl start dockersystemctl enable dockeræ›´å¤šå†…å®¹ï¼šæŸ¥çœ‹æ‰€æœ‰ä»“åº“ä¸­æ‰€æœ‰dockerç‰ˆæœ¬ï¼šyum list docker-ce --showduplicates | sort -rå®‰è£…æŒ‡å®šç‰ˆæœ¬ï¼šæ¯”å¦‚yum install docker-ce-17.12.0.ceæ–°ç‰ˆdockerå®‰è£…å¥½åŽå‘½ä»¤è‡ªåŠ¨è¡¥å…¨ä¼šæœ‰äº›ç¼ºå¤±ï¼Œæ‰€ä»¥å¯ä»¥é€‰æ‹©å®‰è£…å‘½ä»¤è¡¥å…¨ä¾èµ–å·¥å…·ã€‚1234567#dockerè‡ªåŠ¨è¡¥é½éœ€è¦ä¾èµ–å·¥å…·bash-completeï¼Œå®‰è£…å¥½åŽä¼šå¾—åˆ°æ–‡ä»¶ä¸º /usr/share/bash-completion/bash_completionyum install -y bash-completion#apt install -y bash-completion#è£…å¥½dockerè‡ªåŠ¨è¡¥é½ä¾èµ–ä¹‹åŽï¼Œè¦åˆ·æ–°ä¸‹æ‰èƒ½è®©å…¶ç”Ÿæ•ˆsource /usr/share/bash-completion/bash_completionsource /usr/share/bash-completion/completions/dockerÂ¶3ï¼‰å†…ç½‘çŽ¯å¢ƒé›†ç¾¤å®‰è£…Â¶ï¼ˆ1ï¼‰yumç¦»çº¿å®‰è£…å¦‚æžœå†…ç½‘ä¸­æœ‰ä¸€å°æœåŠ¡å™¨èƒ½å¤Ÿè®¿é—®å¤–ç½‘ï¼Œå¯ä½¿ç”¨ä¸€ä¸‹æ–¹å¼å®‰è£…ï¼š1234567891011121314151617181920212223#åœ¨å†…ç½‘ä¸­å¯è®¿é—®å¤–ç½‘çš„æœåŠ¡å™¨ä¸­ä¸‹è½½æ¸…åŽçš„é•œåƒæºæ–‡ä»¶ï¼ˆè¦æ±‚è¿™å°æœåŠ¡å™¨ä¾è½¯ä»¶èµ–çŽ¯å¢ƒçº¯å‡€ï¼Œæœ€å¥½æ²¡æœ‰å®‰è£…è¿‡ä»»ä½•è½¯ä»¶ã€‚ç›®çš„æ˜¯è¿™å°æœåŠ¡å™¨çš„æ‰€æœ‰è½¯ä»¶ä¾èµ–ä¸€å®šè¦åœ¨å…¶ä»–å†…ç½‘æœåŠ¡å™¨ä¸­éƒ½å­˜åœ¨ã€‚ï¼‰wget -O /etc/yum.repos.d/docker-ce.repo https://download.docker.com/linux/centos/docker-ce.reposed -i 's+download.docker.com+mirrors.tuna.tsinghua.edu.cn/docker-ce+' /etc/yum.repos.d/docker-ce.repoyum updateyum list docker-ce --showduplicates|sort -r#ä¸‹è½½dockerå®‰è£…çš„æ‰€æœ‰ä¾èµ–åˆ°/tmp/docker-19.03ç›®å½•yum install --downloadonly --downloaddir=/tmp/docker-19.03 docker-ce-19.03.8-3.el7 docker-ce-cli-19.03.8-3.el7#å¤åˆ¶ä¸‹è½½å¥½çš„/tmp/docker-19.03åˆ°ç›®æ ‡æœåŠ¡å™¨(æ¯”å¦‚192.168.0.13)scp -r /tmp/docker-19.03/ root@192.168.0.13:/tmp/#ç™»å½•è¿›ç›®æ ‡æœåŠ¡å™¨ä¹‹åŽè¿›å…¥æ–‡ä»¶å¤¹å®‰è£…ssh root@192.168.0.13cd /tmp/docker-19.03/yum install *.rpm#å¯åŠ¨å¹¶åŠ å…¥å¼€æœºå¯åŠ¨systemctl start dockersystemctl enable dockerÂ¶ï¼ˆ2ï¼‰å®Œå…¨ç¦»çº¿å®‰è£…å¦‚æžœå†…ç½‘ä¸­æ‰€æœ‰æœåŠ¡å™¨éƒ½ä¸èƒ½è®¿é—®å¤–ç½‘ï¼Œå¯ä½¿ç”¨ä¸€ä¸‹æ–¹å¼å®‰è£…ï¼šä¸‹è½½å®‰è£…åŒ…åœ¨å®¢æˆ·æœºä¸­è®¿é—®dockerå®˜ç½‘ä¸‹è½½å®‰è£…åŒ…ï¼šå®‰è£…åŒ…å„ç‰ˆæœ¬ä¸‹è½½åœ°å€ï¼šhttps://download.docker.com/linux/static/stable/x86_64/è¿™é‡Œä¸‹è½½çš„ç‰ˆæœ¬æ˜¯ï¼šhttps://download.docker.com/linux/static/stable/x86_64/docker-19.03.5.tgzå®‰è£…è¿è¡Œä¸‹è½½å¥½å®‰è£…åŒ…åŽé€šè¿‡ftpç­‰å®¢æˆ·ç«¯å·¥å…·ä¸Šä¼ å®‰è£…åŒ…åˆ°ç›®æ ‡æœåŠ¡å™¨ï¼Œç„¶åŽé€šè¿‡sshå®¢æˆ·ç«¯å·¥å…·ç™»å½•åˆ°è¯¥ç›®æ ‡æœåŠ¡å™¨æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ï¼š12345678910#è§£åŽ‹å®‰è£…åŽ‹ç¼©åŒ…tar xzvf docker-19.03.5.tgz#æ‹·è´å®‰è£…cp docker/* /usr/bin/#è¿è¡ŒæœåŠ¡dockerd &amp;#åœæ­¢æœåŠ¡å¯åŠ¨ps -ef|grep dockerdkill -9 1958 #è¿™é‡Œçš„1958æ”¹æˆpså‡ºæ¥çš„pidé…ç½®å¼€æœºå¯åŠ¨123456#å…³é—­selinuxç­–ç•¥vi /etc/selinux/configSELINUX=disabled#é‡å¯ç³»ç»Ÿrebooté…ç½®docker.socket1vi /etc/systemd/system/docker.socket1234567891011121314151617181920212223[Unit]Description=Docker Socket for the APIPartOf=docker.service[Socket]# If /var/run is not implemented as a symlink to /run, you may need to# specify ListenStream=/var/run/docker.sock instead.ListenStream=/run/docker.sockSocketMode=0660SocketUser=rootSocketGroup=docker[Install]WantedBy=sockets.targeté…ç½®docker.service1vi /etc/systemd/system/docker.service12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061[Unit]Description=Docker Application Container EngineDocumentation=https://docs.docker.comAfter=network-online.target firewalld.serviceWants=network-online.target[Service]Type=notify# the default is not to use systemd for cgroups because the delegate issues still# exists and systemd currently does not support the cgroup feature set required# for containers run by dockerExecStart=/usr/bin/dockerdExecReload=/bin/kill -s HUP $MAINPID# Having non-zero Limit*s causes performance problems due to accounting overhead# in the kernel. We recommend using cgroups to do container-local accounting.LimitNOFILE=infinityLimitNPROC=infinityLimitCORE=infinity# Uncomment TasksMax if your systemd version supports it.# Only systemd 226 and above support this version.#TasksMax=infinityTimeoutStartSec=0# set delegate yes so that systemd does not reset the cgroups of docker containersDelegate=yes# kill only the docker process, not all processes in the cgroupKillMode=process# restart the docker process if it exits prematurelyRestart=on-failureStartLimitBurst=3StartLimitInterval=60s[Install]WantedBy=multi-user.targetå¯åŠ¨æœåŠ¡123systemctl daemon-reloadsystemctl start dockersystemctl enable dockerÂ¶4ï¼‰å‚è€ƒhttps://docs.docker.com/engine/install/centosÂ¶2. ä¸€é”®è„šæœ¬å®‰è£… Docker12345678910111213#ä½¿ç”¨å®˜æ–¹æºå®‰è£…ï¼ˆå›½å†…ç›´æŽ¥è®¿é—®è¾ƒæ…¢ï¼‰curl -fsSL https://get.docker.com | bash#ä½¿ç”¨é˜¿é‡Œæºå®‰è£…#curl -fsSL https://get.docker.com | bash -s docker --mirror Aliyun#ä½¿ç”¨ä¸­å›½åŒºAzureæºå®‰è£…#curl -fsSL https://get.docker.com | bash -s docker --mirror AzureChinaCloud#æŒ‡å®šç‰¹å®šç‰ˆæœ¬å®‰è£…#curl -fsSL https://get.docker.com | bash -s docker --mirror Aliyun --version 18.06.3#è®¾ç½®å¼€æœºè‡ªå¯systemctl enable docker#å¯åŠ¨Dockersystemctl start dockerå‚è€ƒï¼šhttps://github.com/docker/docker-installhttps://www.vps69.com/posts/install-docker/Â¶3. é…ç½® Docker çš„é•œåƒæºé‰´äºŽå›½å†…ç½‘ç»œé—®é¢˜ï¼ŒDocker çš„é»˜è®¤é•œåƒæºæ‹‰å– Docker é•œåƒååˆ†ç¼“æ…¢ï¼Œæˆ‘ä»¬å¯ä»¥é…ç½®å›½å†…çš„é•œåƒæºæ¥åŠ é€Ÿé•œåƒä¸‹è½½ï¼ˆå¯ä»¥é…ç½®å¤šä¸ªé•œåƒæºï¼‰ã€‚Azure ä¸­å›½é•œåƒ https://dockerhub.azk8s.cné˜¿é‡Œäº‘åŠ é€Ÿå™¨(éœ€ç™»å½•è´¦å·èŽ·å–)ç½‘æ˜“äº‘åŠ é€Ÿå™¨ https://hub-mirror.c.163.comAliyun çš„é•œåƒï¼ˆéœ€è¦ç™»å½•åˆ°é˜¿é‡Œäº‘åŽå°èŽ·å–ï¼Œåœ°å€ï¼šhttps://cr.console.aliyun.com/cn-shenzhen/instances/mirrorsï¼‰æµ‹é€Ÿï¼šhttps://github.com/docker-practice/docker-registry-cn-mirror-test/actionsDocker çš„é•œåƒæºé…ç½®æ–‡ä»¶è·¯å¾„ï¼ˆå¦‚æžœæ–‡ä»¶ä¸å­˜åˆ™éœ€è¦æ‰‹åŠ¨åˆ›å»ºï¼‰ï¼šLinuxï¼š /etc/docker/daemon.jsonWindowsï¼š%programdata%\docker\config\daemon.json12345678910111213cat &gt; /etc/docker/daemon.json &lt;&lt; 'EOF'&#123; "registry-mirrors": [ "https://hub-mirror.c.163.com", "https://docker.mirrors.ustc.edu.cn" ]&#125;EOF#é‡å¯ docker æœåŠ¡systemctl restart docker#æŸ¥çœ‹ Docker é…ç½®æ˜¯å¦ä¿®æ”¹ç”Ÿæ•ˆï¼ˆå…¶ä¸­ â€œRegistry Mirrorsâ€ å³ä¸º Docker çš„é•œåƒæºï¼‰docker infoÂ¶4. é…ç½® Docker çš„é»˜è®¤å­˜å‚¨è·¯å¾„ï¼ˆå¯é€‰ï¼‰Docker ä¼šä½¿ç”¨ /var/lib/docker/ ç›®å½•ä½œä¸ºé»˜è®¤å­˜å‚¨ç›®å½•ï¼Œç”¨ä»¥å­˜æ”¾æ‹‰å–çš„é•œåƒå’Œåˆ›å»ºå®¹å™¨ç­‰çš„ç›¸å…³æ–‡ä»¶ã€‚ç”±äºŽè¯¥ç›®å½•é€šå¸¸éƒ½ä½äºŽç³»ç»Ÿç›˜ï¼Œå¦‚æžœç³»ç»Ÿç›˜æ¯”è¾ƒå°ï¼Œè€Œé•œåƒå’Œå®¹å™¨ä½¿ç”¨å¾—è¶Šå¤šå°±ä¼šå ç”¨è¶Šå¤šçš„ç³»ç»Ÿç›˜ç©ºé—´ï¼Œå½“ç³»ç»Ÿç›˜ä¸å¤Ÿæ—¶å°±ä¼šæ¯”è¾ƒå°´å°¬äº†ï¼Œæ•…è€Œå¯èƒ½éœ€è¦é€šè¿‡æ•°æ®ç›˜æ¥è½¬ç§»é•œåƒå’Œå®¹å™¨å†…å®¹ï¼Œè¿™å°±å¯èƒ½éœ€è¦ä¿®æ”¹ Docker çš„é»˜è®¤å­˜å‚¨ç›®å½•ã€‚å‡è®¾ /data1 ç›®å½•æŒ‚è½½ç‚¹çš„ç£ç›˜ç©ºé—´æ¯”è¾ƒå¤§ï¼Œéœ€è¦å°†å…¶è®¾ç½®ä¸º Docker çš„é»˜è®¤å­˜å‚¨è·¯å¾„ï¼Œå¯å¦‚ä¸‹æ“ä½œï¼š12345678910111213141516mkdir -p /data1/docker/libcat &gt; /etc/docker/daemon.json &lt;&lt; 'EOF'&#123; "registry-mirrors": [ "https://docker.mirrors.ustc.edu.cn", "https://hub-mirror.c.163.com" ], "data-root": "/data1/docker/lib"&#125;EOF#é‡å¯ Docker æœåŠ¡systemctl restart docker#æŸ¥çœ‹ Docker é…ç½®æ˜¯å¦ä¿®æ”¹ç”Ÿæ•ˆï¼ˆå…¶ä¸­ â€œDocker Root Dirâ€ å³ä¸º Docker çš„å­˜å‚¨è·¯å¾„ï¼‰docker infoÂ¶5. Docker æœåŠ¡ç®¡ç†12345678910111213141516#å¯åŠ¨dockeræœåŠ¡ï¼ˆæç¤ºï¼šdockerå³docker.serviceï¼Œå¯åŠ¨æœåŠ¡åŽä¼šè‡ªåŠ¨å¯åŠ¨dockerç½‘ç»œå¥—æŽ¥å­—å®ˆæŠ¤è¿›ç¨‹ï¼Œå³docker.socketï¼‰systemctl start docker#é‡å¯dockeræœåŠ¡systemctl restart docker#å…³é—­dockeræœåŠ¡ #å¦‚æžœè¯¥å‘½ä»¤æ— æ³•åœæ­¢æœåŠ¡ï¼ˆæŠ¥é”™æç¤ºï¼šWarning: Stopping docker.service, but it can still be activated by: docker.socketï¼Œè¿™ä¸ªé—®é¢˜é€šå¸¸æ˜¯ç”±äºŽå®¹å™¨ä½¿ç”¨äº† --restart always ç­‰é‡å¯ç­–ç•¥å¯¼è‡´æœåŠ¡æ— æ³•å…³é—­ï¼Œè§£å†³åŠžæ³•å°±æ˜¯è¿˜éœ€è¦å…³é—­ docker.socket ç½‘ç»œå¥—æŽ¥å­—å®ˆæŠ¤è¿›ç¨‹ï¼‰systemctl stop docker#å…³é—­dockerç½‘ç»œå¥—æŽ¥å­—å®ˆæŠ¤è¿›ç¨‹systemctl stop docker.socket#å¼€å¯å¼€æœºè‡ªå¯åŠ¨dockeræœåŠ¡systemctl enable docker#ç¦æ­¢å¼€æœºè‡ªå¯åŠ¨dockeræœåŠ¡systemctl disable dockerÂ¶6. å¸è½½ Docker1234567891011121314151617181920212223242526##å¸è½½å‡†å¤‡ï¼ˆå¯é€‰ï¼‰#åœæ­¢å¹¶åˆ é™¤æ‰€æœ‰æ­£åœ¨è¿è¡Œçš„ Docker å®¹å™¨docker stop $(sudo docker ps -a -q)docker rm $(sudo docker ps -a -q)#åˆ é™¤æ‰€æœ‰ Docker é•œåƒdocker rmi $(sudo docker images -q)#åœæ­¢ Docker æœåŠ¡systemctl stop docker.socketsystemctl stop docker.service##ï¼ˆ1ï¼‰yum å¸è½½ Docker#åˆ é™¤ Docker å®‰è£…åŒ…yum remove -y docker docker-ce docker-ce-cli containerd.ioyum autoremove -y#åˆ é™¤æ®‹ä½™æ–‡ä»¶rm -rf /var/lib/docker #å«é•œåƒã€å®¹å™¨ã€é…ç½®æ–‡ä»¶ç­‰å†…å®¹rm -rf /var/lib/containerdrm -rf /etc/docker#ï¼ˆ2ï¼‰apt å¸è½½ Docker#åˆ é™¤ Docker å®‰è£…åŒ…apt purge -y docker docker-ce docker-ce-cli containerd.io#åˆ é™¤æ®‹ä½™æ–‡ä»¶rm -rf /var/lib/docker #å«é•œåƒã€å®¹å™¨ã€é…ç½®æ–‡ä»¶ç­‰å†…å®¹rm -rf /var/lib/containerdrm -rf /etc/dockerÂ¶å››ã€é•œåƒç®¡ç†https://hub.docker.com/123456789101112131415161718192021#æ£€ç´¢ (åŽ»https://hub.docker.comä¸ŠæŸ¥çœ‹é•œåƒçš„è¯¦ç»†ä¿¡æ¯ã€‚egï¼šdocker search redis)docker search é•œåƒå…³é”®å­—#æ‹‰å– (nameæ˜¯é•œåƒåï¼Œ:tagæ˜¯å¯é€‰çš„ï¼Œtagè¡¨ç¤ºæ ‡ç­¾ï¼Œå¤šä¸ºè½¯ä»¶çš„ç‰ˆæœ¬ï¼Œé»˜è®¤æ˜¯latest)docker pull name[:tag]#åˆ—å‡º (æŸ¥çœ‹æ‰€æœ‰æœ¬åœ°é•œåƒ)docker images#åˆ é™¤ (åˆ é™¤æŒ‡å®šçš„æœ¬åœ°é•œåƒ,image-idæ˜¯é•œåƒid)docker rmi image-id#æŸ¥çœ‹å®¹å™¨/é•œåƒè¯¦ç»†ä¿¡æ¯docker inspect image-name-or-id#é•œåƒå¯¼å‡ºdocker save -o æ‰“åŒ…æ–‡ä»¶å.tar é•œåƒid#æˆ–è€…docker save é•œåƒid &gt; æ–‡ä»¶å.tar#é•œåƒå¯¼å…¥docker load -i æ‰“åŒ…æ–‡ä»¶å.tar#æˆ–è€…docker load &lt; æ‰“åŒ…æ–‡ä»¶å.taré•œåƒå¯¼å‡ºå¹¶å¯¼å…¥æ¡ˆä¾‹ï¼š123456#ä¾‹å¦‚ï¼Œä»¥ä¸‹å¯¼å‡ºæ–¹å¼å°†ä¼šè®©docker loadå¯¼å…¥æ—¶çš„é•œåƒæ²¡æœ‰åå­—(å³&lt;none&gt;)docker save -o redis.tar 7864316753#å› æ­¤ï¼ŒæŽ¨èä½¿ç”¨é•œåƒçš„åå­—è¿›è¡Œå¯¼å‡ºï¼Œæ­¤æ–¹å¼å¯¼å…¥æ—¶å°±æœ‰é•œåƒåç§°äº†docker save -o redis:5.0.2#å¦å¤–ï¼Œå¦‚æžœå·²ç»æ˜¯&lt;none&gt;çš„åç§°äº†ï¼Œä¹Ÿå¯ä»¥é€šè¿‡ä»¥ä¸‹å‘½ä»¤é‡å‘½åé•œåƒåç§°docker tag [é•œåƒid] [æ–°é•œåƒåç§°]:[æ–°é•œåƒæ ‡ç­¾]Â¶äº”ã€å®¹å™¨ç®¡ç†Â¶1. ç®¡ç†å‘½ä»¤1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980818283848586878889909192939495#è¿è¡Œå¹¶åˆ›å»ºä¸€ä¸ªå®¹å™¨ #-dï¼šè¡¨ç¤ºå®ˆæŠ¤æ€è¿è¡Œï¼Œå³åŽå°çŠ¶æ€è¿è¡Œ #--nameï¼šç»™å®¹å™¨è‡ªå®šä¹‰å‘½å #-pï¼šè¡¨ç¤ºç«¯å£æ˜ å°„ #æ ¼å¼ï¼š-p &lt;host&gt;:&lt;host_port&gt;:&lt;container_port&gt;/&lt;protocol&gt; #&lt;host&gt; æ˜¯æŒ‡å®¿ä¸»æœºçš„IPåœ°å€ï¼ˆå¯ä»¥ä½¿ç”¨ 0.0.0.0 è¡¨ç¤ºç›‘å¬æ‰€æœ‰ç½‘ç»œæŽ¥å£ï¼‰ #&lt;host_port&gt; æ˜¯æŒ‡å®¿ä¸»æœºä¸Šçš„ç«¯å£ï¼Œå¯æŒ‡å®šä¸ºå•ä¸ªç«¯å£æˆ–è€…ç«¯å£èŒƒå›´ï¼ˆå¦‚æžœä¸æŒ‡å®šå°†è‡ªåŠ¨æ˜ å°„åˆ°å®¿ä¸»æœºçš„ä¸€ä¸ªéšæœºç«¯å£ï¼‰ #&lt;container_port&gt; æ˜¯æŒ‡å®¹å™¨å†…éƒ¨çš„ç«¯å£ï¼Œå¯æŒ‡å®šä¸ºå•ä¸ªç«¯å£æˆ–è€…ç«¯å£èŒƒå›´ #&lt;protocol&gt; æ˜¯è¦ä½¿ç”¨çš„ä¼ è¾“åè®®ï¼Œå¯æŒ‡å®šä¸ºtcpæˆ–è€…udpï¼ˆä¸æŒ‡å®šé»˜è®¤ä¸ºtcpï¼‰ #ç¤ºä¾‹ï¼š-p 2222:22 -p 1194:1194/udp -p 127.0.0.1:8080:8080/tcp -p 9000-9100:9000:9100 #--volumeï¼ˆ-vï¼‰ï¼šæ•°æ®å·æˆ–ç›®å½•æŒ‚è½½ï¼Œå³æŒ‚è½½ç‰©ç†ä¸»æœºæ•°æ®å·æˆ–è€…ç›®å½•æˆ–æ–‡ä»¶åˆ°å®¹å™¨é‡Œ #--restartï¼šè®¾ç½®dockerå®ˆæŠ¤è¿›ç¨‹å¯¹å®¹å™¨çš„é‡å¯ç­–ç•¥ï¼Œå¯é€‰å€¼å¦‚ä¸‹ï¼š #noï¼ˆé»˜è®¤ï¼‰ï¼šå®¹å™¨é€€å‡ºåŽï¼ˆæ— è®ºæ˜¯å¦æ­£å¸¸é€€å‡ºï¼‰ï¼Œdockerå®ˆæŠ¤è¿›ç¨‹åœ¨é‡å¯æ—¶éƒ½ä¸ä¼šè‡ªåŠ¨å¯åŠ¨è¯¥å®¹å™¨ã€‚ #alwaysï¼šå®¹å™¨é€€å‡ºåŽï¼ˆæ— è®ºæ˜¯å¦æ­£å¸¸é€€å‡ºï¼‰ï¼Œdockerå®ˆæŠ¤è¿›ç¨‹åœ¨é‡å¯æ—¶éƒ½ä¼šè‡ªåŠ¨å¯åŠ¨è¯¥å®¹å™¨ã€‚ï¼ˆæç¤ºï¼šdocker stop å…³é—­å®¹å™¨åŽå¹¶ä¸ä¼šæ‰§è¡Œé‡å¯ç­–ç•¥ï¼Œä»…æ˜¯dockerå®ˆæŠ¤è¿›ç¨‹é‡å¯æ—¶ï¼Œé‡å¯ç­–ç•¥æ‰ä¼šå‘æŒ¥ä½œç”¨ï¼‰ #on-failure[:max-retries]ï¼šå®¹å™¨åœ¨éžæ­£å¸¸é€€å‡ºæ—¶ï¼ˆé€€å‡ºçŠ¶æ€ç ä¸ç­‰äºŽ0ï¼Œå¦‚ï¼šå¼ºåˆ¶å…³æœºå¯¼è‡´å®¹å™¨å¼‚å¸¸é€€å‡ºã€æ‰‹åŠ¨å…³é—­å®¹å™¨ä½†å®¹å™¨ä¸”å¼‚å¸¸é€€å‡ºã€å®¹å™¨å†…éƒ¨ç¨‹åºæ‰§è¡Œé”™è¯¯å¯¼è‡´å¼‚å¸¸é€€å‡ºç­‰ï¼‰ï¼Œdockerå®ˆæŠ¤è¿›ç¨‹åœ¨é‡å¯æ—¶ä¼šè‡ªåŠ¨å¯åŠ¨è¯¥å®¹å™¨ã€‚å‚æ•°ä½¿ç”¨å¦‚ï¼š--restart=on-failureï¼Œå¯é€‰åœ°æŒ‡å®š max-retries å‚æ•°æ¥é™åˆ¶æœ€å¤§é‡è¯•æ¬¡æ•°ã€‚ä¾‹å¦‚ï¼Œ--restart=on-failure:3 è¡¨ç¤ºå®¹å™¨æœ€å¤šä¼šé‡è¯• 3 æ¬¡ï¼Œå¦‚æžœåœ¨é‡è¯•æ¬¡æ•°è€—å°½ä¹‹åŽå®¹å™¨ä»ç„¶æ— æ³•æ­£å¸¸è¿è¡Œï¼Œå®ƒå°†åœæ­¢ã€‚ #unless-stoppedï¼šå®¹å™¨åœ¨éžæ­£å¸¸é€€å‡ºæ—¶ï¼Œé™¤éžæ‰‹åŠ¨å…³é—­ï¼Œdockerå®ˆæŠ¤è¿›ç¨‹å°†åœ¨é‡å¯æ—¶ä¼šè‡ªåŠ¨å¯åŠ¨è¯¥å®¹å™¨ã€‚ #è¡¥å……è¯´æ˜Žï¼šå¯¹äºŽå¼€æœºè‡ªå¯åŠ¨çš„æƒ…å†µï¼Œå¯é€‰ always æˆ– unless-stoppeddocker run -d --name å®¹å™¨åç§° -p ä¸»æœºç«¯å£:å®¹å™¨ç«¯å£ -v ä¸»æœºç›®å½•è·¯å¾„:å®¹å™¨ç›®å½•è·¯å¾„ é•œåƒåç§°#å…³é—­å®¹å™¨docker stop å®¹å™¨åç§°/å®¹å™¨id#å¯åŠ¨å·²ç»å…³æŽ‰çš„å®¹å™¨docker start å®¹å™¨åç§°/å®¹å™¨id#é‡å¯å®¹å™¨docker restart å®¹å™¨åç§°/å®¹å™¨id#åˆ é™¤æŒ‡å®šå®¹å™¨docker rm å®¹å™¨åç§°/å®¹å™¨id#å¼ºåˆ¶åˆ é™¤å½“å‰æ‰€æœ‰å®¹å™¨docker rm -f $(docker ps -a -q)#æ˜¾ç¤ºå®¹å™¨åˆ—è¡¨ï¼ˆé»˜è®¤åªæ˜¾ç¤ºè¿è¡Œä¸­çš„å®¹å™¨ï¼‰docker psdocker ps -s #-sï¼šæ˜¾ç¤ºå®¹å™¨å ç”¨ç£ç›˜ç©ºé—´å¤§å°#æ˜¾ç¤ºå®¹å™¨åˆ—è¡¨ï¼ˆæ‰€æœ‰ï¼ŒåŒ…æ‹¬è¿è¡Œä¸­å’Œå·²åœæ­¢çš„å®¹å™¨ï¼‰docker ps -a#æŸ¥çœ‹ Docker å®¹å™¨é‡Œçš„çŽ¯å¢ƒå˜é‡docker exec -it &lt;container_name_or_id&gt; env#æŸ¥çœ‹ Docker å®¹å™¨é‡Œçš„æŒ‡å®šçŽ¯å¢ƒå˜é‡docker exec -it &lt;container_name_or_id&gt; sh -c 'echo $ENV_VARIABLE_NAME'#æ‰§è¡Œå®¹å™¨å†…å‘½ä»¤docker exec -it å®¹å™¨åç§°æˆ–å®¹å™¨id å‘½ä»¤#å¦‚ï¼šdocker exec -it nginx ip iddr#è¿›å…¥å®¹å™¨å†…éƒ¨docker exec -it å®¹å™¨åç§°æˆ–å®¹å™¨id bash#ä»Žå®¹å™¨å†…éƒ¨é€€å‡ºexit#ä»Žä¸»æœºæ‹·è´æ–‡ä»¶åˆ°å®¹å™¨docker cp ä¸»æœºæ–‡ä»¶æˆ–ç›®å½• å®¹å™¨åç§°æˆ–å®¹å™¨id:å®¹å™¨æ–‡ä»¶æˆ–ç›®å½•#ä»Žå®¹å™¨æ‹·è´æ–‡ä»¶åˆ°ä¸»æœºdocker cp å®¹å™¨åç§°æˆ–å®¹å™¨id:å®¹å™¨æ–‡ä»¶æˆ–ç›®å½• ä¸»æœºæ–‡ä»¶æˆ–ç›®å½•#æŸ¥çœ‹å®¹å™¨/é•œåƒè¯¦ç»†ä¿¡æ¯docker inspect å®¹å™¨åç§°/å®¹å™¨id#æŸ¥çœ‹å®¹å™¨è¿è¡Œæ—¥å¿—docker logs å®¹å™¨åç§°/å®¹å™¨id#æŸ¥çœ‹å®¹å™¨èµ„æºçš„ä½¿ç”¨æƒ…å†µï¼ŒåŒ…æ‹¬ï¼šCPUã€å†…å­˜ã€ç½‘ç»œI/Oã€ç£ç›˜I/O ç­‰èµ„æºå ç”¨æƒ…å†µdocker stats##é€šè¿‡runlikeåŽ»æŸ¥çœ‹ä¸€ä¸ªå®¹å™¨çš„docker runå¯åŠ¨å‚æ•°# å®‰è£…runlikeå®‰è£…åŒ…pip install runlike# å¯èƒ½éœ€è¦é€€å‡ºç»ˆç«¯ä¼šè¯é‡æ–°è¿žæŽ¥æ‰èƒ½ç”Ÿæ•ˆexit# æŸ¥çœ‹å®¹å™¨è¿è¡Œå‘½ä»¤runlike -p &lt;container_name&gt; # åŽé¢å¯ä»¥æ˜¯å®¹å™¨åå’Œå®¹å™¨idï¼Œ-på‚æ•°æ˜¯æ˜¾ç¤ºè‡ªåŠ¨æ¢è¡Œ#å®¹å™¨å¯¼å‡ºå’Œå¯¼å…¥#å°†å®¹å™¨å¯¼å‡ºä¸ºé•œåƒåŒ…docker export -o é•œåƒåŒ…åç§°.tar å®¹å™¨åç§°æˆ–å®¹å™¨id#å°†é•œåƒåŒ…å¯¼å…¥ä¸ºé•œåƒdocker import é•œåƒåŒ…åç§°.tar æ–°é•œåƒåç§°:æ–°é•œåƒæ ‡ç­¾#ä¿®æ”¹å®¹å™¨é…ç½® #æ³¨æ„åªèƒ½ä¿®æ”¹ä¸€äº›é…ç½®é¡¹ï¼Œå¹¶éžæ‰€æœ‰é…ç½®éƒ½èƒ½ä¿®æ”¹ï¼Œå¦‚æ•°æ®å·ã€ç›®å½•æŒ‚è½½ç­‰å°±ä¿®æ”¹ä¸äº† #å¸¸è§å‚æ•°å¦‚ä¸‹ï¼š # --cpu-shares=&lt;æƒé‡&gt;: è®¾ç½®å®¹å™¨çš„ CPU æƒé‡ï¼Œå½±å“ CPU æ—¶é—´ç‰‡çš„åˆ†é…ã€‚ï¼ˆé»˜è®¤å€¼ä¸º 1024ï¼Œæ•°å€¼è¶Šé«˜è¡¨ç¤ºå®¹å™¨èŽ·å¾—çš„ CPU æ—¶é—´ç‰‡è¶Šå¤šï¼‰ # --cpu-period=&lt;å‘¨æœŸ&gt;: è®¾ç½® CPU å‘¨æœŸï¼Œç”¨äºŽæŽ§åˆ¶ CPU æ—¶é—´ç‰‡çš„å‘¨æœŸã€‚ # --cpu-quota=&lt;é…é¢&gt;: è®¾ç½® CPU é…é¢ï¼Œé™åˆ¶ CPU çš„ä½¿ç”¨ã€‚ # --blkio-weight=&lt;æƒé‡&gt;: è®¾ç½®å— I/O æƒé‡ï¼Œç”¨äºŽé™åˆ¶å®¹å™¨çš„ç£ç›˜ I/Oã€‚ # --memory=&lt;å†…å­˜é™åˆ¶&gt;: --memoryå¯ç¼©å†™-mï¼Œè®¾ç½®å®¹å™¨çš„å†…å­˜é™åˆ¶ã€‚ # --memory-swap=&lt;å†…å­˜+äº¤æ¢é™åˆ¶&gt;: è®¾ç½®å†…å­˜åŠ äº¤æ¢é™åˆ¶ï¼ŒæŽ§åˆ¶å†…å­˜å’Œäº¤æ¢ç©ºé—´çš„ä½¿ç”¨ã€‚ # --kernel-memory=&lt;å†…æ ¸å†…å­˜é™åˆ¶&gt;: è®¾ç½®å®¹å™¨å¯ä»¥ä½¿ç”¨çš„å†…æ ¸å†…å­˜é™åˆ¶ã€‚ # --restart=&lt;ç­–ç•¥&gt;: é…ç½®å®¹å™¨çš„é‡å¯ç­–ç•¥ã€‚å¯é€‰ç­–ç•¥åŒ…æ‹¬ noã€on-failureã€alwaysã€unless-stopped ç­‰ã€‚docker update [OPTIONS] &lt;å®¹å™¨åç§°æˆ–ID&gt; #docker update --restart always &lt;å®¹å™¨åç§°æˆ–ID&gt; #docker update --restart=no &lt;å®¹å™¨åç§°æˆ–ID&gt; #docker update --cpu-shares 512 &lt;å®¹å™¨åç§°æˆ–ID&gt; #docker update -m 512M &lt;å®¹å™¨åç§°æˆ–ID&gt;å®¹å™¨å¯¼å‡ºå’Œå¯¼å…¥æ¡ˆä¾‹ï¼š12345678910#åˆ›å»ºå®¹å™¨docker run -itd --name centos7-test centos:centos7#å°è¯•ä¿®æ”¹å®¹å™¨docker exec -it centos7-test touch /tmp/test#å°†å®¹å™¨å¯¼å‡ºä¸ºé•œåƒåŒ…docker export -o centos7-test.tar centos7-test#å°†é•œåƒåŒ…å¯¼å…¥ä¸ºé•œåƒdocker import centos7-test.tar centos7:centos7-test#é€šè¿‡æ–°é•œåƒåˆ›å»ºå®¹å™¨docker run -itd --name centos7-test2 centos7:centos7-testÂ¶2. è®¾ç½®å®¹å™¨ä¸Žå®¿ä¸»æœºæ—¶é—´åŒæ­¥12345##ä¸ºäº†ä¿è¯å®¹å™¨å’Œå®¿ä¸»æœºä¹‹é—´çš„æ—¶é—´åŒæ­¥#1ã€ä½¿ç”¨docker runè¿è¡Œå®¹å™¨æ—¶ï¼Œæ·»åŠ å¦‚ä¸‹å‚æ•°-v /etc/localtime:/etc/localtime:ro å¦‚ä¸‹ï¼šdocker run -it -v /etc/localtime:/etc/localtime:ro centos#2ã€å¦‚æžœå®¹å™¨å·²ç»è¿è¡Œåˆ™å¯ä»¥å¦‚ä¸‹æ“ä½œï¼šdocker cp -L /usr/share/zoneinfo/Asia/Shanghai [å®¹å™¨å]:/etc/localtimeÂ¶å…­ã€æ•°æ®ç®¡ç†ç”±äºŽdockerå®¹å™¨å’Œå®¿ä¸»æœºç³»ç»Ÿæ˜¯éš”ç¦»çš„ï¼Œè¿™ä¼šå¸¦æ¥ä¸‹é¢å‡ ä¸ªé—®é¢˜ï¼šä¸èƒ½åœ¨å®¿ä¸»æœºä¸Šå¾ˆæ–¹ä¾¿åœ°è®¿é—®å®¹å™¨ä¸­çš„æ–‡ä»¶æ— æ³•åœ¨å¤šä¸ªå®¹å™¨ä¹‹é—´å…±äº«æ•°æ®å½“å®¹å™¨åˆ é™¤æ—¶ï¼Œå®¹å™¨ä¸­äº§ç”Ÿçš„æ•°æ®å°†ä¸¢å¤±ä¸ºäº†èƒ½å¤Ÿä¿å­˜ï¼ˆæŒä¹…åŒ–ï¼‰æ•°æ®ä»¥åŠå…±äº«å®¹å™¨é—´çš„æ•°æ®ï¼Œdocker å¼•å…¥äº†æ•°æ®å·(volume) æœºåˆ¶ã€‚æ•°æ®å·æ˜¯å­˜åœ¨äºŽä¸€ä¸ªæˆ–å¤šä¸ªå®¹å™¨ä¸­çš„ç‰¹å®šæ–‡ä»¶æˆ–æ–‡ä»¶å¤¹ï¼Œå®ƒå¯ä»¥ç»•è¿‡é»˜è®¤çš„è”åˆæ–‡ä»¶ç³»ç»Ÿï¼Œä»¥æ­£å¸¸çš„æ–‡ä»¶æˆ–è€…ç›®å½•çš„å½¢å¼å­˜åœ¨äºŽå®¿ä¸»æœºä¸Šã€‚ç”Ÿå­˜å‘¨æœŸç‹¬ç«‹äºŽå®¹å™¨çš„ç”Ÿå­˜å‘¨æœŸçš„ï¼Œæ‰€ä»¥åˆ é™¤å®¹å™¨åŽæ•°æ®å·å¹¶ä¸ä¼šä¸¢å¤±ã€‚å®¹å™¨ä¸­ä¸»è¦æœ‰ä¸¤ç§ç®¡ç†æ•°æ®æ–¹å¼ï¼šæ•°æ®å·(Data Volumes)ï¼Œæ•°æ®å·å®¹å™¨(Data Volume Containers)ã€‚Â¶1. æ•°æ®å·æ•°æ®å·æ˜¯ä¸€ä¸ªå¯ä¾›å®¹å™¨ä½¿ç”¨çš„ç‰¹æ®Šç›®å½•ï¼Œå®ƒç»•è¿‡æ–‡ä»¶ç³»ç»Ÿï¼Œå¯ä»¥æä¾›å¾ˆå¤šæœ‰ç”¨çš„ç‰¹æ€§ï¼šï¼ˆ1ï¼‰æ•°æ®å· å¯ä»¥åœ¨å®¹å™¨ä¹‹é—´å…±äº«å’Œé‡ç”¨ï¼ˆ2ï¼‰å¯¹ æ•°æ®å· çš„ä¿®æ”¹ä¼šç«‹é©¬ç”Ÿæ•ˆï¼ˆ3ï¼‰å¯¹ æ•°æ®å· çš„æ›´æ–°ï¼Œä¸ä¼šå½±å“é•œåƒï¼ˆ4ï¼‰æ•°æ®å· é»˜è®¤ä¼šä¸€ç›´å­˜åœ¨ï¼Œå³ä½¿å®¹å™¨è¢«åˆ é™¤æ•°æ®å·çš„ä½¿ç”¨ç±»ä¼¼ linux ä¸‹å¯¹ç›®å½•æˆ–æ–‡ä»¶è¿›è¡Œ mount æ“ä½œï¼Œç›®å‰Dockeræä¾›äº†ä¸‰ç§ä¸åŒçš„æ–¹å¼å°†æ•°æ®å·ä»Žå®¿ä¸»æœºæŒ‚è½½åˆ°å®¹å™¨ä¸­ï¼šæ•°æ®å·æŒ‚è½½ï¼švolume mountç»‘å®šæŒ‚è½½ï¼šbind mounttmpfs mountå…¶ä¸­volumeã€bind mountæ¯”è¾ƒå¸¸ç”¨ï¼Œtmpfs mountåŸºæœ¬ä¸ä¼šç”¨.Â¶1.1 æ•°æ®å·æŒ‚è½½æ•°æ®å·æŒ‚è½½å³å°†ç‰¹å®šæ•°æ®å·æŒ‚è½½åˆ°å®¹å™¨å†…éƒ¨ï¼Œæ•°æ®å·æŒ‚è½½éœ€è¦æå‰åˆ›å»ºvolumeæ•°æ®å·ï¼Œç„¶åŽå†æä¾›ç»™å®¹å™¨ç»‘å®šï¼Œæ–°å»ºçš„æ•°æ®å·ä½äºŽå®¿ä¸»æœºçš„/var/lib/docker/volumesç›®å½•é‡Œã€‚è¿™ç§æŒ‚è½½æ–¹å¼å°±æ˜¯ä¸éœ€è¦æ‰‹åŠ¨æŒ‡å®šå®¿ä¸»æœºç›®å½•å¹¶ä¸”èƒ½å¤Ÿé€šè¿‡docker volumeå‘½ä»¤æ¥ç»´æŠ¤æ•°æ®å·ã€‚12345678910111213141516171819202122232425#åˆ›å»ºæ•°æ®å·docker volume create æ•°æ®å·å#æ˜¾ç¤ºæ•°æ®å·çš„è¯¦ç»†ä¿¡æ¯docker volume inspect æ•°æ®å·å#åˆ—å‡ºæ‰€æœ‰çš„æ•°æ®å·docker volume ls#åˆ é™¤æœªä½¿ç”¨çš„æ•°æ®å·ï¼ˆæ­£è¢«å®¹å™¨ä½¿ç”¨çš„æ•°æ®å·æ— æ³•åˆ é™¤ï¼‰ã€‚å¦‚æžœéœ€è¦åœ¨åˆ é™¤å®¹å™¨çš„åŒæ—¶ç§»é™¤æ•°æ®å·ã€‚å¯ä»¥åœ¨åˆ é™¤å®¹å™¨çš„æ—¶å€™ä½¿ç”¨ docker rm -v è¿™ä¸ªå‘½ä»¤docker volume rm æ•°æ®å·å#åˆ é™¤æ‰€æœ‰æœªä½¿ç”¨çš„æ•°æ®å·docker volume prune#è¿è¡Œå®¹å™¨å¹¶æŒ‚è½½æ•°æ®å·#typeï¼šæŒ‚è½½ç±»åž‹ï¼ŒåŒ…æ‹¬volumeï¼ˆé»˜è®¤ï¼‰å’Œbindã€‚sourceï¼šæ•°æ®å·åç§°ï¼ˆæ•°æ®å·ä¸å­˜åœ¨åˆ™è‡ªåŠ¨åˆ›å»ºï¼Œå¦‚æžœä¸æŒ‡å®šæ•°æ®å·åˆ™è‡ªåŠ¨åˆ›å»ºéšæœºæ•°åç§°çš„æ•°æ®å·ï¼‰#å¯ä»¥å°†å¤šä¸ªæ•°æ®å·æŒ‚è½½ç»™ä¸€ä¸ªå®¹å™¨ï¼›å¯ä»¥å°†ä¸€ä¸ªæ•°æ®å·æŒ‚è½½ç»™å¤šä¸ªå®¹å™¨ï¼Œä½†æ˜¯éƒ½å…±åŒä½¿ç”¨åŒä¸€ä¸ªå®¿ä¸»æœºçš„æ•°æ®å·ç›®å½•docker run -d --name å®¹å™¨åç§° --mount type=volume,source=æ•°æ®å·å,target=å®¹å™¨å†…éƒ¨ç›®å½•æˆ–æ–‡ä»¶ç»å¯¹è·¯å¾„ é•œåƒåç§°æˆ–id#å¯ä»¥ä½¿ç”¨-v(--volume)æ¥ç®€å†™ï¼Œæ•°æ®å·ä¸å­˜åœ¨åˆ™è‡ªåŠ¨åˆ›å»ºï¼Œå¦‚æžœä¸æŒ‡å®šæ•°æ®å·ï¼ˆå¦‚-v å®¹å™¨å†…éƒ¨ç›®å½•æˆ–æ–‡ä»¶ç»å¯¹è·¯å¾„ï¼‰åˆ™è‡ªåŠ¨åˆ›å»ºéšæœºæ•°åç§°çš„æ•°æ®å·docker run -d --name å®¹å™¨åç§° -v æ•°æ®å·å:å®¹å™¨å†…éƒ¨ç›®å½•æˆ–æ–‡ä»¶ç»å¯¹è·¯å¾„ é•œåƒåç§°æˆ–id##æ•°æ®å·æƒé™#DockeræŒ‚è½½æ•°æ®å·çš„é»˜è®¤æƒé™æ˜¯å¯è¯»å†™rwï¼Œå¯ä»¥é€šè¿‡roæ ‡è®°æŒ‡å®šä¸ºåªè¯»ï¼Œè¿™æ ·å¯ä»¥é˜²æ­¢å®¹å™¨ä¿®æ”¹æ–‡ä»¶#ä½¿ç”¨--mountæ—¶è®¾ç½®æ•°æ®å·æƒé™ã€‚ä¸æŒ‡å®šreadonlyåˆ™ä¸ºè¯»å†™docker run -d --name å®¹å™¨åç§° --mount type=volume,source=æ•°æ®å·å,target=å®¹å™¨å†…éƒ¨ç›®å½•æˆ–æ–‡ä»¶ç»å¯¹è·¯å¾„,readonly é•œåƒåç§°æˆ–id#ä½¿ç”¨-v(--volume)æ—¶è®¾ç½®æ•°æ®å·æƒé™docker run -d --name å®¹å™¨åç§° -v æ•°æ®å·å:å®¹å™¨å†…éƒ¨ç›®å½•æˆ–æ–‡ä»¶ç»å¯¹è·¯å¾„:rw é•œåƒåç§°æˆ–iddocker run -d --name å®¹å™¨åç§° -v æ•°æ®å·å:å®¹å™¨å†…éƒ¨ç›®å½•æˆ–æ–‡ä»¶ç»å¯¹è·¯å¾„:ro é•œåƒåç§°æˆ–idç¤ºä¾‹ï¼š1234567891011121314151617docker volume create my-voldocker volume inspect my-vol [ &#123; "CreatedAt": "2022-08-26T11:11:08+08:00", "Driver": "local", #localè¡¨ç¤ºå®¿ä¸»æœºã€‚é…ç½®ä¸ºvieux/sshfsï¼ˆéœ€è¦å®‰è£…æ’ä»¶ï¼‰å¯ä»¥æŠŠæ•°æ®å·å­˜å‚¨åˆ°å…¶ä»–äº‘ä¸»æœºåŽ»ï¼Œè¿™é‡Œä¸åšè¿‡å¤šä»‹ç»ã€‚ "Labels": &#123;&#125;, "Mountpoint": "/var/lib/docker/volumes/my-vol/_data", #æ•°æ®å·æ‰€åœ¨å®¿ä¸»æœºä½ç½® "Name": "my-vol", "Options": &#123;&#125;, "Scope": "local" &#125;]docker run -d --name nginx --mount type=volume,source=my-vol,target=/usr/share/nginx/html nginx:1.22.0-alpine#å¯ä»¥ä½¿ç”¨-v(--volume)æ¥ç®€å†™ï¼Œå¦‚ä¸‹ï¼š#docker run -d --name nginx -v my-vol:/usr/share/nginx/html nginx:1.22.0-alpineÂ¶1.2 ç»‘å®šæŒ‚è½½ç»‘å®šæŒ‚è½½å³ç›´æŽ¥å°†ä¸»æœºæ–‡ä»¶ç³»ç»Ÿä¸­çš„ç›®å½•æˆ–æ–‡ä»¶æŒ‚è½½åˆ°å®¹å™¨å†…éƒ¨çš„æ–¹å¼ï¼Œæ²¡æœ‰æ¶‰åŠåˆ°æ•°æ®å·ç®¡ç†ã€‚å½“ä½ ä½¿ç”¨ç»‘å®šæŒ‚è½½æ—¶ï¼Œä¸»æœºä¸Šçš„ç›®å½•æˆ–æ–‡ä»¶ä¼šç›´æŽ¥æ˜ å°„åˆ°å®¹å™¨å†…éƒ¨çš„è·¯å¾„ï¼Œå®ƒä»¬ä¹‹é—´çš„æ›´æ”¹ä¼šå®žæ—¶åŒæ­¥ã€‚æ³¨æ„è¿™ç§æ–¹å¼ä¸èƒ½ä½¿ç”¨ docker volume å‘½ä»¤æ¥ç»´æŠ¤æŒ‚è½½ç›®å½•æˆ–æ–‡ä»¶ã€‚12345678910111213#ä½¿ç”¨sourceè¡¨ç¤ºè‡ªå®šä¹‰æ•°æ®å·è·¯å¾„ï¼Œsourceå¿…é¡»æ˜¯ç»å¯¹è·¯å¾„ï¼Œä¸”è·¯å¾„å¿…é¡»å·²ç»å­˜åœ¨ï¼Œå¦åˆ™æŠ¥é”™docker run -d --name å®¹å™¨åç§° --mount type=bind,source=å®¿ä¸»æœºç›®å½•æˆ–æ–‡ä»¶ç»å¯¹è·¯å¾„,target=å®¹å™¨å†…éƒ¨ç›®å½•æˆ–æ–‡ä»¶ç»å¯¹è·¯å¾„ é•œåƒåç§°æˆ–id#å¯ä»¥ä½¿ç”¨-v(--volume)æ¥ç®€å†™ï¼Œå¦‚ä¸‹ï¼š#--mountå’Œ-v(--volume)æœ‰ä¸ªåŒºåˆ«ï¼Œå°±æ˜¯ä½¿ç”¨-vå®¿ä¸»æœºç›®å½•æˆ–æ–‡ä»¶ä¸å­˜åœ¨ä¹Ÿèƒ½è‡ªåŠ¨åˆ›å»ºï¼Œè€Œä½¿ç”¨--mountä¸å­˜åœ¨åˆ™ä¼šè¿è¡Œå¤±è´¥docker run -d --name å®¹å™¨åç§° -v å®¿ä¸»æœºç›®å½•æˆ–æ–‡ä»¶ç»å¯¹è·¯å¾„:å®¹å™¨å†…éƒ¨ç›®å½•æˆ–æ–‡ä»¶ç»å¯¹è·¯å¾„ é•œåƒåç§°æˆ–id##æŒ‚è½½ç›®å½•æˆ–æ–‡ä»¶çš„æƒé™#DockeræŒ‚è½½ç›®å½•æˆ–æ–‡ä»¶çš„é»˜è®¤æƒé™æ˜¯rwï¼ˆå³å¯è¯»å†™ï¼‰ï¼Œå¯ä»¥é€šè¿‡roæ ‡è®°æŒ‡å®šä¸ºåªè¯»ï¼Œè¿™æ ·å¯ä»¥é˜²æ­¢å®¹å™¨ä¿®æ”¹å®¿ä¸»æœºçš„ç›®å½•æˆ–æ–‡ä»¶#å¯ä½¿ç”¨--mountæ—¶è®¾ç½®æŒ‚è½½ç›®å½•çš„æƒé™ï¼Œå¦‚åªè¯»ï¼ˆreadonlyï¼‰ã€‚docker run -d --name å®¹å™¨åç§° --mount type=bind,source=å®¿ä¸»æœºç›®å½•æˆ–æ–‡ä»¶ç»å¯¹è·¯å¾„,target=å®¹å™¨å†…éƒ¨ç›®å½•æˆ–æ–‡ä»¶ç»å¯¹è·¯å¾„,readonly é•œåƒåç§°æˆ–id#ä½¿ç”¨-v(--volume)æ—¶è®¾ç½®æ•°æ®å·æƒé™docker run -d --name å®¹å™¨åç§° -v å®¿ä¸»æœºç›®å½•æˆ–æ–‡ä»¶ç»å¯¹è·¯å¾„:å®¹å™¨å†…éƒ¨ç›®å½•æˆ–æ–‡ä»¶ç»å¯¹è·¯å¾„:rw é•œåƒåç§°æˆ–iddocker run -d --name å®¹å™¨åç§° -v å®¿ä¸»æœºç›®å½•æˆ–æ–‡ä»¶ç»å¯¹è·¯å¾„:å®¹å™¨å†…éƒ¨ç›®å½•æˆ–æ–‡ä»¶ç»å¯¹è·¯å¾„:ro é•œåƒåç§°æˆ–idç¤ºä¾‹ï¼š123mkdir -p /opt/nginxdocker run -d --name nginx --mount type=bind,source=/opt/nginx,target=/usr/share/nginx/html nginx:1.22.0-alpine#docker run -d --name nginx -v /opt/nginx:/usr/share/nginx/html nginx:1.22.0-alpineÂ¶2. æ•°æ®å·å®¹å™¨æ•°æ®å·ä¸ä»…å¯ä»¥è®¾ç½®åœ¨å®¿ä¸»æœºï¼ŒåŒæ ·ä¹Ÿå¯ä»¥è®¾ç½®åœ¨å…¶ä»–å®¹å™¨ä¸­ã€‚è¿™æ ·å³ä½¿å®¹å™¨æŒ‚æŽ‰æˆ–è€…è¢«åˆ é™¤ï¼Œä¹Ÿä¸ä¼šå½±å“æ•°æ®å·å®¹å™¨é‡Œå·²ç»åŒæ­¥çš„æ•°æ®ï¼ŒåŒæ ·çš„æ•°æ®å·å®¹å™¨æŒ‚æŽ‰æˆ–è€…è¢«åˆ é™¤ä¹Ÿä¸ä¼šå½±å“å®¹å™¨çš„æ•°æ®ã€‚1234#åˆ›å»ºæ•°æ®å·å®¹å™¨docker run -d -v æ•°æ®å·åç§°æˆ–è€…å®¿ä¸»æœºç›®å½•æˆ–æ–‡ä»¶:å®¹å™¨ç›®å½•æˆ–æ–‡ä»¶ --name=æ•°æ®å·å®¹å™¨åç§° é•œåƒåç§°[:ç‰ˆæœ¬å·]æˆ–ID#æŒ‚è½½æ•°æ®å·å®¹å™¨ç»™å…¶ä»–å®¹å™¨docker run -d --name=å®¹å™¨åç§° --volumes-from æ•°æ®å·å®¹å™¨åç§°æˆ–ID é•œåƒåç§°[:ç‰ˆæœ¬å·]æˆ–IDç¤ºä¾‹ï¼š12345docker run -d --name nginx-backup -v /opt/data:/opt/data nginx:1.22.0-alpinedocker run -d --name nginx --volumes-from nginx-backup nginx:1.22.0-alpinedocker exec -it nginx touch /opt/data/test.txtdocker rm -f nginxdocker exec -it nginx-backup ls /opt/dataÂ¶ä¸ƒã€Docker ç½‘ç»œDockeré»˜è®¤æä¾›äº†3ç§ç½‘ç»œæ¨¡å¼ï¼Œç”Ÿæˆå®¹å™¨æ—¶ä¸æŒ‡å®šç½‘ç»œæ¨¡å¼ä¸‹é»˜è®¤ä½¿ç”¨bridgeæ¡¥æŽ¥æ¨¡å¼ã€‚Â¶1. host æ¨¡å¼å®¹å™¨ä¸ä¼šåˆ›å»ºè‡ªå·±çš„ç½‘å¡ï¼Œé…ç½® IP ç­‰ï¼Œè€Œæ˜¯ä½¿ç”¨å®¿ä¸»æœºçš„ IP å’Œç«¯å£1docker run -d --name å®¹å™¨åç§° --net=host é•œåƒåç§°Â¶2. container æ¨¡å¼å®¹å™¨ä¸ä¼šåˆ›å»ºè‡ªå·±çš„ç½‘å¡ï¼Œé…ç½® IP ç­‰ï¼Œè€Œæ˜¯å’Œä¸€ä¸ªæŒ‡å®šçš„å®¹å™¨å…±äº« IPå’Œç«¯å£1docker run -d --name å®¹å™¨åç§° --net=container:å®¹å™¨åç§°æˆ–å®¹å™¨id é•œåƒåç§°Â¶3. none æ¨¡å¼å…³é—­ç½‘ç»œåŠŸèƒ½ï¼Œä¸è¿›è¡Œä»»ä½•ç½‘ç»œè®¾ç½®1docker run -d --name å®¹å™¨åç§° --net=none é•œåƒåç§°Â¶4. bridge æ¨¡å¼ï¼ˆé»˜è®¤æ¨¡å¼ï¼‰ä¸ºæ¯ä¸€ä¸ªå®¹å™¨åˆ†é…ã€è®¾ç½® IP ç­‰ï¼Œå¹¶å°†å®¹å™¨è¿žæŽ¥åˆ° docker0 è™šæ‹Ÿç½‘æ¡¥ä¸Šï¼Œè¿™æ˜¯ docker run åˆ›å»ºå®¹å™¨æ—¶ä½¿ç”¨çš„é»˜è®¤æ¨¡å¼ã€‚å½“Dockerè¿›ç¨‹å¯åŠ¨æ—¶ï¼Œä¼šåœ¨ä¸»æœºä¸Šåˆ›å»ºä¸€ä¸ªåä¸ºdocker0çš„è™šæ‹Ÿç½‘æ¡¥ï¼ˆç½‘å¡/è·¯ç”±å™¨ï¼‰ï¼Œæ­¤ä¸»æœºä¸Šå¯åŠ¨çš„Dockerå®¹å™¨éƒ½ä¼šè¿žæŽ¥åˆ°è¿™ä¸ªè™šæ‹Ÿç½‘æ¡¥ä¸Šã€‚è™šæ‹Ÿç½‘æ¡¥çš„å·¥ä½œæ–¹å¼å’Œç‰©ç†äº¤æ¢æœºç±»ä¼¼ï¼Œè¿™æ ·ä¸»æœºä¸Šçš„æ‰€æœ‰å®¹å™¨å°±é€šè¿‡äº¤æ¢æœºè¿žåœ¨äº†ä¸€ä¸ªäºŒå±‚ç½‘ç»œä¸­ã€‚å®¿ä¸»æœºå’ŒDockerå®¹å™¨ä¹‹é—´æ˜¯å¯ä»¥è¿›è¡Œç½‘ç»œè¿žæŽ¥çš„ï¼ŒåŒæ ·çš„ï¼ŒDockerå®¹å™¨å’Œå®¹å™¨ä¹‹é—´åªè¦æ˜¯åœ¨ä¸€ä¸ªè™šæ‹Ÿç½‘æ¡¥ä¸‹ï¼Œé‚£ä¹ˆä¹Ÿå¯ä»¥ç›´æŽ¥è¿›è¡Œç½‘ç»œè¿žæŽ¥ã€‚12#é€šè¿‡--net=bridgeæ˜¾ç¤ºæŒ‡å®šï¼Œé»˜è®¤å°±æ˜¯bridgeï¼Œä¹Ÿå¯ä»¥ä¸è®¾ç½®docker run -d --name å®¹å™¨åç§° --net=bridge é•œåƒåç§°Â¶5. è‡ªå®šä¹‰ç½‘ç»œ12345678910111213141516171819202122232425##è‡ªå®šä¹‰åˆ›å»ºåç§°ä¸ºmynetçš„ç½‘ç»œ#--driver bridge æ¡¥æŽ¥æ¨¡å¼#--subnet 192.168.0.0/16 å­ç½‘æŽ©ç ï¼ˆç½‘æ®µï¼‰çš„ä¸»æœºIPå¯é€‰èŒƒå›´ä¸ºï¼š192.168.0.1-192.168.255.254#--gateway 192.168.0.1 ç½‘å…³#å…¶ä¸­192.168.0.1è¢«è®¾ç½®ä¸ºç½‘å…³ï¼ˆå³å®¿ä¸»æœºçš„è™šæ‹Ÿç½‘å¡IPï¼‰ï¼Œæ•…å®¹å™¨ä¸»æœºIPçš„å¯é€‰èŒƒå›´ä¸ºï¼š192.168.0.2-192.168.255.254docker network create --driver bridge --subnet 192.168.0.0/16 --gateway 192.168.0.1 mynet#åˆ é™¤ç½‘ç»œdocker network rm mynet#åˆ é™¤ä¸»æœºä¸Šå…¨éƒ¨æœªä½¿ç”¨çš„ç½‘ç»œdocker network prune#æŸ¥çœ‹å½“å‰Dockeræ‰€æœ‰çš„ç½‘ç»œæ¨¡å¼docker network ls#æŸ¥çœ‹è‡ªå®šä¹‰ç½‘ç»œè¯¦ç»†ä¿¡æ¯docker network inspect mynet#é€šè¿‡--netåœ¨å¯åŠ¨å®¹å™¨æ—¶æŒ‡å®šè‡ªå®šä¹‰ç½‘ç»œdocker run -d --name å®¹å™¨åç§° --net mynet é•œåƒåç§°#ä¸åŒDockerç½‘ç»œä¹‹é—´çš„å®¹å™¨æƒ³è¦è¿žæŽ¥çš„è¯ï¼Œéœ€è¦æŠŠè¯¥å®¹å™¨æ³¨å†Œåˆ°å¦ä¸€ä¸ªå®¹å™¨æ‰€åœ¨çš„ç½‘ç»œä¸Š#å¦‚ä¸‹å‡è®¾centos01å®¹å™¨æœ¬æ¥åœ¨é»˜è®¤çš„bridgeï¼ˆdocker0ï¼‰ä¸Šï¼Œæƒ³è¦è®©å…¶å’Œmynetç½‘ç»œä¸‹çš„å®¹å™¨äº’é€šï¼Œåˆ™éœ€è¦æŠŠcentos01æ³¨å†Œåˆ°mynetä¸­ã€‚#æˆåŠŸæ³¨å†Œåˆ°mynetç½‘ç»œåŽï¼Œdockerå°†ä¼šåœ¨centos01ä¸­åˆ›å»ºä¸€ä¸ªç½‘å¡å¹¶ä¸”åˆ†é…ä¸€ä¸ªmynetç½‘æ®µå†…çš„IPï¼Œå¹¶ä¸”å°†æ–°ip-ä¸»æœºåæ˜ å°„åŠ å…¥è‡ªå·±çš„hostsä¸­docker network connect mynet centos01é»˜è®¤docker0æ˜¯æ— æ³•Pingé€šå®¹å™¨åï¼Œè€Œè‡ªå®šä¹‰ç½‘ç»œå¯ä»¥Pingé€šå®¹å™¨åã€‚åœ¨å¤šä¸ªå¾®æœåŠ¡éƒ¨ç½²åˆ°dockeræ—¶ï¼Œé€šè¿‡è‡ªå®šä¹‰ç½‘ç»œæ–¹ä¾¿ç»Ÿä¸€çš„ç½‘ç»œé…ç½®ã€‚Â¶6. å¤šä¸ªå®¹å™¨ä¹‹é—´é€šè¿‡å®¹å™¨åç§°äº’ç›¸è®¿é—®docker run åˆ›å»ºå®¹å™¨æ—¶é»˜è®¤ä½¿ç”¨çš„æ˜¯ docker0 ç½‘ç»œï¼Œå®¹å™¨å¯ä»¥é€šè¿‡å¦ä¸€ä¸ªå®¹å™¨çš„ ip æ¥è®¿é—®å…¶ä»–å®¹å™¨ä¸»æœºï¼Œä½†æ˜¯æ²¡æ³•é€šè¿‡å®¹å™¨ id æˆ–è€…ä¸»æœºåæ¥è®¿é—®ï¼Œå› ä¸ºå®¹å™¨çš„ hosts æ–‡ä»¶ä¸­é»˜è®¤åªæœ‰å®¹å™¨è‡ªå·±çš„ ip-ä¸»æœºåæ˜ å°„ï¼Œè€Œæ²¡æœ‰å…¶ä»–å®¹å™¨çš„ã€‚ä¸ºäº†èƒ½å¤Ÿé€šè¿‡å®¹å™¨åç§°æ¥è®¿é—®å…¶ä»–å®¹å™¨ï¼Œå¯ä»¥åœ¨å®¹å™¨çš„ hosts æ–‡ä»¶ä¸­é…ç½®å…¶ä»–å®¹å™¨çš„ ip-ä¸»æœºåæ˜ å°„ï¼Œè¿™ä¸ªè¿‡ç¨‹å¯ä»¥ä½¿ç”¨ docker exec å‘½ä»¤è¿›å…¥å®¹å™¨å†…æ‰‹åŠ¨ä¿®æ”¹ hosts æ–‡ä»¶å®žçŽ°ï¼Œä½†è¿™ç§æ–¹å¼ä¼šæœ‰ç‚¹éº»çƒ¦ã€‚è¿˜æœ‰å¦ä¸€è§£å†³æ–¹å¼æ˜¯åœ¨ docker run åˆ›å»ºå®¹å™¨çš„æ—¶å€™é€šè¿‡æŒ‡å®š --link å‚æ•°æ¥é…ç½®å…¶ä»–å®¹å™¨çš„ip-ä¸»æœºåæ˜ å°„ã€‚å¦‚ä¸‹ï¼š12#åˆ›å»ºcentos02å®¹å™¨ï¼Œå¹¶åœ¨å…¶å†…éƒ¨hostsä¸­åŠ å…¥centos01å®¹å™¨çš„ip-ä¸»æœºåæ˜ å°„ã€‚docker run -d -it --name centos02 --link centos01å®¹å™¨çš„ centos:centos7docker run åˆ›å»ºå®¹å™¨æ—¶ä¼šè‡ªåŠ¨æŠŠåˆ†é…åˆ°çš„çš„ ip å’Œ hostnameï¼ˆå³ä¸»æœºåï¼Œé»˜è®¤ä¸ºå®¹å™¨idï¼‰å†™å…¥åˆ°å®¹å™¨çš„hostsæ–‡ä»¶ä¸­ã€‚å…¶ä¸­ ä¸»æœºåå¯ä»¥åœ¨ docker run æ—¶æŒ‡å®š --hostname æ¥ä¿®æ”¹ã€‚å¦‚ä¸Šé…ç½®åŽå°±èƒ½è®© centos02 èƒ½å¤Ÿè®¿é—®åˆ° centos01ï¼Œä½†æ˜¯ centos01 å´ä¸èƒ½è®¿é—® centos02ï¼Œè¿™æ˜¯å› ä¸º centos01 çš„hosts æ–‡ä»¶ä¸­æ²¡æœ‰åŠ å…¥ centos02 çš„ ip - hostnameæ˜ å°„ï¼Œé™¤éžä½¿ç”¨ docker exec å‘½ä»¤è¿›å…¥ centos01 å®¹å™¨å†…ä¿®æ”¹å…¶ hosts æ–‡ä»¶ï¼Œå¯è§ä½¿ç”¨--link å‚æ•°é…ç½®çš„æ–¹å¼æ“ä½œä¹Ÿå¾ˆéº»çƒ¦ã€‚ä¸ºäº†æ›´åŠ ç®€ä¾¿åœ°å®žçŽ° docker ä¸­å¤šä¸ªå®¹å™¨ä¹‹é—´çš„äº’ç›¸è®¿é—®ï¼Œæœ‰ä¸€ç§æ›´å¥½çš„è§£å†³æ–¹æ¡ˆï¼Œé‚£å°±æ˜¯ä½¿ç”¨â€œdockerè‡ªå®šä¹‰ç½‘ç»œâ€ï¼Œdocker è‡ªå®šä¹‰ç½‘ç»œå¯ä»¥ç†è§£ä¸ºâ€œç½‘å¡â€ï¼Œdocker å…è®¸ç”¨æˆ·å°†å¤šä¸ªå®¹å™¨é…ç½®åˆ°åŒä¸€ä¸ªè‡ªå®šä¹‰ç½‘ç»œä¸­ï¼Œå®¹å™¨ä¹‹é—´é€šè¿‡å®¹å™¨åç§°äº’ç›¸è®¿é—®çš„æ—¶å€™ï¼Œdocker å°†ä¼šæ ¹æ®è‡ªå®šä¹‰ç½‘ç»œä¸­çš„å®¹å™¨é…ç½®ä¿¡æ¯è§£æžå®¹å™¨åç§°å¾—åˆ°å¯¹åº”çš„ ip ï¼Œè¿›è€Œå®žçŽ°è®¿é—®ã€‚å¯ä»¥é€šè¿‡ docker inspect è‡ªå®šä¹‰ç½‘ç»œåç§° å‘½ä»¤æ¥æŸ¥çœ‹è‡ªå®šä¹‰ç½‘ç»œä¸­çš„å®¹å™¨é…ç½®ä¿¡æ¯ï¼Œå¦‚ä¸‹ï¼š1234567891011121314151617181920212223242526272829303132docker network ls#æŸ¥çœ‹è‡ªå®šä¹‰ç½‘ç»œé…ç½®docker inspect è‡ªå®šä¹‰ç½‘ç»œåç§°#è‡ªå®šä¹‰ç½‘ç»œä¸­å¤šä¸ªå®¹å™¨çš„é…ç½®ä¿¡æ¯å¦‚ä¸‹ï¼š[ &#123; "Name": "mynet", "Containers": &#123; "0a348b84901337546e60bfcc7cd8592a81e244339337f1ceea9b578bba09d9dd": &#123; "Name": "nginx2", "EndpointID": "867176b7354f17095eff8f5a047bbae062d3f80b4ad150f1711a13f0543ed549", "MacAddress": "02:42:c0:a8:00:04", "IPv4Address": "192.168.0.4/16", "IPv6Address": "" &#125;, "6bfc4ad47e7f878f14b5fa1c3a59029fc6b50a1e04cdb946bd45de4e052a7416": &#123; "Name": "nginx1", "EndpointID": "4498313ad280f9e15c86f5c756a66dbdb39982f8469be50c2761e058b333bb31", "MacAddress": "02:42:c0:a8:00:03", "IPv4Address": "192.168.0.3/16", "IPv6Address": "" &#125;, "a29f5b6558b22bf557a2b997c3c03284f013bc75da89065a983a2452f27bee0c": &#123; "Name": "nginx3", "EndpointID": "85e61dc0d27a7d2a7be14c11e6566656817693981ee22b277328ee3116aafef4", "MacAddress": "02:42:c0:a8:00:02", "IPv4Address": "192.168.0.2/16", "IPv6Address": "" &#125; &#125; &#125;]å°†å¤šä¸ªå®¹å™¨é…ç½®åˆ°åŒä¸€ä¸ªè‡ªå®šä¹‰ç½‘ç»œä¸­çš„æ“ä½œå¦‚ä¸‹ï¼š12345678910111213141516171819#åˆ›å»ºä¸€ä¸ªåç§°ä¸ºmynetçš„è‡ªå®šä¹‰ç½‘ç»œdocker network create --driver bridge --subnet 192.168.0.0/16 --gateway 192.168.0.1 mynet#ä½¿ç”¨é»˜è®¤bridgeï¼ˆdocker0ï¼‰ç½‘ç»œåˆ›å»ºcentos01docker run -d --name centos01 centos:centos7#ä½¿ç”¨è‡ªå®šä¹‰ç½‘ç»œmynetåˆ›å»ºcentos02docker run -d --name centos02 --net mynet centos:centos7docker run -d --name centos01 centos:centos7#ä½¿ç”¨è‡ªå®šä¹‰ç½‘ç»œmynetåˆ›å»ºcentos03docker run -d --name centos03 --net mynet centos:centos7#æµ‹è¯•centos01æ˜¯å¦è¿žé€šåˆ°centos03æƒ…å†µï¼ˆå‘çŽ°è¿žé€šæˆåŠŸï¼‰docker exec -it centos01 ping centos03#æµ‹è¯•centos03æ˜¯å¦è¿žé€šåˆ°centos01æƒ…å†µï¼ˆå‘çŽ°è¿žé€šæˆåŠŸï¼‰docker exec -it centos03 ping centos01#æµ‹è¯•centos01æ˜¯å¦è¿žé€šåˆ°centos02æƒ…å†µï¼ˆå‘çŽ°ä¸é€šï¼‰docker exec -it centos01 ping centos02#æŠŠè¯¥centos01æ³¨å†Œåˆ°centos02æ‰€åœ¨çš„mynetç½‘ç»œä¸Šã€‚docker network connect mynet centos01#æµ‹è¯•centos01æ˜¯å¦è¿žé€šåˆ°centos02æƒ…å†µï¼ˆå‘çŽ°è¿žé€šæˆåŠŸï¼‰docker exec -it centos01 ping centos02Â¶7. æŸ¥çœ‹å®¹å™¨ipä¸¤ç§æ–¹å¼ï¼š1ã€ç”±äºŽdocker runåˆ›å»ºå®¹å™¨æ—¶å°±ä¼šç»™å®¹å™¨åˆ†é…ipç­‰ä¿¡æ¯äº†ï¼Œæ‰€ä»¥å¯ä»¥ç›´æŽ¥ä½¿ç”¨docker inspectå‘½ä»¤æ¥è¿‡æ»¤æ•°æ®èŽ·å–ã€‚2ã€é€šè¿‡docker execå‘½ä»¤è¿›å…¥å®¹å™¨å†…éƒ¨åœ¨ä½¿ç”¨å¦‚ifconfigç­‰æ–¹å¼æŸ¥çœ‹12345678910##é€šè¿‡docker inspectæŸ¥çœ‹å®¹å™¨ip#æŸ¥çœ‹å®¹å™¨ipdocker inspect --format='&#123;&#123;.Name&#125;&#125; - &#123;&#123;range .NetworkSettings.Networks&#125;&#125;&#123;&#123;.IPAddress&#125;&#125;&#123;&#123;end&#125;&#125;' å®¹å™¨åç§°æˆ–å®¹å™¨id#æ˜¾ç¤ºæ‰€æœ‰å®¹å™¨ IP åœ°å€docker inspect --format='&#123;&#123;.Name&#125;&#125; - &#123;&#123;range .NetworkSettings.Networks&#125;&#125;&#123;&#123;.IPAddress&#125;&#125;&#123;&#123;end&#125;&#125;' $(docker ps -aq)##é€šè¿‡docker execæŸ¥çœ‹å®¹å™¨ipdocker exec -it å®¹å™¨åç§°æˆ–å®¹å™¨id ifconfigdocker exec -it å®¹å™¨åç§°æˆ–å®¹å™¨id ip iddrdocker exec -it å®¹å™¨åç§°æˆ–å®¹å™¨id cat /etc/hostså‚è€ƒï¼šhttps://blog.csdn.net/CSDN1csdn1/article/details/123961079Â¶8. Dockerä¸Žé˜²ç«å¢™Â¶1ï¼‰bridge ç½‘ç»œæ¨¡å¼çš„é˜²ç«å¢™é…ç½®Docker é»˜è®¤ä½¿ç”¨çš„æ˜¯ bridge ç½‘ç»œæ¨¡å¼ï¼Œåœ¨åˆ›å»ºå®¹å™¨æ—¶ä¼šè‡ªåŠ¨ä¸ºå®¹å™¨é…ç½® iptables è§„åˆ™ä»¥è¿›è¡Œç½‘ç»œå®‰å…¨æŽ§åˆ¶ã€‚å…·ä½“æ¥è¯´ï¼ŒDocker ä¼šåœ¨ä¸»æœºä¸Šåˆ›å»ºä¸€ä¸ªåä¸º docker0 çš„è™šæ‹Ÿç½‘æ¡¥ï¼Œå¹¶å°†å®¹å™¨è¿žæŽ¥åˆ°è¯¥ç½‘æ¡¥ä¸­ã€‚åŒæ—¶ï¼Œå®ƒè¿˜ä¼šä¸ºæ¯ä¸ªå®¹å™¨åˆ†é…ä¸€ä¸ªéšæœºçš„ IP åœ°å€ï¼Œå¹¶é€šè¿‡ NAT çš„æ–¹å¼å°†å®¹å™¨å’Œå®¿ä¸»æœºçš„ IP åœ°å€è¿›è¡Œæ˜ å°„ã€‚è¯´æ˜Žï¼šbridge ç½‘ç»œæ¨¡å¼ä¸‹ï¼Œå¯åŠ¨æˆ–åœæ­¢ docker å®¹å™¨æ—¶ï¼Œdocker éƒ½ä¼šåœ¨ iptables é˜²ç«å¢™é…ç½®ä¸­è‡ªåŠ¨åˆ›å»ºæˆ–åˆ é™¤å’Œå®¹å™¨ç›¸å…³çš„è§„åˆ™ç­–ç•¥ï¼Œè€Œä¸éœ€è¦äººä¸ºæ‰‹åŠ¨è¿›è¡Œé…ç½®ã€‚ç”±äºŽ docker ä½¿ç”¨çš„æ˜¯iptables å‘½ä»¤ç»´æŠ¤é˜²ç«å¢™é…ç½®ï¼Œæ‰€ä»¥ç”¨æˆ·åªèƒ½é€šè¿‡iptables å‘½ä»¤æ¥æŸ¥çœ‹ docker ç›¸å…³çš„é˜²ç«å¢™è§„åˆ™ç­–ç•¥ï¼Œè€Œä½¿ç”¨firewallã€ufw ç­‰ä¸Šå±‚é˜²ç«å¢™å·¥å…·åˆ™æ— æ³•æŸ¥çœ‹ã€‚Â¶2ï¼‰host ç½‘ç»œæ¨¡å¼çš„é˜²ç«å¢™é…ç½®å½“ Docker ä½¿ç”¨ host ç½‘ç»œæ¨¡å¼æ—¶ï¼ŒDocker å®¹å™¨å°†ç›´æŽ¥ä½¿ç”¨å®¿ä¸»æœºçš„ç½‘ç»œçŽ¯å¢ƒï¼ŒåŒ…æ‹¬ IP å’Œç«¯å£ã€‚æ­¤æ—¶ Docker ä¸ä¼šå†ä¸ºå®¹å™¨è‡ªåŠ¨è¿›è¡Œ iptables é…ç½®ï¼Œè€Œæ˜¯ç›´æŽ¥ä½¿ç”¨å®¿ä¸»æœºçš„é˜²ç«å¢™è§„åˆ™ã€‚Â¶9. åå‘ä»£ç†åˆ°å®¹å™¨Â¶1ï¼‰ç®€è¦æ¦‚è¿°ä½¿ç”¨ä¸€äº›åå‘ä»£ç†æœåŠ¡ï¼ˆå¦‚ï¼šNginxï¼‰å¯ä»¥å°†ç”¨æˆ·è¯·æ±‚ä»£ç†åˆ°å®¹å™¨å†…éƒ¨çš„ç«¯å£ç›‘å¬æœåŠ¡ä¸Šï¼Œä»Žè€Œå¯ä»¥ç»™ docker å®¹å™¨åšè´Ÿè½½å‡è¡¡ã€ç½‘ç»œå®‰å…¨é˜²æŠ¤ç­‰ï¼Œè¿™äº›éƒ½æ˜¯å¸¸è§çš„è¿ç»´éœ€æ±‚ã€‚å…¶ä¸­ç½‘ç»œå®‰å…¨é˜²æŠ¤çš„ä¸€äº›å…·ä½“éœ€æ±‚å¦‚ä¸‹ï¼šï¼ˆ1ï¼‰é€šè¿‡é™åˆ¶å¤–ç½‘è®¿é—® docker å®¹å™¨ä»Žè€Œå®žçŽ°å¤šä¸ª docker å¾®æœåŠ¡å®¹å™¨ä¹‹é—´å¯ä»¥åœ¨å†…ç½‘ä¸­äº’ç›¸è®¿é—®ï¼Œä½†ä¸å…è®¸å¤–ç½‘ç›´æŽ¥è®¿é—®ã€‚ï¼ˆ2ï¼‰ docker ä¸­çš„ HTTP æœåŠ¡å®¹å™¨æœªè¿›è¡Œ SSL åŠ å¯†è€Œç›´æŽ¥æä¾›å¤–ç½‘è®¿é—®æ˜¯éžå¸¸ä¸å®‰å…¨çš„ï¼Œä¸€èˆ¬åšæ³•æ˜¯å…ˆé…ç½® docker å®¹å™¨ç¦æ­¢å¤–ç½‘è®¿é—®è€Œåªå…è®¸å†…ç½‘è®¿é—®ï¼Œå†ä½¿ç”¨ nginx é€šè¿‡åå‘ä»£ç†è½¬å‘å¤–ç½‘çš„ HTTPS è¯·æ±‚ç»™ docker å®¹å™¨ä¸­çš„ HTTP æœåŠ¡ã€‚ä¸‹é¢æ˜¯ä»¥ä¸Šéœ€æ±‚çš„å…·ä½“å®žçŽ°æ–¹æ¡ˆï¼šÂ¶2ï¼‰é™åˆ¶å¤–ç½‘è®¿é—® docker å®¹å™¨æ–¹å¼1ï¼šä½¿ç”¨é»˜è®¤çš„ bridge ç½‘ç»œæ¨¡å¼åˆ›å»º docker å®¹å™¨å¹¶æŒ‡å®šç«¯å£æ˜ å°„æ—¶é™åˆ¶è®¿é—® IPã€‚æ“ä½œå¦‚ä¸‹ï¼š1docker run -d --name å®¹å™¨åç§° -p 127.0.0.1:å®¿ä¸»æœºç«¯å£:å®¹å™¨ç«¯å£ é•œåƒåç§°æ³¨æ„ï¼šdockerä¼šè‡ªåŠ¨ç»´æŠ¤é˜²ç«å¢™é…ç½®ï¼Œé€šå¸¸ä¸è®¾ç½® ip åˆ™å®¹å™¨å¯¹åº”çš„å®¿ä¸»æœºç«¯å£é»˜è®¤å¯¹æ‰€æœ‰ IP è®¿é—®ä¸é™åˆ¶ã€‚è¿™ç§æ–¹å¼è¿è¡Œå®¹å™¨ï¼Œå®¹å™¨ç¨‹åºçš„ç›‘å¬ç«¯å£ä¼šå ç”¨å®¿ä¸»æœºçš„ç«¯å£ã€‚æ–¹å¼2ï¼šä½¿ç”¨ host ç½‘ç»œæ¨¡å¼åˆ›å»º docker å®¹å™¨ï¼Œè®©å®¹å™¨ç›‘å¬ç«¯å£ç›´æŽ¥ä½¿ç”¨å®¿ä¸»æœºç«¯å£ã€‚æ“ä½œå¦‚ä¸‹ï¼š1docker run -d --name å®¹å™¨åç§° --net=host é•œåƒåç§°æ³¨æ„ï¼šä½¿ç”¨ host ç½‘ç»œæ¨¡å¼åˆ›å»º docker å®¹å™¨æ—¶ï¼Œ docker ä¸ä¼šè¿›è¡Œ iptables è‡ªåŠ¨é…ç½®ï¼Œè€Œæ˜¯ç›´æŽ¥ä½¿ç”¨å®¿ä¸»æœºçš„é˜²ç«å¢™è§„åˆ™ã€‚è¿™ç§æ–¹å¼è¿è¡Œå®¹å™¨ï¼Œå®¹å™¨ç¨‹åºçš„ç›‘å¬ç«¯å£ä¼šå ç”¨å®¿ä¸»æœºçš„ç«¯å£ã€‚æ–¹å¼3ï¼šåˆ›å»º docker å®¹å™¨æ—¶ä¸è¿›è¡Œç«¯å£æ˜ å°„ï¼Œè€Œé€šè¿‡å®¹å™¨ IP è¿›è¡Œè®¿é—®ã€‚12345678910111213#æ–¹æ³•1ï¼šä½¿ç”¨é»˜è®¤çš„bridgeç½‘ç»œè‡ªåŠ¨åˆ†é…IPç»™å®¹å™¨ï¼ˆé»˜è®¤çš„bridgeç½‘ç»œIPç½‘æ®µä¸º172.17.0.0/16ï¼‰docker run -d --name å®¹å™¨åç§° é•œåƒåç§°#æ–¹æ³•2ï¼šæ‰‹åŠ¨æŒ‡å®šä¸€ä¸ªè‡ªå®šä¹‰ç½‘ç»œçš„å›ºå®šIPç»™å®¹å™¨docker network create --driver bridge --subnet 192.168.0.0/16 --gateway 192.168.0.1 mynetdocker run -d --name å®¹å™¨åç§° --net=mynet --ip 192.168.0.100 é•œåƒåç§°#æŸ¥çœ‹å®¹å™¨çš„ipdocker inspect å®¹å™¨åç§°æˆ–ID | grep IPAddress#æˆ–è€…ï¼šdocker inspect -f '&#123;&#123;range .NetworkSettings.Networks&#125;&#125;&#123;&#123;.IPAddress&#125;&#125;&#123;&#123;end&#125;&#125;' å®¹å™¨åç§°æˆ–ID#æŸ¥çœ‹é»˜è®¤çš„bridgeç½‘ç»œçš„ipç½‘æ®µdocker network inspect bridge | grep Subnetè¿™ç§æ–¹å¼è¿è¡Œå®¹å™¨ï¼Œå®¹å™¨ç¨‹åºçš„ç›‘å¬ç«¯å£ä¸ä¼šå ç”¨å®¿ä¸»æœºçš„ç«¯å£ã€‚æ³¨æ„ï¼šä¸èƒ½ä½¿ç”¨é»˜è®¤çš„ bridge ç½‘ç»œæ¨¡å¼æŒ‡å®šè‡ªå®šä¹‰ IPï¼Œå¦åˆ™ä¼šæŠ¥é”™æˆ–è®¾ç½®æ— æ•ˆã€‚Â¶3ï¼‰é€šè¿‡nginxåå‘ä»£ç†åˆ°dockerçš„HTTPæœåŠ¡å®¹å™¨ï¼ˆ1ï¼‰é…ç½® nginx SSLè¯ä¹¦å’Œåå‘ä»£ç†ï¼Œå¦‚ä¸‹ï¼šé…ç½®nginx SSLè¯ä¹¦å¹¶ç›‘å¬ä¸€ä¸ªå¯¹å¤–ç½‘è®¿é—®çš„ç«¯å£ï¼Œå¹¶åå‘ä»£ç†åˆ°dockerå®¹å™¨çš„ç›‘å¬ç«¯å£ï¼ˆè®¾ç«¯å£ä¸ºï¼š8080ï¼‰12345678910111213141516171819server &#123; listen 443 ssl; #æ­¤å¤„ç«¯å£ä¸ºnginxå¯¹å¤–ç½‘æš´éœ²çš„ç«¯å£ server_name example.com; ssl_certificate /path/to/cert.pem; ssl_certificate_key /path/to/key.pem; ssl_ciphers HIGH:!aNULL:!MD5; ssl_prefer_server_ciphers on; charset utf-8; location ^~ / &#123; proxy_pass http://127.0.0.1:8080; #æ­¤å¤„ç«¯å£ä¸ºdockerçš„HTTPæœåŠ¡å®¹å™¨çš„ç›‘å¬ç«¯å£ #proxy_pass http://172.17.0.100:8080; proxy_set_header Host $host:$server_port; proxy_set_header X-Real-IP $remote_addr; proxy_set_header REMOTE-HOST $remote_addr; proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for; client_max_body_size 100m; &#125;&#125;å‡è®¾docker run è¿è¡Œ http å®¹å™¨æ—¶é™åˆ¶ ip æ˜ å°„ç«¯å£ä¸º -p 127.0.0.1:å®¿ä¸»æœºç«¯å£:å®¹å™¨ç«¯å£ï¼Œé‚£ä¹ˆå¯ä»¥ä»£ç†åˆ° http://127.0.0.1:8080ã€‚è€Œå¦‚æžœä¸è¿›è¡Œç«¯å£æ˜ å°„ï¼Œåˆ™å¯ä»¥é€šè¿‡å‘½ä»¤ docker inspect å®¹å™¨åç§°æˆ–ID | grep IPAddress æŸ¥çœ‹å®¹å™¨çš„ ip ï¼Œç„¶åŽåå‘ä»£ç†åˆ°å¯¹åº”çš„åœ°å€ï¼Œå¦‚ï¼šhttp://172.17.0.100:8080ï¼ˆ2ï¼‰é…ç½®é˜²ç«å¢™æ”¾è¡Œnginxå¯¹å¤–ç½‘æš´éœ²çš„ç«¯å£123456##å®¿ä¸»æœºé…ç½®é˜²ç«å¢™#å¯¹äºŽ UFW é˜²ç«å¢™ï¼šufw allow 443/tcp#å¯¹äºŽ FirewallD é˜²ç«å¢™ï¼šfirewall-cmd --zone=public --add-port=443/tcp --permanentfirewall-cmd --reloadæœ€åŽå¤–ç½‘è®¿é—®çš„åœ°å€ä¸ºï¼šhttps://example.comï¼ˆå³ï¼šhttps://example.com:443ï¼‰Â¶å…«ã€æž„å»ºè‡ªå®šä¹‰é•œåƒÂ¶æ–¹å¼1ï¼šä¸Šä¼ ç¨‹åºåˆ°vpsåŽæž„å»ºéœ€æ±‚ï¼šæž„å»ºä¸€ä¸ªèƒ½åœ¨tomcatå®¹å™¨é‡Œè¿è¡Œçš„waråŒ…ç¨‹åºé•œåƒï¼Œå¹¶é€šè¿‡é•œåƒåˆ›å»ºä¸€ä¸ªå®žä¾‹å®¹å™¨ã€‚ç”±äºŽä¾èµ–äºŽtomcatå®¹å™¨ï¼Œæ•…éœ€è¦å…ˆæ‹‰åŽ»tomcaté•œåƒåˆ°æœ¬åœ°ã€‚tomcaté•œåƒä¸»é¡µï¼šhttps://c.163yun.com/hub#/library/repository/info?repoId=3105Â¶ï¼ˆ1ï¼‰æ‹‰å–tomcaté•œåƒåˆ°å®¿ä¸»æœº1docker pull hub.c.163.com/library/tomcat:latestÂ¶ï¼ˆ2ï¼‰ä¸Šä¼ waråŒ…åˆ›å»ºä¸€ä¸ªwebdemoé¡¹ç›®ï¼Œå¹¶åœ¨è¿™ä¸ªwebdemoé¡¹ç›®çš„èµ„æºè·¯å¾„é‡Œæ·»åŠ ä¸€ä¸ªindex.jspé¡µé¢ã€‚12345&lt;html&gt;&lt;body&gt;&lt;h2&gt;Hello World!&lt;/h2&gt;&lt;/body&gt;&lt;/html&gt;ç„¶åŽæ‰“åŒ…å¾—åˆ°webdemo.waræ–‡ä»¶ã€‚å¹¶ä¸Šä¼ è¿™ä¸ªwebdemo.waræ–‡ä»¶åˆ°vpsçš„/root/projectç›®å½•Â¶ï¼ˆ3ï¼‰ç¼–å†™Dockerfileæ–‡ä»¶12#åœ¨/root/projectä¸‹ç¼–å†™ä¸€ä¸ªDockerfileæ–‡ä»¶vim Dockerfile123456#ç»§æ‰¿äºŽæŸä¸ªé•œåƒfrom hub.c.163.com/library/tomcat#é•œåƒæ‰€æœ‰è€…ä¿¡æ¯MAINTAINER qcmoke qcmoke@gmail.com#æŠŠç¨‹åºcopyåˆ°å®¹å™¨é•œåƒå½“ä¸­ï¼Œå‰é¢çš„å‚æ•°æ˜¯æœ¬åœ°è·¯å¾„ï¼ŒåŽé¢çš„å‚æ•°æ˜¯å®¹å™¨é•œåƒè·¯å¾„(å¯ä»¥åˆ°é•œåƒä¸»é¡µå¾—åˆ°tomcatçš„webappè·¯å¾„)COPY /root/project /usr/local/tomcat/webappsÂ¶ï¼ˆ4ï¼‰æž„å»ºç”Ÿæˆé•œåƒ12#åœ¨Dockerfileæ–‡ä»¶æ‰€åœ¨çš„ç›®å½•ï¼Œå³/root/projecté‡Œæ‰§è¡Œå¦‚ä¸‹å‘½ä»¤docker build -t webdemo:latest .Â¶ï¼ˆ5ï¼‰æŸ¥çœ‹æœ¬åœ°é•œåƒä»“åº“æ˜¯å¦æž„å»ºæˆåŠŸ1docker images123REPOSITORY TAG IMAGE ID CREATED SIZEdocker.io/tomcat latest aeea3708743f Less than a second ago 529 MBwebdemo latest 10f75818641a 46 seconds ago 310 MBÂ¶ï¼ˆ6ï¼‰é€šè¿‡æž„å»ºçš„é•œåƒå®žä¾‹åŒ–ä¸€ä¸ªå®¹å™¨å¹¶è¿è¡Œ1docker run -d -p 8080:8080 webdemo:latestÂ¶ï¼ˆ7ï¼‰è®¿é—®æµ‹è¯•è®¿é—®index.jspï¼šhttp://192.168.222.131:8080/webdemo/index.jspÂ¶ï¼ˆ8ï¼‰å…¶ä»–åœ¨ç”¨-dæŒ‡å®šä¸ºåŽå°å¯åŠ¨çš„æƒ…å†µä¸‹ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æŸ¥çœ‹å®¹å™¨å®žæ—¶çš„æ—¥å¿—æƒ…å†µï¼š1docker logs -f å®¹å™¨åç§°æˆ–è€…å®¹å™¨idÂ¶æ–¹å¼2ï¼šé€šè¿‡ideaæ’ä»¶è¿žæŽ¥vpsæž„å»ºÂ¶ï¼ˆ1ï¼‰é…ç½®dockerå…è®¸å¤–ç½‘è®¿é—®åœ¨vpsä¸­é…ç½®dockerå…è®¸å¤–ç½‘è®¿é—®1vim /usr/lib/systemd/system/docker.serviceåœ¨ExecStartå±žæ€§åŽŸæ¥å€¼çš„æœ€åŽè¿½åŠ 1-H tcp://0.0.0.0:2375 -H unix:///var/run/docker.sockæ–°ç‰ˆDocker CEé…ç½®å¦‚ä¸‹1234567891011121314........[Service]Type=notify# the default is not to use systemd for cgroups because the delegate issues still# exists and systemd currently does not support the cgroup feature set required# for containers run by dockerExecStart=/usr/bin/dockerd -H fd:// --containerd=/run/containerd/containerd.sock -H tcp://0.0.0.0:2375 -H unix:///var/run/docker.sockExecReload=/bin/kill -s HUP $MAINPIDTimeoutSec=0RestartSec=2Restart=always........æ—§ç‰ˆDockeré…ç½®å¦‚ä¸‹ï¼š1234567891011121314151617181920[Service]........ExecStart=/usr/bin/dockerd-current \ --add-runtime docker-runc=/usr/libexec/docker/docker-runc-current \ --default-runtime=docker-runc \ --exec-opt native.cgroupdriver=systemd \ --userland-proxy-path=/usr/libexec/docker/docker-proxy-current \ --init-path=/usr/libexec/docker/docker-init-current \ --seccomp-profile=/etc/docker/seccomp.json \ $OPTIONS \ $DOCKER_STORAGE_OPTIONS \ $DOCKER_NETWORK_OPTIONS \ $ADD_REGISTRY \ $BLOCK_REGISTRY \ $INSECURE_REGISTRY \ $REGISTRIES \ -H tcp://0.0.0.0:2375 -H unix:///var/run/docker.sock........Â¶ï¼ˆ2ï¼‰é‡æ–°åŠ è½½é…ç½®å¹¶é‡å¯Docker12systemctl daemon-reloadsystemctl restart dockerÂ¶ï¼ˆ3ï¼‰å¯åŠ¨é˜²ç«å¢™å¹¶å¼€æ”¾2375ç«¯å£å¼€æ”¾äº†é˜²ç«å¢™2375ç«¯å£ç”¨äºŽè¿œç¨‹è¿žæŽ¥123service firewalld startfirewall-cmd --permanent --add-port=2375/tcpfirewall-cmd --reloadä¸éœ€è¦å¦å¤–å¼€æ”¾å®¹å™¨æ˜ å°„åˆ°å®¿ä¸»æœºçš„ç«¯å£ã€‚ç»æ“ä½œå‘çŽ°ï¼Œå¦‚æžœä½¿ç”¨vmwareçš„linuxä½œä¸ºvpsï¼Œä¸èƒ½ç›´æŽ¥å…³é—­é˜²ç«å¢™ï¼Œå¼€æ”¾ç›¸åº”çš„ç«¯å£å³å¯ã€‚Â¶ï¼ˆ4ï¼‰åˆ›å»ºä¸€ä¸ªspringbooté¡¹ç›®pom.xml123456789101112131415161718192021222324252627282930313233343536373839&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd"&gt; &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt; &lt;groupId&gt;com.example&lt;/groupId&gt; &lt;artifactId&gt;demo-boot&lt;/artifactId&gt; &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt; &lt;properties&gt; &lt;java.version&gt;1.8&lt;/java.version&gt; &lt;/properties&gt; &lt;parent&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt; &lt;version&gt;2.2.4.RELEASE&lt;/version&gt; &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt; &lt;/parent&gt; &lt;dependencies&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt; &lt;/dependency&gt; &lt;/dependencies&gt; &lt;build&gt; &lt;plugins&gt; &lt;plugin&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt; &lt;!--å°†å…¶ä»–æ¨¡å—çš„ä¾èµ–ä¸€èµ·æ‰“åŒ…ç”Ÿæˆå¯æ‰§è¡Œjar--&gt; &lt;executions&gt; &lt;execution&gt; &lt;goals&gt; &lt;goal&gt;repackage&lt;/goal&gt; &lt;/goals&gt; &lt;/execution&gt; &lt;/executions&gt; &lt;/plugin&gt; &lt;/plugins&gt; &lt;/build&gt;&lt;/project&gt;DemoApplication.java12345678910111213141516171819202122package com.example.demo;import org.springframework.boot.SpringApplication;import org.springframework.boot.autoconfigure.SpringBootApplication;import org.springframework.web.bind.annotation.RequestMapping;import org.springframework.web.bind.annotation.RestController;/** * @author qcmoke */@RestController@SpringBootApplicationpublic class DemoApplication &#123; public static void main(String[] args) &#123; SpringApplication.run(DemoApplication.class, args); &#125; @RequestMapping("/hello") public Object hello() &#123; return "hello docker!"; &#125;&#125;application.yml12server: port: 8080Dockerfile123456789FROM openjdk:8u212-jre#å­˜æ”¾æŒä¹…åŒ–æ•°æ®çš„ç›®å½•VOLUME /tmp#è¦å¤åˆ¶åˆ°å®¹å™¨ä¸­çš„é—®ä»¶ADD target/demo-boot-0.0.1-SNAPSHOT.jar /demo-boot.jar#dockerå®¹å™¨å¯åŠ¨æ—¶æ‰§è¡Œçš„å‘½ä»¤ENTRYPOINT ["java","-Djava.security.egd=file:/dev/./urandom","-jar","/demo-boot.jar"]#å¯åŠ¨ç«¯å£å·(å®¹å™¨ä¸­çš„)EXPOSE 8080Â¶ï¼ˆ5ï¼‰ç¼–è¯‘é¡¹ç›®ç”ŸæˆjaråŒ…Â¶ï¼ˆ6ï¼‰é…ç½®è¿œç¨‹dockeræ’ä»¶è¿žæŽ¥é»˜è®¤æ–°ç‰ˆçš„ideaè‡ªå¸¦æœ‰è¿™ä¸ªæ’ä»¶ï¼Œå¦‚æžœæ²¡æœ‰ç›´æŽ¥åˆ°æ’ä»¶ä¸­å¿ƒå®‰è£…å³å¯ã€‚Â¶ï¼ˆ7ï¼‰ç„¶åŽé…ç½®DockerFileÂ¶ï¼ˆ8ï¼‰è¿è¡Œdockeræ’ä»¶è¿è¡Œæ’ä»¶éƒ¨ç½²é•œåƒåˆ°vpsï¼Œå¹¶é€šè¿‡é•œåƒåˆ›å»ºä¸€ä¸ªå®žä¾‹å®¹å™¨Â¶ï¼ˆ9ï¼‰è®¿é—®æµ‹è¯•æœ€åŽè®¿é—®: http://192.168.222.132:8080/helloÂ¶ä¹ã€Docker ComposeÂ¶1. ç®€ä»‹Composeé¡¹ç›®æ˜¯ Docker å®˜æ–¹çš„å¼€æºé¡¹ç›®ï¼Œè´Ÿè´£å®žçŽ°å¯¹ Docker å®¹å™¨é›†ç¾¤çš„å¿«é€Ÿç¼–æŽ’ã€‚åœ°å€ï¼šhttps://github.com/docker/composeä½¿ç”¨ä¸€ä¸ª Dockerfile æ¨¡æ¿æ–‡ä»¶ï¼Œå¯ä»¥è®©ç”¨æˆ·å¾ˆæ–¹ä¾¿çš„å®šä¹‰ä¸€ä¸ªå•ç‹¬çš„åº”ç”¨å®¹å™¨ã€‚ç„¶è€Œï¼Œåœ¨æ—¥å¸¸å·¥ä½œä¸­ï¼Œç»å¸¸ä¼šç¢°åˆ°éœ€è¦å¤šä¸ªå®¹å™¨ç›¸äº’é…åˆæ¥å®ŒæˆæŸé¡¹ä»»åŠ¡çš„æƒ…å†µã€‚Compose å…è®¸ç”¨æˆ·é€šè¿‡ä¸€ä¸ªå•ç‹¬çš„ docker-compose.yml æ¨¡æ¿æ–‡ä»¶æ¥å®šä¹‰ä¸€ç»„ç›¸å…³è”çš„åº”ç”¨å®¹å™¨ä¸ºä¸€ä¸ªé¡¹ç›®ã€‚Â¶2. å®‰è£…åœ¨ Linux ä¸Šçš„ä¹Ÿå®‰è£…ååˆ†ç®€å•ï¼Œä»Ž å®˜æ–¹ GitHub Release å¤„ç›´æŽ¥ä¸‹è½½ç¼–è¯‘å¥½çš„äºŒè¿›åˆ¶æ–‡ä»¶å³å¯ã€‚ä¾‹å¦‚ï¼Œåœ¨ Linux 64 ä½ç³»ç»Ÿä¸Šç›´æŽ¥ä¸‹è½½å¯¹åº”çš„äºŒè¿›åˆ¶åŒ…ã€‚1234curl -L https://github.com/docker/compose/releases/download/v2.2.2/docker-compose-`uname -s`-`uname -m` &gt; /usr/local/bin/docker-compose#æ—§ç‰ˆï¼šcurl -L https://github.com/docker/compose/releases/download/1.24.1/docker-compose-`uname -s`-`uname -m` &gt; /usr/local/bin/docker-composechmod +x /usr/local/bin/docker-composedocker-compose --versionå› ä¸º Docker Compose å­˜æ”¾åœ¨ GitHubï¼Œå¯èƒ½ç½‘ç»œä¸å¤ªç¨³å®šã€‚å¯ä»¥æƒ³åŠžæ³•ä¸‹è½½åŽå†ä¸Šä¼ åˆ°æœåŠ¡å™¨ï¼Œæ“ä½œå¦‚ä¸‹ï¼šï¼ˆ1ï¼‰æ‰‹åŠ¨ä¸‹è½½ docker-compose æ–‡ä»¶ï¼Œä¸‹è½½åœ°å€ï¼šhttps://github.com/docker/compose/releases/download/1.24.1/docker-compose-Linux-x86_64ï¼ˆ2ï¼‰å¤åˆ¶å¹¶é‡å‘½åä¸‹è½½çš„æ–‡ä»¶ä¸ºdocker-compose1&gt;mv docker-compose-Linux-x86_64 /usr/local/bin/docker-composeÂ¶3. å¸è½½å¦‚æžœæ˜¯äºŒè¿›åˆ¶åŒ…æ–¹å¼å®‰è£…çš„ï¼Œåˆ é™¤äºŒè¿›åˆ¶æ–‡ä»¶å³å¯ã€‚1rm /usr/local/bin/docker-composeÂ¶4. ç¼–æŽ’æ–‡ä»¶ä¸‹é¢ä»¥ç¼–æŽ’ mysqlã€redisã€nacos å®¹å™¨ä¸ºç¤ºä¾‹ï¼Œé…ç½®å¦‚ä¸‹ï¼šåœ¨ä»»æ„ç›®å½•åˆ›å»ºcomposeç¼–æŽ’é…ç½®æ–‡ä»¶ï¼šdocker-compose.yml12345678910111213141516171819202122232425262728293031323334353637## ç¼–æŽ’æ–‡ä»¶çš„ç‰ˆæœ¬version: '3'services: # composeç®¡ç†çš„æœåŠ¡ redis: image: redis # æŒ‡å®šé•œåƒ container_name: redis-1 # å®¹å™¨åç§° restart: always # å¼€æœºè‡ªåŠ¨å¯åŠ¨ ports: # ç«¯å£æ˜ å°„ - 6379:6379 volumes: # ç›®å½•æ˜ å°„ - /opt/redis/conf:/usr/local/etc/redis - /opt/redis/data:/data command: redis-server --requirepass qcmoke123456 --appendonly yes #æ‰§è¡Œçš„å‘½ä»¤; requirepassæ¥æŒ‡å®šè¿œç¨‹ç™»å½•å¯†ç ; appendonlyæ¥æŒ‡å®šæ˜¯å¦å¼€å¯æŒä¹…åŒ–ç­–ç•¥ #command: redis-server /usr/local/etc/redis/redis.conf --appendonly yes mysql: image: mysql:5.7.24 container_name: mysql-1 ports: - 3306:3306 environment: # çŽ¯å¢ƒå˜é‡ MYSQL_ROOT_PASSWORD: qcmoke123456 # è®¾ç½®æ•°æ®åº“rootå¯†ç  restart: always volumes: - /opt/mysql/data:/var/lib/mysql #å½“ MySQL æœåŠ¡å¯åŠ¨æ—¶ä¼šä»¥/etc/mysql/my.cnfä¸ºé…ç½®æ–‡ä»¶ï¼Œè€Œè¯¥æ–‡ä»¶ä¼šå¯¼å…¥/etc/mysql/conf.dç›®å½•ä¸­æ‰€æœ‰ä»¥.cnfä¸ºåŽç¼€çš„æ–‡ä»¶ã€‚ #è¿™äº›æ–‡ä»¶ä¼šæ‹“å±•æˆ–è¦†ç›– /etc/mysql/my.cnf æ–‡ä»¶ä¸­çš„é…ç½®ã€‚å› æ­¤åˆ›å»ºä»¥.cnfç»“å°¾çš„é…ç½®æ–‡ä»¶å¹¶æŒ‚è½½è‡³MySQLå®¹å™¨ä¸­çš„/etc/mysql/conf.dç›®å½•å³å¯ã€‚ #åœ¨æœ¬é¡¹ç›®ä¸­åªè¦åœ¨docker-compose upå‰ä¸Šä¼ my.cnfæ–‡ä»¶åˆ°å®¿ä¸»æœºçš„/opt/mysql/conf.d/my.cnfç›®å½•å³å¯ã€‚å¦‚æžœåœ¨docker-compose upåŽçš„è¯ï¼Œéœ€è¦é‡å¯mysqlå®¹å™¨æ‰èƒ½é‡æ–°åŠ è½½åˆ°è‡ªå®šä¹‰çš„é…ç½®æ–‡ä»¶ã€‚ - /opt/mysql/conf.d:/etc/mysql/conf.d nacos: image: nacos/nacos-server container_name: nacos-standalone environment: - MODE=standalone ports: - 8848:8848æ³¨æ„ï¼šå¦‚æžœç¼–æŽ’æ–‡ä»¶æ²¡æœ‰æ˜¾å¼æŒ‡å®šç½‘ç»œï¼Œåˆ™ Docker Compose åœ¨é»˜è®¤æƒ…å†µä¸‹ä¼šè‡ªåŠ¨åˆ›å»ºä¸€ä¸ªæ–°çš„ â€œbridgeâ€ï¼ˆæ¡¥æŽ¥ï¼‰ç½‘ç»œï¼Œå¹¶å°†Composeæ–‡ä»¶ä¸­çš„æ‰€æœ‰å®¹å™¨æœåŠ¡è¿žæŽ¥åˆ°è¯¥ç½‘ç»œã€‚è¿™ä¸ªé»˜è®¤çš„&quot;bridge&quot;ç½‘ç»œåœ¨Composeæ–‡ä»¶ä¸­çš„æ¯ä¸ªæœåŠ¡ä¹‹é—´æä¾›äº†è¿žæŽ¥å’Œé€šä¿¡çš„èƒ½åŠ›ã€‚é€šè¿‡è¿™ä¸ªç½‘ç»œï¼ŒæœåŠ¡å¯ä»¥é€šè¿‡å®ƒä»¬çš„æœåŠ¡åç§°ç›¸äº’è®¿é—®ï¼Œå¹¶ä½¿ç”¨å®¹å™¨çš„IPåœ°å€è¿›è¡Œé€šä¿¡ã€‚å¦‚æžœåœ¨Composeæ–‡ä»¶ä¸­æ˜¾å¼æŒ‡å®šäº†ç½‘ç»œï¼Œé‚£ä¹ˆæœåŠ¡å°†è¿žæŽ¥åˆ°æŒ‡å®šçš„ç½‘ç»œã€‚ä¸‹é¢æ˜¯ä»¥ä¸Šç¼–æŽ’æ–‡ä»¶ä¸­ä½¿ç”¨åˆ°çš„ mysql é…ç½®æ–‡ä»¶ï¼š/opt/mysql/conf.d12345678910111213141516171819[mysql]# è®¾ç½®mysqlå®¢æˆ·ç«¯é»˜è®¤å­—ç¬¦é›†default-character-set=utf8[mysqld]# è®¾ç½®3306ç«¯å£port = 3306# è®¾ç½®mysqlçš„å®‰è£…ç›®å½•# basedir=/var/lib/mysql# è®¾ç½® mysqlæ•°æ®åº“çš„æ•°æ®çš„å­˜æ”¾ç›®å½•ï¼Œå¦‚æžœæ˜¯MySQL 8+ ä¸éœ€è¦ä»¥ä¸‹é…ç½®ï¼Œç³»ç»Ÿè‡ªå·±ç”Ÿæˆå³å¯ï¼Œå¦åˆ™æœ‰å¯èƒ½æŠ¥é”™# datadir=/var/lib/mysql/data# å…è®¸æœ€å¤§è¿žæŽ¥æ•°max_connections=20# æœåŠ¡ç«¯ä½¿ç”¨çš„å­—ç¬¦é›†é»˜è®¤ä¸º8æ¯”ç‰¹ç¼–ç çš„latin1å­—ç¬¦é›†character-set-server=utf8# åˆ›å»ºæ–°è¡¨æ—¶å°†ä½¿ç”¨çš„é»˜è®¤å­˜å‚¨å¼•æ“Ždefault-storage-engine=INNODB# æœ€å¤§è¿žæŽ¥æ•°max_connections=500Â¶5. æ“ä½œå‘½ä»¤åœ¨docker-compose.ymlæ‰€åœ¨çš„ç›®å½•æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤12345678910111213141516171819202122232425262728#æŸ¥çœ‹æ­£åœ¨è¿è¡Œçš„å®¹å™¨docker-compose ps#å¯åŠ¨å®¹å™¨ #å°è¯•è‡ªåŠ¨å®ŒæˆåŒ…æ‹¬æž„å»ºé•œåƒï¼Œï¼ˆé‡æ–°ï¼‰åˆ›å»ºæœåŠ¡ï¼Œå¯åŠ¨æœåŠ¡ï¼Œå¹¶å…³è”æœåŠ¡ç›¸å…³å®¹å™¨çš„ä¸€ç³»åˆ—æ“ä½œã€‚ç›¸å…³çš„æœåŠ¡éƒ½å°†ä¼šè¢«è‡ªåŠ¨å¯åŠ¨ï¼Œé™¤éžå·²ç»å¤„äºŽè¿è¡ŒçŠ¶æ€ã€‚ #æ³¨æ„ï¼šå¦‚æžœä¸æŒ‡å®šSERVICEï¼Œåˆ™é»˜è®¤è¿è¡Œé…ç½®æ–‡ä»¶çš„æ‰€æœ‰å®¹å™¨æœåŠ¡ #ä»¥å®ˆæŠ¤è¿›ç¨‹æ¨¡å¼è¿è¡ŒåŠ -dé€‰é¡¹ #æ·»åŠ --buildè¡¨ç¤ºå¯åŠ¨å‰æž„å»ºé•œåƒï¼ˆå¦‚æžœå·²ç»å­˜åœ¨é•œåƒåˆ™å¼ºåˆ¶é‡æ–°æž„å»ºï¼‰docker-compose up -d [SERVICE...]#æš‚åœå®¹å™¨docker-compose pause [SERVICE...]#æ¢å¤æš‚åœçš„å®¹å™¨docker-compose unpause [SERVICE...]#åœæ­¢å¹¶ç§»é™¤æ‰€æœ‰ç›¸å…³å®¹å™¨ï¼ˆæ­¤å‘½ä»¤å°†ä¼šåœæ­¢å¹¶ç§»é™¤upå‘½ä»¤æ‰€å¯åŠ¨çš„å®¹å™¨ï¼Œå¹¶ç§»é™¤ç½‘ç»œï¼Œä½†ä¸ä¼šç§»é™¤å·ï¼Œå¦‚éœ€ç§»é™¤å·ï¼Œåˆ™éœ€è¦åŠ --volumeså‚æ•°ï¼‰docker-compose down#docker-compose down --volumes#é‡å¯é¡¹ç›®ä¸­çš„æœåŠ¡ã€‚docker-compose restart [options] [SERVICE...]#æ‰§è¡Œå®¹å™¨å†…éƒ¨å‘½ä»¤docker-compose exec &lt;service_name&gt; &lt;command&gt;#æŸ¥çœ‹å®¹å™¨æ—¥å¿—docker-compose logsÂ¶åã€Docker SwarmDocker Swarm æ˜¯ Docker çš„é›†ç¾¤ç®¡ç†å·¥å…·ï¼Œæˆ–è€…è¯´æ˜¯èµ„æºç®¡ç†å·¥å…·ã€‚swarm é›†ç¾¤ç”±ç®¡ç†èŠ‚ç‚¹ï¼ˆmanagerï¼‰å’Œå·¥ä½œèŠ‚ç‚¹ï¼ˆwork nodeï¼‰æž„æˆã€‚swarm manangerï¼šè´Ÿè´£æ•´ä¸ªé›†ç¾¤çš„ç®¡ç†å·¥ä½œåŒ…æ‹¬é›†ç¾¤é…ç½®ã€æœåŠ¡ç®¡ç†ç­‰æ‰€æœ‰è·Ÿé›†ç¾¤æœ‰å…³çš„å·¥ä½œã€‚work nodeï¼šå³å›¾ä¸­çš„ available nodeï¼Œä¸»è¦è´Ÿè´£è¿è¡Œç›¸åº”çš„æœåŠ¡æ¥æ‰§è¡Œä»»åŠ¡ï¼ˆtaskï¼‰ã€‚æ³¨æ„ï¼šè·Ÿé›†ç¾¤ç®¡ç†æœ‰å…³çš„ä»»ä½•æ“ä½œï¼Œéƒ½æ˜¯åœ¨ç®¡ç†èŠ‚ç‚¹ä¸Šæ“ä½œçš„ã€‚å‡†å¤‡6å°linuxæœåŠ¡å™¨manager-1ï¼š192.168.99.101manager-2ï¼š192.168.99.102manager-3ï¼š192.168.99.103worker-1ï¼š192.168.99.201worker-2ï¼š192.168.99.202worker-3ï¼š192.168.99.203Â¶1. å…³é—­æ‰€æœ‰æœåŠ¡å™¨çš„é˜²ç«å¢™1service firewalld stopÂ¶2. åˆå§‹åŒ– swarm é›†ç¾¤è¿›è¡Œåˆå§‹åŒ–çš„è¿™å°æœºå™¨ï¼Œå°±æ˜¯é›†ç¾¤çš„ç®¡ç†èŠ‚ç‚¹ã€‚1docker swarm init --advertise-addr 192.168.68.101egï¼š12345678910[root@localhost ~]# docker swarm init --advertise-addr 192.168.68.101Swarm initialized: current node (w7xdf6see52t2t24x1ykedg5o) is now a manager.To add a worker to this swarm, run the following command: docker swarm join \ --token SWMTKN-1-04sl6nb0acbzzgvfrqycph4jtnyh0wcoix70gz44sjuaf66cwd-3xqtzzxymio3077xfki41od0e \ 192.168.68.101:2377To add a manager to this swarm, run 'docker swarm join-token manager' and follow the instructions.Â¶3. æ·»åŠ workerèŠ‚ç‚¹åœ¨managerèŠ‚ç‚¹ä¸‹ç”Ÿæˆworkerä»¤ç‰Œï¼Œä»¥è®©å…¶ä»–workeræœåŠ¡å™¨åŠ å…¥1docker swarm join-token workeregï¼š123456[root@localhost ~]# docker swarm join-token workerTo add a worker to this swarm, run the following command: docker swarm join \ --token SWMTKN-1-04sl6nb0acbzzgvfrqycph4jtnyh0wcoix70gz44sjuaf66cwd-3xqtzzxymio3077xfki41od0e \ 192.168.68.101:2377ç„¶åŽåœ¨ä¸‰å°workerèŠ‚ç‚¹è¿è¡Œï¼š123docker swarm join \ --token SWMTKN-1-04sl6nb0acbzzgvfrqycph4jtnyh0wcoix70gz44sjuaf66cwd-3xqtzzxymio3077xfki41od0e \ 192.168.68.101:2377Â¶4. æ·»åŠ managerèŠ‚ç‚¹åœ¨managerèŠ‚ç‚¹ä¸‹ç”Ÿæˆmanagerä»¤ç‰Œï¼Œä»¥è®©å…¶ä»–manageræœåŠ¡å™¨åŠ å…¥1docker swarm join-token manageregï¼š123456[root@localhost ~]# docker swarm join-token managerTo add a manager to this swarm, run the following command: docker swarm join \ --token SWMTKN-1-04sl6nb0acbzzgvfrqycph4jtnyh0wcoix70gz44sjuaf66cwd-4nbcolan6w4akrs3zsbvrkqxe \ 192.168.68.101:2377ç„¶åŽåœ¨ä¸‰å°managerèŠ‚ç‚¹è¿è¡Œå¦‚ä¸‹å‘½ä»¤ï¼š123docker swarm join \ --token SWMTKN-1-04sl6nb0acbzzgvfrqycph4jtnyh0wcoix70gz44sjuaf66cwd-4nbcolan6w4akrs3zsbvrkqxe \ 192.168.68.101:2377Â¶5. æŸ¥çœ‹æ‰€æœ‰ç®¡ç†çš„èŠ‚ç‚¹manager-1è¿è¡Œå‘½ä»¤æŸ¥çœ‹æ‰€æœ‰ç®¡ç†çš„èŠ‚ç‚¹1docker node lsegï¼š12345678[root@localhost ~]# docker node lsID HOSTNAME STATUS AVAILABILITY MANAGER STATUSdif8w8hp6pevz9k0owqkg6hjl localhost.localdomain Ready Active j9jqdioy91olyxd8dfghgm8qc localhost.localdomain Ready Active mfv24dim85bi7sd9wl589rhdf localhost.localdomain Ready Active Reachableq1qayx19ebfg7oi8dv7e3mzyh localhost.localdomain Ready Active rbeb5mykx83qpr6u8afriqx9z localhost.localdomain Ready Active Reachablew7xdf6see52t2t24x1ykedg5o * localhost.localdomain Ready Active LeaderÂ¶6. åˆ›å»ºé›†ç¾¤æœåŠ¡1docker service create -p 80:80 --name my-nginx nginxè¿™æ—¶å€™å°†ä¼šåœ¨ä»»æ„èŠ‚ç‚¹ä¸­é€‰æ‹©ä¸€å°é€šè¿‡dockeråˆ›å»ºnginxæœåŠ¡ã€‚æˆ‘ä»¬å¯ä»¥åœ¨é›†ç¾¤ä¸‹ä»»æ„ä¸€å°æœåŠ¡å™¨ï¼ˆmanageræˆ–è€…workerèŠ‚ç‚¹ï¼‰è®¿é—®nginxæœåŠ¡éƒ½èƒ½è®¿é—®åˆ°ï¼Œå› ä¸ºswarmåˆ›å»ºçš„æœåŠ¡ä½¿ç”¨çš„æ˜¯swarmé›†ç¾¤ç½‘ç»œã€‚Â¶7. æŸ¥çœ‹æœåŠ¡é›†ç¾¤æƒ…å†µ1docker service lsegï¼š123[root@localhost ~]# docker service lsID NAME MODE REPLICAS IMAGEv1hn945nmyds my-nginx replicated 1/1 nginx:latestREPLICASï¼šå‰¯æœ¬æ•°é‡Â¶8. é›†ç¾¤æœåŠ¡æ‰©å®¹å¯¹my-nginxæœåŠ¡æ‰©å®¹ä¸º5ä¸ªç¬¬ä¸€ç§æ–¹å¼ï¼š1docker service update --replicas 5 my-nginxeg:12345[root@localhost ~]# docker service update --replicas 5 my-nginxmy-nginx[root@localhost ~]# docker service lsID NAME MODE REPLICAS IMAGEv1hn945nmyds my-nginx replicated 5/5 nginx:latestç¬¬äºŒç§æ–¹å¼ï¼š1docker service scale my-nginx=512345[root@localhost ~]# docker service scale my-nginx=5my-nginx scaled to 5[root@localhost ~]# docker service lsID NAME MODE REPLICAS IMAGEv1hn945nmyds my-nginx replicated 5/5 nginx:latestupdateæ›´å¤šçš„åº”ç”¨åœºæ™¯åœ¨äºŽimageçš„å‡çº§å¯¼è‡´çš„è¿è¡Œä¸­çš„æœåŠ¡éœ€è¦æ›´æ–°ç­‰ç­‰Â¶9. åˆ é™¤é›†ç¾¤æœåŠ¡1docker service rm my-nginxè¿™æ—¶å€™æ‰€æœ‰å‰¯æœ¬éƒ½ä¼šè¢«åˆ é™¤Â¶10. ä¿®æ”¹æœåŠ¡æ¯”å¦‚ä¿®æ”¹nginxæœåŠ¡é•œåƒç‰ˆæœ¬ä¸º1.9.51$ docker service update --image nginx:1.9.5 my-nginx123456789101112[root@localhost ~]# docker service ps my-nginxID NAME IMAGE NODE DESIRED STATE CURRENT STATE ERROR PORTSkzg8qncaal9a my-nginx.1 nginx:1.9.5 localhost.localdomain Running Running about a minute ago er55pvmd8fn6 \_ my-nginx.1 nginx:latest localhost.localdomain Shutdown Shutdown about a minute ago kv3t6poxh3rb my-nginx.2 nginx:1.9.5 localhost.localdomain Running Running about a minute ago tuzkxmb0th6x \_ my-nginx.2 nginx:latest localhost.localdomain Shutdown Shutdown about a minute ago edt0tg6tg120 my-nginx.3 nginx:1.9.5 localhost.localdomain Running Running about a minute ago qfwlzj8hb3gl \_ my-nginx.3 nginx:latest localhost.localdomain Shutdown Shutdown about a minute ago bb9kjj3n81yx my-nginx.4 nginx:1.9.5 localhost.localdomain Running Running about a minute ago spx8ybz9wlph \_ my-nginx.4 nginx:latest localhost.localdomain Shutdown Shutdown about a minute ago vs4akco7zpls my-nginx.5 nginx:1.9.5 localhost.localdomain Running Running about a minute ago qtaqq0jout6k \_ my-nginx.5 nginx:latest localhost.localdomain Shutdown Shutdown about a minute agoÂ¶11. æœåŠ¡å›žæ»š1docker service update --rollbackÂ¶åä¸€ã€è¿è¡Œå¸¸ç”¨ Docker å®¹å™¨ç¤ºä¾‹æ­¥éª¤ï¼šè½¯ä»¶é•œåƒï¼ˆå®‰è£…ç¨‹åºï¼‰â€”&gt; è¿è¡Œé•œåƒ â€”&gt; äº§ç”Ÿä¸€ä¸ªå®¹å™¨ï¼ˆæ­£åœ¨è¿è¡Œçš„è½¯ä»¶ï¼‰ã€‚Â¶1. å®‰è£… nginx1234567891011121314151617181920212223242526272829303132333435#æ‹‰å–(ä¸‹è½½)é•œåƒdocker pull nginx:latest#é¦–å…ˆç®€å•è¿è¡Œä¸€ä¸ªnginxä¸´æ—¶å®¹å™¨ï¼Œç”¨äºŽå¤åˆ¶å®¹å™¨å†…éƒ¨çš„ä¸€äº›nginxç›¸å…³é‡è¦æ–‡ä»¶åˆ°å®¿ä¸»æœºdocker run -d --name nginx nginx:latest#åˆ›å»ºæ˜ å°„ç›®å½•mkdir -p /opt/nginx/&#123;conf,html,logs&#125;#å¤åˆ¶å®¹å™¨å†…éƒ¨çš„ä¸€äº›nginxç›¸å…³é‡è¦æ–‡ä»¶åˆ°æ˜ å°„ç›®å½•ä¸­(æ³¨æ„å‘½ä»¤ä¸­çš„æœ«å°¾çš„ç‚¹ï¼Œå®ƒè¡¨ç¤ºå¤åˆ¶ç›®å½•ä¸­çš„æ‰€æœ‰å†…å®¹è€Œä¸æ˜¯æ•´ä¸ªç›®å½•æœ¬èº«)docker cp nginx:/etc/nginx/. /opt/nginx/confdocker cp nginx:/usr/share/nginx/html/. /opt/nginx/htmldocker cp nginx:/var/log/nginx/. /opt/nginx/logs#åˆ é™¤nginxä¸´æ—¶å®¹å™¨docker rm -f nginx#ç”Ÿäº§çŽ¯å¢ƒä¸‹è¿è¡Œnginxå®¹å™¨#ï¼ˆ1ï¼‰ä½¿ç”¨hostç½‘ç»œæ¨¡å¼ç›´æŽ¥ä½¿ç”¨å®¿ä¸»æœºç½‘ç»œIPåœ°å€å’Œç«¯å£ï¼ˆå¯ä»¥é¿å…æ¯æ¬¡é…ç½®æ–°çš„ç›‘å¬ç«¯å£éƒ½éœ€è¦é‡æ–°docker runæ˜ å°„ç«¯å£ï¼‰#ï¼ˆ2ï¼‰é™åˆ¶å†…å­˜ä¸Šé™ä¸º200MB#ï¼ˆ3ï¼‰æŒ‡å®šæ—¶åŒºå¹¶åŒæ­¥å®¿ä¸»æœºå’Œå®¹å™¨çš„æ—¶é—´#ï¼ˆ4ï¼‰æ˜ å°„å‡ ä¸ªä¸»è¦çš„nginxç›¸å…³ç›®å½•docker run -d \--restart always \--name nginx \--net=host \-m 200m \-e TZ=Asia/Shanghai \-v /etc/localtime:/etc/localtime:ro \-v /opt/nginx/conf:/etc/nginx \-v /opt/nginx/html:/usr/share/nginx/html \-v /opt/nginx/logs:/var/log/nginx \-v /opt/cache:/opt/cache:rw \-v /opt/ssl-certs:/opt/ssl-certs:rw \nginx:latest#é˜²ç«å¢™è®¾ç½®ï¼ˆå¼€æ”¾nginxé»˜è®¤é…ç½®çš„80ç«¯å£ï¼‰firewall-cmd --permanent --add-port=80/tcpfirewall-cmd --reloadè®¿é—®åœ°å€å¦‚ï¼šhttp://192.168.60.201æç¤ºï¼šDocker å®‰è£…çš„ nginx å®¹å™¨é‡Œçš„é»˜è®¤è·¯å¾„ä¸‹çš„æ—¥å¿—æ–‡ä»¶éƒ½åªæ˜¯ç¬¦å·é“¾æŽ¥ï¼Œå¦‚ä¸‹ï¼šaccess.log -&gt; /dev/stdouterror.log -&gt; /dev/stderrè¿™æ ·åšæ˜¯æ–¹ä¾¿é€šè¿‡ docker logs nginx æŸ¥çœ‹ã€‚å¦‚éœ€ä¿®æ”¹ä¸ºçœŸå®žæ–‡ä»¶ï¼Œåªéœ€ä¿®æ”¹æ—¥å¿—è·¯å¾„æˆ–è€…æ–‡ä»¶åç§°å³å¯ï¼Œå½“ç„¶æ›´å»ºè®®é’ˆå¯¹ä¸åŒç½‘ç«™ä½¿ç”¨ä¸åŒçš„æ—¥å¿—è·¯å¾„ã€‚Â¶2. å®‰è£… tomcat123456789101112131415161718192021222324252627282930#1ã€æœç´¢é•œåƒdocker search tomcat#2ã€æ‹‰å–(ä¸‹è½½)é•œåƒ#docker pull tomcat#è¿™é‡Œä½¿ç”¨çš„æ˜¯ç½‘æ˜“é•œåƒç«™çš„ï¼Œç½‘å€ï¼šhttps://c.163yun.com/hub#/homedocker pull hub.c.163.com/library/tomcat#3ã€æ ¹æ®é•œåƒå®žä¾‹åŒ–ä¸€ä¸ªå®¹å™¨å¹¶è¿è¡Œ# é€‰é¡¹ï¼š-dï¼šè¡¨ç¤ºåŽå°è¿è¡Œï¼›-p: è¡¨ç¤ºå°†ä¸»æœºçš„ç«¯å£æ˜ å°„åˆ°å®¹å™¨çš„ä¸€ä¸ªç«¯å£ï¼Œå¦‚-p ä¸»æœºç«¯å£:å®¹å™¨å†…éƒ¨çš„ç«¯å£ã€‚# å¯åŠ¨ä¸€ä¸ªåšäº†ç«¯å£æ˜ å°„çš„tomcat,å‡è®¾è™šæ‹Ÿæœºipä¸º192.168.222.132,é‚£ä¹ˆå¯åŠ¨å®¹å™¨åŽè®¿é—®http://192.168.222.132:8080docker run -d --name mytomcat -p 8080:8080 hub.c.163.com/library/tomcat#4ã€æŸ¥çœ‹è¿è¡Œä¸­çš„å®¹å™¨docker ps#5ã€æŸ¥çœ‹å½“å‰æ‰€æœ‰å®¹å™¨docker ps -a#6ã€ åœæ­¢è¿è¡Œä¸­çš„å®¹å™¨docker stop mytomcat#7ã€å¯åŠ¨å®¹å™¨docker start mytomcat#8ã€åˆ é™¤ä¸€ä¸ªå®¹å™¨(éœ€è¦å…ˆåœæ­¢è¿è¡Œä¸­çš„å®¹å™¨)docker rm mytomcat#9ã€æŸ¥çœ‹å®¹å™¨çš„æ—¥å¿— docker logs container-nameæˆ–è€…container-iddocker logs mytomcatæ›´å¤šå‘½ä»¤å‚çœ‹https://docs.docker.com/engine/reference/commandline/docker/å¯ä»¥å‚è€ƒæ¯ä¸€ä¸ªé•œåƒçš„æ–‡æ¡£Â¶3. å®‰è£… mysql1234567#èŽ·å–é•œåƒdocker pull mysql#docker pull mysql:5.7 #æŒ‡å®šç‰ˆæœ¬ç”¨ :æ ‡ç­¾ï¼ˆç‰ˆæœ¬å·ï¼‰#è¿è¡Œå®¹å™¨docker run -d -p 3306:3306 --name mysql02 -e MYSQL_ROOT_PASSWORD=123456 mysql#docker run -d -p 3306:3306 --name mysql5_7 -e MYSQL_ROOT_PASSWORD=123456 mysql:5.7æŒ‡å®š mysql é…ç½®æ–‡ä»¶è¿è¡Œ mysql å®¹å™¨æ¡ˆä¾‹ç¤ºä¾‹ï¼š1234docker pull mysql:5.7mkdir /opt/mysql/conf -pmkdir /opt/mysql/data -pvim /opt/mysql/conf/my.cnf1234567891011121314151617181920## my.cnf[mysql]# è®¾ç½®mysqlå®¢æˆ·ç«¯é»˜è®¤å­—ç¬¦é›†default-character-set=utf8[mysqld]# è®¾ç½®3306ç«¯å£port = 3306# è®¾ç½®mysqlçš„å®‰è£…ç›®å½•# basedir=/var/lib/mysql# è®¾ç½® mysqlæ•°æ®åº“çš„æ•°æ®çš„å­˜æ”¾ç›®å½•ï¼Œå¦‚æžœæ˜¯MySQL 8+ ä¸éœ€è¦ä»¥ä¸‹é…ç½®ï¼Œç³»ç»Ÿè‡ªå·±ç”Ÿæˆå³å¯ï¼Œå¦åˆ™æœ‰å¯èƒ½æŠ¥é”™datadir=/var/lib/mysql/data# å…è®¸æœ€å¤§è¿žæŽ¥æ•°max_connections=20# æœåŠ¡ç«¯ä½¿ç”¨çš„å­—ç¬¦é›†é»˜è®¤ä¸º8æ¯”ç‰¹ç¼–ç çš„latin1å­—ç¬¦é›†character-set-server=utf8# åˆ›å»ºæ–°è¡¨æ—¶å°†ä½¿ç”¨çš„é»˜è®¤å­˜å‚¨å¼•æ“Ždefault-storage-engine=INNODB# æœ€å¤§è¿žæŽ¥æ•°max_connections=500123#è¿è¡Œmysqlå®žä¾‹docker run -d --name mysql -p 3306:3306 -v /opt/mysql/conf:/etc/mysql/conf.d -e MYSQL_ROOT_PASSWORD=123456 mysql:5.7docker run -d --name mysql -p 3306:3306 -v /opt/mysql/conf:/etc/mysql/conf.d -v /opt/mysql/data:/var/lib/mysql/data -e MYSQL_ROOT_PASSWORD=123456 mysql:5.7Â¶4. å®‰è£… rabbitmqï¼ˆ1ï¼‰èŽ·å–é•œåƒ12#è¯¥ç‰ˆæœ¬åŒ…å«äº†webæŽ§åˆ¶é¡µé¢docker pull rabbitmq:managementï¼ˆ2ï¼‰è¿è¡Œé•œåƒ12345#æ–¹å¼ä¸€ï¼šé»˜è®¤ç”¨æˆ·åå’Œå¯†ç éƒ½æ˜¯guestdocker run -d --hostname my-rabbit --name rabbit -p 15672:15672 -p 5672:5672 rabbitmq:management#æ–¹å¼äºŒï¼šè®¾ç½®ç”¨æˆ·åå’Œå¯†ç docker run -d --hostname my-rabbit --name rabbit -e RABBITMQ_DEFAULT_USER=user -e RABBITMQ_DEFAULT_PASS=password -p 15672:15672 -p 5672:5672 rabbitmq:managementï¼ˆ3ï¼‰è®¿é—®rabbitmqç®¡ç†é¡µé¢é¡µé¢ http://ip:15672Â¶5. å®‰è£… redisåˆ›å»ºredisé…ç½®æ–‡ä»¶12345678910111213141516171819mkdir -p /opt/redis/&#123;conf,data&#125;/cat &gt; /opt/redis/conf/redis.conf &lt;&lt; 'EOF'#èŠ‚ç‚¹ç«¯å£port 6379#è®¿é—®è®¤è¯å¯†ç requirepass 123456#å¦‚æžœä¸»èŠ‚ç‚¹å¼€å¯äº†è®¿é—®è®¤è¯ï¼Œä»ŽèŠ‚ç‚¹è®¿é—®ä¸»èŠ‚ç‚¹éœ€è¦è®¤è¯çš„å¯†ç masterauth 123456#æ—¥å¿—æ–‡ä»¶å’Œåºåˆ—åŒ–æ–‡ä»¶ç­‰é»˜è®¤å­˜å½“å‰ç›®å½•ï¼Œå¯ä¿®æ”¹åˆ°æŒ‡å®šç›®å½•#dir ./#ä¿æŠ¤æ¨¡å¼ï¼Œé»˜è®¤å€¼ yesï¼Œå³å¼€å¯ã€‚å¼€å¯ä¿æŠ¤æ¨¡å¼ä»¥åŽï¼Œéœ€é…ç½® bind ip æˆ–è€…è®¾ç½®è®¿é—®å¯†ç ï¼›å…³é—­ä¿æŠ¤æ¨¡å¼ï¼Œå¤–éƒ¨ç½‘ç»œå¯ä»¥ç›´æŽ¥è®¿é—®ï¼›protected-mode no#æ˜¯å¦ä»¥å®ˆæŠ¤çº¿ç¨‹çš„æ–¹å¼å¯åŠ¨ï¼ˆåŽå°å¯åŠ¨ï¼‰ï¼Œé»˜è®¤ noï¼›daemonize no#æ˜¯å¦å¼€å¯ AOF æŒä¹…åŒ–æ¨¡å¼ï¼Œé»˜è®¤ noï¼›appendonly yes#æ˜¯å¦å¼€å¯é›†ç¾¤æ¨¡å¼ï¼Œé»˜è®¤ noï¼›cluster-enabled noEOFè¯¥åŽŸå§‹æ–‡ä»¶å¯ä»Žå®˜ç½‘ä¸‹è½½bind 127.0.0.1 æ³¨é‡ŠæŽ‰è¿™éƒ¨åˆ†ï¼Œè¿™æ˜¯é™åˆ¶redisåªèƒ½æœ¬åœ°è®¿é—®protected-mode no é»˜è®¤yesï¼Œå¼€å¯ä¿æŠ¤æ¨¡å¼ï¼Œé™åˆ¶ä¸ºæœ¬åœ°è®¿é—®daemonize no#é»˜è®¤no æ”¹ä¸ºyesæ„ä¸ºä»¥å®ˆæŠ¤è¿›ç¨‹æ–¹å¼å¯åŠ¨ï¼Œå¯åŽå°è¿è¡Œï¼Œé™¤éžkillè¿›ç¨‹ï¼Œæ”¹ä¸ºyesä¼šä½¿é…ç½®æ–‡ä»¶æ–¹å¼å¯åŠ¨rediså¤±è´¥databases 16 æ•°æ®åº“ä¸ªæ•°ï¼ˆå¯é€‰ï¼‰ï¼Œæˆ‘ä¿®æ”¹äº†è¿™ä¸ªåªæ˜¯æŸ¥çœ‹æ˜¯å¦ç”Ÿæ•ˆã€‚ã€‚dir ./ è¾“å…¥æœ¬åœ° redis æ•°æ®åº“å­˜æ”¾æ–‡ä»¶å¤¹ï¼ˆå¯é€‰ï¼‰appendonly yes redisæŒä¹…åŒ–ï¼ˆå¯é€‰ï¼‰requirepass 123456 é…ç½®redisè®¿é—®å¯†ç è¿è¡Œredisé•œåƒ12345docker run -d --name redis \-v /opt/redis/conf/redis.conf:/etc/redis/redis.conf \-v /opt/redis/data:/data \-p 6379:6379 \redis:6.2.7 redis-server /etc/redis/redis.conf --appendonly yesé…ç½®é˜²ç«å¢™123firewall-cmd --permanent --add-port=6379/tcpfirewall-cmd --reloadfirewall-cmd --list-allÂ¶6. å®‰è£… zookeeper1234#-XmxæŒ‡å®šåº”ç”¨ç¨‹èƒ½å¤Ÿä½¿ç”¨çš„æœ€å¤§å†…å­˜æ•°docker run -d --name zookeeper --restart always -e JVMFLAGS="-Xmx1024m" -p 2181:2181 zookeeperdocker exec -it zookeeper /bin/bash/apache-zookeeper-3.6.2-bin/bin/zkCli.shhttps://hub.docker.com/r/wurstmeister/kafka/Â¶7. å®‰è£… kafkaæå‰å®‰è£…å¹¶å¯åŠ¨zookeeper12345678910111213141516# KAFKA_BROKER_IDï¼škafkaé›†ç¾¤èŠ‚ç‚¹idï¼ˆå”¯ä¸€ï¼‰# KAFKA_ZOOKEEPER_CONNECTï¼šzookeeperè¿žæŽ¥åœ°å€# KAFKA_ADVERTISED_LISTENERSï¼šå¹¿æ’­åœ°å€ç«¯å£ï¼Œå³å®¢æˆ·ç«¯è®¿é—®çš„å…·ä½“åœ°å€ï¼ˆä¼šæŠŠè¿™ä¸ªåœ°å€ç«¯å£æ³¨å†Œç»™zookeeperï¼Œä»¥å¤‡æ¶ˆè´¹è€…èŽ·å–ï¼‰# KAFKA_LISTENERSï¼šå¤–éƒ¨ä»£ç†åœ°å€å’Œç›‘å¬ç«¯å£(é™åˆ¶è®¿é—®ipä»¥åŠæœåŠ¡ç«¯è¿è¡Œçš„ç«¯å£)# KAFKA_LOG_RETENTION_HOURS: æ•°æ®æ–‡ä»¶ä¿ç•™æ—¶é—´(éžå¿…é€‰ã€‚ç¼ºçœ168å°æ—¶ï¼Œå³7å¤©)# KAFKA_NUM_PARTITIONSï¼štopicçš„åˆ†åŒºæ•°(éžå¿…é€‰)# KAFKA_DEFAULT_REPLICATION_FACTORï¼šåˆ†åŒºçš„å‰¯æœ¬æ•°(éžå¿…é€‰)docker run --name kafka \-p 9092:9092 \-v /opt/kafka:/kafka \-v /etc/localtime:/etc/localtime:ro \-e KAFKA_BROKER_ID=0 \-e KAFKA_ZOOKEEPER_CONNECT=39.106.195.202:2181 \-e KAFKA_ADVERTISED_LISTENERS=PLAINTEXT://39.106.195.202:9092 \-e KAFKA_LISTENERS=PLAINTEXT://0.0.0.0:9092 \-d wurstmeister/kafkaÂ¶8. å®‰è£… Linux ç³»ç»ŸÂ¶å®‰è£… centos å®¹å™¨Â¶ç®€å•ç”¨æ³•12345678#è¿è¡Œå®¹å™¨ #-d è¿™ä¸ªå‚æ•°è¡¨ç¤ºçš„æ˜¯åœ¨åŽå°è¿è¡Œï¼Œå³ â€“deamonã€‚ #-i è¡¨ç¤º interactive å¯äº¤äº’çš„ï¼Œè®©å®¹å™¨çš„æ ‡å‡†è¾“å…¥ï¼ˆstdinï¼‰ä¿æŒæ‰“å¼€ #-t è¡¨ç¤ºç»™å®¹å™¨åˆ†é…ä¸€ä¸ªä¼ªç»ˆç«¯ã€‚ #æ³¨æ„ï¼šè¿è¡Œå®¹å™¨æ—¶æ³¨æ„åŠ -itå‚æ•°ï¼Œå¦åˆ™è¿è¡Œå¤±è´¥docker run -itd --name centos7-test centos:centos7#è¿›å…¥å®¹å™¨å†…éƒ¨docker exec -it centos7-test bashÂ¶ä½¿ç”¨ ssh æœåŠ¡å¹¶æ”¯æŒç®€ä½“ä¸­æ–‡Â¶å®¹å™¨å†…éƒ¨ä¿®æ”¹çš„æ–¹å¼123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869##åˆ›å»ºå®¹å™¨#æ— æœåŠ¡åˆå§‹åŒ–æ–¹å¼ç³»ç»Ÿï¼ˆå¯ä»¥ä¸åŠ  --privilegedï¼‰ #ä¿æŒåŽå°è¿è¡Œé€šè¿‡supervisorã€runitã€dumb-initå’Œs6-overlayç­‰è§£å†³ï¼Œè€Œä¸æ˜¯ç”¨Systemddocker run -itd --name centos7-test centos:centos7 #hostç½‘ç»œæ¨¡å¼è¿è¡Œå®¹å™¨ï¼š #docker run -itd --restart always --name centos7-test --net=host centos:centos7 #bridge ç½‘ç»œæ¨¡å¼è¿è¡Œå®¹å™¨å¹¶æ˜ å°„ç«¯å£ï¼š #docker run -itd --restart always --name centos7-test -p 53371:22 -p 53372-53379:53372-53379 centos:centos7#ä½¿ç”¨ Systemd åˆå§‹åŒ–ç³»ç»Ÿæ–¹å¼ç®¡ç†æœåŠ¡ï¼ˆå¯é€‰ï¼‰ #ä½¿ç”¨ Systemd ç®¡ç†æœéœ€è¦åŒæ—¶åŠ  --privileged å’Œ /usr/sbin/initï¼Œå¦åˆ™æŠ¥é”™ï¼šFailed to get D-Bus connection: Operation not permitteddocker run --privileged -itd --name centos7-test centos:centos7 /usr/sbin/init #docker run --privileged -itd --restart always --name centos7-test -p 53371:22 -p 53372-53379:53372-53379 centos:centos7 /usr/sbin/initdocker exec -it centos7-test bash#å®‰è£…å¸¸ç”¨å‘½ä»¤yum install telnet net-tools curl wget vim -y#å®‰è£…opensshyum install openssh openssh-clients openssh-server -y#ä¿®æ”¹ sshd_config é…ç½®æ–‡ä»¶ #æ‰¾åˆ° PermitRootLogin å¹¶å°†å…¶å€¼ä¿®æ”¹ä¸º yesï¼Œè¡¨ç¤ºå…è®¸ root ç®¡ç†å‘˜ç™»å½•ç³»ç»Ÿã€‚å°† PasswordAuthentication çš„å€¼æ”¹ä¸º yes è¡¨ç¤ºä½¿ç”¨å¸å·å¯†ç æ–¹å¼ç™»å½•ç³»ç»Ÿã€‚ #æ³¨æ„ï¼šå¦‚æžœä½¿ç”¨ host ç½‘ç»œæ¨¡å¼åˆ›å»ºå®¹å™¨ï¼Œåˆ™éœ€è¦å°†å®¹å™¨ ssh ç¨‹åºçš„ç«¯å£æ”¹ä¸ºå…¶ä»–å®¿ä¸»æœºæœªè¢«å ç”¨çš„ç«¯å£ï¼Œå¦åˆ™ç«¯å£å†²çªå¯¼è‡´ ssh ç¨‹åºæ— æ³•è¿è¡Œvim /etc/ssh/sshd_config#ç»™å®¹å™¨çš„rootç”¨æˆ·è®¾ç½®å¯†ç passwd root##å¦‚æžœæ˜¯æ— æœåŠ¡æ–¹å¼åˆå§‹åŒ–ç³»ç»Ÿï¼Œåˆ™å¦‚ä¸‹æ“ä½œï¼šssh-keygen -t rsa -f /etc/ssh/ssh_host_rsa_keyssh-keygen -t ecdsa -f /etc/ssh/ssh_host_ecdsa_keyssh-keygen -t ed25519 -f /etc/ssh/ssh_host_ed25519_key/usr/sbin/sshd #æ¯æ¬¡é‡å¯å®¹å™¨æ—¶éœ€è¦æ‰‹åŠ¨æ‰§è¡Œè¿™æ¡å‘½ä»¤##å¦‚æžœæ˜¯ä½¿ç”¨ Systemd åˆå§‹åŒ–ç³»ç»Ÿæ–¹å¼ç®¡ç†æœåŠ¡ï¼ˆå¯é€‰ï¼‰ï¼Œåˆ™å¦‚ä¸‹æ“ä½œï¼š#systemctl ç›¸å…³å‘½ä»¤ï¼šsystemctl restart|stop|start|status sshd#service ç›¸å…³å‘½ä»¤ï¼šservice ssh restart|stop|start|status#å¯åŠ¨æœåŠ¡ï¼ˆé€šå¸¸å®‰è£…åŽé»˜è®¤éƒ½å·²å¯åŠ¨ï¼‰systemctl start sshd#service sshd start #å¦‚æžœå‘½ä»¤ä¸å­˜åœ¨ï¼Œå¯å®‰è£…ç›¸å…³ä¾èµ–ï¼šyum install -y initscripts#é‡å¯æœåŠ¡systemctl restart sshd#æˆ–ï¼šservice sshd restart#å¼€æœºå¯åŠ¨systemctl enable sshd#æˆ–ï¼šchkconfig sshd on#é€šè¿‡ifconfigæŸ¥çœ‹dockerå®¹å™¨çš„ipï¼Œç„¶åŽåœ¨å®¿ä¸»æœºä¸Šè¿›è¡Œsshç™»å½•ã€‚å¦‚æžœè¦åœ¨å®¿ä¸»æœºå¤–çš„å…¶ä»–æœºå™¨ç™»å½•ï¼Œåˆ™éœ€è¦docker runæ—¶æ˜ å°„ç«¯å£åˆ°å®¹å™¨çš„22ç«¯å£ï¼Œå¦‚-p 2222:22ssh root@172.18.0.3#å®‰è£…ç®€ä½“ä¸­æ–‡è¯­è¨€åŒ…å¹¶ä¿®æ”¹é…ç½®ä»¥æ”¯æŒç®€ä½“ä¸­æ–‡ï¼ˆCentOSå®˜æ–¹çš„Dockeré•œåƒé»˜è®¤ä¸æ”¯æŒç®€ä½“ä¸­æ–‡ï¼‰ #æŸ¥çœ‹ç³»ç»Ÿæ”¯æŒçš„è¯­è¨€ï¼šlocale -a #æŸ¥çœ‹å½“å‰ä½¿ç”¨çš„è¯­è¨€åŒ…ï¼šlocale #å‚è€ƒï¼šhttps://blog.51cto.com/u_8877512/2483145yum install -y kde-l10n-Chinese glibc-common#ä¿®æ”¹é…ç½®æ”¯æŒç®€ä½“ä¸­æ–‡ #åœ¨ /etc/bashrc æ–‡ä»¶æœ«å°¾é…ç½® export LC_ALL=en_US.UTF-8 #ä¸‹é¢å†™é‚£ä¹ˆå¤å¤æ‚ä¸»è¦æ˜¯é˜²æ­¢æ‰§è¡Œå¤šæ¬¡é‡å¤æ·»åŠ  #æ³¨æ„ en_US.UTF-8 åªæ˜¯æ”¯æŒè§£æžç®€ä½“ä¸­æ–‡ï¼Œè€Œå¦‚æžœå¸Œæœ›å°†ç³»ç»Ÿä¿¡æ¯éƒ½ä½¿ç”¨ç‰¹å®šåœ°åŒºçš„æ—¥æœŸã€æ—¶é—´æ ¼å¼æˆ–è´§å¸æ ¼å¼ï¼Œåˆ™å¯ä»¥å°† en_US.UTF-8 æ”¹ä¸º zh_CN.UTF-8 ï¼Œè€Œå¦‚æžœä¸éœ€è¦è¿™äº›ä¸Žåœ°åŒºç›¸å…³çš„è®¾ç½®ï¼Œé‚£ä¹ˆ en_US.UTF-8 å°±è¶³å¤Ÿäº†ã€‚ #è™½ç„¶æŒ‰é“ç†ä¹Ÿå¯ä»¥æ”¹ /etc/locale.conf é…ç½®æ–‡ä»¶å®žçŽ°ï¼Œä½†å®žæµ‹ä»…æ”¹è¿™ä¸ªæ–‡ä»¶æ— æ³•è§£å†³ ping å‘½ä»¤å«ä¸­æ–‡å­—ç¬¦çš„åŸŸåæ—¶ä¼šæŠ¥é”™çš„é—®é¢˜text_str='export LC_ALL="en_US.UTF-8"' ;\file_str='/etc/bashrc' ;\grep -v '^#' "$file_str" | grep -q "$text_str" || echo "$text_str" &gt;&gt; "$file_str"#é‡è½½é…ç½®source /etc/bashrc#é€€å‡ºå®¹å™¨å¹¶é‡æ–°è¿›å…¥å³å¯ç”Ÿæ•ˆexitdocker exec -it centos7-test bashÂ¶ç¼–å†™ Dockerfile å°è£…é•œåƒçš„æ–¹å¼å‚è€ƒï¼šhttps://blog.csdn.net/liuguangrong/article/details/82464139https://blog.csdn.net/kakaops_qing/article/details/109089858Â¶é«˜ç‰¹æƒç”¨æ³•123456#åˆ›å»ºå…·æœ‰æ›´é«˜ç‰¹æƒå®¹å™¨ #--privilegedï¼ˆæˆ– --privileged=trueï¼‰ï¼šè¡¨ç¤ºå¼€å¯ç‰¹æƒ #ä½¿ç”¨è¯¥é€‰é¡¹å’Œå‚æ•°ï¼Œå¸¦æœ‰ --privileged æ—¶ï¼Œè¿™ä¸ªå®¹å™¨å†…çš„è¿›ç¨‹å®žè´¨ä¸Šå°±åƒç›´æŽ¥è¿è¡Œåœ¨ä¸»æœºä¸Šä¸€æ ·ï¼Œå®ƒä¼šæ‹¥æ›´é«˜çš„æƒé™ï¼ŒåŒ…æ‹¬ç›´æŽ¥è®¿é—®å®¿ä¸»æœºçš„ç¡¬ä»¶ã€‚ #å¦åˆ™æ‰§è¡Œé«˜æƒé™ï¼Œå¦‚ä¿®æ”¹å†…æ ¸å‚æ•°ï¼ˆåªæ˜¯å¯ä»¥ä¿®æ”¹å†…æ ¸å‚æ•°è€Œä¸æ˜¯ä¿®æ”¹å†…æ ¸ï¼Œå¦‚æžœä¿®æ”¹å®¿ä¸»æœºçš„å†…æ ¸å‚æ•°ä¹Ÿä¼šå—åˆ°å½±å“ï¼‰ã€åˆ›å»ºæ–‡ä»¶ç³»ç»Ÿã€åˆ›å»ºåˆ†åŒºã€æŒ‚è½½åˆ†åŒºã€æ›´æ”¹ç½‘ç»œé…ç½®ç­‰æ—¶ä¼šæŠ¥é”™ï¼ˆç›¸å…³å‘½ä»¤åŒ…æ‹¬ï¼šå¦‚ï¼šsysctlã€fdiskã€mount ç­‰ï¼‰ ##æ³¨æ„åœ¨ä½¿ç”¨å®˜æ–¹çš„ centos é•œåƒåˆ›å»ºå®¹å™¨ä½¿ç”¨ --privileged æ—¶éœ€è¦åŠ åœ¨å‘½ä»¤æœ€åŽåŠ  /usr/sbin/initï¼Œè¡¨ç¤ºä½¿ç”¨ systemd ä½œä¸ºç¬¬ä¸€å¯åŠ¨ç¨‹åºï¼Œä¸åŠ ä¼šæŠ¥é”™ã€‚docker run --privileged -itd --name centos7-test centos:centos7 /usr/sbin/initÂ¶å®‰è£… ubuntu å®¹å™¨Â¶ç®€å•ç”¨æ³•1234567#è¿è¡Œå®¹å™¨ï¼ˆè¿è¡Œå®¹å™¨æ—¶æ³¨æ„åŠ -itå‚æ•°ï¼Œå¦åˆ™è¿è¡Œå¤±è´¥ï¼‰ #-d è¿™ä¸ªå‚æ•°è¡¨ç¤ºçš„æ˜¯åœ¨åŽå°è¿è¡Œï¼Œå³ â€“deamonã€‚ #-i è¡¨ç¤º interactive å¯äº¤äº’çš„ï¼Œä»¥ä¾¿å¯ä»¥ä»Žæ ‡å‡†è¾“å…¥ä¸Žå®¹å™¨äº¤äº’ã€‚ #-t è¡¨ç¤ºç»™å®¹å™¨åˆ†é…ä¸€ä¸ªè™šæ‹Ÿç»ˆç«¯ã€‚docker run -itd --name ubuntu-test ubuntu:20.04#è¿›å…¥å®¹å™¨å†…éƒ¨docker exec -it ubuntu-test bashÂ¶ä½¿ç”¨ ssh æœåŠ¡å¹¶æ”¯æŒç®€ä½“ä¸­æ–‡Â¶å®¹å™¨å†…éƒ¨ä¿®æ”¹çš„æ–¹å¼123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657#è¿è¡Œå®¹å™¨ï¼ˆè¿è¡Œå®¹å™¨æ—¶æ³¨æ„åŠ -itå‚æ•°ï¼Œå¦åˆ™è¿è¡Œå¤±è´¥ï¼‰ #-d è¿™ä¸ªå‚æ•°è¡¨ç¤ºçš„æ˜¯åœ¨åŽå°è¿è¡Œï¼Œå³ â€“deamonã€‚ #-i è¡¨ç¤º interactive å¯äº¤äº’çš„ï¼Œä»¥ä¾¿å¯ä»¥ä»Žæ ‡å‡†è¾“å…¥ä¸Žå®¹å™¨äº¤äº’ã€‚ #-t è¡¨ç¤ºç»™å®¹å™¨åˆ†é…ä¸€ä¸ªè™šæ‹Ÿç»ˆç«¯ã€‚docker run -itd --name ubuntu-test ubuntu:20.04 #docker run -itd --restart always --name ubuntu-test -p 53371:22 -p 53372-53379:53372-53379 ubuntu:20.04#è¿›å…¥å®¹å™¨å†…éƒ¨docker exec -it ubuntu-test bash#æ›´æ–°è½¯ä»¶æºï¼Œè¿™ä¸ªæ­¥éª¤ä¼˜å…ˆçº§æœ€é«˜ï¼Œå› ä¸ºä¸æ›´æ–°å¾ˆå¤šç»„ä»¶å®‰è£…ä¸äº†apt update#å®‰è£…å¸¸ç”¨å·¥å…·apt install -y telnet iputils-ping net-tools curl wget vim#å®‰è£…opensshapt install -y openssh-server#ä¿®æ”¹ sshd_config é…ç½®æ–‡ä»¶ #æ‰¾åˆ° PermitRootLogin å¹¶å°†å…¶å€¼ä¿®æ”¹ä¸º yesï¼Œè¡¨ç¤ºå…è®¸ root ç®¡ç†å‘˜ç™»å½•ç³»ç»Ÿã€‚å°† PasswordAuthentication çš„å€¼æ”¹ä¸º yes è¡¨ç¤ºä½¿ç”¨å¸å·å¯†ç æ–¹å¼ç™»å½•ç³»ç»Ÿã€‚ #æ³¨æ„ï¼šå¦‚æžœä½¿ç”¨ host ç½‘ç»œæ¨¡å¼åˆ›å»ºå®¹å™¨ï¼Œåˆ™éœ€è¦å°†å®¹å™¨ ssh ç¨‹åºçš„ç«¯å£æ”¹ä¸ºå…¶ä»–å®¿ä¸»æœºæœªè¢«å ç”¨çš„ç«¯å£ï¼Œå¦åˆ™ç«¯å£å†²çªå¯¼è‡´ ssh ç¨‹åºæ— æ³•è¿è¡Œvim /etc/ssh/sshd_config#ç»™å®¹å™¨çš„rootç”¨æˆ·è®¾ç½®å¯†ç passwd root#å¯åŠ¨ssh/usr/sbin/ssh##æœåŠ¡ç®¡ç†æ–¹å¼ï¼ˆæŒ‰é“ç†ä»¥ä¸Šæ–¹å¼åœ¨è¿™é‡Œæ— æ•ˆï¼Œä½†åœ¨Ubuntuä¸­serviceå‘½ä»¤å¯åŠ¨å’Œåœæ­¢å¯ä»¥ç®¡ç†sshè¿›ç¨‹è¿è¡Œï¼Œå…·ä½“å¯çœ‹/etc/init.d/sshè„šæœ¬é€»è¾‘ï¼‰#service ç›¸å…³å‘½ä»¤ï¼šservice ssh restart|stop|start|status#å¯åŠ¨æœåŠ¡ï¼ˆé€šå¸¸å®‰è£…åŽé»˜è®¤éƒ½å·²å¯åŠ¨ï¼‰#service ssh start#é‡å¯æœåŠ¡#service ssh restart#å¯ç”¨å¼€æœºè‡ªå¯åŠ¨#update-rc.d ssh defaults#ç¦æ­¢å¼€æœºè‡ªå¯åŠ¨ï¼ˆå¦‚éœ€ï¼‰#update-rc.d -f ssh remove#é€šè¿‡ifconfigæŸ¥çœ‹dockerå®¹å™¨çš„ipï¼Œç„¶åŽåœ¨å®¿ä¸»æœºä¸Šè¿›è¡Œsshç™»å½•ã€‚å¦‚æžœè¦åœ¨å®¿ä¸»æœºå¤–çš„å…¶ä»–æœºå™¨ç™»å½•ï¼Œåˆ™éœ€è¦docker runæ—¶æ˜ å°„ç«¯å£åˆ°å®¹å™¨çš„22ç«¯å£ï¼Œå¦‚-p 2222:22ssh root@172.18.0.3#å®‰è£…ç®€ä½“ä¸­æ–‡è¯­è¨€åŒ…å¹¶ä¿®æ”¹é…ç½®ä»¥æ”¯æŒç®€ä½“ä¸­æ–‡ï¼ˆUbuntuå®˜æ–¹çš„Dockeré•œåƒé»˜è®¤ä¸æ”¯æŒç®€ä½“ä¸­æ–‡ï¼‰ #æŸ¥çœ‹ç³»ç»Ÿæ”¯æŒçš„è¯­è¨€ï¼šlocale -a #æŸ¥çœ‹å½“å‰ä½¿ç”¨çš„è¯­è¨€åŒ…ï¼šlocaleapt install -y language-pack-zh-hans#ä¿®æ”¹é…ç½®æ”¯æŒç®€ä½“ä¸­æ–‡ #åœ¨ /etc/bash.bashrc æ–‡ä»¶æœ«å°¾é…ç½® export LC_ALL="C.UTF-8" #ä¸‹é¢å†™é‚£ä¹ˆå¤å¤æ‚ä¸»è¦æ˜¯é˜²æ­¢æ‰§è¡Œå¤šæ¬¡é‡å¤æ·»åŠ  #æ³¨æ„ C.UTF-8 åªæ˜¯æ”¯æŒè§£æžç®€ä½“ä¸­æ–‡ï¼Œè€Œå¦‚æžœå¸Œæœ›å°†ç³»ç»Ÿä¿¡æ¯éƒ½ä½¿ç”¨ç‰¹å®šåœ°åŒºçš„æ—¥æœŸã€æ—¶é—´æ ¼å¼æˆ–è´§å¸æ ¼å¼ï¼Œåˆ™å¯ä»¥å°† C.UTF-8 æ”¹ä¸º zh_CN.UTF-8 ï¼Œè€Œå¦‚æžœä¸éœ€è¦è¿™äº›ä¸Žåœ°åŒºç›¸å…³çš„è®¾ç½®ï¼Œé‚£ä¹ˆ C.UTF-8 å°±è¶³å¤Ÿäº†ã€‚text_str='export LC_ALL="C.UTF-8"' ;\file_str='/etc/bash.bashrc' ;\grep -v '^#' "$file_str" | grep -q "$text_str" || echo "$text_str" &gt;&gt; "$file_str"#é‡è½½é…ç½®source /etc/bash.bashrc#é€€å‡ºå®¹å™¨å¹¶é‡æ–°è¿›å…¥å³å¯ç”Ÿæ•ˆexitdocker exec -it ubuntu-test bashÂ¶ç¼–å†™ Dockerfile å°è£…é•œåƒçš„æ–¹å¼è¯´æ˜Žï¼šç”±äºŽå®˜æ–¹çš„ Ubuntu é•œåƒæ²¡æœ‰å†…ç½® systemd ç›¸å…³ä¾èµ–åŒ…ï¼Œæ‰€ä»¥é»˜è®¤æ— æ³•ä½¿ç”¨ systemd æ¥ç®¡ç† ssh æœåŠ¡ï¼Œä½†å¯ä»¥ä½¿ç”¨é»˜è®¤çš„ SysVinit å¯åŠ¨ï¼Œç®€å•æ¥è¯´å°±æ˜¯ä½¿ç”¨ service å‘½ä»¤æ¥ç®¡ç† ssh æœåŠ¡å™¨ï¼ˆå¦‚ï¼šservice ssh startï¼‰ã€‚å½“ç„¶å¦‚æžœéžè¦ç”¨ systemd æ¥ç®¡ç† ssh æœåŠ¡ï¼Œå®˜æ–¹çš„ Ubuntu å®˜æ–¹çš„é•œåƒæ¥åˆ›å»ºå®¹å™¨å¹¶ä½¿ä¹‹æ”¯æŒï¼Œæ“ä½œè¿‡ç¨‹ä¼šæ¯”è¾ƒéº»çƒ¦ï¼Œå¦‚ä¸‹ï¼š12345&gt;docker run -itd --name ubuntu-test ubuntu:20.04&gt;docker exec -it ubuntu-test bash&gt;apt update&gt;apt install -y systemd #å®‰è£…å¤±è´¥ï¼Œå¯ä»¥ä¿®æ”¹ apt çš„è½¯ä»¶æºä¸ºå›½å†…æºå†é‡è¯•&gt;ln -sf /lib/systemd/systemd /usr/sbin/initä½†æ­¤æ—¶å®¹å™¨å·²ç»åˆ›å»ºï¼Œæ²¡æ³•å†æŒ‡å®š /usr/sbin/init ä¸ºç¬¬ä¸€å¯åŠ¨ç¨‹åºäº†ï¼Œå½“ç„¶å¯ä»¥é€šè¿‡æäº¤å®¹å™¨ä¸ºæ–°é•œåƒçš„æ–¹å¼æ¥é‡æ–°è¿è¡Œï¼Œå¹¶åœ¨ docker run å‘½ä»¤æœ€åŽåŠ ä¸Š /usr/sbin/initï¼Œè¡¨ç¤ºä½¿ç”¨ systemd ä½œä¸ºç¬¬ä¸€å¯åŠ¨ç¨‹åºï¼Œç„¶åŽå°±èƒ½ä½¿ç”¨ systemd äº†ï¼Œä½†å¾ˆæ˜Žæ˜¾è¿™ä¸€ç³»åˆ—æ“ä½œå¤ªéº»çƒ¦ï¼Œæ‰€ä»¥ä¸æŽ¨èã€‚æ›´æŽ¨èç¼–å†™ Dockerfile å°è£…é•œåƒçš„æ–¹å¼ï¼Œå‚è€ƒï¼šhttps://github.com/robertdebock/docker-ubuntu-systemdhttps://github.com/eniocarboni/docker-ubuntu-systemdhttps://luckfu.com/post/ampere_a1_docker/ ï¼ˆæ‰‹åŠ¨å°è£…ï¼‰Â¶é«˜ç‰¹æƒç”¨æ³•12345#åˆ›å»ºå…·æœ‰æ›´é«˜ç‰¹æƒå®¹å™¨ #--privilegedï¼ˆæˆ– --privileged=trueï¼‰ï¼šè¡¨ç¤ºå¼€å¯ç‰¹æƒ #ä½¿ç”¨è¯¥é€‰é¡¹å’Œå‚æ•°ï¼Œå¸¦æœ‰ --privileged æ—¶ï¼Œè¿™ä¸ªå®¹å™¨å†…çš„è¿›ç¨‹å®žè´¨ä¸Šå°±åƒç›´æŽ¥è¿è¡Œåœ¨ä¸»æœºä¸Šä¸€æ ·ï¼Œå®ƒä¼šæ‹¥æ›´é«˜çš„æƒé™ï¼ŒåŒ…æ‹¬ç›´æŽ¥è®¿é—®å®¿ä¸»æœºçš„ç¡¬ä»¶ã€‚ #å¦åˆ™æ‰§è¡Œé«˜æƒé™ï¼Œå¦‚ä¿®æ”¹å†…æ ¸å‚æ•°ï¼ˆåªæ˜¯å¯ä»¥ä¿®æ”¹å†…æ ¸å‚æ•°è€Œä¸æ˜¯ä¿®æ”¹å†…æ ¸ï¼Œå¦‚æžœä¿®æ”¹å®¿ä¸»æœºçš„å†…æ ¸å‚æ•°ä¹Ÿä¼šå—åˆ°å½±å“ï¼‰ã€åˆ›å»ºæ–‡ä»¶ç³»ç»Ÿã€åˆ›å»ºåˆ†åŒºã€æŒ‚è½½åˆ†åŒºã€æ›´æ”¹ç½‘ç»œé…ç½®ç­‰æ—¶ä¼šæŠ¥é”™ï¼ˆç›¸å…³å‘½ä»¤åŒ…æ‹¬ï¼šå¦‚ï¼šsysctlã€fdiskã€mount ç­‰ï¼‰docker run --privileged -itd --name ubuntu-test ubuntu:20.04Â¶æ›´å¤š Linux ç³»ç»Ÿå‚è€ƒhttps://virt.spiritlhl.net/guide/docker/docker_build.html ï¼ˆä¸€é”®è„šæœ¬å¼€è®¾å« Systemd å’Œ SSH æœåŠ¡çš„ Linux ç³»ç»Ÿï¼Œæ”¯æŒ alpineã€debianã€ubuntuã€almalinuxï¼‰Â¶åäºŒã€é—®é¢˜æŽ’é”™(1)å‡ºçŽ° Error response from daemon: oci runtime error: container_linux.go:247: start.... æŠ¥é”™æç¤ºã€‚åŽŸå› æ˜¯ç³»ç»Ÿå’Œdockerç‰ˆæœ¬ä¸å…¼å®¹ã€‚è§£å†³åŠžæ³•ï¼šæ‰§è¡Œyum update(2)rying to pull repository docker.io/library/mysql ... Get https://registry-1.ã€‚è§£å†³åŠžæ³•ï¼šæ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š1234$ yum install bind-utils #å®‰è£…digå·¥å…·$ dig @114.114.114.114 registry-1.docker.io$ vi /etc/hosts52.54.155.177 registry-1.docker.io(3)[root@izuf6dskn3b7v2sly08bqtz ~]# docker pull mysql Using default tag: latest Trying to pull repository docker.io/library/mysql ... Get https://registry-1.docker.io/v2/: x509: certificate is valid for *.theranest.com, theranest.com, not registry-1.docker.ioè§£å†³åŠžæ³•ï¼šé•œåƒåŠ é€Ÿè§£å†³(3)æ‰§è¡Œdocker-compose up -dåŽå‡ºçŽ°é”™è¯¯ï¼šERROR: Failed to Setup IP tables: Unable to enable SKIP DNAT rule: (iptables failed: iptables --wait -t nat -I DOCKER -i br-950144d461c2 -j RETURN: iptables: No chain/target/match by that name. (exit status 1))è§£å†³åŠžæ³•ï¼šé‡å¯dockerè¯•è¯•12systemctl stop dockersystemctl start dockerï¼ˆ4ï¼‰service network restart é‡å¯ç½‘ç»œåŽå¯¼è‡´ docker å®¹å™¨ç«¯å£æ— æ³•è®¿é—®è§£å†³åŠžæ³•ï¼šé‡å¯ Docker æœåŠ¡å¹¶é‡å¯å®¹å™¨12systemctl restart dockerdocker restart å®¹å™¨åç§°/å®¹å™¨idÂ¶åä¸‰ã€å‚è€ƒðŸ“šã€ŠDocker â€” ä»Žå…¥é—¨åˆ°å®žè·µã€‹]]></content>
      <categories>
        <category>devops</category>
      </categories>
      <tags>
        <tag>devops</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ä¸€ä¸ªpythonç¼–å†™çš„ç™¾åº¦ç½‘ç›˜å‘½ä»¤è¡Œå®¢æˆ·ç«¯]]></title>
    <url>%2Ftools%2Fbypy.html</url>
    <content type="text"><![CDATA[è¯¥å‘½ä»¤ä¸»è¦æ˜¯åœ¨Linuxä¸‹ä½¿ç”¨ï¼Œè¿™æ ·å¾ˆå¤§çš„ä¸€ä¸ªå¥½å¤„æ˜¯å¯ä»¥åˆ©ç”¨åˆ°ç™¾åº¦äº‘ç›˜çš„å¤§å®¹é‡å­˜å‚¨ç©ºé—´ï¼›ä½ å¯ä»¥åœ¨ä»»ä½•æœåŠ¡å™¨ä¸Šï¼Œåˆ©ç”¨è‡ªåŠ¨åŒ–è„šæœ¬å®žçŽ°ä¸€äº›æ•°æ®æ–‡ä»¶ã€æ—¥å¿—æ–‡ä»¶ç­‰ç­‰å¤‡ä»½æ“ä½œï¼ŒåŒæ—¶ä¹Ÿæä¾›ä¸°å¯Œçš„æ–‡ä»¶åˆ—è¡¨ã€ä¸Šä¼ ã€ä¸‹è½½ã€å¯¹æ¯”ã€åŒæ­¥ä»¥åŠæ‰¹é‡æ“ä½œç­‰ã€‚Â¶1. å®‰è£…1sudo pip install bypyÂ¶2. ç™¾åº¦æŽˆæƒé¦–æ¬¡å®‰è£…ä¹‹åŽï¼Œéœ€è¦è¿›è¡ŒæŽˆæƒï¼Œåªéœ€è¦è¿è¡Œä»»ä½•ä¸€ä¸ªå‘½ä»¤éƒ½å¯ä»¥ï¼Œä¾‹å¦‚bypy infoï¼Œç„¶åŽæ ¹æ®æç¤ºæ‰“å¼€ç½‘é¡µç™»å½•ä½ çš„ç™¾åº¦ç½‘ç›˜è´¦å·å¹¶å–å¾—æŽˆæƒç ã€‚12345678910111213141516qcmoke@DESKTOP-LUQTQE6:~$ bypy infoPlease visit:#æ‰“å¼€è¿™ä¸ªå¦‚ä¸‹çš„ç½‘å€https://openapi.baidu.com/oauth/2.0/authorize?scope=basic+netdisk&amp;redirect_uri=oob&amp;response_type=code&amp;client_id=q8WE4Ep*******NBnAnd authorize this appPaste the Authorization Code here within 10 minutes.Press [Enter] when you are done#è¾“å…¥å¦‚ä¸‹æŽˆæƒç å¹¶å›žè½¦87559e********8d6ed22Authorizing, please be patient, it may take upto 300 seconds...Authorizing/refreshing with the OpenShift server ...OpenShift server failed, authorizing/refreshing with the Heroku server ...Heroku server failed, authorizing/refreshing with the Heroku1 server ...Successfully authorizedQuota: 2.020TBUsed: 1.124TBðŸ’â€â™‚å¦‚æžœéœ€è¦æ³¨é”€æŽˆæƒï¼Œå¯ä»¥åˆ é™¤æŽ‰ç›®å½•~/ .bypy/å³å¯ã€‚Â¶3. åŸºæœ¬ä½¿ç”¨12345678910111213141516171819[root@izwz93gbbvcxl07uju1onwz ~]# mkdir baiduyun[root@izwz93gbbvcxl07uju1onwz ~]# cd baiduyun/[root@izwz93gbbvcxl07uju1onwz baiduyun]# touch hello.txt#ä¸Šä¼ å½“å‰ç›®å½•çš„hello.txtåˆ°ç™¾åº¦ç½‘ç›˜é‡Œ"æˆ‘çš„åº”ç”¨æ•°æ®(apps)/bypy/file/"ä¸‹[root@izwz93gbbvcxl07uju1onwz baiduyun]# bypy upload ./hello.txt /file/#æŸ¥çœ‹ç™¾åº¦ç½‘ç›˜é‡Œ"æˆ‘çš„åº”ç”¨æ•°æ®(apps)/bypy/"ä¸‹çš„æ–‡ä»¶æˆ–è€…ç›®å½•root@DESKTOP-LUQTQE6:~/baiduPan# bypy ls/apps/bypy ($t $f $s $m $d):D file 0 2020-04-20, 16:10:53#æŸ¥çœ‹ç™¾åº¦ç½‘ç›˜é‡Œ"æˆ‘çš„åº”ç”¨æ•°æ®(apps)/bypy/file/"ä¸‹çš„æ–‡ä»¶æˆ–è€…ç›®å½•root@DESKTOP-LUQTQE6:~/baiduPan# bypy ls /file/apps/bypy/file ($t $f $s $m $d):F hello.txt 0 2020-04-20, 16:10:53 8e23f7635tb64136eddb0719602bc477#å°†ç™¾åº¦ç½‘ç›˜é‡Œ"æˆ‘çš„åº”ç”¨æ•°æ®(apps)/bypy/file/hello.txt"ä¸‹è½½åˆ°ç”¨æˆ·ä¸»ç›®å½•é‡Œroot@DESKTOP-LUQTQE6:~/baiduPan# bypy download /file/hello.txt ~[====================] 100% (0.0B/0.0B) root@DESKTOP-LUQTQE6:~/baiduPan#root@DESKTOP-LUQTQE6:~/baiduPan# ls ~baiduPan hello.txtðŸ’â€â™‚ æç¤ºï¼šåœ¨äº‘ç›˜é‡Œé¢å‡ºçŽ°ä¸€ä¸ªæˆ‘çš„åº”ç”¨æ•°æ®è¿™é‡Œé¢æœ‰ä¸€ä¸ªbypyçš„æ–‡ä»¶å¤¹.è¿™ä¸ªå°±æ˜¯ä½ çš„å·¥å…·çš„æ ¹ç›®å½•,ä½ è¦ä¸Šä¼ ä¸‹è½½çš„æ–‡ä»¶éƒ½åœ¨è¿™é‡Œé¢è€Œä¸æ˜¯å…¶ä»–çš„åœ°æ–¹ã€‚ðŸ“‘ å…¶ä»–å‘½ä»¤ï¼šæ›´è¯¦ç»†çš„äº†è§£æŸä¸€ä¸ªå‘½ä»¤ï¼šbypy helpæ˜¾ç¤ºåœ¨äº‘ç›˜ï¼ˆç¨‹åºçš„ï¼‰æ ¹ç›®å½•ä¸‹æ–‡ä»¶åˆ—è¡¨ï¼šbypy listæŠŠå½“å‰ç›®å½•åŒæ­¥åˆ°äº‘ç›˜ï¼šbypy syncup æˆ–è€…bypy uploadæŠŠäº‘ç›˜å†…å®¹åŒæ­¥åˆ°æœ¬åœ°æ¥ï¼šbypy syncdown --downloader aria2æˆ–è€…bypy downdir / --downloader aria2è¿™ä¸ªå‘½ä»¤ä¸å¥½ç”¨,è¦åœ¨åŽé¢åŠ  â€“downloader aria2,è¦ä¸æ²¡æœ‰é€Ÿåº¦æ¯”è¾ƒæœ¬åœ°å½“å‰ç›®å½•å’Œäº‘ç›˜ï¼ˆç¨‹åºçš„ï¼‰æ ¹ç›®å½•ï¼ˆä¸ªäººè®¤ä¸ºéžå¸¸æœ‰ç”¨ï¼‰ï¼šbypy compareä¸‹è½½æ–‡ä»¶ bypy downfile ä¸‹è½½æ–‡ä»¶åä¸Šä¼ æ–‡ä»¶ bypy upload æ–‡ä»¶ååœ¨è¿œç«¯åˆ›å»ºæ–‡ä»¶å¤¹tmp bypy mkdir tmp/bypyè¿è¡Œæ—¶æ·»åŠ \ -v\ å‚æ•°ï¼Œä¼šæ˜¾ç¤ºè¿›åº¦è¯¦æƒ…ã€‚è¿è¡Œæ—¶æ·»åŠ \ -d\ ï¼Œä¼šæ˜¾ç¤ºä¸€äº›è°ƒè¯•ä¿¡æ¯ã€‚è¿è¡Œæ—¶æ·»åŠ \ -ddd\ ï¼Œè¿˜ä¼šä¼šæ˜¾ç¤ºHTTPé€šè®¯ä¿¡æ¯ï¼ˆ\ è­¦å‘Šï¼šéžå¸¸å¤š\ ï¼‰bypy upload localfile cloudfile bypy upload ./123.txt /cloud.å°†æœ¬åœ°123.txtæ–‡ä»¶ä¸Šä¼ åˆ°äº‘ç›˜æˆ‘çš„åº”ç”¨ç¨‹åº(apps) /bypy/cloud æ–‡ä»¶å¤¹å†….ä¹Ÿå¯ä¸Šä¼ æ•´ä¸ªæ–‡ä»¶å¤¹ï¼Œå‘½ä»¤ç¤ºä¾‹å¦‚ä¸‹ï¼šbypy upload /123 /cloud.å°†æœ¬åœ°123æ–‡ä»¶å¤¹å†…æ‰€æœ‰æ–‡ä»¶ä¸Šä¼ åˆ°äº‘ç›˜ apps/bypy/cloud æ–‡ä»¶å¤¹å†….Â¶4. å¸¸è§é—®é¢˜123456789101112[root@izwz93gbbvcxl07uju1onwz ~]# bypy info/usr/lib/python2.7/site-packages/requests/__init__.py:91: RequestsDependencyWarning: urllib3 (1.25.9) or chardet (2.2.1) doesn't match a supported version! RequestsDependencyWarning)Quota: 2.020TBUsed: 1.117TB#è§£å†³æ–¹æ¡ˆï¼Œåˆ¶è£urllib3 å’Œchardetsudo pip uninstall urllib3sudo pip uninstall chardet#ç„¶åŽï¼Œå†å¸è½½ä»Žæ–°å®‰è£…requestssudo pip uninstall requestssudo pip install requests]]></content>
      <categories>
        <category>tools</category>
      </categories>
      <tags>
        <tag>bypy</tag>
        <tag>cloud</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[nodeç‰ˆæœ¬ç®¡ç†å·¥å…·nvm]]></title>
    <url>%2Ftools%2Fnvm.html</url>
    <content type="text"><![CDATA[Â¶1. èƒŒæ™¯å¯èƒ½ç”±äºŽå¤šä¸ªå¼€å‘é¡¹ç›®éœ€è¦çš„nodejsç‰ˆæœ¬ä¸ä¸€æ ·ï¼Œä»¥è‡³äºŽéœ€è¦é¢‘ç¹çš„åˆ‡æ¢ç‰ˆæœ¬ï¼Œä¸ºäº†æ–¹ä¾¿å¿«æ·çš„åˆ‡æ¢ç‰ˆæœ¬ï¼Œä½¿ç”¨nvmè¿›è¡Œç‰ˆæœ¬ç®¡ç†å°¤ä¸ºé‡è¦ã€‚ä¸‹é¢å°±æ¥ä»‹ç»Windows10å®‰è£…å’Œé…ç½®nvmçš„å…¨è¿‡ç¨‹ã€‚Â¶2. ä¸‹è½½å®˜æ–¹ä¸‹è½½åœ°å€ï¼šnvm downloadnvm-noinstall.zipï¼š ç»¿è‰²å…å®‰è£…ç‰ˆæœ¬ï¼Œä½†æ˜¯ä½¿ç”¨ä¹‹å‰éœ€è¦é…ç½®nvm-setup.zipï¼šå®‰è£…åŒ…ï¼Œä¸‹è½½ä¹‹åŽç‚¹å‡»å®‰è£…ï¼Œæ— éœ€é…ç½®å°±å¯ä»¥ä½¿ç”¨ï¼Œæ–¹ä¾¿ã€‚Source code(zip)ï¼šzipåŽ‹ç¼©çš„æºç Sourc code(tar.gz)ï¼štar.gzçš„æºç ï¼Œä¸€èˆ¬ç”¨äºŽ linux ç³»ç»Ÿæˆ‘åœ¨è¿™é‡Œä¸‹è½½çš„ç‰ˆæœ¬æ˜¯1.1.7ï¼Œå®‰è£…åŒ…æ ¼å¼æ˜¯nvm-noinstall.zipÂ¶3. å®‰è£…ï¼ˆ1ï¼‰å®‰è£…å‰æŠŠåŽŸæœ‰nodeå¸è½½å¹²å‡€ã€‚ï¼ˆ2ï¼‰è¿˜è¦åˆ é™¤æŽ‰é»˜è®¤çš„ä¾èµ–åŒ…ç›®å½•å’Œç¼“å­˜ç›®å½•ã€‚C:\Users\ç”¨æˆ·å\AppData\Roaming\npmC:\Users\ç”¨æˆ·å\AppData\Roaming\npm-cacheï¼ˆ3ï¼‰æ­¤å¤–åŽŸæ¥çš„nodeçŽ¯å¢ƒå˜é‡ä¹Ÿè¦åˆ é™¤æŽ‰ã€‚è§£åŽ‹zipåŒ…åˆ°D:\Development\node\nvm-noinstallç›®å½•é‡Œã€‚è§åˆ°å¦‚å›¾æç¤ºè¾“å…¥åŽ‹ç¼©åŒ…è§£åŽ‹çš„ç»å¯¹è·¯å¾„ã€‚æ³¨æ„è·¯å¾„ä¸æ”¯æŒç©ºæ ¼ï¼Œä¸èƒ½è®¾ä¸ºç±»ä¼¼C:\Program Filesè¿™ç§ï¼Œå¦åˆ™nodeå¯èƒ½æ— æ³•ä½¿ç”¨ã€‚åœ¨D:\Development\node\nvm-noinstallç›®å½•é‡Œåˆ›å»ºæ–‡ä»¶settings.txtã€‚å…¶å†…å®¹ä¸ºå¦‚ä¸‹ï¼š123456root: D:\Development\node\nvm-noinstallpath: D:\Development\node\nodejsarch: 64proxy: nonenode_mirror: http://npm.taobao.org/mirrors/node/npm_mirror: https://npm.taobao.org/mirrors/npm/rootï¼šè¡¨ç¤ºå®‰è£…nodeæ˜¯å­˜å‚¨çš„è·¯å¾„ã€‚é»˜è®¤å°±æ˜¯nvmçš„å®‰è£…è·¯å¾„ã€‚pathï¼šè¡¨ç¤ºå½“å‰ä½¿ç”¨çš„nodeç‰ˆæœ¬ç›®å½•ï¼Œä¼šæ ¹æ®nvmç‰ˆæœ¬é€‰æ‹©çš„å˜åŒ–ï¼Œpathçš„å†…å®¹ä¹Ÿä¼šå˜åŒ–ã€‚äº‹å®žpathå°±æ˜¯ä¸€ä¸ªå¿«æ·é“¾æŽ¥ï¼ŒæŒ‡å‘äº†rootç›®å½•ä¸­çš„æŒ‡å®šç‰ˆæœ¬ã€‚archï¼šç³»ç»Ÿæž¶æž„ç‰ˆæœ¬è®¾ç½®ä¸º64ä½ã€‚proxyï¼šä¸ä½¿ç”¨ä»£ç†ã€‚node_mirrorå’Œnpm_mirroræ‰€æœ‰ç‰ˆæœ¬éƒ½ä½¿ç”¨æ·˜å®é•œåƒã€‚Â¶4. é…ç½®çŽ¯å¢ƒå˜é‡é…ç½®ä¸€ä¸‹çŽ¯å¢ƒå˜é‡åˆ°ç³»ç»Ÿä¸­ã€‚NVM_HOMEï¼šD:\Development\node\nvm-noinstallNVM_SYMLINKï¼šD:\Development\node\nodejsPATHï¼š%NVM_HOME% å’Œ %NVM_SYMLINK% (åœ¨PATHçš„æœ€åŽæ·»åŠ )Â¶5. å®‰è£…ä½¿ç”¨æŒ‡å®šç‰ˆæœ¬ node12nvm install 12.14.1nvm use 12.14.1 #è¿™ä¸€æ­¥ä¸€å®šè¦ç®¡ç†å‘˜èº«ä»½æ‰§è¡Œï¼Œè¦ä¸ç„¶æŠ¥é”™ï¼šexit status 1: â€œä¹±ç â€Â¶6. npmå…¨å±€ä¾èµ–ç›®å½•é…ç½®123#é…ç½®ç”¨npmä¸‹è½½å…¨å±€åŒ…æ—¶å…¨å±€ä¾èµ–åŒ…å®‰è£…å’Œç¼“å­˜çš„è·¯å¾„npm config set prefix "E:\Cache\node\node_global"npm config set cache "E:\Cache\node\node_cache"æç¤ºï¼šæ·»åŠ  E:\Cache\node\node_global åˆ° PATH ç³»ç»ŸçŽ¯å¢ƒå˜é‡ä¸­ï¼Œå¦åˆ™ npm å…¨å±€å®‰è£…çš„å‘½ä»¤ä¼šæ‰¾ä¸åˆ°ã€‚è®¾ç½®åŽæ‰€æœ‰ç‰ˆæœ¬çš„ nodejs å°±éƒ½å…±ç”¨ç›¸åŒçš„å…¨å±€ä¾èµ–åŒ…å®‰è£…å’Œç¼“å­˜çš„è·¯å¾„äº†ã€‚12#æŸ¥çœ‹æ˜¯å¦ä¿®æ”¹å®Œæˆnpm config getÂ¶7. nvmå¸¸ç”¨å‘½ä»¤123456789101112131415161718192021222324252627282930#æ˜¾ç¤ºå¯ä¸‹è½½ç‰ˆæœ¬çš„éƒ¨åˆ†åˆ—è¡¨nvm list available#åˆ—å‡ºæ‰€æœ‰å®‰è£…çš„ç‰ˆæœ¬nvm ls#å®‰è£…æŒ‡å®šç‰ˆæœ¬nvm install &lt;version&gt;#å®‰è£…æœ€æ–°ç‰ˆæœ¬nvm install latest#å¸è½½åˆ é™¤å·²å®‰è£…çš„æŒ‡å®šç‰ˆæœ¬ï¼Œè¯­æ³•ä¸Žinstallç±»ä¼¼nvm uninstall &lt;version&gt;#åˆ‡æ¢ä½¿ç”¨æŒ‡å®šçš„ç‰ˆæœ¬nodenvm use &lt;version&gt;#åˆ‡æ¢åˆ¶å®šçš„nodeç‰ˆæœ¬å’Œä½æ•°nvm use [version] [arch]#æ˜¾ç¤ºå½“å‰nvmçš„ç‰ˆæœ¬nvm version#ç»™ä¸åŒçš„ç‰ˆæœ¬å·æ·»åŠ åˆ«ånvm alias &lt;name&gt; &lt;version&gt;#åˆ é™¤å·²å®šä¹‰çš„åˆ«ånvm unalias &lt;name&gt;#åœ¨å½“å‰ç‰ˆæœ¬nodeçŽ¯å¢ƒä¸‹ï¼Œé‡æ–°å…¨å±€å®‰è£…æŒ‡å®šç‰ˆæœ¬å·çš„npmåŒ…nvm reinstall-packages &lt;version&gt;#æ˜¾ç¤ºnodeæ˜¯è¿è¡Œåœ¨32ä½è¿˜æ˜¯64ä½æ¨¡å¼ã€‚æŒ‡å®š32æˆ–64æ¥è¦†ç›–é»˜è®¤ä½“ç³»ç»“æž„nvm arch [32|64]#å¯ç”¨node.jsç‰ˆæœ¬ç®¡ç†ã€‚nvm on#ç¦ç”¨node.jsç‰ˆæœ¬ç®¡ç†(ä¸å¸è½½ä»»ä½•ä¸œè¥¿)nvm off#è®¾ç½®å’ŒæŸ¥çœ‹rootè·¯å¾„nvm root [path]Â¶8. Linuxå®‰è£…nvm1234curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.39.3/install.sh | bashsource ~/.bashrcnvm install 12.14.1]]></content>
      <categories>
        <category>tools</category>
      </categories>
      <tags>
        <tag>nvm</tag>
        <tag>nodejs</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å…³äºŽä»£ç†æŠ€æœ¯çš„ç†è§£]]></title>
    <url>%2Ftools%2Fproxy_study.html</url>
    <content type="text"><![CDATA[æ­£å‘ä»£ç†ï¼šå‡è®¾Aæ˜¯å®¢æˆ·ç«¯ï¼ˆè®¿é—®èµ„æºçš„è¯·æ±‚æ–¹ï¼Œå¤„äºŽå†…ç½‘ä¸­ï¼‰ï¼Œè¿™é‡Œä»¥Aæ‰€åœ¨çš„ç½‘ç»œä¸ºå†…ç½‘åšä¸ºå‚ç…§ï¼ŒBæ˜¯ä»£ç†æœåŠ¡å™¨ï¼ˆæ•°æ®è½¬å‘çš„ä¸­é—´è€…ï¼Œæ—¢å¤„äºŽå†…ç½‘åˆå¤„äºŽå¤–ç½‘ï¼‰ï¼ŒCæ˜¯webæœåŠ¡å™¨ï¼ˆæŽ¥æ”¶è¯·æ±‚çš„æœåŠ¡æ–¹ï¼Œå¯¹äºŽAæ¥è¯´å¤„äºŽå¤–ç½‘ä¸­ï¼‰ã€‚ç”±äºŽå„ç§ç½‘ç»œåŽŸå› Aæ— æ³•è®¿é—®Cï¼ˆå¯ä»¥ç†è§£Aå¤„äºŽå†…ç½‘ä¸­ï¼ŒAä¸ŽCä¸åœ¨ä¸€ä¸ªç½‘ç»œä¸­ï¼Œæ•…æ— æ³•è®¿é—®ï¼‰ï¼Œä½†Aèƒ½å¤Ÿè®¿é—®Bï¼ˆAå’ŒBå¤„äºŽä¸€ä¸ªå†…ç½‘ä¸­ï¼‰ï¼ŒBèƒ½å¤Ÿè®¿é—®Cï¼ˆBå’ŒCéƒ½å¤„äºŽä¸€ä¸ªå¤–ç½‘ä¸­ï¼‰ï¼Œé‚£ä¹ˆAå°±å¯ä»¥é€šè¿‡Båšä¸€ä¸ªæ¡¥æ¢åŽ»è®¿é—®Cï¼Œå³AåŽ»è®¿é—®Bï¼ŒBå†åŽ»è®¿é—®Cã€‚Båœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­å°±è´Ÿè´£è½¬å‘Aå’ŒCä¹‹é—´çš„æ•°æ®åŒ…ã€‚å½“Cæ”¶åˆ°Bçš„è¯·æ±‚åŽï¼Œå°†æ•°æ®å‘é€å›žç»™Bï¼ŒBå†è½¬å‘æ•°æ®ç»™Aï¼ŒAæœ€ç»ˆå°±èƒ½å¾—åˆ°äº†æƒ³è¦çš„æ•°æ®ã€‚æ•°æ®ä¼ è¾“çš„è¿‡ç¨‹å›¾ï¼šAâ€”&gt;Bâ€”&gt;C----&gt;B-----&gt;Aç‰¹ç‚¹ï¼šAå‘Cè®¿é—®æ•°æ®æ—¶ï¼Œå¯¹äºŽç”¨æˆ·æ¥è¯´Bæ˜¯ä¸å¯è§çš„ã€‚æ¯”å¦‚å›½å†…çš„æŸä¸ªç”¨æˆ·æƒ³è¦è®¿é—®googleæœç´¢é¡µé¢ï¼Œä½†ç”±äºŽä½ æ‡‚å¾—çš„åŽŸå› æ˜¯è®¿é—®ä¸äº†çš„ã€‚æ‰€ä»¥ä»–å¤§èƒ†åœ°é…ç½®äº†ä¸€å°ä»£ç†æœåŠ¡å™¨ï¼Œåœ¨ä»£ç†æœåŠ¡å™¨ä¸Šå®‰è£…äº†ä»£ç†æœåŠ¡è½¯ä»¶ï¼Œå¹¶ä¸”åœ¨è‡ªå·±çš„æœ¬æœºä¸Šå®‰è£…äº†ä»£ç†å®¢æˆ·è½¯ä»¶ï¼Œé‚£ä¹ˆä»–å°±å¯ä»¥ç›´æŽ¥åœ¨æµè§ˆå™¨è¾“å…¥https://www.google.comæ¥è®¿é—®googleæœç´¢é¡µé¢äº†ï¼Œæ³¨æ„ï¼Œè™½ç„¶ä»–å‘google webæœåŠ¡å™¨çš„è¯·æ±‚å¯¹äºŽæœºå™¨æ¥è¯´é¦–å…ˆæ˜¯å‘é€åˆ°ä»£ç†æœåŠ¡å™¨çš„ï¼Œä½†æ˜¯ä»–å¹¶ä¸æ˜¯è¾“å…¥ä»£ç†æœåŠ¡å™¨çš„åŸŸåæˆ–è€…ipè·¯å¾„ã€‚æ‰€ä»¥è¯´ä»£ç†æœåŠ¡å™¨å¯¹äºŽç”¨æˆ·æ¯æ¬¡è®¿é—®å¤–ç½‘èµ„æºæ¥è¯´æ˜¯é€æ˜Žä¸å¯è§çš„ã€‚ä»Žè¿™ä¸ªä¾‹å­å¯çœ‹å‡ºç”¨æˆ·è®¿é—®å¤–ç½‘çš„æœåŠ¡å™¨èµ„æºæ˜¯çœ‹ä¼¼ç›´æŽ¥æ­£å‘åœ°è®¿é—®çš„ï¼Œå³å¯¹ç”¨æˆ·æ¥è¯´è®¿é—®å¤–ç½‘æœåŠ¡å™¨èµ„æºæ˜¯æ­£å‘ä»£ç†çš„è®¿é—®è¿‡ç¨‹ã€‚åå‘ä»£ç†ï¼šä¸Žæ­£å‘ä»£ç†çš„åŽŸç†ä¹Ÿæ˜¯å¾ˆç±»ä¼¼çš„ã€‚è¿™é‡Œä»ç„¶ä»¥Aæ‰€åœ¨çš„ç½‘ç»œä¸ºå†…ç½‘åšä¸ºå‚ç…§ï¼Œå³å„ä¸ªä¸»æœºå¤„äºŽå†…ç½‘å’Œå¤–ç½‘çš„æ¦‚å¿µæ²¡æœ‰æ”¹å˜ï¼Œå³ï¼šA ä»ç„¶å¤„äºŽå†…ç½‘ä¸­ï¼ŒAå’ŒBå¤„äºŽä¸€ä¸ªå†…ç½‘ï¼ŒBåˆå’ŒCå¤„äºŽä¸€ä¸ªå¤–ç½‘ã€‚ä½†æ­¤æ—¶ä¸»æœº(è®¡ç®—æœº)è§’è‰²å˜äº†ï¼Œå³ï¼šAæ˜¯webæœåŠ¡å™¨ï¼ˆæŽ¥æ”¶è¯·æ±‚çš„æœåŠ¡æ–¹ï¼Œå¤„äºŽå†…ç½‘ä¸­ï¼‰ï¼ŒBæ˜¯ä»£ç†æœåŠ¡å™¨ï¼ˆæ•°æ®è½¬å‘çš„ä¸­é—´è€…ï¼Œå³å¤„äºŽå†…ç½‘åˆå¤„äºŽå¤–ç½‘ï¼Œè§’è‰²æ²¡æœ‰å˜ï¼‰ï¼ŒCæ˜¯å®¢æˆ·ç«¯ï¼ˆè®¿é—®èµ„æºçš„è¯·æ±‚æ–¹ï¼Œå¤„äºŽå¤–ç½‘ä¸­ï¼‰ã€‚çŽ°åœ¨å˜æˆäº†CåŽ»è®¿é—®Aï¼Œç”±äºŽAå¤„äºŽè‡ªå·±æ‰€åœ¨çš„å†…ç½‘ä¸­ï¼Œæ•…Cåœ¨å¤–ç½‘ä¸­æ— æ³•è®¿é—®ï¼ˆæ‰¾åˆ°ï¼‰Aï¼ˆCå’ŒAä¸åœ¨ä¸€ä¸ªç½‘ç»œä¸­ï¼Œæ•…æ— æ³•è®¿é—®ï¼‰ï¼Œä½†Cèƒ½è®¿é—®Bï¼ˆCå’ŒBéƒ½å¤„äºŽä¸€ä¸ªå¤–ç½‘ä¸­ï¼‰ï¼ŒBèƒ½è®¿é—®Aï¼ˆBå’ŒCéƒ½å¤„äºŽä¸€ä¸ªå¤–ç½‘ä¸­ï¼‰ï¼Œæ•…Cå¯ä»¥è®¿é—®Bï¼ŒBå†åŽ»è®¿é—®Aï¼ŒAæ”¶åˆ°è¯·æ±‚åŽå°†æ•°æ®å‘é€ç»™Bï¼ŒBå†å°†æ•°æ®è½¬å‘ç»™Cï¼ŒCæœ€ç»ˆèŽ·å¾—äº†æƒ³è¦çš„æ•°æ®ã€‚ç‰¹ç‚¹ï¼šCè®¿é—®Açš„è¿‡ç¨‹ä¸­ï¼Œå¯¹äºŽç”¨æˆ·æ¥è¯´Aæ˜¯ä¸å¯è§çš„ï¼Œå¯è§çš„åªæœ‰Bã€‚æ¯”å¦‚ï¼šç”¨æˆ·é€šè¿‡Cè®¿é—®Açš„æ—¶å€™ï¼Œç”¨æˆ·åªçŸ¥é“Bçš„åŸŸåå’Œipï¼Œå¹¶ä¸çŸ¥é“Açš„åŸŸåå’Œipã€‚ç”¨æˆ·ç›´æŽ¥å‘é€è¯·æ±‚ç»™Bï¼Œç„¶åŽBå†è¿”å›žä¿¡æ¯ç»™ç”¨æˆ·ï¼Œè‡³äºŽBæ€Žä¹ˆå¾—åˆ°çš„æ•°æ®ï¼Œå¯¹äºŽç”¨æˆ·æ¥è¯´æ˜¯çœ‹ä¸è§çš„ã€‚æ•°æ®ä¼ è¾“çš„è¿‡ç¨‹å›¾ï¼šCâ€”&gt;Bâ€”&gt;A----&gt;B-----&gt;C ã€‚ åˆšå¥½Aå’ŒCçš„ä½ç½®å’Œæ­£å‘ä»£ç†ä¸­Aå’ŒCçš„ä½ç½®ç›¸åï¼Œæ•…åå‘ä»£ç†ç”±æ­¤å¾—å‡ºã€‚]]></content>
      <categories>
        <category>tools</category>
      </categories>
      <tags>
        <tag>åå‘ä»£ç†</tag>
        <tag>æ­£å‘ä»£ç†</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[centos7å®‰è£…oracle 11g r2]]></title>
    <url>%2Fdevops%2Foracle.html</url>
    <content type="text"><![CDATA[æœ¬æ–‡è®°å½•ä»Žæ— åˆ°æœ‰éƒ¨ç½²ä¸€ä¸ªCentOS 7+Oracle 11gR2å•å®žä¾‹ï¼Œåšä¸ºä¸»è¦å­¦ä¹ è¯•éªŒçŽ¯å¢ƒã€‚ç”±äºŽæœ¬äººåœ¨å®‰è£…çš„è¿‡ç¨‹ä¸­è¸©äº†å¾ˆå¤šæ¬¡å‘ï¼Œæ•…ä¸‹å®šå†³å¿ƒå°†å®žæˆ˜è¿‡ç¨‹è®°å½•ä¸‹æ¥ï¼Œå¸Œæœ›å¯¹ä¼—ç½‘å‹æœ‰æ‰€å¸®åŠ©ã€‚Â¶ä¸€ã€å‰ç½®å‡†å¤‡Â¶1. æ£€æŸ¥ç³»ç»Ÿå®‰è£…æ¡ä»¶123456#ç‰©ç†å†…å­˜ä¸å°äºŽ1G: æŸ¥çœ‹æ–¹å¼:$ grep MemTotal /proc/meminfo#å¯ç”¨ç¡¬ç›˜ä¸å°äºŽ8G: æŸ¥çœ‹æ–¹å¼:$ df -hl#Swapåˆ†åŒºç©ºé—´ä¸å°äºŽ2G(å®žæµ‹512Mä¹Ÿå¯): æŸ¥çœ‹æ–¹å¼ï¼ˆå¦‚æžœswapç©ºé—´ä¸ºç©ºåˆ™å¯ä»¥æ ¹æ®ç¬¬äº”å¤§ç‚¹â€œé—®é¢˜è§£å†³æ–¹æ¡ˆâ€çš„åŠžæ³•æ¥è§£å†³ï¼‰:$ grep SwapTotal /proc/meminfoÂ¶2. å…³é—­firewalldé˜²ç«å¢™123$ systemctl status firewalld.service #æŸ¥çœ‹firewalldé˜²ç«å¢™çŠ¶æ€$ systemctl stop firewalld.service #å…³é—­firewalldé˜²ç«å¢™$ systemctl disable firewalld.service #ç¦æ­¢å¼€æœºä½¿ç”¨firewalldé˜²ç«å¢™Â¶3. ä¿®æ”¹ç³»ç»Ÿæ ‡è¯†å’Œå†…æ ¸å‚æ•°ç”±äºŽOracleé»˜è®¤ä¸æ”¯æŒCentOSï¼Œæ•…éœ€è¦ä¿®æ”¹,ä¿®æ”¹ç³»ç»Ÿæ ‡è¯†æ–‡ä»¶1$ vim /etc/redhat-release12#å°†æ–‡ä»¶å†…å®¹æ›¿æ¢ä¸ºredhat-7redhat-7ä¿®æ”¹å†…æ ¸å‚æ•°æ–‡ä»¶1$ vim /etc/sysctl.conf1234567891011121314#åœ¨æœ€åŽæ·»åŠ ä»¥ä¸‹å†…å®¹fs.aio-max-nr = 1048576fs.file-max = 6815744kernel.shmmni = 4096kernel.sem = 250 32000 100 128kernel.shmall = 2097152kernel.shmmax = 2147483648net.ipv4.ip_local_port_range = 9000 65500net.ipv4.icmp_echo_ignore_broadcasts = 1net.ipv4.conf.all.rp_filter = 1net.core.rmem_default = 262144net.core.rmem_max= 4194304net.core.wmem_default= 262144net.core.wmem_max= 1048576ä¿®æ”¹å®ŒåŽ,å¯ç”¨æ–°çš„é…ç½®1$ sysctl -pÂ¶4. å®‰è£…ä¾èµ–åº“1$ yum -y install binutils* compat-libcap1* compat-libstdc++* gcc* gcc-c++* glibc* glibc-devel* ksh* libaio* libaio-devel* libgcc* libstdc++* libstdc++-devel* libXi* libXtst* make* sysstat* elfutils* unixODBC* unzip lrzszÂ¶5. åˆ›å»ºç”¨æˆ·ä»¥åŠç»„123456$ groupadd oinstall #åˆ›å»ºå®‰è£…oracleç¨‹åºç”¨æˆ·ç»„ $ groupadd dba #åˆ›å»ºDBAç”¨æˆ·ç»„$ useradd -g dba -m oracle #åˆ›å»ºç”¨æˆ·oracle å¹¶åŠ å…¥åˆ°dbaç»„$ usermod -a -G oinstall oracle #å°†ç”¨æˆ·oracleåŠ å…¥åˆ°oinstallç»„$ passwd oracle #ä¿®æ”¹ç”¨æˆ·oracleçš„å¯†ç $ id oracle #æŸ¥çœ‹ç”¨æˆ·oracleçš„ä¿¡æ¯Â¶6. åˆ›å»ºå®‰è£…ç›®å½•å¹¶è®¾ç½®æƒé™123456789#åˆ›å»ºç›¸å…³ç›®å½•$ mkdir -p /data/oracle #åˆ›å»ºoracleä¸»ç›®å½•$ mkdir -p /data/inventory #åˆ›å»ºoralceé…ç½®ç›®å½•$ mkdir -p /data/src #åˆ›å»ºoracleåŽ‹ç¼©åŒ…è§£åŽ‹ç›®å½•#ä¿®æ”¹ç›®å½•æƒé™$ chown -R oracle:oinstall /data/oracle $ chown -R oracle:oinstall /data/inventory $ chown -R oracle:oinstall /data/src1$ ll /data #æŸ¥çœ‹ç›®å½•æƒé™Â¶7. ä¿®æ”¹oracleç”¨æˆ·çš„å®‰å…¨æ€§èƒ½è®¾ç½®1$ vim /etc/security/limits.conf12345#åœ¨æ–‡ä»¶æœ€åŽä¸€è¡Œå‰,è¿½åŠ ä»¥ä¸‹å†…å®¹oracle soft nproc 2047oracle hard nproc 16384oracle soft nofile 1024oracle hard nofile 65536Â¶8. ä¿®æ”¹ç”¨æˆ·çŽ¯å¢ƒå˜é‡ä¿®æ”¹ç”¨æˆ·çŽ¯å¢ƒå˜é‡æ–‡ä»¶1$ vim /home/oracle/.bashrc12345678910#åœ¨æœ€åŽè¿½åŠ ä»¥ä¸‹å†…å®¹export PATHexport ORACLE_BASE=/data/oracleexport ORACLE_HOME=$ORACLE_BASE/product/11.2.0/db_1export ORACLE_SID=orclexport ORACLE_UNQNAME=orclexport PATH=$ORACLE_HOME/bin:/usr/sbin:$PATHexport LD_LIBRARY_PATH=$ORACLE_HOME/lib:/lib:/usr/libexport LANG=Cexport NLS_LANG=AMERICAN_AMERICA.AL32UTF8ä¿®æ”¹å®ŒåŽç«‹å³å¯ç”¨ç”Ÿæ•ˆ:1$ source /home/oracle/.bashrcÂ¶9. å…³é—­selinuxä¿®æ”¹selinuxé…ç½®æ–‡ä»¶1$ vim /etc/selinux/config12SELINUX=disabled #ä¿®æ”¹SELINUXçš„å€¼ä¸ºdisabledSELINUXTYPE=targetedä¿å­˜åŽéœ€è¦é‡å¯æœºå™¨1$ rebootÂ¶äºŒã€å®‰è£…OracleÂ¶1. ä¸‹è½½å®‰è£…åŒ…ä¸‹è½½åœ°å€:https://www.oracle.com/database/technologies/112010-linx8664soft.htmlä¸‹è½½ä¸¤ä¸ªoracleå®‰è£…åŒ…ï¼šlinux.x64_11gR2_database_1of2.zip å’Œ linux.x64_11gR2_database_2of2.zipðŸ’â€â™‚æ¸©é¦¨æç¤ºï¼šå¦‚æžœå®˜æ–¹ä¸‹è½½åœ°å€å¤±æ•ˆï¼Œå¯åˆ°æœ¬äººç½‘ç›˜ä¸‹è½½ï¼šé“¾æŽ¥ï¼šhttps://pan.baidu.com/s/1YwFRecm1_O3pA5efxak7iwæå–ç ï¼še5rjÂ¶2. è§£åŽ‹å®‰è£…åŒ…åˆ°å®‰è£…ç›®å½•12$ unzip linux.x64_11gR2_database_1of2.zip -d /data/src/$ unzip linux.x64_11gR2_database_2of2.zip -d /data/src/Â¶3. è®¾ç½®å®‰è£…ç›®å½•æƒé™1$ chown -R oracle:oinstall /data/src/12#æŸ¥çœ‹ç›®å½•æƒé™$ ll /data/src/Â¶4. å®‰è£…Oracleåˆ‡æ¢ä¸ºOracleç”¨æˆ·1$ su oracleä¿®æ”¹é™é»˜å®‰è£…å“åº”æ–‡ä»¶1$ vim /data/src/database/response/db_install.rsp123456789101112131415161718#ä¿®æ”¹ä»¥ä¸‹å†…å®¹oracle.install.option=INSTALL_DB_SWONLY # å®‰è£…ç±»åž‹ORACLE_HOSTNAME=oracle.server # ä¸»æœºåç§°UNIX_GROUP_NAME=oinstall # å®‰è£…ç»„INVENTORY_LOCATION=/data/inventory # INVENTORYç›®å½•SELECTED_LANGUAGES=en,zh_CN # é€‰æ‹©è¯­è¨€ORACLE_HOME=/data/oracle/product/11.2.0/db_1 # oracle_homeORACLE_BASE=/data/oracle # oracle_baseoracle.install.db.InstallEdition=EE # oracleç‰ˆæœ¬oracle.install.db.DBA_GROUP=dba # dbaç”¨æˆ·ç»„oracle.install.db.OPER_GROUP=oinstall # operç”¨æˆ·ç»„oracle.install.db.config.starterdb.type=GENERAL_PURPOSE # æ•°æ®åº“ç±»åž‹oracle.install.db.config.starterdb.globalDBName=orcl # globalDBNameoracle.install.db.config.starterdb.SID=orcl # SIDoracle.install.db.config.starterdb.characterSet=AL32UTF8 # é»˜è®¤æ•°æ®åº“ç¼–ç oracle.install.db.config.starterdb.memoryLimit=800 # è‡ªåŠ¨ç®¡ç†å†…å­˜çš„æœ€å°å†…å­˜(M)oracle.install.db.config.starterdb.password.ALL=oracle # è®¾å®šæ‰€æœ‰æ•°æ®åº“ç”¨æˆ·ä½¿ç”¨åŒä¸€ä¸ªå¯†ç DECLINE_SECURITY_UPDATES=true # è®¾ç½®å®‰å…¨æ›´æ–°å¯åŠ¨å®‰è£…ç¨‹åº1$ /data/src/database/runInstaller -silent -responseFile /data/src/database/response/db_install.rsp -ignorePrereqæ¼«é•¿çš„ç­‰å¾…â€¦(æ—¶é—´çš„è¯çœ‹æœºå™¨æ€§èƒ½å’¯)å½“å‡ºçŽ°å¦‚ä¸‹ç”»é¢æ—¶å€™,è¯·ç…§åšè¦æ‰§è¡Œé…ç½®è„šæœ¬,è¯·æ‰§è¡Œä»¥ä¸‹æ“ä½œ:(1)æ‰“å¼€å¦å¤–ä¸€ä¸ªç»ˆç«¯çª—å£ï¼ˆæ³¨æ„æ˜¯å¦å¤–ä¸€ä¸ªç»ˆç«¯çª—å£ï¼‰(2)ä»¥&quot;root&quot;èº«ä»½ç™»é™†(3)è¿è¡Œè„šæœ¬12$ /data/inventory/orainstRoot.sh$ /data/oracle/product/11.2.0/db_1/root.sh(5)è¿”å›žæ­¤çª—å£å¹¶æŒ‰&quot;Enter&quot;é”®ç»§ç»­åˆ°è¿™é‡ŒOracleä¸»ç¨‹åºå°±å®‰è£…å®Œå•¦â€¦Â¶5. é…ç½®Oracleç›‘å¬ç¨‹åºç¼–è¾‘ç›‘å¬é…ç½®æ–‡ä»¶1$ vim /data/src/database/response/netca.rspä¿®æ”¹ä»¥ä¸‹å‚æ•°12345INSTALL_TYPE=""custom"" # å®‰è£…çš„ç±»åž‹LISTENER_NUMBER=1 # ç›‘å¬å™¨æ•°é‡LISTENER_NAMES=&#123;"LISTENER"&#125; # ç›‘å¬å™¨çš„åç§°åˆ—è¡¨LISTENER_PROTOCOLS=&#123;"TCP;1521"&#125; # ç›‘å¬å™¨ä½¿ç”¨çš„é€šè®¯åè®®åˆ—è¡¨LISTENER_START=""LISTENER"" # ç›‘å¬å™¨å¯åŠ¨çš„åç§°æ‰§è¡Œå‘½ä»¤å®‰è£…ç›‘å¬ç¨‹åº:1$ /data/oracle/product/11.2.0/db_1/bin/netca /silent /responseFile /data/src/database/response/netca.rspé»˜è®¤å®‰è£…åŽå°±ä¼šå¯åŠ¨ï¼ŒæŸ¥çœ‹ç›‘å¬ç¨‹åºæ˜¯å¦è¿è¡Œ1$ netstat -tnulp | grep 1521Â¶6. é…ç½®æ•°æ®åº“å®žä¾‹ç¼–è¾‘æ•°æ®åº“å®žä¾‹æ–‡ä»¶1$ vim /data/src/database/response/dbca.rsp123456789101112131415161718#ä¿®æ”¹ä»¥ä¸‹å‚æ•°RESPONSEFILE_VERSION = "11.2.0" # ä¸è¦å˜å“¦OPERATION_TYPE = "createDatabase" # æ“ä½œä¸ºåˆ›å»ºå®žä¾‹ GDBNAME ="orcl" # æ•°æ®åº“å®žä¾‹å(æœ‰ä¸¤è¡Œéƒ½è¦æ”¹)SID ="orcl" # å®žä¾‹åå­—TEMPLATENAME = "General_Purpose.dbc" # å»ºåº“ç”¨çš„æ¨¡æ¿æ–‡ä»¶(æœ‰4è¡Œï¼Œéƒ½è¦æ”¹)#é…ç½®ç®¡ç†å‘˜å¯†ç ï¼ˆä»¥ä¸‹æ¯ä¸ªå˜é‡éƒ½å¯èƒ½ä¼šæœ‰å¤šè¡Œï¼Œæ¯ä¸ªå˜é‡åªéœ€è¦åŽ»æŽ‰æ³¨é‡Šä»…ä¿ç•™ä¸€è¡Œå¹¶ä¿®æ”¹å³å¯ï¼‰SYSPASSWORD = "oracle"SYSTEMPASSWORD = "oracle"SYSMANPASSWORD= "oracle" DBSNMPPASSWORD= "oracle"DATAFILEDESTINATION =/data/oracle/oradata # æ•°æ®æ–‡ä»¶å­˜æ”¾ç›®å½•RECOVERYAREADESTINATION=/data/oracle/flash_recovery_area # æ¢å¤æ•°æ®å­˜æ”¾ç›®å½•CHARACTERSET ="AL32UTF8" # å­—ç¬¦é›†NATIONALCHARACTERSET= "AL16UTF16" # å­—ç¬¦é›†TOTALMEMORY ="1638" # 1638MBï¼Œç‰©ç†å†…å­˜2G*80%ã€‚Â¶7. åˆ›å»ºæ•°æ®åº“å®žä¾‹æ‰§è¡Œä»¥ä¸‹å‘½ä»¤åˆ›å»ºæ•°æ®åº“å®žä¾‹1$ /data/oracle/product/11.2.0/db_1/bin/dbca -silent -responseFile /data/src/database/response/dbca.rspæŸ¥çœ‹å®žä¾‹æ˜¯å¦è¿è¡Œ1$ ps -ef | grep ora_ | grep -v grepÂ¶8. å¯åŠ¨å’Œå…³é—­oracleæœåŠ¡Â¶8.1 å¯åŠ¨12345su - oracle#å¼€å¯ç›‘å¬:$ /data/oracle/product/11.2.0/db_1/bin/lsnrctl start#å¯åŠ¨æ•°æ®åº“å®žä¾‹ï¼ˆæ‰§è¡Œè„šæœ¬+å…·ä½“çš„æ•°æ®åº“å®žä¾‹ï¼‰:$ /data/oracle/product/11.2.0/db_1/bin/dbstart /data/oracle/product/11.2.0/db_1æˆ–è€…12345su - oraclelsnrctl start #å¯åŠ¨oracleæœåŠ¡ç›‘å¬sqlplus /nologconn /as sysdbastartup #å¯åŠ¨æ•°æ®åº“å®žä¾‹Â¶8.2 å…³é—­12345su - oracle#å…³é—­ç›‘å¬:$ /data/oracle/product/11.2.0/db_1/bin/lsnrctl stop#å…³é—­æ•°æ®åº“å®žä¾‹ï¼ˆæ‰§è¡Œè„šæœ¬+å…·ä½“çš„æ•°æ®åº“å®žä¾‹ï¼‰:$ /data/oracle/product/11.2.0/db_1/bin/dbshut /data/oracle/product/11.2.0/db_1æˆ–è€…12345su - oraclelsnrctl stop #å…³é—­oracleæœåŠ¡ç›‘å¬sqlplus /nologconn /as sysdbashut #å…³é—­æ•°æ®åº“å®žä¾‹Â¶10. å¼€æœºè‡ªå¯åŠ¨OracleæœåŠ¡å¯¹äºŽä»¥ä¸Šï¼Œæ¯æ¬¡é‡å¯éƒ½éœ€è¦æ‰‹åŠ¨æ‰§è¡Œç›¸å…³å‘½ä»¤æ¥å¼€å¯Oracleå®žä¾‹ï¼Œä¸ºäº†ä¸ç”¨æ¯æ¬¡å¼€æœºéƒ½æœ‰æ‰‹åŠ¨å¯åŠ¨Oracleï¼Œå¯ä»¥è®¾ç½®å¼€æœºè‡ªå¯åŠ¨OracleæœåŠ¡ã€‚oracleç”¨æˆ·æ¨¡å¼ä¸‹ä¿®æ”¹oracleç›¸å…³æ–‡ä»¶:1$ su oracle12345$ vim /etc/oratab#ä¿®æ”¹ä»¥ä¸‹å†…å®¹ï¼ŒNæ”¹ä¸ºYã€‚è¦è‡ªåŠ¨å¯åŠ¨æ•°æ®åº“å®žä¾‹ï¼Œåˆ™å°†Næ”¹ä¸ºYï¼Œåœ¨è°ƒç”¨dbstartå‘½ä»¤æ—¶ç”Ÿæ•ˆã€‚dbstartæ ¹æ®è¿™äº›é…ç½®æ¥å¯åŠ¨ç›¸åº”çš„æ•°æ®åº“å®žä¾‹ã€‚#orcl:/data/oracle/product/11.2.0/db_1:Norcl:/data/oracle/product/11.2.0/db_1:Yrootç”¨æˆ·æ¨¡å¼ä¸‹ä¿®æ”¹linuxè‡ªå¯åŠ¨é…ç½®æ–‡ä»¶:12$ su$ chmod +x /etc/rc.d/rc.local12345$ vim /etc/rc.d/rc.local#åœ¨æ–‡ä»¶æœ€åŽè¿½åŠ ä»¥ä¸‹å†…å®¹ï¼šsu oracle -lc "/data/oracle/product/11.2.0/db_1/bin/lsnrctl start"su oracle -lc "/data/oracle/product/11.2.0/db_1/bin/dbstart /data/oracle/product/11.2.0/db_1"Â¶ä¸‰ã€å®¢æˆ·ç«¯è¿žæŽ¥oracleå®žä¾‹Â¶1. sqlplusè¿žæŽ¥å½“å‰æœåŠ¡å™¨çš„sqlpluså®¢æˆ·ç«¯ç›´æŽ¥è¿žæŽ¥12$ su oracle$ sqlplus sys/oracle as sysdbaåˆ›å»ºç”¨æˆ·12SQL&gt; create user qcmoke identified by 123456;SQL&gt; grant connect,resource to qcmoke;Â¶2. PLSQL Developerå®¢æˆ·ç«¯è¿žæŽ¥â‘ å®‰è£…PLSQL Developerå®˜æ–¹ä¸‹è½½åœ°å€ï¼šhttps://www.allroundautomations.com/å‚»ç“œå¼å®‰è£…å®Œå³å¯ã€‚â‘¡å®‰è£…oracleå®¢æˆ·ç«¯æ’ä»¶instantclientå®¢æˆ·ç«¯æ’ä»¶å®˜æ–¹ä¸‹è½½åœ°å€ï¼šhttps://www.oracle.com/database/technologies/instant-client/downloads.htmlæ³¨æ„ï¼šå¦‚æžœPLSQL Developeræ˜¯64ä½é‚£ä¹ˆinstantclientä¹Ÿè¦æ˜¯64ä½ï¼Œå¦‚æžœPLSQL Developeræ˜¯32ä½ï¼Œé‚£ä¹ˆinstantclientä¹Ÿè¦æ˜¯32ä½ã€‚ä¸‹è½½åŒ…å¦‚ä¸‹ï¼š32ä½ï¼šinstantclient-basic-nt-11.2.0.4.0.zip64ä½ï¼šinstantclient-basic-windows.x64-11.2.0.4.0.zipä¸‹è½½åŽè§£åŽ‹åˆ°ä»»æ„ç›®å½•ä¸‹å³å®Œæˆå®‰è£…ã€‚æ­¤å¤–è¿˜éœ€è¦é…ç½®ç›‘å¬æ–‡ä»¶ï¼Œåœ¨instantclientç›®å½•ä¸‹æ–°å»ºnetwork/adminç›®å½•ï¼Œåœ¨è¯¥ç›®å½•ä¸‹å»ºç«‹tnsnames.oraæ–‡ä»¶ï¼Œåœ¨tnsnames.oraä¸­å†™å…¥æ•°æ®åº“è¿žæŽ¥å­—ç¬¦ä¸²ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š123456789ORCL = (DESCRIPTION = (ADDRESS_LIST = (ADDRESS = (PROTOCOL = TCP)(HOST = 39.106.195.202)(PORT = 1521)) ) (CONNECT_DATA = (SERVICE_NAME = orcl) ) )â‘¢PLSQL Developeré…ç½®instantclientæ’ä»¶â‘£PLSQL Developerç™»å½•å¯†ç æ˜¯oracleâ‘¤åˆ›å»ºå¹¶æŽˆæƒç”¨æˆ·Â¶3. Navicatå®¢æˆ·ç«¯è¿žæŽ¥é…ç½®instantclientæ’ä»¶ï¼Œä½†ä¸éœ€è¦åƒPLSQL Developeré‚£æ ·è¿˜éœ€è¦é…ç½®ç›‘å¬æ–‡ä»¶tnsnames.oraç™»å½•å¯†ç æ˜¯oracleÂ¶äº”ã€é—®é¢˜è§£å†³æ–¹æ¡ˆÂ¶1. è®¾ç½®å¯åŠ¨è„šæœ¬ï¼ˆå¯é€‰ï¼‰123456789101112131415161718192021222324252627282930313233343536373839404142[root@localhost ~]# vim /etc/init.d/oracle#!/bin/sh # chkconfig: 345 61 61 # description: Oracle 11g R2 AutoRun Servimces # /etc/init.d/oracle # # Run-level Startup script for the Oracle Instance, Listener, and # Web Interface export ORACLE_BASE=/data export ORACLE_HOME=$ORACLE_BASE/oracle/product/11.2.0/db_1 export ORACLE_SID=ORCL export PATH=$PATH:$ORACLE_HOME/bin ORA_OWNR="oracle" # if the executables do not exist -- display error if [ ! -f $ORACLE_HOME/bin/dbstart -o ! -d $ORACLE_HOME ] then echo "Oracle startup: cannot start" exit 1 fi # depending on parameter -- startup, shutdown, restart # of the instance and listener or usage display case "$1" in start) # Oracle listener and instance startup su $ORA_OWNR -lc $ORACLE_HOME/bin/dbstart echo "Oracle Start Succesful!OK." ;; stop) # Oracle listener and instance shutdown su $ORA_OWNR -lc $ORACLE_HOME/bin/dbshut echo "Oracle Stop Succesful!OK." ;; reload|restart) $0 stop $0 start ;; *) echo $"Usage: `basename $0` &#123;start|stop|reload|reload&#125;" exit 1 esac exit 012service oracle start #å¼€å¯æœåŠ¡ï¼ŒåŒ…æ‹¬å¼€å¯ç›‘å¬+å¼€å¯å®žä¾‹service oracle stop #å…³é—­æœåŠ¡ï¼ŒåŒ…æ‹¬å…³é—­ç›‘å¬+å…³é—­å®žä¾‹Â¶2. swapä¸è¶³æŠ¥é”™æŠ¥é”™ï¼šChecking swap space: 0 MB available, 150 MB required. Failed &lt;&lt;&lt;&lt;å½“è¿è¡Œå¦‚ä¸‹å®‰è£…å‘½ä»¤æŠ¥é”™ï¼š12345678910111213[oracle@localhost database]$ ./runInstaller -silent -responseFile /home/oracle/db_install.rspStarting Oracle Universal Installer...Checking Temp space: must be greater than 120 MB. Actual 150565 MB PassedChecking swap space: 0 MB available, 150 MB required. Failed &lt;&lt;&lt;&lt;Some requirement checks failed. You must fulfill these requirements beforecontinuing with the installation,Exiting Oracle Universal Installer, log for this session can be found at /tmp/OraInstall2017-06-07_02-08-39PM/installActions2017-06-07_02-08-39PM.logè§£å†³æ–¹æ³•ï¼š1ã€æ£€æŸ¥ Swap ç©ºé—´åœ¨è®¾ç½® Swap æ–‡ä»¶ä¹‹å‰ï¼Œæœ‰å¿…è¦å…ˆæ£€æŸ¥ä¸€ä¸‹ç³»ç»Ÿé‡Œæœ‰æ²¡æœ‰æ—¢å­˜çš„ Swap æ–‡ä»¶ã€‚è¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼š1$ swapon -så¦‚æžœè¿”å›žçš„ä¿¡æ¯æ¦‚è¦æ˜¯ç©ºçš„ï¼Œåˆ™è¡¨ç¤º Swap æ–‡ä»¶ä¸å­˜åœ¨ã€‚2ã€æ£€æŸ¥æ–‡ä»¶ç³»ç»Ÿåœ¨è®¾ç½® Swap æ–‡ä»¶ä¹‹å‰ï¼ŒåŒæ ·æœ‰å¿…è¦æ£€æŸ¥ä¸€ä¸‹æ–‡ä»¶ç³»ç»Ÿï¼Œçœ‹çœ‹æ˜¯å¦æœ‰è¶³å¤Ÿçš„ç¡¬ç›˜ç©ºé—´æ¥è®¾ç½® Swap ã€‚è¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼š1$ df -hal3ã€åˆ›å»ºå¹¶å…è®¸ Swap æ–‡ä»¶ä¸‹é¢ä½¿ç”¨ dd å‘½ä»¤æ¥åˆ›å»º Swap æ–‡ä»¶ã€‚æ£€æŸ¥è¿”å›žçš„ä¿¡æ¯ï¼Œè¿˜å‰©ä½™è¶³å¤Ÿçš„ç¡¬ç›˜ç©ºé—´å³å¯ã€‚1$ dd if=/dev/zero of=/swapfile bs=1024 count=512kå‚æ•°è§£è¯»ï¼šif=æ–‡ä»¶åï¼šè¾“å…¥æ–‡ä»¶åï¼Œç¼ºçœä¸ºæ ‡å‡†è¾“å…¥ã€‚å³æŒ‡å®šæºæ–‡ä»¶ã€‚&lt; if=input file &gt;of=æ–‡ä»¶åï¼šè¾“å‡ºæ–‡ä»¶åï¼Œç¼ºçœä¸ºæ ‡å‡†è¾“å‡ºã€‚å³æŒ‡å®šç›®çš„æ–‡ä»¶ã€‚&lt; of=output file &gt;bs=bytesï¼šåŒæ—¶è®¾ç½®è¯»å…¥/è¾“å‡ºçš„å—å¤§å°ä¸ºbytesä¸ªå­—èŠ‚count=blocksï¼šä»…æ‹·è´blocksä¸ªå—ï¼Œå—å¤§å°ç­‰äºŽbsæŒ‡å®šçš„å­—èŠ‚æ•°ã€‚4ã€æ ¼å¼åŒ–å¹¶æ¿€æ´» Swap æ–‡ä»¶ä¸Šé¢å·²ç»åˆ›å»ºå¥½ Swap æ–‡ä»¶ï¼Œè¿˜éœ€è¦æ ¼å¼åŒ–åŽæ‰èƒ½ä½¿ç”¨ã€‚1$ mkswap /swapfileæ¿€æ´» Swap1$ swapon /swapfileä»¥ä¸Šæ­¥éª¤åšå®Œï¼Œå†æ¬¡è¿è¡Œå‘½ä»¤1234$ swapon -s#ä½ ä¼šå‘çŽ°è¿”å›žçš„ä¿¡æ¯æ¦‚è¦ï¼šFilename Type Size Used Priority/swapfile file 524284 0 -1æœºå™¨é‡å¯çš„æ—¶å€™è‡ªåŠ¨æŒ‚è½½ Swap1$ vim /etc/fstab12#åœ¨/etc/fstabæœ€åŽæ·»åŠ å¦‚ä¸‹ä¸€è¡Œ/swapfile swap swap defaults 0 0æœ€åŽï¼Œèµ‹äºˆ Swap æ–‡ä»¶é€‚å½“çš„æƒé™ï¼š12$ chown root:root /swapfile $ chmod 0600 /swapfileÂ¶3. ç¦æ­¢oracleç”¨æˆ·sshç™»å½•å¯ä»¥å°†oracleç”¨æˆ·æ·»åŠ åˆ°ç¦æ­¢SSHç™»å½•çš„åå•ä¸­ï¼Œé˜²æ­¢ç ´è§£ç™»å½•ã€‚ä½†å¯ä»¥é€šè¿‡å…¶ä»–ç”¨æˆ·ç™»å½•åˆ°æœåŠ¡å™¨åŽåˆ‡æ¢åˆ°oracleç”¨æˆ·ã€‚123$ vim /etc/ssh/sshd_config#åœ¨æœ€åŽæ·»å¦‚ä¸‹é…ç½®DenyUsers oracle1234567#é‡æ–°å¯åŠ¨sshdæœåŠ¡$ service sshd restartæˆ–è€…#é‡æ–°åŠ è½½sshdé…ç½®æ–‡ä»¶$ service sshd reloadÂ¶å…­ã€19Cå®‰è£…éœ€è¦æå‰ä¸‹è½½å¥½oracle19cçš„å®‰è£…åŒ…ï¼šhttps://www.oracle.com/database/technologies/oracle-database-software-downloads.html#19cï¼Œä¸‹è½½Linux x86-64çš„ZIPåŒ…å³å¯ï¼Œä¸‹è½½åŽå¾—åˆ°LINUX.X64_193000_db_home.zipã€‚Â¶1ã€ç¦ç”¨é˜²ç«å¢™å’Œ selinux12345$ systemctl stop firewalld.service$ systemctl disable firewalld.service$ systemctl status firewalld.service$ sed -i 's@SELINUX=enforcing@SELINUX=disabled@g' /etc/selinux/configÂ¶2ã€åˆ›å»ºç”¨æˆ·å’Œç»„ã€å®‰è£…ç›®å½•ä»¥åŠè®¾ç½®æƒé™123456789$ /usr/sbin/groupadd -g 65431 oinstall$ /usr/sbin/groupadd -g 65432 dba$ /usr/sbin/groupadd -g 65433 oper$ useradd -u 61001 -g oinstall -G dba,oper -m oracle$ echo "123456" | passwd --stdin oracle$ mkdir -p /data1/app/oracle/product/19.3.0/dbhome_1$ mkdir -p /data1/app/oraInventory$ chown -R oracle:oinstall /data1$ chmod -R 775 /data1Â¶3ã€ä¿®æ”¹ç”¨æˆ·å®‰å…¨é™åˆ¶12345678$ cat &gt;&gt; /etc/security/limits.conf &lt;&lt; EOForacle soft nproc 16384oracle hard nproc 16384oracle soft nofile 16384oracle hard nofile 65536oracle soft stack 10240oracle hard stack 32768EOFÂ¶4ã€shellé™åˆ¶1$ echo "session required pam_limits.so" &gt;&gt; /etc/pam.d/loginÂ¶5ã€ä¿®æ”¹å†…æ ¸å‚æ•°1234567891011121314151617$ cat &gt;&gt; /etc/sysctl.conf &lt;&lt; EOFfs.aio-max-nr = 1048576fs.file-max = 6815744kernel.shmall = 424673kernel.shmmax = 1739461754kernel.shmmni = 4096kernel.sem = 250 32000 100 128net.ipv4.ip_local_port_range = 9000 65500net.core.rmem_default = 262144net.core.rmem_max = 4194304net.core.wmem_default = 262144net.core.wmem_max = 1048576kernel.panic_on_oops = 1EOF#ä¿®æ”¹åŽæ‰§è¡Œ$ sysctl -pæç¤ºï¼škernel.shmmaxå’Œkernel.shmallçš„é…ç½®éœ€è¦ç‰¹åˆ«æ³¨æ„å‚æ•°è®¾ç½®è®¡ç®—ï¼škernel.shmmax = å½“å‰å†…å­˜GB * 1024 * 1024 * 1024 * 0.9æ³¨ï¼šå½“å‰å†…å­˜æŽ¨èè‡³å°‘4GBkernel.shmall = kernel.shmmax / kernel.shmmniè¯¦ç»†è§£é‡Šï¼šshmall æ˜¯å…¨éƒ¨å…è®¸ä½¿ç”¨çš„å…±äº«å†…å­˜å¤§å°shmmax æ˜¯å•ä¸ªæ®µå…è®¸ä½¿ç”¨çš„å¤§å°è¿™ä¸¤ä¸ªå¯ä»¥è®¾ç½®ä¸ºå†…å­˜çš„ 90%ä¾‹å¦‚ 16G å†…å­˜ï¼Œ1610241024102490% = 15461882265shmall çš„å¤§å°ä¸º 15461882265/4k(getconf PAGESIZEå¯å¾—åˆ°) = 3774873Â¶6ã€è®¾ç½®ç”¨æˆ·çŽ¯å¢ƒå˜é‡123456789101112131415161718192021222324252627282930313233#åˆ‡æ¢åˆ°oracleç”¨æˆ·$ su - oracle$ vi .bash_profile#å†å°¾éƒ¨åŠ é…ç½®å¦‚ä¸‹ï¼š# User specific environment and startup programs#PS1="[`whoami`@`hostname`:"'$PWD]$'#export PS1export TMP=/tmpexport LANG=en_US.UTF-8export TMPDIR=$TMPexport ORACLE_UNQNAME=xtcrmexport ORACLE_SID=xtcrmexport ORACLE_BASE=/data1/app/oracleexport ORACLE_HOME=$ORACLE_BASE/product/19.3.0/dbhome_1export ORACLE_TERM=xtermexport NLS_DATE_FORMAT="yyyy-mm-dd HH24:MI:SS"export NLS_LANG=AMERICAN_AMERICA.ZHS16GBKexport PATH=.:$PATH:$HOME/.local/bin:$HOME/bin:$ORACLE_HOME/binexport THREADS_FLAG=nativeumask=022if [ $USER = "oracle" ]; thenif [ $SHELL = "/bin/ksh" ]; thenulimit -p 16384ulimit -n 65536elseulimit -u 16384 -n 65536fiumask 022fi#è®¾ç½®çŽ¯å¢ƒå˜é‡ç”Ÿæ•ˆ$ source .bash_profileÂ¶7ã€ä¾èµ–å’Œå®‰è£…åŒ…å‡†å¤‡123456789101112#æ³¨ï¼šä»Žoracle 18cå¼€å§‹ï¼Œå¿…é¡»æŠŠåŽ‹ç¼©æ–‡ä»¶è§£åŽ‹åˆ° $ORACLE_HOME é‡Œé¢$ su$ mkdir /oracle_install#å®‰è£…ä¾èµ–ï¼ˆå¯ä»¥å…ˆåˆ°ä¸€å°åŒæ ·é…ç½®é€šå¤–ç½‘çš„æœºå™¨ä¸‹è½½ä¾èµ–ï¼Œç„¶åŽå†åœ¨å†…ç½‘æœºå™¨å®‰è£…ï¼‰$ yum install --downloadonly --downloaddir=/oracle_install/base bc gcc gcc-c++ binutils compat-libcap1 compat-libstdc++ dtrace-modules dtrace-modules-headers dtrace-modules-provider-headers dtrace-utils elfutils-libelf elfutils-libelf-devel fontconfig-devel glibc glibc-devel ksh libaio libaio-devel libdtrace-ctf-devel libX11 libXau libXi libXtst libXrender libXrender-devel libgcc librdmacm-devel libstdc++ libstdc++-devel libxcb make smartmontools sysstat unzip vim wget telnet#æŠŠä¸‹è½½å¥½çš„LINUX.X64_193000_db_home.zipåŽ‹ç¼©åŒ…æ”¾åˆ°/oracle_installé‡Œ$ mv LINUX.X64_193000_db_home.zip /oracle_install$ chown -R oracle:oinstall /oracle_install &amp;&amp; chmod -R 775 /oracle_install$ rpm -ivh /oracle_install/base/*.rpm --force --nodepsÂ¶8ã€é™é»˜å®‰è£…oracle123456789101112131415161718192021222324252627282930#è§£åŽ‹ç¼©åˆ°$ORACLE_HOMEé‡Œ$ su - oracle$ cd $ORACLE_HOME$ unzip -q /oracle_install/LINUX.X64_193000_db_home.zip$ /data1/app/oracle/product/19.3.0/dbhome_1/runInstaller -ignorePrereq -waitforcompletion -silent \-responseFile /data1/app/oracle/product/19.3.0/dbhome_1/install/response/db_install.rsp \oracle.install.option=INSTALL_DB_SWONLY \UNIX_GROUP_NAME=oinstall \INVENTORY_LOCATION=/data1/app/oraInventory \SELECTED_LANGUAGES=en,en_GB \ORACLE_HOME=/data1/app/oracle/product/19.3.0/dbhome_1 \ORACLE_BASE=/data1/app/oracle \oracle.install.db.InstallEdition=EE \oracle.install.db.OSDBA_GROUP=dba \oracle.install.db.OSOPER_GROUP=oper \oracle.install.db.OSBACKUPDBA_GROUP=dba \oracle.install.db.OSDGDBA_GROUP=dba \oracle.install.db.OSKMDBA_GROUP=dba \oracle.install.db.OSRACDBA_GROUP=dba \SECURITY_UPDATES_VIA_MYORACLESUPPORT=false \DECLINE_SECURITY_UPDATES=true#è¾“å‡ºå¦‚ä¸‹ä¿¡æ¯è¡¨ç¤ºæ­¤æ­¥éª¤æ­£ç¡®#Successfully Setup Software with warning(s).#åˆ‡æ¢åˆ°rootç”¨æˆ·ï¼Œä¾æ¬¡æ‰§è¡Œä»¥ä¸‹2ä¸ªè„šæœ¬$ su$ /data1/app/oraInventory/orainstRoot.sh$ /data1/app/oracle/product/19.3.0/dbhome_1/root.shÂ¶9ã€å¯åŠ¨ç›‘å¬æœåŠ¡å™¨123$ su - oracle $ cd $ORACLE_HOME$ lsnrctl startÂ¶10ã€åˆ›å»ºæ•°æ®åº“123456789101112131415161718$ su - oracle &amp;&amp; cd $ORACLE_HOME#å“åº”æ–‡ä»¶: $ORACLE_HOME/assistants/dbca/dbca.rsp$ dbca -silent -createDatabase \-templateName General_Purpose.dbc \-gdbname xtcrm \-sid xtcrm \-databaseConfigType SI \-createAsContainerDatabase TRUE \-numberOfPDBs 1 \-pdbName pdb \-useLocalUndoForPDBs TRUE \-pdbAdminPassword 123456 \-sysPassword 123456 \-systemPassword 123456 \-characterSet AL32UTF8 \-memoryPercentage 30 \-datafileDestination /data1/app/oracle/oradata-recoveryAreaDestination /data1/app/oracle/flash_recovery_area1234$ sqlplus / as sysdbaSQL&gt; alter session set "_ORACLE_SCRIPT"=true; SQL&gt; create user qcmoke identified by 123456;SQL&gt; grant connect,resource,dba to qcmoke;å…¶ä»–æ“ä½œï¼š12345#æŸ¥çœ‹oracleç‰ˆæœ¬SQL&gt; select * from v$version;#æŸ¥çœ‹å­—ç¬¦ç¼–ç SQL&gt; select userenv('language') from dual;]]></content>
      <categories>
        <category>devops</category>
      </categories>
      <tags>
        <tag>linux</tag>
        <tag>oracle</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[jenkinså­¦ä¹ ç¬”è®°]]></title>
    <url>%2Fjavaee%2Fjenkins.html</url>
    <content type="text"><![CDATA[è‡ªåŠ¨åŒ–éƒ¨ç½²ï¼ˆæŒç»­é›†æˆ/CI+æŒç»­äº¤ä»˜/CDï¼‰ä¸ä»…å¯ä»¥æå‡å¼€å‘æ•ˆçŽ‡ï¼Œè®©ç¨‹åºå‘˜æ›´ä¸“æ³¨äº§å“ä¸Žä¸šåŠ¡çš„å¼€å‘ï¼Œè¿˜å¯ä»¥èŠ‚çœå¾ˆå¤šè¿ç»´æˆæœ¬ä»¥åŠæå‡è¿ç»´æ•ˆçŽ‡ã€‚å…¶ä¸­ï¼ŒJenkinså°±æ˜¯è‡ªåŠ¨åŒ–éƒ¨ç½²ä¸­æœ€æµè¡Œçš„å·¥å…·ï¼Œä¼šä½¿ç”¨è¿™ä¸ªæŠ€æœ¯å°†ä¼šè®©è½¯ä»¶éƒ¨ç½²å˜å¾—æ›´åŠ ä¾¿æ·å’Œé«˜æ•ˆã€‚Â¶ä¸€ã€dockerå®‰è£Â¶1. å®‰è£…Jenkins123$ docker pull jenkins/jenkins:lts$ mkdir /data/jenkins_home &amp;&amp; chown -R 1000:1000 /data/jenkins_home$ docker run -d --name jenkins -p 8081:8080 -v /data/jenkins_home:/var/jenkins_home jenkins/jenkins:ltså¤‡æ³¨ï¼š-d ï¼š å¯åŠ¨åœ¨åŽå°â€“nameï¼š å®¹å™¨åå­—-pï¼š ç«¯å£æ˜ å°„ï¼ˆ8081ï¼šå®¿ä¸»ä¸»æœºç«¯å£ï¼Œ8080ï¼šå®¹å™¨å†…éƒ¨ç«¯å£ï¼‰-vï¼š æ•°æ®å·æŒ‚è½½æ˜ å°„ï¼ˆ/data/jenkins_homeï¼šå®¿ä¸»ä¸»æœºç›®å½•ï¼Œå¦å¤–ä¸€ä¸ªå³æ˜¯å®¹å™¨ç›®å½•ï¼‰enkins/jenkins:ltsï¼šJenkinsé•œåƒï¼ˆæœ€æ–°ç‰ˆï¼‰å‚è€ƒï¼šhttps://developer.aliyun.com/article/742451Â¶2. å®‰è£…ä¸­æ–‡ç¤¾åŒºæ’ä»¶123$ cd /data/jenkins_home/plugins$ wget https://mirrors.tuna.tsinghua.edu.cn/jenkins/plugins/localization-zh-cn/latest/localization-zh-cn.hpi$ wget https://mirrors.tuna.tsinghua.edu.cn/jenkins/plugins/localization-support/latest/localization-support.hpiæµè§ˆå™¨è®¿é—®JenkinsåŽå°webé¡µé¢ï¼šhttp://39.106.195.202:8081åœ¨å®‰è£…å®ŒæˆåŽï¼Œé»˜è®¤ç”Ÿæˆäº†ä¸€ä¸ªç™»å½•å¯†ç ï¼Œé¦–æ¬¡ç™»å½•éœ€è¦è¿™ä¸ªå¯†ç ã€‚å¯é€šè¿‡å¦‚ä¸‹å‘½ä»¤æŸ¥çœ‹å¯†ç ï¼š1$ cat /data/jenkins_home/secrets/initialAdminPasswordè®¿é—®ï¼šhttp://39.106.195.202:8081/chineseå°†https://updates.jenkins-zh.cn/update-center.jsonå¡«å…¥ä¸‹å›¾ä¸­ç„¶åŽç‚¹å‡»æäº¤ç„¶åŽå†è®¿é—®http://39.106.195.202:8081å‚è€ƒï¼šJenkins æ’ä»¶ä¸­å¿ƒ å›½å†…é•œåƒæºé…ç½®è§£å†³æ–¹æ¡ˆï¼šhttps://jenkins-zh.cn/wechat/articles/2019/11/2019-11-11-update-center-mirror-announcement/Â¶3. å®‰è£…ä¸»è¦æ’ä»¶Â¶3.1 Maven Integration pluginÂ¶4. æ’ä»¶ç¦»çº¿å®‰è£…å®˜æ–¹æ’ä»¶ä¸‹è½½ï¼šhttps://plugins.jenkins.io/å›½å†…æ’ä»¶é•œåƒä¸‹è½½ï¼šhttps://mirrors.tuna.tsinghua.edu.cn/jenkins/plugins/Â¶äºŒã€Linuxå®‰è£…Â¶1ã€å®‰è£…éœ€è¦é…ç½®å¥½jdkçŽ¯å¢ƒï¼Œç„¶åŽå†ä¸‹è½½å®‰è£…ã€‚12345#ä¸‹è½½å’Œå®‰è£…éƒ¨ç½²wget http://mirrors.jenkins.io/war-stable/latest/jenkins.war#è¿è¡Œjava -jar jenkins.war --httpPort=8080è®¿é—®ç®¡ç†é¡µé¢ï¼š http://ip:8080ï¼ˆæ³¨æ„å¼€æ”¾æœåŠ¡å™¨ç«¯å£ï¼Œå¯¹äºŽé˜¿é‡Œäº‘ç­‰é»˜è®¤å±è”½ç«¯å£çš„æœåŠ¡å•†è¿˜éœ€è¦åˆ°é˜¿é‡Œäº‘ç®¡ç†åŽå°å¼€æ”¾é˜²ç«å¢™ç«¯å£ï¼‰éœ€è¦å¡«å†™å¯†ç æ‰èƒ½è¿›å…¥ç®¡ç†ä¸»é¡µï¼Œåˆå§‹å¯†ç å¯é€šè¿‡ä»¥ä¸‹æŸ¥çœ‹ï¼š1cat /root/.jenkins/secrets/initialAdminPasswordÂ¶2ã€tomcaté›†æˆJenkinsç¼–è¾‘conf/tomcat-users.xml12345&lt;role rolename="manager-gui"/&gt;&lt;role rolename="manager-script"/&gt;&lt;role rolename="manager-jmx"/&gt;&lt;role rolename="manager-status"/&gt;&lt;user username="tomcat_user" password="123456" roles="manager-gui,manager-script,manager-jmx,manager-status" /&gt;æ­¤å¤–è¿˜è¦ç¼–è¾‘ webapps/manager/META-INF/context.xml æ–‡ä»¶æ³¨é‡ŠæŽ‰ä»¥ä¸‹éƒ¨åˆ†1234&lt;!--&lt;Valve className="org.apache.catalina.valves.RemoteAddrValve"allow="127\.\d+\.\d+\.\d+|::1|0:0:0:0:0:0:0:1" /&gt;--&gt;å°†ä¹‹å‰ä¸‹è½½çš„jenkins.waråŒ…å¤åˆ¶åˆ° tomcat çš„webappsç›®å½•ä¸­ã€‚ç„¶åŽå¯åŠ¨tomcatï¼Œè®©tomcatæ¥å¯åŠ¨jenkinsã€‚1apache-tomcat-8.5.31/bin/startup.shè®¿é—®ç®¡ç†é¡µé¢ï¼š http://ip:8080/jenkinsÂ¶3ã€å®‰è£…æ’ä»¶é€‰æ‹©å®‰è£…æŽ¨èæ’ä»¶å³å¯ã€‚å®‰è£…Maven Integration pluginDeploy to container]]></content>
      <categories>
        <category>javaee</category>
      </categories>
      <tags>
        <tag>jenkins</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Dubboå­¦ä¹ ç¬”è®°]]></title>
    <url>%2Fjavaee%2Fdubbo.html</url>
    <content type="text"><![CDATA[Â¶ä¸€ã€å‘å±•æ¼”å˜å•ä¸€åº”ç”¨æž¶æž„å½“ç½‘ç«™æµé‡å¾ˆå°æ—¶ï¼Œåªéœ€ä¸€ä¸ªåº”ç”¨ï¼Œå°†æ‰€æœ‰åŠŸèƒ½éƒ½éƒ¨ç½²åœ¨ä¸€èµ·ï¼Œä»¥å‡å°‘éƒ¨ç½²èŠ‚ç‚¹å’Œæˆæœ¬ã€‚æ­¤æ—¶ï¼Œç”¨äºŽç®€åŒ–å¢žåˆ æ”¹æŸ¥å·¥ä½œé‡çš„æ•°æ®è®¿é—®æ¡†æž¶(ORM)æ˜¯å…³é”®ã€‚é€‚ç”¨äºŽå°åž‹ç½‘ç«™ï¼Œå°åž‹ç®¡ç†ç³»ç»Ÿï¼Œå°†æ‰€æœ‰åŠŸèƒ½éƒ½éƒ¨ç½²åˆ°ä¸€ä¸ªåŠŸèƒ½é‡Œï¼Œç®€å•æ˜“ç”¨ã€‚ç¼ºç‚¹ï¼š 1ã€æ€§èƒ½æ‰©å±•æ¯”è¾ƒéš¾â€‹ 2ã€ååŒå¼€å‘é—®é¢˜â€‹ 3ã€ä¸åˆ©äºŽå‡çº§ç»´æŠ¤åž‚ç›´åº”ç”¨æž¶æž„å½“è®¿é—®é‡é€æ¸å¢žå¤§ï¼Œå•ä¸€åº”ç”¨å¢žåŠ æœºå™¨å¸¦æ¥çš„åŠ é€Ÿåº¦è¶Šæ¥è¶Šå°ï¼Œå°†åº”ç”¨æ‹†æˆäº’ä¸ç›¸å¹²çš„å‡ ä¸ªåº”ç”¨ï¼Œä»¥æå‡æ•ˆçŽ‡ã€‚æ­¤æ—¶ï¼Œç”¨äºŽåŠ é€Ÿå‰ç«¯é¡µé¢å¼€å‘çš„Webæ¡†æž¶(MVC)æ˜¯å…³é”®ã€‚é€šè¿‡åˆ‡åˆ†ä¸šåŠ¡æ¥å®žçŽ°å„ä¸ªæ¨¡å—ç‹¬ç«‹éƒ¨ç½²ï¼Œé™ä½Žäº†ç»´æŠ¤å’Œéƒ¨ç½²çš„éš¾åº¦ï¼Œå›¢é˜Ÿå„å¸å…¶èŒæ›´æ˜“ç®¡ç†ï¼Œæ€§èƒ½æ‰©å±•ä¹Ÿæ›´æ–¹ä¾¿ï¼Œæ›´æœ‰é’ˆå¯¹æ€§ã€‚ç¼ºç‚¹ï¼š å…¬ç”¨æ¨¡å—æ— æ³•é‡å¤åˆ©ç”¨ï¼Œå¼€å‘æ€§çš„æµªè´¹åˆ†å¸ƒå¼æœåŠ¡æž¶æž„å½“åž‚ç›´åº”ç”¨è¶Šæ¥è¶Šå¤šï¼Œåº”ç”¨ä¹‹é—´äº¤äº’ä¸å¯é¿å…ï¼Œå°†æ ¸å¿ƒä¸šåŠ¡æŠ½å–å‡ºæ¥ï¼Œä½œä¸ºç‹¬ç«‹çš„æœåŠ¡ï¼Œé€æ¸å½¢æˆç¨³å®šçš„æœåŠ¡ä¸­å¿ƒï¼Œä½¿å‰ç«¯åº”ç”¨èƒ½æ›´å¿«é€Ÿçš„å“åº”å¤šå˜çš„å¸‚åœºéœ€æ±‚ã€‚æ­¤æ—¶ï¼Œç”¨äºŽæé«˜ä¸šåŠ¡å¤ç”¨åŠæ•´åˆçš„****åˆ†å¸ƒå¼æœåŠ¡æ¡†æž¶(RPC)****æ˜¯å…³é”®ã€‚æµåŠ¨è®¡ç®—æž¶æž„å½“æœåŠ¡è¶Šæ¥è¶Šå¤šï¼Œå®¹é‡çš„è¯„ä¼°ï¼Œå°æœåŠ¡èµ„æºçš„æµªè´¹ç­‰é—®é¢˜é€æ¸æ˜¾çŽ°ï¼Œæ­¤æ—¶éœ€å¢žåŠ ä¸€ä¸ªè°ƒåº¦ä¸­å¿ƒåŸºäºŽè®¿é—®åŽ‹åŠ›å®žæ—¶ç®¡ç†é›†ç¾¤å®¹é‡ï¼Œæé«˜é›†ç¾¤åˆ©ç”¨çŽ‡ã€‚æ­¤æ—¶ï¼Œç”¨äºŽæé«˜æœºå™¨åˆ©ç”¨çŽ‡çš„èµ„æºè°ƒåº¦å’Œæ²»ç†ä¸­å¿ƒ(SOA)[ Service Oriented Architecture]æ˜¯å…³é”®ã€‚Â¶äºŒã€RPCçš„æ¦‚å¿µÂ¶1ã€RPCæ¦‚å¿µRPCã€Remote Procedure Callã€‘æ˜¯æŒ‡è¿œç¨‹è¿‡ç¨‹è°ƒç”¨ï¼Œæ˜¯ä¸€ç§è¿›ç¨‹é—´é€šä¿¡æ–¹å¼ï¼Œä»–æ˜¯ä¸€ç§æŠ€æœ¯çš„æ€æƒ³ï¼Œè€Œä¸æ˜¯è§„èŒƒã€‚å®ƒå…è®¸ç¨‹åºè°ƒç”¨å¦ä¸€ä¸ªåœ°å€ç©ºé—´ï¼ˆé€šå¸¸æ˜¯å…±äº«ç½‘ç»œçš„å¦ä¸€å°æœºå™¨ä¸Šï¼‰çš„è¿‡ç¨‹æˆ–å‡½æ•°ï¼Œè€Œä¸ç”¨ç¨‹åºå‘˜æ˜¾å¼ç¼–ç è¿™ä¸ªè¿œç¨‹è°ƒç”¨çš„ç»†èŠ‚ã€‚å³ç¨‹åºå‘˜æ— è®ºæ˜¯è°ƒç”¨æœ¬åœ°çš„è¿˜æ˜¯è¿œç¨‹çš„å‡½æ•°ï¼Œæœ¬è´¨ä¸Šç¼–å†™çš„è°ƒç”¨ä»£ç åŸºæœ¬ç›¸åŒã€‚Â¶2ã€RPCåŸºæœ¬åŽŸç†RPCä¸¤ä¸ªæ ¸å¿ƒæ¨¡å—ï¼šé€šè®¯ï¼Œåºåˆ—åŒ–ã€‚Â¶ä¸‰ã€Dubboæ ¸å¿ƒæ¦‚å¿µÂ¶1ã€ç®€ä»‹Apache Dubbo (incubating) |ËˆdÊŒbÉ™ÊŠ| æ˜¯ä¸€æ¬¾é«˜æ€§èƒ½ã€è½»é‡çº§çš„å¼€æºJava RPCæ¡†æž¶ï¼Œå®ƒæä¾›äº†ä¸‰å¤§æ ¸å¿ƒèƒ½åŠ›ï¼šé¢å‘æŽ¥å£çš„è¿œç¨‹æ–¹æ³•è°ƒç”¨ï¼Œæ™ºèƒ½å®¹é”™å’Œè´Ÿè½½å‡è¡¡ï¼Œä»¥åŠæœåŠ¡è‡ªåŠ¨æ³¨å†Œå’Œå‘çŽ°ã€‚å®˜ç½‘ï¼šhttp://dubbo.apache.org/Â¶2ã€åŸºæœ¬æ¦‚å¿µç»„ä»¶è§’è‰²æœåŠ¡æä¾›è€…ï¼ˆProviderï¼‰ï¼šæš´éœ²æœåŠ¡çš„æœåŠ¡æä¾›æ–¹ï¼ŒæœåŠ¡æä¾›è€…åœ¨å¯åŠ¨æ—¶ï¼Œå‘æ³¨å†Œä¸­å¿ƒæ³¨å†Œè‡ªå·±æä¾›çš„æœåŠ¡ã€‚æœåŠ¡æ¶ˆè´¹è€…ï¼ˆConsumerï¼‰: è°ƒç”¨è¿œç¨‹æœåŠ¡çš„æœåŠ¡æ¶ˆè´¹æ–¹ï¼ŒæœåŠ¡æ¶ˆè´¹è€…åœ¨å¯åŠ¨æ—¶ï¼Œå‘æ³¨å†Œä¸­å¿ƒè®¢é˜…è‡ªå·±æ‰€éœ€çš„æœåŠ¡ï¼ŒæœåŠ¡æ¶ˆè´¹è€…ï¼Œä»Žæä¾›è€…åœ°å€åˆ—è¡¨ä¸­ï¼ŒåŸºäºŽè½¯è´Ÿè½½å‡è¡¡ç®—æ³•ï¼Œé€‰ä¸€å°æä¾›è€…è¿›è¡Œè°ƒç”¨ï¼Œå¦‚æžœè°ƒç”¨å¤±è´¥ï¼Œå†é€‰å¦ä¸€å°è°ƒç”¨ã€‚æ³¨å†Œä¸­å¿ƒï¼ˆRegistryï¼‰ï¼šæ³¨å†Œä¸­å¿ƒè¿”å›žæœåŠ¡æä¾›è€…åœ°å€åˆ—è¡¨ç»™æ¶ˆè´¹è€…ï¼Œå¦‚æžœæœ‰å˜æ›´ï¼Œæ³¨å†Œä¸­å¿ƒå°†åŸºäºŽé•¿è¿žæŽ¥æŽ¨é€å˜æ›´æ•°æ®ç»™æ¶ˆè´¹è€…ç›‘æŽ§ä¸­å¿ƒï¼ˆMonitorï¼‰ï¼šæœåŠ¡æ¶ˆè´¹è€…å’Œæä¾›è€…ï¼Œåœ¨å†…å­˜ä¸­ç´¯è®¡è°ƒç”¨æ¬¡æ•°å’Œè°ƒç”¨æ—¶é—´ï¼Œå®šæ—¶æ¯åˆ†é’Ÿå‘é€ä¸€æ¬¡ç»Ÿè®¡æ•°æ®åˆ°ç›‘æŽ§ä¸­å¿ƒè°ƒç”¨å…³ç³»è¯´æ˜Žl æœåŠ¡å®¹å™¨è´Ÿè´£å¯åŠ¨ï¼ŒåŠ è½½ï¼Œè¿è¡ŒæœåŠ¡æä¾›è€…ã€‚l æœåŠ¡æä¾›è€…åœ¨å¯åŠ¨æ—¶ï¼Œå‘æ³¨å†Œä¸­å¿ƒæ³¨å†Œè‡ªå·±æä¾›çš„æœåŠ¡ã€‚l æœåŠ¡æ¶ˆè´¹è€…åœ¨å¯åŠ¨æ—¶ï¼Œå‘æ³¨å†Œä¸­å¿ƒè®¢é˜…è‡ªå·±æ‰€éœ€çš„æœåŠ¡ã€‚l æ³¨å†Œä¸­å¿ƒè¿”å›žæœåŠ¡æä¾›è€…åœ°å€åˆ—è¡¨ç»™æ¶ˆè´¹è€…ï¼Œå¦‚æžœæœ‰å˜æ›´ï¼Œæ³¨å†Œä¸­å¿ƒå°†åŸºäºŽé•¿è¿žæŽ¥æŽ¨é€å˜æ›´æ•°æ®ç»™æ¶ˆè´¹è€…ã€‚l æœåŠ¡æ¶ˆè´¹è€…ï¼Œä»Žæä¾›è€…åœ°å€åˆ—è¡¨ä¸­ï¼ŒåŸºäºŽè½¯è´Ÿè½½å‡è¡¡ç®—æ³•ï¼Œé€‰ä¸€å°æä¾›è€…è¿›è¡Œè°ƒç”¨ï¼Œå¦‚æžœè°ƒç”¨å¤±è´¥ï¼Œå†é€‰å¦ä¸€å°è°ƒç”¨ã€‚l æœåŠ¡æ¶ˆè´¹è€…å’Œæä¾›è€…ï¼Œåœ¨å†…å­˜ä¸­ç´¯è®¡è°ƒç”¨æ¬¡æ•°å’Œè°ƒç”¨æ—¶é—´ï¼Œå®šæ—¶æ¯åˆ†é’Ÿå‘é€ä¸€æ¬¡ç»Ÿè®¡æ•°æ®åˆ°ç›‘æŽ§ä¸­å¿ƒã€‚Â¶å››ã€DubboçŽ¯å¢ƒæ­å»ºÂ¶1ã€å®‰è£…æ³¨å†Œä¸­å¿ƒZookeeperï¼ˆwindowsï¼‰Â¶1.1 ä¸‹è½½zookeeperå®˜ç½‘ä¸‹è½½ç½‘å€ https://archive.apache.org/dist/zookeeper/zookeeper-3.4.13/Â¶1.2 è§£åŽ‹zookeeperè§£åŽ‹åŽè¿è¡ŒzkServer.cmdï¼Œåˆæ¬¡è¿è¡Œä¼šæŠ¥é”™ï¼ŒåŽŸå› æ˜¯æ²¡æœ‰zoo.cfgé…ç½®æ–‡ä»¶ã€‚Â¶1.3 ä¿®æ”¹zoo.cfgé…ç½®æ–‡ä»¶å°†confä¸‹çš„zoo_sample.cfgå¤åˆ¶ä¸€ä»½æ”¹åä¸ºzoo.cfgå³å¯ã€‚æ³¨æ„å‡ ä¸ªé‡è¦ä½ç½®ï¼š12dataDir=../data #ä¸´æ—¶æ•°æ®å­˜å‚¨çš„ç›®å½•ï¼ˆå¯å†™ç›¸å¯¹è·¯å¾„ï¼‰clientPort=2181 #zookeeperçš„ç«¯å£å·ä¿®æ”¹å®ŒæˆåŽå†æ¬¡å¯åŠ¨zkServer.cmdÂ¶1.4 æµ‹è¯•æ˜¯å¦æ­å»ºå®Œæˆç‚¹å‡»è¿è¡ŒzkCli.cmd123ls / #åˆ—å‡ºzookeeperæ ¹ä¸‹ä¿å­˜çš„æ‰€æœ‰èŠ‚ç‚¹create -e /qcmoke 123456 #åˆ›å»ºä¸€ä¸ªqcmokeèŠ‚ç‚¹ï¼Œå€¼ä¸º123456get /qcmoke #èŽ·å–/qcmokeèŠ‚ç‚¹çš„å€¼ï¼Œå¦‚æžœå‡ºæ¥æ•°æ®å°±è¡¨ç¤ºæ­å»ºå®ŒæˆZookeeperæ˜¯ä¸€ä¸ªæ ‘åž‹çš„ç›®å½•æœåŠ¡ï¼Œæ”¯æŒå˜æ›´æŽ¨é€ï¼Œå¯ä½œä¸º Dubbo æœåŠ¡çš„æ³¨å†Œä¸­å¿ƒã€‚Â¶2ã€å®‰è£…ç®¡ç†æŽ§åˆ¶å°dubbo-adminÂ¶2.1ä¸‹è½½dubbo-adminä¸‹è½½åœ°å€ï¼šhttps://github.com/apache/incubator-dubbo-ops2.2 è¿›å…¥dubbo-adminç›®å½•ï¼Œä¿®æ”¹dubbo-adminé…ç½®ä¿®æ”¹src\main\resources\application.properties æŒ‡å®šzookeeperåœ°å€ã€‚123spring.guest.password=guestdubbo.registry.address=zookeeper://127.0.0.1:2181Â¶2.3 è¿è¡Œæ‰“åŒ…åœ¨dubbo-admin/ç›®å½•é‡Œæ‰§è¡Œå‘½ä»¤è¿è¡Œæ‰“åŒ…dubbo-admin1mvn clean package -Dmaven.test.skip=trueÂ¶2.4 è¿è¡Œdubbo-adminåœ¨dubbo-admin/targetç›®å½•é‡Œæ‰§è¡Œå‘½ä»¤è¿è¡Œdubbo-admin1java -jar dubbo-admin-0.0.1-SNAPSHOT.jar #æ³¨æ„è¦å…ˆå¯åŠ¨zookeeperÂ¶2.5 è®¿é—®ç›‘æŽ§ç®¡ç†æŽ§åˆ¶å°http://localhost:7001é»˜è®¤ä½¿ç”¨root/rootç™»é™†Â¶äº”ã€Springä¸­ä½¿ç”¨DubboæŸä¸ªç”µå•†ç³»ç»Ÿï¼Œè®¢å•æœåŠ¡éœ€è¦è°ƒç”¨ç”¨æˆ·æœåŠ¡èŽ·å–æŸä¸ªç”¨æˆ·çš„æ‰€æœ‰åœ°å€ï¼›æˆ‘ä»¬çŽ°åœ¨ éœ€è¦åˆ›å»ºä¸¤ä¸ªæœåŠ¡æ¨¡å—è¿›è¡Œæµ‹è¯•æ¨¡å—åŠŸèƒ½è®¢å•æœåŠ¡webæ¨¡å—åˆ›å»ºè®¢å•ç­‰ç”¨æˆ·æœåŠ¡serviceæ¨¡å—æŸ¥è¯¢ç”¨æˆ·åœ°å€ç­‰æµ‹è¯•é¢„æœŸç»“æžœï¼šâ€‹ è®¢å•æœåŠ¡webæ¨¡å—åœ¨AæœåŠ¡å™¨ï¼Œç”¨æˆ·æœåŠ¡æ¨¡å—åœ¨BæœåŠ¡å™¨ï¼ŒAå¯ä»¥è¿œç¨‹è°ƒç”¨Bçš„åŠŸèƒ½ã€‚Â¶1. åˆ›å»ºå¦‚ä¸‹ä¸‰ä¸ªmavenå·¥ç¨‹1234.â”œâ”€â”€ gmall-interface #å…¬å…±æ¨¡å—ï¼Œå¤šæœåŠ¡ä¹‹é—´çš„å…¬å…±æŽ¥å£å’Œå®žä½“ç±»â”œâ”€â”€ order-service-consumer #æœåŠ¡æä¾›è€…ï¼Œè®¢å•æœåŠ¡webæ¨¡å—â””â”€â”€ user-service-provider #æœåŠ¡æ¶ˆè´¹è€…ï¼Œç”¨æˆ·æœåŠ¡serviceæ¨¡å—Â¶1.1 gmall-interfaceæ¨¡å—1234567891011121314.â”œâ”€â”€ pom.xmlâ””â”€â”€ src â””â”€â”€ main â”œâ”€â”€ java â”‚ â””â”€â”€ com â”‚ â””â”€â”€ qcmoke â”‚ â””â”€â”€ gmall â”‚ â”œâ”€â”€ bean â”‚ â”‚ â””â”€â”€ UserAddress.java â”‚ â””â”€â”€ service â”‚ â”œâ”€â”€ OrderService.java â”‚ â””â”€â”€ UserService.java â””â”€â”€ resourcespom.xml1234567891011121314151617181920&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"&gt; &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt; &lt;groupId&gt;com.qcmoke.gmall&lt;/groupId&gt; &lt;artifactId&gt;gmall-interface&lt;/artifactId&gt; &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt; &lt;dependencies&gt; &lt;!--lombok--&gt; &lt;dependency&gt; &lt;groupId&gt;org.projectlombok&lt;/groupId&gt; &lt;artifactId&gt;lombok&lt;/artifactId&gt; &lt;version&gt;1.16.20&lt;/version&gt; &lt;scope&gt;provided&lt;/scope&gt; &lt;/dependency&gt; &lt;/dependencies&gt;&lt;/project&gt;com.qcmoke.gmall.bean.UserAddress.java1234567891011121314151617181920212223package com.qcmoke.gmall.bean;import lombok.AllArgsConstructor;import lombok.Data;import lombok.NoArgsConstructor;import java.io.Serializable;/** * ç”¨æˆ·åœ°å€ */@Data@NoArgsConstructor@AllArgsConstructorpublic class UserAddress implements Serializable &#123; private Integer id; private String userAddress; //ç”¨æˆ·åœ°å€ private String userId; //ç”¨æˆ·id private String consignee; //æ”¶è´§äºº private String phoneNum; //ç”µè¯å·ç  private String isDefault; //æ˜¯å¦ä¸ºé»˜è®¤åœ°å€ Y-æ˜¯ N-å¦&#125;com.qcmoke.gmall.service.OrderService.java1234567891011121314package com.qcmoke.gmall.service;import com.qcmoke.gmall.bean.UserAddress;import java.util.List;public interface OrderService &#123; /** * åˆå§‹åŒ–è®¢å• * * @param userId */ public List&lt;UserAddress&gt; initOrder(String userId);&#125;com.qcmoke.gmall.service.UserService.java1234567891011121314151617181920package com.qcmoke.gmall.service;import com.qcmoke.gmall.bean.UserAddress;import java.util.List;/** * ç”¨æˆ·æœåŠ¡ */public interface UserService &#123; /** * æŒ‰ç…§ç”¨æˆ·idè¿”å›žæ‰€æœ‰çš„æ”¶è´§åœ°å€ * * @param userId * @return */ public List&lt;UserAddress&gt; getUserAddressList(String userId);&#125;Â¶1.2 order-service-consumeræ¨¡å—1234567891011121314.â”œâ”€â”€ pom.xmlâ””â”€â”€ src â””â”€â”€ main â”œâ”€â”€ java â”‚ â””â”€â”€ com â”‚ â””â”€â”€ qcmoke â”‚ â””â”€â”€ gmall â”‚ â”œâ”€â”€ MainApplication.java â”‚ â””â”€â”€ service â”‚ â””â”€â”€ impl â”‚ â”œâ”€â”€ UserServiceImpl.java â””â”€â”€ resources â””â”€â”€ provider.xmlpom.xml12345678910111213141516171819202122232425262728293031323334&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"&gt; &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt; &lt;groupId&gt;com.qcmoke.gmall&lt;/groupId&gt; &lt;artifactId&gt;order-service-consumer&lt;/artifactId&gt; &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt; &lt;dependencies&gt; &lt;dependency&gt; &lt;groupId&gt;com.qcmoke.gmall&lt;/groupId&gt; &lt;artifactId&gt;gmall-interface&lt;/artifactId&gt; &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt; &lt;/dependency&gt; &lt;!-- å¼•å…¥dubbo --&gt; &lt;!-- https://mvnrepository.com/artifact/com.alibaba/dubbo --&gt; &lt;dependency&gt; &lt;groupId&gt;com.alibaba&lt;/groupId&gt; &lt;artifactId&gt;dubbo&lt;/artifactId&gt; &lt;version&gt;2.6.2&lt;/version&gt; &lt;/dependency&gt; &lt;!-- æ³¨å†Œä¸­å¿ƒä½¿ç”¨çš„æ˜¯zookeeperï¼Œå¼•å…¥æ“ä½œzookeeperçš„å®¢æˆ·ç«¯ç«¯ --&gt; &lt;dependency&gt; &lt;groupId&gt;org.apache.curator&lt;/groupId&gt; &lt;artifactId&gt;curator-framework&lt;/artifactId&gt; &lt;version&gt;2.12.0&lt;/version&gt; &lt;/dependency&gt; &lt;/dependencies&gt;&lt;/project&gt;com.qcmoke.gmall.service.impl.UserServiceImpl.java123456789101112131415161718192021222324252627package com.qcmoke.gmall.service.impl;import com.qcmoke.gmall.bean.UserAddress;import com.qcmoke.gmall.service.UserService;import org.springframework.stereotype.Service;import java.util.Arrays;import java.util.List;@Service("userServiceImpl01")public class UserServiceImpl implements UserService &#123; @Override public List&lt;UserAddress&gt; getUserAddressList(String userId) &#123; System.out.println("UserServiceImpl.....old..."); // TODO Auto-generated method stub UserAddress address1 = new UserAddress(1, "åŒ—äº¬å¸‚æ˜Œå¹³åŒºå®ç¦ç§‘æŠ€å›­ç»¼åˆæ¥¼3å±‚", "1", "æŽè€å¸ˆ", "010-56253825", "Y"); UserAddress address2 = new UserAddress(2, "æ·±åœ³å¸‚å®å®‰åŒºè¥¿éƒ¨ç¡…è°·å¤§åŽ¦Båº§3å±‚ï¼ˆæ·±åœ³åˆ†æ ¡ï¼‰", "1", "çŽ‹è€å¸ˆ", "010-56253825", "N"); /*try &#123; Thread.sleep(4000); &#125; catch (InterruptedException e) &#123; e.printStackTrace(); &#125;*/ return Arrays.asList(address1, address2); &#125;&#125;provider.xml1234567891011121314151617181920212223242526272829303132&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;beans xmlns="http://www.springframework.org/schema/beans" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:dubbo="http://code.alibabatech.com/schema/dubbo" xmlns:context="http://www.springframework.org/schema/context" xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-4.3.xsd http://dubbo.apache.org/schema/dubbo http://dubbo.apache.org/schema/dubbo/dubbo.xsd http://code.alibabatech.com/schema/dubbo http://code.alibabatech.com/schema/dubbo/dubbo.xsd"&gt; &lt;context:component-scan base-package="com.qcmoke.gmall.service.impl"/&gt; &lt;!-- 1ã€æŒ‡å®šå½“å‰æœåŠ¡/åº”ç”¨çš„åå­—ï¼ˆåŒæ ·çš„æœåŠ¡åå­—ç›¸åŒï¼Œä¸è¦å’Œåˆ«çš„æœåŠ¡åŒåï¼‰ ==ã€‹åªè¦æœåŠ¡å·²å¯åŠ¨å°±ä¼šæ³¨å†Œåˆ°zookeeperæ³¨å†Œä¸­å¿ƒäº†--&gt; &lt;dubbo:application name="user-service-provider"/&gt; &lt;!-- 2ã€æŒ‡å®šæ³¨å†Œä¸­å¿ƒçš„ä½ç½® --&gt; &lt;!-- &lt;dubbo:registry address="zookeeper://127.0.0.1:2181"&gt;&lt;/dubbo:registry&gt; --&gt; &lt;dubbo:registry protocol="zookeeper" address="127.0.0.1:2181"/&gt; &lt;!-- 3ã€æŒ‡å®šé€šä¿¡è§„åˆ™ ===ã€‹ç”¨äºŽæœåŠ¡æä¾›è€…å’Œæ¶ˆè´¹è€…ä¹‹é—´çš„é€šä¿¡ nameï¼šé€šä¿¡åè®®ï¼ˆæœ‰è§„å®šè¦æ±‚ï¼‰ portï¼šé€šä¿¡ç«¯å£ï¼ˆå¯è‡ªå®šä¹‰ï¼‰ --&gt; &lt;dubbo:protocol name="dubbo" port="20882"/&gt; &lt;!-- 4ã€æš´éœ²æœåŠ¡ ===ã€‹ç”¨äºŽç»™æœåŠ¡æ¶ˆè´¹è€…æä¾›æœåŠ¡ &lt;dubbo:service&gt; interfaceï¼šæš´éœ²çš„æŽ¥å£ refï¼šæŒ‡å‘æœåŠ¡çš„çœŸæ­£çš„å®žçŽ°å¯¹è±¡ --&gt; &lt;dubbo:service interface="com.qcmoke.gmall.service.UserService" ref="userServiceImpl01"/&gt;&lt;/beans&gt;com.qcmoke.gmall.MainApplication.java1234567891011121314package com.qcmoke.gmall;import org.springframework.context.support.ClassPathXmlApplicationContext;import java.io.IOException;public class MainApplication &#123; public static void main(String[] args) throws IOException &#123; ClassPathXmlApplicationContext ioc = new ClassPathXmlApplicationContext("provider.xml");//åŠ è½½é…åˆæ–‡ä»¶ ioc.start();//å¯åŠ¨iocå®¹å™¨ System.in.read();//è¯»å–ä¸€ä¸ªå­—ç¬¦ç”¨äºŽé˜»å¡žï¼Œé˜²æ­¢iocå®¹å™¨è¿è¡Œç»ˆæ­¢ &#125;&#125;Â¶1.3 user-service-provideræ¨¡å—1234567891011121314.â”œâ”€â”€ pom.xmlâ”œâ”€â”€ srcâ”‚ â””â”€â”€ mainâ”‚ â”œâ”€â”€ javaâ”‚ â”‚ â””â”€â”€ comâ”‚ â”‚ â””â”€â”€ qcmokeâ”‚ â”‚ â””â”€â”€ gmallâ”‚ â”‚ â”œâ”€â”€ MainApplication.javaâ”‚ â”‚ â””â”€â”€ serviceâ”‚ â”‚ â””â”€â”€ implâ”‚ â”‚ â””â”€â”€ OrderServiceImpl.javaâ”‚ â””â”€â”€ resourcesâ”‚ â””â”€â”€ consumer.xmlpom.xml1234567891011121314151617181920212223242526272829303132333435&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"&gt; &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt; &lt;groupId&gt;com.qcmoke.gmall&lt;/groupId&gt; &lt;artifactId&gt;user-service-provider&lt;/artifactId&gt; &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt; &lt;dependencies&gt; &lt;dependency&gt; &lt;groupId&gt;com.qcmoke.gmall&lt;/groupId&gt; &lt;artifactId&gt;gmall-interface&lt;/artifactId&gt; &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt; &lt;/dependency&gt; &lt;!-- å¼•å…¥dubbo --&gt; &lt;!-- https://mvnrepository.com/artifact/com.alibaba/dubbo --&gt; &lt;dependency&gt; &lt;groupId&gt;com.alibaba&lt;/groupId&gt; &lt;artifactId&gt;dubbo&lt;/artifactId&gt; &lt;version&gt;2.6.2&lt;/version&gt; &lt;/dependency&gt; &lt;!-- æ³¨å†Œä¸­å¿ƒä½¿ç”¨çš„æ˜¯zookeeperï¼Œå¼•å…¥æ“ä½œzookeeperçš„å®¢æˆ·ç«¯ç«¯ --&gt; &lt;dependency&gt; &lt;groupId&gt;org.apache.curator&lt;/groupId&gt; &lt;artifactId&gt;curator-framework&lt;/artifactId&gt; &lt;version&gt;2.12.0&lt;/version&gt; &lt;/dependency&gt; &lt;/dependencies&gt;&lt;/project&gt;com.qcmoke.gmall.service.impl.OrderServiceImpl.java12345678910111213141516171819202122232425262728package com.qcmoke.gmall.service.impl;import com.qcmoke.gmall.bean.UserAddress;import com.qcmoke.gmall.service.OrderService;import com.qcmoke.gmall.service.UserService;import org.springframework.beans.factory.annotation.Autowired;import org.springframework.stereotype.Service;import java.util.List;@Servicepublic class OrderServiceImpl implements OrderService &#123; @Autowired UserService userService; @Override public List&lt;UserAddress&gt; initOrder(String userId) &#123; System.out.println("ç”¨æˆ·idï¼š" + userId); //è¿œç¨‹è°ƒç”¨user-service-provideræœåŠ¡çš„UserServiceImpl.getUserAddressList(String userId) List&lt;UserAddress&gt; addressList = userService.getUserAddressList(userId); for (UserAddress userAddress : addressList) &#123; System.out.println(userAddress.getUserAddress()); &#125; return addressList; &#125;&#125;consumer.xml1234567891011121314151617181920&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;beans xmlns="http://www.springframework.org/schema/beans" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:dubbo="http://dubbo.apache.org/schema/dubbo" xmlns:context="http://www.springframework.org/schema/context" xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-4.3.xsd http://dubbo.apache.org/schema/dubbo http://dubbo.apache.org/schema/dubbo/dubbo.xsd"&gt; &lt;context:component-scan base-package="com.qcmoke.gmall.service.impl"/&gt; &lt;!-- 1ã€æŒ‡å®šå½“å‰æœåŠ¡/åº”ç”¨çš„åå­—--&gt; &lt;dubbo:application name="order-service-consumer"/&gt; &lt;!-- 2ã€æŒ‡å®šæ³¨å†Œä¸­å¿ƒçš„ä½ç½® --&gt; &lt;dubbo:registry address="zookeeper://127.0.0.1:2181"/&gt; &lt;!--3ã€æŒ‡å®šè¦è°ƒç”¨çš„è¿œç¨‹æœåŠ¡ï¼›å£°æ˜Žéœ€è¦è°ƒç”¨çš„è¿œç¨‹æœåŠ¡çš„æŽ¥å£ï¼›ç”Ÿæˆè¿œç¨‹æœåŠ¡ä»£ç† interface: è°ƒç”¨çš„è¿œç¨‹æœåŠ¡æŽ¥å£ id: è¿œç¨‹æœåŠ¡æŽ¥å£çš„åç§° --&gt; &lt;dubbo:reference interface="com.qcmoke.gmall.service.UserService" id="userService"/&gt;&lt;/beans&gt;com.qcmoke.gmall.MainApplication.java1234567891011121314151617181920package com.qcmoke.gmall;import com.qcmoke.gmall.service.OrderService;import org.springframework.context.support.ClassPathXmlApplicationContext;import java.io.IOException;public class MainApplication &#123; @SuppressWarnings("resource") public static void main(String[] args) throws IOException &#123; ClassPathXmlApplicationContext ioc = new ClassPathXmlApplicationContext("consumer.xml"); OrderService orderService = ioc.getBean(OrderService.class); orderService.initOrder("1"); System.out.println("è°ƒç”¨å®Œæˆ...."); System.in.read(); &#125;&#125;Â¶1.4 æµ‹è¯•å¯åŠ¨zookeeperï¼Œç„¶åŽå¯åŠ¨dubbo-adminï¼Œå†å¯åŠ¨user-service-providerï¼Œæœ€åŽå¯åŠ¨order-service-consumerã€‚æŸ¥çœ‹order-service-consumerçš„è¾“å‡ºç»“æžœã€‚Â¶2. å®‰è£…ç›‘æŽ§ä¸­å¿ƒÂ¶1ã€ä¸‹è½½ dubbo-opshttps://github.com/apache/incubator-dubbo-opsÂ¶2ã€æ‰“åŒ…dubbo-monitor-simpleè¿›å…¥incubator-dubbo-ops-master/dubbo-monitor-simpleä¸‹è¿è¡Œä»¥ä¸‹å‘½ä»¤12$ mvn package#mvn clean package -Dmaven.test.skip=trueÂ¶3. è¿›å…¥target/ç›®å½•è§£åŽ‹dubbo-monitor-simple-2.0.0-assembly.tar.gzå¾—åˆ°dubbo-monitor-simple-2.0.0,å¹¶å°†ä¹‹ç§»åŠ¨åˆ°éžtargetçš„ç›®å½•åŽ»ã€‚ä¿®æ”¹dubbo-monitor-simple-2.0.0/conf/dubbo.propertiesçš„ä»¥ä¸‹ä¸‰å¤„å¿…è¦é…ç½®ï¼š123456# æ³¨å†Œä¸­å¿ƒçš„åœ°å€dubbo.registry.address=zookeeper://127.0.0.1:2181# å…¶ä»–æœåŠ¡ä¸Žç›‘æŽ§ä¸­å¿ƒçš„é€šä¿¡ç«¯å£dubbo.protocol.port=7070# ç›‘æŽ§ä¸­å¿ƒçš„webè®¿é—®ç«¯å£dubbo.jetty.port=8080Â¶4ã€è¿è¡Œå¯åŠ¨ç›‘æŽ§ä¸­å¿ƒmonitorè¿è¡Œdubbo-monitor-simple-2.0.0/assembly.bin/start.batæ³¨æ„ï¼šå‰æè¦å…ˆå¯åŠ¨zookeeperå’Œdubbo-adminÂ¶5ã€å¯åŠ¨è®¿é—®monitorç®¡ç†é¡µé¢è®¿é—® http://localhost:8080Â¶6ã€æœåŠ¡ä¸­é…ç½®monitoråœ¨æœåŠ¡çš„iocå®¹å™¨ä¸­é…ç½®å¦‚ä¸‹å·²èƒ½å¤Ÿå’Œç›‘æŽ§ä¸­å¿ƒå»ºç«‹è¿žæŽ¥å…³ç³»ã€‚12345&lt;!-- è¿žæŽ¥ç›‘æŽ§ä¸­å¿ƒ protocol="registry":è¡¨ç¤ºå½“å‰æœåŠ¡ä»Žæ³¨å†Œä¸­å¿ƒå‘çŽ°ç›‘æŽ§ä¸­å¿ƒçš„åœ°å€ã€‚ address="127.0.0.1:7070":è¡¨ç¤ºå½“å‰æœåŠ¡æ˜¯ç›´è¿žç›‘æŽ§ä¸­å¿ƒï¼Œè€Œä¸æ˜¯ä»Žæ³¨å†Œä¸­å¿ƒå‘çŽ°çš„ã€‚--&gt;&lt;dubbo:monitor protocol="registry"/&gt; &lt;!--&lt;dubbo:monitor address="127.0.0.1:7070"/&gt;--&gt;ä¿®æ”¹order-service-consumeræ¨¡å—çš„consumer.xml123456789101112131415161718192021222324252627&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;beans xmlns="http://www.springframework.org/schema/beans" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:dubbo="http://dubbo.apache.org/schema/dubbo" xmlns:context="http://www.springframework.org/schema/context" xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-4.3.xsd http://dubbo.apache.org/schema/dubbo http://dubbo.apache.org/schema/dubbo/dubbo.xsd"&gt; &lt;context:component-scan base-package="com.qcmoke.gmall.service.impl"/&gt; &lt;!-- 1ã€æŒ‡å®šå½“å‰æœåŠ¡/åº”ç”¨çš„åå­—--&gt; &lt;dubbo:application name="order-service-consumer"/&gt; &lt;!-- 2ã€æŒ‡å®šæ³¨å†Œä¸­å¿ƒçš„ä½ç½® --&gt; &lt;dubbo:registry address="zookeeper://127.0.0.1:2181"/&gt; &lt;!--3ã€æŒ‡å®šè¦è°ƒç”¨çš„è¿œç¨‹æœåŠ¡ï¼›å£°æ˜Žéœ€è¦è°ƒç”¨çš„è¿œç¨‹æœåŠ¡çš„æŽ¥å£ï¼›ç”Ÿæˆè¿œç¨‹æœåŠ¡ä»£ç† interface: è°ƒç”¨çš„è¿œç¨‹æœåŠ¡æŽ¥å£ id: è¿œç¨‹æœåŠ¡æŽ¥å£çš„åç§° --&gt; &lt;dubbo:reference interface="com.qcmoke.gmall.service.UserService" id="userService"/&gt; &lt;!-- è¿žæŽ¥ç›‘æŽ§ä¸­å¿ƒ protocol="registry":è¡¨ç¤ºå½“å‰æœåŠ¡ä»Žæ³¨å†Œä¸­å¿ƒå‘çŽ°ç›‘æŽ§ä¸­å¿ƒçš„åœ°å€ã€‚ address="127.0.0.1:7070":è¡¨ç¤ºå½“å‰æœåŠ¡æ˜¯ç›´è¿žç›‘æŽ§ä¸­å¿ƒï¼Œè€Œä¸æ˜¯ä»Žæ³¨å†Œä¸­å¿ƒå‘çŽ°çš„ã€‚ --&gt; &lt;dubbo:monitor protocol="registry"/&gt; &lt;!--&lt;dubbo:monitor address="127.0.0.1:7070"/&gt;--&gt;&lt;/beans&gt;ä¿®æ”¹user-service-providerçš„provider.xml123456789101112131415161718192021222324252627282930313233343536373839&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;beans xmlns="http://www.springframework.org/schema/beans" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:dubbo="http://code.alibabatech.com/schema/dubbo" xmlns:context="http://www.springframework.org/schema/context" xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-4.3.xsd http://dubbo.apache.org/schema/dubbo http://dubbo.apache.org/schema/dubbo/dubbo.xsd http://code.alibabatech.com/schema/dubbo http://code.alibabatech.com/schema/dubbo/dubbo.xsd"&gt; &lt;context:component-scan base-package="com.qcmoke.gmall.service.impl"/&gt; &lt;!-- 1ã€æŒ‡å®šå½“å‰æœåŠ¡/åº”ç”¨çš„åå­—ï¼ˆåŒæ ·çš„æœåŠ¡åå­—ç›¸åŒï¼Œä¸è¦å’Œåˆ«çš„æœåŠ¡åŒåï¼‰ ==ã€‹åªè¦æœåŠ¡å·²å¯åŠ¨å°±ä¼šæ³¨å†Œåˆ°zookeeperæ³¨å†Œä¸­å¿ƒäº†--&gt; &lt;dubbo:application name="user-service-provider"/&gt; &lt;!-- 2ã€æŒ‡å®šæ³¨å†Œä¸­å¿ƒçš„ä½ç½® --&gt; &lt;!-- &lt;dubbo:registry address="zookeeper://127.0.0.1:2181"&gt;&lt;/dubbo:registry&gt; --&gt; &lt;dubbo:registry protocol="zookeeper" address="127.0.0.1:2181"/&gt; &lt;!-- 3ã€æŒ‡å®šé€šä¿¡è§„åˆ™ ===ã€‹ç”¨äºŽæœåŠ¡æä¾›è€…å’Œæ¶ˆè´¹è€…ä¹‹é—´çš„é€šä¿¡ nameï¼šé€šä¿¡åè®®ï¼ˆæœ‰è§„å®šè¦æ±‚ï¼‰ portï¼šé€šä¿¡ç«¯å£ï¼ˆå¯è‡ªå®šä¹‰ï¼‰ --&gt; &lt;dubbo:protocol name="dubbo" port="20882"/&gt; &lt;!-- 4ã€æš´éœ²æœåŠ¡ ===ã€‹ç”¨äºŽç»™æœåŠ¡æ¶ˆè´¹è€…æä¾›æœåŠ¡ &lt;dubbo:service&gt; interfaceï¼šæš´éœ²çš„æŽ¥å£ refï¼šæŒ‡å‘æœåŠ¡çš„çœŸæ­£çš„å®žçŽ°å¯¹è±¡ --&gt; &lt;dubbo:service interface="com.qcmoke.gmall.service.UserService" ref="userServiceImpl01"/&gt; &lt;!-- è¿žæŽ¥ç›‘æŽ§ä¸­å¿ƒ protocol="registry":è¡¨ç¤ºå½“å‰æœåŠ¡ä»Žæ³¨å†Œä¸­å¿ƒå‘çŽ°ç›‘æŽ§ä¸­å¿ƒçš„åœ°å€ã€‚ address="127.0.0.1:7070":è¡¨ç¤ºå½“å‰æœåŠ¡æ˜¯ç›´è¿žç›‘æŽ§ä¸­å¿ƒï¼Œè€Œä¸æ˜¯ä»Žæ³¨å†Œä¸­å¿ƒå‘çŽ°çš„ã€‚ --&gt; &lt;dubbo:monitor protocol="registry"/&gt; &lt;!--&lt;dubbo:monitor address="127.0.0.1:7070"/&gt;--&gt;&lt;/beans&gt;Â¶7ã€æµ‹è¯•monitorå¯åŠ¨é¡ºåºï¼šzookeepeâ€”&gt;dubbo-adminâ€”&gt;monitorâ€”&gt;user-service-providerâ€”&gt;order-service-consumerÂ¶å…­ã€SpringBootä¸­ä½¿ç”¨DubboÂ¶1ã€æ¦‚è¿°å¯¹äºŽæœåŠ¡æä¾›è€…ï¼š123456789101112131415161718192021221.å¼•å…¥ä¾èµ–&lt;dependency&gt; &lt;groupId&gt;com.alibaba.boot&lt;/groupId&gt; &lt;artifactId&gt;dubbo-spring-boot-starter&lt;/artifactId&gt; &lt;version&gt;0.2.0&lt;/version&gt;&lt;/dependency&gt;2.é…ç½®æ–‡ä»¶ # æœåŠ¡å”¯ä¸€åç§° dubbo.application.name=user-service-provider # æ³¨å†Œä¸­å¿ƒåè®®å’Œåœ°å€ dubbo.registry.protocol=zookeeper dubbo.registry.address=127.0.0.1:2181 # é€šä¿¡åè®®å’Œç«¯å£ dubbo.protocol.name=dubbo #dubbo.protocol.port=20881 # ç›‘æŽ§ä¸­å¿ƒ dubbo.monitor.protocol=registry3.æ³¨è§£ åœ¨å¯åŠ¨ç±»ä¸ŠåŠ @EnableDubbo åœ¨éœ€è¦æš´éœ²çš„æœåŠ¡ä¸Šä½¿ç”¨@com.alibaba.dubbo.config.annotation.Serviceå¯¹äºŽæœåŠ¡æ¶ˆè´¹è€…ï¼š12345678910111213141516171.å¼•å…¥ä¾èµ–&lt;dependency&gt; &lt;groupId&gt;com.alibaba.boot&lt;/groupId&gt; &lt;artifactId&gt;dubbo-spring-boot-starter&lt;/artifactId&gt; &lt;version&gt;0.2.0&lt;/version&gt;&lt;/dependency&gt;2.é…ç½®æ–‡ä»¶ server.port=8081 dubbo.application.name=boot-order-service-consumer dubbo.registry.protocol=zookeeper dubbo.registry.address=127.0.0.1:2181 dubbo.monitor.protocol=registry3.æ³¨è§£ åœ¨å¯åŠ¨ç±»ä¸ŠåŠ @EnableDubbo åœ¨æ³¨å…¥è¿œç¨‹æœåŠ¡å¯¹è±¡æ—¶ä½¿ç”¨çš„æ˜¯@ReferenceÂ¶3ã€ä¸‰ä¸ªmavenæ¨¡å—123456789101112131415161718192021222324252627282930313233343536373839404142434445.â”œâ”€â”€ boot-order-service-consumerâ”‚ â”œâ”€â”€ pom.xmlâ”‚ â””â”€â”€ srcâ”‚ â””â”€â”€ mainâ”‚ â”œâ”€â”€ javaâ”‚ â”‚ â””â”€â”€ comâ”‚ â”‚ â””â”€â”€ qcmokeâ”‚ â”‚ â””â”€â”€ gmallâ”‚ â”‚ â”œâ”€â”€ ConsumerBootApplication.javaâ”‚ â”‚ â”œâ”€â”€ controllerâ”‚ â”‚ â”‚ â””â”€â”€ OrderController.javaâ”‚ â”‚ â””â”€â”€ serviceâ”‚ â”‚ â””â”€â”€ implâ”‚ â”‚ â””â”€â”€ OrderServiceImpl.javaâ”‚ â””â”€â”€ resourcesâ”‚ â””â”€â”€ application.propertiesâ”œâ”€â”€ boot-user-service-providerâ”‚ â”œâ”€â”€ pom.xmlâ”‚ â””â”€â”€ srcâ”‚ â””â”€â”€ mainâ”‚ â”œâ”€â”€ javaâ”‚ â”‚ â””â”€â”€ comâ”‚ â”‚ â””â”€â”€ qcmokeâ”‚ â”‚ â””â”€â”€ gmallâ”‚ â”‚ â”œâ”€â”€ ProviderBootApplication.javaâ”‚ â”‚ â””â”€â”€ serviceâ”‚ â”‚ â””â”€â”€ implâ”‚ â”‚ â””â”€â”€ UserServiceImpl.javaâ”‚ â””â”€â”€ resourcesâ”‚ â””â”€â”€ application.propertiesâ”œâ”€â”€ gmall-interfaceâ”‚ â”œâ”€â”€ pom.xmlâ”‚ â””â”€â”€ srcâ”‚ â””â”€â”€ mainâ”‚ â”œâ”€â”€ javaâ”‚ â”‚ â””â”€â”€ comâ”‚ â”‚ â””â”€â”€ qcmokeâ”‚ â”‚ â””â”€â”€ gmallâ”‚ â”‚ â”œâ”€â”€ beanâ”‚ â”‚ â”‚ â””â”€â”€ UserAddress.javaâ”‚ â”‚ â””â”€â”€ serviceâ”‚ â”‚ â”œâ”€â”€ OrderService.javaâ”‚ â”‚ â””â”€â”€ UserService.javaâ”‚ â””â”€â”€ resourcesÂ¶1.1 gmall-interfaceå’Œâ€œSpringBootä¸­ä½¿ç”¨Dubboâ€ä¸­çš„å†…å®¹ä¸€æ ·ï¼Œè¿™é‡Œä¸å†é˜è¿°ã€‚Â¶1.2 boot-user-service-provideræ¨¡å—pom.xml12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd"&gt; &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt; &lt;groupId&gt;com.qcmoke.gmall&lt;/groupId&gt; &lt;artifactId&gt;boot-user-service-provider&lt;/artifactId&gt; &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt; &lt;packaging&gt;jar&lt;/packaging&gt; &lt;name&gt;boot-user-service-provider&lt;/name&gt; &lt;description&gt;Demo project for Spring Boot&lt;/description&gt; &lt;parent&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt; &lt;version&gt;2.0.4.RELEASE&lt;/version&gt; &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt; &lt;/parent&gt; &lt;properties&gt; &lt;java.version&gt;1.8&lt;/java.version&gt; &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt; &lt;project.reporting.outputEncoding&gt;UTF-8&lt;/project.reporting.outputEncoding&gt; &lt;/properties&gt; &lt;dependencies&gt; &lt;dependency&gt; &lt;groupId&gt;com.alibaba.boot&lt;/groupId&gt; &lt;artifactId&gt;dubbo-spring-boot-starter&lt;/artifactId&gt; &lt;version&gt;0.2.0&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;com.qcmoke.gmall&lt;/groupId&gt; &lt;artifactId&gt;gmall-interface&lt;/artifactId&gt; &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter&lt;/artifactId&gt; &lt;/dependency&gt; &lt;/dependencies&gt; &lt;build&gt; &lt;plugins&gt; &lt;plugin&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt; &lt;/plugin&gt; &lt;/plugins&gt; &lt;/build&gt;&lt;/project&gt;com.qcmoke.gmall.ProviderBootApplication.java12345678910111213package com.qcmoke.gmall;import com.alibaba.dubbo.config.spring.context.annotation.EnableDubbo;import org.springframework.boot.SpringApplication;import org.springframework.boot.autoconfigure.SpringBootApplication;@EnableDubbo@SpringBootApplicationpublic class ProviderBootApplication &#123; public static void main(String[] args) &#123; SpringApplication.run(ProviderBootApplication.class, args); &#125;&#125;com.qcmoke.gmall.service.impl.UserServiceImpl.java1234567891011121314151617181920212223242526272829package com.qcmoke.gmall.service.impl;import com.qcmoke.gmall.bean.UserAddress;import com.qcmoke.gmall.service.UserService;import org.springframework.stereotype.Service;import java.util.Arrays;import java.util.List;@com.alibaba.dubbo.config.annotation.Service//æš´éœ²æœåŠ¡,å¹¶æ³¨å†Œåˆ°æ³¨å†Œä¸­å¿ƒ@Servicepublic class UserServiceImpl implements UserService &#123; @Override public List&lt;UserAddress&gt; getUserAddressList(String userId) &#123; System.out.println("UserServiceImpl..æœåŠ¡1....."); UserAddress address1 = new UserAddress(1, "åŒ—äº¬ä¸œè·¯", "1", "æŽè€å¸ˆ", "010-123456", "Y"); UserAddress address2 = new UserAddress(2, "æ·±åœ³å®å®‰", "1", "çŽ‹è€å¸ˆ", "010-123457", "N"); /* //æ¨¡æ‹Ÿå¼‚å¸¸æŠ¥é”™ if (Math.random() &gt; 0.5) &#123; throw new RuntimeException(); &#125; */ return Arrays.asList(address1, address2); &#125;&#125;application.properties123456789101112# æœåŠ¡å”¯ä¸€åç§°dubbo.application.name=boot-user-service-provider# æ³¨å†Œä¸­å¿ƒåè®®å’Œåœ°å€dubbo.registry.address=zookeeper://127.0.0.1:2181# é€šä¿¡åè®®å’Œç«¯å£dubbo.protocol.name=dubbodubbo.protocol.port=20881# ç›‘æŽ§ä¸­å¿ƒdubbo.monitor.protocol=registry#é…ç½®Dubboç¼“å­˜æ–‡ä»¶ã€‚å¦‚æžœåœ¨æœ¬åœ°åŒæ—¶å¯åŠ¨åŒä¸€ä¸ªé¡¹ç›®çš„å¤šä¸ªå®žä¾‹ï¼Œé‚£ä¹ˆserver.portã€dubbo.protocol.portã€dubbo.registry.fileéƒ½ä¸èƒ½ç›¸åŒã€‚å¦åˆ™æŠ¥é”™ã€‚#dubbo.registry.file=F:/Code/dubbo/cache/boot-user-service-provider8081.cacheÂ¶1.3 boot-order-service-consumeræ¨¡å—pom.xml123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd"&gt; &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt; &lt;groupId&gt;com.qcmoke.gmall&lt;/groupId&gt; &lt;artifactId&gt;boot-order-service-consumer&lt;/artifactId&gt; &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt; &lt;packaging&gt;jar&lt;/packaging&gt; &lt;name&gt;boot-order-service-consumer&lt;/name&gt; &lt;description&gt;Demo project for Spring Boot&lt;/description&gt; &lt;parent&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt; &lt;version&gt;2.0.4.RELEASE&lt;/version&gt; &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt; &lt;/parent&gt; &lt;properties&gt; &lt;java.version&gt;1.8&lt;/java.version&gt; &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt; &lt;project.reporting.outputEncoding&gt;UTF-8&lt;/project.reporting.outputEncoding&gt; &lt;/properties&gt; &lt;dependencies&gt; &lt;dependency&gt; &lt;groupId&gt;com.alibaba.boot&lt;/groupId&gt; &lt;artifactId&gt;dubbo-spring-boot-starter&lt;/artifactId&gt; &lt;version&gt;0.2.0&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;com.qcmoke.gmall&lt;/groupId&gt; &lt;artifactId&gt;gmall-interface&lt;/artifactId&gt; &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt; &lt;/dependency&gt; &lt;/dependencies&gt; &lt;build&gt; &lt;plugins&gt; &lt;plugin&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt; &lt;/plugin&gt; &lt;/plugins&gt; &lt;/build&gt;&lt;/project&gt;com.qcmoke.gmall.ConsumerBootApplication.java12345678910111213package com.qcmoke.gmall;import com.alibaba.dubbo.config.spring.context.annotation.EnableDubbo;import org.springframework.boot.SpringApplication;import org.springframework.boot.autoconfigure.SpringBootApplication;@EnableDubbo@SpringBootApplicationpublic class ConsumerBootApplication &#123; public static void main(String[] args) &#123; SpringApplication.run(ConsumerBootApplication.class, args); &#125;&#125;com.qcmoke.gmall.service.impl.OrderServiceImpl.java12345678910111213141516171819202122package com.qcmoke.gmall.service.impl;import com.alibaba.dubbo.config.annotation.Reference;import com.qcmoke.gmall.bean.UserAddress;import com.qcmoke.gmall.service.OrderService;import com.qcmoke.gmall.service.UserService;import org.springframework.stereotype.Service;import java.util.List;@Servicepublic class OrderServiceImpl implements OrderService &#123; //@Autowired @Reference UserService userService; @Override public List&lt;UserAddress&gt; initOrder(String userId) &#123; List&lt;UserAddress&gt; addressList = userService.getUserAddressList(userId); return addressList; &#125;&#125;com.qcmoke.gmall.controller.OrderController.java12345678910111213141516171819202122package com.qcmoke.gmall.controller;import com.qcmoke.gmall.bean.UserAddress;import com.qcmoke.gmall.service.OrderService;import org.springframework.beans.factory.annotation.Autowired;import org.springframework.web.bind.annotation.RequestMapping;import org.springframework.web.bind.annotation.RequestParam;import org.springframework.web.bind.annotation.RestController;import java.util.List;@RestControllerpublic class OrderController &#123; @Autowired OrderService orderService; @RequestMapping("/initOrder")//http://127.0.0.1:8081/initOrder?uid=1 public List&lt;UserAddress&gt; initOrder(@RequestParam("uid") String userId) &#123; System.out.println("/initOrder"); return orderService.initOrder(userId); &#125;&#125;application.properties12345server.port=8081dubbo.application.name=boot-order-service-consumerdubbo.registry.protocol=zookeeperdubbo.registry.address=127.0.0.1:2181dubbo.monitor.protocol=registryÂ¶1.4 æµ‹è¯•å¯åŠ¨é¡ºåºï¼šzookeepeâ€”&gt;dubbo-adminâ€”&gt;monitorâ€”&gt;boot-user-service-providerrâ€”&gt;boot-order-service-consumerè®¿é—®http://127.0.0.1:8081/initOrder?uid=1Â¶ä¸ƒã€dubboé…ç½®Â¶1ã€é…ç½®ä¼˜å…ˆåŽŸåˆ™â˜… JVM å¯åŠ¨ -D å‚æ•°ä¼˜å…ˆï¼Œè¿™æ ·å¯ä»¥ä½¿ç”¨æˆ·åœ¨éƒ¨ç½²å’Œå¯åŠ¨æ—¶è¿›è¡Œå‚æ•°é‡å†™ï¼Œæ¯”å¦‚åœ¨å¯åŠ¨æ—¶éœ€æ”¹å˜åè®®çš„ç«¯å£ã€‚â˜… XML æ¬¡ä¹‹ï¼Œå¦‚æžœåœ¨ XML ä¸­æœ‰é…ç½®ï¼Œåˆ™ dubbo.properties ä¸­çš„ç›¸åº”é…ç½®é¡¹æ— æ•ˆã€‚â˜… Properties æœ€åŽï¼Œç›¸å½“äºŽç¼ºçœå€¼ï¼Œåªæœ‰ XML æ²¡æœ‰é…ç½®æ—¶ï¼Œdubbo.properties çš„ç›¸åº”é…ç½®é¡¹æ‰ä¼šç”Ÿæ•ˆï¼Œé€šå¸¸ç”¨äºŽå…±äº«å…¬å…±é…ç½®ï¼Œæ¯”å¦‚åº”ç”¨åã€‚å¯¹boot-user-service-provideræ¨¡å—åšä¸€ä¸‹ä¿®æ”¹ï¼šapplication.properties(æƒ³å½“äºŽxml)ï¼š123456789# æœåŠ¡å”¯ä¸€åç§°dubbo.application.name=boot-user-service-provider# æ³¨å†Œä¸­å¿ƒåè®®å’Œåœ°å€dubbo.registry.address=zookeeper://127.0.0.1:2181# é€šä¿¡åè®®å’Œç«¯å£dubbo.protocol.name=dubbodubbo.protocol.port=20881# ç›‘æŽ§ä¸­å¿ƒdubbo.monitor.protocol=registrydubbo.propertiesï¼š1dubbo.protocol.port=20882ç”±äºŽapplication.propertiesä¼˜å…ˆçº§æ›´é«˜ï¼Œå¯åŠ¨åŽä¼šå‘çŽ°dubbo.propertiesçš„20882ç«¯å£ä¼šè¢«application.propertiesçš„20881ç«¯å£è¦†ç›–ã€‚Â¶2ã€é‡è¯•æ¬¡æ•°å¤±è´¥è‡ªåŠ¨åˆ‡æ¢ï¼Œå½“å‡ºçŽ°å¤±è´¥ï¼Œé‡è¯•å…¶å®ƒæœåŠ¡å™¨ï¼Œä½†é‡è¯•ä¼šå¸¦æ¥æ›´é•¿å»¶è¿Ÿã€‚å¯é€šè¿‡ retries=â€œ2â€ æ¥è®¾ç½®é‡è¯•æ¬¡æ•°(ä¸å«ç¬¬ä¸€æ¬¡)ã€‚é‡è¯•æ¬¡æ•°é…ç½®å¦‚ä¸‹ï¼š12æœåŠ¡æä¾›è€…ï¼š&lt;dubbo:service retries="2" /&gt;1234567æœåŠ¡æ¶ˆè´¹è€…ï¼š(1)å…¨å±€é‡è¯•æ¬¡æ•°é…ç½®&lt;dubbo:reference retries="2" /&gt;(2)æŒ‡å®šæŽ¥å£ä»¥åŠç‰¹å®šæ–¹æ³•é‡è¯•æ¬¡æ•°é…ç½®&lt;dubbo:reference&gt; &lt;dubbo:method name="findFoo" retries="2" /&gt;&lt;/dubbo:reference&gt;Â¶3ã€è¶…æ—¶æ—¶é—´é…ç½®ç”±äºŽç½‘ç»œæˆ–æœåŠ¡ç«¯ä¸å¯é ï¼Œä¼šå¯¼è‡´è°ƒç”¨å‡ºçŽ°ä¸€ç§ä¸ç¡®å®šçš„ä¸­é—´çŠ¶æ€ï¼ˆè¶…æ—¶ï¼‰ã€‚ä¸ºäº†é¿å…è¶…æ—¶å¯¼è‡´å®¢æˆ·ç«¯èµ„æºï¼ˆçº¿ç¨‹ï¼‰æŒ‚èµ·è€—å°½ï¼Œå¿…é¡»è®¾ç½®è¶…æ—¶æ—¶é—´ã€‚12345678910æ¶ˆè´¹ç«¯:(1)å…¨å±€è¶…æ—¶é…ç½®&lt;dubbo:consumer timeout="5000" /&gt;(2)æŒ‡å®šæŽ¥å£ä»¥åŠç‰¹å®šæ–¹æ³•è¶…æ—¶é…ç½®//è®¾ç½®æ¶ˆè´¹è€…è¯·æ±‚æœåŠ¡è€…æŸä¸ªæœåŠ¡æ‰€æœ‰æ–¹æ³•çš„è¶…æ—¶æ—¶é—´ä¸º2000ms&lt;dubbo:reference interface="com.foo.BarService" timeout="2000"&gt; //æ˜Žç¡®æŒ‡å®šæŸä¸ªæ–¹æ³•çš„è¶…æ—¶æ—¶é—´ä¸º3000ms &lt;dubbo:method name="sayHello" timeout="3000" /&gt; &lt;/dubbo:reference&gt;12345678æœåŠ¡ç«¯:(1)å…¨å±€è¶…æ—¶é…ç½®&lt;dubbo:provider timeout="5000" /&gt;(2)æŒ‡å®šæŽ¥å£ä»¥åŠç‰¹å®šæ–¹æ³•è¶…æ—¶é…ç½®&lt;dubbo:provider interface="com.foo.BarService" timeout="2000"&gt; &lt;dubbo:method name="sayHello" timeout="3000" /&gt;&lt;/dubbo:provider&gt;å¦‚æžœæ¶ˆè´¹ç«¯å’ŒæœåŠ¡ç«¯éƒ½é…ç½®åŒæ ·çš„è¶…æ—¶é…ç½®ï¼Œé‚£ä¹ˆæ¶ˆè´¹ç«¯çš„é…ç½®ä¼˜äºŽæœåŠ¡ç«¯é…ç½®Â¶4ã€é…ç½®åŽŸåˆ™é…ç½®çš„è¦†ç›–è§„åˆ™ï¼šæ–¹æ³•çº§é…ç½®åˆ«ä¼˜äºŽæŽ¥å£çº§åˆ«ï¼Œå³å°Scopeä¼˜å…ˆConsumerç«¯é…ç½® ä¼˜äºŽ Provideré…ç½® ä¼˜äºŽ å…¨å±€é…ç½®ï¼Œæœ€åŽæ˜¯Dubbo Hard Codeçš„é…ç½®å€¼ï¼ˆè§é…ç½®æ–‡æ¡£ï¼‰dubboæŽ¨èåœ¨Providerä¸Šå°½é‡å¤šé…ç½®Consumerç«¯å±žæ€§ï¼šï¼ˆ1ï¼‰ä½œæœåŠ¡çš„æä¾›è€…ï¼Œæ¯”æœåŠ¡ä½¿ç”¨æ–¹æ›´æ¸…æ¥šæœåŠ¡æ€§èƒ½å‚æ•°ï¼Œå¦‚è°ƒç”¨çš„è¶…æ—¶æ—¶é—´ï¼Œåˆç†çš„é‡è¯•æ¬¡æ•°ï¼Œç­‰ç­‰ï¼ˆ2ï¼‰åœ¨Provideré…ç½®åŽï¼ŒConsumerä¸é…ç½®åˆ™ä¼šä½¿ç”¨Providerçš„é…ç½®å€¼ï¼Œå³Provideré…ç½®å¯ä»¥ä½œä¸ºConsumerçš„ç¼ºçœå€¼ã€‚å¦åˆ™ï¼ŒConsumerä¼šä½¿ç”¨Consumerç«¯çš„å…¨å±€è®¾ç½®ï¼Œè¿™å¯¹äºŽProviderä¸å¯æŽ§çš„ï¼Œå¹¶ä¸”å¾€å¾€æ˜¯ä¸åˆç†çš„Â¶5ã€ç‰ˆæœ¬å·å½“ä¸€ä¸ªæŽ¥å£å®žçŽ°ï¼Œå‡ºçŽ°ä¸å…¼å®¹å‡çº§æ—¶ï¼Œå¯ä»¥ç”¨ç‰ˆæœ¬å·è¿‡æ¸¡ï¼Œç‰ˆæœ¬å·ä¸åŒçš„æœåŠ¡ç›¸äº’é—´ä¸å¼•ç”¨ã€‚å¯ä»¥æŒ‰ç…§ä»¥ä¸‹çš„æ­¥éª¤è¿›è¡Œç‰ˆæœ¬è¿ç§»ï¼šåœ¨ä½ŽåŽ‹åŠ›æ—¶é—´æ®µï¼Œå…ˆå‡çº§ä¸€åŠæä¾›è€…ä¸ºæ–°ç‰ˆæœ¬å†å°†æ‰€æœ‰æ¶ˆè´¹è€…å‡çº§ä¸ºæ–°ç‰ˆæœ¬ç„¶åŽå°†å‰©ä¸‹çš„ä¸€åŠæä¾›è€…å‡çº§ä¸ºæ–°ç‰ˆæœ¬1234567891011121314è€ç‰ˆæœ¬æœåŠ¡æä¾›è€…é…ç½®ï¼š&lt;dubbo:service interface="com.foo.BarService" version="1.0.0" /&gt;æ–°ç‰ˆæœ¬æœåŠ¡æä¾›è€…é…ç½®ï¼š&lt;dubbo:service interface="com.foo.BarService" version="2.0.0" /&gt;è€ç‰ˆæœ¬æœåŠ¡æ¶ˆè´¹è€…é…ç½®ï¼š&lt;dubbo:reference id="barService" interface="com.foo.BarService" version="1.0.0" /&gt;æ–°ç‰ˆæœ¬æœåŠ¡æ¶ˆè´¹è€…é…ç½®ï¼š&lt;dubbo:reference id="barService" interface="com.foo.BarService" version="2.0.0" /&gt;å¦‚æžœä¸éœ€è¦åŒºåˆ†ç‰ˆæœ¬ï¼Œå¯ä»¥æŒ‰ç…§ä»¥ä¸‹çš„æ–¹å¼é…ç½®ï¼š&lt;dubbo:reference id="barService" interface="com.foo.BarService" version="*" /&gt;å¯¹user-service-provideræ¨¡å—åšä¿®æ”¹ï¼šprovider.xml12345678910111213141516171819202122232425262728293031323334353637383940&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;beans xmlns="http://www.springframework.org/schema/beans" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:dubbo="http://code.alibabatech.com/schema/dubbo" xmlns:context="http://www.springframework.org/schema/context" xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-4.3.xsd http://dubbo.apache.org/schema/dubbo http://dubbo.apache.org/schema/dubbo/dubbo.xsd http://code.alibabatech.com/schema/dubbo http://code.alibabatech.com/schema/dubbo/dubbo.xsd"&gt; &lt;context:component-scan base-package="com.qcmoke.gmall.service.impl"/&gt; &lt;!-- 1ã€æŒ‡å®šå½“å‰æœåŠ¡/åº”ç”¨çš„åå­—ï¼ˆåŒæ ·çš„æœåŠ¡åå­—ç›¸åŒï¼Œä¸è¦å’Œåˆ«çš„æœåŠ¡åŒåï¼‰ ==ã€‹åªè¦æœåŠ¡å·²å¯åŠ¨å°±ä¼šæ³¨å†Œåˆ°zookeeperæ³¨å†Œä¸­å¿ƒäº†--&gt; &lt;dubbo:application name="user-service-provider"/&gt; &lt;!-- 2ã€æŒ‡å®šæ³¨å†Œä¸­å¿ƒçš„ä½ç½® --&gt; &lt;!-- &lt;dubbo:registry address="zookeeper://127.0.0.1:2181"&gt;&lt;/dubbo:registry&gt; --&gt; &lt;dubbo:registry protocol="zookeeper" address="127.0.0.1:2181"/&gt; &lt;!-- 3ã€æŒ‡å®šé€šä¿¡è§„åˆ™ ===ã€‹ç”¨äºŽæœåŠ¡æä¾›è€…å’Œæ¶ˆè´¹è€…ä¹‹é—´çš„é€šä¿¡ nameï¼šé€šä¿¡åè®®ï¼ˆæœ‰è§„å®šè¦æ±‚ï¼‰ portï¼šé€šä¿¡ç«¯å£ï¼ˆå¯è‡ªå®šä¹‰ï¼‰ --&gt; &lt;dubbo:protocol name="dubbo" port="20882"/&gt; &lt;!-- 4ã€æš´éœ²æœåŠ¡ ===ã€‹ç”¨äºŽç»™æœåŠ¡æ¶ˆè´¹è€…æä¾›æœåŠ¡ &lt;dubbo:service&gt; interfaceï¼šæš´éœ²çš„æŽ¥å£ refï¼šæŒ‡å‘æœåŠ¡çš„çœŸæ­£çš„å®žçŽ°å¯¹è±¡ version: å½“æœ‰åŒæŽ¥å£çš„å¤šä¸ªä¸åŒå®žçŽ°ç±»æ—¶ï¼Œå¯ä»¥ä½¿ç”¨refå’Œversionå…±åŒç¡®å®šç‰ˆæœ¬ä»¥æä¾›ç»™æ¶ˆè´¹è€…é€‰æ‹©ã€‚ --&gt; &lt;dubbo:service interface="com.qcmoke.gmall.service.UserService" ref="userServiceImpl01" version="0.0.1"/&gt; &lt;dubbo:service interface="com.qcmoke.gmall.service.UserService" ref="userServiceImpl02" version="0.0.2"/&gt; &lt;!-- è¿žæŽ¥ç›‘æŽ§ä¸­å¿ƒ protocol="registry":è¡¨ç¤ºå½“å‰æœåŠ¡ä»Žæ³¨å†Œä¸­å¿ƒå‘çŽ°ç›‘æŽ§ä¸­å¿ƒçš„åœ°å€ã€‚ address="127.0.0.1:7070":è¡¨ç¤ºå½“å‰æœåŠ¡æ˜¯ç›´è¿žç›‘æŽ§ä¸­å¿ƒï¼Œè€Œä¸æ˜¯ä»Žæ³¨å†Œä¸­å¿ƒå‘çŽ°çš„ã€‚ --&gt; &lt;dubbo:monitor protocol="registry"/&gt; &lt;!--&lt;dubbo:monitor address="127.0.0.1:7070"/&gt;--&gt;&lt;/beans&gt;æ·»åŠ å®žçŽ°ç±»com.qcmoke.gmall.service.impl.UserServiceImpl2.java123456789101112131415161718192021package com.qcmoke.gmall.service.impl;import com.qcmoke.gmall.bean.UserAddress;import com.qcmoke.gmall.service.UserService;import org.springframework.stereotype.Service;import java.util.Arrays;import java.util.List;@Service("userServiceImpl02")public class UserServiceImpl2 implements UserService &#123; @Override public List&lt;UserAddress&gt; getUserAddressList(String userId) &#123; System.out.println("UserServiceImpl.....new..."); UserAddress address1 = new UserAddress(1, "å—äº¬", "1", "æŽè€å¸ˆ", "010-56253825", "Y"); UserAddress address2 = new UserAddress(2, "æ­å·ž", "1", "çŽ‹è€å¸ˆ", "010-56253825", "N"); return Arrays.asList(address1, address2); &#125;&#125;å¯¹order-service-consumeræ¨¡å—åšä¿®æ”¹:consumer.xml12345678910111213141516171819202122232425262728293031323334353637383940414243&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;beans xmlns="http://www.springframework.org/schema/beans" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:dubbo="http://dubbo.apache.org/schema/dubbo" xmlns:context="http://www.springframework.org/schema/context" xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-4.3.xsd http://dubbo.apache.org/schema/dubbo http://dubbo.apache.org/schema/dubbo/dubbo.xsd"&gt; &lt;context:component-scan base-package="com.qcmoke.gmall.service.impl"/&gt; &lt;!-- 1ã€æŒ‡å®šå½“å‰æœåŠ¡/åº”ç”¨çš„åå­—--&gt; &lt;dubbo:application name="order-service-consumer"/&gt; &lt;!-- 2ã€æŒ‡å®šæ³¨å†Œä¸­å¿ƒçš„ä½ç½® --&gt; &lt;dubbo:registry address="zookeeper://127.0.0.1:2181"/&gt; &lt;!--3ã€æŒ‡å®šè¦è°ƒç”¨çš„è¿œç¨‹æœåŠ¡ï¼›å£°æ˜Žéœ€è¦è°ƒç”¨çš„è¿œç¨‹æœåŠ¡çš„æŽ¥å£ï¼›ç”Ÿæˆè¿œç¨‹æœåŠ¡ä»£ç† interface: è°ƒç”¨çš„è¿œç¨‹æœåŠ¡æŽ¥å£ id: è¿œç¨‹æœåŠ¡æŽ¥å£çš„åç§° check:è®¾ç½®å¯åŠ¨æ—¶æ˜¯å¦æ£€æŸ¥æ³¨å†Œä¸­å¿ƒä¸­æœ‰æœåŠ¡æä¾›è€…(é»˜è®¤trueï¼Œæ£€æŸ¥)ï¼Œå¦‚æžœæƒ³è¦é…ç½®å½“å‰æ‰€æœ‰çš„æœåŠ¡éƒ½å¯åŠ¨ä¸æ£€æŸ¥æ³¨å†Œä¸­å¿ƒä¸­æœ‰æœåŠ¡æä¾›è€…é‚£ä¹ˆå¯ä»¥ç»Ÿä¸€é…ç½®:&lt;dubbo:consumer check="false" timeout="5000"/&gt; retries:è®¾ç½®å¤±è´¥é‡è¯•æ¬¡æ•°ï¼Œ0è¡¨ç¤ºä¸é‡è¯•ï¼ˆé»˜è®¤ï¼‰ã€‚ æ˜¯å¦ä½¿ç”¨é‡è¯•ï¼Ÿ å¹‚ç­‰,å°±æ˜¯å¤šæ¬¡æ‰§è¡Œæ–¹æ³•å¾—åˆ°çš„ç»“æžœä¸€æ ·ï¼Œæ¯”å¦‚æŸ¥è¯¢ã€åˆ é™¤ã€ä¿®æ”¹ï¼Œè¿™ç§æƒ…å†µå¯ä»¥è®¾ç½®é‡è¯•æ¬¡æ•°ã€‚ éžå¹‚ç­‰ï¼Œå°±æ˜¯å¤šæ¬¡æ‰§è¡Œæ–¹æ³•å¾—åˆ°çš„ç»“æžœä¸ä¸€æ ·ï¼Œæ¯”å¦‚æ•°æ®åº“æ–°å¢žæ“ä½œï¼Œå³ä½¿å‚æ•°ç›¸åŒæ–°å¢žåŽæ•°æ®åº“è®°å½•ä¼šå˜å¤šï¼Œè¿™ç§æƒ…å†µä¸èƒ½è®¾ç½®é‡è¯•æ¬¡æ•°ã€‚ version:åœ¨æœåŠ¡æä¾›è€…ä½¿ç”¨versionæŒ‡å®šç‰ˆæœ¬çš„æ—¶å€™ï¼Œå¯ä»¥åœ¨æ¶ˆè´¹è€…ä¸ŠæŒ‡å®šå¯¹åº”çš„ç‰ˆæœ¬æ¥ç¡®å®šåŒä¸€æŽ¥å£çš„å…·ä½“å®žçŽ°ç±»å¯¹è±¡ã€‚ --&gt; &lt;dubbo:reference interface="com.qcmoke.gmall.service.UserService" id="userService" retries="3" version="0.0.1"/&gt; &lt;!-- è¿žæŽ¥ç›‘æŽ§ä¸­å¿ƒ protocol="registry":è¡¨ç¤ºå½“å‰æœåŠ¡ä»Žæ³¨å†Œä¸­å¿ƒå‘çŽ°ç›‘æŽ§ä¸­å¿ƒçš„åœ°å€ã€‚ address="127.0.0.1:7070":è¡¨ç¤ºå½“å‰æœåŠ¡æ˜¯ç›´è¿žç›‘æŽ§ä¸­å¿ƒï¼Œè€Œä¸æ˜¯ä»Žæ³¨å†Œä¸­å¿ƒå‘çŽ°çš„ã€‚ --&gt; &lt;dubbo:monitor protocol="registry"/&gt; &lt;!--&lt;dubbo:monitor address="127.0.0.1:7070"/&gt;--&gt; &lt;!-- (1)å…¨å±€è¶…æ—¶é…ç½® &lt;dubbo:consumer timeout="5000" /&gt; (2)æŒ‡å®šæŽ¥å£ä»¥åŠç‰¹å®šæ–¹æ³•è¶…æ—¶é…ç½® &lt;dubbo:reference interface="com.qcmoke.gmall.service.UserService" id="userService" timeout="5000"&gt; è®¾ç½®æ¶ˆè´¹è€…è¯·æ±‚æœåŠ¡è€…æŸä¸ªæœåŠ¡æ‰€æœ‰æ–¹æ³•çš„è¶…æ—¶æ—¶é—´ä¸º5000ms &lt;dubbo:method name="getUserAddressList" timeout="1000"/&gt; æ˜Žç¡®æŒ‡å®šæŸä¸ªæ–¹æ³•çš„è¶…æ—¶æ—¶é—´ä¸º1000ms &lt;/dubbo:reference&gt; --&gt;&lt;/beans&gt;è¿è¡Œä¸¤ä¸ªæœåŠ¡åŽè§‚å¯Ÿæ¶ˆè´¹è€…çš„è¾“å‡ºï¼š1234ç”¨æˆ·idï¼š1å—äº¬æ­å·žè°ƒç”¨å®Œæˆ....Â¶å…«ã€ç†”æ–­ä¸Žé™çº§æ•´åˆhystrixï¼Œå¯å®žçŽ°æœåŠ¡çš„ç†”æ–­ä¸Žé™çº§ã€‚Hystrix æ—¨åœ¨é€šè¿‡æŽ§åˆ¶é‚£äº›è®¿é—®è¿œç¨‹ç³»ç»Ÿã€æœåŠ¡å’Œç¬¬ä¸‰æ–¹åº“çš„èŠ‚ç‚¹ï¼Œä»Žè€Œå¯¹å»¶è¿Ÿå’Œæ•…éšœæä¾›æ›´å¼ºå¤§çš„å®¹é”™èƒ½åŠ›ã€‚Hystrixå…·å¤‡æ‹¥æœ‰å›žé€€æœºåˆ¶å’Œæ–­è·¯å™¨åŠŸèƒ½çš„çº¿ç¨‹å’Œä¿¡å·éš”ç¦»ï¼Œè¯·æ±‚ç¼“å­˜å’Œè¯·æ±‚æ‰“åŒ…ï¼Œä»¥åŠç›‘æŽ§å’Œé…ç½®ç­‰åŠŸèƒ½ã€‚Â¶1. ä½¿ç”¨hystrixÂ¶1.1 åˆ›å»ºæä¾›è€…æ¨¡å—boot-user-service-provider-hystrixé™¤äº†æ·»åŠ dubboä¾èµ–å’Œgmall-interfaceå¤–ï¼Œè¿˜æœ‰æ·»åŠ å¦‚ä¸‹netflixä¾èµ–ï¼š12345&lt;dependency&gt; &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt; &lt;artifactId&gt;spring-cloud-starter-netflix-hystrix&lt;/artifactId&gt; &lt;version&gt;2.0.1.RELEASE&lt;/version&gt;&lt;/dependency&gt;å®Œæ•´pom.xml1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"&gt; &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt; &lt;groupId&gt;com.qcmoke.gmall&lt;/groupId&gt; &lt;artifactId&gt;boot-user-service-provider-hystrix&lt;/artifactId&gt; &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt; &lt;packaging&gt;jar&lt;/packaging&gt; &lt;parent&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt; &lt;version&gt;2.0.4.RELEASE&lt;/version&gt; &lt;!--&lt;version&gt;2.1.7.RELEASE&lt;/version&gt;--&gt; &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt; &lt;/parent&gt; &lt;properties&gt; &lt;java.version&gt;1.8&lt;/java.version&gt; &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt; &lt;project.reporting.outputEncoding&gt;UTF-8&lt;/project.reporting.outputEncoding&gt; &lt;/properties&gt; &lt;dependencies&gt; &lt;dependency&gt; &lt;groupId&gt;com.qcmoke.gmall&lt;/groupId&gt; &lt;artifactId&gt;gmall-interface&lt;/artifactId&gt; &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter&lt;/artifactId&gt; &lt;/dependency&gt; &lt;!-- Dubbo Spring Boot Starter --&gt; &lt;dependency&gt; &lt;groupId&gt;com.alibaba.boot&lt;/groupId&gt; &lt;artifactId&gt;dubbo-spring-boot-starter&lt;/artifactId&gt; &lt;version&gt;0.2.0&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt; &lt;artifactId&gt;spring-cloud-starter-netflix-hystrix&lt;/artifactId&gt; &lt;version&gt;2.0.1.RELEASE&lt;/version&gt; &lt;/dependency&gt; &lt;/dependencies&gt; &lt;build&gt; &lt;plugins&gt; &lt;plugin&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt; &lt;/plugin&gt; &lt;/plugins&gt; &lt;/build&gt;&lt;/project&gt;åˆ›å»ºå¯åŠ¨ç±»å¹¶åœ¨ç±»ä¸Šå¢žåŠ @EnableHystrixæ³¨è§£ã€‚HystrixProviderBootApplication.java123456789101112131415package com.qcmoke.gmall;import com.alibaba.dubbo.config.spring.context.annotation.EnableDubbo;import org.springframework.boot.SpringApplication;import org.springframework.boot.autoconfigure.SpringBootApplication;import org.springframework.cloud.netflix.hystrix.EnableHystrix;@EnableDubbo@EnableHystrix@SpringBootApplicationpublic class HystrixProviderBootApplication &#123; public static void main(String[] args) &#123; SpringApplication.run(HystrixProviderBootApplication.class, args); &#125;&#125;é…ç½®application.properties12345server.port=8081dubbo.application.name=boot-user-service-provider-hystrixdubbo.registry.address=zookeeper://127.0.0.1:2181dubbo.protocol.name=dubbodubbo.protocol.port=20881UserServiceImpl.java12345678910111213141516171819package com.qcmoke.gmall.service.impl;import com.netflix.hystrix.contrib.javanica.annotation.HystrixCommand;import com.qcmoke.gmall.bean.UserAddress;import com.qcmoke.gmall.service.UserService;import org.springframework.stereotype.Service;import java.util.List;@com.alibaba.dubbo.config.annotation.Service@Servicepublic class UserServiceImpl implements UserService &#123; @HystrixCommand @Override public List&lt;UserAddress&gt; getUserAddressList(String userId) &#123; throw new RuntimeException("Exception to show hystrix enabled."); &#125;&#125;Â¶1.2 åˆ›å»ºæ¶ˆè´¹è€…æ¨¡å—boot-order-service-consumer-hystrixpom.xml12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd"&gt; &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt; &lt;groupId&gt;com.qcmoke.gmall&lt;/groupId&gt; &lt;artifactId&gt;boot-order-service-consumer-hystrix&lt;/artifactId&gt; &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt; &lt;packaging&gt;jar&lt;/packaging&gt; &lt;parent&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt; &lt;version&gt;2.0.4.RELEASE&lt;/version&gt; &lt;!--&lt;version&gt;2.1.7.RELEASE&lt;/version&gt;--&gt; &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt; &lt;/parent&gt; &lt;properties&gt; &lt;java.version&gt;1.8&lt;/java.version&gt; &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt; &lt;project.reporting.outputEncoding&gt;UTF-8&lt;/project.reporting.outputEncoding&gt; &lt;/properties&gt; &lt;dependencies&gt; &lt;dependency&gt; &lt;groupId&gt;com.qcmoke.gmall&lt;/groupId&gt; &lt;artifactId&gt;gmall-interface&lt;/artifactId&gt; &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter&lt;/artifactId&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt; &lt;/dependency&gt; &lt;!-- Dubbo Spring Boot Starter --&gt; &lt;dependency&gt; &lt;groupId&gt;com.alibaba.boot&lt;/groupId&gt; &lt;artifactId&gt;dubbo-spring-boot-starter&lt;/artifactId&gt; &lt;version&gt;0.2.0&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt; &lt;artifactId&gt;spring-cloud-starter-netflix-hystrix&lt;/artifactId&gt; &lt;version&gt;2.0.1.RELEASE&lt;/version&gt; &lt;/dependency&gt; &lt;/dependencies&gt; &lt;build&gt; &lt;plugins&gt; &lt;plugin&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt; &lt;/plugin&gt; &lt;/plugins&gt; &lt;/build&gt;&lt;/project&gt;application.properties1234server.port=80dubbo.application.name=boot-order-service-consumer-hystrixdubbo.registry.protocol=zookeeperdubbo.registry.address=127.0.0.1:2181HystrixConsumerBootApplication.java123456789101112131415package com.qcmoke.gmall;import com.alibaba.dubbo.config.spring.context.annotation.EnableDubbo;import org.springframework.boot.SpringApplication;import org.springframework.boot.autoconfigure.SpringBootApplication;import org.springframework.cloud.netflix.hystrix.EnableHystrix;@EnableDubbo@EnableHystrix@SpringBootApplicationpublic class HystrixConsumerBootApplication &#123; public static void main(String[] args) &#123; SpringApplication.run(HystrixConsumerBootApplication.class, args); &#125;&#125;UserController.java1234567891011121314151617181920212223242526272829303132package com.qcmoke.gmall.controller;import com.alibaba.dubbo.config.annotation.Reference;import com.netflix.hystrix.contrib.javanica.annotation.HystrixCommand;import com.qcmoke.gmall.bean.UserAddress;import com.qcmoke.gmall.service.UserService;import org.springframework.web.bind.annotation.RequestMapping;import org.springframework.web.bind.annotation.RequestParam;import org.springframework.web.bind.annotation.RestController;import java.util.Collections;import java.util.List;@RestControllerpublic class UserController &#123; @Reference private UserService userService; @HystrixCommand(fallbackMethod = "getUserAddressListHystrix") @RequestMapping("/getUserAddressList") public List&lt;UserAddress&gt; getUserAddressList(@RequestParam("uid") String userId) &#123; System.out.println("/getUserAddressList"); return userService.getUserAddressList(userId); &#125; public List&lt;UserAddress&gt; getUserAddressListHystrix(@RequestParam("uid") String userId) &#123; System.out.println("/getUserAddressListHystrix"); UserAddress address = new UserAddress(null, null, null, null, null, null); return Collections.singletonList(address); &#125;&#125;æµ‹è¯•ï¼šå…ˆå¯åŠ¨æä¾›è€…ï¼Œç„¶åŽå¯åŠ¨æ¶ˆè´¹è€…è®¿é—®http://127.0.0.1/getUserAddressList?uid=1è¿”å›žç»“æžœï¼š1[&#123;"id":null,"userAddress":null,"userId":null,"consignee":null,"phoneNum":null,"isDefault":null&#125;]Â¶ä¹ã€è´Ÿè½½å‡è¡¡]]></content>
      <categories>
        <category>javaee</category>
      </categories>
      <tags>
        <tag>Dubbo</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ZooKeeper å­¦ä¹ ç¬”è®°]]></title>
    <url>%2Fjavaee%2Fzookeeper.html</url>
    <content type="text"><![CDATA[Â¶ä¸€ã€ç®€ä»‹zooKeeperæ˜¯ä¸€ä¸ªç»å…¸çš„åˆ†å¸ƒå¼æ•°æ®ä¸€è‡´æ€§è§£å†³æ–¹æ¡ˆæœåŠ¡ï¼Œè‡´åŠ›äºŽä¸ºåˆ†å¸ƒå¼åº”ç”¨æä¾›ä¸€ä¸ªé«˜æ€§èƒ½ã€é«˜å¯ç”¨ï¼Œä¸”å…·æœ‰ä¸¥æ ¼é¡ºåºè®¿é—®æŽ§åˆ¶èƒ½åŠ›çš„åˆ†å¸ƒå¼åè°ƒå­˜å‚¨æœåŠ¡ã€‚zooKeeperç”±é›…è™Žç ”ç©¶é™¢å¼€å‘ï¼Œæ˜¯Google Chubbyçš„å¼€æºå®žçŽ°ï¼ŒåŽæ¥æ‰˜ç®¡åˆ°Apacheï¼ŒäºŽ2010å¹´11æœˆæ­£å¼æˆä¸ºApacheçš„é¡¶çº§é¡¹ç›®ã€‚zookeeperå®˜ç½‘ï¼šhttps://zookeeper.apache.org/Â¶äºŒã€åº”ç”¨åœºæ™¯ï¼ˆ1ï¼‰ç»´æŠ¤é…ç½®ä¿¡æ¯ï¼ˆ2ï¼‰åˆ†å¸ƒå¼é”æœåŠ¡ï¼ˆ3ï¼‰é›†ç¾¤ç®¡ç†ï¼ˆ4ï¼‰ç”Ÿæˆåˆ†å¸ƒå¼å”¯ä¸€IDÂ¶ä¸‰ã€æ•°æ®æ¨¡åž‹zookeeperçš„æ•°æ®èŠ‚ç‚¹å¯ä»¥è§†ä¸ºæ ‘çŠ¶ç»“æž„ï¼ˆæˆ–è€…æ–‡ä»¶ç³»ç»Ÿï¼‰ï¼Œæ ‘ä¸­çš„å„èŠ‚ç‚¹è¢«ç§°ä¸ºznodeï¼ˆå³zookeeper nodeï¼‰ï¼Œä¸€ä¸ªznodeå¯ä»¥æœ‰å¤šä¸ªå­èŠ‚ç‚¹ã€‚zookeeperèŠ‚ç‚¹åœ¨ç»“æž„ä¸Šè¡¨çŽ°ä¸ºæ ‘çŠ¶ï¼›ä½¿ç”¨è·¯å¾„pathæ¥å®šä½æŸä¸ªznodeã€‚znodeå…¼å…·æ–‡ä»¶å’Œç›®å½•ï¼ˆæ–‡ä»¶è·¯å¾„è€Œéžæ–‡ä»¶å¤¹ï¼‰ä¸¤ç§ç‰¹ç‚¹ï¼Œæ—¢åƒæ–‡ä»¶ä¸€æ ·ç»´æŠ¤ç€æ•°æ®ã€å…ƒä¿¡æ¯ã€ACLã€æ—¶é—´æˆ³ç­‰æ•°æ®ç»“æž„ï¼Œåˆåƒç›®å½•ä¸€æ ·å¯ä»¥ä½œä¸ºè·¯å¾„æ ‡è¯†çš„ä¸€éƒ¨åˆ†ã€‚ä¸€ä¸ªznodeå¤§ä½“ä¸Šåˆ†ä¸º3å„éƒ¨åˆ†ï¼šdataï¼šä¸Žè¯¥Znodeå…³è”çš„æ•°æ®ï¼Œå³znode data(èŠ‚ç‚¹path, èŠ‚ç‚¹data)çš„å…³ç³»å°±åƒæ˜¯java mapä¸­(key,value)çš„å…³ç³»childrenï¼šè¯¥Znodeä¸‹çš„å­èŠ‚ç‚¹statï¼šè¯¥ZnodeèŠ‚ç‚¹çš„çŠ¶æ€ä¿¡æ¯ï¼Œç”¨æ¥æè¿°å½“å‰èŠ‚ç‚¹çš„åˆ›å»ºã€ä¿®æ”¹è®°å½•ã€ç‰ˆæœ¬ã€æƒé™ç­‰ã€åŒ…æ‹¬cZxidã€ctimeç­‰cZxid æ•°æ®èŠ‚ç‚¹åˆ›å»ºæ—¶çš„äº‹åŠ¡ IDctime æ•°æ®èŠ‚ç‚¹åˆ›å»ºæ—¶çš„æ—¶é—´mZxid æ•°æ®èŠ‚ç‚¹æœ€åŽä¸€æ¬¡æ›´æ–°æ—¶çš„äº‹åŠ¡ IDmtime æ•°æ®èŠ‚ç‚¹æœ€åŽä¸€æ¬¡æ›´æ–°æ—¶çš„æ—¶é—´pZxid æ•°æ®èŠ‚ç‚¹çš„å­èŠ‚ç‚¹æœ€åŽä¸€æ¬¡è¢«ä¿®æ”¹æ—¶çš„äº‹åŠ¡ IDcversion å­èŠ‚ç‚¹çš„æ›´æ”¹æ¬¡æ•°dataVersion èŠ‚ç‚¹æ•°æ®çš„æ›´æ”¹æ¬¡æ•°aclVersion ç»“ç‚¹çš„ACLæ›´æ”¹æ¬¡æ•°â€”â€”ç±»ä¼¼linuxçš„æƒé™åˆ—è¡¨ï¼Œç»´æŠ¤çš„æ˜¯å½“å‰ç»“ç‚¹çš„æƒé™åˆ—è¡¨è¢«ä¿®æ”¹çš„æ¬¡æ•°ephemeralOwner å¦‚æžœèŠ‚ç‚¹æ˜¯ä¸´æ—¶èŠ‚ç‚¹ï¼Œåˆ™è¡¨ç¤ºåˆ›å»ºè¯¥èŠ‚ç‚¹çš„ä¼šè¯çš„SessionIDï¼›å¦‚æžœèŠ‚ç‚¹æ˜¯æŒä¹…èŠ‚ç‚¹ï¼Œåˆ™è¯¥å±žæ€§å€¼ä¸º 0dataLength æ•°æ®å†…å®¹çš„é•¿åº¦numChildren æ•°æ®èŠ‚ç‚¹å½“å‰çš„å­èŠ‚ç‚¹ä¸ªæ•°Znodeçš„ç±»åž‹Znodeè¢«åˆ†ä¸ºæŒä¹…ï¼ˆpersistentï¼‰èŠ‚ç‚¹ï¼Œé¡ºåºï¼ˆsequentialï¼‰èŠ‚ç‚¹å’Œä¸´æ—¶ï¼ˆephemeralï¼‰èŠ‚ç‚¹ã€‚æŒä¹…èŠ‚ç‚¹ - è¯¥ç»“ç‚¹çš„ç”Ÿå‘½å‘¨æœŸä¸ä¾èµ–äºŽä¼šè¯ï¼Œå¹¶ä¸”åªæœ‰åœ¨å®¢æˆ·ç«¯æ˜¾ç¤ºæ‰§è¡Œåˆ é™¤æ“ä½œçš„æ—¶å€™ï¼Œå®ƒä»¬æ‰èƒ½è¢«åˆ é™¤ä¸´æ—¶èŠ‚ç‚¹ - è¯¥èŠ‚ç‚¹çš„ç”Ÿå‘½å‘¨æœŸä¾èµ–äºŽåˆ›å»ºå®ƒä»¬çš„ä¼šè¯ã€‚ä¸€æ—¦ä¼šè¯( Sessionï¼‰ç»“æŸï¼Œä¸´æ—¶èŠ‚ç‚¹å°†è¢«è‡ªåŠ¨åˆ é™¤ï¼Œå½“ç„¶å¯ä»¥ä¹Ÿå¯ä»¥æ‰‹åŠ¨åˆ é™¤ã€‚è™½ç„¶æ¯ä¸ªä¸´æ—¶çš„ Znodeéƒ½ä¼šç»‘å®šåˆ°ä¸€ä¸ªå®¢æˆ·ç«¯ä¼šè¯ï¼Œä½†ä»–ä»¬å¯¹æ‰€æœ‰çš„å®¢æˆ·ç«¯è¿˜æ˜¯å¯è§çš„ã€‚å¦å¤–ï¼ŒZookeeperçš„ä¸´æ—¶èŠ‚ç‚¹ä¸å…è®¸æ‹¥æœ‰å­èŠ‚ç‚¹é¡ºåºèŠ‚ç‚¹ - é¡ºåºèŠ‚ç‚¹å¯ä»¥æ˜¯æŒä¹…çš„æˆ–ä¸´æ—¶çš„ã€‚å½“ä¸€ä¸ªæ–°çš„znodeè¢«åˆ›å»ºä¸ºä¸€ä¸ªé¡ºåºèŠ‚ç‚¹æ—¶ï¼ŒZooKeeperé€šè¿‡å°†10ä½çš„åºåˆ—å·é™„åŠ åˆ°åŽŸå§‹åç§°æ¥è®¾ç½®znodeçš„è·¯å¾„ã€‚ä¾‹å¦‚ï¼Œå¦‚æžœå°†å…·æœ‰è·¯å¾„ /myapp çš„znodeåˆ›å»ºä¸ºé¡ºåºèŠ‚ç‚¹ï¼Œåˆ™ZooKeeperä¼šå°†è·¯å¾„æ›´æ”¹ä¸º /myapp0000000001 ï¼Œè€Œä¸‹ä¸€ä¸ªåºåˆ—å·å°†é€’å¢žä¸º0000000002ã€‚é¡ºåºèŠ‚ç‚¹åœ¨é”å®šå’ŒåŒæ­¥ä¸­èµ·é‡è¦ä½œç”¨ã€‚Â¶å››ã€å®‰è£…éƒ¨ç½²Â¶1. å•æœºç‰ˆ12345678910111213141516171819202122232425262728$ mkdir /opt/zookeeper$ cd /opt/zookeeper$ wget http://archive.apache.org/dist/zookeeper/zookeeper-3.4.14/zookeeper-3.4.14.tar.gz$ tar -zxvf zookeeper-3.4.14.tar.gz$ mkdir /opt/zookeeper/zookeeper-3.4.14/data$ cd zookeeper-3.4.14/conf$ cp zoo_sample.cfg zoo.cfg$ vim zoo.cfg#æ­¤è·¯å¾„ç”¨äºŽå­˜å‚¨zookeeperä¸­æ•°æ®çš„å†…å­˜å¿«ç…§ã€åŠäº‹åŠ¡æ—¥å¿—æ–‡ä»¶ï¼Œè™½ç„¶zookeeperæ˜¯ä½¿ç”¨å†…å­˜çš„ï¼Œä½†æ˜¯éœ€è¦æŒä¹…åŒ–ä¸€äº›æ•°æ®æ¥ä¿è¯æ•°æ®çš„å®‰å…¨dataDir=/opt/zookeeper/zookeeper-3.4.14/data$ cd /opt/zookeeper/zookeeper-3.4.14/bin/#å¯åŠ¨zookeeper$ zkServer.sh start# å¯åŠ¨$ zkServer.sh start# é‡å¯$ zkServer.sh restart# åœæ­¢$ zkServer.sh stop# æŸ¥çœ‹çŠ¶æ€$ zkServer.sh status# zookeeperå®¢æˆ·ç«¯å‘½ä»¤å·¥å…·è¿žæŽ¥åˆ°zookeeperæœåŠ¡$ zkCli.shÂ¶2. dockerç‰ˆ123$ docker run -d --restart always --name zookeeper -e JVMFLAGS="-Xmx1024m" -p 2181:2181 zookeeper$ docker exec -it zookeeper /bin/bash$ /apache-zookeeper-3.6.2-bin/bin/zkCli.shÂ¶3. é›†ç¾¤Â¶3.1 æž¶æž„çœ‹çœ‹ä¸‹é¢çš„å›¾è¡¨ã€‚å®ƒæè¿°äº†ZooKeeperçš„â€œå®¢æˆ·ç«¯-æœåŠ¡å™¨æž¶æž„â€ã€‚å›¾ä¸­éƒ¨åˆ†ç»„ä»¶åœ¨ä¸‹è¡¨ä¸­è¿›è¡Œäº†è¯´æ˜Žã€‚éƒ¨åˆ†æè¿°Clientå®¢æˆ·ç«¯ï¼Œæˆ‘ä»¬çš„åˆ†å¸ƒå¼åº”ç”¨é›†ç¾¤ä¸­çš„ä¸€ä¸ªèŠ‚ç‚¹ï¼Œä»ŽæœåŠ¡å™¨è®¿é—®ä¿¡æ¯ã€‚å¯¹äºŽç‰¹å®šçš„æ—¶é—´é—´éš”ï¼Œæ¯ä¸ªå®¢æˆ·ç«¯å‘æœåŠ¡å™¨å‘é€æ¶ˆæ¯ä»¥ä½¿æœåŠ¡å™¨çŸ¥é“å®¢æˆ·ç«¯æ˜¯æ´»è·ƒçš„ã€‚ç±»ä¼¼åœ°ï¼Œå½“å®¢æˆ·ç«¯è¿žæŽ¥æ—¶ï¼ŒæœåŠ¡å™¨å‘é€ç¡®è®¤ç ã€‚å¦‚æžœè¿žæŽ¥çš„æœåŠ¡å™¨æ²¡æœ‰å“åº”ï¼Œå®¢æˆ·ç«¯ä¼šè‡ªåŠ¨å°†æ¶ˆæ¯é‡å®šå‘åˆ°å¦ä¸€ä¸ªæœåŠ¡å™¨ã€‚ServeræœåŠ¡å™¨ï¼Œæˆ‘ä»¬çš„ZooKeeperæ€»ä½“ä¸­çš„ä¸€ä¸ªèŠ‚ç‚¹ï¼Œä¸ºå®¢æˆ·ç«¯æä¾›æ‰€æœ‰çš„æœåŠ¡ã€‚å‘å®¢æˆ·ç«¯å‘é€ç¡®è®¤ç ä»¥å‘ŠçŸ¥æœåŠ¡å™¨æ˜¯æ´»è·ƒçš„ã€‚LeaderæœåŠ¡é¢†å¯¼è€…ã€‚1ã€å¤„ç†äº‹åŠ¡è¯·æ±‚å’Œéžäº‹åŠ¡è¯·æ±‚ï¼ˆå¦‚å¢žåˆ æ”¹æŸ¥ï¼‰ï¼›2ã€è°ƒåº¦é›†ç¾¤å†…éƒ¨çš„å„ä¸ªæœåŠ¡FolloweræœåŠ¡è·Ÿéšè€…ã€‚1ã€å¤„ç†éžäº‹åŠ¡è¯·æ±‚ï¼ˆå¦‚æŸ¥ï¼Œå¦‚æžœæŽ¥æ”¶åˆ°äº‹åŠ¡è¯·æ±‚çš„è¯åˆ™è½¬å‘ç»™Leaderï¼‰ï¼›2ã€å‚ä¸ŽLeaderé€‰ä¸¾æŠ•ç¥¨ObserveræœåŠ¡è§‚å¯Ÿè€…ã€‚1ã€å¤„ç†éžäº‹åŠ¡è¯·æ±‚ï¼ˆå¦‚æŸ¥ï¼Œå¦‚æžœæŽ¥æ”¶åˆ°äº‹åŠ¡è¯·æ±‚çš„è¯åˆ™è½¬å‘ç»™Leaderï¼‰ã€‚ï¼ˆä¸å‚ä¸ŽLeaderé€‰ä¸¾æŠ•ç¥¨ï¼‰Â¶3.2 éƒ¨ç½²å‡†å¤‡ä¸‰å°æœåŠ¡å™¨ï¼ˆå¤šå°åŒç†ï¼Œéœ€è¦åŸºæ•°å€ï¼Œé›†ç¾¤ä¸­ä»Ž3å°å˜æˆ2å°ä»å¯ç”¨ï¼Œè€Œå˜æˆ1å°æ—¶å°†ä¸ä¸å¯ç”¨ï¼‰172.16.10.111172.16.10.112172.16.10.113åˆ†åˆ«åœ¨ä¸‰å°zkæœåŠ¡å™¨ä¸­æ‰§è¡Œå¦‚ä¸‹æ“ä½œï¼š1234567891011121314151617181920$ mkdir -p /home/zookeeper/conf$ mkdir -p /home/zookeeper/data$ vim /home/zookeeper/conf/zoo.cfgclientPort=2181 dataDir=/data dataLogDir=/data/logtickTime=2000 initLimit=5 syncLimit=2 autopurge.snapRetainCount=3 autopurge.purgeInterval=0 maxClientCnxns=60server.111=172.16.10.111:2888:3888 server.112=172.16.10.112:2888:3888 server.113=172.16.10.113:2888:3888#æƒ³è®©æœåŠ¡èŠ‚ç‚¹ä¸ºobserverè§‚å¯Ÿè€…ï¼Œéœ€è¦å¦‚ä¸‹ä¸¤è¡Œé…ç½®#peerType=observer#server.113=172.16.10.113:2888:3888:observerserver.æœåŠ¡id=æœåŠ¡å™¨ip:æœåŠ¡å™¨ä¹‹é—´é€šä¿¡ç«¯å£:æœåŠ¡ä¹‹é—´æŠ•ç¥¨é€‰ä¸¾ç«¯å£æœåŠ¡idç¼–å·è¶Šå¤§ï¼Œåœ¨Leaderé€‰ä¸¾ä¸­æƒé‡è¶Šå¤§ï¼Œé€‰ä¸¾ç¥¨æ•°è¶…è¿‡åŠæ•°åˆ™ä¸ºLeaderã€‚åˆ†åˆ«åœ¨ä¸‰å°zkæœåŠ¡å™¨ä¸­çš„/home/zookeeper/dataç›®å½•ä¸‹åˆ›å»ºmyidï¼Œå¹¶é…ç½®idï¼Œé‡Œé¢çš„idä¸€å®šè¦å’Œä¸Šé¢é…ç½®çš„server.idä¸€è‡´123456#zk1$ echo 111 &gt; /home/zookeeper/data/myid#zk2$ echo 112 &gt; /home/zookeeper/data/myid#zk3$ echo 113 &gt; /home/zookeeper/data/myidåˆ†åˆ«è¿è¡Œzk dockeré•œåƒ1234567891011#èŽ·å–zk dockeré•œåƒ$ docker pull zookeeper:3.4.13#è¿è¡Œé•œåƒç”Ÿäº§dockerå®¹å™¨$ docker run -d --restart always --network host -v /home/zookeeper/data:/data -v /home/zookeeper/conf:/conf --name zookeeper-2181 zookeeper:3.4.13#æˆ–è€…ä»¥ä¸‹ï¼ˆç›®å‰å‘çŽ°ä»¥ä¸‹å‘½ä»¤ä¸å¯ç”¨ï¼‰#docker run -d --restart always -p 2181:2181 -p 2888:2888 -p 3888:3888 -v /home/zookeeper/data:/data -v /home/zookeeper/conf:/conf --name=zookeeper-2181 zookeeper:3.4.13#è¿›å…¥å®¹å™¨ä¸­æŸ¥çœ‹leaderé€‰ä¸¾æƒ…å†µ$ docker exec -it zookeeper-2181 /bin/sh$ zkServer.sh statusæ¯å°ä¸»æœºçš„2181/2888/3888ç«¯å£éƒ½ä¼šå¼€æ”¾å‡ºæ¥123456$ service firewalld start$ firewall-cmd --permanent --add-port=2181/tcp$ firewall-cmd --permanent --add-port=2888/tcp$ firewall-cmd --permanent --add-port=3888/tcp$ firewall-cmd --reload$ firewall-cmd --list-allÂ¶äº”ã€å¸¸ç”¨å‘½ä»¤12345678910111213141516171819202122232425262728293031323334353637##1ã€æŸ¥çœ‹ç›®å½•åˆ—è¡¨ï¼ˆå­èŠ‚ç‚¹åˆ—è¡¨ï¼‰#æŸ¥çœ‹æŸä¸ªè·¯å¾„ä¸‹ç›®å½•åˆ—è¡¨#pathï¼šæŒ‡å®šè¦åˆ›å»ºèŠ‚ç‚¹çš„è·¯å¾„ï¼Œæ¯”å¦‚ /testã€‚ls path#æŸ¥çœ‹æŸä¸ªè·¯å¾„ä¸‹ç›®å½•åˆ—è¡¨ï¼Œå®ƒæ¯” ls å‘½ä»¤åˆ—å‡ºæ›´å¤šçš„è¯¦ç»†ä¿¡æ¯ls -s pathls2 path #æ—§ç‰ˆ##2ã€èŽ·å–èŠ‚ç‚¹æ•°æ®å’ŒçŠ¶æ€ä¿¡æ¯#ï¼ˆ1ï¼‰èŽ·å–èŠ‚ç‚¹æ•°æ®å’ŒçŠ¶æ€ä¿¡æ¯ï¼Œ[watch]ï¼šå¯¹èŠ‚ç‚¹è¿›è¡Œäº‹ä»¶ç›‘å¬ã€‚get path [watch]#ä¾‹ï¼šget /test watch #ç»ˆç«¯1æŸ¥è¯¢å¹¶ç›‘å¬èŠ‚ç‚¹set /test 1 #ç»ˆç«¯2å¯¹èŠ‚ç‚¹è¿›è¡Œä¿®æ”¹#ï¼ˆ2ï¼‰æŸ¥çœ‹èŠ‚ç‚¹çŠ¶æ€ä¿¡æ¯stat path [watch]##3ã€åˆ›å»ºèŠ‚ç‚¹å¹¶èµ‹å€¼#[-s] [-e]ï¼š-s å’Œ -e éƒ½æ˜¯å¯é€‰çš„ï¼Œ-s ä»£è¡¨é¡ºåºèŠ‚ç‚¹(é€’å¢ž)ï¼Œ -e ä»£è¡¨ä¸´æ—¶èŠ‚ç‚¹ï¼ˆä¸åŠ è¡¨ç¤ºæŒä¹…èŠ‚ç‚¹ï¼‰ï¼Œæ³¨æ„å…¶ä¸­ -s å’Œ -e å¯ä»¥åŒæ—¶ä½¿ç”¨çš„ï¼Œå¹¶ä¸”ä¸´æ—¶èŠ‚ç‚¹ä¸èƒ½å†åˆ›å»ºå­èŠ‚ç‚¹ã€‚#pathï¼šæŒ‡å®šè¦åˆ›å»ºèŠ‚ç‚¹çš„è·¯å¾„ï¼Œæ¯”å¦‚ /testã€‚#dataï¼šè¦åœ¨æ­¤èŠ‚ç‚¹å­˜å‚¨çš„æ•°æ®ã€‚ä¸è®¾ç½®åˆ™ä¸ºnull#aclï¼šè®¿é—®æƒé™ç›¸å…³ï¼Œé»˜è®¤æ˜¯ worldï¼Œç›¸å½“äºŽå…¨ä¸–ç•Œéƒ½èƒ½è®¿é—®ã€‚create [-s] [-e] path [data] [acl]#ä¾‹ï¼šæ·»åŠ ä¸´æ—¶é¡ºåºèŠ‚ç‚¹å¹¶èµ‹å€¼create -s -e /test "hello"##4ã€ä¿®æ”¹èŠ‚ç‚¹å­˜å‚¨çš„æ•°æ®#[version]ï¼šå¯é€‰é¡¹ï¼Œç‰ˆæœ¬å·(å¯ç”¨ä½œä¹è§‚é”)ã€‚å³çŠ¶æ€ä¿¡æ¯ä¸­çš„dataVersionset path data [version]##5ã€åˆ é™¤èŠ‚ç‚¹#[version]ï¼šå¯é€‰é¡¹ï¼Œç‰ˆæœ¬å·ï¼ˆåŒ set å‘½ä»¤ï¼‰ã€‚#delete å‘½ä»¤åªèƒ½ä¸€å±‚ä¸€å±‚åˆ é™¤ã€‚æ–°ç‰ˆæœ¬å¯ä»¥é€šè¿‡ deleteall å‘½ä»¤é€’å½’åˆ é™¤delete path [version]Â¶å…­ ã€æƒé™æŽ§åˆ¶zookeeper çš„ ACLï¼ˆAccess Control Listï¼Œè®¿é—®æŽ§åˆ¶è¡¨ï¼‰æƒé™å¯ä»¥é’ˆå¯¹èŠ‚ç‚¹è®¾ç½®ç›¸å…³è¯»å†™ç­‰æƒé™ï¼Œä¿éšœæ•°æ®å®‰å…¨æ€§ã€‚zookeeper çš„ acl é€šè¿‡ [scheme:id:permissions] æ¥æž„æˆæƒé™åˆ—è¡¨ã€‚ï¼ˆ1ï¼‰schemeï¼šä»£è¡¨é‡‡ç”¨çš„æŸç§æƒé™æœºåˆ¶ï¼ˆæƒé™æ¨¡å¼ï¼‰ï¼ŒåŒ…æ‹¬ worldã€authã€digestã€ipã€super å‡ ç§ã€‚worldï¼šåªæœ‰ä¸€ä¸ªç”¨æˆ·ï¼šanyoneï¼Œä»£è¡¨ç™»å½•zookeeperæ‰€æœ‰äºº(é»˜è®¤)authï¼šä½¿ç”¨å·²æ·»åŠ è®¤è¯çš„ç”¨æˆ·è®¤è¯digestï¼šä½¿ç”¨&quot;ç”¨æˆ·åï¼šå¯†ç &quot;æ–¹å¼è®¤è¯ipï¼šé™åˆ¶ipè¿›è¡Œè®¿é—®ï¼ˆ2ï¼‰idï¼šä»£è¡¨å…è®¸è®¿é—®çš„ç”¨æˆ·ã€‚ï¼ˆ3ï¼‰permissionsï¼šæƒé™ç»„åˆå­—ç¬¦ä¸²ï¼Œç”± cdrwa ç»„æˆï¼Œå…¶ä¸­æ¯ä¸ªå­—æ¯ä»£è¡¨æ”¯æŒä¸åŒæƒé™ï¼ŒcreateÂ©ï¼šåˆ›å»ºå­èŠ‚ç‚¹æƒé™delete(d)ï¼šåˆ é™¤å­èŠ‚ç‚¹çš„æƒé™readÂ®ï¼šèŽ·å–å½“å‰èŠ‚ç‚¹/å­èŠ‚ç‚¹çš„æƒé™write(w)ï¼šè®¾ç½®èŠ‚ç‚¹æ•°æ®çš„æƒé™admin(a)ï¼šè®¾ç½®èŠ‚ç‚¹æƒé™çš„æƒé™ã€‚Â¶1. worldæ¨¡å¼1234567891011$ create /test$ create /test/child$ getAcl /test#æ›´æ–°èŠ‚ç‚¹ permissions æƒé™éƒ¨åˆ†ä¸º crwa$ setAcl /test world:anyone:crwa#ç»“æžœåˆ é™¤å­èŠ‚ç‚¹å¤±è´¥$ delete /test/child#æ›´æ–°èŠ‚ç‚¹ permissions æƒé™éƒ¨åˆ†ä¸º cdrwa$ setAcl /test world:anyone:cdrwa#ç»“æžœåˆ é™¤å­èŠ‚ç‚¹æˆåŠŸ$ delete /test/childÂ¶2. authæ¨¡å¼auth ç”¨äºŽæŽˆäºˆæƒé™ï¼ˆä»¥ç”¨æˆ·åå’Œæ˜Žæ–‡å¯†ç çš„å½¢å¼æŽˆæƒï¼‰ã€‚1234567$ create /test/child demo#ç»™å½“å‰ä¼šè¯åˆ›å»ºç”¨æˆ·åä¸ºuser1å¯†ç ä¸º123456çš„ç”¨æˆ·$ addauth digest user1:123456$ setAcl /test/child auth:user1:123456:cdrwa$ getAcl /test/child'digest,'user1:HYGa7IZRm2PUBFiFFu8xY2pPP/s=: cdrwaå¦å¤–èµ·ä¸€ä¸ªç»ˆç«¯æµ‹è¯•12345678$ get /test/child#æç¤ºå¦‚ä¸‹æ— æƒé™æ“ä½œorg.apache.zookeeper.KeeperException$NoAuthException: KeeperErrorCode = NoAuth for /test/child#ç»™å½“å‰ä¼šè¯åˆ›å»ºè¯¥èŠ‚ç‚¹éœ€è¦çš„ç”¨æˆ·åŽå°±å¯ä»¥æ“ä½œèŠ‚ç‚¹äº†$ addauth digest user1:123456#åœ¨=å†æ¬¡æ“ä½œå³å¯æˆåŠŸ$ get /test/childÂ¶3. digestæ¨¡å¼digeståŒæ ·ç”¨äºŽæŽˆäºˆæƒé™ï¼ˆä»¥ç”¨æˆ·åå’Œå¯†æ–‡å¯†ç çš„å½¢å¼æŽˆæƒï¼Œå¯†æ–‡å¯åœ¨åˆ›å»ºæ—¶çš„ä¼šè¯ä¸­é€šè¿‡getAclæŸ¥çœ‹ï¼‰ã€‚1234567# è®¡ç®—å¯†ç echo -n user1:123456 | openssl dgst -binary -sha1 | openssl base64# èŽ·å–å¯†ç ï¼Œè®¾ç½®æƒé™åˆ—è¡¨setAcl /test2 digest:user1:HYGa7IZRm2PUBFiFFu8xY2pPP/s=:cdrwa# çŽ°åœ¨æƒ³è¦get /hadoop éœ€è¦ç™»å½•äº†addauth digest user1:123456get /test2Â¶4. ipæ¨¡å¼é™åˆ¶ IP åœ°å€çš„è®¿é—®æƒé™ï¼ŒæŠŠæƒé™è®¾ç½®ç»™ IP åœ°å€ä¸º 192.168.3.7 åŽï¼ŒIP ä¸º 192.168.3.38 å·²ç»æ²¡æœ‰è®¿é—®æƒé™ã€‚123456$ create /test/ip 0$ getAcl /test/ip$ setAcl /test/ip ip:192.168.3.7:cdrwa$ get /test/ip#å‡è®¾å½“å‰æ‰€åœ¨ç»ˆç«¯å¹¶éž192.168.3.7ï¼Œåˆ™æç¤ºæ— æƒé™æ“ä½œAuthentication is not valid : /test/ipÂ¶5. ç»„åˆæ¨¡å¼ä»…éœ€é€—å·éš”å¼€setAcl /test ip:192.168.3.7:cdrwa,auth:user1:cdrwa,digest:user1:HYGa7IZRm2PUBFiFFu8xY2pPP/s=:cdrwa 12345678910111213### 6. è¶…çº§ç®¡ç†å‘˜&#96;zookeeper&#96;çš„æƒé™ç®¡ç†æ¨¡å¼æœ‰ä¸€ç§å«åš&#96;super&#96;ï¼Œè¯¥æ¨¡å¼æä¾›ä¸€ä¸ªè¶…ç®¡ï¼Œå¯ä»¥æ–¹ä¾¿çš„è®¿é—®ä»»ä½•æƒé™çš„èŠ‚ç‚¹ã€‚é»˜è®¤æ˜¯æ²¡æœ‰é…ç½®superçš„ï¼Œéœ€è¦åˆ°&#96;zookeeper&#96;ç›®å½•ä¸‹&#96;&#x2F;bin&#x2F;zkServer.sh&#96;æ–‡ä»¶ä¸­åŠ ç›¸å…³é…ç½®ã€‚&#96;&#96;&#96;bash &#x2F;nohup # å¿«é€ŸæŸ¥æ‰¾ï¼Œå¯ä»¥çœ‹åˆ°å¦‚ä¸‹ nohup &quot;$JAVA&quot; &quot;-Dzookeeper.log.dir&#x3D;$&#123;ZOO_LOG_DIR&#125;&quot; &quot;-Dzookeeper.root.logger&#x3D;$&#123;ZOO_LOG4J_PROP&#125;&quot; \ åŠ å…¥è¿è¡Œå‚æ•°-Dzookeeper.DigestAuthenticationProvider.superDigestã€‚å¦‚ä¸‹ï¼š1nohup "$JAVA" "-Dzookeeper.log.dir=$&#123;ZOO_LOG_DIR&#125;" "-Dzookeeper.root.logger=$&#123;ZOO_LOG4J_PROP&#125;" "-Dzookeeper.DigestAuthenticationProvider.superDigest=super:xQJmxLMiHGwaqBvst5y6rkB6HQs=" \æ³¨æ„ï¼š-Dzookeeper.DigestAuthenticationProvider.superDigestå‚æ•°çš„å€¼ä¸ºsuper:å¯†ç æ‘˜è¦ã€‚å‡è®¾å¯†ç ä¸ºadminï¼Œå¯é€šè¿‡å¦‚ä¸‹èŽ·å¾—å¯†ç æ‘˜è¦ã€‚1echo -n super:admin | openssl dgst -binary -sha1 | openssl base64å¦‚æžœä½¿ç”¨çš„æ˜¯dockerå®‰è£…çš„ï¼Œå¯ä»¥åœ¨è¿è¡Œå®¹å™¨çš„æ—¶å€™æŒ‡å®šjvmå‚æ•°å¦‚ä¸‹è®¾ç½®è¶…çº§ç®¡ç†å‘˜å³å¯ï¼ˆä¸éœ€è¦ä¿®æ”¹zkServer.shï¼‰ã€‚1docker run -d --restart always --name zookeeper -e JVMFLAGS="-Xmx1024m -Dzookeeper.DigestAuthenticationProvider.superDigest=super:xQJmxLMiHGwaqBvst5y6rkB6HQs=" -p 2181:2181 zookeeperä½¿ç”¨1234# ç™»å½•è¶…ç®¡addauth digest super:admin# å¼ºè¡Œæ“ä½œèŠ‚ç‚¹(è®¾/test/ipèŠ‚ç‚¹åœ¨ç™»å½•å‰æ— æƒæ“ä½œ)get /test/ipÂ¶ä¸ƒã€å›¾å½¢åŒ–å®¢æˆ·ç«¯Â¶1. PrettyZooä¸‹è½½åœ°å€ï¼šhttps://github.com/vran-dev/PrettyZoo/releasesÂ¶2. ZooInspectorä¸‹è½½åœ°å€ï¼šhttps://issues.apache.org/jira/secure/attachment/12436620/ZooInspector.zipè§£åŽ‹åŽè¿›å…¥ç›®å½•ZooInspector\buildï¼Œè¿è¡Œjava -jar zookeeper-dev-ZooInspector.jar]]></content>
      <categories>
        <category>javaee</category>
      </categories>
      <tags>
        <tag>javaee</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Spring Cloud å­¦ä¹ ç¬”è®°]]></title>
    <url>%2Fjavaee%2Fspringcloud.html</url>
    <content type="text"><![CDATA[Â¶ä¸€ã€å¾®æœåŠ¡æ¦‚å¿µÂ¶1. å¾®æœåŠ¡å®šä¹‰å¹¿ä¹‰ä¸Šè®²ï¼Œå¾®æœåŠ¡æ˜¯ä¸€ç§æž¶æž„é£Žæ ¼,æˆ–è€…è¯´æ˜¯ä¸€ç§å¼€å‘è½¯ä»¶çš„æž¶æž„å’Œç»„ç»‡æ–¹æ³•ã€‚ç‹­ä¹‰ä¸Šè®²ï¼Œå¾®æœåŠ¡æ˜¯ç»„æˆä¸€ä¸ªå¤§åž‹å¤æ‚è½¯ä»¶ç³»ç»Ÿçš„ä¸€ä¸ªæˆ–å¤šä¸ªå°åž‹ç‹¬ç«‹çš„æœåŠ¡è½¯ä»¶åº”ç”¨ã€‚ä¸€ä¸ªå¤§åž‹å¤æ‚è½¯ä»¶åº”ç”¨ç”±é€šè¿‡æ˜Žç¡®å®šä¹‰çš„ API è¿›è¡Œé€šä¿¡çš„ä¸€ä¸ªæˆ–å¤šä¸ªå°åž‹ç‹¬ç«‹æœåŠ¡(å¾®æœåŠ¡)ç»„æˆã€‚ç³»ç»Ÿä¸­çš„å„ä¸ªå¾®æœåŠ¡å¯è¢«ç‹¬ç«‹éƒ¨ç½²ï¼Œå„ä¸ªå¾®æœåŠ¡ä¹‹é—´æ˜¯æ¾è€¦åˆçš„ã€‚æ¯ä¸ªå¾®æœåŠ¡ä»…å…³æ³¨äºŽå®Œæˆä¸€ä»¶ä»»åŠ¡å¹¶å¾ˆå¥½åœ°å®Œæˆè¯¥ä»»åŠ¡ã€‚åœ¨æ‰€æœ‰æƒ…å†µä¸‹ï¼Œæ¯ä¸ªä»»åŠ¡ä»£è¡¨ç€ä¸€ä¸ªå°çš„ä¸šåŠ¡èƒ½åŠ›ã€‚Â¶2. å¾®æœåŠ¡æž¶æž„å¾®æœåŠ¡æž¶æž„æ˜¯â¼€ç§æž¶æž„æ¨¡å¼ï¼Œå®ƒæå€¡å°†å•â¼€åº”â½¤ç¨‹åºåˆ’åˆ†æˆâ¼€ç»„â¼©çš„æœåŠ¡ï¼ŒæœåŠ¡ä¹‹é—´äº’ç›¸åè°ƒã€äº’ç›¸é…åˆï¼Œä¸ºâ½¤æˆ·æä¾›æœ€ç»ˆä»·å€¼ã€‚æ¯ä¸ªæœåŠ¡è¿â¾åœ¨å…¶ç‹¬â½´çš„è¿›ç¨‹ä¸­ï¼ŒæœåŠ¡ä¸ŽæœåŠ¡é—´é‡‡â½¤è½»é‡çº§çš„é€šä¿¡æœºåˆ¶äº’ç›¸åä½œï¼ˆé€šå¸¸æ˜¯åŸºäºŽHTTPåè®®çš„RESTful APIï¼‰ã€‚æ¯ä¸ªæœåŠ¡éƒ½å›´ç»•ç€å…·ä½“ä¸šåŠ¡è¿›â¾æž„å»ºï¼Œå¹¶ä¸”èƒ½å¤Ÿè¢«ç‹¬â½´çš„éƒ¨ç½²åˆ°â½£äº§çŽ¯å¢ƒã€ç±»â½£äº§çŽ¯å¢ƒç­‰ã€‚å¦å¤–ï¼Œåº”å½“å°½é‡é¿å…ç»Ÿâ¼€çš„ã€é›†ä¸­å¼çš„æœåŠ¡ç®¡ç†æœºåˆ¶ï¼Œå¯¹å…·ä½“çš„â¼€ä¸ªæœåŠ¡â½½â¾”ï¼Œåº”æ ¹æ®ä¸šåŠ¡ä¸Šä¸‹â½‚ï¼Œé€‰æ‹©åˆé€‚çš„è¯­â¾”ã€â¼¯å…·å¯¹å…¶è¿›â¾æž„å»ºã€‚Â¶3. å¾®æœåŠ¡åŒ–å¾®æœåŠ¡åŒ–çš„æ ¸å¿ƒå°±æ˜¯å°†ä¼ ç»Ÿçš„ä¸€ç«™å¼åº”ç”¨ï¼Œæ ¹æ®ä¸šåŠ¡æ‹†åˆ†æˆä¸€ä¸ªä¸€ä¸ªçš„æœåŠ¡ï¼Œå½»åº•åœ°åŽ»è€¦åˆ,æ¯ä¸€ä¸ªå¾®æœåŠ¡æä¾›å•ä¸ªä¸šåŠ¡åŠŸèƒ½çš„æœåŠ¡ï¼Œä¸€ä¸ªæœåŠ¡åšä¸€ä»¶äº‹ï¼Œä»ŽæŠ€æœ¯è§’åº¦çœ‹å°±æ˜¯ä¸€ç§å°è€Œç‹¬ç«‹çš„å¤„ç†è¿‡ç¨‹ï¼Œç±»ä¼¼è¿›ç¨‹æ¦‚å¿µï¼Œèƒ½å¤Ÿè‡ªè¡Œå•ç‹¬å¯åŠ¨æˆ–é”€æ¯ï¼Œæ‹¥æœ‰è‡ªå·±ç‹¬ç«‹çš„æ•°æ®åº“ã€‚Â¶4. å¾®æœåŠ¡çš„ä¼˜ç¼ºç‚¹ä¼˜ç‚¹ï¼ˆ1ï¼‰æ¯ä¸ªæœåŠ¡è¶³å¤Ÿå†…èšï¼Œè¶³å¤Ÿå°ï¼Œä»£ç å®¹æ˜“ç†è§£è¿™æ ·èƒ½èšç„¦ä¸€ä¸ªæŒ‡å®šçš„ä¸šåŠ¡åŠŸèƒ½æˆ–ä¸šåŠ¡éœ€æ±‚ï¼ˆ2ï¼‰å¼€å‘ç®€å•ã€å¼€å‘æ•ˆçŽ‡æé«˜ï¼Œä¸€ä¸ªæœåŠ¡å¯èƒ½å°±æ˜¯ä¸“ä¸€çš„åªå¹²ä¸€ä»¶äº‹ã€‚å¾®æœåŠ¡èƒ½å¤Ÿè¢«å°å›¢é˜Ÿå•ç‹¬å¼€å‘ï¼Œè¿™ä¸ªå°å›¢é˜Ÿæ˜¯2åˆ°5äººçš„å¼€å‘äººå‘˜ç»„æˆã€‚å¾®æœåŠ¡æ˜¯æ¾è€¦åˆçš„ï¼Œæ˜¯æœ‰åŠŸèƒ½æ„ä¹‰çš„æœåŠ¡ï¼Œæ— è®ºæ˜¯åœ¨å¼€å‘é˜¶æ®µæˆ–éƒ¨ç½²é˜¶æ®µéƒ½æ˜¯ç‹¬ç«‹çš„ã€‚ï¼ˆ3ï¼‰å¾®æœåŠ¡èƒ½ä½¿ç”¨ä¸åŒçš„è¯­è¨€å¼€å‘ã€‚ï¼ˆ4ï¼‰æ˜“äºŽå’Œç¬¬ä¸‰æ–¹é›†æˆï¼Œå¾®æœåŠ¡å…è®¸å®¹æ˜“ä¸”çµæ´»çš„æ–¹å¼é›†æˆè‡ªåŠ¨éƒ¨ç½²ï¼Œé€šè¿‡æŒç»­é›†æˆå·¥å…·ï¼Œå¦‚Jenkins, Hudson, bamboo ã€‚ï¼ˆ5ï¼‰å¾®æœåŠ¡æ˜“äºŽè¢«ä¸€ä¸ªå¼€å‘äººå‘˜ç†è§£ï¼Œä¿®æ”¹å’Œç»´æŠ¤ï¼Œè¿™æ ·å°å›¢é˜Ÿèƒ½å¤Ÿæ›´å…³æ³¨è‡ªå·±çš„å·¥ä½œæˆæžœã€‚æ— éœ€é€šè¿‡åˆä½œæ‰èƒ½ä½“çŽ°ä»·å€¼ã€‚ï¼ˆ6ï¼‰å¾®æœåŠ¡å…è®¸ä½ åˆ©ç”¨èžåˆæœ€æ–°æŠ€æœ¯ã€‚ï¼ˆ7ï¼‰å¾®æœåŠ¡åªæ˜¯ä¸šåŠ¡é€»è¾‘çš„ä»£ç ï¼Œä¸ä¼šå’ŒHTML,CSS æˆ–å…¶ä»–ç•Œé¢ç»„ä»¶æ··åˆã€‚ï¼ˆ8ï¼‰æ¯ä¸ªå¾®æœåŠ¡éƒ½æœ‰è‡ªå·±çš„å­˜å‚¨èƒ½åŠ›ï¼Œå¯ä»¥æœ‰è‡ªå·±çš„æ•°æ®åº“ã€‚ä¹Ÿå¯ä»¥æœ‰ç»Ÿä¸€æ•°æ®åº“ã€‚ï¼ˆ9ï¼‰ç”±äºŽå¤šä¸ªå¾®æœåŠ¡åº”ç”¨å„è‡ªèƒ½ç‹¬ç«‹è¿è¡Œï¼Œæ‰€ä»¥å…¶ä¸­ä¸€äº›æœåŠ¡å‡ºçŽ°é—®é¢˜ä¸€èˆ¬ä¸ä¼šå½±å“å…¶ä»–æœåŠ¡çš„æ­£å¸¸è¿è¡Œå’Œä½¿ç”¨ã€‚ç¼ºç‚¹ï¼ˆ1ï¼‰å¼€å‘äººå‘˜è¦å¤„ç†åˆ†å¸ƒå¼ç³»ç»Ÿçš„å¤æ‚æ€§ï¼ˆ2ï¼‰å¤šæœåŠ¡è¿ç»´éš¾åº¦ï¼Œéšç€æœåŠ¡çš„å¢žåŠ ï¼Œè¿ç»´çš„åŽ‹åŠ›ä¹Ÿåœ¨å¢žå¤§ï¼ˆ3ï¼‰ç³»ç»Ÿéƒ¨ç½²ä¾èµ–ï¼ˆ4ï¼‰æœåŠ¡é—´é€šä¿¡æˆæœ¬ï¼ˆ5ï¼‰æ•°æ®ä¸€è‡´æ€§ï¼ˆ6ï¼‰ç³»ç»Ÿé›†æˆæµ‹è¯•ï¼ˆ7ï¼‰æ€§èƒ½ç›‘æŽ§â€¦â€¦Â¶5. å¾®æœåŠ¡æŠ€æœ¯æ ˆæœåŠ¡å¼€å‘ Springbootã€Springã€SpringMVCæœåŠ¡é…ç½®ä¸Žç®¡ç† Netflixå…¬å¸çš„Archaiusã€é˜¿é‡Œçš„Diamondç­‰æœåŠ¡æ³¨å†Œä¸Žå‘çŽ° Eurekaã€Consulã€Zookeeperç­‰æœåŠ¡è°ƒç”¨ Restã€RPCã€gRPCæœåŠ¡ç†”æ–­å™¨ Hystrixã€Envoyç­‰è´Ÿè½½å‡è¡¡ Ribbonã€Nginxç­‰æœåŠ¡æŽ¥å£è°ƒç”¨(å®¢æˆ·ç«¯è°ƒç”¨æœåŠ¡çš„ç®€åŒ–å·¥å…·) Feignç­‰æ¶ˆæ¯é˜Ÿåˆ— Kafkaã€RabbitMQã€ActiveMQç­‰æœåŠ¡é…ç½®ä¸­å¿ƒç®¡ç† SpringCloudConfigã€Chefç­‰æœåŠ¡è·¯ç”±(APIç½‘å…³) Zuulç­‰æœåŠ¡ç›‘æŽ§ Zabbixã€Nagiosã€Metricsã€Spectatorç­‰å…¨é“¾è·¯è¿½è¸ª Zipkinï¼ŒBraveã€Dapperç­‰æœåŠ¡éƒ¨ç½² Dockerã€OpenStackã€Kubernetesç­‰æ•°æ®æµæ“ä½œå¼€å‘åŒ… SpringCloud Streamï¼ˆå°è£…ä¸ŽRedis,Rabbitã€Kafkaç­‰å‘é€æŽ¥æ”¶æ¶ˆæ¯ï¼‰äº‹ä»¶æ¶ˆæ¯æ€»çº¿ Spring Cloud BusÂ¶6. å„å¾®æœåŠ¡æ¡†æž¶å¯¹æ¯”Â¶7. å¾®æœåŠ¡ä¸­SpringCloudä¸ŽDubboçš„åŒºåˆ«DubboSpringCloudæœåŠ¡æ³¨å†Œä¸­å¿ƒZookeeperSpring Cloud Netfilx EurekaæœåŠ¡è°ƒç”¨æ–¹å¼RPCREST APIæœåŠ¡ç›‘æŽ§Dubbo-monitorSpring Boot Adminæ–­è·¯å™¨ä¸å®Œå–„pring Cloud Netflix HystrixæœåŠ¡ç½‘å…³æ— Spring Cloud Netflix Zuulåˆ†å¸ƒå¼é…ç½®æ— Spring Cloud ConfigæœåŠ¡è·Ÿè¸ªæ— Spring Cloud Sleuthæ¶ˆæ¯æ€»çº¿æ— Spring Cloud Busæ•°æ®æµæ— Spring Cloud Streamæ‰¹é‡ä»»åŠ¡æ— Spring Cloud Taskâ€¦â€¦â€¦â€¦â€¦â€¦å½“ç„¶è¿™é‡Œéœ€è¦ç”³æ˜Žä¸€ç‚¹ï¼ŒDubboå¯¹äºŽä¸Šè¡¨ä¸­æ€»ç»“ä¸ºâ€œæ— â€çš„ç»„ä»¶ä¸ä»£è¡¨ä¸èƒ½å®žçŽ°ï¼Œè€Œåªæ˜¯Dubboæ¡†æž¶è‡ªèº«ä¸æä¾›ï¼Œéœ€è¦å¦å¤–æ•´åˆä»¥å®žçŽ°å¯¹åº”çš„åŠŸèƒ½ï¼Œæ¯”å¦‚ï¼šåˆ†å¸ƒå¼é…ç½®ï¼šå¯ä»¥ä½¿ç”¨æ·˜å®çš„diamondã€ç™¾åº¦çš„disconfæ¥å®žçŽ°åˆ†å¸ƒå¼é…ç½®ç®¡ç†ã€‚ä½†æ˜¯Spring Cloudä¸­çš„Configç»„ä»¶é™¤äº†æä¾›é…ç½®ç®¡ç†ä¹‹å¤–ï¼Œç”±äºŽå…¶å­˜å‚¨å¯ä»¥ä½¿ç”¨gitï¼Œå› æ­¤å®ƒå¤©ç„¶çš„å®žçŽ°äº†é…ç½®å†…å®¹çš„ç‰ˆæœ¬ç®¡ç†ï¼Œå¯ä»¥å®Œç¾Žçš„ä¸Žåº”ç”¨ç‰ˆæœ¬ç®¡ç†æ•´åˆèµ·æ¥ã€‚æœåŠ¡è·Ÿè¸ªï¼šå¯ä»¥ä½¿ç”¨äº¬ä¸œå¼€æºçš„Hydraæ‰¹é‡ä»»åŠ¡ï¼šå¯ä»¥ä½¿ç”¨å½“å½“å¼€æºçš„Elastic-Jobâ€¦â€¦æœ€å¤§åŒºåˆ«ï¼šSpring CloudæŠ›å¼ƒäº†RPCé€šè®¯ï¼Œé‡‡ç”¨åŸºäºŽHTTPçš„RESTæ–¹å¼ã€‚Spring Cloudç‰ºç‰²äº†æœåŠ¡è°ƒç”¨çš„æ€§èƒ½ï¼Œä½†æ˜¯åŒæ—¶ä¹Ÿé¿å…äº†åŽŸç”ŸRPCå¸¦æ¥çš„é—®é¢˜ã€‚RESTæ¯”RPCæ›´ä¸ºçµæ´»ï¼Œä¸å­˜åœ¨ä»£ç çº§åˆ«çš„å¼ºä¾èµ–ï¼Œåœ¨å¼ºè°ƒå¿«é€Ÿæ¼”åŒ–çš„å¾®æœåŠ¡çŽ¯å¢ƒä¸‹ï¼Œæ˜¾ç„¶æ›´åˆé€‚ã€‚Dubboåªæ˜¯å®žçŽ°äº†æœåŠ¡æ²»ç†ï¼Œè€ŒSpring Cloudä¸‹é¢æœ‰17ä¸ªå­é¡¹ç›®ï¼ˆå¯èƒ½è¿˜ä¼šæ–°å¢žï¼‰åˆ†åˆ«è¦†ç›–äº†å¾®æœåŠ¡æž¶æž„ä¸‹çš„æ–¹æ–¹é¢é¢ï¼ŒæœåŠ¡æ²»ç†åªæ˜¯å…¶ä¸­çš„ä¸€ä¸ªæ–¹é¢ï¼Œä¸€å®šç¨‹åº¦æ¥è¯´ï¼ŒDubboåªæ˜¯Spring Cloud Netflixä¸­çš„ä¸€ä¸ªå­é›†ã€‚ä¸€å¥è¯ï¼šDubboåƒç»„è£…æœºï¼ŒSpring Cloudåƒä¸€ä½“æœºç¤¾åŒºçš„æ”¯æŒä¸ŽåŠ›åº¦ï¼šDubboæ›¾ç»åœè¿äº†5å¹´ï¼Œè™½ç„¶é‡å¯äº†ï¼Œä½†æ˜¯å¯¹äºŽæŠ€æœ¯å‘å±•çš„æ–°éœ€æ±‚ï¼Œè¿˜æ˜¯éœ€è¦å¼€å‘è€…è‡ªè¡ŒåŽ»æ‹“å±•ï¼Œå¯¹äºŽä¸­å°åž‹å…¬å¸ï¼Œæ˜¾ç„¶æ˜¾å¾—æ¯”è¾ƒè´¹æ—¶è´¹åŠ›ï¼Œä¹Ÿä¸ä¸€å®šæœ‰å¼ºå¤§çš„å®žåŠ›åŽ»ä¿®æ”¹æºç æ€»ç»“è§£å†³çš„é—®é¢˜åŸŸä¸ä¸€æ ·ï¼šDubboçš„å®šä½æ˜¯ä¸€æ¬¾RPCæ¡†æž¶ï¼ŒSpring Cloudçš„ç›®æ ‡æ˜¯å¾®æœåŠ¡æž¶æž„ä¸‹çš„ä¸€ç«™å¼è§£å†³æ–¹æ¡ˆ ï¼›Â¶äºŒã€SpringCloudÂ¶1. æ¦‚å¿µå®˜ç½‘ï¼šhttp://projects.spring.io/spring-cloud/å‚è€ƒæ–‡æ¡£ï¼šæœ¬æ¬¡å¼€å‘APIè¯´æ˜Žï¼šhttps://springcloud.cc/spring-cloud-netflix.html http://cloud.spring.io/spring-cloud-static/Dalston.SR1/ https://springcloud.cc/spring-cloud-dalston.htmlspringcloudä¸­å›½ç¤¾åŒºï¼šhttp://springcloud.cn/springcloudä¸­æ–‡ç½‘ï¼šhttps://springcloud.cc/SpringCloudæ˜¯åŸºäºŽSpringBootæä¾›äº†ä¸€å¥—å¾®æœåŠ¡è§£å†³æ–¹æ¡ˆï¼ŒåŒ…æ‹¬æœåŠ¡æ³¨å†Œä¸Žå‘çŽ°ï¼Œé…ç½®ä¸­å¿ƒï¼Œå…¨é“¾è·¯ç›‘æŽ§ï¼ŒæœåŠ¡ç½‘å…³ï¼Œè´Ÿè½½å‡è¡¡ï¼Œç†”æ–­å™¨ç­‰ç»„ä»¶ï¼Œé™¤äº†åŸºäºŽNetFlixçš„å¼€æºç»„ä»¶åšé«˜åº¦æŠ½è±¡å°è£…ä¹‹å¤–ï¼Œè¿˜æœ‰ä¸€äº›é€‰åž‹ä¸­ç«‹çš„å¼€æºç»„ä»¶ã€‚SpringCloud=åˆ†å¸ƒå¼å¾®æœåŠ¡æž¶æž„ä¸‹çš„ä¸€ç«™å¼è§£å†³æ–¹æ¡ˆï¼Œæ˜¯å„ä¸ªå¾®æœåŠ¡æž¶æž„è½åœ°æŠ€æœ¯çš„é›†åˆä½“ï¼Œä¿—ç§°å¾®æœåŠ¡å…¨å®¶æ¡¶SpringCloudåˆ©ç”¨SpringBootçš„å¼€å‘ä¾¿åˆ©æ€§å·§å¦™åœ°ç®€åŒ–äº†åˆ†å¸ƒå¼ç³»ç»ŸåŸºç¡€è®¾æ–½çš„å¼€å‘ï¼ŒSpringCloudä¸ºå¼€å‘äººå‘˜æä¾›äº†å¿«é€Ÿæž„å»ºåˆ†å¸ƒå¼ç³»ç»Ÿçš„ä¸€äº›å·¥å…·ï¼ŒåŒ…æ‹¬é…ç½®ç®¡ç†ã€æœåŠ¡å‘çŽ°ã€æ–­è·¯å™¨ã€è·¯ç”±ã€å¾®ä»£ç†ã€äº‹ä»¶æ€»çº¿ã€å…¨å±€é”ã€å†³ç­–ç«žé€‰ã€åˆ†å¸ƒå¼ä¼šè¯ç­‰ç­‰,å®ƒä»¬éƒ½å¯ä»¥ç”¨SpringBootçš„å¼€å‘é£Žæ ¼åšåˆ°ä¸€é”®å¯åŠ¨å’Œéƒ¨ç½²ã€‚SpringBootå¹¶æ²¡æœ‰é‡å¤åˆ¶é€ è½®å­ï¼Œå®ƒåªæ˜¯å°†ç›®å‰å„å®¶å…¬å¸å¼€å‘çš„æ¯”è¾ƒæˆç†Ÿã€ç»å¾—èµ·å®žé™…è€ƒéªŒçš„æœåŠ¡æ¡†æž¶ç»„åˆèµ·æ¥ï¼Œé€šè¿‡SpringBooté£Žæ ¼è¿›è¡Œå†å°è£…å±è”½æŽ‰äº†å¤æ‚çš„é…ç½®å’Œå®žçŽ°åŽŸç†ï¼Œæœ€ç»ˆç»™å¼€å‘è€…ç•™å‡ºäº†ä¸€å¥—ç®€å•æ˜“æ‡‚ã€æ˜“éƒ¨ç½²å’Œæ˜“ç»´æŠ¤çš„åˆ†å¸ƒå¼ç³»ç»Ÿå¼€å‘å·¥å…·åŒ…Â¶2. SpringBootå’ŒSpringCloudSpringBootä¸“æ³¨äºŽå¿«é€Ÿæ–¹ä¾¿çš„å¼€å‘å•ä¸ªä¸ªä½“å¾®æœåŠ¡ã€‚SpringCloudæ˜¯å…³æ³¨å…¨å±€çš„å¾®æœåŠ¡åè°ƒæ•´ç†æ²»ç†æ¡†æž¶ï¼Œå®ƒå°†SpringBootå¼€å‘çš„ä¸€ä¸ªä¸ªå•ä½“å¾®æœåŠ¡æ•´åˆå¹¶ç®¡ç†èµ·æ¥ï¼Œä¸ºå„ä¸ªå¾®æœåŠ¡ä¹‹é—´æä¾›ï¼Œé…ç½®ç®¡ç†ã€æœåŠ¡å‘çŽ°ã€æ–­è·¯å™¨ã€è·¯ç”±ã€å¾®ä»£ç†ã€äº‹ä»¶æ€»çº¿ã€å…¨å±€é”ã€å†³ç­–ç«žé€‰ã€åˆ†å¸ƒå¼ä¼šè¯ç­‰ç­‰é›†æˆæœåŠ¡SpringBootå¯ä»¥ç¦»å¼€SpringCloudç‹¬ç«‹ä½¿ç”¨å¼€å‘é¡¹ç›®ï¼Œä½†æ˜¯SpringCloudç¦»ä¸å¼€SpringBootï¼Œå±žäºŽä¾èµ–çš„å…³ç³».SpringBootä¸“æ³¨äºŽå¿«é€Ÿã€æ–¹ä¾¿çš„å¼€å‘å•ä¸ªå¾®æœåŠ¡ä¸ªä½“ï¼ŒSpringCloudå…³æ³¨å…¨å±€çš„æœåŠ¡æ²»ç†æ¡†æž¶ã€‚Â¶3.é¡¹ç›®æ­å»ºç¤ºä¾‹é¡¹ç›®Â¶3.1 éœ€æ±‚é¡¹ç›®æ­å»ºä¸ºspringmvc+mybatis+mysqlï¼Œä»¥Deptéƒ¨é—¨æ¨¡å—åšä¸€ä¸ªå¾®æœåŠ¡é€šç”¨æ¡ˆä¾‹ã€‚Consumeræ¶ˆè´¹è€…ï¼ˆClientï¼‰é€šè¿‡RESTè°ƒç”¨Provideræä¾›è€…ï¼ˆServerï¼‰æä¾›çš„æœåŠ¡ã€‚åˆ›å»ºmavenèšåˆå·¥ç¨‹ï¼š12345678910111213#çˆ¶é¡¹ç›®(microservicecloud)èšåˆå¾ˆå¤šå­é¡¹ç›®(microservicecloud-api,microservicecloud-provider-dept-8001,microservicecloud-consumer-dept-80)---- microservicecloud #çˆ¶é¡¹ç›®(ç±»ä¼¼ä¸€ä¸ªæŠ½è±¡çˆ¶ç±») |---- pom.xml (pom) | |-------- microservicecloud-api #å°è£…çš„æ•´ä½“entity/æŽ¥å£/å…¬å…±é…ç½®ç­‰ | |-------- pom.xml (jar) | |-------- microservicecloud-provider-dept-8001 #å¾®æœåŠ¡è½åœ°çš„æœåŠ¡æä¾›è€… | |-------- pom.xml (jar) | |-------- microservicecloud-consumer-dept-80 #å¾®æœåŠ¡è°ƒç”¨çš„æ¶ˆè´¹è€… | |-------- pom.xml (jar)Â¶3.2 ç¬¬ä¸€æ­¥ï¼ˆ1ï¼‰åˆ›å»ºä¸€ä¸ªå¤§åŒ…æ–¹å¼ä¸ºpomçš„çˆ¶é¡¹ç›®microservicecloudgroupId: com.qcmokeartifactId: microservicecloudversion: 0.0.1-SNAPSHOTpackaging: pomï¼ˆ2ï¼‰ä¿®æ”¹pom.xml12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"&gt; &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt; &lt;groupId&gt;com.qcmoke&lt;/groupId&gt; &lt;artifactId&gt;microservicecloud&lt;/artifactId&gt; &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt; &lt;packaging&gt;pom&lt;/packaging&gt; &lt;properties&gt; &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt; &lt;maven.compiler.source&gt;1.8&lt;/maven.compiler.source&gt; &lt;maven.compiler.target&gt;1.8&lt;/maven.compiler.target&gt; &lt;junit.version&gt;4.12&lt;/junit.version&gt; &lt;log4j.version&gt;1.2.17&lt;/log4j.version&gt; &lt;lombok.version&gt;1.16.18&lt;/lombok.version&gt; &lt;/properties&gt; &lt;!-- 1.dependencyManagementé‡Œåªæ˜¯å£°æ˜Žä¾èµ–ï¼Œå¹¶ä¸å®žçŽ°å¼•å…¥ï¼Œå› æ­¤å­é¡¹ç›®éœ€è¦æ˜¾å¼çš„å£°æ˜Žéœ€è¦ç”¨çš„ä¾èµ–ã€‚å¦‚æžœä¸åœ¨å­é¡¹ç›®ä¸­å£°æ˜Žä¾èµ–ï¼Œæ˜¯ä¸ä¼šä»Žçˆ¶é¡¹ç›®ä¸­ç»§æ‰¿ä¸‹æ¥çš„ï¼›åªæœ‰åœ¨å­é¡¹ç›®ä¸­å†™äº†è¯¥ä¾èµ–é¡¹ï¼Œå¹¶ä¸”æ²¡æœ‰æŒ‡å®šå…·ä½“ç‰ˆæœ¬ï¼Œæ‰ä¼šä»Žçˆ¶é¡¹ç›®ä¸­ç»§æ‰¿è¯¥é¡¹ï¼Œå¹¶ä¸”versionå’Œscopeéƒ½è¯»å–è‡ªçˆ¶pom;å¦å¤–å¦‚æžœå­é¡¹ç›®ä¸­æŒ‡å®šäº†ç‰ˆæœ¬å·ï¼Œé‚£ä¹ˆä¼šä½¿ç”¨å­é¡¹ç›®ä¸­æŒ‡å®šçš„jarç‰ˆæœ¬ã€‚ä¸€èˆ¬åœ¨æˆ‘ä»¬é¡¹ç›®é¡¶å±‚çš„pomæ–‡ä»¶ä¸­ï¼Œæˆ‘ä»¬ä¼šçœ‹åˆ°dependencyManagementå…ƒç´  2.dependencieså³ä½¿åœ¨å­æ¨¡å—ä¸­ä¸å†™è¯¥ä¾èµ–é¡¹ï¼Œé‚£ä¹ˆå­æ¨¡å—ä»ç„¶ä¼šä»Žçˆ¶é¡¹ç›®ä¸­ç»§æ‰¿è¯¥ä¾èµ–é¡¹ï¼ˆå…¨éƒ¨ç»§æ‰¿ï¼‰ã€‚--&gt; &lt;dependencyManagement&gt; &lt;dependencies&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt; &lt;artifactId&gt;spring-cloud-dependencies&lt;/artifactId&gt; &lt;version&gt;Dalston.SR1&lt;/version&gt; &lt;type&gt;pom&lt;/type&gt; &lt;scope&gt;import&lt;/scope&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-dependencies&lt;/artifactId&gt; &lt;version&gt;1.5.9.RELEASE&lt;/version&gt; &lt;type&gt;pom&lt;/type&gt; &lt;scope&gt;import&lt;/scope&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;mysql&lt;/groupId&gt; &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt; &lt;version&gt;5.0.4&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;com.alibaba&lt;/groupId&gt; &lt;artifactId&gt;druid&lt;/artifactId&gt; &lt;version&gt;1.0.31&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.mybatis.spring.boot&lt;/groupId&gt; &lt;artifactId&gt;mybatis-spring-boot-starter&lt;/artifactId&gt; &lt;version&gt;1.3.0&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;ch.qos.logback&lt;/groupId&gt; &lt;artifactId&gt;logback-core&lt;/artifactId&gt; &lt;version&gt;1.2.3&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;junit&lt;/groupId&gt; &lt;artifactId&gt;junit&lt;/artifactId&gt; &lt;version&gt;$&#123;junit.version&#125;&lt;/version&gt; &lt;scope&gt;test&lt;/scope&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;log4j&lt;/groupId&gt; &lt;artifactId&gt;log4j&lt;/artifactId&gt; &lt;version&gt;$&#123;log4j.version&#125;&lt;/version&gt; &lt;/dependency&gt; &lt;/dependencies&gt; &lt;/dependencyManagement&gt;&lt;/project&gt;Â¶3.3 ç¬¬äºŒæ­¥ï¼ˆ1ï¼‰åˆ›å»ºå­æ¨¡å—microservicecloud-apiï¼ˆ2ï¼‰ä¿®æ”¹è¯¥æ¨¡å—çš„pom.xml12345678910111213141516171819202122232425&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"&gt; &lt;!-- å­ç±»é‡Œé¢æ˜¾ç¤ºå£°æ˜Žæ‰èƒ½æœ‰æ˜Žç¡®çš„ç»§æ‰¿è¡¨çŽ° --&gt; &lt;parent&gt; &lt;artifactId&gt;microservicecloud&lt;/artifactId&gt; &lt;groupId&gt;com.qcmoke&lt;/groupId&gt; &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt; &lt;/parent&gt; &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt; &lt;!-- å½“å‰Moduleæˆ‘è‡ªå·±å«ä»€ä¹ˆåå­— --&gt; &lt;artifactId&gt;microservicecloud-api&lt;/artifactId&gt; &lt;dependencies&gt;&lt;!-- å½“å‰Moduleéœ€è¦ç”¨åˆ°çš„jaråŒ…ï¼ŒæŒ‰è‡ªå·±éœ€æ±‚æ·»åŠ ï¼Œå¦‚æžœçˆ¶ç±»å·²ç»åŒ…å«äº†ï¼Œå¯ä»¥ä¸ç”¨å†™ç‰ˆæœ¬å· --&gt; &lt;dependency&gt; &lt;groupId&gt;org.projectlombok&lt;/groupId&gt; &lt;artifactId&gt;lombok&lt;/artifactId&gt; &lt;/dependency&gt; &lt;/dependencies&gt;&lt;/project&gt;ï¼ˆ3ï¼‰åˆ›å»ºå®ŒæˆåŽåœ¨çˆ¶å·¥ç¨‹çš„pomæ–‡ä»¶çš„&lt;project&gt;æ ‡ç­¾ä¸‹æ·»åŠ å¦‚ä¸‹ä»£ç ã€‚ï¼ˆä¸€èˆ¬IDEå·¥å…·ä¼šè‡ªåŠ¨æ·»åŠ ï¼‰123&lt;modules&gt; &lt;module&gt;microservicecloud-api&lt;/module&gt;&lt;/modules&gt;ï¼ˆ4ï¼‰åœ¨src/main/javaä¸‹æ–°å»ºcom.qcmoke.entities.Dept12345678910111213141516171819202122232425262728package com.qcmoke.entities;import lombok.AllArgsConstructor;import lombok.Data;import lombok.NoArgsConstructor;import lombok.experimental.Accessors;/** * éƒ¨é—¨å®žä½“ç±» * * @author qcmoke * @date 2019/09/02 03:14 */@Data@AllArgsConstructor@NoArgsConstructor@Accessors(chain = true)public class Dept &#123; private Long deptno;//ä¸»é”® private String dname; //éƒ¨é—¨åç§° private String db_source; // æ¥è‡ªé‚£ä¸ªæ•°æ®åº“ï¼Œå› ä¸ºå¾®æœåŠ¡æž¶æž„å¯ä»¥ä¸€ä¸ªæœåŠ¡å¯¹åº”ä¸€ä¸ªæ•°æ®åº“ï¼ŒåŒä¸€ä¸ªä¿¡æ¯è¢«å­˜å‚¨åˆ°ä¸åŒæ•°æ®åº“ public Dept(String dname) &#123; super(); this.dname = dname; &#125;&#125;Â¶3.4 ç¬¬ä¸‰æ­¥ï¼ˆ1ï¼‰åˆ›å»ºå­æ¨¡å—microservicecloud-provider-dept-8001ï¼ˆ2ï¼‰ç¼–è¾‘è¯¥æ¨¡å—çš„pom.xml12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"&gt; &lt;parent&gt; &lt;artifactId&gt;microservicecloud&lt;/artifactId&gt; &lt;groupId&gt;com.qcmoke&lt;/groupId&gt; &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt; &lt;/parent&gt; &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt; &lt;artifactId&gt;microservicecloud-provider-dept-8001&lt;/artifactId&gt; &lt;dependencies&gt; &lt;dependency&gt;&lt;!-- å¼•å…¥è‡ªå·±å®šä¹‰çš„å…¶ä»–æ¨¡å—ï¼ˆmicroservicecloud-apiï¼‰ --&gt; &lt;groupId&gt;com.qcmoke&lt;/groupId&gt; &lt;artifactId&gt;microservicecloud-api&lt;/artifactId&gt; &lt;version&gt;$&#123;project.version&#125;&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;junit&lt;/groupId&gt; &lt;artifactId&gt;junit&lt;/artifactId&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;mysql&lt;/groupId&gt; &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;com.alibaba&lt;/groupId&gt; &lt;artifactId&gt;druid&lt;/artifactId&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;ch.qos.logback&lt;/groupId&gt; &lt;artifactId&gt;logback-core&lt;/artifactId&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.mybatis.spring.boot&lt;/groupId&gt; &lt;artifactId&gt;mybatis-spring-boot-starter&lt;/artifactId&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-jetty&lt;/artifactId&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt; &lt;/dependency&gt; &lt;!-- ä¿®æ”¹åŽç«‹å³ç”Ÿæ•ˆï¼Œçƒ­éƒ¨ç½² --&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework&lt;/groupId&gt; &lt;artifactId&gt;springloaded&lt;/artifactId&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt; &lt;/dependency&gt; &lt;/dependencies&gt;&lt;/project&gt;ï¼ˆ3ï¼‰åˆ›å»ºå®ŒæˆåŽåœ¨çˆ¶å·¥ç¨‹çš„pomæ–‡ä»¶çš„&lt;project&gt;æ ‡ç­¾ä¸‹ä¿®æ”¹&lt;modules&gt;ä¸ºå¦‚ä¸‹ä»£ç ã€‚ï¼ˆä¸€èˆ¬IDEå·¥å…·ä¼šè‡ªåŠ¨æ·»åŠ ï¼‰1234&lt;modules&gt; &lt;module&gt;microservicecloud-api&lt;/module&gt; &lt;module&gt;microservicecloud-provider-dept-8001&lt;/module&gt;&lt;/modules&gt;ï¼ˆ4ï¼‰åœ¨è¯¥æ¨¡å—ä¸‹æ–°å»ºå¯åŠ¨ç±»com.qcmoke.DeptProvider8001App.java123456789101112131415161718package com.qcmoke;import org.springframework.boot.SpringApplication;import org.springframework.boot.autoconfigure.SpringBootApplication;/** * microservicecloud-provider-dept-8001æ¨¡å—çš„å¯åŠ¨ç±» * * @author qcmoke * @date 2019/09/02 03:34 */@SpringBootApplicationpublic class DeptProvider8001App &#123; public static void main(String[] args) &#123; SpringApplication.run(DeptProvider8001App.class, args); &#125;&#125;ï¼ˆ5ï¼‰åœ¨è¯¥æ¨¡å—ä¸‹åˆ›å»ºsrc/main/resources/application.yml1234567891011121314151617181920212223server: port: 8001mybatis: config-location: classpath:mybatis/mybatis.cfg.xml # mybatisé…ç½®æ–‡ä»¶æ‰€åœ¨è·¯å¾„ type-aliases-package: com.qcmoke.entities # æ‰€æœ‰Entityåˆ«åç±»æ‰€åœ¨åŒ… mapper-locations: - classpath:mybatis/mapper/**/*.xml # mapperæ˜ å°„æ–‡ä»¶spring: application: name: microservicecloud-dept #å¯¹å¤–æš´éœ²çš„å¾®æœåŠ¡çš„åç§°ï¼ˆé‡ç‚¹ï¼‰ datasource: type: com.alibaba.druid.pool.DruidDataSource # å½“å‰æ•°æ®æºæ“ä½œç±»åž‹ driver-class-name: org.gjt.mm.mysql.Driver # mysqlé©±åŠ¨åŒ… url: jdbc:mysql://localhost:3306/cloudDB01 # æ•°æ®åº“åç§° username: root password: 123456 dbcp2: min-idle: 5 # æ•°æ®åº“è¿žæŽ¥æ± çš„æœ€å°ç»´æŒè¿žæŽ¥æ•° initial-size: 5 # åˆå§‹åŒ–è¿žæŽ¥æ•° max-total: 5 # æœ€å¤§è¿žæŽ¥æ•° max-wait-millis: 200 # ç­‰å¾…è¿žæŽ¥èŽ·å–çš„æœ€å¤§è¶…æ—¶æ—¶é—´ï¼ˆ6ï¼‰åœ¨è¯¥æ¨¡å—ä¸‹åˆ›å»ºsrc/main/resources/mybatis/mybatis.cfg.xml123456789101112&lt;?xml version="1.0" encoding="UTF-8" ?&gt;&lt;!DOCTYPE configuration PUBLIC "-//mybatis.org//DTD Config 3.0//EN" "http://mybatis.org/dtd/mybatis-3-config.dtd"&gt;&lt;configuration&gt; &lt;settings&gt; &lt;setting name="cacheEnabled" value="true"/&gt;&lt;!-- äºŒçº§ç¼“å­˜å¼€å¯ --&gt; &lt;/settings&gt;&lt;/configuration&gt;ï¼ˆ7ï¼‰mysqlæ‰§è¡Œä»¥ä¸‹sqlåˆ›å»ºæ•°æ®åº“å’Œæ·»åŠ ç›¸å…³è¡¨æ•°æ®123456789101112131415161718DROP DATABASE IF EXISTS cloudDB01;CREATE DATABASE cloudDB01 CHARACTER SET UTF8;USE cloudDB01;CREATE TABLE dept( deptno BIGINT NOT NULL PRIMARY KEY AUTO_INCREMENT, dname VARCHAR(60), db_source VARCHAR(60));INSERT INTO dept(dname,db_source) VALUES('å¼€å‘éƒ¨',DATABASE()); -- DATABASE()å‡½æ•°å¯èŽ·å–å½“å‰æ•°æ®åº“çš„åç§°ï¼Œåœ¨åˆ†åº“çš„æƒ…å†µä¸‹éœ€è¦INSERT INTO dept(dname,db_source) VALUES('äººäº‹éƒ¨',DATABASE());INSERT INTO dept(dname,db_source) VALUES('è´¢åŠ¡éƒ¨',DATABASE());INSERT INTO dept(dname,db_source) VALUES('å¸‚åœºéƒ¨',DATABASE());INSERT INTO dept(dname,db_source) VALUES('è¿ç»´éƒ¨',DATABASE());SELECT * FROM dept;ï¼ˆ9ï¼‰åœ¨è¯¥æ¨¡å—ä¸‹æ·»åŠ com.qcmoke.dao.DeptDao.java1234567891011121314151617181920212223package com.qcmoke.dao;import com.qcmoke.entities.Dept;import org.apache.ibatis.annotations.Mapper;import org.springframework.stereotype.Repository;import java.util.List;/** * DeptDao * * @author qcmoke * @date 2019/09/02 03:26 */@Repository@Mapperpublic interface DeptDao &#123; public boolean addDept(Dept dept); public Dept findById(Long id); public List&lt;Dept&gt; findAll();&#125;ï¼ˆ10ï¼‰åœ¨è¯¥æ¨¡å—ä¸‹åˆ›å»ºsrc/main/resources/mybatis/mapper/DeptMapper.xml12345678910111213141516171819&lt;?xml version="1.0" encoding="UTF-8" ?&gt;&lt;!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd"&gt;&lt;mapper namespace="com.qcmoke.dao.DeptDao"&gt; &lt;select id="findById" resultType="Dept" parameterType="Long"&gt; select deptno,dname,db_source from dept where deptno=#&#123;deptno&#125;; &lt;/select&gt; &lt;select id="findAll" resultType="Dept"&gt; select deptno,dname,db_source from dept; &lt;/select&gt; &lt;insert id="addDept" parameterType="Dept"&gt; INSERT INTO dept(dname,db_source) VALUES(#&#123;dname&#125;,DATABASE()); &lt;/insert&gt; &lt;/mapper&gt;ï¼ˆ11ï¼‰åœ¨è¯¥æ¨¡å—ä¸‹æ·»åŠ com.qcmoke.service.DeptService.java12345678910111213141516171819package com.qcmoke.service;import com.qcmoke.entities.Dept;import java.util.List;/** * DeptService * * @author qcmoke * @date 2019/09/02 03:30 */public interface DeptService &#123; public boolean add(Dept dept); public Dept get(Long id); public List&lt;Dept&gt; list();&#125;ï¼ˆ12ï¼‰åœ¨è¯¥æ¨¡å—ä¸‹æ·»åŠ com.qcmoke.service.DeptServiceImpl.java1234567891011121314151617181920212223242526272829303132333435package com.qcmoke.service;import com.qcmoke.dao.DeptDao;import com.qcmoke.entities.Dept;import org.springframework.beans.factory.annotation.Autowired;import org.springframework.stereotype.Service;import java.util.List;/** * DeptServiceImpl * * @author qcmoke * @date 2019/09/02 03:30 */@Servicepublic class DeptServiceImpl implements DeptService &#123; @Autowired DeptDao deptDao; @Override public boolean add(Dept dept) &#123; return deptDao.addDept(dept); &#125; @Override public Dept get(Long id) &#123; return deptDao.findById(id); &#125; @Override public List&lt;Dept&gt; list() &#123; return deptDao.findAll(); &#125;&#125;ï¼ˆ13ï¼‰åœ¨è¯¥æ¨¡å—ä¸‹æ·»åŠ com.qcmoke.controller.DeptController.java123456789101112131415161718192021222324252627282930313233343536package com.qcmoke.controller;import com.qcmoke.entities.Dept;import com.qcmoke.service.DeptService;import org.springframework.beans.factory.annotation.Autowired;import org.springframework.web.bind.annotation.*;import java.util.List;/** * DeptController * * @author qcmoke * @date 2019/09/02 03:32 */@RestControllerpublic class DeptController &#123; @Autowired private DeptService service; @RequestMapping(value = "/dept/add", method = RequestMethod.POST) public boolean add(@RequestBody Dept dept) &#123; return service.add(dept); &#125; @RequestMapping(value = "/dept/get/&#123;id&#125;", method = RequestMethod.GET) public Dept get(@PathVariable("id") Long id) &#123; return service.get(id); &#125; @RequestMapping(value = "/dept/list", method = RequestMethod.GET) public List&lt;Dept&gt; list() &#123; return service.list(); &#125;&#125;ï¼ˆ14ï¼‰å¯åŠ¨com.qcmoke.DeptProvider8001App.javaæµ‹è¯•http://localhost:8001/dept/get/2http://localhost:8001/dept/listÂ¶3.5 ç¬¬å››æ­¥ï¼ˆ1ï¼‰åˆ›å»ºå­æ¨¡å—microservicecloud-consumer-dept-80ï¼ˆ2ï¼‰ä¿®æ”¹è¯¥æ¨¡å—çš„pom.xml1234567891011121314151617181920212223242526272829303132333435363738&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"&gt; &lt;parent&gt; &lt;artifactId&gt;microservicecloud&lt;/artifactId&gt; &lt;groupId&gt;com.qcmoke&lt;/groupId&gt; &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt; &lt;/parent&gt; &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt; &lt;artifactId&gt;microservicecloud-consumer-dept-80&lt;/artifactId&gt; &lt;description&gt;éƒ¨é—¨å¾®æœåŠ¡æ¶ˆè´¹è€…&lt;/description&gt; &lt;dependencies&gt; &lt;dependency&gt;&lt;!-- è‡ªå·±å®šä¹‰çš„api --&gt; &lt;groupId&gt;com.qcmoke&lt;/groupId&gt; &lt;artifactId&gt;microservicecloud-api&lt;/artifactId&gt; &lt;version&gt;$&#123;project.version&#125;&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt; &lt;/dependency&gt; &lt;!-- ä¿®æ”¹åŽç«‹å³ç”Ÿæ•ˆï¼Œçƒ­éƒ¨ç½² --&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework&lt;/groupId&gt; &lt;artifactId&gt;springloaded&lt;/artifactId&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt; &lt;/dependency&gt; &lt;/dependencies&gt;&lt;/project&gt;ï¼ˆ3ï¼‰åˆ›å»ºå®ŒæˆåŽåœ¨çˆ¶å·¥ç¨‹çš„pomæ–‡ä»¶çš„&lt;project&gt;æ ‡ç­¾ä¸‹ä¿®æ”¹&lt;modules&gt;ä¸ºå¦‚ä¸‹ä»£ç ã€‚ï¼ˆä¸€èˆ¬IDEå·¥å…·ä¼šè‡ªåŠ¨æ·»åŠ ï¼‰12345&lt;modules&gt; &lt;module&gt;microservicecloud-api&lt;/module&gt; &lt;module&gt;microservicecloud-provider-dept-8001&lt;/module&gt; &lt;module&gt;microservicecloud-consumer-dept-80&lt;/module&gt;&lt;/modules&gt;ï¼ˆ4ï¼‰åœ¨è¯¥æ¨¡å—ä¸‹åˆ›å»ºsrc/main/resources/application.yml12server: port: 80ï¼ˆ5ï¼‰åœ¨è¯¥æ¨¡å—ä¸‹åˆ›å»ºcom.qcmoke.config.ConfigBean.java12345678910111213141516171819202122232425package com.qcmoke.config;import org.springframework.context.annotation.Bean;import org.springframework.context.annotation.Configuration;import org.springframework.web.client.RestTemplate;/** * ConfigBean * * @author qcmoke * @date 2019/09/02 04:32 */@Configurationpublic class ConfigBean &#123; /** * RestTemplateæä¾›äº†å¤šç§ä¾¿æ·è®¿é—®è¿œç¨‹HttpæœåŠ¡çš„æ–¹æ³•ï¼Œæ˜¯ä¸€ç§ç®€å•ä¾¿æ·çš„è®¿é—®restfulæœåŠ¡æ¨¡æ¿ç±»ï¼Œæ˜¯Springæä¾›çš„ç”¨äºŽè®¿é—®RestæœåŠ¡çš„å®¢æˆ·ç«¯æ¨¡æ¿å·¥å…·é›† * * @author qcmoke * @date 2019/9/2 4:41 */ @Bean public RestTemplate getRestTemplate() &#123; return new RestTemplate(); &#125;&#125;RestTemplateå®˜ç½‘åœ°å€https://docs.spring.io/spring-framework/docs/4.3.7.RELEASE/javadoc-api/org/springframework/web/client/RestTemplate.htmlä½¿ç”¨ä½¿ç”¨restTemplateè®¿é—®restfulæŽ¥å£éžå¸¸çš„ç®€å•ç²—æš´æ— è„‘ã€‚(url, requestMap, ResponseBean.class)è¿™ä¸‰ä¸ªå‚æ•°åˆ†åˆ«ä»£è¡¨RESTè¯·æ±‚åœ°å€ã€è¯·æ±‚å‚æ•°ã€HTTPå“åº”è½¬æ¢è¢«è½¬æ¢æˆçš„å¯¹è±¡ç±»åž‹ã€‚ï¼ˆ6ï¼‰åœ¨è¯¥æ¨¡å—ä¸‹åˆ›å»ºcom.qcmoke.controller.DeptConsumerController.java1234567891011121314151617181920212223242526272829303132333435363738394041package com.qcmoke.controller;import com.qcmoke.entities.Dept;import org.springframework.beans.factory.annotation.Autowired;import org.springframework.web.bind.annotation.PathVariable;import org.springframework.web.bind.annotation.RequestMapping;import org.springframework.web.bind.annotation.RestController;import org.springframework.web.client.RestTemplate;import java.util.List;/** * DeptConsumerController * * @author qcmoke * @date 2019/09/02 04:34 */@RestControllerpublic class DeptConsumerController &#123; private static final String REST_URL_PREFIX = "http://localhost:8001"; @Autowired private RestTemplate restTemplate; @RequestMapping(value = "/consumer/dept/add") public boolean add(Dept dept) &#123; return restTemplate.postForObject(REST_URL_PREFIX + "/dept/add", dept, Boolean.class); &#125; @RequestMapping(value = "/consumer/dept/get/&#123;id&#125;") public Dept get(@PathVariable("id") Long id) &#123; return restTemplate.getForObject(REST_URL_PREFIX + "/dept/get/" + id, Dept.class); &#125; @SuppressWarnings("unchecked") @RequestMapping(value = "/consumer/dept/list") public List&lt;Dept&gt; list() &#123; return restTemplate.getForObject(REST_URL_PREFIX + "/dept/list", List.class); &#125;&#125;ï¼ˆ7ï¼‰åœ¨è¯¥æ¨¡å—ä¸‹åˆ›å»ºå¯åŠ¨ç±»com.qcmoke.MicroServiceCloudConsumerDept80.java123456789101112131415161718package com.qcmoke;import org.springframework.boot.SpringApplication;import org.springframework.boot.autoconfigure.SpringBootApplication;/** * MicroservicecloudConsumerDept80 * * @author qcmoke * @date 2019/09/02 04:37 */@SpringBootApplicationpublic class MicroServiceCloudConsumerDept80 &#123; public static void main(String[] args) &#123; SpringApplication.run(MicroServiceCloudConsumerDept80.class, args); &#125;&#125;ï¼ˆ8ï¼‰æµ‹è¯•é¦–å…ˆå¯åŠ¨microservicecloud-provider-dept-8001æ¨¡å—çš„com.qcmoke.DeptProvider8001App.javaç„¶åŽå¯åŠ¨microservicecloud-consumer-dept-80æ¨¡å—çš„com.qcmoke.MicroServiceCloudConsumerDept80.javahttp://localhost/consumer/dept/get/2http://localhost/consumer/dept/listhttp://localhost/consumer/dept/add?dname=AIÂ¶4. EurekaæœåŠ¡æ³¨å†Œä¸Žå‘çŽ°Â¶4.1 æ¦‚å¿µEurekaæ˜¯Netflixçš„ä¸€ä¸ªå­æ¨¡å—ï¼Œä¹Ÿæ˜¯æ ¸å¿ƒæ¨¡å—ä¹‹ä¸€ã€‚Eurekaæ˜¯ä¸€ä¸ªåŸºäºŽRESTçš„æœåŠ¡ï¼Œç”¨äºŽå®šä½æœåŠ¡ï¼Œä»¥å®žçŽ°äº‘ç«¯ä¸­é—´å±‚æœåŠ¡å‘çŽ°å’Œæ•…éšœè½¬ç§»ã€‚æœåŠ¡æ³¨å†Œä¸Žå‘çŽ°å¯¹äºŽå¾®æœåŠ¡æž¶æž„æ¥è¯´æ˜¯éžå¸¸é‡è¦çš„ï¼Œæœ‰äº†æœåŠ¡å‘çŽ°ä¸Žæ³¨å†Œï¼Œåªéœ€è¦ä½¿ç”¨æœåŠ¡çš„æ ‡è¯†ç¬¦ï¼Œå°±å¯ä»¥è®¿é—®åˆ°æœåŠ¡ï¼Œè€Œä¸éœ€è¦ä¿®æ”¹æœåŠ¡è°ƒç”¨çš„é…ç½®æ–‡ä»¶äº†ã€‚åŠŸèƒ½ç±»ä¼¼äºŽdubboçš„æ³¨å†Œä¸­å¿ƒï¼Œæ¯”å¦‚Zookeeperã€‚Spring Cloud å°è£…äº† Netflix å…¬å¸å¼€å‘çš„ Eureka æ¨¡å—æ¥å®žçŽ°æœåŠ¡æ³¨å†Œå’Œå‘çŽ°ã€‚Eureka é‡‡ç”¨äº† C-S çš„è®¾è®¡æž¶æž„ã€‚Eureka Server ä½œä¸ºæœåŠ¡æ³¨å†ŒåŠŸèƒ½çš„æœåŠ¡å™¨ï¼Œå®ƒæ˜¯æœåŠ¡æ³¨å†Œä¸­å¿ƒã€‚è€Œç³»ç»Ÿä¸­çš„å…¶ä»–å¾®æœåŠ¡ï¼Œä½¿ç”¨ Eureka çš„å®¢æˆ·ç«¯è¿žæŽ¥åˆ° Eureka Serverå¹¶ç»´æŒå¿ƒè·³è¿žæŽ¥ã€‚è¿™æ ·ç³»ç»Ÿçš„ç»´æŠ¤äººå‘˜å°±å¯ä»¥é€šè¿‡ Eureka Server æ¥ç›‘æŽ§ç³»ç»Ÿä¸­å„ä¸ªå¾®æœåŠ¡æ˜¯å¦æ­£å¸¸è¿è¡Œã€‚SpringCloud çš„ä¸€äº›å…¶ä»–æ¨¡å—ï¼ˆæ¯”å¦‚Zuulï¼‰å°±å¯ä»¥é€šè¿‡ Eureka Server æ¥å‘çŽ°ç³»ç»Ÿä¸­çš„å…¶ä»–å¾®æœåŠ¡ï¼Œå¹¶æ‰§è¡Œç›¸å…³çš„é€»è¾‘ã€‚EurekaåŒ…å«ä¸¤ä¸ªç»„ä»¶ï¼šEureka Serverå’ŒEureka ClientEureka Serveræä¾›æœåŠ¡æ³¨å†ŒæœåŠ¡å„ä¸ªèŠ‚ç‚¹å¯åŠ¨åŽï¼Œä¼šåœ¨EurekaServerä¸­è¿›è¡Œæ³¨å†Œï¼Œè¿™æ ·EurekaServerä¸­çš„æœåŠ¡æ³¨å†Œè¡¨ä¸­å°†ä¼šå­˜å‚¨æ‰€æœ‰å¯ç”¨æœåŠ¡èŠ‚ç‚¹çš„ä¿¡æ¯ï¼ŒæœåŠ¡èŠ‚ç‚¹çš„ä¿¡æ¯å¯ä»¥åœ¨ç•Œé¢ä¸­ç›´è§‚çš„çœ‹åˆ°EurekaClientæ˜¯ä¸€ä¸ªJavaå®¢æˆ·ç«¯ï¼Œç”¨äºŽç®€åŒ–Eureka Serverçš„äº¤äº’ï¼Œå®¢æˆ·ç«¯åŒæ—¶ä¹Ÿå…·å¤‡ä¸€ä¸ªå†…ç½®çš„ã€ä½¿ç”¨è½®è¯¢(round-robin)è´Ÿè½½ç®—æ³•çš„è´Ÿè½½å‡è¡¡å™¨ã€‚åœ¨åº”ç”¨å¯åŠ¨åŽï¼Œå°†ä¼šå‘Eureka Serverå‘é€å¿ƒè·³(é»˜è®¤å‘¨æœŸä¸º30ç§’)ã€‚å¦‚æžœEureka Serveråœ¨å¤šä¸ªå¿ƒè·³å‘¨æœŸå†…æ²¡æœ‰æŽ¥æ”¶åˆ°æŸä¸ªèŠ‚ç‚¹çš„å¿ƒè·³ï¼ŒEurekaServerå°†ä¼šä»ŽæœåŠ¡æ³¨å†Œè¡¨ä¸­æŠŠè¿™ä¸ªæœåŠ¡èŠ‚ç‚¹ç§»é™¤ï¼ˆé»˜è®¤90ç§’ï¼‰Eurekaæž„æž¶è®¾è®¡ï¼šå¯¹æ¯”Dubboæž¶æž„çš„è®¾è®¡ï¼šÂ¶4.2 éœ€æ±‚ä¸‰å¤§è§’è‰²Eureka Server æä¾›æœåŠ¡æ³¨å†Œå’Œå‘çŽ°Service ProvideræœåŠ¡æä¾›æ–¹å°†è‡ªèº«æœåŠ¡æ³¨å†Œåˆ°Eurekaï¼Œä»Žè€Œä½¿æœåŠ¡æ¶ˆè´¹æ–¹èƒ½å¤Ÿæ‰¾åˆ°Service ConsumeræœåŠ¡æ¶ˆè´¹æ–¹ä»ŽEurekaèŽ·å–æ³¨å†ŒæœåŠ¡åˆ—è¡¨ï¼Œä»Žè€Œèƒ½å¤Ÿæ¶ˆè´¹æœåŠ¡Â¶4.3 ç¬¬ä¸€æ­¥ï¼ˆ1ï¼‰åˆ›å»º eurekaæœåŠ¡æ³¨å†Œä¸­å¿ƒå­æ¨¡å—microservicecloud-eureka-7001ï¼ˆ2ï¼‰ä¿®æ”¹è¯¥æ¨¡å—pom.xml1234567891011121314151617181920212223242526272829303132&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"&gt; &lt;parent&gt; &lt;artifactId&gt;microservicecloud&lt;/artifactId&gt; &lt;groupId&gt;com.qcmoke&lt;/groupId&gt; &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt; &lt;/parent&gt; &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt; &lt;artifactId&gt;microservicecloud-eureka-7001&lt;/artifactId&gt; &lt;dependencies&gt; &lt;!--eureka-serveræœåŠ¡ç«¯ --&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt; &lt;artifactId&gt;spring-cloud-starter-eureka-server&lt;/artifactId&gt; &lt;/dependency&gt; &lt;!-- ä¿®æ”¹åŽç«‹å³ç”Ÿæ•ˆï¼Œçƒ­éƒ¨ç½² --&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework&lt;/groupId&gt; &lt;artifactId&gt;springloaded&lt;/artifactId&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt; &lt;/dependency&gt; &lt;/dependencies&gt;&lt;/project&gt;åˆ›å»ºå®ŒæˆåŽåœ¨çˆ¶å·¥ç¨‹çš„pomæ–‡ä»¶çš„&lt;project&gt;æ ‡ç­¾ä¸‹æ·»åŠ å¦‚ä¸‹ä»£ç ã€‚ï¼ˆä¸€èˆ¬IDEå·¥å…·ä¼šè‡ªåŠ¨æ·»åŠ ï¼‰123456&lt;modules&gt; &lt;module&gt;microservicecloud-api&lt;/module&gt; &lt;module&gt;microservicecloud-provider-dept-8001&lt;/module&gt; &lt;module&gt;microservicecloud-consumer-dept-80&lt;/module&gt; &lt;module&gt;microservicecloud-eureka-7001&lt;/module&gt;&lt;/modules&gt;ï¼ˆ3ï¼‰åœ¨è¯¥æ¨¡å—ä¸‹åˆ›å»ºsrc/main/resources/application.yml1234567891011server: port: 7001eureka: instance: hostname: localhost #eurekaæœåŠ¡ç«¯çš„å®žä¾‹åç§° client: register-with-eureka: false #falseè¡¨ç¤ºä¸å‘æ³¨å†Œä¸­å¿ƒæ³¨å†Œè‡ªå·±ã€‚ fetch-registry: false #falseè¡¨ç¤ºè‡ªå·±å°±æ˜¯æ³¨å†Œä¸­å¿ƒï¼ŒèŒè´£å°±æ˜¯ç»´æŠ¤æœåŠ¡å®žä¾‹ï¼Œå¹¶ä¸éœ€è¦è‡ªæˆ‘æ³¨å†Œï¼Œè‡ªæˆ‘æ£€æŸ¥ã€‚ service-url: defaultZone: http://$&#123;eureka.instance.hostname&#125;:$&#123;server.port&#125;/eureka/ #è®¾ç½®ä¸ŽEureka Serveräº¤äº’çš„åœ°å€æŸ¥è¯¢æœåŠ¡å’Œæ³¨å†ŒæœåŠ¡éƒ½éœ€è¦ä¾èµ–è¿™ä¸ªåœ°å€ã€‚ï¼ˆ4ï¼‰åˆ›å»ºå¯åŠ¨ç±»com.qcmoke.EurekaServer7001App.java1234567891011121314151617181920package com.qcmoke;import org.springframework.boot.SpringApplication;import org.springframework.boot.autoconfigure.SpringBootApplication;import org.springframework.cloud.netflix.eureka.server.EnableEurekaServer;/** * EurekaServer7001App * * @author qcmoke * @date 2019/09/02 18:39 */@SpringBootApplication@EnableEurekaServer//EurekaServeræœåŠ¡å™¨ç«¯å¯åŠ¨ç±»,æŽ¥å—å…¶å®ƒå¾®æœåŠ¡æ³¨å†Œè¿›æ¥public class EurekaServer7001App &#123; public static void main(String[] args) &#123; SpringApplication.run(EurekaServer7001App.class, args); &#125;&#125;ï¼ˆ5ï¼‰è¿è¡Œcom.qcmoke.EurekaServer7001App.java æµ‹è¯•è®¿é—®http://localhost:7001/Â¶4.4 ç¬¬äºŒæ­¥å°†å·²æœ‰çš„éƒ¨é—¨å¾®æœåŠ¡microservicecloud-provider-dept-8001æ³¨å†Œè¿›eurekaæœåŠ¡ä¸­å¿ƒmicroservicecloud-eureka-7001ï¼ˆ1ï¼‰ä¿®æ”¹microservicecloud-provider-dept-8001çš„pom.xmlæ·»åŠ å¦‚ä¸‹ä¾èµ–123456789&lt;!-- å°†å¾®æœåŠ¡providerä¾§æ³¨å†Œè¿›eureka --&gt;&lt;dependency&gt; &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt; &lt;artifactId&gt;spring-cloud-starter-eureka&lt;/artifactId&gt;&lt;/dependency&gt;&lt;dependency&gt; &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt; &lt;artifactId&gt;spring-cloud-starter-config&lt;/artifactId&gt;&lt;/dependency&gt;ä¿®æ”¹å¥½çš„pom.xmlå¦‚ä¸‹12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"&gt; &lt;parent&gt; &lt;artifactId&gt;microservicecloud&lt;/artifactId&gt; &lt;groupId&gt;com.qcmoke&lt;/groupId&gt; &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt; &lt;/parent&gt; &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt; &lt;artifactId&gt;microservicecloud-provider-dept-8001&lt;/artifactId&gt; &lt;dependencies&gt; &lt;dependency&gt;&lt;!-- å¼•å…¥è‡ªå·±å®šä¹‰çš„å…¶ä»–æ¨¡å—ï¼ˆmicroservicecloud-apiï¼‰ --&gt; &lt;groupId&gt;com.qcmoke&lt;/groupId&gt; &lt;artifactId&gt;microservicecloud-api&lt;/artifactId&gt; &lt;version&gt;$&#123;project.version&#125;&lt;/version&gt; &lt;/dependency&gt; &lt;!-- å°†å¾®æœåŠ¡providerä¾§æ³¨å†Œè¿›eureka --&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt; &lt;artifactId&gt;spring-cloud-starter-eureka&lt;/artifactId&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt; &lt;artifactId&gt;spring-cloud-starter-config&lt;/artifactId&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;junit&lt;/groupId&gt; &lt;artifactId&gt;junit&lt;/artifactId&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;mysql&lt;/groupId&gt; &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;com.alibaba&lt;/groupId&gt; &lt;artifactId&gt;druid&lt;/artifactId&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;ch.qos.logback&lt;/groupId&gt; &lt;artifactId&gt;logback-core&lt;/artifactId&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.mybatis.spring.boot&lt;/groupId&gt; &lt;artifactId&gt;mybatis-spring-boot-starter&lt;/artifactId&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-jetty&lt;/artifactId&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt; &lt;/dependency&gt; &lt;!-- ä¿®æ”¹åŽç«‹å³ç”Ÿæ•ˆï¼Œçƒ­éƒ¨ç½² --&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework&lt;/groupId&gt; &lt;artifactId&gt;springloaded&lt;/artifactId&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt; &lt;/dependency&gt; &lt;/dependencies&gt;&lt;/project&gt;ï¼ˆ2ï¼‰ä¿®æ”¹è¯¥é¡¹ç›®çš„application.ymlæ·»åŠ å¦‚ä¸‹é…ç½®1234eureka: client: #å®¢æˆ·ç«¯æ³¨å†Œè¿›eurekaæœåŠ¡åˆ—è¡¨å†… service-url: defaultZone: http://localhost:7001/eurekaä¿®æ”¹å¥½çš„application.yml12345678910111213141516171819202122232425262728server: port: 8001mybatis: config-location: classpath:mybatis/mybatis.cfg.xml # mybatisé…ç½®æ–‡ä»¶æ‰€åœ¨è·¯å¾„ type-aliases-package: com.qcmoke.entities # æ‰€æœ‰Entityåˆ«åç±»æ‰€åœ¨åŒ… mapper-locations: - classpath:mybatis/mapper/**/*.xml # mapperæ˜ å°„æ–‡ä»¶spring: application: name: microservicecloud-dept #å¯¹å¤–æš´éœ²çš„å¾®æœåŠ¡çš„åç§°ï¼ˆé‡ç‚¹ï¼‰ datasource: type: com.alibaba.druid.pool.DruidDataSource # å½“å‰æ•°æ®æºæ“ä½œç±»åž‹ driver-class-name: org.gjt.mm.mysql.Driver # mysqlé©±åŠ¨åŒ… url: jdbc:mysql://localhost:3306/cloudDB01 # æ•°æ®åº“åç§° username: root password: 123456 dbcp2: min-idle: 5 # æ•°æ®åº“è¿žæŽ¥æ± çš„æœ€å°ç»´æŒè¿žæŽ¥æ•° initial-size: 5 # åˆå§‹åŒ–è¿žæŽ¥æ•° max-total: 5 # æœ€å¤§è¿žæŽ¥æ•° max-wait-millis: 200 # ç­‰å¾…è¿žæŽ¥èŽ·å–çš„æœ€å¤§è¶…æ—¶æ—¶é—´eureka: client: #å®¢æˆ·ç«¯æ³¨å†Œè¿›eurekaæœåŠ¡åˆ—è¡¨å†… service-url: defaultZone: http://localhost:7001/eurekaï¼ˆ3ï¼‰ä¿®æ”¹è¯¥é¡¹ç›®çš„å¯åŠ¨ç±»com.qcmoke.DeptProvider8001App.javaç»™å¯åŠ¨ç±»æ·»åŠ @EnableEurekaClientæ³¨è§£1234567891011121314151617181920package com.qcmoke;import org.springframework.boot.SpringApplication;import org.springframework.boot.autoconfigure.SpringBootApplication;import org.springframework.cloud.netflix.eureka.EnableEurekaClient;/** * microservicecloud-provider-dept-8001æ¨¡å—çš„å¯åŠ¨ç±» * * @author qcmoke * @date 2019/09/02 03:34 */@SpringBootApplication@EnableEurekaClient //æœ¬æœåŠ¡å¯åŠ¨åŽä¼šè‡ªåŠ¨æ³¨å†Œè¿›eurekaæœåŠ¡ä¸­public class DeptProvider8001App &#123; public static void main(String[] args) &#123; SpringApplication.run(DeptProvider8001App.class, args); &#125;&#125;ï¼ˆ4ï¼‰æµ‹è¯•å…ˆå¯åŠ¨microservicecloud-eureka-7001çš„com.qcmoke.EurekaServer7001App.javaç„¶åŽå†å¯åŠ¨microservicecloud-provider-dept-8001çš„com.qcmoke.DeptProvider8001App.javaè®¿é—®http://localhost:7001/å¦‚å›¾æ ‡æ³¨çš„åç§°å°±æ˜¯microservicecloud-provider-dept-8001 ymlé…ç½®æ–‡ä»¶ä¸­æŒ‡å®šçš„name:123spring: application: name: microservicecloud-dept #å¯¹å¤–æš´éœ²çš„å¾®æœåŠ¡çš„åç§°ï¼ˆé‡ç‚¹ï¼‰åœ¨microservicecloud-eureka-7001ä¸­èƒ½æ£€æµ‹microservicecloud-provider-dept-8001ï¼Œè¯´æ˜ŽæœåŠ¡æ³¨å†ŒæˆåŠŸã€‚ï¼ˆ5ï¼‰ä¸ªæ€§åŒ–é…ç½®ï¼ˆå¯é€‰ï¼‰ï¼ˆ5.1ï¼‰æŒ‡å®šå¦‚ä¸‹å›¾æ ‡æ³¨çš„æœåŠ¡åç§°ä¿®æ”¹microservicecloud-provider-dept-8001çš„application.yml,åœ¨eurekaä¸‹æ·»åŠ å¦‚ä¸‹é…ç½®ï¼š12instance: instance-id: microservicecloud-dept8001ä¿®æ”¹å¥½åŽçš„å…¨é…ç½®ï¼š123456789101112131415161718192021222324252627282930server: port: 8001mybatis: config-location: classpath:mybatis/mybatis.cfg.xml # mybatisé…ç½®æ–‡ä»¶æ‰€åœ¨è·¯å¾„ type-aliases-package: com.qcmoke.entities # æ‰€æœ‰Entityåˆ«åç±»æ‰€åœ¨åŒ… mapper-locations: - classpath:mybatis/mapper/**/*.xml # mapperæ˜ å°„æ–‡ä»¶spring: application: name: microservicecloud-dept #å¯¹å¤–æš´éœ²çš„å¾®æœåŠ¡çš„åç§°ï¼ˆé‡ç‚¹ï¼‰ datasource: type: com.alibaba.druid.pool.DruidDataSource # å½“å‰æ•°æ®æºæ“ä½œç±»åž‹ driver-class-name: org.gjt.mm.mysql.Driver # mysqlé©±åŠ¨åŒ… url: jdbc:mysql://localhost:3306/cloudDB01 # æ•°æ®åº“åç§° username: root password: 123456 dbcp2: min-idle: 5 # æ•°æ®åº“è¿žæŽ¥æ± çš„æœ€å°ç»´æŒè¿žæŽ¥æ•° initial-size: 5 # åˆå§‹åŒ–è¿žæŽ¥æ•° max-total: 5 # æœ€å¤§è¿žæŽ¥æ•° max-wait-millis: 200 # ç­‰å¾…è¿žæŽ¥èŽ·å–çš„æœ€å¤§è¶…æ—¶æ—¶é—´eureka: client: #å®¢æˆ·ç«¯æ³¨å†Œè¿›eurekaæœåŠ¡åˆ—è¡¨å†… service-url: defaultZone: http://localhost:7001/eureka instance: instance-id: microservicecloud-dept8001ä¿®æ”¹å¥½åŽï¼Œå…ˆå¯åŠ¨microservicecloud-eureka-7001çš„com.qcmoke.EurekaServer7001App.javaï¼Œç„¶åŽå†å¯åŠ¨microservicecloud-provider-dept-8001çš„com.qcmoke.DeptProvider8001App.javaï¼Œæœ€åŽè®¿é—®http://localhost:7001/ï¼ˆ5.2ï¼‰ä¿®æ”¹æœåŠ¡è®¿é—®ä¿¡æ¯ipçš„æç¤ºï¼Œå¦‚ä¸‹å›¾ï¼šä¿®æ”¹microservicecloud-provider-dept-8001çš„application.yml,åœ¨eurekaä¸‹æ·»åŠ å¦‚ä¸‹é…ç½®ï¼š1234567eureka: client: service-url: defaultZone: http://localhost:7001/eureka instance: instance-id: microservicecloud-dept8001 prefer-ip-address: true #æ·»åŠ çš„é…ç½®ä¿®æ”¹å¥½åŽçš„å…¨é…ç½®ï¼š12345678910111213141516171819202122232425262728293031server: port: 8001mybatis: config-location: classpath:mybatis/mybatis.cfg.xml # mybatisé…ç½®æ–‡ä»¶æ‰€åœ¨è·¯å¾„ type-aliases-package: com.qcmoke.entities # æ‰€æœ‰Entityåˆ«åç±»æ‰€åœ¨åŒ… mapper-locations: - classpath:mybatis/mapper/**/*.xml # mapperæ˜ å°„æ–‡ä»¶spring: application: name: microservicecloud-dept #å¯¹å¤–æš´éœ²çš„å¾®æœåŠ¡çš„åç§°ï¼ˆé‡ç‚¹ï¼‰ datasource: type: com.alibaba.druid.pool.DruidDataSource # å½“å‰æ•°æ®æºæ“ä½œç±»åž‹ driver-class-name: org.gjt.mm.mysql.Driver # mysqlé©±åŠ¨åŒ… url: jdbc:mysql://localhost:3306/cloudDB01 # æ•°æ®åº“åç§° username: root password: 123456 dbcp2: min-idle: 5 # æ•°æ®åº“è¿žæŽ¥æ± çš„æœ€å°ç»´æŒè¿žæŽ¥æ•° initial-size: 5 # åˆå§‹åŒ–è¿žæŽ¥æ•° max-total: 5 # æœ€å¤§è¿žæŽ¥æ•° max-wait-millis: 200 # ç­‰å¾…è¿žæŽ¥èŽ·å–çš„æœ€å¤§è¶…æ—¶æ—¶é—´eureka: client: #å®¢æˆ·ç«¯æ³¨å†Œè¿›eurekaæœåŠ¡åˆ—è¡¨å†… service-url: defaultZone: http://localhost:7001/eureka instance: instance-id: microservicecloud-dept8001 prefer-ip-address: true #è®¿é—®è·¯å¾„å¯ä»¥æ˜¾ç¤ºIPåœ°å€ä¿®æ”¹å¥½åŽï¼Œå…ˆå¯åŠ¨microservicecloud-eureka-7001çš„com.qcmoke.EurekaServer7001App.javaï¼Œç„¶åŽå†å¯åŠ¨microservicecloud-provider-dept-8001çš„com.qcmoke.DeptProvider8001App.javaï¼Œæœ€åŽè®¿é—®http://localhost:7001/ï¼ˆ5.3ï¼‰é…ç½®å¾®æœåŠ¡http://ip/infoçš„è¯¦ç»†ä¿¡æ¯é¡µé¢å†…å®¹ï¼ˆç‚¹å‡»æœåŠ¡è¶…é“¾æŽ¥æŠ¥å‘ŠErrorPageï¼‰ä¿®æ”¹microservicecloud-provider-dept-8001çš„pom.xmlæ·»åŠ å¦‚ä¸‹ä¾èµ–ï¼š1234&lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;&lt;/dependency&gt;ä¿®æ”¹å¥½åŽçš„å…¨éƒ¨é…ç½®ï¼š12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576777879808182&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"&gt; &lt;parent&gt; &lt;artifactId&gt;microservicecloud&lt;/artifactId&gt; &lt;groupId&gt;com.qcmoke&lt;/groupId&gt; &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt; &lt;/parent&gt; &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt; &lt;artifactId&gt;microservicecloud-provider-dept-8001&lt;/artifactId&gt; &lt;dependencies&gt; &lt;dependency&gt;&lt;!-- å¼•å…¥è‡ªå·±å®šä¹‰çš„å…¶ä»–æ¨¡å—ï¼ˆmicroservicecloud-apiï¼‰ --&gt; &lt;groupId&gt;com.qcmoke&lt;/groupId&gt; &lt;artifactId&gt;microservicecloud-api&lt;/artifactId&gt; &lt;version&gt;$&#123;project.version&#125;&lt;/version&gt; &lt;/dependency&gt; &lt;!-- å°†å¾®æœåŠ¡providerä¾§æ³¨å†Œè¿›eureka --&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt; &lt;artifactId&gt;spring-cloud-starter-eureka&lt;/artifactId&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt; &lt;artifactId&gt;spring-cloud-starter-config&lt;/artifactId&gt; &lt;/dependency&gt; &lt;!-- actuatorç›‘æŽ§ä¿¡æ¯å®Œå–„ --&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;junit&lt;/groupId&gt; &lt;artifactId&gt;junit&lt;/artifactId&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;mysql&lt;/groupId&gt; &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;com.alibaba&lt;/groupId&gt; &lt;artifactId&gt;druid&lt;/artifactId&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;ch.qos.logback&lt;/groupId&gt; &lt;artifactId&gt;logback-core&lt;/artifactId&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.mybatis.spring.boot&lt;/groupId&gt; &lt;artifactId&gt;mybatis-spring-boot-starter&lt;/artifactId&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-jetty&lt;/artifactId&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt; &lt;/dependency&gt; &lt;!-- ä¿®æ”¹åŽç«‹å³ç”Ÿæ•ˆï¼Œçƒ­éƒ¨ç½² --&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework&lt;/groupId&gt; &lt;artifactId&gt;springloaded&lt;/artifactId&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt; &lt;/dependency&gt; &lt;/dependencies&gt;&lt;/project&gt;æ€»çš„çˆ¶å·¥ç¨‹microservicecloudä¿®æ”¹pom.xmlæ·»åŠ æž„å»ºbuildé…ç½®æ·»åŠ å¦‚ä¸‹é…ç½®ï¼š1234567891011121314151617181920&lt;build&gt; &lt;finalName&gt;microservicecloud&lt;/finalName&gt; &lt;resources&gt; &lt;resource&gt; &lt;directory&gt;src/main/resources&lt;/directory&gt; &lt;filtering&gt;true&lt;/filtering&gt; &lt;/resource&gt; &lt;/resources&gt; &lt;plugins&gt; &lt;plugin&gt; &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt; &lt;artifactId&gt;maven-resources-plugin&lt;/artifactId&gt; &lt;configuration&gt; &lt;delimiters&gt; &lt;delimit&gt;$&lt;/delimit&gt; &lt;/delimiters&gt; &lt;/configuration&gt; &lt;/plugin&gt; &lt;/plugins&gt; &lt;/build&gt;ä¿®æ”¹å¥½åŽçš„å…¨éƒ¨é…ç½®ï¼š123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"&gt; &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt; &lt;groupId&gt;com.qcmoke&lt;/groupId&gt; &lt;artifactId&gt;microservicecloud&lt;/artifactId&gt; &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt; &lt;!--æ¨¡å—ï¼ˆå­é¡¹ç›®ï¼‰,ä¼šè¢«æž„å»ºæˆé¡¹ç›®çš„ä¸€éƒ¨åˆ† --&gt; &lt;modules&gt; &lt;module&gt;microservicecloud-api&lt;/module&gt; &lt;module&gt;microservicecloud-provider-dept-8001&lt;/module&gt; &lt;module&gt;microservicecloud-consumer-dept-80&lt;/module&gt; &lt;module&gt;microservicecloud-eureka-7001&lt;/module&gt; &lt;/modules&gt; &lt;packaging&gt;pom&lt;/packaging&gt; &lt;properties&gt; &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt; &lt;maven.compiler.source&gt;1.8&lt;/maven.compiler.source&gt; &lt;maven.compiler.target&gt;1.8&lt;/maven.compiler.target&gt; &lt;junit.version&gt;4.12&lt;/junit.version&gt; &lt;log4j.version&gt;1.2.17&lt;/log4j.version&gt; &lt;lombok.version&gt;1.16.18&lt;/lombok.version&gt; &lt;/properties&gt; &lt;!-- 1.dependencyManagementé‡Œåªæ˜¯å£°æ˜Žä¾èµ–ï¼Œå¹¶ä¸å®žçŽ°å¼•å…¥ï¼Œå› æ­¤å­é¡¹ç›®éœ€è¦æ˜¾å¼çš„å£°æ˜Žéœ€è¦ç”¨çš„ä¾èµ–ã€‚å¦‚æžœä¸åœ¨å­é¡¹ç›®ä¸­å£°æ˜Žä¾èµ–ï¼Œæ˜¯ä¸ä¼šä»Žçˆ¶é¡¹ç›®ä¸­ç»§æ‰¿ä¸‹æ¥çš„ï¼›åªæœ‰åœ¨å­é¡¹ç›®ä¸­å†™äº†è¯¥ä¾èµ–é¡¹ï¼Œå¹¶ä¸”æ²¡æœ‰æŒ‡å®šå…·ä½“ç‰ˆæœ¬ï¼Œæ‰ä¼šä»Žçˆ¶é¡¹ç›®ä¸­ç»§æ‰¿è¯¥é¡¹ï¼Œå¹¶ä¸”versionå’Œscopeéƒ½è¯»å–è‡ªçˆ¶pom;å¦å¤–å¦‚æžœå­é¡¹ç›®ä¸­æŒ‡å®šäº†ç‰ˆæœ¬å·ï¼Œé‚£ä¹ˆä¼šä½¿ç”¨å­é¡¹ç›®ä¸­æŒ‡å®šçš„jarç‰ˆæœ¬ã€‚ä¸€èˆ¬åœ¨æˆ‘ä»¬é¡¹ç›®é¡¶å±‚çš„pomæ–‡ä»¶ä¸­ï¼Œæˆ‘ä»¬ä¼šçœ‹åˆ°dependencyManagementå…ƒç´  2.dependencieså³ä½¿åœ¨å­æ¨¡å—ä¸­ä¸å†™è¯¥ä¾èµ–é¡¹ï¼Œé‚£ä¹ˆå­æ¨¡å—ä»ç„¶ä¼šä»Žçˆ¶é¡¹ç›®ä¸­ç»§æ‰¿è¯¥ä¾èµ–é¡¹ï¼ˆå…¨éƒ¨ç»§æ‰¿ï¼‰ã€‚--&gt; &lt;dependencyManagement&gt; &lt;dependencies&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt; &lt;artifactId&gt;spring-cloud-dependencies&lt;/artifactId&gt; &lt;version&gt;Dalston.SR1&lt;/version&gt; &lt;type&gt;pom&lt;/type&gt; &lt;scope&gt;import&lt;/scope&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-dependencies&lt;/artifactId&gt; &lt;version&gt;1.5.9.RELEASE&lt;/version&gt; &lt;type&gt;pom&lt;/type&gt; &lt;scope&gt;import&lt;/scope&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;mysql&lt;/groupId&gt; &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt; &lt;version&gt;5.0.4&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;com.alibaba&lt;/groupId&gt; &lt;artifactId&gt;druid&lt;/artifactId&gt; &lt;version&gt;1.0.31&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.mybatis.spring.boot&lt;/groupId&gt; &lt;artifactId&gt;mybatis-spring-boot-starter&lt;/artifactId&gt; &lt;version&gt;1.3.0&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;ch.qos.logback&lt;/groupId&gt; &lt;artifactId&gt;logback-core&lt;/artifactId&gt; &lt;version&gt;1.2.3&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;junit&lt;/groupId&gt; &lt;artifactId&gt;junit&lt;/artifactId&gt; &lt;version&gt;$&#123;junit.version&#125;&lt;/version&gt; &lt;scope&gt;test&lt;/scope&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;log4j&lt;/groupId&gt; &lt;artifactId&gt;log4j&lt;/artifactId&gt; &lt;version&gt;$&#123;log4j.version&#125;&lt;/version&gt; &lt;/dependency&gt; &lt;/dependencies&gt; &lt;/dependencyManagement&gt; &lt;build&gt; &lt;finalName&gt;microservicecloud&lt;/finalName&gt; &lt;resources&gt; &lt;resource&gt; &lt;directory&gt;src/main/resources&lt;/directory&gt; &lt;filtering&gt;true&lt;/filtering&gt; &lt;/resource&gt; &lt;/resources&gt; &lt;plugins&gt; &lt;plugin&gt; &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt; &lt;artifactId&gt;maven-resources-plugin&lt;/artifactId&gt; &lt;configuration&gt; &lt;delimiters&gt; &lt;delimit&gt;$&lt;/delimit&gt; &lt;/delimiters&gt; &lt;/configuration&gt; &lt;/plugin&gt; &lt;/plugins&gt; &lt;/build&gt;&lt;/project&gt;ä¿®æ”¹microservicecloud-provider-dept-8001çš„application.ymlæ·»åŠ å¦‚ä¸‹é…ç½®ï¼š12345info: app.name: microservicecloud company.name: example.com build.artifactId: $&#123;project.artifactId&#125; build.version: $&#123;project.version&#125;ä¿®æ”¹å¥½åŽçš„å…¨éƒ¨é…ç½®ï¼š1234567891011121314151617181920212223242526272829303132333435363738server: port: 8001mybatis: config-location: classpath:mybatis/mybatis.cfg.xml # mybatisé…ç½®æ–‡ä»¶æ‰€åœ¨è·¯å¾„ type-aliases-package: com.qcmoke.entities # æ‰€æœ‰Entityåˆ«åç±»æ‰€åœ¨åŒ… mapper-locations: - classpath:mybatis/mapper/**/*.xml # mapperæ˜ å°„æ–‡ä»¶spring: application: name: microservicecloud-dept #å¯¹å¤–æš´éœ²çš„å¾®æœåŠ¡çš„åç§°ï¼ˆé‡ç‚¹ï¼‰ datasource: type: com.alibaba.druid.pool.DruidDataSource # å½“å‰æ•°æ®æºæ“ä½œç±»åž‹ driver-class-name: org.gjt.mm.mysql.Driver # mysqlé©±åŠ¨åŒ… url: jdbc:mysql://localhost:3306/cloudDB01 # æ•°æ®åº“åç§° username: root password: 123456 dbcp2: min-idle: 5 # æ•°æ®åº“è¿žæŽ¥æ± çš„æœ€å°ç»´æŒè¿žæŽ¥æ•° initial-size: 5 # åˆå§‹åŒ–è¿žæŽ¥æ•° max-total: 5 # æœ€å¤§è¿žæŽ¥æ•° max-wait-millis: 200 # ç­‰å¾…è¿žæŽ¥èŽ·å–çš„æœ€å¤§è¶…æ—¶æ—¶é—´eureka: client: #å®¢æˆ·ç«¯æ³¨å†Œè¿›eurekaæœåŠ¡åˆ—è¡¨å†… service-url: defaultZone: http://localhost:7001/eureka instance: instance-id: microservicecloud-dept8001 prefer-ip-address: true #è®¿é—®è·¯å¾„å¯ä»¥æ˜¾ç¤ºIPåœ°å€info: app.name: microservicecloud company.name: example.com build.artifactId: $&#123;project.artifactId&#125; build.version: $&#123;project.version&#125;ä¿®æ”¹å¥½åŽï¼Œå…ˆå¯åŠ¨microservicecloud-eureka-7001çš„com.qcmoke.EurekaServer7001App.javaï¼Œç„¶åŽå†å¯åŠ¨microservicecloud-provider-dept-8001çš„com.qcmoke.DeptProvider8001App.javaï¼Œæœ€åŽè®¿é—®http://localhost:7001/ å¹¶ç‚¹å‡»microservicecloud-dept8001ï¼ˆ5.3ï¼‰eurekaè‡ªæˆ‘ä¿æŠ¤çš„çŠ¶å†µæ•…éšœçŽ°è±¡å¯¼è‡´åŽŸå› ï¼šä»€ä¹ˆæ˜¯è‡ªæˆ‘ä¿æŠ¤æ¨¡å¼ï¼Ÿé»˜è®¤æƒ…å†µä¸‹ï¼Œå¦‚æžœEurekaServeråœ¨ä¸€å®šæ—¶é—´å†…æ²¡æœ‰æŽ¥æ”¶åˆ°æŸä¸ªå¾®æœåŠ¡å®žä¾‹çš„å¿ƒè·³ï¼ŒEurekaServerå°†ä¼šæ³¨é”€è¯¥å®žä¾‹ï¼ˆé»˜è®¤90ç§’ï¼‰ã€‚ä½†æ˜¯å½“ç½‘ç»œåˆ†åŒºæ•…éšœå‘ç”Ÿæ—¶ï¼Œå¾®æœåŠ¡ä¸ŽEurekaServerä¹‹é—´æ— æ³•æ­£å¸¸é€šä¿¡ï¼Œä»¥ä¸Šè¡Œä¸ºå¯èƒ½å˜å¾—éžå¸¸å±é™©äº†â€”â€”å› ä¸ºå¾®æœåŠ¡æœ¬èº«å…¶å®žæ˜¯å¥åº·çš„ï¼Œæ­¤æ—¶æœ¬ä¸åº”è¯¥æ³¨é”€è¿™ä¸ªå¾®æœåŠ¡ã€‚Eurekaé€šè¿‡â€œè‡ªæˆ‘ä¿æŠ¤æ¨¡å¼â€æ¥è§£å†³è¿™ä¸ªé—®é¢˜â€”â€”å½“EurekaServerèŠ‚ç‚¹åœ¨çŸ­æ—¶é—´å†…ä¸¢å¤±è¿‡å¤šå®¢æˆ·ç«¯æ—¶ï¼ˆå¯èƒ½å‘ç”Ÿäº†ç½‘ç»œåˆ†åŒºæ•…éšœï¼‰ï¼Œé‚£ä¹ˆè¿™ä¸ªèŠ‚ç‚¹å°±ä¼šè¿›å…¥è‡ªæˆ‘ä¿æŠ¤æ¨¡å¼ã€‚ä¸€æ—¦è¿›å…¥è¯¥æ¨¡å¼ï¼ŒEurekaServerå°±ä¼šä¿æŠ¤æœåŠ¡æ³¨å†Œè¡¨ä¸­çš„ä¿¡æ¯ï¼Œä¸å†åˆ é™¤æœåŠ¡æ³¨å†Œè¡¨ä¸­çš„æ•°æ®ï¼ˆä¹Ÿå°±æ˜¯ä¸ä¼šæ³¨é”€ä»»ä½•å¾®æœåŠ¡ï¼‰ã€‚å½“ç½‘ç»œæ•…éšœæ¢å¤åŽï¼Œè¯¥Eureka ServerèŠ‚ç‚¹ä¼šè‡ªåŠ¨é€€å‡ºè‡ªæˆ‘ä¿æŠ¤æ¨¡å¼ã€‚åœ¨è‡ªæˆ‘ä¿æŠ¤æ¨¡å¼ä¸­ï¼ŒEureka Serverä¼šä¿æŠ¤æœåŠ¡æ³¨å†Œè¡¨ä¸­çš„ä¿¡æ¯ï¼Œä¸å†æ³¨é”€ä»»ä½•æœåŠ¡å®žä¾‹ã€‚å½“å®ƒæ”¶åˆ°çš„å¿ƒè·³æ•°é‡æ–°æ¢å¤åˆ°é˜ˆå€¼ä»¥ä¸Šæ—¶ï¼Œè¯¥Eureka ServerèŠ‚ç‚¹å°±ä¼šè‡ªåŠ¨é€€å‡ºè‡ªæˆ‘ä¿æŠ¤æ¨¡å¼ã€‚å®ƒçš„è®¾è®¡å“²å­¦å°±æ˜¯å®å¯ä¿ç•™é”™è¯¯çš„æœåŠ¡æ³¨å†Œä¿¡æ¯ï¼Œä¹Ÿä¸ç›²ç›®æ³¨é”€ä»»ä½•å¯èƒ½å¥åº·çš„æœåŠ¡å®žä¾‹ã€‚ä¸€å¥è¯è®²è§£ï¼šå¥½æ­»ä¸å¦‚èµ–æ´»ç€ç»¼ä¸Šï¼Œè‡ªæˆ‘ä¿æŠ¤æ¨¡å¼æ˜¯ä¸€ç§åº”å¯¹ç½‘ç»œå¼‚å¸¸çš„å®‰å…¨ä¿æŠ¤æŽªæ–½ã€‚å®ƒçš„æž¶æž„å“²å­¦æ˜¯å®å¯åŒæ—¶ä¿ç•™æ‰€æœ‰å¾®æœåŠ¡ï¼ˆå¥åº·çš„å¾®æœåŠ¡å’Œä¸å¥åº·çš„å¾®æœåŠ¡éƒ½ä¼šä¿ç•™ï¼‰ï¼Œä¹Ÿä¸ç›²ç›®æ³¨é”€ä»»ä½•å¥åº·çš„å¾®æœåŠ¡ã€‚ä½¿ç”¨è‡ªæˆ‘ä¿æŠ¤æ¨¡å¼ï¼Œå¯ä»¥è®©Eurekaé›†ç¾¤æ›´åŠ çš„å¥å£®ã€ç¨³å®šã€‚åœ¨Spring Cloudä¸­ï¼Œå¯ä»¥åœ¨microservicecloud-eureka-7001çš„application.ymlä¸­ä½¿ç”¨eureka.server.enable-self-preservation = falseç¦ç”¨è‡ªæˆ‘ä¿æŠ¤æ¨¡å¼ï¼Œä½†ä¸å»ºè®®ã€‚Â¶4.5 ç¬¬ä¸‰æ­¥æœåŠ¡å‘çŽ°Discoveryï¼Œå¯¹äºŽæ³¨å†Œè¿›eurekaé‡Œé¢çš„å¾®æœåŠ¡ï¼Œå¯ä»¥é€šè¿‡æœåŠ¡å‘çŽ°æ¥èŽ·å¾—è¯¥æœåŠ¡çš„ä¿¡æ¯ï¼ˆ1ï¼‰ä¿®æ”¹microservicecloud-provider-dept-8001å·¥ç¨‹çš„DeptController.java123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657package com.qcmoke.controller;import com.qcmoke.entities.Dept;import com.qcmoke.service.DeptService;import org.springframework.beans.factory.annotation.Autowired;import org.springframework.cloud.client.ServiceInstance;import org.springframework.cloud.client.discovery.DiscoveryClient;import org.springframework.web.bind.annotation.*;import java.util.List;/** * DeptController * * @author qcmoke * @date 2019/09/02 03:32 */@RestControllerpublic class DeptController &#123; @Autowired private DeptService service; @Autowired private DiscoveryClient client; @RequestMapping(value = "/dept/discovery", method = RequestMethod.GET) public Object discovery() &#123; List&lt;String&gt; list = client.getServices(); System.out.println("**********" + list); List&lt;ServiceInstance&gt; srvList = client.getInstances("MICROSERVICECLOUD-DEPT"); for (ServiceInstance element : srvList) &#123; System.out.println(element.getServiceId() + "\t" + element.getHost() + "\t" + element.getPort() + "\t" + element.getUri()); &#125; return this.client; &#125; @RequestMapping(value = "/dept/add", method = RequestMethod.POST) public boolean add(@RequestBody Dept dept) &#123; return service.add(dept); &#125; @RequestMapping(value = "/dept/get/&#123;id&#125;", method = RequestMethod.GET) public Dept get(@PathVariable("id") Long id) &#123; return service.get(id); &#125; @RequestMapping(value = "/dept/list", method = RequestMethod.GET) public List&lt;Dept&gt; list() &#123; return service.list(); &#125;&#125;ï¼ˆ2ï¼‰ä¿®æ”¹microservicecloud-provider-dept-8001çš„DeptProvider8001App.javaï¼Œæ·»åŠ @EnableDiscoveryClientæ³¨è§£12345678910111213141516171819202122package com.qcmoke;import org.springframework.boot.SpringApplication;import org.springframework.boot.autoconfigure.SpringBootApplication;import org.springframework.cloud.client.discovery.EnableDiscoveryClient;import org.springframework.cloud.netflix.eureka.EnableEurekaClient;/** * microservicecloud-provider-dept-8001æ¨¡å—çš„å¯åŠ¨ç±» * * @author qcmoke * @date 2019/09/02 03:34 */@SpringBootApplication@EnableEurekaClient //æœ¬æœåŠ¡å¯åŠ¨åŽä¼šè‡ªåŠ¨æ³¨å†Œè¿›eurekaæœåŠ¡ä¸­@EnableDiscoveryClient //æœåŠ¡å‘çŽ°public class DeptProvider8001App &#123; public static void main(String[] args) &#123; SpringApplication.run(DeptProvider8001App.class, args); &#125;&#125;ï¼ˆ3ï¼‰ä¿®æ”¹microservicecloud-consumer-dept-80å·¥ç¨‹çš„DeptConsumerController.java1234567891011121314151617181920212223242526272829303132333435363738394041424344454647package com.qcmoke.controller;import com.qcmoke.entities.Dept;import org.springframework.beans.factory.annotation.Autowired;import org.springframework.web.bind.annotation.PathVariable;import org.springframework.web.bind.annotation.RequestMapping;import org.springframework.web.bind.annotation.RestController;import org.springframework.web.client.RestTemplate;import java.util.List;/** * DeptConsumerController * * @author qcmoke * @date 2019/09/02 04:34 */@RestControllerpublic class DeptConsumerController &#123; private static final String REST_URL_PREFIX = "http://localhost:8001"; //æµ‹è¯•@EnableDiscoveryClient,æ¶ˆè´¹ç«¯å¯ä»¥è°ƒç”¨æœåŠ¡å‘çŽ° @RequestMapping(value = "/consumer/dept/discovery") public Object discovery() &#123; return restTemplate.getForObject(REST_URL_PREFIX + "/dept/discovery", Object.class); &#125; @Autowired private RestTemplate restTemplate; @RequestMapping(value = "/consumer/dept/add") public boolean add(Dept dept) &#123; return restTemplate.postForObject(REST_URL_PREFIX + "/dept/add", dept, Boolean.class); &#125; @RequestMapping(value = "/consumer/dept/get/&#123;id&#125;") public Dept get(@PathVariable("id") Long id) &#123; return restTemplate.getForObject(REST_URL_PREFIX + "/dept/get/" + id, Dept.class); &#125; @SuppressWarnings("unchecked") @RequestMapping(value = "/consumer/dept/list") public List&lt;Dept&gt; list() &#123; return restTemplate.getForObject(REST_URL_PREFIX + "/dept/list", List.class); &#125;&#125;ï¼ˆ4ï¼‰æµ‹è¯•å…ˆå¯åŠ¨microservicecloud-eureka-7001çš„com.qcmoke.EurekaServer7001App.javaç„¶åŽå¯åŠ¨microservicecloud-provider-dept-8001çš„com.qcmoke.DeptProvider8001App.javaæœ€åŽå†å¯åŠ¨microservicecloud-consumer-dept-80çš„com.qcmoke.MicroServiceCloudConsumerDept80.javaè®¿é—®http://localhost/consumer/dept/discoveryÂ¶4.6 Eurekaé›†ç¾¤é…ç½®éœ€æ±‚ï¼šé›†ç¾¤ä¸‰ä¸ªEurekaæœåŠ¡å™¨ã€å¹¶ä¸”æ³¨å†Œä¸€å°å¾®æœåŠ¡ã€‚ï¼ˆ1ï¼‰æ–°å»ºmicroservicecloud-eureka-7002å’Œmicroservicecloud-eureka-7003ï¼ˆ2ï¼‰æŒ‰ç…§microservicecloud-eureka-7001ä¸ºæ¨¡æ¿ç²˜è´´pom.xmlåˆ°microservicecloud-eureka-7002/microservicecloud-eureka-7003åˆ›å»ºå®ŒæˆåŽåœ¨çˆ¶å·¥ç¨‹çš„pomæ–‡ä»¶çš„&lt;project&gt;æ ‡ç­¾ä¸‹æ·»åŠ å¦‚ä¸‹ä»£ç ã€‚ï¼ˆä¸€èˆ¬IDEå·¥å…·ä¼šè‡ªåŠ¨æ·»åŠ ï¼‰12345678&lt;modules&gt; &lt;module&gt;microservicecloud-api&lt;/module&gt; &lt;module&gt;microservicecloud-provider-dept-8001&lt;/module&gt; &lt;module&gt;microservicecloud-consumer-dept-80&lt;/module&gt; &lt;module&gt;microservicecloud-eureka-7001&lt;/module&gt; &lt;module&gt;microservicecloud-eureka-7002&lt;/module&gt; &lt;module&gt;microservicecloud-eureka-7003&lt;/module&gt;&lt;/modules&gt;ï¼ˆ3ï¼‰ä¿®æ”¹ä¸»å¯åŠ¨ç±»microservicecloud-eureka-7002ï¼šcom.qcmoke.EurekaServer7002App.java1234567891011121314151617181920package com.qcmoke;import org.springframework.boot.SpringApplication;import org.springframework.boot.autoconfigure.SpringBootApplication;import org.springframework.cloud.netflix.eureka.server.EnableEurekaServer;/** * EurekaServer7002App * * @author qcmoke * @date 2019/09/02 18:39 */@SpringBootApplication@EnableEurekaServer//EurekaServeræœåŠ¡å™¨ç«¯å¯åŠ¨ç±»,æŽ¥å—å…¶å®ƒå¾®æœåŠ¡æ³¨å†Œè¿›æ¥public class EurekaServer7002App &#123; public static void main(String[] args) &#123; SpringApplication.run(EurekaServer7002App.class, args); &#125;&#125;microservicecloud-eureka-7003ï¼šcom.qcmoke.EurekaServer7003App.java1234567891011121314151617181920package com.qcmoke;import org.springframework.boot.SpringApplication;import org.springframework.boot.autoconfigure.SpringBootApplication;import org.springframework.cloud.netflix.eureka.server.EnableEurekaServer;/** * EurekaServer7002App * * @author qcmoke * @date 2019/09/02 18:39 */@SpringBootApplication@EnableEurekaServer//EurekaServeræœåŠ¡å™¨ç«¯å¯åŠ¨ç±»,æŽ¥å—å…¶å®ƒå¾®æœåŠ¡æ³¨å†Œè¿›æ¥public class EurekaServer7003App &#123; public static void main(String[] args) &#123; SpringApplication.run(EurekaServer7003App.class, args); &#125;&#125;ï¼ˆ4ï¼‰é…ç½®ipåŸŸåæ˜ å°„ç”±äºŽæ˜¯åœ¨æœ¬åœ°æµ‹è¯•ï¼Œå¯ä»¥é€šè¿‡é…ç½®windowsçš„C:\Windows\System32\drivers\etc\hostsæ–‡ä»¶æ¥å®žçŽ°ipåŸŸåæ˜ å°„ã€‚æ·»åŠ å¦‚ä¸‹é…ç½®åˆ°hostsæ–‡ä»¶ä¸­å³å¯ã€‚123127.0.0.1 eureka7001.com127.0.0.1 eureka7002.com127.0.0.1 eureka7003.comï¼ˆ5ï¼‰3å°eurekaæœåŠ¡å™¨çš„ymlé…ç½®microservicecloud-eureka-70011234567891011server: port: 7001eureka: instance: hostname: eureka7001.com #eurekaæœåŠ¡ç«¯çš„å®žä¾‹åç§° client: register-with-eureka: false #falseè¡¨ç¤ºä¸å‘æ³¨å†Œä¸­å¿ƒæ³¨å†Œè‡ªå·±ã€‚ fetch-registry: false #falseè¡¨ç¤ºè‡ªå·±ç«¯å°±æ˜¯æ³¨å†Œä¸­å¿ƒï¼Œæˆ‘çš„èŒè´£å°±æ˜¯ç»´æŠ¤æœåŠ¡å®žä¾‹ï¼Œå¹¶ä¸éœ€è¦åŽ»æ£€ç´¢æœåŠ¡ service-url: defaultZone: http://eureka7002.com:7002/eureka/,http://eureka7003.com:7003/eureka/ #è®¾ç½®ä¸ŽEureka Serveräº¤äº’çš„åœ°å€æŸ¥è¯¢æœåŠ¡å’Œæ³¨å†ŒæœåŠ¡éƒ½éœ€è¦ä¾èµ–è¿™ä¸ªåœ°å€ã€‚microservicecloud-eureka-70021234567891011server: port: 7002eureka: instance: hostname: eureka7002.com #eurekaæœåŠ¡ç«¯çš„å®žä¾‹åç§° client: register-with-eureka: false #falseè¡¨ç¤ºä¸å‘æ³¨å†Œä¸­å¿ƒæ³¨å†Œè‡ªå·±ã€‚ fetch-registry: false #falseè¡¨ç¤ºè‡ªå·±ç«¯å°±æ˜¯æ³¨å†Œä¸­å¿ƒï¼Œæˆ‘çš„èŒè´£å°±æ˜¯ç»´æŠ¤æœåŠ¡å®žä¾‹ï¼Œå¹¶ä¸éœ€è¦åŽ»æ£€ç´¢æœåŠ¡ service-url: defaultZone: http://eureka7001.com:7001/eureka/,http://eureka7003.com:7003/eureka/ #è®¾ç½®ä¸ŽEureka Serveräº¤äº’çš„åœ°å€æŸ¥è¯¢æœåŠ¡å’Œæ³¨å†ŒæœåŠ¡éƒ½éœ€è¦ä¾èµ–è¿™ä¸ªåœ°å€ã€‚microservicecloud-eureka-70031234567891011server: port: 7003eureka: instance: hostname: eureka7003.com #eurekaæœåŠ¡ç«¯çš„å®žä¾‹åç§° client: register-with-eureka: false #falseè¡¨ç¤ºä¸å‘æ³¨å†Œä¸­å¿ƒæ³¨å†Œè‡ªå·±ã€‚ fetch-registry: false #falseè¡¨ç¤ºè‡ªå·±ç«¯å°±æ˜¯æ³¨å†Œä¸­å¿ƒï¼Œæˆ‘çš„èŒè´£å°±æ˜¯ç»´æŠ¤æœåŠ¡å®žä¾‹ï¼Œå¹¶ä¸éœ€è¦åŽ»æ£€ç´¢æœåŠ¡ service-url: defaultZone: http://eureka7001.com:7001/eureka/,http://eureka7002.com:7002/eureka/ #è®¾ç½®ä¸ŽEureka Serveräº¤äº’çš„åœ°å€æŸ¥è¯¢æœåŠ¡å’Œæ³¨å†ŒæœåŠ¡éƒ½éœ€è¦ä¾èµ–è¿™ä¸ªåœ°å€ã€‚ï¼ˆ6ï¼‰é…ç½®microservicecloud-provider-dept-8001çš„yml1234567891011121314151617181920212223242526272829303132333435363738server: port: 8001mybatis: config-location: classpath:mybatis/mybatis.cfg.xml # mybatisé…ç½®æ–‡ä»¶æ‰€åœ¨è·¯å¾„ type-aliases-package: com.qcmoke.entities # æ‰€æœ‰Entityåˆ«åç±»æ‰€åœ¨åŒ… mapper-locations: - classpath:mybatis/mapper/**/*.xml # mapperæ˜ å°„æ–‡ä»¶spring: application: name: microservicecloud-dept #å¯¹å¤–æš´éœ²çš„å¾®æœåŠ¡çš„åç§°ï¼ˆé‡ç‚¹ï¼‰ datasource: type: com.alibaba.druid.pool.DruidDataSource # å½“å‰æ•°æ®æºæ“ä½œç±»åž‹ driver-class-name: org.gjt.mm.mysql.Driver # mysqlé©±åŠ¨åŒ… url: jdbc:mysql://localhost:3306/cloudDB01 # æ•°æ®åº“åç§° username: root password: 123456 dbcp2: min-idle: 5 # æ•°æ®åº“è¿žæŽ¥æ± çš„æœ€å°ç»´æŒè¿žæŽ¥æ•° initial-size: 5 # åˆå§‹åŒ–è¿žæŽ¥æ•° max-total: 5 # æœ€å¤§è¿žæŽ¥æ•° max-wait-millis: 200 # ç­‰å¾…è¿žæŽ¥èŽ·å–çš„æœ€å¤§è¶…æ—¶æ—¶é—´eureka: client: #å®¢æˆ·ç«¯æ³¨å†Œè¿›eurekaæœåŠ¡åˆ—è¡¨å†… service-url: defaultZone: http://eureka7001.com:7001/eureka/,http://eureka7002.com:7002/eureka/,http://eureka7003.com:7003/eureka/ instance: instance-id: microservicecloud-dept8001 prefer-ip-address: true #è®¿é—®è·¯å¾„å¯ä»¥æ˜¾ç¤ºIPåœ°å€info: app.name: microservicecloud company.name: example.com build.artifactId: $&#123;project.artifactId&#125; build.version: $&#123;project.version&#125;ï¼ˆ7ï¼‰ä¾æ¬¡å¯åŠ¨microservicecloud-eureka-7001ã€microservicecloud-eureka-7002ã€microservicecloud-eureka-7003ã€microservicecloud-provider-dept-8001ã€‚ç„¶åŽè®¿é—®http://eureka7001.com:7001/ã€http://eureka7002.com:7002/ã€http://eureka7003.com:7003/ éƒ½èƒ½çœ‹åˆ°å¦‚ä¸‹é¡µé¢ï¼Œè¯´æ˜Žé›†ç¾¤æˆåŠŸã€‚Â¶4.7 Eurekaå¯¹æ¯”Zookeepeä½œä¸ºæœåŠ¡æ³¨å†Œä¸­å¿ƒï¼ŒEurekaæ¯”Zookeeperå¥½åœ¨å“ªé‡Œï¼Ÿè‘—åçš„CAPç†è®ºæŒ‡å‡ºï¼Œä¸€ä¸ªåˆ†å¸ƒå¼ç³»ç»Ÿä¸å¯èƒ½åŒæ—¶æ»¡è¶³C(ä¸€è‡´æ€§)ã€A(å¯ç”¨æ€§)å’ŒP(åˆ†åŒºå®¹é”™æ€§)ã€‚ç”±äºŽåˆ†åŒºå®¹é”™æ€§Påœ¨æ˜¯åˆ†å¸ƒå¼ç³»ç»Ÿä¸­å¿…é¡»è¦ä¿è¯çš„ï¼Œå› æ­¤æˆ‘ä»¬åªèƒ½åœ¨Aå’ŒCä¹‹é—´è¿›è¡Œæƒè¡¡ã€‚åœ¨æƒè¡¡é€‰æ‹©ä¸­ï¼šZookeeperä¿è¯çš„æ˜¯CP,Eurekaåˆ™æ˜¯APã€‚4.1 Zookeeperä¿è¯CPå½“å‘æ³¨å†Œä¸­å¿ƒæŸ¥è¯¢æœåŠ¡åˆ—è¡¨æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥å®¹å¿æ³¨å†Œä¸­å¿ƒè¿”å›žçš„æ˜¯å‡ åˆ†é’Ÿä»¥å‰çš„æ³¨å†Œä¿¡æ¯ï¼Œä½†ä¸èƒ½æŽ¥å—æœåŠ¡ç›´æŽ¥downæŽ‰ä¸å¯ç”¨ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼ŒæœåŠ¡æ³¨å†ŒåŠŸèƒ½å¯¹å¯ç”¨æ€§çš„è¦æ±‚è¦é«˜äºŽä¸€è‡´æ€§ã€‚ä½†æ˜¯Zookeeperä¼šå‡ºçŽ°è¿™æ ·ä¸€ç§æƒ…å†µï¼Œå½“masterèŠ‚ç‚¹å› ä¸ºç½‘ç»œæ•…éšœä¸Žå…¶ä»–èŠ‚ç‚¹å¤±åŽ»è”ç³»æ—¶ï¼Œå‰©ä½™èŠ‚ç‚¹ä¼šé‡æ–°è¿›è¡Œleaderé€‰ä¸¾ã€‚é—®é¢˜åœ¨äºŽï¼Œé€‰ä¸¾leaderçš„æ—¶é—´å¤ªé•¿ï¼Œ30 ~ 120s, ä¸”é€‰ä¸¾æœŸé—´æ•´ä¸ªZookeeperé›†ç¾¤éƒ½æ˜¯ä¸å¯ç”¨çš„ï¼Œè¿™å°±å¯¼è‡´åœ¨é€‰ä¸¾æœŸé—´æ³¨å†ŒæœåŠ¡ç˜«ç—ªã€‚åœ¨äº‘éƒ¨ç½²çš„çŽ¯å¢ƒä¸‹ï¼Œå› ç½‘ç»œé—®é¢˜ä½¿å¾—Zookeeperé›†ç¾¤å¤±åŽ»masterèŠ‚ç‚¹æ˜¯è¾ƒå¤§æ¦‚çŽ‡ä¼šå‘ç”Ÿçš„äº‹ï¼Œè™½ç„¶æœåŠ¡èƒ½å¤Ÿæœ€ç»ˆæ¢å¤ï¼Œä½†æ˜¯æ¼«é•¿çš„é€‰ä¸¾æ—¶é—´å¯¼è‡´çš„æ³¨å†Œé•¿æœŸä¸å¯ç”¨æ˜¯ä¸èƒ½å®¹å¿çš„ã€‚4.2 Eurekaä¿è¯APEurekaçœ‹æ˜Žç™½äº†è¿™ä¸€ç‚¹ï¼Œå› æ­¤åœ¨è®¾è®¡æ—¶å°±ä¼˜å…ˆä¿è¯å¯ç”¨æ€§ã€‚Eurekaå„ä¸ªèŠ‚ç‚¹éƒ½æ˜¯å¹³ç­‰çš„ï¼Œå‡ ä¸ªèŠ‚ç‚¹æŒ‚æŽ‰ä¸ä¼šå½±å“æ­£å¸¸èŠ‚ç‚¹çš„å·¥ä½œï¼Œå‰©ä½™çš„èŠ‚ç‚¹ä¾ç„¶å¯ä»¥æä¾›æ³¨å†Œå’ŒæŸ¥è¯¢æœåŠ¡ã€‚è€ŒEurekaçš„å®¢æˆ·ç«¯åœ¨å‘æŸä¸ªEurekaæ³¨å†Œæˆ–æ—¶å¦‚æžœå‘çŽ°è¿žæŽ¥å¤±è´¥ï¼Œåˆ™ä¼šè‡ªåŠ¨åˆ‡æ¢è‡³å…¶å®ƒèŠ‚ç‚¹ï¼Œåªè¦æœ‰ä¸€å°Eurekaè¿˜åœ¨ï¼Œå°±èƒ½ä¿è¯æ³¨å†ŒæœåŠ¡å¯ç”¨(ä¿è¯å¯ç”¨æ€§)ï¼Œåªä¸è¿‡æŸ¥åˆ°çš„ä¿¡æ¯å¯èƒ½ä¸æ˜¯æœ€æ–°çš„(ä¸ä¿è¯å¼ºä¸€è‡´æ€§)ã€‚é™¤æ­¤ä¹‹å¤–ï¼ŒEurekaè¿˜æœ‰ä¸€ç§è‡ªæˆ‘ä¿æŠ¤æœºåˆ¶ï¼Œå¦‚æžœåœ¨15åˆ†é’Ÿå†…è¶…è¿‡85%çš„èŠ‚ç‚¹éƒ½æ²¡æœ‰æ­£å¸¸çš„å¿ƒè·³ï¼Œé‚£ä¹ˆEurekaå°±è®¤ä¸ºå®¢æˆ·ç«¯ä¸Žæ³¨å†Œä¸­å¿ƒå‡ºçŽ°äº†ç½‘ç»œæ•…éšœï¼Œæ­¤æ—¶ä¼šå‡ºçŽ°ä»¥ä¸‹å‡ ç§æƒ…å†µï¼šEurekaä¸å†ä»Žæ³¨å†Œåˆ—è¡¨ä¸­ç§»é™¤å› ä¸ºé•¿æ—¶é—´æ²¡æ”¶åˆ°å¿ƒè·³è€Œåº”è¯¥è¿‡æœŸçš„æœåŠ¡Eurekaä»ç„¶èƒ½å¤ŸæŽ¥å—æ–°æœåŠ¡çš„æ³¨å†Œå’ŒæŸ¥è¯¢è¯·æ±‚ï¼Œä½†æ˜¯ä¸ä¼šè¢«åŒæ­¥åˆ°å…¶å®ƒèŠ‚ç‚¹ä¸Š(å³ä¿è¯å½“å‰èŠ‚ç‚¹ä¾ç„¶å¯ç”¨)å½“ç½‘ç»œç¨³å®šæ—¶ï¼Œå½“å‰å®žä¾‹æ–°çš„æ³¨å†Œä¿¡æ¯ä¼šè¢«åŒæ­¥åˆ°å…¶å®ƒèŠ‚ç‚¹ä¸­å› æ­¤ï¼Œ Eurekaå¯ä»¥å¾ˆå¥½çš„åº”å¯¹å› ç½‘ç»œæ•…éšœå¯¼è‡´éƒ¨åˆ†èŠ‚ç‚¹å¤±åŽ»è”ç³»çš„æƒ…å†µï¼Œè€Œä¸ä¼šåƒzookeeperé‚£æ ·ä½¿æ•´ä¸ªæ³¨å†ŒæœåŠ¡ç˜«ç—ªã€‚Â¶5. Ribbonè´Ÿè½½å‡è¡¡Â¶5.1 æ¦‚å¿µSpring Cloud Ribbonæ˜¯åŸºäºŽNetflix Ribbonå®žçŽ°çš„ä¸€å¥—å®¢æˆ·ç«¯ è´Ÿè½½å‡è¡¡çš„å·¥å…·ã€‚ç®€å•çš„è¯´ï¼ŒRibbonæ˜¯Netflixå‘å¸ƒçš„å¼€æºé¡¹ç›®ï¼Œä¸»è¦åŠŸèƒ½æ˜¯æä¾›å®¢æˆ·ç«¯çš„è½¯ä»¶è´Ÿè½½å‡è¡¡ç®—æ³•ï¼Œå°†Netflixçš„ä¸­é—´å±‚æœåŠ¡è¿žæŽ¥åœ¨ä¸€èµ·ã€‚Ribbonå®¢æˆ·ç«¯ç»„ä»¶æä¾›ä¸€ç³»åˆ—å®Œå–„çš„é…ç½®é¡¹å¦‚è¿žæŽ¥è¶…æ—¶ï¼Œé‡è¯•ç­‰ã€‚ç®€å•çš„è¯´ï¼Œå°±æ˜¯åœ¨é…ç½®æ–‡ä»¶ä¸­åˆ—å‡ºLoad Balancerï¼ˆç®€ç§°LBï¼‰åŽé¢æ‰€æœ‰çš„æœºå™¨ï¼ŒRibbonä¼šè‡ªåŠ¨çš„å¸®åŠ©ä½ åŸºäºŽæŸç§è§„åˆ™ï¼ˆå¦‚ç®€å•è½®è¯¢ï¼Œéšæœºè¿žæŽ¥ç­‰ï¼‰åŽ»è¿žæŽ¥è¿™äº›æœºå™¨ã€‚æˆ‘ä»¬ä¹Ÿå¾ˆå®¹æ˜“ä½¿ç”¨Ribbonå®žçŽ°è‡ªå®šä¹‰çš„è´Ÿè½½å‡è¡¡ç®—æ³•ã€‚Â¶5.2 è´Ÿè½½å‡è¡¡LBï¼Œå³è´Ÿè½½å‡è¡¡(Load Balance)ï¼Œåœ¨å¾®æœåŠ¡æˆ–åˆ†å¸ƒå¼é›†ç¾¤ä¸­ç»å¸¸ç”¨çš„ä¸€ç§åº”ç”¨ã€‚è´Ÿè½½å‡è¡¡ç®€å•çš„è¯´å°±æ˜¯å°†ç”¨æˆ·çš„è¯·æ±‚å¹³æ‘Šçš„åˆ†é…åˆ°å¤šä¸ªæœåŠ¡ä¸Šï¼Œä»Žè€Œè¾¾åˆ°ç³»ç»Ÿçš„HAã€‚å¸¸è§çš„è´Ÿè½½å‡è¡¡æœ‰è½¯ä»¶Nginxï¼ŒLVSï¼Œç¡¬ä»¶ F5ç­‰ã€‚ç›¸åº”çš„åœ¨ä¸­é—´ä»¶ï¼Œä¾‹å¦‚ï¼šdubboå’ŒSpringCloudä¸­å‡ç»™æˆ‘ä»¬æä¾›äº†è´Ÿè½½å‡è¡¡ï¼ŒSpringCloudçš„è´Ÿè½½å‡è¡¡ç®—æ³•å¯ä»¥è‡ªå®šä¹‰ã€‚è´Ÿè½½å‡è¡¡æœ‰åº”ç”¨æƒ…æ™¯ï¼šï¼ˆ1ï¼‰é›†ä¸­å¼LBå³åœ¨æœåŠ¡çš„æ¶ˆè´¹æ–¹å’Œæä¾›æ–¹ä¹‹é—´ä½¿ç”¨ç‹¬ç«‹çš„LBè®¾æ–½(å¯ä»¥æ˜¯ç¡¬ä»¶ï¼Œå¦‚F5, ä¹Ÿå¯ä»¥æ˜¯è½¯ä»¶ï¼Œå¦‚nginx), ç”±è¯¥è®¾æ–½è´Ÿè´£æŠŠè®¿é—®è¯·æ±‚é€šè¿‡æŸç§ç­–ç•¥è½¬å‘è‡³æœåŠ¡çš„æä¾›æ–¹ï¼›ï¼ˆ2ï¼‰è¿›ç¨‹å†…LBå°†LBé€»è¾‘é›†æˆåˆ°æ¶ˆè´¹æ–¹ï¼Œæ¶ˆè´¹æ–¹ä»ŽæœåŠ¡æ³¨å†Œä¸­å¿ƒèŽ·çŸ¥æœ‰å“ªäº›åœ°å€å¯ç”¨ï¼Œç„¶åŽè‡ªå·±å†ä»Žè¿™äº›åœ°å€ä¸­é€‰æ‹©å‡ºä¸€ä¸ªåˆé€‚çš„æœåŠ¡å™¨ã€‚Ribbonå°±å±žäºŽè¿›ç¨‹å†…LBï¼Œå®ƒåªæ˜¯ä¸€ä¸ªç±»åº“ï¼Œé›†æˆäºŽæ¶ˆè´¹æ–¹è¿›ç¨‹ï¼Œæ¶ˆè´¹æ–¹é€šè¿‡å®ƒæ¥èŽ·å–åˆ°æœåŠ¡æä¾›æ–¹çš„åœ°å€ã€‚Â¶5.3 å·¥ä½œåŽŸç†Ribbonåœ¨å·¥ä½œæ—¶åˆ†æˆä¸¤æ­¥ç¬¬ä¸€æ­¥å…ˆé€‰æ‹© EurekaServer ,å®ƒä¼˜å…ˆé€‰æ‹©åœ¨åŒä¸€ä¸ªåŒºåŸŸå†…è´Ÿè½½è¾ƒå°‘çš„server.ç¬¬äºŒæ­¥å†æ ¹æ®ç”¨æˆ·æŒ‡å®šçš„ç­–ç•¥ï¼Œåœ¨ä»Žserverå–åˆ°çš„æœåŠ¡æ³¨å†Œåˆ—è¡¨ä¸­é€‰æ‹©ä¸€ä¸ªåœ°å€ã€‚å…¶ä¸­Ribbonæä¾›äº†å¤šç§ç­–ç•¥ï¼šæ¯”å¦‚è½®è¯¢ã€éšæœºå’Œæ ¹æ®å“åº”æ—¶é—´åŠ æƒã€‚Â¶5.4 Ribboné…ç½®åœ¨åšè´Ÿè½½å‡è¡¡çš„æ¡ˆä¾‹æ—¶ï¼Œé¦–å…ˆå…ˆæ¥çœ‹çœ‹æ€Žä¹ˆé…ç½®Ribbonã€‚éœ€æ±‚ï¼šRibbonå’ŒEurekaæ•´åˆåŽConsumerå¯ä»¥é€šè¿‡ä½¿ç”¨Ribbonè°ƒç”¨å¾®æœåŠ¡çš„åç§°çš„æ–¹å¼ç›´æŽ¥è°ƒç”¨å¾®æœåŠ¡è€Œä¸ç”¨å†å…³å¿ƒåœ°å€å’Œç«¯å£å·ã€‚ï¼ˆ1ï¼‰ä¿®æ”¹microservicecloud-consumer-dept-80å·¥ç¨‹çš„pom.xmlæ·»åŠ å¦‚ä¸‹ä¾èµ–ï¼š12345678910111213&lt;!-- Ribbonç›¸å…³ --&gt;&lt;dependency&gt; &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt; &lt;artifactId&gt;spring-cloud-starter-eureka&lt;/artifactId&gt;&lt;/dependency&gt;&lt;dependency&gt; &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt; &lt;artifactId&gt;spring-cloud-starter-ribbon&lt;/artifactId&gt;&lt;/dependency&gt;&lt;dependency&gt; &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt; &lt;artifactId&gt;spring-cloud-starter-config&lt;/artifactId&gt;&lt;/dependency&gt;å…¨ï¼š1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"&gt; &lt;parent&gt; &lt;artifactId&gt;microservicecloud&lt;/artifactId&gt; &lt;groupId&gt;com.qcmoke&lt;/groupId&gt; &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt; &lt;/parent&gt; &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt; &lt;artifactId&gt;microservicecloud-consumer-dept-80&lt;/artifactId&gt; &lt;description&gt;éƒ¨é—¨å¾®æœåŠ¡æ¶ˆè´¹è€…&lt;/description&gt; &lt;dependencies&gt; &lt;dependency&gt;&lt;!-- è‡ªå·±å®šä¹‰çš„api --&gt; &lt;groupId&gt;com.qcmoke&lt;/groupId&gt; &lt;artifactId&gt;microservicecloud-api&lt;/artifactId&gt; &lt;version&gt;$&#123;project.version&#125;&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt; &lt;/dependency&gt; &lt;!-- ä¿®æ”¹åŽç«‹å³ç”Ÿæ•ˆï¼Œçƒ­éƒ¨ç½² --&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework&lt;/groupId&gt; &lt;artifactId&gt;springloaded&lt;/artifactId&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt; &lt;/dependency&gt; &lt;!-- Ribbonç›¸å…³ --&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt; &lt;artifactId&gt;spring-cloud-starter-eureka&lt;/artifactId&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt; &lt;artifactId&gt;spring-cloud-starter-ribbon&lt;/artifactId&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt; &lt;artifactId&gt;spring-cloud-starter-config&lt;/artifactId&gt; &lt;/dependency&gt; &lt;/dependencies&gt;&lt;/project&gt;ï¼ˆ2ï¼‰ä¿®æ”¹application.yml è¿½åŠ eurekaçš„æœåŠ¡æ³¨å†Œåœ°å€12345678server: port: 80eureka: client: register-with-eureka: false service-url: defaultZone: http://eureka7001.com:7001/eureka/,http://eureka7002.com:7002/eureka/,http://eureka7003.com:7003/eureka/ï¼ˆ3ï¼‰å¯¹com.qcmoke.config.ConfigBean.javaæ·»åŠ æ³¨è§£@LoadBalanced èŽ·å¾—Restæ—¶åŠ å…¥Ribbonçš„é…ç½®123456789101112131415161718192021222324252627package com.qcmoke.config;import org.springframework.cloud.client.loadbalancer.LoadBalanced;import org.springframework.context.annotation.Bean;import org.springframework.context.annotation.Configuration;import org.springframework.web.client.RestTemplate;/** * ConfigBean * * @author qcmoke * @date 2019/09/02 04:32 */@Configurationpublic class ConfigBean &#123; /** * RestTemplateæä¾›äº†å¤šç§ä¾¿æ·è®¿é—®è¿œç¨‹HttpæœåŠ¡çš„æ–¹æ³•ï¼Œæ˜¯ä¸€ç§ç®€å•ä¾¿æ·çš„è®¿é—®restfulæœåŠ¡æ¨¡æ¿ç±»ï¼Œæ˜¯Springæä¾›çš„ç”¨äºŽè®¿é—®RestæœåŠ¡çš„å®¢æˆ·ç«¯æ¨¡æ¿å·¥å…·é›† * * @author qcmoke * @date 2019/9/2 4:41 */ @Bean @LoadBalanced public RestTemplate getRestTemplate() &#123; return new RestTemplate(); &#125;&#125;ï¼ˆ4ï¼‰ä¸»å¯åŠ¨ç±»com.qcmoke.MicroServiceCloudConsumerDept80.javaæ·»åŠ @EnableEurekaClient1234567891011121314151617181920package com.qcmoke;import org.springframework.boot.SpringApplication;import org.springframework.boot.autoconfigure.SpringBootApplication;import org.springframework.cloud.netflix.eureka.EnableEurekaClient;/** * MicroservicecloudConsumerDept80 * * @author qcmoke * @date 2019/09/02 04:37 */@SpringBootApplication@EnableEurekaClientpublic class MicroServiceCloudConsumerDept80 &#123; public static void main(String[] args) &#123; SpringApplication.run(MicroServiceCloudConsumerDept80.class, args); &#125;&#125;ï¼ˆ5ï¼‰ä¿®æ”¹com.qcmoke.controller.DeptConsumerController.javaå®¢æˆ·ç«¯è®¿é—®ç±»è®¿é—®å¾®æœåŠ¡çš„åœ°å€ä¸ºå¾®æœåŠ¡çš„åç§°ã€‚1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950package com.qcmoke.controller;import com.qcmoke.entities.Dept;import org.springframework.beans.factory.annotation.Autowired;import org.springframework.web.bind.annotation.PathVariable;import org.springframework.web.bind.annotation.RequestMapping;import org.springframework.web.bind.annotation.RestController;import org.springframework.web.client.RestTemplate;import java.util.List;/** * DeptConsumerController * * @author qcmoke * @date 2019/09/02 04:34 */@RestControllerpublic class DeptConsumerController &#123; //private static final String REST_URL_PREFIX = "http://localhost:8001"; private static final String REST_URL_PREFIX = "http://MICROSERVICECLOUD-DEPT"; //æµ‹è¯•@EnableDiscoveryClient,æ¶ˆè´¹ç«¯å¯ä»¥è°ƒç”¨æœåŠ¡å‘çŽ° @RequestMapping(value = "/consumer/dept/discovery") public Object discovery() &#123; return restTemplate.getForObject(REST_URL_PREFIX + "/dept/discovery", Object.class); &#125; @Autowired private RestTemplate restTemplate; @RequestMapping(value = "/consumer/dept/add") public boolean add(Dept dept) &#123; return restTemplate.postForObject(REST_URL_PREFIX + "/dept/add", dept, Boolean.class); &#125; @RequestMapping(value = "/consumer/dept/get/&#123;id&#125;") public Dept get(@PathVariable("id") Long id) &#123; return restTemplate.getForObject(REST_URL_PREFIX + "/dept/get/" + id, Dept.class); &#125; @SuppressWarnings("unchecked") @RequestMapping(value = "/consumer/dept/list") public List&lt;Dept&gt; list() &#123; return restTemplate.getForObject(REST_URL_PREFIX + "/dept/list", List.class); &#125;&#125;ï¼ˆ6ï¼‰å…ˆå¯åŠ¨3ä¸ªeurekaé›†ç¾¤åŽï¼Œå†å¯åŠ¨microservicecloud-provider-dept-8001ï¼Œæœ€åŽå¯åŠ¨å¯åŠ¨microservicecloud-consumer-dept-80ã€‚ï¼ˆ7ï¼‰æµ‹è¯•è®¿é—®ï¼šhttp://localhost/consumer/dept/get/1http://localhost/consumer/dept/listhttp://localhost/consumer/dept/add?dname=å¤§æ•°æ®éƒ¨Â¶5.5 Ribbonè´Ÿè½½å‡è¡¡éœ€æ±‚ï¼šé€šè¿‡ä½¿ç”¨Ribbonè´Ÿè½½å‡è¡¡å®žçŽ°ï¼šæµè§ˆconsumeræ—¶ï¼Œconsumeråœ¨è‡ªèº«åº”ç”¨é‡Œä½¿ç”¨Ribbonå®žçŽ°è½®è¯¢è®¿é—®çš„è´Ÿè½½å‡è¡¡æ–¹å¼è®¿é—®3ä¸ªä¸åŒçš„providerã€‚ï¼ˆ1ï¼‰å‚è€ƒmicroservicecloud-provider-dept-8001ï¼Œæ–°å»ºä¸¤ä»½ï¼Œåˆ†åˆ«å‘½åä¸ºmicroservicecloud-provider-dept-8002ï¼Œmicroservicecloud-provider-dept-8003,å¹¶ä¸”pom.xmléƒ½åŠ å…¥ä»¥ä¸‹ä¾èµ–:123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566&lt;dependencies&gt; &lt;dependency&gt;&lt;!-- å¼•å…¥è‡ªå·±å®šä¹‰çš„å…¶ä»–æ¨¡å—ï¼ˆmicroservicecloud-apiï¼‰ --&gt; &lt;groupId&gt;com.qcmoke&lt;/groupId&gt; &lt;artifactId&gt;microservicecloud-api&lt;/artifactId&gt; &lt;version&gt;$&#123;project.version&#125;&lt;/version&gt; &lt;/dependency&gt; &lt;!-- å°†å¾®æœåŠ¡providerä¾§æ³¨å†Œè¿›eureka --&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt; &lt;artifactId&gt;spring-cloud-starter-eureka&lt;/artifactId&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt; &lt;artifactId&gt;spring-cloud-starter-config&lt;/artifactId&gt; &lt;/dependency&gt; &lt;!-- actuatorç›‘æŽ§ä¿¡æ¯å®Œå–„ --&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;junit&lt;/groupId&gt; &lt;artifactId&gt;junit&lt;/artifactId&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;mysql&lt;/groupId&gt; &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;com.alibaba&lt;/groupId&gt; &lt;artifactId&gt;druid&lt;/artifactId&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;ch.qos.logback&lt;/groupId&gt; &lt;artifactId&gt;logback-core&lt;/artifactId&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.mybatis.spring.boot&lt;/groupId&gt; &lt;artifactId&gt;mybatis-spring-boot-starter&lt;/artifactId&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-jetty&lt;/artifactId&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt; &lt;/dependency&gt; &lt;!-- ä¿®æ”¹åŽç«‹å³ç”Ÿæ•ˆï¼Œçƒ­éƒ¨ç½² --&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework&lt;/groupId&gt; &lt;artifactId&gt;springloaded&lt;/artifactId&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt; &lt;/dependency&gt;&lt;/dependencies&gt;ï¼ˆ2ï¼‰å°†8001çš„src/mainçš„æ‰€æœ‰å†…å®¹è¦†ç›–æŽ‰8002/8003çš„src/mainï¼Œç„¶åŽä¿®æ”¹8002çš„å¯åŠ¨ç±»ä¸ºDeptProvider8002App.javaï¼›å°†8003çš„å¯åŠ¨ç±»ä¿®æ”¹ä¸ºDeptProvider8003App.javaï¼ˆ3ï¼‰åˆ›å»ºå®ŒæˆåŽåœ¨çˆ¶å·¥ç¨‹çš„pomæ–‡ä»¶çš„&lt;project&gt;æ ‡ç­¾ä¸‹æ·»åŠ å¦‚ä¸‹ä»£ç ã€‚ï¼ˆä¸€èˆ¬IDEå·¥å…·ä¼šè‡ªåŠ¨æ·»åŠ ï¼‰12345678910&lt;modules&gt; &lt;module&gt;microservicecloud-api&lt;/module&gt; &lt;module&gt;microservicecloud-provider-dept-8001&lt;/module&gt; &lt;module&gt;microservicecloud-consumer-dept-80&lt;/module&gt; &lt;module&gt;microservicecloud-eureka-7001&lt;/module&gt; &lt;module&gt;microservicecloud-eureka-7002&lt;/module&gt; &lt;module&gt;microservicecloud-eureka-7003&lt;/module&gt; &lt;module&gt;microservicecloud-provider-dept-8002&lt;/module&gt; &lt;module&gt;microservicecloud-provider-dept-8003&lt;/module&gt;&lt;/modules&gt;ï¼ˆ4ï¼‰æ–°å»º8002/8003æ•°æ®åº“ï¼Œå„è‡ªå¾®æœåŠ¡åˆ†åˆ«è¿žå„è‡ªçš„æ•°æ®åº“8002çš„sql:123456789101112131415161718192021 DROP DATABASE IF EXISTS cloudDB02; CREATE DATABASE cloudDB02 CHARACTER SET UTF8; USE cloudDB02; CREATE TABLE dept( deptno BIGINT NOT NULL PRIMARY KEY AUTO_INCREMENT, dname VARCHAR(60), db_source VARCHAR(60)); INSERT INTO dept(dname,db_source) VALUES('å¼€å‘éƒ¨',DATABASE());INSERT INTO dept(dname,db_source) VALUES('äººäº‹éƒ¨',DATABASE());INSERT INTO dept(dname,db_source) VALUES('è´¢åŠ¡éƒ¨',DATABASE());INSERT INTO dept(dname,db_source) VALUES('å¸‚åœºéƒ¨',DATABASE());INSERT INTO dept(dname,db_source) VALUES('è¿ç»´éƒ¨',DATABASE()); SELECT * FROM dept;8003çš„sqlï¼š123456789101112131415161718192021DROP DATABASE IF EXISTS cloudDB03; CREATE DATABASE cloudDB03 CHARACTER SET UTF8; USE cloudDB03; CREATE TABLE dept( deptno BIGINT NOT NULL PRIMARY KEY AUTO_INCREMENT, dname VARCHAR(60), db_source VARCHAR(60)); INSERT INTO dept(dname,db_source) VALUES('å¼€å‘éƒ¨',DATABASE());INSERT INTO dept(dname,db_source) VALUES('äººäº‹éƒ¨',DATABASE());INSERT INTO dept(dname,db_source) VALUES('è´¢åŠ¡éƒ¨',DATABASE());INSERT INTO dept(dname,db_source) VALUES('å¸‚åœºéƒ¨',DATABASE());INSERT INTO dept(dname,db_source) VALUES('è¿ç»´éƒ¨',DATABASE()); SELECT * FROM dept;ï¼ˆ5ï¼‰ä¿®æ”¹8002/8003å„è‡ªapplication.ymlä¿®æ”¹æœåŠ¡ç«¯å£å’Œinstance-idå·²ç»æ•°æ®åº“åç§°å³å¯8002ï¼š1234567891011121314151617181920212223242526272829303132333435363738server: port: 8002mybatis: config-location: classpath:mybatis/mybatis.cfg.xml # mybatisé…ç½®æ–‡ä»¶æ‰€åœ¨è·¯å¾„ type-aliases-package: com.qcmoke.entities # æ‰€æœ‰Entityåˆ«åç±»æ‰€åœ¨åŒ… mapper-locations: - classpath:mybatis/mapper/**/*.xml # mapperæ˜ å°„æ–‡ä»¶spring: application: name: microservicecloud-dept #å¯¹å¤–æš´éœ²çš„å¾®æœåŠ¡çš„åç§°ï¼ˆé‡ç‚¹ï¼‰ datasource: type: com.alibaba.druid.pool.DruidDataSource # å½“å‰æ•°æ®æºæ“ä½œç±»åž‹ driver-class-name: org.gjt.mm.mysql.Driver # mysqlé©±åŠ¨åŒ… url: jdbc:mysql://localhost:3306/cloudDB02 # æ•°æ®åº“åç§° username: root password: 123456 dbcp2: min-idle: 5 # æ•°æ®åº“è¿žæŽ¥æ± çš„æœ€å°ç»´æŒè¿žæŽ¥æ•° initial-size: 5 # åˆå§‹åŒ–è¿žæŽ¥æ•° max-total: 5 # æœ€å¤§è¿žæŽ¥æ•° max-wait-millis: 200 # ç­‰å¾…è¿žæŽ¥èŽ·å–çš„æœ€å¤§è¶…æ—¶æ—¶é—´eureka: client: #å®¢æˆ·ç«¯æ³¨å†Œè¿›eurekaæœåŠ¡åˆ—è¡¨å†… service-url: defaultZone: http://eureka7001.com:7001/eureka/,http://eureka7002.com:7002/eureka/,http://eureka7003.com:7003/eureka/ instance: instance-id: microservicecloud-dept8002 prefer-ip-address: true #è®¿é—®è·¯å¾„å¯ä»¥æ˜¾ç¤ºIPåœ°å€info: app.name: microservicecloud company.name: example.com build.artifactId: $&#123;project.artifactId&#125; build.version: $&#123;project.version&#125;8003ï¼š1234567891011121314151617181920212223242526272829303132333435363738server: port: 8003mybatis: config-location: classpath:mybatis/mybatis.cfg.xml # mybatisé…ç½®æ–‡ä»¶æ‰€åœ¨è·¯å¾„ type-aliases-package: com.qcmoke.entities # æ‰€æœ‰Entityåˆ«åç±»æ‰€åœ¨åŒ… mapper-locations: - classpath:mybatis/mapper/**/*.xml # mapperæ˜ å°„æ–‡ä»¶spring: application: name: microservicecloud-dept #å¯¹å¤–æš´éœ²çš„å¾®æœåŠ¡çš„åç§°ï¼ˆé‡ç‚¹ï¼‰ datasource: type: com.alibaba.druid.pool.DruidDataSource # å½“å‰æ•°æ®æºæ“ä½œç±»åž‹ driver-class-name: org.gjt.mm.mysql.Driver # mysqlé©±åŠ¨åŒ… url: jdbc:mysql://localhost:3306/cloudDB03 # æ•°æ®åº“åç§° username: root password: 123456 dbcp2: min-idle: 5 # æ•°æ®åº“è¿žæŽ¥æ± çš„æœ€å°ç»´æŒè¿žæŽ¥æ•° initial-size: 5 # åˆå§‹åŒ–è¿žæŽ¥æ•° max-total: 5 # æœ€å¤§è¿žæŽ¥æ•° max-wait-millis: 200 # ç­‰å¾…è¿žæŽ¥èŽ·å–çš„æœ€å¤§è¶…æ—¶æ—¶é—´eureka: client: #å®¢æˆ·ç«¯æ³¨å†Œè¿›eurekaæœåŠ¡åˆ—è¡¨å†… service-url: defaultZone: http://eureka7001.com:7001/eureka/,http://eureka7002.com:7002/eureka/,http://eureka7003.com:7003/eureka/ instance: instance-id: microservicecloud-dept8003 prefer-ip-address: true #è®¿é—®è·¯å¾„å¯ä»¥æ˜¾ç¤ºIPåœ°å€info: app.name: microservicecloud company.name: example.com build.artifactId: $&#123;project.artifactId&#125; build.version: $&#123;project.version&#125;ï¼ˆ6ï¼‰æµ‹è¯•å…ˆå¯åŠ¨3ä¸ªeurekaé›†ç¾¤é…ç½®åŒºï¼Œç„¶åŽå¯åŠ¨3ä¸ªproviderï¼Œæœ€åŽå¯åŠ¨consumerã€‚è®¿é—®http://localhost/consumer/dept/listæµè§ˆconsumeré¡µé¢æ—¶ï¼Œconsumeræ˜¯é€šè¿‡è½®è¯¢çš„æ–¹å¼è®¿é—®3ä¸ªproviderçš„ï¼ˆå¯é€šè¿‡db_sourceå­—æ®µæ¥åˆ¤æ–­è½®è¯¢æƒ…å†µï¼‰ï¼Œè¯´æ˜Žè´Ÿè½½å‡è¡¡å®žçŽ°ã€‚Â¶5.6 Ribbonè´Ÿè½½å‡è¡¡è°ƒåº¦ç­–ç•¥Ribbonè´Ÿè½½å‡è¡¡è°ƒåº¦ç­–ç•¥å…³ç³»åˆ°Ribbonçš„ä¸€ä¸ªæ ¸å¿ƒç»„ä»¶IRuleã€‚è¯¥ç»„ä»¶è§„å®šçš„è°ƒåº¦ç­–ç•¥è§„åˆ™æœ‰ä»¥ä¸‹ï¼ˆ1ï¼‰RoundRobinRule è½®è¯¢ï¼ˆé»˜è®¤ï¼‰ï¼ˆ2ï¼‰RandomRule éšæœºï¼ˆ3ï¼‰AvailabilityFilteringRule ä¼šå…ˆè¿‡æ»¤æŽ‰ç”±äºŽå¤šæ¬¡è®¿é—®æ•…éšœè€Œå¤„äºŽæ–­è·¯å™¨è·³é—¸çŠ¶æ€çš„æœåŠ¡ï¼Œè¿˜æœ‰å¹¶å‘çš„è¿žæŽ¥æ•°é‡è¶…è¿‡é˜ˆå€¼çš„æœåŠ¡ï¼Œç„¶åŽå¯¹å‰©ä½™çš„æœåŠ¡åˆ—è¡¨æŒ‰ç…§è½®è¯¢ç­–ç•¥è¿›è¡Œè®¿é—®ï¼ˆ4ï¼‰WeightedResponseTimeRule æ ¹æ®å¹³å‡å“åº”æ—¶é—´è®¡ç®—æ‰€æœ‰æœåŠ¡çš„æƒé‡ï¼Œå“åº”æ—¶é—´è¶Šå¿«æœåŠ¡æƒé‡è¶Šå¤§è¢«é€‰ä¸­çš„æ¦‚çŽ‡è¶Šé«˜ã€‚åˆšå¯åŠ¨æ—¶å¦‚æžœç»Ÿè®¡ä¿¡æ¯ä¸è¶³ï¼Œåˆ™ä½¿ç”¨RoundRobinRuleç­–ç•¥ï¼Œç­‰ç»Ÿè®¡ä¿¡æ¯è¶³å¤Ÿï¼Œä¼šåˆ‡æ¢åˆ°WeightedResponseTimeRuleã€‚ï¼ˆ5ï¼‰RetryRule å…ˆæŒ‰ç…§RoundRobinRuleçš„ç­–ç•¥èŽ·å–æœåŠ¡ï¼Œå¦‚æžœèŽ·å–æœåŠ¡å¤±è´¥åˆ™åœ¨æŒ‡å®šæ—¶é—´å†…ä¼šè¿›è¡Œé‡è¯•ï¼ŒèŽ·å–å¯ç”¨çš„æœåŠ¡ï¼ˆ6ï¼‰BestAvailableRule ä¼šå…ˆè¿‡æ»¤æŽ‰ç”±äºŽå¤šæ¬¡è®¿é—®æ•…éšœè€Œå¤„äºŽæ–­è·¯å™¨è·³é—¸çŠ¶æ€çš„æœåŠ¡ï¼Œç„¶åŽé€‰æ‹©ä¸€ä¸ªå¹¶å‘é‡æœ€å°çš„æœåŠ¡ï¼ˆ7ï¼‰ZoneAvoidanceRule å¤åˆåˆ¤æ–­serveræ‰€åœ¨åŒºåŸŸçš„æ€§èƒ½å’Œserverçš„å¯ç”¨æ€§é€‰æ‹©æœåŠ¡å™¨åœ¨çŸ¥é“äº†ä»¥ä¸Šè°ƒåº¦ç­–ç•¥è§„åˆ™åŽï¼Œé‚£æ€Žä¹ˆæ¥è‡ªå®šä¹‰åœ°ä½¿ç”¨è¿™äº›è§„åˆ™å‘¢ï¼Ÿéœ€æ±‚ï¼šåŸºäºŽå‰é¢è½®è¯¢è®¿é—®çš„è§„åˆ™æ”¹ä¸ºRandomRuleéšæœºè®¿é—®çš„è§„åˆ™ã€‚åªéœ€è¦ä¿®æ”¹å’Œé…ç½®microservicecloud-consumer-dept-80æ¨¡å—å³å¯ã€‚ï¼ˆ1ï¼‰åœ¨è¯¥æ¨¡å—ä¸‹æ–°å»ºè‡ªå®šä¹‰org.qcmoke.rules.MyRuleConfig.javaè§„åˆ™é…ç½®ç±»å®˜æ–¹æ–‡æ¡£æ˜Žç¡®ç»™å‡ºäº†è­¦å‘Šï¼šè¿™ä¸ªè‡ªå®šä¹‰è§„åˆ™é…ç½®ç±»ä¸èƒ½æ”¾åœ¨@ComponentScan(ä¹Ÿå°±æ˜¯å¯åŠ¨ç±»)æ‰€æ‰«æçš„å½“å‰åŒ…ä¸‹ä»¥åŠå­åŒ…ä¸‹ï¼Œå¦åˆ™æˆ‘ä»¬è‡ªå®šä¹‰çš„è¿™ä¸ªè§„åˆ™é…ç½®ç±»å°±ä¼šè¢«æ‰€æœ‰çš„Ribbonå®¢æˆ·ç«¯æ‰€å…±äº«ï¼Œä¹Ÿå°±æ˜¯è¯´æˆ‘ä»¬è¾¾ä¸åˆ°ç‰¹æ®ŠåŒ–å®šåˆ¶çš„ç›®çš„äº†ã€‚ä¸ºäº†é¿å…è‡ªå®šä¹‰çš„è§„åˆ™é…ç½®ç±»ä¼šè¢«æ‰€æœ‰çš„Ribbonå®¢æˆ·ç«¯æ‰€å…±äº«ï¼Œåªè¦ä¸åœ¨com.qcmokeè¿™ä¸ªåŒ…ä»¥åŠå­åŒ…ä¸‹å³å¯ã€‚æ•…æˆ‘ä»¬å¯ä»¥å®šä¹‰åœ¨org.qcmoke.rulesä¸‹å³å¯ã€‚1234567891011121314151617181920package org.qcmoke.rules;import com.netflix.loadbalancer.IRule;import com.netflix.loadbalancer.RandomRule;import org.springframework.context.annotation.Bean;import org.springframework.context.annotation.Configuration;/** * MyRuleConfig * * @author qcmoke * @date 2019/09/04 01:48 */@Configurationpublic class MyRuleConfig &#123; @Bean public IRule myRule() &#123; return new RandomRule();//Ribboné»˜è®¤æ˜¯è½®è¯¢ï¼Œæˆ‘è‡ªå®šä¹‰ä¸ºéšæœº &#125;&#125;ï¼ˆ4ï¼‰ä¿®æ”¹è¯¥æ¨¡å—ä¸‹çš„ä¸»å¯åŠ¨ç±»åœ¨å¯åŠ¨è¯¥å¾®æœåŠ¡çš„æ—¶å€™å°±èƒ½åŽ»åŠ è½½æˆ‘ä»¬çš„è‡ªå®šä¹‰Ribboné…ç½®ç±»ï¼Œä»Žè€Œä½¿é…ç½®ç”Ÿæ•ˆ12345678910111213141516171819202122package com.qcmoke;import org.qcmoke.rules.MyRuleConfig;import org.springframework.boot.SpringApplication;import org.springframework.boot.autoconfigure.SpringBootApplication;import org.springframework.cloud.netflix.eureka.EnableEurekaClient;import org.springframework.cloud.netflix.ribbon.RibbonClient;/** * MicroservicecloudConsumerDept80 * * @author qcmoke * @date 2019/09/02 04:37 */@SpringBootApplication@EnableEurekaClient@RibbonClient(name = "MICROSERVICECLOUD-DEPT", configuration = MyRuleConfig.class)public class MicroServiceCloudConsumerDept80 &#123; public static void main(String[] args) &#123; SpringApplication.run(MicroServiceCloudConsumerDept80.class, args); &#125;&#125;ï¼ˆ5ï¼‰æµ‹è¯•å…ˆå¯åŠ¨3ä¸ªeurekaé›†ç¾¤é…ç½®åŒºï¼Œç„¶åŽå¯åŠ¨3ä¸ªproviderï¼Œæœ€åŽå¯åŠ¨consumerã€‚è®¿é—® http://localhost/consumer/dept/listå‘çŽ°è®¿é—®çš„è§„åˆ™å·²ç»å˜æˆéšæœºçš„äº†ã€‚Â¶5.7 è‡ªå®šä¹‰è°ƒåº¦ç­–ç•¥è§„åˆ™åªéœ€è¦ç»§æ‰¿AbstractLoadBalancerRuleæŠ½è±¡ç±»å¹¶å®žçŽ°choose(ILoadBalancer lb, Object key)æ–¹æ³•å°±èƒ½å®žçŽ°è‡ªå®šä¹‰çš„è°ƒåº¦ç­–ç•¥ã€‚éœ€æ±‚ï¼šä¾æ—§è½®è¯¢ç­–ç•¥ï¼Œä½†æ˜¯åŠ ä¸Šæ–°éœ€æ±‚ï¼Œæ¯ä¸ªæœåŠ¡å™¨è¦æ±‚è¢«è°ƒç”¨5æ¬¡ã€‚ä¹Ÿå³ä»¥å‰æ˜¯æ¯ä¸ªæœåŠ¡è°ƒç”¨ä¸€æ¬¡åŽè°ƒç”¨ä¸‹ä¸€ä¸ªï¼ŒçŽ°åœ¨æ˜¯æ¯ä¸ªæœåŠ¡è°ƒç”¨5æ¬¡åŽè°ƒç”¨ä¸‹ä¸€ä¸ªã€‚ï¼ˆ1ï¼‰åˆ›å»ºè§„åˆ™ç±»org.qcmoke.rules.MyRule.java123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106package org.qcmoke.rules;import com.netflix.client.config.IClientConfig;import com.netflix.loadbalancer.AbstractLoadBalancerRule;import com.netflix.loadbalancer.ILoadBalancer;import com.netflix.loadbalancer.Server;import java.util.List;/** * è‡ªå®šä¹‰è°ƒåº¦ç­–ç•¥ * éœ€æ±‚ï¼š * ä¾æ—§è½®è¯¢ç­–ç•¥ï¼Œä½†æ˜¯åŠ ä¸Šæ–°éœ€æ±‚ï¼Œæ¯ä¸ªæœåŠ¡å™¨è¦æ±‚è¢«è°ƒç”¨5æ¬¡ã€‚ä¹Ÿå³ä»¥å‰æ˜¯æ¯ä¸ªæœåŠ¡è°ƒç”¨ä¸€æ¬¡åŽè°ƒç”¨ä¸‹ä¸€ä¸ªï¼ŒçŽ°åœ¨æ˜¯æ¯ä¸ªæœåŠ¡è°ƒç”¨5æ¬¡åŽè°ƒç”¨ä¸‹ä¸€ä¸ª * * @author qcmoke * @date 2019/09/04 10:43 */public class MyRule extends AbstractLoadBalancerRule &#123; /** * æ€»å…±è¢«è°ƒç”¨çš„æ¬¡æ•°ï¼Œç›®å‰è¦æ±‚æ¯ä¸ªæœåŠ¡è¢«è°ƒç”¨5æ¬¡ */ private int total = 0; /** * /å½“å‰æä¾›æœåŠ¡çš„åºå· */ private int currentIndex = 0; /** * è‡ªå®šä¹‰è°ƒåº¦ç­–ç•¥ * * @param lb å½“å‰Ribbonåˆ°EurekaèŽ·å–åˆ°çš„æœåŠ¡è´Ÿè½½åˆ—è¡¨ * @param key * @return è°ƒåº¦åˆ°çš„æœåŠ¡ */ public Server choose(ILoadBalancer lb, Object key) &#123; if (lb == null) &#123; return null; &#125; Server server = null; while (server == null) &#123; if (Thread.interrupted()) &#123; return null; &#125; List&lt;Server&gt; upList = lb.getReachableServers(); List&lt;Server&gt; allList = lb.getAllServers(); int serverCount = allList.size(); if (serverCount == 0) &#123; /* * No servers. End regardless of pass, because subsequent passes * only get more restrictive. */ return null; &#125;// int index = rand.nextInt(serverCount);// server = upList.get(index); if (total &lt; 5) &#123; server = upList.get(currentIndex); total++; &#125; else &#123; total = 0; currentIndex++; if (currentIndex &gt;= upList.size()) &#123; currentIndex = 0; &#125; &#125; if (server == null) &#123; /* * The only time this should happen is if the server list were * somehow trimmed. This is a transient condition. Retry after * yielding. */ Thread.yield(); continue; &#125; if (server.isAlive()) &#123; return (server); &#125; // Shouldn't actually happen.. but must be transient or a bug. server = null; Thread.yield(); &#125; return server; &#125; @Override public Server choose(Object key) &#123; return choose(getLoadBalancer(), key); &#125; @Override public void initWithNiwsConfig(IClientConfig clientConfig) &#123; &#125;&#125;ï¼ˆ2ï¼‰ä¿®æ”¹org.qcmoke.rules.MyRuleConfig.javaçš„è°ƒåº¦é…ç½®123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106package org.qcmoke.rules;import com.netflix.client.config.IClientConfig;import com.netflix.loadbalancer.AbstractLoadBalancerRule;import com.netflix.loadbalancer.ILoadBalancer;import com.netflix.loadbalancer.Server;import java.util.List;/** * è‡ªå®šä¹‰è°ƒåº¦ç­–ç•¥ * éœ€æ±‚ï¼š * ä¾æ—§è½®è¯¢ç­–ç•¥ï¼Œä½†æ˜¯åŠ ä¸Šæ–°éœ€æ±‚ï¼Œæ¯ä¸ªæœåŠ¡å™¨è¦æ±‚è¢«è°ƒç”¨5æ¬¡ã€‚ä¹Ÿå³ä»¥å‰æ˜¯æ¯ä¸ªæœåŠ¡è°ƒç”¨ä¸€æ¬¡åŽè°ƒç”¨ä¸‹ä¸€ä¸ªï¼ŒçŽ°åœ¨æ˜¯æ¯ä¸ªæœåŠ¡è°ƒç”¨5æ¬¡åŽè°ƒç”¨ä¸‹ä¸€ä¸ª * * @author qcmoke * @date 2019/09/04 10:43 */public class MyRule extends AbstractLoadBalancerRule &#123; /** * æ€»å…±è¢«è°ƒç”¨çš„æ¬¡æ•°ï¼Œç›®å‰è¦æ±‚æ¯ä¸ªæœåŠ¡è¢«è°ƒç”¨5æ¬¡ */ private int total = 0; /** * /å½“å‰æä¾›æœåŠ¡çš„åºå· */ private int currentIndex = 0; /** * è‡ªå®šä¹‰è°ƒåº¦ç­–ç•¥ * * @param lb å½“å‰Ribbonåˆ°EurekaèŽ·å–åˆ°çš„æœåŠ¡è´Ÿè½½åˆ—è¡¨ * @param key * @return è°ƒåº¦åˆ°çš„æœåŠ¡ */ public Server choose(ILoadBalancer lb, Object key) &#123; if (lb == null) &#123; return null; &#125; Server server = null; while (server == null) &#123; if (Thread.interrupted()) &#123; return null; &#125; List&lt;Server&gt; upList = lb.getReachableServers(); List&lt;Server&gt; allList = lb.getAllServers(); int serverCount = allList.size(); if (serverCount == 0) &#123; /* * No servers. End regardless of pass, because subsequent passes * only get more restrictive. */ return null; &#125;// int index = rand.nextInt(serverCount);// server = upList.get(index); if (total &lt; 5) &#123; server = upList.get(currentIndex); total++; &#125; else &#123; total = 0; currentIndex++; if (currentIndex &gt;= upList.size()) &#123; currentIndex = 0; &#125; &#125; if (server == null) &#123; /* * The only time this should happen is if the server list were * somehow trimmed. This is a transient condition. Retry after * yielding. */ Thread.yield(); continue; &#125; if (server.isAlive()) &#123; return (server); &#125; // Shouldn't actually happen.. but must be transient or a bug. server = null; Thread.yield(); &#125; return server; &#125; @Override public Server choose(Object key) &#123; return choose(getLoadBalancer(), key); &#125; @Override public void initWithNiwsConfig(IClientConfig clientConfig) &#123; &#125;&#125;ï¼ˆ3ï¼‰æµ‹è¯•å…ˆå¯åŠ¨3ä¸ªeurekaé›†ç¾¤é…ç½®åŒºï¼Œç„¶åŽå¯åŠ¨3ä¸ªproviderï¼Œæœ€åŽå¯åŠ¨consumerã€‚è®¿é—® http://localhost/consumer/dept/listÂ¶6. Feignè´Ÿè½½å‡è¡¡Â¶6.1 æ¦‚å¿µå®˜ç½‘è§£é‡Šï¼šhttp://projects.spring.io/spring-cloud/spring-cloud.html#spring-cloud-feignFeignæ˜¯ä¸€ä¸ªå£°æ˜Žå¼WebServiceå®¢æˆ·ç«¯ã€‚ä½¿ç”¨Feignèƒ½è®©ç¼–å†™Web Serviceå®¢æˆ·ç«¯æ›´åŠ ç®€å•, å®ƒçš„ä½¿ç”¨æ–¹æ³•æ˜¯å®šä¹‰ä¸€ä¸ªæŽ¥å£ï¼Œç„¶åŽåœ¨ä¸Šé¢æ·»åŠ æ³¨è§£ï¼ŒåŒæ—¶ä¹Ÿæ”¯æŒJAX-RSæ ‡å‡†çš„æ³¨è§£ã€‚Feignä¹Ÿæ”¯æŒå¯æ‹”æ’å¼çš„ç¼–ç å™¨å’Œè§£ç å™¨ã€‚Spring Cloudå¯¹Feignè¿›è¡Œäº†å°è£…ï¼Œä½¿å…¶æ”¯æŒäº†Spring MVCæ ‡å‡†æ³¨è§£å’ŒHttpMessageConvertersã€‚Feignå¯ä»¥ä¸ŽEurekaå’ŒRibbonç»„åˆä½¿ç”¨ä»¥æ”¯æŒè´Ÿè½½å‡è¡¡ã€‚Feignæ˜¯ä¸€ä¸ªå£°æ˜Žå¼çš„WebæœåŠ¡å®¢æˆ·ç«¯ï¼Œä½¿å¾—ç¼–å†™WebæœåŠ¡å®¢æˆ·ç«¯å˜å¾—éžå¸¸å®¹æ˜“ï¼Œåªéœ€è¦åˆ›å»ºä¸€ä¸ªæŽ¥å£ï¼Œç„¶åŽåœ¨ä¸Šé¢æ·»åŠ æ³¨è§£å³å¯ã€‚å‚è€ƒå®˜ç½‘ï¼šhttps://github.com/OpenFeign/feignFeignèƒ½å¹²ä»€ä¹ˆFeignæ—¨åœ¨ä½¿ç¼–å†™Java Httpå®¢æˆ·ç«¯å˜å¾—æ›´å®¹æ˜“ã€‚å‰é¢åœ¨ä½¿ç”¨Ribbon+RestTemplateæ—¶ï¼Œåˆ©ç”¨RestTemplateå¯¹httpè¯·æ±‚çš„å°è£…å¤„ç†ï¼Œå½¢æˆäº†ä¸€å¥—æ¨¡ç‰ˆåŒ–çš„è°ƒç”¨æ–¹æ³•ã€‚ä½†æ˜¯åœ¨å®žé™…å¼€å‘ä¸­ï¼Œç”±äºŽå¯¹æœåŠ¡ä¾èµ–çš„è°ƒç”¨å¯èƒ½ä¸æ­¢ä¸€å¤„ï¼Œå¾€å¾€ä¸€ä¸ªæŽ¥å£ä¼šè¢«å¤šå¤„è°ƒç”¨ï¼Œæ‰€ä»¥é€šå¸¸éƒ½ä¼šé’ˆå¯¹æ¯ä¸ªå¾®æœåŠ¡è‡ªè¡Œå°è£…ä¸€äº›å®¢æˆ·ç«¯ç±»æ¥åŒ…è£…è¿™äº›ä¾èµ–æœåŠ¡çš„è°ƒç”¨ã€‚æ‰€ä»¥ï¼ŒFeignåœ¨æ­¤åŸºç¡€ä¸Šåšäº†è¿›ä¸€æ­¥å°è£…ï¼Œç”±ä»–æ¥å¸®åŠ©æˆ‘ä»¬å®šä¹‰å’Œå®žçŽ°ä¾èµ–æœåŠ¡æŽ¥å£çš„å®šä¹‰ã€‚åœ¨Feignçš„å®žçŽ°ä¸‹ï¼Œæˆ‘ä»¬åªéœ€åˆ›å»ºä¸€ä¸ªæŽ¥å£å¹¶ä½¿ç”¨æ³¨è§£çš„æ–¹å¼æ¥é…ç½®å®ƒ(ä»¥å‰æ˜¯DaoæŽ¥å£ä¸Šé¢æ ‡æ³¨Mapperæ³¨è§£,çŽ°åœ¨æ˜¯ä¸€ä¸ªå¾®æœåŠ¡æŽ¥å£ä¸Šé¢æ ‡æ³¨ä¸€ä¸ªFeignæ³¨è§£å³å¯)ï¼Œå³å¯å®Œæˆå¯¹æœåŠ¡æä¾›æ–¹çš„æŽ¥å£ç»‘å®šï¼Œç®€åŒ–äº†ä½¿ç”¨Spring cloud Ribbonæ—¶ï¼Œè‡ªåŠ¨å°è£…æœåŠ¡è°ƒç”¨å®¢æˆ·ç«¯çš„å¼€å‘é‡ã€‚Feigné›†æˆäº†Ribbonåˆ©ç”¨Ribbonç»´æŠ¤äº†MicroServiceCloud-Deptçš„æœåŠ¡åˆ—è¡¨ä¿¡æ¯ï¼Œå¹¶ä¸”é€šè¿‡è½®è¯¢å®žçŽ°äº†å®¢æˆ·ç«¯çš„è´Ÿè½½å‡è¡¡ã€‚è€Œä¸ŽRibbonä¸åŒçš„æ˜¯ï¼Œé€šè¿‡feignåªéœ€è¦å®šä¹‰æœåŠ¡ç»‘å®šæŽ¥å£ä¸”ä»¥å£°æ˜Žå¼çš„æ–¹æ³•ï¼Œä¼˜é›…è€Œç®€å•çš„å®žçŽ°äº†æœåŠ¡è°ƒç”¨ç®€å•çš„è¯´ï¼šFeignæ˜¯Ribbonçš„å†å°è£…ã€‚Â¶6.2 ä½¿ç”¨æ­¥éª¤ï¼ˆ1ï¼‰æ–°å»ºmicroservicecloud-consumer-dept-feignæ¨¡å—ï¼ˆ2ï¼‰å¤åˆ¶microservicecloud-consumer-dept-80æ¨¡å—çš„srcå†…å®¹åˆ°microservicecloud-consumer-dept-feignçš„srcä¸­ï¼ˆ3ï¼‰è¯¥æ¨¡å—çš„pom.xmlé…ç½®å¤åˆ¶microservicecloud-consumer-dept-80æ¨¡å—çš„ä¾èµ–å¹¶é¢å¤–æ·»åŠ Feignä¾èµ–12345&lt;!--Feign--&gt;&lt;dependency&gt; &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt; &lt;artifactId&gt;spring-cloud-starter-feign&lt;/artifactId&gt;&lt;/dependency&gt;æ³¨é‡ŠæŽ‰Ribbonï¼ˆå› ä¸ºFeignä¾èµ–ä¸­å·²ç»åŒ…å«äº†Ribbonï¼‰1234567&lt;!-- Ribbonç›¸å…³ --&gt;&lt;!-- &lt;dependency&gt; &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt; &lt;artifactId&gt;spring-cloud-starter-ribbon&lt;/artifactId&gt;&lt;/dependency&gt;--&gt;å…¨ï¼š1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"&gt; &lt;parent&gt; &lt;artifactId&gt;microservicecloud&lt;/artifactId&gt; &lt;groupId&gt;com.qcmoke&lt;/groupId&gt; &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt; &lt;/parent&gt; &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt; &lt;artifactId&gt;microservicecloud-consumer-dept-feign&lt;/artifactId&gt; &lt;description&gt;éƒ¨é—¨å¾®æœåŠ¡æ¶ˆè´¹è€…&lt;/description&gt; &lt;dependencies&gt; &lt;dependency&gt;&lt;!-- è‡ªå·±å®šä¹‰çš„api --&gt; &lt;groupId&gt;com.qcmoke&lt;/groupId&gt; &lt;artifactId&gt;microservicecloud-api&lt;/artifactId&gt; &lt;version&gt;$&#123;project.version&#125;&lt;/version&gt; &lt;/dependency&gt; &lt;!--Eureka Client--&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt; &lt;artifactId&gt;spring-cloud-starter-eureka&lt;/artifactId&gt; &lt;/dependency&gt; &lt;!-- Ribbonç›¸å…³ --&gt; &lt;!-- &lt;dependency&gt; &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt; &lt;artifactId&gt;spring-cloud-starter-ribbon&lt;/artifactId&gt; &lt;/dependency&gt;--&gt; &lt;!--Feign--&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt; &lt;artifactId&gt;spring-cloud-starter-feign&lt;/artifactId&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt; &lt;artifactId&gt;spring-cloud-starter-config&lt;/artifactId&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt; &lt;/dependency&gt; &lt;!-- ä¿®æ”¹åŽç«‹å³ç”Ÿæ•ˆï¼Œçƒ­éƒ¨ç½² --&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework&lt;/groupId&gt; &lt;artifactId&gt;springloaded&lt;/artifactId&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt; &lt;/dependency&gt; &lt;/dependencies&gt;&lt;/project&gt;ï¼ˆ4ï¼‰çˆ¶é¡¹ç›®æ·»åŠ è¯¥å­æ¨¡å—1234567891011&lt;modules&gt; &lt;module&gt;microservicecloud-api&lt;/module&gt; &lt;module&gt;microservicecloud-provider-dept-8001&lt;/module&gt; &lt;module&gt;microservicecloud-consumer-dept-80&lt;/module&gt; &lt;module&gt;microservicecloud-eureka-7001&lt;/module&gt; &lt;module&gt;microservicecloud-eureka-7002&lt;/module&gt; &lt;module&gt;microservicecloud-eureka-7003&lt;/module&gt; &lt;module&gt;microservicecloud-provider-dept-8002&lt;/module&gt; &lt;module&gt;microservicecloud-provider-dept-8003&lt;/module&gt; &lt;module&gt;microservicecloud-consumer-dept-feign&lt;/module&gt;&lt;/modules&gt;ï¼ˆ5ï¼‰ä¸ºäº†Feignèƒ½åœ¨å¤šä¸ªå®¢æˆ·ç«¯ä¸­éƒ½èƒ½é€šç”¨ï¼Œæ‰€ä»¥æŠŠFeignæœåŠ¡å®šä¹‰åˆ°microservicecloud-apiæ¨¡å—ä¸­ã€‚ç»™microservicecloud-apiå·¥ç¨‹çš„pom.xmlæ·»åŠ å¦‚ä¸‹ä¾èµ–1234&lt;dependency&gt; &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt; &lt;artifactId&gt;spring-cloud-starter-feign&lt;/artifactId&gt;&lt;/dependency&gt;å…¨ï¼š1234567891011121314151617181920212223242526272829&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"&gt; &lt;!-- å­ç±»é‡Œé¢æ˜¾ç¤ºå£°æ˜Žæ‰èƒ½æœ‰æ˜Žç¡®çš„ç»§æ‰¿è¡¨çŽ° --&gt; &lt;parent&gt; &lt;artifactId&gt;microservicecloud&lt;/artifactId&gt; &lt;groupId&gt;com.qcmoke&lt;/groupId&gt; &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt; &lt;/parent&gt; &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt; &lt;!-- å½“å‰Moduleæˆ‘è‡ªå·±å«ä»€ä¹ˆåå­— --&gt; &lt;artifactId&gt;microservicecloud-api&lt;/artifactId&gt; &lt;dependencies&gt;&lt;!-- å½“å‰Moduleéœ€è¦ç”¨åˆ°çš„jaråŒ…ï¼ŒæŒ‰è‡ªå·±éœ€æ±‚æ·»åŠ ï¼Œå¦‚æžœçˆ¶ç±»å·²ç»åŒ…å«äº†ï¼Œå¯ä»¥ä¸ç”¨å†™ç‰ˆæœ¬å· --&gt; &lt;dependency&gt; &lt;groupId&gt;org.projectlombok&lt;/groupId&gt; &lt;artifactId&gt;lombok&lt;/artifactId&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt; &lt;artifactId&gt;spring-cloud-starter-feign&lt;/artifactId&gt; &lt;/dependency&gt; &lt;/dependencies&gt; &lt;/project&gt;ï¼ˆ6ï¼‰åœ¨microservicecloud-apiæ¨¡å—ä¸­æ–°å»ºcom.qcmoke.service.DeptClientService.javaæŽ¥å£å¹¶æ–°å¢žæ³¨è§£@FeignClient12345678910111213141516171819202122232425262728package com.qcmoke.service;import com.qcmoke.entities.Dept;import org.springframework.cloud.netflix.feign.FeignClient;import org.springframework.web.bind.annotation.PathVariable;import org.springframework.web.bind.annotation.RequestMapping;import org.springframework.web.bind.annotation.RequestMethod;import java.util.List;/** * DeptClientService * é’ˆå¯¹äºŽMICROSERVICECLOUD-DEPTæœåŠ¡çš„Feign * * @author qcmoke * @date 2019/09/04 13:49 */@FeignClient(value = "MICROSERVICECLOUD-DEPT")public interface DeptClientService &#123; @RequestMapping(value = "/dept/get/&#123;id&#125;", method = RequestMethod.GET) public Dept get(@PathVariable("id") long id); @RequestMapping(value = "/dept/list", method = RequestMethod.GET) public List&lt;Dept&gt; list(); @RequestMapping(value = "/dept/add", method = RequestMethod.POST) public boolean add(Dept dept);&#125;ï¼ˆ7ï¼‰ä¿®æ”¹microservicecloud-consumer-dept-feignæ¨¡å—çš„com.qcmoke.controller.DeptConsumerController.javaï¼Œè°ƒç”¨ä¸Šä¸€æ­¥æ–°å»ºçš„DeptClientServiceæŽ¥å£1234567891011121314151617181920212223242526272829303132333435363738package com.qcmoke.controller;import com.qcmoke.entities.Dept;import com.qcmoke.service.DeptClientService;import org.springframework.beans.factory.annotation.Autowired;import org.springframework.web.bind.annotation.PathVariable;import org.springframework.web.bind.annotation.RequestMapping;import org.springframework.web.bind.annotation.RestController;import java.util.List;/** * DeptConsumerController * * @author qcmoke * @date 2019/09/02 04:34 */@RestControllerpublic class DeptConsumerController &#123; @Autowired private DeptClientService service; @RequestMapping(value = "/consumer/dept/get/&#123;id&#125;") public Dept get(@PathVariable("id") Long id) &#123; return this.service.get(id); &#125; @RequestMapping(value = "/consumer/dept/list") public List&lt;Dept&gt; list() &#123; return this.service.list(); &#125; @RequestMapping(value = "/consumer/dept/add") public Object add(Dept dept) &#123; return this.service.add(dept); &#125;&#125;ï¼ˆ8ï¼‰ç»™microservicecloud-consumer-dept-feignæ¨¡å—çš„ä¸»å¯åŠ¨ç±»æ·»åŠ @EnableFeignClients12345678910111213141516171819202122package com.qcmoke;import org.springframework.boot.SpringApplication;import org.springframework.boot.autoconfigure.SpringBootApplication;import org.springframework.cloud.netflix.eureka.EnableEurekaClient;import org.springframework.cloud.netflix.feign.EnableFeignClients;/** * MicroservicecloudConsumerDept80 * * @author qcmoke * @date 2019/09/02 04:37 */@SpringBootApplication@EnableEurekaClient//@RibbonClient(name = "MICROSERVICECLOUD-DEPT", configuration = MyRuleConfig.class)@EnableFeignClients(basePackages = &#123;"com.qcmoke"&#125;)public class MicroServiceCloudConsumerDept80 &#123; public static void main(String[] args) &#123; SpringApplication.run(MicroServiceCloudConsumerDept80.class, args); &#125;&#125;åˆ é™¤com.qcmoke.config.ConfigBean.javaå’Œorg.qcmoke.rulesåŒ…ï¼ˆ9ï¼‰æµ‹è¯•å…ˆå¯åŠ¨3ä¸ªeurekaé›†ç¾¤ï¼Œç„¶åŽå¯åŠ¨3ä¸ªéƒ¨é—¨å¾®æœåŠ¡8001/8002/8003ï¼Œæœ€åŽå¯åŠ¨Feignã€‚è®¿é—®http://localhost/consumer/dept/listå‘çŽ°å®žçŽ°äº†Ribbon+RestTemplateçš„æ•ˆæžœã€‚åªæ˜¯FeignçœåŽ»äº†RestTemplateè°ƒç”¨çš„å¤æ‚è¿‡ç¨‹ï¼Œè®©com.qcmoke.controller.DeptConsumerControllerï¼ˆRibbonï¼‰ä¹Ÿå®žçŽ°äº†é¢å‘æŽ¥å£ç¼–ç¨‹ã€‚Â¶7.Hystrixæ–­è·¯å™¨Â¶7.1 åˆ†å¸ƒå¼ç³»ç»Ÿé¢ä¸´çš„é—®é¢˜å¤æ‚åˆ†å¸ƒå¼ä½“ç³»ç»“æž„ä¸­çš„åº”ç”¨ç¨‹åºæœ‰æ•°åä¸ªä¾èµ–å…³ç³»ï¼Œæ¯ä¸ªä¾èµ–å…³ç³»åœ¨æŸäº›æ—¶å€™å°†ä¸å¯é¿å…åœ°å¤±è´¥ã€‚æœåŠ¡é›ªå´©åœ¨å¾®æœåŠ¡çš„æž¶æž„ä¸­ï¼ŒæœåŠ¡é—´é€šå¸¸ä¼šå½¢æˆç›¸äº’ä¾èµ–çš„å…³ç³»ï¼Œæ¯”å¦‚çŽ°åœ¨æœ‰ä¸‰ä¸ªå¾®æœåŠ¡èŠ‚ç‚¹ï¼šAï¼ŒBå’ŒCï¼ŒBä¸ºAçš„æ¶ˆè´¹è€…ï¼ŒCä¸ºBçš„æ¶ˆè´¹è€…ï¼Œå°±æ˜¯æ‰€è°“çš„â€œæ‰‡å‡ºâ€ã€‚å‡å¦‚ç”±äºŽç½‘ç»œæ³¢åŠ¨æˆ–è€…AæœåŠ¡è‡ªèº«æ•…éšœï¼Œå¯¼è‡´Bè°ƒç”¨AæœåŠ¡çš„çº¿ç¨‹è¢«æŒ‚èµ·è¿›å…¥é•¿æ—¶é—´çš„ç­‰å¾…ã€‚åœ¨é«˜å¹¶å‘çš„æƒ…å†µä¸‹å¯èƒ½å¯¼è‡´Bçš„èµ„æºè¢«è€—ç«­éšä¹‹å´©æºƒï¼Œä»Žè€Œå¯¼è‡´CæœåŠ¡ä¹Ÿä¸å¯ç”¨ï¼Œè¿›è€Œå¼•èµ·ç³»ç»Ÿå´©æºƒï¼Œæ‰€è°“çš„â€œé›ªå´©æ•ˆåº”â€ã€‚è¿™ç§è¿žçŽ¯å¼çš„é›ªå´©æ•ˆåº”åœ¨å¾®æœåŠ¡ä¸­è¾ƒä¸ºå¸¸è§ï¼Œä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼ŒæœåŠ¡ç†”æ–­æŠ€æœ¯åº”è¿è€Œå‡ºã€‚ç†”æ–­ä¸€è¯æ¥è‡ªç”µè·¯å­¦ï¼ŒæŒ‡çš„æ˜¯ç”µè·¯åœ¨å‡ºçŽ°çŸ­è·¯çŠ¶å†µæ—¶ï¼Œâ€œæ–­è·¯å™¨â€èƒ½å¤ŸåŠæ—¶åœ°åˆ‡æ–­æ•…éšœç”µè·¯ï¼Œé¿å…ç”µè·¯è¿‡è½½å‘çƒ­å¼•å‘ç«ç¾ã€‚ç±»ä¼¼çš„ï¼Œå¾®æœåŠ¡æž¶æž„ä¸­çš„æ–­è·¯å™¨èƒ½å¤ŸåŠæ—¶åœ°å‘çŽ°æ•…éšœæœåŠ¡ï¼Œå¹¶å‘æœåŠ¡è°ƒç”¨æ–¹è¿”å›žé”™è¯¯å“åº”ï¼Œè€Œä¸æ˜¯é•¿æ—¶é—´çš„ç­‰å¾…ã€‚Spring Cloud Hystrixåœ¨Hystrixï¼ˆåˆæ˜¯ä¸€æ¬¾ç”±Netflixå¼€å‘çš„å¼€æºè½¯ä»¶ï¼ŒGithubåœ°å€https://github.com/Netflix/Hystrixï¼‰çš„åŸºç¡€ä¸Šè¿›è¡Œäº†å°è£…ï¼Œæä¾›äº†æœåŠ¡ç†”æ–­ï¼ŒæœåŠ¡é™çº§ï¼Œçº¿ç¨‹éš”ç¦»ï¼Œé™æµæ¨¡å¼ç­‰åŠŸèƒ½ï¼Œé€šè¿‡è¿™äº›åŠŸèƒ½å¯ä»¥æä¾›æœåŠ¡çš„å®¹é”™çŽ‡ã€‚å¤‡æ³¨ï¼šä¸€èˆ¬æƒ…å†µå¯¹äºŽæœåŠ¡ä¾èµ–çš„ä¿æŠ¤ä¸»è¦æœ‰4ç§è§£å†³æ–¹æ¡ˆ:ï¼ˆ1ï¼‰ç†”æ–­æ¨¡å¼ï¼š è¿™ç§æ¨¡å¼ä¸»è¦æ˜¯å‚è€ƒç”µè·¯ç†”æ–­ï¼Œå¦‚æžœä¸€æ¡çº¿è·¯ç”µåŽ‹è¿‡é«˜ï¼Œä¿é™©ä¸ä¼šç†”æ–­ï¼Œé˜²æ­¢ç«ç¾ã€‚æ”¾åˆ°æˆ‘ä»¬çš„ç³»ç»Ÿä¸­ï¼Œå¦‚æžœæŸä¸ªç›®æ ‡æœåŠ¡è°ƒç”¨æ…¢æˆ–è€…æœ‰å¤§é‡è¶…æ—¶ï¼Œæ­¤æ—¶ï¼Œç†”æ–­è¯¥æœåŠ¡çš„è°ƒç”¨ï¼Œå¯¹äºŽåŽç»­è°ƒç”¨è¯·æ±‚ï¼Œä¸åœ¨ç»§ç»­è°ƒç”¨ç›®æ ‡æœåŠ¡ï¼Œç›´æŽ¥è¿”å›žï¼Œå¿«é€Ÿé‡Šæ”¾èµ„æºã€‚å¦‚æžœç›®æ ‡æœåŠ¡æƒ…å†µå¥½è½¬åˆ™æ¢å¤è°ƒç”¨ã€‚ï¼ˆ2ï¼‰éš”ç¦»æ¨¡å¼ï¼š è¿™ç§æ¨¡å¼å°±åƒå¯¹ç³»ç»Ÿè¯·æ±‚æŒ‰ç±»åž‹åˆ’åˆ†æˆä¸€ä¸ªä¸ªå°å²›çš„ä¸€æ ·ï¼Œå½“æŸä¸ªå°å²›è¢«ç«å°‘å…‰äº†ï¼Œä¸ä¼šå½±å“åˆ°å…¶ä»–çš„å°å²›ã€‚ä¾‹å¦‚å¯ä»¥å¯¹ä¸åŒç±»åž‹çš„è¯·æ±‚ä½¿ç”¨çº¿ç¨‹æ± æ¥èµ„æºéš”ç¦»ï¼Œæ¯ç§ç±»åž‹çš„è¯·æ±‚äº’ä¸å½±å“ï¼Œå¦‚æžœä¸€ç§ç±»åž‹çš„è¯·æ±‚çº¿ç¨‹èµ„æºè€—å°½ï¼Œåˆ™å¯¹åŽç»­çš„è¯¥ç±»åž‹è¯·æ±‚ç›´æŽ¥è¿”å›žï¼Œä¸å†è°ƒç”¨åŽç»­èµ„æºã€‚è¿™ç§æ¨¡å¼ä½¿ç”¨åœºæ™¯éžå¸¸å¤šï¼Œä¾‹å¦‚å°†ä¸€ä¸ªæœåŠ¡æ‹†å¼€ï¼Œå¯¹äºŽé‡è¦çš„æœåŠ¡ä½¿ç”¨å•ç‹¬æœåŠ¡å™¨æ¥éƒ¨ç½²ï¼Œå†æˆ–è€…å…¬å¸æœ€è¿‘æŽ¨å¹¿çš„å¤šä¸­å¿ƒã€‚ï¼ˆ3ï¼‰é™æµæ¨¡å¼ï¼š ä¸Šè¿°çš„ç†”æ–­æ¨¡å¼å’Œéš”ç¦»æ¨¡å¼éƒ½å±žäºŽå‡ºé”™åŽçš„å®¹é”™å¤„ç†æœºåˆ¶ï¼Œè€Œé™æµæ¨¡å¼åˆ™å¯ä»¥ç§°ä¸ºé¢„é˜²æ¨¡å¼ã€‚é™æµæ¨¡å¼ä¸»è¦æ˜¯æå‰å¯¹å„ä¸ªç±»åž‹çš„è¯·æ±‚è®¾ç½®æœ€é«˜çš„QPSé˜ˆå€¼ï¼Œè‹¥é«˜äºŽè®¾ç½®çš„é˜ˆå€¼åˆ™å¯¹è¯¥è¯·æ±‚ç›´æŽ¥è¿”å›žï¼Œä¸å†è°ƒç”¨åŽç»­èµ„æºã€‚è¿™ç§æ¨¡å¼ä¸èƒ½è§£å†³æœåŠ¡ä¾èµ–çš„é—®é¢˜ï¼Œåªèƒ½è§£å†³ç³»ç»Ÿæ•´ä½“èµ„æºåˆ†é…é—®é¢˜ï¼Œå› ä¸ºæ²¡æœ‰è¢«é™æµçš„è¯·æ±‚ä¾ç„¶æœ‰å¯èƒ½é€ æˆé›ªå´©æ•ˆåº”ã€‚ï¼ˆ4ï¼‰æœåŠ¡é™çº§ï¼š å…¶å®žå°±æ˜¯çº¿ç¨‹æ± ä¸­å•ä¸ªçº¿ç¨‹éšœå¤„ç†ï¼Œé˜²æ­¢å•ä¸ªçº¿ç¨‹è¯·æ±‚æ—¶é—´å¤ªé•¿ï¼Œå¯¼è‡´èµ„æºé•¿æœŸè¢«å æœ‰è€Œå¾—ä¸åˆ°é‡Šæ”¾ï¼Œä»Žè€Œå¯¼è‡´çº¿ç¨‹æ± è¢«å¿«é€Ÿå ç”¨å®Œï¼Œå¯¼è‡´æœåŠ¡å´©æºƒã€‚Hystrixèƒ½è§£å†³å¦‚ä¸‹é—®é¢˜ï¼š1.è¯·æ±‚è¶…æ—¶é™çº§ï¼Œçº¿ç¨‹èµ„æºä¸è¶³é™çº§ï¼Œé™çº§ä¹‹åŽå¯ä»¥è¿”å›žè‡ªå®šä¹‰æ•°æ®2.çº¿ç¨‹æ± éš”ç¦»é™çº§ï¼Œåˆ†å¸ƒå¼æœåŠ¡å¯ä»¥é’ˆå¯¹ä¸åŒçš„æœåŠ¡ä½¿ç”¨ä¸åŒçš„çº¿ç¨‹æ± ï¼Œä»Žè€Œäº’ä¸å½±å“3.è‡ªåŠ¨è§¦å‘é™çº§ä¸Žæ¢å¤4.å®žçŽ°è¯·æ±‚ç¼“å­˜å’Œè¯·æ±‚åˆå¹¶Â¶7.2 æœåŠ¡ç†”æ–­ç†”æ–­æœºåˆ¶æ˜¯åº”å¯¹é›ªå´©æ•ˆåº”çš„ä¸€ç§å¾®æœåŠ¡é“¾è·¯ä¿æŠ¤æœºåˆ¶ã€‚å½“æ‰‡å‡ºé“¾è·¯çš„æŸä¸ªå¾®æœåŠ¡ä¸å¯ç”¨æˆ–è€…å“åº”æ—¶é—´å¤ªé•¿æ—¶ï¼Œä¼šè¿›è¡ŒæœåŠ¡çš„é™çº§ï¼Œè¿›è€Œç†”æ–­è¯¥èŠ‚ç‚¹å¾®æœåŠ¡çš„è°ƒç”¨ï¼Œå¿«é€Ÿè¿”å›ž&quot;é”™è¯¯&quot;çš„å“åº”ä¿¡æ¯ã€‚å½“æ£€æµ‹åˆ°è¯¥èŠ‚ç‚¹å¾®æœåŠ¡è°ƒç”¨å“åº”æ­£å¸¸åŽæ¢å¤è°ƒç”¨é“¾è·¯ã€‚åœ¨SpringCloudæ¡†æž¶é‡Œç†”æ–­æœºåˆ¶é€šè¿‡Hystrixå®žçŽ°ã€‚Hystrixä¼šç›‘æŽ§å¾®æœåŠ¡é—´è°ƒç”¨çš„çŠ¶å†µï¼Œå½“å¤±è´¥çš„è°ƒç”¨åˆ°ä¸€å®šé˜ˆå€¼ï¼Œç¼ºçœæ˜¯5ç§’å†…20æ¬¡è°ƒç”¨å¤±è´¥å°±ä¼šå¯åŠ¨ç†”æ–­æœºåˆ¶ã€‚ç†”æ–­æœºåˆ¶çš„æ³¨è§£æ˜¯@HystrixCommandã€‚ï¼ˆ1ï¼‰å‚è€ƒmicroservicecloud-provider-dept-8001ï¼Œæ–°å»ºmicroservicecloud-provider-dept-hystrix-8001æ¨¡å—åˆ›å»ºå®ŒæˆåŽåœ¨çˆ¶å·¥ç¨‹çš„pomæ–‡ä»¶çš„&lt;project&gt;æ ‡ç­¾ä¸‹æ·»åŠ å¦‚ä¸‹ä»£ç ã€‚ï¼ˆä¸€èˆ¬IDEå·¥å…·ä¼šè‡ªåŠ¨æ·»åŠ ï¼‰123456789101112&lt;modules&gt; &lt;module&gt;microservicecloud-api&lt;/module&gt; &lt;module&gt;microservicecloud-provider-dept-8001&lt;/module&gt; &lt;module&gt;microservicecloud-consumer-dept-80&lt;/module&gt; &lt;module&gt;microservicecloud-eureka-7001&lt;/module&gt; &lt;module&gt;microservicecloud-eureka-7002&lt;/module&gt; &lt;module&gt;microservicecloud-eureka-7003&lt;/module&gt; &lt;module&gt;microservicecloud-provider-dept-8002&lt;/module&gt; &lt;module&gt;microservicecloud-provider-dept-8003&lt;/module&gt; &lt;module&gt;microservicecloud-consumer-dept-feign&lt;/module&gt; &lt;module&gt;microservicecloud-provider-dept-hystrix-8001&lt;/module&gt;&lt;/modules&gt;ï¼ˆ2ï¼‰å¤åˆ¶microservicecloud-provider-dept-8001 srcé‡Œçš„å†…å®¹åˆ°microservicecloud-provider-dept-hystrix-8001çš„srcé‡Œã€‚ï¼ˆ3ï¼‰microservicecloud-provider-dept-hystrix-8001çš„pom.xmlæ–°å¢žä¾èµ–12345 &lt;!-- hystrix --&gt;&lt;dependency&gt; &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt; &lt;artifactId&gt;spring-cloud-starter-hystrix&lt;/artifactId&gt;&lt;/dependency&gt;å…¨ï¼š123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"&gt; &lt;parent&gt; &lt;artifactId&gt;microservicecloud&lt;/artifactId&gt; &lt;groupId&gt;com.qcmoke&lt;/groupId&gt; &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt; &lt;/parent&gt; &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt; &lt;artifactId&gt;microservicecloud-provider-dept-hystrix-8001&lt;/artifactId&gt; &lt;dependencies&gt; &lt;!-- hystrix --&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt; &lt;artifactId&gt;spring-cloud-starter-hystrix&lt;/artifactId&gt; &lt;/dependency&gt; &lt;dependency&gt;&lt;!-- å¼•å…¥è‡ªå·±å®šä¹‰çš„å…¶ä»–æ¨¡å—ï¼ˆmicroservicecloud-apiï¼‰ --&gt; &lt;groupId&gt;com.qcmoke&lt;/groupId&gt; &lt;artifactId&gt;microservicecloud-api&lt;/artifactId&gt; &lt;version&gt;$&#123;project.version&#125;&lt;/version&gt; &lt;/dependency&gt; &lt;!-- å°†å¾®æœåŠ¡providerä¾§æ³¨å†Œè¿›eureka --&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt; &lt;artifactId&gt;spring-cloud-starter-eureka&lt;/artifactId&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt; &lt;artifactId&gt;spring-cloud-starter-config&lt;/artifactId&gt; &lt;/dependency&gt; &lt;!-- actuatorç›‘æŽ§ä¿¡æ¯å®Œå–„ --&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;junit&lt;/groupId&gt; &lt;artifactId&gt;junit&lt;/artifactId&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;mysql&lt;/groupId&gt; &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;com.alibaba&lt;/groupId&gt; &lt;artifactId&gt;druid&lt;/artifactId&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;ch.qos.logback&lt;/groupId&gt; &lt;artifactId&gt;logback-core&lt;/artifactId&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.mybatis.spring.boot&lt;/groupId&gt; &lt;artifactId&gt;mybatis-spring-boot-starter&lt;/artifactId&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-jetty&lt;/artifactId&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt; &lt;/dependency&gt; &lt;!-- ä¿®æ”¹åŽç«‹å³ç”Ÿæ•ˆï¼Œçƒ­éƒ¨ç½² --&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework&lt;/groupId&gt; &lt;artifactId&gt;springloaded&lt;/artifactId&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt; &lt;/dependency&gt; &lt;/dependencies&gt;&lt;/project&gt;ï¼ˆ4ï¼‰ä¿®æ”¹application.yml1234567891011121314151617181920212223242526272829303132333435363738server: port: 8001mybatis: config-location: classpath:mybatis/mybatis.cfg.xml # mybatisé…ç½®æ–‡ä»¶æ‰€åœ¨è·¯å¾„ type-aliases-package: com.qcmoke.entities # æ‰€æœ‰Entityåˆ«åç±»æ‰€åœ¨åŒ… mapper-locations: - classpath:mybatis/mapper/**/*.xml # mapperæ˜ å°„æ–‡ä»¶spring: application: name: microservicecloud-dept #å¯¹å¤–æš´éœ²çš„å¾®æœåŠ¡çš„åç§°ï¼ˆé‡ç‚¹ï¼‰ datasource: type: com.alibaba.druid.pool.DruidDataSource # å½“å‰æ•°æ®æºæ“ä½œç±»åž‹ driver-class-name: org.gjt.mm.mysql.Driver # mysqlé©±åŠ¨åŒ… url: jdbc:mysql://localhost:3306/cloudDB01 # æ•°æ®åº“åç§° username: root password: 123456 dbcp2: min-idle: 5 # æ•°æ®åº“è¿žæŽ¥æ± çš„æœ€å°ç»´æŒè¿žæŽ¥æ•° initial-size: 5 # åˆå§‹åŒ–è¿žæŽ¥æ•° max-total: 5 # æœ€å¤§è¿žæŽ¥æ•° max-wait-millis: 200 # ç­‰å¾…è¿žæŽ¥èŽ·å–çš„æœ€å¤§è¶…æ—¶æ—¶é—´eureka: client: #å®¢æˆ·ç«¯æ³¨å†Œè¿›eurekaæœåŠ¡åˆ—è¡¨å†… service-url: defaultZone: http://eureka7001.com:7001/eureka/,http://eureka7002.com:7002/eureka/,http://eureka7003.com:7003/eureka/ instance: instance-id: microservicecloud-dept8001-hystrix #è‡ªå®šä¹‰æœåŠ¡åç§°ä¿¡æ¯ prefer-ip-address: true #è®¿é—®è·¯å¾„å¯ä»¥æ˜¾ç¤ºIPåœ°å€info: app.name: microservicecloud company.name: example.com build.artifactId: $&#123;project.artifactId&#125; build.version: $&#123;project.version&#125;ï¼ˆ5ï¼‰ä¿®æ”¹ä¸»å¯åŠ¨ç±»ä¸ºDeptProviderHystrix8001App.javaï¼Œå¹¶æ·»åŠ @EnableCircuitBreakeræ³¨è§£123456789101112131415161718192021222324package com.qcmoke;import org.springframework.boot.SpringApplication;import org.springframework.boot.autoconfigure.SpringBootApplication;import org.springframework.cloud.client.circuitbreaker.EnableCircuitBreaker;import org.springframework.cloud.client.discovery.EnableDiscoveryClient;import org.springframework.cloud.netflix.eureka.EnableEurekaClient;/** * microservicecloud-provider-dept-8001æ¨¡å—çš„å¯åŠ¨ç±» * * @author qcmoke * @date 2019/09/02 03:34 */@SpringBootApplication@EnableEurekaClient //æœ¬æœåŠ¡å¯åŠ¨åŽä¼šè‡ªåŠ¨æ³¨å†Œè¿›eurekaæœåŠ¡ä¸­@EnableDiscoveryClient //æœåŠ¡å‘çŽ°@EnableCircuitBreaker//å¯¹hystrixRç†”æ–­æœºåˆ¶çš„æ”¯æŒpublic class DeptProviderHystrix8001App &#123; public static void main(String[] args) &#123; SpringApplication.run(DeptProviderHystrix8001App.class, args); &#125;&#125;ï¼ˆ6ï¼‰ä¿®æ”¹DeptController.javaä¸€æ—¦è°ƒç”¨æœåŠ¡æ–¹æ³•å¤±è´¥å¹¶æŠ›å‡ºäº†é”™è¯¯ä¿¡æ¯åŽï¼Œä¼šè‡ªåŠ¨è°ƒç”¨@HystrixCommandæ ‡æ³¨å¥½çš„fallbackMethodè°ƒç”¨ç±»ä¸­çš„æŒ‡å®šæ–¹æ³•12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849package com.qcmoke.controller;import com.netflix.hystrix.contrib.javanica.annotation.HystrixCommand;import com.qcmoke.entities.Dept;import com.qcmoke.service.DeptService;import lombok.extern.slf4j.Slf4j;import org.springframework.beans.factory.annotation.Autowired;import org.springframework.web.bind.annotation.PathVariable;import org.springframework.web.bind.annotation.RequestMapping;import org.springframework.web.bind.annotation.RequestMethod;import org.springframework.web.bind.annotation.RestController;/** * DeptController * * @author qcmoke * @date 2019/09/02 03:32 */@RestController@Slf4jpublic class DeptController &#123; @Autowired private DeptService service; @RequestMapping(value = "/dept/get/&#123;id&#125;", method = RequestMethod.GET) @HystrixCommand(fallbackMethod = "fallbackForGetDept") public Dept get(@PathVariable("id") Long id) &#123; Dept dept = service.get(id); if (null == dept) &#123; throw new RuntimeException("è¯¥IDï¼š" + id + "æ²¡æœ‰æ²¡æœ‰å¯¹åº”çš„ä¿¡æ¯"); &#125; return dept; &#125; /** * æœåŠ¡ç†”æ–­å¤„ç† * @param id id * @return Dept */ public Dept fallbackForGetDept(@PathVariable("id") Long id) &#123; Dept dept = new Dept().setDeptno(-1L).setDname("null").setDb_source("null"); log.error("fallbackForGetDept = &#123;&#125;", dept); return dept; &#125;&#125;ï¼ˆ7ï¼‰æµ‹è¯•å…ˆå¯åŠ¨3ä¸ªeurekaå…ˆå¯åŠ¨ï¼Œç„¶åŽå¯åŠ¨microservicecloud-provider-dept-hystrix-8001ï¼Œæœ€åŽå¯åŠ¨microservicecloud-consumer-dept-80ã€‚è®¿é—®http://localhost/consumer/dept/get/112 ,ç”±äºŽæ•°æ®åº“ä¸å­˜åœ¨112è¿™ä¸ªéƒ¨é—¨ï¼Œæ‰€ä»¥ä¼šè§¦å‘æœåŠ¡ç†”æ–­å¤„ç†ã€‚Â¶7.3 æœåŠ¡é™çº§æ•´ä½“èµ„æºå¿«ä¸å¤Ÿäº†ï¼Œå¿ç—›å°†æŸäº›æœåŠ¡å…ˆå…³æŽ‰ï¼Œå¾…æ¸¡è¿‡éš¾å…³ï¼Œå†å¼€å¯å›žæ¥ã€‚æœåŠ¡é™çº§å¤„ç†æ˜¯åœ¨å®¢æˆ·ç«¯å®žçŽ°å®Œæˆçš„ï¼Œä¸ŽæœåŠ¡ç«¯æ²¡æœ‰å…³ç³»ã€‚ï¼ˆ1ï¼‰ä¿®æ”¹microservicecloud-apiå·¥ç¨‹ï¼Œæ ¹æ®å·²ç»æœ‰çš„DeptClientServiceæŽ¥å£æ–°å»ºä¸€ä¸ªå®žçŽ°äº†FallbackFactoryæŽ¥å£çš„ç±»com.qcmoke.service.DeptClientServiceFallbackFactoryã€‚123456789101112131415161718192021222324252627282930313233343536373839package com.qcmoke.service;import com.qcmoke.entities.Dept;import feign.hystrix.FallbackFactory;import org.springframework.stereotype.Component;import java.util.List;/** * DeptClientServiceFallbackFactory *åƒä¸‡ä¸è¦å¿˜è®°åœ¨ç±»ä¸Šé¢æ–°å¢ž@Componentæ³¨è§£ * @author qcmoke * @date 2019/09/08 01:19 */@Componentpublic class DeptClientServiceFallbackFactory implements FallbackFactory&lt;DeptClientService&gt; &#123; @Override public DeptClientService create(Throwable throwable) &#123; return new DeptClientService() &#123; @Override public Dept get(long id) &#123; return new Dept().setDeptno(id) .setDname("è¯¥IDï¼š" + id + "æ²¡æœ‰æ²¡æœ‰å¯¹åº”çš„ä¿¡æ¯,Consumerå®¢æˆ·ç«¯æä¾›çš„é™çº§ä¿¡æ¯,æ­¤åˆ»æœåŠ¡Providerå·²ç»å…³é—­") .setDb_source("no this database in MySQL"); &#125; @Override public List&lt;Dept&gt; list() &#123; return null; &#125; @Override public boolean add(Dept dept) &#123; return false; &#125; &#125;; &#125;&#125;ï¼ˆ2ï¼‰ä¿®æ”¹microservicecloud-apiå·¥ç¨‹ï¼ŒDeptClientServiceæŽ¥å£åœ¨æ³¨è§£@FeignClient()ä¸­æ·»åŠ fallbackFactoryå±žæ€§å€¼12345678910111213141516171819202122232425262728package com.qcmoke.service;import com.qcmoke.entities.Dept;import org.springframework.cloud.netflix.feign.FeignClient;import org.springframework.web.bind.annotation.PathVariable;import org.springframework.web.bind.annotation.RequestMapping;import org.springframework.web.bind.annotation.RequestMethod;import java.util.List;/** * DeptClientService * é’ˆå¯¹äºŽMICROSERVICECLOUD-DEPTæœåŠ¡çš„Feign * * @author qcmoke * @date 2019/09/04 13:49 */@FeignClient(value = "MICROSERVICECLOUD-DEPT", fallbackFactory = DeptClientServiceFallbackFactory.class)public interface DeptClientService &#123; @RequestMapping(value = "/dept/get/&#123;id&#125;", method = RequestMethod.GET) public Dept get(@PathVariable("id") long id); @RequestMapping(value = "/dept/list", method = RequestMethod.GET) public List&lt;Dept&gt; list(); @RequestMapping(value = "/dept/add", method = RequestMethod.POST) public boolean add(Dept dept);&#125;ï¼ˆ3ï¼‰ä¿®æ”¹microservicecloud-consumer-dept-feignå·¥ç¨‹çš„yml,æ·»åŠ å¦‚ä¸‹é…ç½®123feign: hystrix: enabled: trueå…¨ï¼š123456789101112server: port: 80feign: hystrix: enabled: trueeureka: client: register-with-eureka: false service-url: defaultZone: http://eureka7001.com:7001/eureka/,http://eureka7002.com:7002/eureka/,http://eureka7003.com:7003/eureka/ï¼ˆ4ï¼‰æµ‹è¯•å…ˆå¯åŠ¨3ä¸ªeurekaå…ˆå¯åŠ¨ï¼Œç„¶åŽå¯åŠ¨microservicecloud-provider-dept-8001ï¼Œå†å¯åŠ¨microservicecloud-consumer-dept-feignã€‚å…ˆå°è¯•è®¿é—®http://localhost/consumer/dept/get/1ç„¶åŽæ•…æ„å…³é—­å¾®æœåŠ¡microservicecloud-provider-dept-8001ï¼Œç„¶åŽå†æ¬¡è®¿é—®http://localhost/consumer/dept/get/1æ­¤æ—¶æœåŠ¡ç«¯providerå·²ç»downäº†ï¼Œä½†æ˜¯æˆ‘ä»¬åšäº†æœåŠ¡é™çº§å¤„ç†ï¼Œè®©å®¢æˆ·ç«¯åœ¨æœåŠ¡ç«¯ä¸å¯ç”¨æ—¶ä¹Ÿä¼šèŽ·å¾—æç¤ºä¿¡æ¯è€Œä¸ä¼šæŒ‚èµ·è€—æ­»æœåŠ¡å™¨ã€‚Â¶7.4 æœåŠ¡ç›‘æŽ§hystrixDashboardé™¤äº†éš”ç¦»ä¾èµ–æœåŠ¡çš„è°ƒç”¨ä»¥å¤–ï¼ŒHystrixè¿˜æä¾›äº†å‡†å®žæ—¶çš„è°ƒç”¨ç›‘æŽ§ï¼ˆHystrix Dashboardï¼‰ï¼ŒHystrixä¼šæŒç»­åœ°è®°å½•æ‰€æœ‰é€šè¿‡Hystrixå‘èµ·çš„è¯·æ±‚çš„æ‰§è¡Œä¿¡æ¯ï¼Œå¹¶ä»¥ç»Ÿè®¡æŠ¥è¡¨å’Œå›¾å½¢çš„å½¢å¼å±•ç¤ºç»™ç”¨æˆ·ï¼ŒåŒ…æ‹¬æ¯ç§’æ‰§è¡Œå¤šå°‘è¯·æ±‚å¤šå°‘æˆåŠŸï¼Œå¤šå°‘å¤±è´¥ç­‰ã€‚Netflixé€šè¿‡hystrix-metrics-event-streamé¡¹ç›®å®žçŽ°äº†å¯¹ä»¥ä¸ŠæŒ‡æ ‡çš„ç›‘æŽ§ã€‚Spring Cloudä¹Ÿæä¾›äº†Hystrix Dashboardçš„æ•´åˆï¼Œå¯¹ç›‘æŽ§å†…å®¹è½¬åŒ–æˆå¯è§†åŒ–ç•Œé¢ã€‚ï¼ˆ1ï¼‰æ–°å»ºå·¥ç¨‹microservicecloud-consumer-hystrix-dashboardåˆ›å»ºå®ŒæˆåŽåœ¨çˆ¶å·¥ç¨‹çš„pomæ–‡ä»¶çš„&lt;project&gt;æ ‡ç­¾ä¸‹æ·»åŠ å¦‚ä¸‹ä»£ç ã€‚ï¼ˆä¸€èˆ¬IDEå·¥å…·ä¼šè‡ªåŠ¨æ·»åŠ ï¼‰12345678910111213&lt;modules&gt; &lt;module&gt;microservicecloud-api&lt;/module&gt; &lt;module&gt;microservicecloud-provider-dept-8001&lt;/module&gt; &lt;module&gt;microservicecloud-consumer-dept-80&lt;/module&gt; &lt;module&gt;microservicecloud-eureka-7001&lt;/module&gt; &lt;module&gt;microservicecloud-eureka-7002&lt;/module&gt; &lt;module&gt;microservicecloud-eureka-7003&lt;/module&gt; &lt;module&gt;microservicecloud-provider-dept-8002&lt;/module&gt; &lt;module&gt;microservicecloud-provider-dept-8003&lt;/module&gt; &lt;module&gt;microservicecloud-consumer-dept-feign&lt;/module&gt; &lt;module&gt;microservicecloud-provider-dept-hystrix-8001&lt;/module&gt; &lt;module&gt;microservicecloud-consumer-hystrix-dashboard&lt;/module&gt;&lt;/modules&gt;ï¼ˆ2ï¼‰POM1234567891011121314151617181920212223242526272829303132333435&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"&gt; &lt;parent&gt; &lt;artifactId&gt;microservicecloud&lt;/artifactId&gt; &lt;groupId&gt;com.qcmoke&lt;/groupId&gt; &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt; &lt;/parent&gt; &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt; &lt;artifactId&gt;microservicecloud-consumer-hystrix-dashboard&lt;/artifactId&gt; &lt;dependencies&gt; &lt;!-- hystrixå’Œ hystrix-dashboardç›¸å…³--&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt; &lt;artifactId&gt;spring-cloud-starter-hystrix&lt;/artifactId&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt; &lt;artifactId&gt;spring-cloud-starter-hystrix-dashboard&lt;/artifactId&gt; &lt;/dependency&gt; &lt;!-- ä¿®æ”¹åŽç«‹å³ç”Ÿæ•ˆï¼Œçƒ­éƒ¨ç½² --&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework&lt;/groupId&gt; &lt;artifactId&gt;springloaded&lt;/artifactId&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt; &lt;/dependency&gt; &lt;/dependencies&gt;&lt;/project&gt;ï¼ˆ3ï¼‰YML12server: port: 9001ï¼ˆ4ï¼‰ä¸»å¯åŠ¨ç±»æ”¹åä¸ºcom.qcmoke.MicroServiceCloudDashboard.java+æ–°æ³¨è§£@EnableHystrixDashboardï¼ˆ5ï¼‰æ‰€æœ‰Providerå¾®æœåŠ¡æä¾›ç±»(8001/8002/8003)éƒ½éœ€è¦ç›‘æŽ§ä¾èµ–é…ç½®ï¼Œæ·»åŠ è¿™ä¸ªä¾èµ–åŽæ‰€æœ‰çš„HystrixCommand å°±éƒ½ä¼šè¢«ç›‘æŽ§äº†ã€‚12345&lt;!-- actuatorç›‘æŽ§ä¿¡æ¯å®Œå–„ --&gt;&lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;&lt;/dependency&gt;ï¼ˆ6ï¼‰å¯åŠ¨microservicecloud-consumer-hystrix-dashboardè¯¥å¾®æœåŠ¡ç›‘æŽ§æ¶ˆè´¹ç«¯ï¼ˆ7ï¼‰ç›‘æŽ§æµ‹è¯•ï¼ˆ7.1ï¼‰å…ˆå¯åŠ¨3ä¸ªeurekaé›†ç¾¤ï¼Œç„¶åŽå¯åŠ¨microservicecloud-provider-dept-hystrix-8001ï¼Œæœ€åŽå¯åŠ¨microservicecloud-consumer-hystrix-dashboardã€‚ï¼ˆ7.2ï¼‰å…ˆè®¿é—®ç›‘æŽ§çª—å£http://localhost:9001/hystrixï¼Œç„¶åŽå¡«å†™ç›‘æŽ§åœ°å€1ï¼šDelayï¼šè¯¥å‚æ•°ç”¨æ¥æŽ§åˆ¶æœåŠ¡å™¨ä¸Šè½®è¯¢ç›‘æŽ§ä¿¡æ¯çš„å»¶è¿Ÿæ—¶é—´ï¼Œé»˜è®¤ä¸º2000æ¯«ç§’ï¼Œå¯ä»¥é€šè¿‡é…ç½®è¯¥å±žæ€§æ¥é™ä½Žå®¢æˆ·ç«¯çš„ç½‘ç»œå’ŒCPUæ¶ˆè€—ã€‚2ï¼šTitleï¼šè¯¥å‚æ•°å¯¹åº”äº†å¤´éƒ¨æ ‡é¢˜Hystrix Streamä¹‹åŽçš„å†…å®¹ï¼Œé»˜è®¤ä¼šä½¿ç”¨å…·ä½“ç›‘æŽ§å®žä¾‹çš„URLï¼Œå¯ä»¥é€šè¿‡é…ç½®è¯¥ä¿¡æ¯æ¥å±•ç¤ºæ›´åˆé€‚çš„æ ‡é¢˜ã€‚ï¼ˆ7.3ï¼‰å†æ‰“å¼€å¦ä¸€ä¸ªæµè§ˆå™¨ä¾¿ç­¾è®¿é—®å¹¶å¤šæ¬¡åˆ·æ–°http://localhost:8001/dept/get/1ï¼ˆ7.4ï¼‰ç„¶åŽè§‚å¯Ÿç›‘æŽ§çª—å£å¦‚ä½•çœ‹ï¼Ÿ7è‰²1åœ†1æ›²7è‰²ä»Žå·¦åˆ°å³ï¼šè¯·æ±‚çš„æˆåŠŸï¼Œç†”æ–­æ•°ï¼Œé”™è¯¯çš„è¯·æ±‚ï¼Œè¶…æ—¶çš„è¯·æ±‚ï¼Œçº¿ç¨‹æ± æ‹’ç»æ•°ï¼Œå¤±è´¥çš„è¯·æ±‚å’Œæœ€è¿‘10ç§’å†…é”™è¯¯çš„æ¯”çŽ‡é€šè¿‡ä¸Šé¢é¢œè‰²çš„å«ä¹‰æ¥è¡¨ç¤ºä¸‹å›¾çš„æ•°å­—å›¾æ ‡ï¼š1åœ†å®žå¿ƒåœ†ï¼šå…±æœ‰ä¸¤ç§å«ä¹‰ã€‚å®ƒé€šè¿‡é¢œè‰²çš„å˜åŒ–ä»£è¡¨äº†å®žä¾‹çš„å¥åº·ç¨‹åº¦ï¼Œå®ƒçš„å¥åº·åº¦ä»Žç»¿è‰²&lt;é»„è‰²&lt;æ©™è‰²&lt;çº¢è‰²é€’å‡ã€‚è¯¥å®žå¿ƒåœ†é™¤äº†é¢œè‰²çš„å˜åŒ–ä¹‹å¤–ï¼Œå®ƒçš„å¤§å°ä¹Ÿä¼šæ ¹æ®å®žä¾‹çš„è¯·æ±‚æµé‡å‘ç”Ÿå˜åŒ–ï¼Œæµé‡è¶Šå¤§è¯¥å®žå¿ƒåœ†å°±è¶Šå¤§ã€‚æ‰€ä»¥é€šè¿‡è¯¥å®žå¿ƒåœ†çš„å±•ç¤ºï¼Œå°±å¯ä»¥åœ¨å¤§é‡çš„å®žä¾‹ä¸­å¿«é€Ÿçš„å‘çŽ°æ•…éšœå®žä¾‹å’Œé«˜åŽ‹åŠ›å®žä¾‹ã€‚1æ›²æ›²çº¿ï¼šç”¨æ¥è®°å½•2åˆ†é’Ÿå†…æµé‡çš„ç›¸å¯¹å˜åŒ–ï¼Œå¯ä»¥é€šè¿‡å®ƒæ¥è§‚å¯Ÿåˆ°æµé‡çš„ä¸Šå‡å’Œä¸‹é™è¶‹åŠ¿ã€‚Â¶8.zuulè·¯ç”±ç½‘å…³Â¶8.1 æ¦‚å¿µå…¶ä¸­è·¯ç”±åŠŸèƒ½è´Ÿè´£å°†å¤–éƒ¨è¯·æ±‚è½¬å‘åˆ°å…·ä½“çš„å¾®æœåŠ¡å®žä¾‹ä¸Šï¼Œæ˜¯å®žçŽ°å¤–éƒ¨è®¿é—®ç»Ÿä¸€å…¥å£çš„åŸºç¡€è€Œè¿‡æ»¤å™¨åŠŸèƒ½åˆ™è´Ÿè´£å¯¹è¯·æ±‚çš„å¤„ç†è¿‡ç¨‹è¿›è¡Œå¹²é¢„ï¼Œæ˜¯å®žçŽ°è¯·æ±‚æ ¡éªŒã€æœåŠ¡èšåˆç­‰åŠŸèƒ½çš„åŸºç¡€.Zuulå’ŒEurekaè¿›è¡Œæ•´åˆï¼Œå°†Zuulè‡ªèº«æ³¨å†Œä¸ºEurekaæœåŠ¡æ²»ç†ä¸‹çš„åº”ç”¨ï¼ŒåŒæ—¶ä»ŽEurekaä¸­èŽ·å¾—å…¶ä»–å¾®æœåŠ¡çš„æ¶ˆæ¯ï¼Œä¹Ÿå³ä»¥åŽçš„è®¿é—®å¾®æœåŠ¡éƒ½æ˜¯é€šè¿‡Zuulè·³è½¬åŽèŽ·å¾—ã€‚Zuulæä¾›ï¼š ä»£ç†+è·¯ç”±+è¿‡æ»¤ä¸‰å¤§åŠŸèƒ½æ³¨æ„ï¼šZuulæœåŠ¡æœ€ç»ˆè¿˜æ˜¯ä¼šæ³¨å†Œè¿›EurekaÂ¶8.2 è·¯ç”±åŸºæœ¬é…ç½®ï¼ˆ1ï¼‰æ–°å»ºModuleæ¨¡å—microservicecloud-zuul-gateway-9527åˆ›å»ºå®ŒæˆåŽåœ¨çˆ¶å·¥ç¨‹çš„pomæ–‡ä»¶çš„&lt;project&gt;æ ‡ç­¾ä¸‹æ·»åŠ å¦‚ä¸‹ä»£ç ã€‚ï¼ˆä¸€èˆ¬IDEå·¥å…·ä¼šè‡ªåŠ¨æ·»åŠ ï¼‰1234567891011121314&lt;modules&gt; &lt;module&gt;microservicecloud-api&lt;/module&gt; &lt;module&gt;microservicecloud-provider-dept-8001&lt;/module&gt; &lt;module&gt;microservicecloud-consumer-dept-80&lt;/module&gt; &lt;module&gt;microservicecloud-eureka-7001&lt;/module&gt; &lt;module&gt;microservicecloud-eureka-7002&lt;/module&gt; &lt;module&gt;microservicecloud-eureka-7003&lt;/module&gt; &lt;module&gt;microservicecloud-provider-dept-8002&lt;/module&gt; &lt;module&gt;microservicecloud-provider-dept-8003&lt;/module&gt; &lt;module&gt;microservicecloud-consumer-dept-feign&lt;/module&gt; &lt;module&gt;microservicecloud-provider-dept-hystrix-8001&lt;/module&gt; &lt;module&gt;microservicecloud-consumer-hystrix-dashboard&lt;/module&gt; &lt;module&gt;microservicecloud-zuul-gateway-9527&lt;/module&gt;&lt;/modules&gt;ï¼ˆ2ï¼‰pom.xml123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"&gt; &lt;parent&gt; &lt;artifactId&gt;microservicecloud&lt;/artifactId&gt; &lt;groupId&gt;com.qcmoke&lt;/groupId&gt; &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt; &lt;/parent&gt; &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt; &lt;artifactId&gt;microservicecloud-zuul-gateway-9527&lt;/artifactId&gt; &lt;dependencies&gt; &lt;!-- zuulè·¯ç”±ç½‘å…³ --&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt; &lt;artifactId&gt;spring-cloud-starter-zuul&lt;/artifactId&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt; &lt;artifactId&gt;spring-cloud-starter-eureka&lt;/artifactId&gt; &lt;/dependency&gt; &lt;!-- actuatorç›‘æŽ§ --&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt; &lt;/dependency&gt; &lt;!-- hystrixå®¹é”™--&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt; &lt;artifactId&gt;spring-cloud-starter-hystrix&lt;/artifactId&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt; &lt;artifactId&gt;spring-cloud-starter-config&lt;/artifactId&gt; &lt;/dependency&gt; &lt;!-- æ—¥å¸¸æ ‡é… --&gt; &lt;dependency&gt; &lt;groupId&gt;com.qcmoke&lt;/groupId&gt; &lt;artifactId&gt;microservicecloud-api&lt;/artifactId&gt; &lt;version&gt;$&#123;project.version&#125;&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-jetty&lt;/artifactId&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt; &lt;/dependency&gt; &lt;!-- çƒ­éƒ¨ç½²æ’ä»¶ --&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework&lt;/groupId&gt; &lt;artifactId&gt;springloaded&lt;/artifactId&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt; &lt;/dependency&gt; &lt;/dependencies&gt;&lt;/project&gt;ï¼ˆ3ï¼‰ä¸»å¯åŠ¨ç±»com.qcmoke.ZuulApplicationApp.java12345678910111213141516171819package com.qcmoke;import org.springframework.boot.SpringApplication;import org.springframework.boot.autoconfigure.SpringBootApplication;import org.springframework.cloud.netflix.zuul.EnableZuulProxy;/** * ZuulApplicationApp * * @author qcmoke * @date 2019/09/08 21:27 */@SpringBootApplication@EnableZuulProxypublic class ZuulApplicationApp &#123; public static void main(String[] args) &#123; SpringApplication.run(ZuulApplicationApp.class, args); &#125;&#125;ï¼ˆ4ï¼‰ä¿®æ”¹C:\Windows\System32\drivers\etc\hostsï¼Œæ·»åŠ ä»¥ä¸‹æ˜ å°„1127.0.0.1 myzuul.comï¼ˆ5ï¼‰application.yml123456789101112131415161718192021server: port: 9527spring: application: name: microservicecloud-zuul-gatewayeureka: client: service-url: defaultZone: http://eureka7001.com:7001/eureka/,http://eureka7002.com:7002/eureka/,http://eureka7003.com:7003/eureka/ instance: instance-id: gateway-9527.com prefer-ip-address: trueinfo: app.name: microservicecloud company.name: example.com build.artifactId: $&#123;project.artifactId&#125; build.version: $&#123;project.version&#125;ï¼ˆ6ï¼‰å…ˆå¯åŠ¨ä¸‰ä¸ªeurekaé›†ç¾¤ï¼Œç„¶åŽå¯åŠ¨microservicecloud-provider-dept-8001ï¼Œæœ€åŽå¯åŠ¨microservicecloud-zuul-gateway-9527ã€‚é€šè¿‡è·¯ç”±ç½‘å…³è®¿é—®çš„æœåŠ¡æŽ¥å£åœ°å€ä¸ºï¼šhttp://è·¯ç”±ç½‘å…³ip:è·¯ç”±ç½‘å…³port/è®¿é—®çš„æœåŠ¡å/å…·ä½“çš„controlleræŽ¥å£è®¿é—®http://myzuul.com:9527/microservicecloud-dept/dept/get/2Â¶8.3 è·¯ç”±è®¿é—®æ˜ å°„è§„åˆ™éœ€æ±‚ï¼šå¿½ç•¥åŽŸçœŸå®žæœåŠ¡åï¼Œä¿®æ”¹ä¸ºå…¶ä»–åç§°ä»¥ä¸å‘å¤–é€éœ²æœåŠ¡è¯¦ç»†æƒ…å†µã€‚ï¼ˆ1ï¼‰ä¿®æ”¹ymlï¼Œæ·»åŠ å¦‚ä¸‹è·¯ç”±ç½‘å…³é…ç½®1234567zuul: #prefix: /qcmoke #è®¾ç½®ç»Ÿä¸€å…¬å…±å‰ç¼€ï¼Œé‚£ä¹ˆè®¿é—®åœ°å€ä¸ºï¼šhttp://myzuul.com:9527/qcmoke/mydept/dept/get/1 #ignored-services: microservicecloud-dept #åŽŸçœŸå®žæœåŠ¡åå¿½ç•¥ ignored-services: "*" #å¿½ç•¥æ‰€æœ‰çš„æœåŠ¡åï¼ˆå¦‚æžœæœ‰å¤šä¸ªï¼‰ routes: mydept.serviceId: microservicecloud-dept mydept.path: /mydept/**å…¨ï¼š1234567891011121314151617181920212223242526272829server: port: 9527spring: application: name: microservicecloud-zuul-gatewayeureka: client: service-url: defaultZone: http://eureka7001.com:7001/eureka/,http://eureka7002.com:7002/eureka/,http://eureka7003.com:7003/eureka/ instance: instance-id: gateway-9527.com prefer-ip-address: truezuul: #prefix: /qcmoke #è®¾ç½®ç»Ÿä¸€å…¬å…±å‰ç¼€ï¼Œé‚£ä¹ˆè®¿é—®åœ°å€ä¸ºï¼šhttp://myzuul.com:9527/qcmoke/mydept/dept/get/1 #ignored-services: microservicecloud-dept #åŽŸçœŸå®žæœåŠ¡åå¿½ç•¥ ignored-services: "*" #å¿½ç•¥æ‰€æœ‰çš„æœåŠ¡åï¼ˆå¦‚æžœæœ‰å¤šä¸ªï¼‰ routes: mydept.serviceId: microservicecloud-dept mydept.path: /mydept/**info: app.name: microservicecloud company.name: example.com build.artifactId: $&#123;project.artifactId&#125; build.version: $&#123;project.version&#125;ï¼ˆ2ï¼‰å…ˆå¯åŠ¨ä¸‰ä¸ªeurekaé›†ç¾¤ï¼Œç„¶åŽå¯åŠ¨microservicecloud-provider-dept-8001ï¼Œæœ€åŽå¯åŠ¨microservicecloud-zuul-gateway-9527ã€‚è®¿é—®http://myzuul.com:9527/microservicecloud-dept/dept/get/2ï¼ˆå¹¶ç½‘å…³å±è”½æ‹¦æˆªï¼‰è®¿é—®http://myzuul.com:9527/mydept/dept/get/1ï¼ˆè®¿é—®æˆåŠŸï¼‰Â¶9.SpringCloud Configåˆ†å¸ƒå¼é…ç½®ä¸­å¿ƒÂ¶9.1 SpringCloud ConfigæœåŠ¡ç«¯é…ç½®ï¼ˆ1ï¼‰åœ¨gitè¿œç¨‹ä»“åº“ä¸Šæ–°å»ºä¸€ä¸ªåä¸ºmicroservicecloud-configçš„æ–°Repositoryã€‚ï¼ˆ2ï¼‰å†æœ¬åœ°åˆ›å»ºä¸€ä¸ªä»“åº“ï¼Œåç§°ä¸ºmicroservicecloud-config,ç„¶åŽè¿›å…¥åˆ°ä»“åº“é‡Œè¿›è¡Œåˆå§‹åŒ–ã€‚1$ git initï¼ˆ3ï¼‰å†ä»“åº“é‡Œåˆ›å»ºä¸€ä¸ªæ–‡ä»¶application.yml123456789101112131415spring: profiles: active: - dev---spring: profiles: dev #å¼€å‘çŽ¯å¢ƒ application: name: microservicecloud-config-qcmoke-dev---spring: profiles: test #æµ‹è¯•çŽ¯å¢ƒ application: name: microservicecloud-config-qcmoke-test# è¯·ä¿å­˜ä¸ºUTF-8æ ¼å¼ä¿å­˜æ ¼å¼å¿…é¡»ä¸ºUTF-8ï¼ˆ4ï¼‰æäº¤application.ymlåˆ°gitè¿œç¨‹ä»“åº“1234$ git add .$ git commit -m "init"$ git remote add origin https://github.com/qcmoke/springcloud-config.git$ git push -u origin masterï¼ˆ5ï¼‰æ–°å»ºmicroservicecloud-config-3344æ¨¡å—å®ƒå³ä¸ºCloudçš„é…ç½®ä¸­å¿ƒæ¨¡å—åˆ›å»ºå®ŒæˆåŽåœ¨çˆ¶å·¥ç¨‹çš„pomæ–‡ä»¶çš„&lt;project&gt;æ ‡ç­¾ä¸‹æ·»åŠ å¦‚ä¸‹ä»£ç ã€‚ï¼ˆä¸€èˆ¬IDEå·¥å…·ä¼šè‡ªåŠ¨æ·»åŠ ï¼‰123456789101112131415&lt;modules&gt; &lt;module&gt;microservicecloud-api&lt;/module&gt; &lt;module&gt;microservicecloud-provider-dept-8001&lt;/module&gt; &lt;module&gt;microservicecloud-consumer-dept-80&lt;/module&gt; &lt;module&gt;microservicecloud-eureka-7001&lt;/module&gt; &lt;module&gt;microservicecloud-eureka-7002&lt;/module&gt; &lt;module&gt;microservicecloud-eureka-7003&lt;/module&gt; &lt;module&gt;microservicecloud-provider-dept-8002&lt;/module&gt; &lt;module&gt;microservicecloud-provider-dept-8003&lt;/module&gt; &lt;module&gt;microservicecloud-consumer-dept-feign&lt;/module&gt; &lt;module&gt;microservicecloud-provider-dept-hystrix-8001&lt;/module&gt; &lt;module&gt;microservicecloud-consumer-hystrix-dashboard&lt;/module&gt; &lt;module&gt;microservicecloud-zuul-gateway-9527&lt;/module&gt; &lt;module&gt;microservicecloud-config-3344&lt;/module&gt;&lt;/modules&gt;ï¼ˆ6ï¼‰pom.xml1234567891011121314151617181920212223242526272829303132333435363738&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"&gt; &lt;parent&gt; &lt;artifactId&gt;microservicecloud&lt;/artifactId&gt; &lt;groupId&gt;com.qcmoke&lt;/groupId&gt; &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt; &lt;/parent&gt; &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt; &lt;artifactId&gt;microservicecloud-config-3344&lt;/artifactId&gt; &lt;dependencies&gt; &lt;!-- springCloud Config --&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt; &lt;artifactId&gt;spring-cloud-config-server&lt;/artifactId&gt; &lt;/dependency&gt; &lt;!-- é¿å…Configçš„Gitæ’ä»¶æŠ¥é”™ï¼šorg/eclipse/jgit/api/TransportConfigCallback --&gt; &lt;dependency&gt; &lt;groupId&gt;org.eclipse.jgit&lt;/groupId&gt; &lt;artifactId&gt;org.eclipse.jgit&lt;/artifactId&gt; &lt;version&gt;4.10.0.201712302008-r&lt;/version&gt; &lt;/dependency&gt; &lt;!-- çƒ­éƒ¨ç½²æ’ä»¶ --&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework&lt;/groupId&gt; &lt;artifactId&gt;springloaded&lt;/artifactId&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt; &lt;/dependency&gt; &lt;/dependencies&gt;&lt;/project&gt;ï¼ˆ7ï¼‰bootstrap.yml1234567891011121314server: port: 3344spring: application: name: microservicecloud-config cloud: config: server: git: uri: https://github.com/qcmoke/springcloud-config.git #gitè¿œç¨‹ä»“åº“ä¸Šé¢çš„gitä»“åº“åå­—# search-paths: pathName# username: qcmoke #è´¦å·å¯†ç å†™çœŸå®žçš„å¿«ä¸€äº›æˆ‘è§‰å¾—ï¼Œä¸ä½¿ç”¨ä¹Ÿèƒ½è®¿é—®æœ‰ç‚¹æ…¢# password: ******ï¼ˆ8ï¼‰ä¸»å¯åŠ¨ç±»com.qcmoke.ConfigApplication3344.java12345678910111213141516171819package com.qcmoke;import org.springframework.boot.SpringApplication;import org.springframework.boot.autoconfigure.SpringBootApplication;import org.springframework.cloud.config.server.EnableConfigServer;/** * ConfigApplication3344 * * @author qcmoke * @date 2019/09/08 22:25 */@SpringBootApplication@EnableConfigServerpublic class ConfigApplication3344 &#123; public static void main(String[] args) &#123; SpringApplication.run(ConfigApplication3344.class, args); &#125;&#125;ï¼ˆ9ï¼‰ä¿®æ”¹C:\Windows\System32\drivers\etc\hostsï¼Œæ·»åŠ ä»¥ä¸‹æ˜ å°„1127.0.0.1 config-3344.comï¼ˆ10ï¼‰æµ‹è¯•é€šè¿‡Configå¾®æœåŠ¡æ˜¯å¦å¯ä»¥ä»Žgitè¿œç¨‹ä»“åº“ä¸ŠèŽ·å–é…ç½®å†…å®¹å¯åŠ¨å¾®æœåŠ¡microservicecloud-config-3344è®¿é—® http://config-3344.com:3344/application-dev.ymlè®¿é—® http://config-3344.com:3344/application-test.ymlè®¿é—® http://config-3344.com:3344/application-xxx.yml (ä¸å­˜åœ¨çš„é…ç½®)Â¶9.2 é…ç½®è¯»å–è§„åˆ™/{application}-{profile}.ymlhttp://config-3344.com:3344/application-dev.ymlhttp://config-3344.com:3344/application-test.ymlhttp://config-3344.com:3344/application-xxx.yml(ä¸å­˜åœ¨çš„é…ç½®)/{application}/{profile}[/{label}]http://config-3344.com:3344/application/dev/masterhttp://config-3344.com:3344/application/test/masterhttp://config-3344.com:3344/application/xxx/master/{label}/{application}-{profile}.ymlhttp://config-3344.com:3344/master/application-dev.ymlhttp://config-3344.com:3344/master/application-test.ymlÂ¶9.3 SpringCloud Configå®¢æˆ·ç«¯é…ç½®ä¸Žæµ‹è¯•ï¼ˆ1ï¼‰å†æœ¬åœ°ä»“åº“æ–°å»ºmicroservicecloud-config-client.yml1234567891011121314151617181920212223242526spring: profiles: active: - dev---server: port: 8201 spring: profiles: dev application: name: microservicecloud-config-clienteureka: client: service-url: defaultZone: http://eureka-dev.com:7001/eureka/ ---server: port: 8202 spring: profiles: test application: name: microservicecloud-config-clienteureka: client: service-url: defaultZone: http://eureka-test.com:7001/eureka/ï¼ˆ2ï¼‰æäº¤åˆ°è¿œç¨‹åº“123$ git add .$ git commit -m "modify"$ git push origin masterï¼ˆ3ï¼‰æ–°å»ºmicroservicecloud-config-client-3355åˆ›å»ºå®ŒæˆåŽåœ¨çˆ¶å·¥ç¨‹çš„pomæ–‡ä»¶çš„&lt;project&gt;æ ‡ç­¾ä¸‹æ·»åŠ å¦‚ä¸‹ä»£ç ã€‚ï¼ˆä¸€èˆ¬IDEå·¥å…·ä¼šè‡ªåŠ¨æ·»åŠ ï¼‰12345678910111213141516&lt;modules&gt; &lt;module&gt;microservicecloud-api&lt;/module&gt; &lt;module&gt;microservicecloud-provider-dept-8001&lt;/module&gt; &lt;module&gt;microservicecloud-consumer-dept-80&lt;/module&gt; &lt;module&gt;microservicecloud-eureka-7001&lt;/module&gt; &lt;module&gt;microservicecloud-eureka-7002&lt;/module&gt; &lt;module&gt;microservicecloud-eureka-7003&lt;/module&gt; &lt;module&gt;microservicecloud-provider-dept-8002&lt;/module&gt; &lt;module&gt;microservicecloud-provider-dept-8003&lt;/module&gt; &lt;module&gt;microservicecloud-consumer-dept-feign&lt;/module&gt; &lt;module&gt;microservicecloud-provider-dept-hystrix-8001&lt;/module&gt; &lt;module&gt;microservicecloud-consumer-hystrix-dashboard&lt;/module&gt; &lt;module&gt;microservicecloud-zuul-gateway-9527&lt;/module&gt; &lt;module&gt;microservicecloud-config-3344&lt;/module&gt; &lt;module&gt;microservicecloud-config-client-3355&lt;/module&gt;&lt;/modules&gt;ï¼ˆ4ï¼‰POMåœ¨éœ€è¦è¯·æ±‚configæœåŠ¡çš„æ¨¡å—é‡ŒåŠ å¦‚ä¸‹ä¾èµ–å³å¯12345&lt;!-- SpringCloud Configå®¢æˆ·ç«¯ --&gt;&lt;dependency&gt; &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt; &lt;artifactId&gt;spring-cloud-starter-config&lt;/artifactId&gt;&lt;/dependency&gt;å…¨ï¼š12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"&gt; &lt;parent&gt; &lt;artifactId&gt;microservicecloud&lt;/artifactId&gt; &lt;groupId&gt;com.qcmoke&lt;/groupId&gt; &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt; &lt;/parent&gt; &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt; &lt;artifactId&gt;microservicecloud-config-client-3355&lt;/artifactId&gt; &lt;dependencies&gt; &lt;!-- SpringCloud Configå®¢æˆ·ç«¯ --&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt; &lt;artifactId&gt;spring-cloud-starter-config&lt;/artifactId&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt; &lt;artifactId&gt;spring-cloud-starter-hystrix&lt;/artifactId&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt; &lt;artifactId&gt;spring-cloud-starter-eureka&lt;/artifactId&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt; &lt;artifactId&gt;spring-cloud-starter-config&lt;/artifactId&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-jetty&lt;/artifactId&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework&lt;/groupId&gt; &lt;artifactId&gt;springloaded&lt;/artifactId&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt; &lt;/dependency&gt; &lt;/dependencies&gt;&lt;/project&gt;ï¼ˆ5ï¼‰å†æ¨¡å—é‡Œåˆ›å»ºbootstrap.yml1234567spring: cloud: config: name: microservicecloud-config-client #éœ€è¦ä»Žgithubä¸Šè¯»å–çš„èµ„æºåç§°ï¼Œæ³¨æ„æ²¡æœ‰ymlåŽç¼€å profile: dev #æœ¬æ¬¡è®¿é—®çš„é…ç½®é¡¹ label: master uri: http://config-3344.com:3344 #æœ¬å¾®æœåŠ¡å¯åŠ¨åŽå…ˆåŽ»æ‰¾3344å·æœåŠ¡ï¼Œé€šè¿‡SpringCloudConfigèŽ·å–GitHubçš„æœåŠ¡åœ°å€applicaiton.ymlæ˜¯ç”¨æˆ·çº§çš„èµ„æºé…ç½®é¡¹bootstrap.ymlæ˜¯ç³»ç»Ÿçº§çš„ï¼Œä¼˜å…ˆçº§æ›´åŠ é«˜Spring Cloudä¼šåˆ›å»ºä¸€ä¸ªBootstrap Contextï¼Œä½œä¸ºSpringåº”ç”¨çš„Application Contextçš„çˆ¶ä¸Šä¸‹æ–‡ã€‚åˆå§‹åŒ–çš„æ—¶å€™ï¼ŒBootstrap Contextè´Ÿè´£ä»Žå¤–éƒ¨æºåŠ è½½é…ç½®å±žæ€§å¹¶è§£æžé…ç½®ã€‚è¿™ä¸¤ä¸ªä¸Šä¸‹æ–‡å…±äº«ä¸€ä¸ªä»Žå¤–éƒ¨èŽ·å–çš„Environmentã€‚Bootstrapå±žæ€§æœ‰é«˜ä¼˜å…ˆçº§ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œå®ƒä»¬ä¸ä¼šè¢«æœ¬åœ°é…ç½®è¦†ç›–ã€‚ Bootstrap contextå’ŒApplication Contextæœ‰ç€ä¸åŒçš„çº¦å®šï¼Œæ‰€ä»¥æ–°å¢žäº†ä¸€ä¸ªbootstrap.ymlæ–‡ä»¶ï¼Œä¿è¯Bootstrap Contextå’ŒApplication Contexté…ç½®çš„åˆ†ç¦»ã€‚ï¼ˆ6ï¼‰windowsä¸‹ä¿®æ”¹hostsæ–‡ä»¶ï¼Œå¢žåŠ æ˜ å°„1127.0.0.1 client-config.comï¼ˆ9ï¼‰åˆ›å»ºå¯åŠ¨ç±»com.qcmoke.ConfigClientApplication.java12345678910111213141516171819package com.qcmoke;import org.springframework.boot.SpringApplication;import org.springframework.boot.autoconfigure.SpringBootApplication;/** * ConfigClientApplication * * @author qcmoke * @date 2019/09/09 02:26 */@SpringBootApplicationpublic class ConfigClientApplication &#123; public static void main(String[] args) &#123; SpringApplication.run(ConfigClientApplication.class, args); &#125;&#125;ï¼ˆ8ï¼‰æ–°å»ºæµ‹è¯•com.qcmoke.controller.ConfigClientRestController.java12345678910111213141516171819202122232425262728293031package com.qcmoke;import org.springframework.beans.factory.annotation.Value;import org.springframework.web.bind.annotation.RequestMapping;import org.springframework.web.bind.annotation.RestController;/** * ConfigClientRestController * * @author qcmoke * @date 2019/09/09 02:22 */@RestControllerpublic class ConfigClientRestController &#123; @Value("$&#123;spring.application.name&#125;") private String applicationName; @Value("$&#123;eureka.client.service-url.defaultZone&#125;") private String eurekaServers; @Value("$&#123;server.port&#125;") private String port; @RequestMapping("/config") public String getConfig() &#123; String str = "applicationName: " + applicationName + "\t eurekaServers:" + eurekaServers + "\t port: " + port; System.out.println("******str: " + str); return "applicationName: " + applicationName + "\t eurekaServers:" + eurekaServers + "\t port: " + port; &#125;&#125;ï¼ˆ9ï¼‰æµ‹è¯•å…ˆå¯åŠ¨Configé…ç½®ä¸­å¿ƒ3344 configæœåŠ¡ï¼Œç„¶åŽå†å¯åŠ¨3355ä½œä¸ºClientå‡†å¤‡è®¿é—®å†³å®šä»Žgithubä¸Šè¯»å–ä»€ï¼Œå†³å®šäºŽbootstrap.ymlé‡Œé¢çš„profileå€¼æ˜¯ä»€ä¹ˆã€‚å‡å¦‚ç›®å‰æ˜¯ profile: devï¼Œdevé»˜è®¤åœ¨githubä¸Šå¯¹åº”çš„ç«¯å£å°±æ˜¯8201ï¼Œé‚£å°±è®¿é—®http://client-config.com:8201/configå‡å¦‚ç›®å‰æ˜¯ profile: testï¼Œtesté»˜è®¤åœ¨githubä¸Šå¯¹åº”çš„ç«¯å£å°±æ˜¯8202ï¼Œé‚£å°±è®¿é—®http://client-config.com:8202/configÂ¶9.4 SpringCloud Configé…ç½®å®žæˆ˜ï¼ˆ1ï¼‰æœ¬åœ°ä»“åº“æ–°å»ºæ–‡ä»¶microservicecloud-config-eureka-client.yml1234567891011121314151617181920212223242526272829303132333435363738spring: profiles: active: - dev---server: port: 7001 #æ³¨å†Œä¸­å¿ƒå ç”¨7001ç«¯å£,å†’å·åŽé¢å¿…é¡»è¦æœ‰ç©ºæ ¼ spring: profiles: dev application: name: microservicecloud-config-eureka-client eureka: instance: hostname: eureka7001.com #å†’å·åŽé¢å¿…é¡»è¦æœ‰ç©ºæ ¼ client: register-with-eureka: false #å½“å‰çš„eureka-serverè‡ªå·±ä¸æ³¨å†Œè¿›æœåŠ¡åˆ—è¡¨ä¸­ fetch-registry: false #ä¸é€šè¿‡eurekaèŽ·å–æ³¨å†Œä¿¡æ¯ service-url: defaultZone: http://eureka7001.com:7001/eureka/---server: port: 7001 #æ³¨å†Œä¸­å¿ƒå ç”¨7001ç«¯å£,å†’å·åŽé¢å¿…é¡»è¦æœ‰ç©ºæ ¼ spring: profiles: test application: name: microservicecloud-config-eureka-client eureka: instance: hostname: eureka7001.com #å†’å·åŽé¢å¿…é¡»è¦æœ‰ç©ºæ ¼ client: register-with-eureka: false #å½“å‰çš„eureka-serverè‡ªå·±ä¸æ³¨å†Œè¿›æœåŠ¡åˆ—è¡¨ä¸­ fetch-registry: false #ä¸é€šè¿‡eurekaèŽ·å–æ³¨å†Œä¿¡æ¯ service-url: defaultZone: http://eureka7001.com:7001/eureka/ï¼ˆ2ï¼‰å†æœ¬åœ°ä»“åº“æ–°å»ºæ–‡ä»¶microservicecloud-config-dept-client.yml1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980spring: profiles: active: - dev--- server: port: 8001spring: profiles: dev application: name: microservicecloud-config-dept-client datasource: type: com.alibaba.druid.pool.DruidDataSource driver-class-name: org.gjt.mm.mysql.Driver url: jdbc:mysql://localhost:3306/cloudDB01 username: root password: 123456 dbcp2: min-idle: 5 initial-size: 5 max-total: 5 max-wait-millis: 200 mybatis: config-location: classpath:mybatis/mybatis.cfg.xml type-aliases-package: com.qcmoke.entities mapper-locations: - classpath:mybatis/mapper/**/*.xml eureka: client: #å®¢æˆ·ç«¯æ³¨å†Œè¿›eurekaæœåŠ¡åˆ—è¡¨å†… service-url: defaultZone: http://eureka7001.com:7001/eureka instance: instance-id: dept-8001.com prefer-ip-address: true info: app.name: microservicecloud company.name: example.com build.artifactId: $&#123;project.artifactId&#125; build.version: $&#123;project.version&#125;---server: port: 8001spring: profiles: test application: name: microservicecloud-config-dept-client datasource: type: com.alibaba.druid.pool.DruidDataSource driver-class-name: org.gjt.mm.mysql.Driver url: jdbc:mysql://localhost:3306/cloudDB02 username: root password: 123456 dbcp2: min-idle: 5 initial-size: 5 max-total: 5 max-wait-millis: 200 mybatis: config-location: classpath:mybatis/mybatis.cfg.xml type-aliases-package: com.qcmoke.entities mapper-locations: - classpath:mybatis/mapper/**/*.xml eureka: client: #å®¢æˆ·ç«¯æ³¨å†Œè¿›eurekaæœåŠ¡åˆ—è¡¨å†… service-url: defaultZone: http://eureka7001.com:7001/eureka instance: instance-id: dept-8001.com prefer-ip-address: true info: app.name: microservicecloud company.name: example.com build.artifactId: $&#123;project.artifactId&#125; build.version: $&#123;project.version&#125;ï¼ˆ3ï¼‰æäº¤åˆ°è¿œç¨‹åº“123$ git add .$ git commit -m "modify"$ git push origin masterï¼ˆ4ï¼‰æ–°å»ºå·¥ç¨‹microservicecloud-config-eureka-client-7001ï¼Œé…ç½®Configç‰ˆçš„eurekaæœåŠ¡ç«¯åˆ›å»ºå®ŒæˆåŽåœ¨çˆ¶å·¥ç¨‹çš„pomæ–‡ä»¶çš„&lt;project&gt;æ ‡ç­¾ä¸‹æ·»åŠ å¦‚ä¸‹ä»£ç ã€‚ï¼ˆä¸€èˆ¬IDEå·¥å…·ä¼šè‡ªåŠ¨æ·»åŠ ï¼‰1234567891011121314151617&lt;modules&gt; &lt;module&gt;microservicecloud-api&lt;/module&gt; &lt;module&gt;microservicecloud-provider-dept-8001&lt;/module&gt; &lt;module&gt;microservicecloud-consumer-dept-80&lt;/module&gt; &lt;module&gt;microservicecloud-eureka-7001&lt;/module&gt; &lt;module&gt;microservicecloud-eureka-7002&lt;/module&gt; &lt;module&gt;microservicecloud-eureka-7003&lt;/module&gt; &lt;module&gt;microservicecloud-provider-dept-8002&lt;/module&gt; &lt;module&gt;microservicecloud-provider-dept-8003&lt;/module&gt; &lt;module&gt;microservicecloud-consumer-dept-feign&lt;/module&gt; &lt;module&gt;microservicecloud-provider-dept-hystrix-8001&lt;/module&gt; &lt;module&gt;microservicecloud-consumer-hystrix-dashboard&lt;/module&gt; &lt;module&gt;microservicecloud-zuul-gateway-9527&lt;/module&gt; &lt;module&gt;microservicecloud-config-3344&lt;/module&gt; &lt;module&gt;microservicecloud-config-client-3355&lt;/module&gt; &lt;module&gt;microservicecloud-config-eureka-client-7001&lt;/module&gt;&lt;/modules&gt;microservicecloud-config-eureka-client-7001çš„pom.xml12345678910111213141516171819202122232425262728293031323334&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"&gt; &lt;parent&gt; &lt;artifactId&gt;microservicecloud&lt;/artifactId&gt; &lt;groupId&gt;com.qcmoke&lt;/groupId&gt; &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt; &lt;/parent&gt; &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt; &lt;artifactId&gt;microservicecloud-config-eureka-client-7001&lt;/artifactId&gt; &lt;dependencies&gt; &lt;!-- SpringCloudConfigé…ç½® --&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt; &lt;artifactId&gt;spring-cloud-starter-config&lt;/artifactId&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt; &lt;artifactId&gt;spring-cloud-starter-eureka-server&lt;/artifactId&gt; &lt;/dependency&gt; &lt;!-- çƒ­éƒ¨ç½²æ’ä»¶ --&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework&lt;/groupId&gt; &lt;artifactId&gt;springloaded&lt;/artifactId&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt; &lt;/dependency&gt; &lt;/dependencies&gt;&lt;/project&gt;bootstrap.yml1234567spring: cloud: config: name: microservicecloud-config-eureka-client #éœ€è¦ä»Žgithubä¸Šè¯»å–çš„èµ„æºåç§°ï¼Œæ³¨æ„æ²¡æœ‰ymlåŽç¼€å profile: dev label: master uri: http://config-3344.com:3344 #SpringCloudConfigèŽ·å–çš„æœåŠ¡åœ°å€application.yml123spring: application: name: microservicecloud-config-eureka-clientå¯åŠ¨ç±»com.qcmoke.ConfigGitEurekaServerApplication.java12345678910111213141516171819package com.qcmoke;import org.springframework.boot.SpringApplication;import org.springframework.boot.autoconfigure.SpringBootApplication;import org.springframework.cloud.netflix.eureka.server.EnableEurekaServer;/** * ConfigGitEurekaServerApplication * * @author qcmoke * @date 2019/09/10 02:50 */@SpringBootApplication@EnableEurekaServerpublic class ConfigGitEurekaServerApplication &#123; public static void main(String[] args) &#123; SpringApplication.run(ConfigGitEurekaServerApplication.class, args); &#125;&#125;ï¼ˆ5ï¼‰å‚è€ƒä¹‹å‰çš„8001æ‹·è´åŽæ–°å»ºå·¥ç¨‹microservicecloud-config-dept-client-8001æŠŠmicroservicecloud-provider-dept-8001çš„srcä¸‹çš„æ–‡ä»¶å’Œç›®å½•copyåˆ°microservicecloud-config-dept-client-8001çš„srcä¸‹pom.xml123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"&gt; &lt;parent&gt; &lt;artifactId&gt;microservicecloud&lt;/artifactId&gt; &lt;groupId&gt;com.qcmoke&lt;/groupId&gt; &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt; &lt;/parent&gt; &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt; &lt;artifactId&gt;microservicecloud-config-dept-client-8001&lt;/artifactId&gt; &lt;dependencies&gt; &lt;!-- SpringCloudConfigé…ç½® --&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt; &lt;artifactId&gt;spring-cloud-starter-config&lt;/artifactId&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt; &lt;artifactId&gt;spring-cloud-starter-eureka&lt;/artifactId&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;com.qcmoke&lt;/groupId&gt; &lt;artifactId&gt;microservicecloud-api&lt;/artifactId&gt; &lt;version&gt;$&#123;project.version&#125;&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;junit&lt;/groupId&gt; &lt;artifactId&gt;junit&lt;/artifactId&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;mysql&lt;/groupId&gt; &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;com.alibaba&lt;/groupId&gt; &lt;artifactId&gt;druid&lt;/artifactId&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;ch.qos.logback&lt;/groupId&gt; &lt;artifactId&gt;logback-core&lt;/artifactId&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.mybatis.spring.boot&lt;/groupId&gt; &lt;artifactId&gt;mybatis-spring-boot-starter&lt;/artifactId&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-jetty&lt;/artifactId&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework&lt;/groupId&gt; &lt;artifactId&gt;springloaded&lt;/artifactId&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt; &lt;/dependency&gt; &lt;/dependencies&gt;&lt;/project&gt;bootstrap.yml123456789spring: cloud: config: name: microservicecloud-config-dept-client #éœ€è¦ä»Žgithubä¸Šè¯»å–çš„èµ„æºåç§°ï¼Œæ³¨æ„æ²¡æœ‰ymlåŽç¼€å #profileé…ç½®æ˜¯ä»€ä¹ˆå°±å–ä»€ä¹ˆé…ç½®dev or test #profile: dev profile: test label: master uri: http://config-3344.com:3344 #SpringCloudConfigèŽ·å–çš„æœåŠ¡åœ°å€application.yml123#spring:# application:# name: microservicecloud-config-dept-clientä¸»å¯åŠ¨ç±»com.qcmoke.ConfigDeptProvider8001App.java123456789101112131415161718192021package com.qcmoke;import org.springframework.boot.SpringApplication;import org.springframework.boot.autoconfigure.SpringBootApplication;import org.springframework.cloud.client.discovery.EnableDiscoveryClient;import org.springframework.cloud.netflix.eureka.EnableEurekaClient;/** * ConfigDeptProvider8001App * * @author qcmoke * @date 2019/09/10 02:59 */@SpringBootApplication@EnableEurekaClient //æœ¬æœåŠ¡å¯åŠ¨åŽä¼šè‡ªåŠ¨æ³¨å†Œè¿›eurekaæœåŠ¡ä¸­@EnableDiscoveryClient //æœåŠ¡å‘çŽ°public class ConfigDeptProvider8001App &#123; public static void main(String[] args) &#123; SpringApplication.run(ConfigDeptProvider8001App.class, args); &#125;&#125;æµ‹è¯•ï¼šå…ˆå¯åŠ¨microservicecloud-config-3344å¾®æœåŠ¡ï¼Œä¿è¯Configæ€»é…ç½®æ˜¯OKçš„ï¼Œå†å¯åŠ¨microservicecloud-config-eureka-client-7001å¾®æœåŠ¡ï¼Œæœ€åŽå¯åŠ¨microservicecloud-config-dept-client-8001å…ˆè®¿é—®http://eureka7001.com:7001/testé…ç½®é»˜è®¤è®¿é—®ï¼Œhttp://localhost:8001/dept/listæœ¬åœ°æ¢é…ç½®æˆdevï¼Œhttp://localhost:8001/dept/list]]></content>
      <categories>
        <category>javaee</category>
      </categories>
      <tags>
        <tag>Spring Cloud</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[fastdfsç»“åˆnginxæ­å»ºé«˜æ€§èƒ½æ–‡ä»¶æœåŠ¡å™¨]]></title>
    <url>%2Fdevops%2Ffastdfs.html</url>
    <content type="text"><![CDATA[Â¶FastDFSä»‹ç»FastDFSå¼€æºåœ°å€ï¼šhttps://github.com/happyfish100å‚è€ƒï¼šFastDFSåˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»ŸÂ¶1ã€ç®€ä»‹FastDFS æ˜¯ä¸€ä¸ªå¼€æºçš„é«˜æ€§èƒ½åˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿï¼ˆDFSï¼‰ã€‚ å®ƒçš„ä¸»è¦åŠŸèƒ½åŒ…æ‹¬ï¼šæ–‡ä»¶å­˜å‚¨ï¼Œæ–‡ä»¶åŒæ­¥å’Œæ–‡ä»¶è®¿é—®ï¼Œä»¥åŠé«˜å®¹é‡å’Œè´Ÿè½½å¹³è¡¡ã€‚ä¸»è¦è§£å†³äº†æµ·é‡æ•°æ®å­˜å‚¨é—®é¢˜ï¼Œç‰¹åˆ«é€‚åˆä»¥ä¸­å°æ–‡ä»¶ï¼ˆå»ºè®®èŒƒå›´ï¼š4KB &lt; file_size &lt;500MBï¼‰ä¸ºè½½ä½“çš„åœ¨çº¿æœåŠ¡ã€‚FastDFS ç³»ç»Ÿæœ‰ä¸‰ä¸ªè§’è‰²ï¼šè·Ÿè¸ªæœåŠ¡å™¨(Tracker Server)ã€å­˜å‚¨æœåŠ¡å™¨(Storage Server)å’Œå®¢æˆ·ç«¯(Client)ã€‚Tracker Serverï¼šè·Ÿè¸ªæœåŠ¡å™¨ï¼Œä¸»è¦åšè°ƒåº¦å·¥ä½œï¼Œèµ·åˆ°å‡è¡¡çš„ä½œç”¨ï¼›è´Ÿè´£ç®¡ç†æ‰€æœ‰çš„ storage serverå’Œ groupï¼Œæ¯ä¸ª storage åœ¨å¯åŠ¨åŽä¼šè¿žæŽ¥ Trackerï¼Œå‘ŠçŸ¥è‡ªå·±æ‰€å±ž group ç­‰ä¿¡æ¯ï¼Œå¹¶ä¿æŒå‘¨æœŸæ€§å¿ƒè·³ã€‚Storage Serverï¼šå­˜å‚¨æœåŠ¡å™¨ï¼Œä¸»è¦æä¾›å®¹é‡å’Œå¤‡ä»½æœåŠ¡ï¼›ä»¥ group ä¸ºå•ä½ï¼Œæ¯ä¸ª group å†…å¯ä»¥æœ‰å¤šå° storage serverï¼Œæ•°æ®äº’ä¸ºå¤‡ä»½å’ŒåŒæ­¥ã€‚Clientï¼šå®¢æˆ·ç«¯ï¼Œä¸Šä¼ ä¸‹è½½æ•°æ®çš„æœåŠ¡å™¨ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬è‡ªå·±çš„é¡¹ç›®æ‰€éƒ¨ç½²åœ¨çš„æœåŠ¡å™¨ã€‚Â¶2ã€FastDFSæ€§èƒ½æ–¹æ¡ˆÂ¶3ã€FastDFSçš„å­˜å‚¨ç­–ç•¥ä¸ºäº†æ”¯æŒå¤§å®¹é‡ï¼Œå­˜å‚¨é›†ç¾¤ç³»ç»Ÿé‡‡ç”¨äº†åˆ†å·ï¼ˆæˆ–åˆ†ç»„ï¼‰çš„ç»„ç»‡æ–¹å¼ã€‚å­˜å‚¨é›†ç¾¤ç³»ç»Ÿç”±ä¸€ä¸ªæˆ–å¤šä¸ªå·ç»„æˆï¼Œå·ä¸Žå·ä¹‹é—´çš„æ–‡ä»¶æ˜¯ç›¸äº’ç‹¬ç«‹çš„ï¼Œæ‰€æœ‰å·çš„æ–‡ä»¶å®¹é‡ç´¯åŠ å°±æ˜¯æ•´ä¸ªå­˜å‚¨ç³»ç»Ÿä¸­çš„æ–‡ä»¶å®¹é‡ã€‚ä¸€ä¸ªå·å¯ä»¥ç”±ä¸€å°æˆ–å¤šå°å­˜å‚¨æœåŠ¡å™¨ç»„æˆï¼Œä¸€ä¸ªå·ä¸‹çš„å­˜å‚¨æœåŠ¡å™¨ä¸­çš„æ–‡ä»¶éƒ½æ˜¯ç›¸åŒçš„ï¼Œå·ä¸­çš„å¤šå°å­˜å‚¨æœåŠ¡å™¨èµ·åˆ°äº†å†—ä½™å¤‡ä»½å’Œè´Ÿè½½å‡è¡¡çš„ä½œç”¨ã€‚åœ¨å·ä¸­å¢žåŠ æœåŠ¡å™¨æ—¶ï¼ŒåŒæ­¥å·²æœ‰çš„æ–‡ä»¶ç”±FastDFSç³»ç»Ÿè‡ªåŠ¨å®Œæˆï¼ŒåŒæ­¥å®ŒæˆåŽï¼Œç³»ç»Ÿè‡ªåŠ¨å°†æ–°å¢žæœåŠ¡å™¨åˆ‡æ¢åˆ°çº¿ä¸Šæä¾›æœåŠ¡ã€‚å½“å­˜å‚¨ç©ºé—´ä¸è¶³æˆ–å³å°†è€—å°½æ—¶ï¼Œå¯ä»¥åŠ¨æ€æ·»åŠ å·ã€‚åªéœ€è¦å¢žåŠ ä¸€å°æˆ–å¤šå°æœåŠ¡å™¨ï¼Œå¹¶å°†å®ƒä»¬é…ç½®ä¸ºä¸€ä¸ªæ–°çš„å·ï¼Œè¿™æ ·å°±æ‰©å¤§äº†å­˜å‚¨ç³»ç»Ÿçš„å®¹é‡ã€‚å½“éœ€è¦åšæ›´å¤šå¤‡ä»½çš„æ—¶å€™ï¼Œå¯ä»¥åœ¨å·ä¸­æ·»åŠ å­˜å‚¨æœåŠ¡å™¨æ¥å®žçŽ°ã€‚Â¶4ã€FastDFSçš„ä¸Šä¼ è¿‡ç¨‹FastDFSå‘ä½¿ç”¨è€…æä¾›åŸºæœ¬æ–‡ä»¶è®¿é—®æŽ¥å£ï¼Œæ¯”å¦‚uploadã€downloadã€appendã€deleteç­‰ï¼Œä»¥å®¢æˆ·ç«¯åº“çš„æ–¹å¼æä¾›ç»™ç”¨æˆ·ä½¿ç”¨ã€‚Storage Serverä¼šå®šæœŸçš„å‘Tracker Serverå‘é€è‡ªå·±çš„å­˜å‚¨ä¿¡æ¯ã€‚å½“Tracker Server Clusterä¸­çš„Tracker Serverä¸æ­¢ä¸€ä¸ªæ—¶ï¼Œå„ä¸ªTrackerä¹‹é—´çš„å…³ç³»æ˜¯å¯¹ç­‰çš„ï¼Œæ‰€ä»¥å®¢æˆ·ç«¯ä¸Šä¼ æ—¶å¯ä»¥é€‰æ‹©ä»»æ„ä¸€ä¸ªTrackerã€‚å½“Trackeræ”¶åˆ°å®¢æˆ·ç«¯ä¸Šä¼ æ–‡ä»¶çš„è¯·æ±‚æ—¶ï¼Œä¼šä¸ºè¯¥æ–‡ä»¶åˆ†é…ä¸€ä¸ªå¯ä»¥å­˜å‚¨æ–‡ä»¶çš„groupï¼Œå½“é€‰å®šäº†groupåŽå°±è¦å†³å®šç»™å®¢æˆ·ç«¯åˆ†é…groupä¸­çš„å“ªä¸€ä¸ªstorage serverã€‚å½“åˆ†é…å¥½storage serveråŽï¼Œå®¢æˆ·ç«¯å‘storageå‘é€å†™æ–‡ä»¶è¯·æ±‚ï¼Œstorageå°†ä¼šä¸ºæ–‡ä»¶åˆ†é…ä¸€ä¸ªæ•°æ®å­˜å‚¨ç›®å½•ã€‚ç„¶åŽä¸ºæ–‡ä»¶åˆ†é…ä¸€ä¸ªfileidï¼Œæœ€åŽæ ¹æ®ä»¥ä¸Šçš„ä¿¡æ¯ç”Ÿæˆæ–‡ä»¶åå­˜å‚¨æ–‡ä»¶ã€‚æ–‡ä»¶åçš„æ ¼å¼å¦‚ä¸‹ï¼šÂ¶5ã€FastDFSçš„æ–‡ä»¶åŒæ­¥å†™æ–‡ä»¶æ—¶ï¼Œå®¢æˆ·ç«¯å°†æ–‡ä»¶å†™è‡³groupå†…ä¸€ä¸ªstorage serverå³è®¤ä¸ºå†™æ–‡ä»¶æˆåŠŸï¼Œstorage serverå†™å®Œæ–‡ä»¶åŽï¼Œä¼šç”±åŽå°çº¿ç¨‹å°†æ–‡ä»¶åŒæ­¥è‡³åŒgroupå†…å…¶ä»–çš„storage serverã€‚æ¯ä¸ªstorageå†™æ–‡ä»¶åŽï¼ŒåŒæ—¶ä¼šå†™ä¸€ä»½binlogï¼Œbinlogé‡Œä¸åŒ…å«æ–‡ä»¶æ•°æ®ï¼ŒåªåŒ…å«æ–‡ä»¶åç­‰å…ƒä¿¡æ¯ï¼Œè¿™ä»½binlogç”¨äºŽåŽå°åŒæ­¥ï¼Œstorageä¼šè®°å½•å‘groupå†…å…¶ä»–storageåŒæ­¥çš„è¿›åº¦ï¼Œä»¥ä¾¿é‡å¯åŽèƒ½æŽ¥ä¸Šæ¬¡çš„è¿›åº¦ç»§ç»­åŒæ­¥ï¼›è¿›åº¦ä»¥æ—¶é—´æˆ³çš„æ–¹å¼è¿›è¡Œè®°å½•ï¼Œæ‰€ä»¥æœ€å¥½èƒ½ä¿è¯é›†ç¾¤å†…æ‰€æœ‰serverçš„æ—¶é’Ÿä¿æŒåŒæ­¥ã€‚storageçš„åŒæ­¥è¿›åº¦ä¼šä½œä¸ºå…ƒæ•°æ®çš„ä¸€éƒ¨åˆ†æ±‡æŠ¥åˆ°trackerä¸Šï¼Œtrackeåœ¨é€‰æ‹©è¯»storageçš„æ—¶å€™ä¼šä»¥åŒæ­¥è¿›åº¦ä½œä¸ºå‚è€ƒã€‚Â¶6ã€FastDFSçš„æ–‡ä»¶ä¸‹è½½å®¢æˆ·ç«¯uploadfileæˆåŠŸåŽï¼Œä¼šæ‹¿åˆ°ä¸€ä¸ªstorageç”Ÿæˆçš„æ–‡ä»¶åï¼ŒæŽ¥ä¸‹æ¥å®¢æˆ·ç«¯æ ¹æ®è¿™ä¸ªæ–‡ä»¶åå³å¯è®¿é—®åˆ°è¯¥æ–‡ä»¶ã€‚è·Ÿupload fileä¸€æ ·ï¼Œåœ¨downloadfileæ—¶å®¢æˆ·ç«¯å¯ä»¥é€‰æ‹©ä»»æ„tracker serverã€‚trackerå‘é€downloadè¯·æ±‚ç»™æŸä¸ªtrackerï¼Œå¿…é¡»å¸¦ä¸Šæ–‡ä»¶åä¿¡æ¯ï¼Œtrackeä»Žæ–‡ä»¶åä¸­è§£æžå‡ºæ–‡ä»¶çš„groupã€å¤§å°ã€åˆ›å»ºæ—¶é—´ç­‰ä¿¡æ¯ï¼Œç„¶åŽä¸ºè¯¥è¯·æ±‚é€‰æ‹©ä¸€ä¸ªstorageç”¨æ¥æœåŠ¡è¯»è¯·æ±‚ã€‚Â¶çŽ¯å¢ƒå‡†å¤‡å’Œå®‰è£…Â¶ä½¿ç”¨çš„ç³»ç»Ÿè½¯ä»¶åç§°è¯´æ˜Žcentos7.xlibfatscommonFastDFSåˆ†ç¦»å‡ºçš„ä¸€äº›å…¬ç”¨å‡½æ•°åŒ…FastDFSFastDFSæœ¬ä½“fastdfs-nginx-moduleFastDFSå’Œnginxçš„å…³è”æ¨¡å—nginxnginx1.15.4Â¶ç¼–è¯‘çŽ¯å¢ƒ1yum install git gcc gcc-c++ make automake autoconf libtool pcre pcre-devel zlib zlib-devel openssl-devel wget vim -yÂ¶ç£ç›˜ç›®å½•è¯´æ˜Žä½ç½®æ‰€æœ‰å®‰è£…åŒ…/usr/local/srcæ•°æ®å­˜å‚¨ä½ç½®/home/dfs/#è¿™é‡Œæˆ‘ä¸ºäº†æ–¹ä¾¿æŠŠæ—¥å¿—ä»€ä¹ˆçš„éƒ½æ”¾åˆ°äº†dfs12mkdir /home/dfs #åˆ›å»ºæ•°æ®å­˜å‚¨ç›®å½•cd /usr/local/src #åˆ‡æ¢åˆ°å®‰è£…ç›®å½•å‡†å¤‡ä¸‹è½½å®‰è£…åŒ…Â¶å®‰è£…libfatscommonlibfastcommonæ˜¯ä»Ž FastDFS å’Œ FastDHT ä¸­æå–å‡ºæ¥çš„å…¬å…± C å‡½æ•°åº“ï¼ŒåŸºç¡€çŽ¯å¢ƒï¼Œå®‰è£…å³å¯ ã€‚123git clone https://github.com/happyfish100/libfastcommon.git --depth 1cd libfastcommon/./make.sh &amp;&amp; ./make.sh install #ç¼–è¯‘å®‰è£…Â¶å®‰è£…FastDFS1234567cd ../ #è¿”å›žä¸Šä¸€çº§ç›®å½•git clone https://github.com/happyfish100/fastdfs.git --depth 1cd fastdfs/./make.sh &amp;&amp; ./make.sh install #ç¼–è¯‘å®‰è£…#é…ç½®æ–‡ä»¶å‡†å¤‡cp /usr/local/src/fastdfs/conf/http.conf /etc/fdfs/ #ä¾›nginxè®¿é—®ä½¿ç”¨cp /usr/local/src/fastdfs/conf/mime.types /etc/fdfs/ #ä¾›nginxè®¿é—®ä½¿ç”¨Â¶å®‰è£…fastdfs-nginx-module123cd ../ #è¿”å›žä¸Šä¸€çº§ç›®å½•git clone https://github.com/happyfish100/fastdfs-nginx-module.git --depth 1cp /usr/local/src/fastdfs-nginx-module/src/mod_fastdfs.conf /etc/fdfsfastdfs-nginx-module æ¨¡å—è¯´æ˜ŽFastDFS é€šè¿‡ Tracker æœåŠ¡å™¨ï¼Œå°†æ–‡ä»¶æ”¾åœ¨ Storage æœåŠ¡å™¨å­˜å‚¨ï¼Œ ä½†æ˜¯åŒç»„å­˜å‚¨æœåŠ¡å™¨ä¹‹é—´éœ€è¦è¿›è¡Œæ–‡ä»¶å¤åˆ¶ï¼Œ æœ‰åŒæ­¥å»¶è¿Ÿçš„é—®é¢˜ã€‚å‡è®¾ Tracker æœåŠ¡å™¨å°†æ–‡ä»¶ä¸Šä¼ åˆ°äº† 192.168.51.128ï¼Œä¸Šä¼ æˆåŠŸåŽæ–‡ä»¶ IDå·²ç»è¿”å›žç»™å®¢æˆ·ç«¯ã€‚æ­¤æ—¶ FastDFS å­˜å‚¨é›†ç¾¤æœºåˆ¶ä¼šå°†è¿™ä¸ªæ–‡ä»¶åŒæ­¥åˆ°åŒç»„å­˜å‚¨ 192.168.51.129ï¼Œåœ¨æ–‡ä»¶è¿˜æ²¡æœ‰å¤åˆ¶å®Œæˆçš„æƒ…å†µä¸‹ï¼Œå®¢æˆ·ç«¯å¦‚æžœç”¨è¿™ä¸ªæ–‡ä»¶ ID åœ¨ 192.168.51.129 ä¸Šå–æ–‡ä»¶,å°±ä¼šå‡ºçŽ°æ–‡ä»¶æ— æ³•è®¿é—®çš„é”™è¯¯ã€‚è€Œ fastdfs-nginx-module å¯ä»¥é‡å®šå‘æ–‡ä»¶é“¾æŽ¥åˆ°æºæœåŠ¡å™¨å–æ–‡ä»¶ï¼Œé¿å…å®¢æˆ·ç«¯ç”±äºŽå¤åˆ¶å»¶è¿Ÿå¯¼è‡´çš„æ–‡ä»¶æ— æ³•è®¿é—®é”™è¯¯ã€‚Â¶å®‰è£…nginx123456wget http://nginx.org/download/nginx-1.15.4.tar.gz #ä¸‹è½½nginxåŽ‹ç¼©åŒ…tar -zxvf nginx-1.15.4.tar.gz #è§£åŽ‹cd nginx-1.15.4/#æ·»åŠ fastdfs-nginx-moduleæ¨¡å—./configure --add-module=/usr/local/src/fastdfs-nginx-module/src/ make &amp;&amp; make install #ç¼–è¯‘å®‰è£…Â¶å•æœºéƒ¨ç½²é¦–å…ˆå¤åˆ¶ç¤ºä¾‹é…ç½®æ–‡ä»¶ä¸ºéœ€è¦ä½¿ç”¨çš„é…ç½®æ–‡ä»¶123cp /etc/fdfs/tracker.conf.sample /etc/fdfs/tracker.confcp /etc/fdfs/storage.conf.sample /etc/fdfs/storage.confcp /etc/fdfs/client.conf.sample /etc/fdfs/client.conf #å®¢æˆ·ç«¯æ–‡ä»¶ï¼Œæµ‹è¯•ç”¨Â¶trackeré…ç½®è®¾æœåŠ¡å™¨ipä¸º 192.168.52.112345mkdir /home/dfsvim /etc/fdfs/tracker.conf#éœ€è¦ä¿®æ”¹çš„å†…å®¹å¦‚ä¸‹port=22122 # trackeræœåŠ¡å™¨ç«¯å£ï¼ˆé»˜è®¤22122,ä¸€èˆ¬ä¸ä¿®æ”¹ï¼‰base_path=/home/dfs # å­˜å‚¨æ—¥å¿—å’Œæ•°æ®çš„æ ¹ç›®å½•12#å¯åŠ¨trackeræœåŠ¡/etc/init.d/fdfs_trackerd start12#å…³é—­é˜²ç«å¢™systemctl stop firewalld.serviceÂ¶storageé…ç½®1234567vim /etc/fdfs/storage.conf#éœ€è¦ä¿®æ”¹çš„å†…å®¹å¦‚ä¸‹port=23000 # storageæœåŠ¡ç«¯å£ï¼ˆé»˜è®¤23000,ä¸€èˆ¬ä¸ä¿®æ”¹ï¼‰base_path=/home/dfs # æ•°æ®å’Œæ—¥å¿—æ–‡ä»¶å­˜å‚¨æ ¹ç›®å½•store_path0=/home/dfs # ç¬¬ä¸€ä¸ªå­˜å‚¨ç›®å½•tracker_server=192.168.52.1:22122 # trackeræœåŠ¡å™¨IPå’Œç«¯å£http.server_port=8888 # httpè®¿é—®æ–‡ä»¶çš„ç«¯å£(é»˜è®¤8888,çœ‹æƒ…å†µä¿®æ”¹,å’Œnginxä¸­ä¿æŒä¸€è‡´)12#å¯åŠ¨storageæœåŠ¡/etc/init.d/fdfs_storaged start12#å…³é—­é˜²ç«å¢™systemctl stop firewalld.serviceÂ¶clientæµ‹è¯•1234vim /etc/fdfs/client.conf#éœ€è¦ä¿®æ”¹çš„å†…å®¹å¦‚ä¸‹base_path=/home/dfstracker_server=192.168.52.1:22122 #trackeræœåŠ¡å™¨IPå’Œç«¯å£12#å…³é—­é˜²ç«å¢™systemctl stop firewalld.service12#ä¿å­˜åŽæµ‹è¯•,è¿”å›žIDè¡¨ç¤ºæˆåŠŸ å¦‚ï¼šgroup1/M00/00/00/xx.tar.gzfdfs_upload_file /etc/fdfs/client.conf /usr/local/src/nginx-1.15.4.tar.gzÂ¶é…ç½®nginxè®¿é—®å¯ä»¥ç”¨ä»»æ„ä¸€å°å®‰è£…äº†nginxçš„æœåŠ¡å™¨ä½œä¸ºnginxæœåŠ¡å™¨12345678910111213141516171819202122vim /etc/fdfs/mod_fastdfs.conf#éœ€è¦ä¿®æ”¹çš„å†…å®¹å¦‚ä¸‹tracker_server=192.168.52.1:22122 #trackeræœåŠ¡å™¨IPå’Œç«¯å£url_have_group_name=truestore_path0=/home/dfs#é…ç½®nginx.configvim /usr/local/nginx/conf/nginx.conf#æ·»åŠ å¦‚ä¸‹é…ç½®server &#123; listen 8888; ## è¯¥ç«¯å£ä¸ºstorage.confä¸­çš„http.server_portç›¸åŒ server_name localhost; location ~/group[0-9]/ &#123; ngx_fastdfs_module; &#125; error_page 500 502 503 504 /50x.html; location = /50x.html &#123; root html; &#125;&#125;#æµ‹è¯•ä¸‹è½½ï¼Œç”¨å¤–éƒ¨æµè§ˆå™¨è®¿é—®åˆšæ‰å·²ä¼ è¿‡çš„nginxå®‰è£…åŒ…,å¼•ç”¨è¿”å›žçš„IDhttp://192.168.52.1:8888/group1/M00/00/00/wKgAQ1pysxmAaqhAAA76tz-dVgg.tar.gz#å¼¹å‡ºä¸‹è½½å•æœºéƒ¨ç½²å…¨éƒ¨è·‘é€šÂ¶åˆ†å¸ƒå¼éƒ¨ç½²è®¾æœåŠ¡å™¨æœ‰6å°ã€‚3å°trackeræœåŠ¡å™¨ï¼Œipåˆ†åˆ«ä¸ºtracker1: 192.168.52.2tracker2: 192.168.52.3tracker3: 192.168.52.43å°storageæœåŠ¡å™¨ï¼Œipåˆ†åˆ«ä¸ºstorage1: 192.168.52.5storage2: 192.168.52.6storage3: 192.168.52.7éœ€æ±‚ï¼šfastdfsåˆ†å¸ƒå¼é›†ç¾¤ç³»ç»Ÿçš„ç»“æž„ä¸ºï¼šæœ‰3å°trackeræœåŠ¡å™¨åŒæ—¶ç›‘æŽ§group1(åŒ…å«storage1å’Œstorage2)å’Œgroup2(åªåŒ…å«storage3)Â¶trackeré…ç½®3å°trackeræœåŠ¡å™¨éƒ½è¦åšä»¥ä¸‹é…ç½®1234567mkdir /home/dfscp /etc/fdfs/tracker.conf.sample /etc/fdfs/tracker.confvim /etc/fdfs/tracker.conf#éœ€è¦ä¿®æ”¹çš„å†…å®¹å¦‚ä¸‹port=22122 # trackeræœåŠ¡å™¨ç«¯å£ï¼ˆé»˜è®¤22122,ä¸€èˆ¬ä¸ä¿®æ”¹ï¼‰base_path=/home/dfs # å­˜å‚¨æ—¥å¿—å’Œæ•°æ®çš„æ ¹ç›®å½•store_lookup=0 #é€‰æ‹©å¯¹storageæœåŠ¡å™¨é‡‡å–è½®è¯¢æ–¹å¼å­˜å–12#å¯åŠ¨trackeræœåŠ¡/etc/init.d/fdfs_trackerd start12#å…³é—­é˜²ç«å¢™systemctl stop firewalld.serviceÂ¶storageé…ç½®3å°storageæœåŠ¡å™¨éƒ½è¦åšä»¥ä¸‹é…ç½®1234567891011121314mkdir /home/dfscp /etc/fdfs/storage.conf.sample /etc/fdfs/storage.confvim /etc/fdfs/storage.conf#éœ€è¦ä¿®æ”¹çš„å†…å®¹å¦‚ä¸‹#è®¾ç½®å½“å‰storage serveræ‰€å±žçš„storageç»„ï¼Œå…¶ä¸­storage1å’Œstorage2ä¸ºgroup1; storage3ä¸ºgroup2group_name=group1#group_name=group2port=23000 # storageæœåŠ¡ç«¯å£ï¼ˆé»˜è®¤23000,ä¸€èˆ¬ä¸ä¿®æ”¹ï¼‰base_path=/home/dfs # æ•°æ®å’Œæ—¥å¿—æ–‡ä»¶å­˜å‚¨æ ¹ç›®å½•store_path0=/home/dfs # ç¬¬ä¸€ä¸ªå­˜å‚¨ç›®å½•tracker_server=192.168.52.2:22122 # tracker1tracker_server=192.168.52.3:22122 # tracker2tracker_server=192.168.52.4:22122 # tracker3http.server_port=8888 # httpè®¿é—®æ–‡ä»¶çš„ç«¯å£(é»˜è®¤8888,çœ‹æƒ…å†µä¿®æ”¹,å’Œnginxä¸­ä¿æŒä¸€è‡´)12#å¯åŠ¨storageæœåŠ¡/etc/init.d/fdfs_storaged start12#å…³é—­é˜²ç«å¢™systemctl stop firewalld.serviceÂ¶clientæµ‹è¯•12345678mkdir -p /home/moe/dfscp /etc/fdfs/client.conf.sample /etc/fdfs/client.confvim /etc/fdfs/client.conf#éœ€è¦ä¿®æ”¹çš„å†…å®¹å¦‚ä¸‹base_path=/home/moe/dfstracker_server=192.168.52.2:22122 # tracker1tracker_server=192.168.52.3:22122 # tracker2tracker_server=192.168.52.4:22122 # tracker312#å…³é—­é˜²ç«å¢™systemctl stop firewalld.service12#ä¿å­˜åŽæµ‹è¯•,è¿”å›žIDè¡¨ç¤ºæˆåŠŸ å¦‚ï¼šgroup1/M00/00/00/xx.tar.gzfdfs_upload_file /etc/fdfs/client.conf /usr/local/src/nginx-1.15.4.tar.gzÂ¶é…ç½®nginxè®¿é—®å¯ä»¥ç”¨ä»»æ„ä¸€å°å®‰è£…äº†nginxçš„æœåŠ¡å™¨ä½œä¸ºnginxæœåŠ¡å™¨123456789101112131415161718192021vim /etc/fdfs/mod_fastdfs.conf#éœ€è¦ä¿®æ”¹çš„å†…å®¹å¦‚ä¸‹tracker_server=192.168.52.2:22122 # æœåŠ¡å™¨1tracker_server=192.168.52.3:22122 # æœåŠ¡å™¨2tracker_server=192.168.52.4:22122 # æœåŠ¡å™¨3url_have_group_name=truestore_path0=/home/dfs#é…ç½®nginx.configvim /usr/local/nginx/conf/nginx.conf#æ·»åŠ å¦‚ä¸‹é…ç½®server &#123; listen 8888; ## è¯¥ç«¯å£ä¸ºstorage.confä¸­çš„http.server_portç›¸åŒ server_name localhost; location ~/group[0-9]/ &#123; ngx_fastdfs_module; &#125; error_page 500 502 503 504 /50x.html; location = /50x.html &#123; root html; &#125;&#125;Â¶å‘½ä»¤ä½¿ç”¨Â¶é˜²ç«å¢™123#ä¸å…³é—­é˜²ç«å¢™çš„è¯æ— æ³•ä½¿ç”¨systemctl stop firewalld.service #å…³é—­systemctl restart firewalld.service #é‡å¯Â¶tracker1234/etc/init.d/fdfs_trackerd start #å¯åŠ¨trackeræœåŠ¡/etc/init.d/fdfs_trackerd restart #é‡å¯åŠ¨trackeræœåŠ¡/etc/init.d/fdfs_trackerd stop #åœæ­¢trackeræœåŠ¡chkconfig fdfs_trackerd on #è‡ªå¯åŠ¨trackeræœåŠ¡Â¶storage1234/etc/init.d/fdfs_storaged start #å¯åŠ¨storageæœåŠ¡/etc/init.d/fdfs_storaged restart #é‡åŠ¨storageæœåŠ¡/etc/init.d/fdfs_storaged stop #åœæ­¢åŠ¨storageæœåŠ¡chkconfig fdfs_storaged on #è‡ªå¯åŠ¨storageæœåŠ¡Â¶nginx123/usr/local/nginx/sbin/nginx #å¯åŠ¨nginx/usr/local/nginx/sbin/nginx -s reload #é‡å¯nginx/usr/local/nginx/sbin/nginx -s stop #åœæ­¢nginxÂ¶æ£€æµ‹é›†ç¾¤12/usr/bin/fdfs_monitor /etc/fdfs/storage.conf# ä¼šæ˜¾ç¤ºä¼šæœ‰å‡ å°æœåŠ¡å™¨ æœ‰3å°å°±ä¼š æ˜¾ç¤º Storage 1-Storage 3çš„è¯¦ç»†ä¿¡æ¯Â¶è¯´æ˜ŽÂ¶é…ç½®æ–‡ä»¶12345tracker_server #æœ‰å‡ å°æœåŠ¡å™¨å†™å‡ ä¸ªgroup_name #åœ°å€çš„åç§°çš„å‘½åbind_addr #æœåŠ¡å™¨ipç»‘å®šstore_path_count #store_path(æ•°å­—)æœ‰å‡ ä¸ªå†™å‡ ä¸ªstore_path(æ•°å­—) #è®¾ç½®å‡ ä¸ªå‚¨å­˜åœ°å€å†™å‡ ä¸ª ä»Ž0å¼€å§‹Â¶å¯èƒ½é‡åˆ°çš„é—®é¢˜12345å¦‚æžœä¸æ˜¯root ç”¨æˆ· ä½ å¿…é¡»åœ¨é™¤äº†cdçš„å‘½ä»¤ä¹‹å¤– å…¨éƒ¨åŠ sudoå¦‚æžœä¸æ˜¯root ç”¨æˆ· ç¼–è¯‘å’Œå®‰è£…åˆ†å¼€è¿›è¡Œ å…ˆç¼–è¯‘å†å®‰è£…å¦‚æžœä¸Šä¼ æˆåŠŸ ä½†æ˜¯nginxæŠ¥é”™404 å…ˆæ£€æŸ¥mod_fastdfs.confæ–‡ä»¶ä¸­çš„store_path0æ˜¯å¦ä¸€è‡´å¦‚æžœnginxæ— æ³•è®¿é—® å…ˆæ£€æŸ¥é˜²ç«å¢™ å’Œ mod_fastdfs.confæ–‡ä»¶tracker_serveræ˜¯å¦ä¸€è‡´å¦‚æžœä¸æ˜¯åœ¨/usr/local/srcæ–‡ä»¶å¤¹ä¸‹å®‰è£… å¯èƒ½ä¼šç¼–è¯‘å‡ºé”™]]></content>
      <categories>
        <category>devops</category>
      </categories>
      <tags>
        <tag>nginx</tag>
        <tag>fastdfs</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ngrokå®žçŽ°å†…ç½‘ç©¿é€]]></title>
    <url>%2Ftools%2Fngrok.html</url>
    <content type="text"><![CDATA[ngrokçš„ä½œç”¨å°±æ˜¯å®žçŽ°å†…ç½‘ç©¿é€ï¼Œå†…ç½‘ç©¿é€å°±æ˜¯å…è®¸å†…ç½‘çš„ä¸»æœºèƒ½å¤Ÿè¢«å¤–ç½‘çš„å…¶ä»–ä¸»æœºè®¿é—®ã€‚å†…ç½‘ç©¿é€æ˜¯åå‘ä»£ç†æŠ€æœ¯ä¸­çš„ä¸€ä¸ªä¸­é—´çŽ¯èŠ‚æŠ€æœ¯ã€‚å¯¹äºŽåå‘ä»£ç†çš„æ›´å¤šç†è§£å¯è§å¦å¤–ä¸€æ–‡ã€Šå…³äºŽä»£ç†æŠ€æœ¯çš„ç†è§£ã€‹ã€‚ngrokæ”¯æŒçš„åè®®ï¼šhttphttpstcpÂ¶ä¸€ã€åŸŸåè§£æžè§£æžngrokå’Œ *.ngrokä¸¤æ¡Aè®°å½•åˆ°dnsæœåŠ¡å™¨ä¸Šï¼šæ¯”å¦‚åŸŸåä¸ºexample.comè€Œipä¸º198.23.188.200ï¼Œé‚£ä¹ˆåšä»¥ä¸‹åŸŸåè§£æžï¼šAè®°å½• ngrok --&gt; 198.23.188.200Aè®°å½• *.ngrok --&gt; 198.23.188.200Â¶äºŒã€æœåŠ¡ç«¯è¿™ä¸ªä»£ç†æœåŠ¡ç«¯ä¸€èˆ¬æ˜¯æä¾›å¤–ç½‘ï¼ˆå…¬ç½‘ï¼‰ipçš„æœåŠ¡å™¨ã€‚ç”¨å…¶ä½œä¸ºåå‘ä»£ç†æœåŠ¡å™¨ã€‚Â¶1. å®‰è£…ï¼ˆ1ï¼‰å®‰è£…ä¾èµ–12$ yum install epel-release -y$ yum install git gcc make golang -yï¼ˆ2ï¼‰ä¸‹è½½ngrok1$ git clone https://github.com/inconshreveable/ngrok.git ~/ngrokï¼ˆ3ï¼‰é…ç½®è¯ä¹¦è¿™é‡Œä¸ºäº†æ–¹ä¾¿ç›´æŽ¥åœ¨æœåŠ¡å™¨ç”Ÿæˆè‡ªç­¾åè¯ä¹¦äº†ï¼Œä¸ºäº†å®‰å…¨ä¼ è¾“çš„è¯å¯ä»¥é€šè¿‡è´­ä¹°æˆ–è€…ç”¨Letâ€™s Encryptå…è´¹ç”Ÿæˆçš„CAè¯ä¹¦ã€‚1234567891011121314151617$ cd ~/ngrok $ mkdir cert $ cd cert$ export NGROK_DOMAIN="ngrok.example.com"$ openssl genrsa -out rootCA.key 2048$ openssl req -x509 -new -nodes -key rootCA.key -subj "/CN=$NGROK_DOMAIN" -days 5000 -out rootCA.pem$ openssl genrsa -out device.key 2048$ openssl req -new -key device.key -subj "/CN=$NGROK_DOMAIN" -out device.csr$ openssl x509 -req -in device.csr -CA rootCA.pem -CAkey rootCA.key -CAcreateserial -out device.crt -days 5000#é…ç½®è¯ä¹¦ã€‚å…¶å®žå°±æ˜¯æ›¿æ¢æŽ‰åŽŸæ¥çš„è¯ä¹¦(æç¤ºoverwriteè¾“å…¥y)$ cp rootCA.pem ../assets/client/tls/ngrokroot.crt$ cp device.crt ../assets/server/tls/snakeoil.crt$ cp device.key ../assets/server/tls/snakeoil.keyï¼ˆ4ï¼‰ç¼–è¯‘æœåŠ¡ç«¯å’Œå®¢æˆ·ç«¯123456#åˆ‡æ¢å›žngrokç›®å½•$ cd ~/ngrok#ç¼–è¯‘æœåŠ¡ç«¯ç¨‹åº,ç”Ÿæˆè·¯å¾„åœ¨~/ngrok/bin/ngrokd$ make release-server#ç¼–è¯‘å®¢æˆ·ç«¯ç¨‹åº,ä¼šç”Ÿæˆ~/ngrok/bin/windows_amd64/ngrok.exeï¼Œç¼–è¯‘å¥½åŽè®°å¾—å°†windows_amd64ç›®å½•copyåˆ°æœ¬åœ°å®¢æˆ·ç«¯$ GOOS=windows GOARCH=amd64 make release-clientå¦‚æžœç¼–è¯‘å…¶ä»–å¹³å°å®¢æˆ·ç«¯å¯å‚ç…§ä»¥ä¸‹ï¼šLinux å¹³å° 32 ä½ç³»ç»Ÿï¼šGOOS=linux GOARCH=386Linux å¹³å° 64 ä½ç³»ç»Ÿï¼šGOOS=linux GOARCH=amd64Windows å¹³å° 32 ä½ç³»ç»Ÿï¼šGOOS=windows GOARCH=386Windows å¹³å° 64 ä½ç³»ç»Ÿï¼šGOOS=windows GOARCH=amd64MAC å¹³å° 32 ä½ç³»ç»Ÿï¼šGOOS=darwin GOARCH=386MAC å¹³å° 64 ä½ç³»ç»Ÿï¼šGOOS=darwin GOARCH=amd64ARM å¹³å°ï¼šGOOS=linux GOARCH=armÂ¶2. è¿è¡ŒæœåŠ¡ç«¯ç¨‹åº1234#ä¸ºäº†æ–¹ä¾¿ç›´æŽ¥å…³é—­é˜²ç«å¢™$ service firewalld stop#è¿è¡ŒæœåŠ¡ç«¯ç¨‹åº$ ~/ngrok/bin/ngrokd -domain="ngrok.example.com"Â¶ä¸‰ã€å®¢æˆ·ç«¯Â¶1. ä»£ç†webæœåŠ¡åœ¨æœ¬åœ°å®¢æˆ·ç«¯çš„windows_amd64ç›®å½•é‡Œæ–°å»ºæ–‡ä»¶ngrok.cfgå¹¶ç¼–è¾‘ï¼Œåœ¨æ–‡ä»¶é‡ŒåŠ å…¥ä»¥ä¸‹å†…å®¹ï¼š12server_addr: "ngrok.example.com:4443" trust_host_root_certs: falseå¯åŠ¨å®¢æˆ·ç«¯ç¨‹åº12#http://demo.ngrok.example.com:80$ ngrok -config=ngrok.cfg -subdomain demo 80å‡†ç¡®çš„è¯´è¿™ä¸ªå®¢æˆ·ç«¯æ˜¯èµ„æºæœåŠ¡å™¨ï¼Œè€ŒçœŸæ­£çš„å®¢æˆ·ç«¯å› è¯¥å±žäºŽå…¶ä»–ç»ˆç«¯ï¼Œæ•…å¯ä»¥åœ¨å…¶ä»–ç»ˆç«¯ä¸Šè®¿é—®http://demo.ngrok.example.com:80è¯·æ±‚è¿‡ç¨‹ï¼šå…¶ä»–ç»ˆç«¯â€”&gt;ä»£ç†æœåŠ¡å™¨â€”&gt;èµ„æºæœåŠ¡å™¨åœ¨ä»£ç†æœåŠ¡ç«¯ä¸­é€šè¿‡ä»¥ä¸‹å‘½ä»¤æŸ¥çœ‹å®¢æˆ·ç«¯æ˜ å°„åˆ°æœåŠ¡ç«¯çš„ç«¯å£ï¼ˆå¯ä»¥é€šè¿‡æ‰“å¼€å¦ä¸€ä¸ªç»ˆç«¯é¡µæ“ä½œï¼‰1$ netstat -tunlp|grep ngrokdÂ¶2. ä»£ç†tcpæœåŠ¡ngrokæ˜¯å¯ä»¥ä»£ç†tcpåè®®è¯·æ±‚çš„ï¼Œæ¯”å¦‚ä»£ç†mysqlï¼Œè®©å†…ç½‘ä¸­çš„mysqlæš´éœ²åˆ°å¤–ç½‘ï¼Œæä¾›ç»™å¤–ç½‘çš„ç”¨æˆ·ä½¿ç”¨ã€‚æ­¤å¤–ä¸ä»…å¯ä»¥ä»£ç†åˆ°å†…ç½‘ä¸­è¿è¡Œngrokå®¢æˆ·ç«¯çš„ä¸»æœºï¼Œè¿˜å¯ä»¥ä»£ç†åˆ°åŒä¸€ä¸ªå†…ç½‘çš„å…¶ä»–ä¸»æœºï¼Œç®€ç›´æš´åŠ›å¾—ä¸åƒè¯ã€‚ç¼–è¾‘å®¢æˆ·ç«¯é…ç½®æ–‡ä»¶windows_amd64/ngrok.cfg123456789101112131415server_addr: "ngrok.example.com:4443" trust_host_root_certs: false#éš§é“åˆ—è¡¨tunnels: mysql-localhost: remote_port: 3306 proto: #ä»£ç†åˆ°æœ¬åœ°çš„mysql,ç›¸å½“äºŽlocalhost:3306 tcp: 3306 mysql-other: remote_port: 3306 proto: #ä»£ç†åˆ°å†…ç½‘ä¸­çš„å…¶ä»–ä¸»æœºçš„mysql tcp: 192.168.222.131:3306æ³¨æ„remote_portæ˜¯è¿œç¨‹çš„ä»£ç†ç«¯å£ï¼ˆå¯ä»¥ä¿®æ”¹ä¸ºå…¶ä»–å€¼æ¥é˜²æ­¢æœåŠ¡å™¨ç«¯å£å†²çªï¼‰ï¼Œtcpæ˜¯æœ¬åœ°ç«¯å£ã€‚ngrokä¼šå°†ç«¯å£ä¸ºremote_portè¯·æ±‚ä»£ç†åˆ°æœ¬åœ°ç«¯å£ã€‚å¯åŠ¨å®¢æˆ·ç«¯ç¨‹åº1234567#ngrok -config ngrok.cfg start éš§é“åç§°#ä»£ç†åˆ°æœ¬åœ°çš„mysql$ ./ngrok.exe -config ngrok.cfg start mysql-localhost#ä»£ç†åˆ°å†…ç½‘ä¸­çš„å…¶ä»–ä¸»æœºçš„mysql$ ./ngrok.exe -config ngrok.cfg start mysql-otherÂ¶3. æ›´å¤šè¯¦ç»†ä»£ç†é…ç½®ðŸŽðŸŽðŸŽæœ€åŽçŒ®ä¸Šæˆ‘ä¸ªçš„å¸¸ç”¨å®¢æˆ·ç«¯ä»£ç†é…ç½®:123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657server_addr: "ngrok.example.com:4443"trust_host_root_certs: false#éš§é“åˆ—è¡¨tunnels: ##httpä»£ç†æœåŠ¡é…ç½® #é€šè¿‡subdomainé…ç½®å­åŸŸåï¼Œæµ‹è¯•ï¼šhttp://www.ngrok.example.com http: subdomain: www proto: http: 80 ##httpsä»£ç†æœåŠ¡é…ç½® #é€šè¿‡subdomainé…ç½®å­åŸŸåï¼Œæµ‹è¯•ï¼šhttps://www.ngrok.example.com https: subdomain: www proto: https: 443 ##sshè¿œç¨‹ç™»å½•ä»£ç†é…ç½® #é˜²æ­¢å’Œä»£ç†æœåŠ¡å™¨çš„sshç«¯å£å†²çªï¼Œæ‰€ä»¥æ”¹ç”¨2222 #æµ‹è¯•ï¼šssh -p 2222 root@ngrok.example.com ssh: remote_port: 2222 proto: tcp: 192.168.222.131:22 ##mysqlä»£ç†æœåŠ¡é…ç½® #æµ‹è¯•ï¼šmysql -h ngrok.example.com -u root -p #(1)ä»£ç†åˆ°æœ¬åœ°çš„mysql mysql-localhost: remote_port: 3306 proto: #ç›¸å½“äºŽlocalhost:3306 tcp: 3306 #(2)ä»£ç†åˆ°å†…ç½‘ä¸­çš„å…¶ä»–ä¸»æœºçš„mysql mysql-other: remote_port: 3306 proto: tcp: 192.168.222.131:3306 ##oracleä»£ç†æœåŠ¡é…ç½® oracle: remote_port: 1522 proto: tcp: 127.0.0.1:1521 ##gitlibä»£ç†æœåŠ¡é…ç½® gitlib: remote_port: 2222 proto: tcp: gitlab.example.com:2222]]></content>
      <categories>
        <category>tools</category>
      </categories>
      <tags>
        <tag>å†…ç½‘ç©¿é€</tag>
        <tag>åå‘ä»£ç†</tag>
        <tag>ngrok</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Linux æ­å»ºä¸ªäººçš„ gitpages æœåŠ¡]]></title>
    <url>%2Fblog%2Fgitpages.html</url>
    <content type="text"><![CDATA[gitpages æ˜¯ç»“åˆ git æœåŠ¡æ“ä½œçš„ web ç½‘é¡µæ‰˜ç®¡å¹³å°ã€‚é€šè¿‡ git æäº¤å†ç»“åˆ git hook è„šæœ¬å°±èƒ½å¾ˆå¥½çš„å°†æäº¤çš„æ–‡ä»¶ä¸Šä¼ åˆ°webæœåŠ¡è™šæ‹Ÿç›®å½•é‡Œã€‚ä½†æ˜¯ Githubã€Netlifyã€Coding ç­‰å·²ç»æä¾›äº†å…è´¹ gitpages æœåŠ¡ï¼Œä¸ºä»€ä¹ˆè¿˜è¦è‡ªå·±åœ¨ vps ä¸ŠæŠ˜è…¾æ­å»º gitpages å‘¢ï¼Ÿå› ä¸ºè¿™äº›æœåŠ¡å•†æä¾›çš„ gitpages æ˜¯æœ‰é™åˆ¶çš„ï¼Œæ¯”å¦‚ç©ºé—´å®¹é‡ç›¸å¯¹è¾ƒå°ã€å¯¹åŠ¨æ€ç½‘é¡µæ”¯æŒä¸å®Œå–„æˆ–è€…æ²¡æœ‰ã€è®¿é—®é€Ÿåº¦è¾ƒæ…¢ç­‰ã€‚é‚£ä¹ˆè‡ªå»ºçš„ gitpages çš„ä¼˜åŠ¿å°±æ˜¾çŽ°å‡ºæ¥äº†ã€‚ä¸‹é¢å°±ä»‹ç»æ€Žä¹ˆä¸€æ­¥æ­¥æ­å»ºè¯¥æœåŠ¡ã€‚Â¶1. æ­å»º git æœåŠ¡å™¨ä»“åº“Â¶1ï¼‰å®‰è£… git12apt install -y gityum install -y gitæŽ¥ä¸‹æ¥æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªgitç”¨æˆ·ç»„å’Œç”¨æˆ·ï¼Œç”¨æ¥è¿è¡ŒgitæœåŠ¡ï¼š1234#åˆ›å»ºgitç”¨æˆ·ç»„groupadd git#åˆ›å»ºgitç”¨æˆ·å¹¶è®¾ç½®ç™»å½•çš„shellä¸ºgit-shellï¼ˆé€šè¿‡è®¾ç½®git-shellï¼Œç”¨æˆ·å¯ä»¥é€šè¿‡SSHè¿žæŽ¥åˆ°ç³»ç»Ÿï¼Œä½†åªèƒ½ä¸Žè¿œç¨‹ä»“åº“è¿›è¡ŒGitäº¤äº’ï¼Œè€Œä¸èƒ½æ‰§è¡Œå…¶ä»–å‘½ä»¤ï¼Œä»Žè€Œç¡®ä¿gitç”¨æˆ·æ“ä½œçš„å®‰å…¨æ€§ï¼‰useradd git -g git -s /usr/bin/git-shellÂ¶2ï¼‰é…ç½® ssh ç§˜é’¥ç™»å½•æ”¶é›†æ‰€æœ‰éœ€è¦ç™»å½•çš„ç”¨æˆ·çš„å…¬é’¥ï¼Œå…¬é’¥ä½äºŽid_rsa.pubæ–‡ä»¶ä¸­ï¼ŒæŠŠæˆ‘ä»¬çš„å…¬é’¥å¯¼å…¥åˆ°/home/git/.ssh/authorized_keysæ–‡ä»¶é‡Œï¼Œä¸€è¡Œä¸€ä¸ªã€‚å¦‚æžœæ²¡æœ‰è¯¥æ–‡ä»¶åˆ›å»ºå®ƒï¼š12345mkdir -p /home/git/.sshchmod 755 /home/git/.sshtouch /home/git/.ssh/authorized_keyschmod 644 /home/git/.ssh/authorized_keyschown -R git:git /home/gité…ç½®å®¢æˆ·ç«¯çš„ ssh key åˆ°æœåŠ¡ç«¯ä¸­ï¼Œæ“ä½œå¦‚ä¸‹ï¼š1234#copyå®¢æˆ·ç«¯çš„ç§˜é’¥åˆ°vpsçš„/home/git/.ssh/authorized_keyscat ~/.ssh/id_rsa.pub#æŸ¥çœ‹sshç§˜é’¥æ˜¯å¦é…ç½®æˆåŠŸssh -T git@æœåŠ¡å™¨ipÂ¶3ï¼‰åˆ›å»º git ä»“åº“123mkdir -p /opt/blog/gitgit init --bare /opt/blog/git/blog.gitvim /opt/blog/git/blog.git/hooks/post-receive12#!/bin/bashgit --work-tree=/opt/blog/web --git-dir=/opt/blog/git/blog.git checkout -f12345chown -R git:git /opt/blog/git &amp;&amp; chgrp -R git /opt/blog/git &amp;&amp; chmod -R 755 /opt/blog/gitchmod +x /opt/blog/git/blog.git/hooks/post-receivemkdir -p /opt/blog/webchmod -R 777 /opt/blog/webÂ¶4ï¼‰å…¶ä»–æ–¹å¼æ­å»º git æœåŠ¡å™¨ä»“åº“ä»¥ä¸Šæ–¹å¼æ˜¯é€šè¿‡ git åŽŸå§‹æ”¯æŒçš„æ–¹å¼æ­å»º git æœåŠ¡å™¨ä»“åº“ï¼Œæ­¤å¤–è¿˜å¯ä»¥é€šè¿‡æ­å»ºå¼€æºçš„ git ä»“åº“æ‰˜ç®¡å¹³å°ï¼ˆå¦‚ï¼šGitlabã€Gogs ç­‰ï¼‰æ¥åˆ›å»ºæœåŠ¡å™¨ä»“åº“ï¼Œå…¶ä½¿ç”¨ä½“éªŒä¼šæ›´å¥½ã€‚å¯¹äºŽåœ¨ Gogs ä¸­ä½¿ç”¨ Git é’©å­æ¥éƒ¨ç½²ç½‘ç«™ï¼Œåˆ™æ“ä½œå¦‚ä¸‹ï¼ˆè®¾ Gogs æ˜¯é€šè¿‡ Docker å®‰è£…çš„ï¼‰ï¼š12345docker exec -it gogs bashrm -rf /opt/cache/myblogmkdir -p /opt/cache/myblogchmod -R 777 /opt/cache/myblogexitå¯åœ¨ Gogs åŽå°é¢æ¿ä¸­çš„å¯¹åº”ä»“åº“ï¼Œå¹¶æ‰¾åˆ°â€œç®¡ç† Git é’©å­â€ï¼Œä¿®æ”¹ post-receiveï¼Œå†…å®¹å¦‚ä¸‹ï¼š12345678910111213141516171819#!/bin/sh## An example hook script for the "post-receive" event.## The "post-receive" script is run after receive-pack has accepted a pack# and the repository has been updated. It is passed arguments in through# stdin in the form# &lt;oldrev&gt; &lt;newrev&gt; &lt;refname&gt;# For example:# aa453216d1b3e49e7f6f98441fa56946ddcd6a20 68f7abf4e6f922807889f52bc043ecd31b79f814 refs/heads/masterwhile read oldrev newrev refnamedo branch=$(git rev-parse --symbolic --abbrev-ref $refname) if [ "master" = "$branch" ]; then # Do something git --work-tree=/opt/cache/myblog --git-dir=/data/git/gogs-repositories/qcmoke/myblog.git checkout -f fidoneæç¤ºï¼šä»¥ä¸Šçš„ /data/git/gogs-repositories/qcmoke/myblog.git æ˜¯å¯¹åº”ä»“åº“åœ¨ Gogs å®¹å™¨ä¸­çš„è·¯å¾„ï¼Œå…¶ä¸­ /data/git/gogs-repositories æ˜¯å›ºå®šçš„ï¼Œè€Œ /qcmoke/myblog.git åˆ™éœ€æ ¹æ®è‡ªå·±çš„æƒ…å†µè¿›è¡Œä¿®æ”¹ã€‚Â¶2. æ­å»º web æœåŠ¡éœ€è¦å®‰è£…å¥½nginxï¼Œå¯ä»¥å‚è€ƒæˆ‘çš„å¦ä¸€ç¯‡æ–‡ç« ã€Šnginxå­¦ä¹ ç¬”è®°ã€‹ã€‚è¿™é‡Œå·²ç»æå‰é€šè¿‡ç¼–è¯‘å®‰è£…çš„æ–¹å¼æŠŠnginxå®‰è£…åˆ°äº†/opt/nginxç›®å½•ï¼Œç„¶åŽåªéœ€é…ç½®nginxå³å¯ã€‚1vim /opt/nginx/conf/conf.d/blog.conf12345678server &#123; listen 80; server_name example.com; #å¡«å†™ä¸ªäººåŸŸå location / &#123; root /data/blog; #é…ç½®webæ ¹ç›®å½• index index.html; &#125;&#125;1234#å¯åŠ¨nginxï¼ˆå¦‚æžœæ²¡æœ‰å¯åŠ¨çš„è¯ï¼‰nginx#é‡æ–°åŠ è½½nginxé…ç½®æ–‡ä»¶nginx -s reloadÂ¶3. é…ç½® https æœåŠ¡ä½¿ç”¨ https å°±éœ€è¦é…ç½® SSL è¯ä¹¦ ï¼ŒSSLè¯ä¹¦æœ‰å…è´¹çš„å’Œä»˜è´¹çš„ï¼Œè¿™é‡Œä½¿ç”¨çš„æ˜¯å…è´¹çš„ Letâ€™ s Encrypt SSLè¯ä¹¦ã€‚å…·ä½“æ“ä½œå‚è€ƒã€Šé€šè¿‡certbotå·¥å…·ç”Ÿæˆsslè¯ä¹¦ã€‹ã€‚å‚è€ƒè¯¥æ•™ç¨‹ä½¿ç”¨ certbot å·¥å…·é€šè¿‡HTTP éªŒè¯æ¨¡å¼ç”³è¯·ç­¾å‘å¤šåŸŸåè¯ä¹¦ã€‚é…ç½®nginx webæœåŠ¡1vim /opt/nginx/conf/conf.d/blog.conféœ€æ±‚ï¼šhttp://example.comã€http://www.example.comã€https://example.coméƒ½é‡å®šå‘åˆ°https://www.example.comï¼Œå¹¶ä¸”å›¾ç‰‡éƒ½èƒ½åŽ‹ç¼©ä¼ è¾“ã€‚12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152server &#123; listen 80; listen 443 ssl; server_name example.com; # é…ç½®åŸŸåæ‰€å±žçš„SSLè¯ä¹¦å’Œç§é’¥æ–‡ä»¶ ssl_certificate /path/fullchain.pem; ssl_certificate_key /path/privkey.pem; ssl_ciphers HIGH:!aNULL:!MD5; ssl_prefer_server_ciphers on; charset utf-8; # è¯·æ±‚å…¨éƒ¨è·³è½¬åˆ° https://www.example.com location / &#123; #rewrite ^ https://www.$host$request_uri? permanent; #rewrite ^(.*)$ https://www.$host$1 permanent; return 301 https://www.$host$request_uri; &#125;&#125;server &#123; listen 80; listen 443 ssl; server_name www.example.com; # é…ç½®åŸŸåæ‰€å±žçš„SSLè¯ä¹¦å’Œç§é’¥æ–‡ä»¶ ssl_certificate /path/fullchain.pem; ssl_certificate_key /path/privkey.pem; ssl_ciphers HIGH:!aNULL:!MD5; ssl_prefer_server_ciphers on; charset utf-8; root /opt/blog/web; #root /opt/cache/myblog; index index.html index.htm; error_page 404 /404.html; # è¯·æ±‚å…¨éƒ¨è·³è½¬åˆ° https if ($scheme = http) &#123; return 301 https://$host$request_uri; &#125; location ~ .*\.(jpg|png|gif)$ &#123; # root /opt/blog/web/images; #ä¼ è¾“åŽ‹ç¼©ï¼ŒåŽ‹ç¼©æœ¬èº«æ¯”è¾ƒè€—è´¹æœåŠ¡ç«¯æ€§èƒ½ï¼Œä½†ç»™å¸¦å®½å¸¦æ¥æ›´å¥½çš„ä¼ è¾“ã€‚æ°å½“çš„ä½¿ç”¨ä¼šå¢žå¼ºèµ„æºçš„è®¿é—®æ•ˆçŽ‡ã€‚ gzip on; gzip_http_version 1.1; gzip_comp_level 2; #åŽ‹ç¼©çš„æ–‡ä»¶ç±»åž‹ï¼Œä¸€èˆ¬æŒ‰éœ€é€‰æ‹©ï¼Œä½†è¿™é‡Œä¸ºäº†æœªæ¥æ–¹ä¾¿æ·»åŠ æ–‡ä»¶ç±»åž‹å¤šé€‰ä¸€äº›ã€‚å…·ä½“é…ç½®å‚è€ƒæ–‡ä»¶/etc/nginx/mime.types gzip_types gzip_types text/plain application/json application/x-javascript application/css application/xml application/xml+rss text/javascript application/x-httpd-php image/jpeg image/gif image/png; #è®¾ç½®é™æ€èµ„æºæ–‡ä»¶åœ¨å®¢æˆ·ç«¯çš„ç¼“å­˜æ—¶é—´ï¼Œé™¤éžå®¢æˆ·æ¸…æ¥šç¼“å­˜æˆ–è€…å…³é—­ç¼“å­˜æˆ–è€…å¼ºåˆ¶è®¿é—®æ‰ä¼šå†è®¿é—®ã€‚ expires 5h; &#125;&#125;é‡è½½é…ç½®1nginx -s reloadÂ¶4. æµ‹è¯•å®¢æˆ·æœº123456git clone git@example.com:/opt/blog/git/blog.gitcd blog/echo "&lt;h1&gt;My Bolg&lt;/h1&gt;" &gt;&gt; index.htmlgit add . git commit -m "init my blog"git push -u origin masterä¹‹åŽæµè§ˆå™¨è®¿é—®http://example.comå°±èƒ½è®¿é—®åˆ°pushåˆ°æœåŠ¡å™¨çš„index.htmlé¡µé¢äº†ã€‚ðŸ“š å‚è€ƒhttps://www.jianshu.com/p/23aa1eef5b23https://juejin.im/post/5c935d7c6fb9a070b24b11a6]]></content>
      <categories>
        <category>blog</category>
      </categories>
      <tags>
        <tag>nginx</tag>
        <tag>git</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[nginx+vsftpæ­å»ºå›¾ç‰‡æœåŠ¡å™¨]]></title>
    <url>%2Fdevops%2Fftp_nginx.html</url>
    <content type="text"><![CDATA[Â¶ä¸€ã€nginxNginxæ˜¯ä¸€æ¬¾è½»é‡çº§çš„Web æœåŠ¡å™¨/åå‘ä»£ç†æœåŠ¡å™¨åŠç”µå­é‚®ä»¶ï¼ˆIMAP/POP3ï¼‰ä»£ç†æœåŠ¡å™¨ï¼Œå¹¶åœ¨ä¸€ä¸ªBSD-like åè®®ä¸‹å‘è¡Œã€‚å…¶ç‰¹ç‚¹æ˜¯å æœ‰å†…å­˜å°‘ï¼Œå¹¶å‘èƒ½åŠ›å¼ºï¼Œäº‹å®žä¸Šnginxçš„å¹¶å‘èƒ½åŠ›ç¡®å®žåœ¨åŒç±»åž‹çš„ç½‘é¡µæœåŠ¡å™¨ä¸­è¡¨çŽ°è¾ƒå¥½ï¼Œä¸­å›½å¤§é™†ä½¿ç”¨nginxç½‘ç«™ç”¨æˆ·æœ‰ï¼šç™¾åº¦ã€äº¬ä¸œã€æ–°æµªã€ç½‘æ˜“ã€è…¾è®¯ã€æ·˜å®ç­‰ã€‚ä»¥ä¸Šæ˜¯ç™¾åº¦ç™¾ç§‘çš„ä»‹ç»ï¼Œæˆ‘ä»¬ç›®å‰åªéœ€è¦çŸ¥é“nginxæ˜¯ä¸€ä¸ªæœåŠ¡å™¨å°±è¡Œäº†ï¼Œç±»ä¼¼äºŽtomcatçš„æœåŠ¡å™¨ï¼Œåªä¸è¿‡æˆ‘ä»¬æŠŠå®ƒç”¨æ¥ä¿å­˜å›¾ç‰‡ã€‚Â¶äºŒã€vsftpVSFTPæ˜¯ä¸€ä¸ªåŸºäºŽGPLå‘å¸ƒçš„ç±»Unixç³»ç»Ÿä¸Šä½¿ç”¨çš„FTPæœåŠ¡å™¨è½¯ä»¶ï¼Œå®ƒæœ‰å®‰å…¨ã€é«˜é€Ÿã€ç¨³å®šç­‰ç‰¹ç‚¹ã€‚æˆ‘ä»¬æš‚ä¸”è¿™æ ·ç†è§£:vsftpå°±æ˜¯ç”¨æ¥ä¼ è¾“æ–‡ä»¶çš„ä¸€ä¸ªæœåŠ¡ï¼Œåœ¨linuxç³»ç»Ÿä¸­å¼€å¯vsftpæœåŠ¡ï¼Œå¹¶åœ¨windowsä¸­å°±å¯ä»¥é€šè¿‡æœåŠ¡å™¨çš„ipã€ç«¯å£ã€ç”¨æˆ·ååŠå¯†ç æ¥è¿žæŽ¥vsftpæœåŠ¡ï¼Œä¹‹åŽå°±å¯ä»¥æ–¹ä¾¿çš„æŠŠwindowsä¸­ä¸œè¥¿ä¸Šä¼ åˆ°linuxä¸­ï¼Œä¹Ÿå¯ä»¥æŠŠlinuxä¸­çš„ä¸œè¥¿ä¸‹è½½åˆ°windowsä¸­ã€‚Â¶ä¸‰ã€nginx+vsftpä¸Šé¢åˆ†åˆ«ä»‹ç»äº†nginxå’Œvsftpï¼Œé‚£ä¹ˆè¿™ä¸¤ä¸ªä¸œè¥¿æ€Žä¹ˆç»„åˆèµ·æ¥ç”¨å‘¢ï¼Ÿæ€Žä¹ˆå®žçŽ°å›¾ç‰‡æœåŠ¡å™¨å‘¢ï¼Ÿæˆ‘ä»¬çŸ¥é“ï¼Œtomcatå®‰è£…å¥½å¯åŠ¨åŽï¼Œåœ¨æµè§ˆå™¨è¾“å…¥localhost:8080ï¼Œå°±ä¼šå‡ºçŽ°tomcatçš„æ¬¢è¿Žé¡µï¼Œnginxä¹Ÿä¸€æ ·ã€‚æ¯”å¦‚linuxçš„ipæ˜¯192.168.50.122ï¼Œé‚£ä¹ˆå¯åŠ¨nginxåŽï¼Œåœ¨æµè§ˆå™¨è®¿é—®è¿™ä¸ªåœ°å€ä¹Ÿä¼šå‡ºçŽ°nginxçš„æ¬¢è¿Žé¡µï¼Œå…¶å®žæ˜¯å› ä¸ºå®ƒæœ‰ä¸ªé»˜è®¤çš„è®¿é—®é¡µé¢ï¼Œå®Œæ•´çš„åœ°å€åº”è¯¥æ˜¯192.168.50.122/index.htmlï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±å¯ä»¥æ ¹æ®è¿™ä¸ªï¼ŒæŠŠå®ƒé»˜è®¤çš„è®¿é—®è·¯å¾„é¢æ”¹æˆæˆ‘ä»¬ä¸Šä¼ çš„å›¾ç‰‡çš„ä¿å­˜è·¯å¾„ï¼Œæ¯”å¦‚ä¸Šä¼ äº†ä¸€å¼ pic.jpgå›¾ç‰‡åˆ°linuxçš„/home/ftpuser/imagesä¸­ï¼Œå¦‚æžœæˆ‘ä»¬æŠŠwebæ ¹è·¯å¾„è®¾ç½®ä¸ºï¼š/home/ftpuserï¼Œé‚£ä¹ˆåœ¨æµè§ˆå™¨ä¸­è¾“å…¥192.168.50.122/images/pic.jpgï¼Œå°±å¯ä»¥è®¿é—®åˆ°è¿™å¼ å›¾ç‰‡äº†ã€‚ä¸‹é¢å°±æ¥ä»‹ç»nginxã€vsftpçš„å®‰è£…ä»¥åŠé…ç½®ã€‚Â¶å››ã€å®‰è£…nginxÂ¶1.å‡†å¤‡æ´»åŠ¨123456##ä¸‹è½½wget http://nginx.org/download/nginx-1.14.0.tar.gz##è§£åŽ‹tar zxvf nginx-1.14.0.tar.gz##è®¾ç½®vimç¼–è¾‘nginxé…ç½®æ–‡ä»¶è¯­æ³•é«˜äº®ï¼ˆå¯é€‰ï¼Œå¦‚æžœä¸æƒ³ç”¨äº†ç›´æŽ¥åˆ é™¤~/.vim/ç›®å½•å³å¯ï¼‰mkdir ~/.vim &amp;&amp; cp -r nginx-1.14.0/contrib/vim/* ~/.vim/Â¶2. å®‰è£…ç¼–è¯‘å·¥å…·åŠä¾èµ–åº“æ–‡ä»¶1yum -y install make zlib zlib-devel gcc-c++ libtool openssl openssl-devel pcre pcre-develÂ¶3.ç¼–è¯‘å®‰è£…12345678910111213141516#è¿›å…¥è§£åŽ‹å¥½çš„æºç ç›®å½•cd nginx-1.14.0#ç”ŸæˆMakeFile./configure \--prefix=/usr/local/nginx \--with-http_stub_status_module \--with-http_ssl_module \--with-http_sub_module \--with-http_gzip_static_module#æ ¹æ®MakeFileç¼–è¯‘make#å®‰è£…make installÂ¶4.å¯åŠ¨1&#x2F;usr&#x2F;local&#x2F;nginx&#x2F;sbin&#x2F;nginxæŸ¥çœ‹æ˜¯å¦å¯åŠ¨å‘½ä»¤ï¼š ps aux | grep nginxÂ¶5.åœæ­¢123/usr/local/nginx/sbin/nginx -s stop#æˆ–è€…/usr/local/nginx/sbin/nginx -s quitÂ¶6 åŠ¨æ€åŠ è½½1/usr/local/nginx/sbin/nginx -s reloadåŒºåˆ«ï¼šnginx -s quit:æ­¤æ–¹å¼åœæ­¢æ­¥éª¤æ˜¯å¾…nginxè¿›ç¨‹å¤„ç†ä»»åŠ¡å®Œæ¯•è¿›è¡Œåœæ­¢ã€‚nginx -s stop:æ­¤æ–¹å¼ç›¸å½“äºŽå…ˆæŸ¥å‡ºnginxè¿›ç¨‹idå†ä½¿ç”¨killå‘½ä»¤å¼ºåˆ¶æ€æŽ‰è¿›ç¨‹ã€‚nginx -s reload:åŠ¨æ€åŠ è½½ï¼Œå½“é…ç½®æ–‡ä»¶nginx.confæœ‰å˜åŒ–æ—¶æ‰§è¡Œè¯¥å‘½ä»¤åŠ¨æ€åŠ è½½ã€‚Â¶7 æµ‹è¯•é…ç½®æ–‡ä»¶nginx.confæ­£ç¡®æ€§1/usr/local/nginx/sbin/nginx -tÂ¶8.å…¶ä»–å¸¸ç”¨å‘½ä»¤12#æŸ¥çœ‹ç¼–è¯‘åŠ è½½çš„æ¨¡å—/usr/local/nginx/sbin/nginx -VÂ¶äº”ã€å®‰è£…vsftpÂ¶1. å®‰è£…1yum -y install vsftpdÂ¶2. å…³é—­SELinuxå‘½ä»¤è¡Œè®¾ç½®selinux12setenforce 0 # è®¾ç½®SELinux æˆä¸ºpermissiveæ¨¡å¼ ï¼ˆä¸´æ—¶å…³é—­SELinuxï¼‰setenforce 1 # è®¾ç½®SELinux æˆä¸ºenforcingæ¨¡å¼ ï¼ˆä¸´æ—¶å¼€å¯SELinuxï¼‰æˆ–è€…ä¿®æ”¹selinuxé…ç½®æ–‡ä»¶ï¼ˆæ°¸ä¹…ï¼‰1234567vi /etc/selinux/config# SELINUX=enforcing # æ³¨é‡ŠæŽ‰# SELINUXTYPE=targeted # æ³¨é‡ŠæŽ‰SELINUX=disabled # å¢žåŠ :wq! #ä¿å­˜é€€å‡ºsetenforce 0æˆ–è€…è®¾ç½®SELinux123456getsebool -a | grep ftpsetsebool -P ftpd_full_access onsystemctl stop firewalld.service#åœæ­¢firewallsystemctl disable firewalld.service#ç¦æ­¢firewallå¼€æœºå¯åŠ¨Â¶3. é˜²ç«å¢™è®¾ç½®å…³é—­é˜²ç«å¢™ï¼Œå¦‚æžœä½ ä¸æ„¿æ„å…³é—­é˜²ç«å¢™ï¼Œéœ€è¦é˜²ç«å¢™æ·»åŠ FTPæœåŠ¡ã€‚12firewall-cmd --permanent --zone=public --add-service=ftpfirewall-cmd --reloadÂ¶4. è®¾ç½®å¼€æœºå¯åŠ¨1[root@localhost ~]# chkconfig vsftpd onÂ¶5. é…åˆvsftp1vim /etc/vsftpd/vsftpd.conf123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129# Example config file /etc/vsftpd/vsftpd.conf## The default compiled in settings are fairly paranoid. This sample file# loosens things up a bit, to make the ftp daemon more usable.# Please see vsftpd.conf.5 for all compiled in defaults.## READ THIS: This example file is NOT an exhaustive list of vsftpd options.# Please read the vsftpd.conf.5 manual page to get a full idea of vsftpd's# capabilities.## Allow anonymous FTP? (Beware - allowed by default if you comment this out).anonymous_enable=YES## Uncomment this to allow local users to log in.# When SELinux is enforcing check for SE bool ftp_home_dirlocal_enable=YES## Uncomment this to enable any form of FTP write command.write_enable=YES## Default umask for local users is 077. You may wish to change this to 022,# if your users expect that (022 is used by most other ftpd's)local_umask=022## Uncomment this to allow the anonymous FTP user to upload files. This only# has an effect if the above global write enable is activated. Also, you will# obviously need to create a directory writable by the FTP user.# When SELinux is enforcing check for SE bool allow_ftpd_anon_write, allow_ftpd_full_access#anon_upload_enable=YES## Uncomment this if you want the anonymous FTP user to be able to create# new directories.#anon_mkdir_write_enable=YES## Activate directory messages - messages given to remote users when they# go into a certain directory.dirmessage_enable=YES## Activate logging of uploads/downloads.xferlog_enable=YES## Make sure PORT transfer connections originate from port 20 (ftp-data).connect_from_port_20=YES## If you want, you can arrange for uploaded anonymous files to be owned by# a different user. Note! Using "root" for uploaded files is not# recommended!#chown_uploads=YES#chown_username=whoever## You may override where the log file goes if you like. The default is shown# below.#xferlog_file=/var/log/xferlog## If you want, you can have your log file in standard ftpd xferlog format.# Note that the default log file location is /var/log/xferlog in this case.xferlog_std_format=YES## You may change the default value for timing out an idle session.#idle_session_timeout=600## You may change the default value for timing out a data connection.#data_connection_timeout=120## It is recommended that you define on your system a unique user which the# ftp server can use as a totally isolated and unprivileged user.#nopriv_user=ftpsecure## Enable this and the server will recognise asynchronous ABOR requests. Not# recommended for security (the code is non-trivial). Not enabling it,# however, may confuse older FTP clients.#async_abor_enable=YES## By default the server will pretend to allow ASCII mode but in fact ignore# the request. Turn on the below options to have the server actually do ASCII# mangling on files when in ASCII mode. The vsftpd.conf(5) man page explains# the behaviour when these options are disabled.# Beware that on some FTP servers, ASCII support allows a denial of service# attack (DoS) via the command "SIZE /big/file" in ASCII mode. vsftpd# predicted this attack and has always been safe, reporting the size of the# raw file.# ASCII mangling is a horrible feature of the protocol.#ascii_upload_enable=YES#ascii_download_enable=YES## You may fully customise the login banner string:#ftpd_banner=Welcome to blah FTP service.## You may specify a file of disallowed anonymous e-mail addresses. Apparently# useful for combatting certain DoS attacks.#deny_email_enable=YES# (default follows)#banned_email_file=/etc/vsftpd/banned_emails## You may specify an explicit list of local users to chroot() to their home# directory. If chroot_local_user is YES, then this list becomes a list of# users to NOT chroot().# (Warning! chroot'ing can be very dangerous. If using chroot, make sure that# the user does not have write access to the top level directory within the# chroot)chroot_local_user=YESallow_writeable_chroot=YES#chroot_list_enable=YES# (default follows)#chroot_list_file=/etc/vsftpd/chroot_list## You may activate the "-R" option to the builtin ls. This is disabled by# default to avoid remote users being able to cause excessive I/O on large# sites. However, some broken FTP clients such as "ncftp" and "mirror" assume# the presence of the "-R" option, so there is a strong case for enabling it.#ls_recurse_enable=YES## When "listen" directive is enabled, vsftpd runs in standalone mode and# listens on IPv4 sockets. This directive cannot be used in conjunction# with the listen_ipv6 directive.listen=NO## This directive enables listening on IPv6 sockets. By default, listening# on the IPv6 "any" address (::) will accept connections from both IPv6# and IPv4 clients. It is not necessary to listen on *both* IPv4 and IPv6# sockets. If you want that (perhaps because you want to listen on specific# addresses) then you must run two copies of vsftpd with two configuration# files.# Make sure, that one of the listen options is commented !!listen_ipv6=YESpam_service_name=vsftpduserlist_enable=YEStcp_wrappers=YESÂ¶6. é‡å¯vsftpd1systemctl restart vsftpd.serviceÂ¶7. æ·»åŠ ftpç”¨æˆ·1useradd -m -d /home/ftpuser/ ftpuserå¦‚æžœä¸è®©ftpuserç™»é™†sshï¼Œä½†æ˜¯å¯ä»¥ç™»å½•ftpå¯ä»¥é€‰æ‹©ä¸‹é¢çš„ä¸¤æ¡å‘½ä»¤æ“ä½œ1234567#ç¦æ­¢ç”¨æˆ·sshç™»å½•useradd -m -d /home/ftpuser -s /sbin/nologin ftpuser#å…è®¸ç¦æ­¢sshç™»é™†çš„ç”¨æˆ·ftpç™»å½•ï¼Œé‡ŠæŽ‰PAMæ¨¡å—å¯¹vsftpç™»å½•çš„è¿‡åº¦éªŒè¯é…ç½®vim /etc/pam.d/vsftpd##æ³¨é‡ŠæŽ‰ä¸‹é¢è¿™è¡Œ#auth required pam_shells.soÂ¶8. ç»™ftpç”¨æˆ·æ·»åŠ å¯†ç 1passwd ftpuserè¾“å…¥ä¸¤æ¬¡å¯†ç åŽä¿®æ”¹å¯†ç ã€‚Â¶9. è®¾ç½®è®¿é—®æƒé™1chmod -R 755 /home/ftpuserÂ¶10. ç™»å½•vsftpæµ‹è¯•ä¸‹è½½å®¢æˆ·ç«¯å·¥å…·ï¼Œæ¯”å¦‚FTPRushå®‰è£…å¥½ftpå®¢æˆ·ç«¯åŽï¼Œè¿žæŽ¥æœåŠ¡å™¨è¿‡ç¨‹å¦‚å›¾ï¼šæ­¤æ—¶ftpuserç”¨æˆ·è®¿é—®åˆ°çš„æ ¹ç›®å½•å…¶å®žæ˜¯æœåŠ¡å™¨çš„/home/ftpuserç›®å½•ã€‚å¯åœ¨è¿™ä¸ªç›®å½•é‡Œå®žçŽ°ç®€å•çš„æ–‡ä»¶æ“ä½œã€‚Â¶å…­ã€æ•´åˆnginxå’Œvsftpå…¶å®žå°±æ˜¯å°†ftpuserç”¨æˆ·çš„ä¸»ç›®å½•å®šä¹‰ä¸ºnginxçš„webæ ¹ç›®å½•ï¼Œå¦‚æ­¤å°±èƒ½å®žçŽ°åŸºäºŽhttpèµ„æºçš„å›¾ç‰‡ç³»ç»Ÿã€‚12345678910111213141516171819server &#123; listen 80; server_name localhost; #charset koi8-r; #access_log logs/host.access.log main; location / &#123; #root html; root /home/ftpuser; #é…ç½®webæ ¹ç›®å½• index index.html index.htm; &#125; #å…¶ä»–å†…å®¹çœç•¥ ....... ....... .......&#125;nginxåŠ è½½é…ç½®æ–‡ä»¶1/usr/local/nginx/sbin/nginx -s reloadè®¿é—®æµ‹è¯•é€šè¿‡ftpå®¢æˆ·ç«¯å·¥å…·ä¸Šä¼ å¥½å›¾ç‰‡åŽï¼Œæ¯”å¦‚å…ˆé€šè¿‡ftpå®¢æˆ·ç«¯åˆ›å»ºä¸€ä¸ªimagesç›®å½•ï¼Œç„¶åŽåœ¨ç›®å½•é‡Œä¸Šä¼ å›¾ç‰‡90c8013a-2bc4-491c-b74e-d0505b215dd6_logo.jpgã€‚å¯é€šè¿‡è®¿é—®åœ°å€è®¿é—®åˆ°å›¾ç‰‡ã€‚http://101.132.45.132/images/90c8013a-2bc4-491c-b74e-d0505b215dd6_logo.jpg]]></content>
      <categories>
        <category>devops</category>
      </categories>
      <tags>
        <tag>nginx</tag>
        <tag>ftp</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Cmderå·¥å…·ä½¿ç”¨æ•™ç¨‹]]></title>
    <url>%2Ftools%2Fcmder.html</url>
    <content type="text"><![CDATA[è®°å½•ä¸€æ¬¡Cmderå®‰è£…å’Œä½¿ç”¨çš„åŽ†ç¨‹â€¦1. å®‰è£ Cmderæ‰“å¼€Cmderå®˜ç½‘ï¼Œä¸‹è½½çš„æ—¶å€™ï¼Œæœ‰ä¸¤ä¸ªç‰ˆæœ¬ï¼Œåˆ†åˆ«æ˜¯miniä¸Žfullç‰ˆï¼›ä¸¤ä¸ªçš„å·®åˆ«åœ¨äºŽæœ‰æ²¡æœ‰å†…å»ºgit-for-windowså·¥å…·ï¼›æˆ‘è¿™é‡Œé€‰æ‹©fullç‰ˆæœ¬ç‚¹å‡»ä¸‹è½½ã€‚ä¸‹è½½çš„æ˜¯Cmderçš„åŽ‹ç¼©åŒ…, å¯è§£åŽ‹å³ç”¨ã€‚2. å¯åŠ¨ Cmderâ€‹ Cmderæ˜¯å³åŽ‹å³ç”¨çš„å­˜åœ¨ï¼Œæ‰€ä»¥è§£åŽ‹åŽåŒå‡»å‡»Cmder.exeå³å¯è¿è¡Œï¼ˆå¯åŠ¨ï¼‰ã€‚3. é…ç½® Cmderâ€‹ æ¯æ¬¡è¿›å…¥åˆ°Cmderè§£åŽ‹ç›®å½•åŒå‡»Cmder.exeæ‰“å¼€çš„æ–¹å¼å¾ˆéº»çƒ¦ï¼Œå¯ä»¥ä½¿ç”¨ä¸‹é¢å‡ ç§æ–¹å¼å¾ˆå¥½çš„è§£å†³é—®é¢˜ï¼›â€‹ aã€æŠŠ Cmder åŠ åˆ°çŽ¯å¢ƒå˜é‡â€‹ æŠŠCmder.exeå­˜æ”¾çš„ç›®å½•æ·»åŠ åˆ°ç³»ç»ŸçŽ¯å¢ƒå˜é‡ï¼›åŠ å®Œä¹‹åŽ,Win+rä¸€ä¸‹è¾“å…¥cmder,å³å¯ã€‚å¦‚ä¸‹å›¾ï¼šbã€æ·»åŠ é¼ æ ‡å³é”®ä»¥ç®¡ç†å‘˜æƒé™æ‰“å¼€cmdï¼Œè¾“å…¥ä¸‹é¢å‘½ä»¤ï¼ˆå…ˆæŠŠ cmder æ·»åŠ åˆ°ç³»ç»Ÿå˜é‡ä¸­ï¼‰1Cmder.exe &#x2F;REGISTER ALLé…ç½®å®ŒæˆåŽï¼Œé¼ æ ‡å³é”®å¯çœ‹åˆ° cmder é€‰é¡¹ï¼Œæ‰“å¼€ cmderï¼Œç»ˆç«¯æ˜¾ç¤ºç›®å½•ä¸ºå½“å‰ç›®å½•è‹¥æƒ³åˆ é™¤é¼ æ ‡å³é”®æ‰“å¼€ cmderï¼Œæ ¹ç›®å½•æ–°å»ºæ–‡ä»¶*.batï¼Œå†™å…¥ä¸‹é¢å†…å®¹ï¼Œä»¥ç®¡ç†å‘˜èº«ä»½è¿è¡Œå³å¯123@echo offReg delete &quot;HKEY_LOCAL_MACHINE\SOFTWARE\Classes\Directory\Background\shell\Cmder&quot; &#x2F;fpauseå‚è€ƒï¼šhttps://xiaogliu.github.io/2017/04/07/install-and-configure-cmder/]]></content>
      <categories>
        <category>tools</category>
      </categories>
      <tags>
        <tag>Cmder</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[vueå­¦ä¹ ç¬”è®°]]></title>
    <url>%2Ffront%2Fvue.html</url>
    <content type="text"><![CDATA[è™½ç„¶æœ¬äººæ›´å¤šä»Žäº‹çš„æ˜¯javaåŽç«¯å¼€å‘ï¼Œä½†ä½œä¸ºä¸€åç²¾ç¥žå°ä¼™ï¼Œæœ¬å°±æœ‰ç€æž¶æž„çš„æ¢¦æƒ³ï¼Œæ‰€ä»¥ä¸€ç›´å¸Œæœ›è‡ªå·±å‰åŽç«¯éƒ½è¦æœ‰æ‰€æ¶‰çŒŽï¼ŒäºŽæ˜¯å¼€å§‹å­¦ä¹ Vueæ¡†æž¶ä½œä¸ºæ‹“å±•å‰ç«¯é“è·¯çš„è¯•æ°´åŒºã€‚Â¶ä¸€ã€ç®€ä»‹å®˜ç½‘ï¼šhttps://cn.vuejs.orgÂ¶1. æ¦‚å¿µVue.jsæ˜¯ä¸€å¥—æž„å»ºç”¨æˆ·ç•Œé¢çš„æ¸è¿›å¼æ¡†æž¶ã€‚Vueåªå…³æ³¨è§†å›¾å±‚ï¼Œ é‡‡ç”¨è‡ªåº•å‘ä¸Šå¢žé‡å¼€å‘çš„è®¾è®¡ã€‚Vue çš„ç›®æ ‡æ˜¯é€šè¿‡å°½å¯èƒ½ç®€å•çš„ APIå®žçŽ°å“åº”çš„æ•°æ®ç»‘å®šå’Œç»„åˆçš„è§†å›¾ç»„ä»¶ã€‚ç®€å•çš„ç†è§£ï¼šVueå°±æ˜¯å’ŒjQueryç±»ä¼¼ä½†æ›´å¼ºçš„ä¸€ä¸ªå‰ç«¯æ¡†æž¶ï¼Œå®ƒçš„ä¸­å¿ƒæ€æƒ³å°±æ˜¯æ•°æ®é©±åŠ¨ã€‚è€ŒjQueryæ˜¯ç»“æž„é©±åŠ¨çš„ï¼Œå…·ä½“æ¥è¯´jQueryä¸ç®—æ¡†æž¶ï¼Œè€Œæ˜¯jsåº“ã€‚Vue.js æ˜¯ç›®å‰æœ€ç«çš„ä¸€ä¸ªå‰ç«¯æ¡†æž¶ï¼ŒReactæ˜¯æœ€æµè¡Œçš„ä¸€ä¸ªå‰ç«¯æ¡†æž¶ï¼ˆReacté™¤äº†å¼€å‘ç½‘ç«™ï¼Œè¿˜å¯ä»¥å¼€å‘æ‰‹æœºAppï¼Œ Vueè¯­æ³•ä¹Ÿæ˜¯å¯ä»¥ç”¨äºŽè¿›è¡Œæ‰‹æœºAppå¼€å‘çš„ï¼Œéœ€è¦å€ŸåŠ©äºŽWeexï¼‰Vue.js æ˜¯å‰ç«¯çš„ä¸»æµæ¡†æž¶ä¹‹ä¸€ï¼Œå’ŒAngular.jsã€React.js ä¸€èµ·ï¼Œå¹¶æˆä¸ºå‰ç«¯ä¸‰å¤§ä¸»æµæ¡†æž¶ï¼Vue.js æ˜¯ä¸€å¥—æž„å»ºç”¨æˆ·ç•Œé¢çš„æ¡†æž¶ï¼Œåªå…³æ³¨è§†å›¾å±‚ï¼Œå®ƒä¸ä»…æ˜“äºŽä¸Šæ‰‹ï¼Œè¿˜ä¾¿äºŽä¸Žç¬¬ä¸‰æ–¹åº“æˆ–æ—¢æœ‰é¡¹ç›®æ•´åˆã€‚ï¼ˆVueæœ‰é…å¥—çš„ç¬¬ä¸‰æ–¹ç±»åº“ï¼Œå¯ä»¥æ•´åˆèµ·æ¥åšå¤§åž‹é¡¹ç›®çš„å¼€å‘ï¼‰Â¶2. æ¡†æž¶å’Œåº“çš„åŒºåˆ«æ¡†æž¶ï¼šæ˜¯ä¸€å¥—å®Œæ•´çš„è§£å†³æ–¹æ¡ˆï¼›å¯¹é¡¹ç›®çš„ä¾µå…¥æ€§è¾ƒå¤§ï¼Œé¡¹ç›®å¦‚æžœéœ€è¦æ›´æ¢æ¡†æž¶ï¼Œåˆ™éœ€è¦é‡æ–°æž¶æž„æ•´ä¸ªé¡¹ç›®,è™½ç„¶æœ‰è¿™ä¸ªç¼ºç‚¹ï¼Œä½†æ˜¯åŠŸèƒ½å®Œå–„ã€‚åº“ï¼ˆæ’ä»¶ï¼‰ï¼šæä¾›æŸä¸€ä¸ªå°åŠŸèƒ½ï¼Œå¯¹é¡¹ç›®çš„ä¾µå…¥æ€§è¾ƒå°ï¼Œå¦‚æžœæŸä¸ªåº“æ— æ³•å®ŒæˆæŸäº›éœ€æ±‚ï¼Œå¯ä»¥å¾ˆå®¹æ˜“åˆ‡æ¢åˆ°å…¶å®ƒåº“å®žçŽ°éœ€æ±‚ã€‚æ¯”å¦‚ä»ŽJquery åˆ‡æ¢åˆ°Zeptoï¼Œåˆæ¯”å¦‚ä»Ž EJS åˆ‡æ¢åˆ° art-templateã€‚Â¶3. ä¸ºä»€ä¹ˆè¦å­¦ä¹ å‰ç«¯æ¡†æž¶æé«˜å¼€å‘æ•ˆçŽ‡ã€‚æé«˜å¼€å‘æ•ˆçŽ‡çš„å‘å±•åŽ†ç¨‹ï¼šåŽŸç”ŸJS -&gt; Jqueryä¹‹ç±»çš„ç±»åº“ -&gt; å‰ç«¯æ¨¡æ¿å¼•æ“Ž -&gt; Angular.js/ Vue.js/React.jsï¼ˆèƒ½å¤Ÿå¸®åŠ©æˆ‘ä»¬å‡å°‘ä¸å¿…è¦çš„DOMæ“ä½œï¼›æé«˜æ¸²æŸ“æ•ˆçŽ‡ï¼›åŒå‘æ•°æ®ç»‘å®šçš„æ¦‚å¿µã€é€šè¿‡æ¡†æž¶æä¾›çš„æŒ‡ä»¤ï¼Œæˆ‘ä»¬å‰ç«¯ç¨‹åºå‘˜åªéœ€è¦å…³å¿ƒæ•°æ®çš„ä¸šåŠ¡é€»è¾‘ï¼Œä¸å†å…³å¿ƒDOMæ˜¯å¦‚ä½•æ¸²æŸ“çš„äº†ã€‘ï¼‰å‡å°‘å°‘DOMæ“ä½œã€‚åœ¨Vueä¸­ï¼Œä¸€ä¸ªæ ¸å¿ƒçš„æ¦‚å¿µï¼Œå°±æ˜¯è®©ç”¨æˆ·ä¸å†æ“ä½œDOMå…ƒç´ ï¼Œè§£æ”¾äº†ç”¨æˆ·çš„åŒæ‰‹ï¼Œè®©ç¨‹åºå‘˜å¯ä»¥æ›´å¤šçš„æ—¶é—´åŽ»å…³æ³¨ä¸šåŠ¡é€»è¾‘ã€‚Â¶4. å‰ç«¯çš„MVVMä¸ºäº†ç»´æŠ¤å’Œç®¡ç†å‰ç«¯å¼€å‘ï¼Œå‰ç«¯å¼€å‘ä¸€èˆ¬è¿˜è¦MVVMçš„åˆ†å±‚å¼€å‘æ¨¡å¼ã€‚ä¸è¦ç†è§£æˆMVCï¼ŒMVC æ˜¯åŽç«¯çš„åˆ†å±‚å¼€å‘æ¦‚å¿µã€‚è€ŒMVVMæ˜¯å‰ç«¯è§†å›¾å±‚çš„æ¦‚å¿µï¼Œä¸»è¦å…³æ³¨äºŽè§†å›¾å±‚åˆ†ç¦»ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼šMVVMæŠŠå‰ç«¯çš„è§†å›¾å±‚ï¼Œåˆ†ä¸ºäº† ä¸‰éƒ¨åˆ† Model, View , VM (å³ViewModel)ã€‚Â¶äºŒã€å®‰è£…Â¶1. &lt;script&gt; æ ‡ç­¾å¼•å…¥vue.jsæ–‡ä»¶1&lt;script src="https://cdn.staticfile.org/vue/2.7.0/vue.min.js"&gt;&lt;/script&gt;ä¾‹å¦‚ï¼š123456789101112&lt;!DOCTYPE html&gt;&lt;html&gt; &lt;head&gt; &lt;meta charset="utf-8"&gt; &lt;title&gt;VueJS Tutorials&lt;/title&gt; &lt;link href="styles.css" rel="stylesheet" /&gt; &lt;script src="https://cdn.staticfile.org/vue/2.7.0/vue.min.js"&gt;&lt;/script&gt; &lt;/head&gt; &lt;body&gt; &lt;/body&gt;&lt;/html&gt;Â¶2. ä½¿ç”¨NPMå·¥å…·æž„å»º12# æœ€æ–°ç¨³å®šç‰ˆ$ npm install vueÂ¶ä¸‰ã€ hello worldapp.js1234567new Vue(&#123; //å¼•å…¥vueåŒ…åŽï¼Œæµè§ˆå™¨çš„å†…å­˜ä¸­å°±å¤šäº†ä¸€ä¸ªVueçš„æž„é€ å‡½æ•°ï¼Œåªéœ€è¦new Vueï¼Œå°±èƒ½å®žä¾‹åŒ–å‡ºVueå¯¹è±¡ï¼Œè¯¥å¯¹è±¡å°±æ˜¯ViewModelï¼Œæ¯å½“æˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªVueå®žä¾‹ï¼Œå°±åˆ›å»ºäº†ä¸€ä¸ªæ–°çš„ViewModelã€‚ el: '#vue-app', //elï¼ˆå³elemetï¼‰: æŒ‚è½½ç‚¹ï¼Œéœ€è¦ç»‘å®šçš„vueæ ¹å®¹å™¨ï¼ˆæ ¹å…ƒç´ ï¼‰ï¼Œä¸€åˆ‡çš„vueç›¸å…³æ“ä½œéƒ½åœ¨è¿™ä¸ªå…ƒç´ å†…è¿›è¡Œã€‚å…ƒç´ å¤–ä¸èµ·ä½œç”¨ã€‚ data: &#123; //dataï¼šæ•°æ®é€‰é¡¹ï¼Œç”¨äºŽæ•°æ®çš„å­˜å‚¨,å­˜æ”¾key/valueã€‚dataå°±æ˜¯mvvmä¸­çš„model username: 'qcmoke', //åªéœ€è¦åœ¨å…ƒç´ æ ‡ç­¾ä¸­ä½¿ç”¨è¡¨è¾¾å¼&#123;&#123;key&#125;&#125;æˆ–è€…v-textç­‰æ’å€¼è¡¨è¾¾å¼å°±èƒ½æ˜¾ç¤ºkeyå¯¹åº”çš„å€¼ï¼Œçœç•¥äº†éº»çƒ¦çš„domæ“ä½œ msg: 'hello world !' &#125;&#125;);index.html12345678910111213141516&lt;!DOCTYPE html&gt;&lt;html&gt; &lt;head&gt; &lt;meta charset="utf-8"&gt; &lt;title&gt;hello world&lt;/title&gt; &lt;script src="https://cdn.staticfile.org/vue/2.7.0/vue.min.js"&gt;&lt;/script&gt;&lt;!--å¼•å…¥vue.js--&gt; &lt;/head&gt; &lt;body&gt; &lt;div id="vue-app"&gt; &lt;!-- vueæ ¹å®¹å™¨ï¼ˆæ ¹å…ƒç´ ï¼‰ --&gt; &lt;h1&gt;Hey, &#123;&#123; username &#125;&#125;&lt;/h1&gt;&lt;!--æ ¹æ®dataä¸­çš„keyä½¿ç”¨æ¨¡ç‰ˆè¯­æ³•&#123;&#123;&#125;&#125;å–å‡ºå€¼ï¼Œvueå°†&#123;&#123;&#125;&#125;é‡Œçš„å†…å®¹æ”¾åˆ°è™šæ‹Ÿdomé‡Œï¼Œå†é€šè¿‡è™šæ‹Ÿdomå°†è¯¥å†…å®¹æ”¾å›žçœŸå®ždomçš„ç›¸å…³å…ƒç´ é‡Œ--&gt; &lt;h1&gt;&#123;&#123; msg &#125;&#125;&lt;/h1&gt; &lt;/div&gt; &lt;/body&gt; &lt;script src="app.js"&gt;&lt;/script&gt;&lt;!--å¼•å…¥app.js,app.jså­˜å‚¨vueå¯¹è±¡ç­‰ç›¸å…³ä¸šåŠ¡ä»£ç --&gt;&lt;/html&gt;Â¶å››ã€æ•°æ®æ˜¾ç¤ºÂ¶1. æ˜¾ç¤ºæ–‡æœ¬å†…å®¹Â¶1.1 æ’å€¼è¡¨è¾¾å¼123456789101112131415161718192021222324252627282930313233&lt;!DOCTYPE html&gt;&lt;html&gt;&lt;head&gt; &lt;meta charset="utf-8"&gt; &lt;title&gt;hello world&lt;/title&gt; &lt;script src="https://cdn.staticfile.org/vue/2.7.0/vue.min.js"&gt;&lt;/script&gt; &lt;style&gt; [v-cloak] &#123; display: none; &#125; &lt;/style&gt;&lt;/head&gt;&lt;body&gt; &lt;div id="vue-app"&gt; &lt;!-- ä½¿ç”¨v-cloakç»“åˆcssæ ·å¼èƒ½å¤Ÿè§£å†³æ’å€¼è¡¨è¾¾å¼é—ªçƒçš„é—®é¢˜ --&gt; &lt;h1 v-cloak&gt;Hey, &#123;&#123; username &#125;&#125;&lt;/h1&gt; &lt;h1 v-cloak&gt;&#123;&#123; msg &#125;&#125;&lt;/h1&gt; &lt;/div&gt;&lt;/body&gt;&lt;script&gt; new Vue(&#123; el: '#vue-app', data: &#123; username: 'qcmoke', msg: 'hello world !' &#125; &#125;);&lt;/script&gt;&lt;/html&gt;è§£å†³ä½¿ç”¨æ’å€¼è¡¨è¾¾å¼æ˜¾ç¤ºdataæ•°æ®å‡ºçŽ°é—ªçƒçš„é—®é¢˜ã€‚æ­¥éª¤æ˜¯ï¼Œåœ¨æœ‰æ’å€¼è¡¨è¾¾å¼å†…å®¹çš„æ ‡ç­¾é‡Œæ·»åŠ v-cloakå±žæ€§ï¼Œç„¶åŽæ·»åŠ å¦‚ä¸‹cssæ ·å¼è¡¨å³å¯è§£å†³ã€‚12345&lt;style&gt; [v-cloak]&#123; display: none; &#125;&lt;/style&gt;Â¶1.2 v-textä¸Žæ’å€¼è¡¨è¾¾å¼åŠŸèƒ½æ˜¯ä¸€æ ·çš„ã€‚12345678910111213141516171819202122232425262728293031&lt;!DOCTYPE html&gt;&lt;html&gt;&lt;head&gt; &lt;meta charset="utf-8"&gt; &lt;title&gt;v-text&lt;/title&gt; &lt;script src="https://cdn.staticfile.org/vue/2.7.0/vue.min.js"&gt;&lt;/script&gt;&lt;/head&gt;&lt;body&gt; &lt;div id="vue-app"&gt; &lt;h1 v-text="username"&gt;&lt;/h1&gt; &lt;h1 v-text="msg"&gt;&lt;/h1&gt; &lt;!-- &lt;h1&gt;Hey, &#123;&#123; username &#125;&#125;&lt;/h1&gt; &lt;h1&gt;&#123;&#123; msg &#125;&#125;&lt;/h1&gt; --&gt; &lt;/div&gt;&lt;/body&gt;&lt;script&gt; new Vue(&#123; el: '#vue-app', data: &#123; username: 'qcmoke', msg: 'hello world !' &#125; &#125;);&lt;/script&gt;&lt;/html&gt;ä¸Žæ’å€¼è¡¨è¾¾å¼ä¸åŒçš„æ˜¯ä¸ä¼šå‡ºçŽ°æ’å€¼è¡¨è¾¾å¼çš„é—ªçƒçš„é—®é¢˜ã€‚åŽŸå› æ˜¯v-textä¼šè¦†ç›–å…ƒç´ ä¸­åŽŸæœ¬çš„å†…å®¹ï¼Œä½†æ˜¯ æ’å€¼è¡¨è¾¾å¼ åªä¼šæ›¿æ¢è‡ªå·±çš„è¿™ä¸ªå ä½ç¬¦ï¼Œä¸ä¼šæŠŠ æ•´ä¸ªå…ƒç´ çš„å†…å®¹æ¸…ç©ºã€‚å¦‚ä½•é€‰æ‹©æ’å€¼è¡¨è¾¾å¼å’Œv-textï¼Ÿå¦‚æžœå†…å®¹å«æœ‰dataæ²¡æœ‰çš„ä¸€äº›å­—ç¬¦ï¼Œé‚£ä¹ˆå»ºè®®ä½¿ç”¨æ’å€¼è¡¨è¾¾å¼ç»“åˆv-cloakå±žæ€§ä½¿ç”¨ã€‚å¦‚æžœå†…å®¹åªæœ‰dataé‡Œçš„æ•°æ®ï¼Œé‚£ä¹ˆå»ºè®®ä½¿ç”¨v-cloakã€‚Â¶2. æ˜¾ç¤ºhtmlå…ƒç´ Â¶2.1 v-htmlä½œç”¨ï¼šç”¨äºŽè¾“å‡ºdataä¸­çš„htmlæ•°æ®ã€‚123456789101112131415161718192021222324&lt;!DOCTYPE html&gt;&lt;html&gt;&lt;head&gt; &lt;meta charset="utf-8"&gt; &lt;title&gt;v-html&lt;/title&gt; &lt;script src="https://cdn.staticfile.org/vue/2.7.0/vue.min.js"&gt;&lt;/script&gt;&lt;/head&gt;&lt;body&gt; &lt;div id="vue-app"&gt; &lt;h1 v-html="msg_el"&gt;&lt;/h1&gt; &lt;/div&gt;&lt;/body&gt;&lt;script&gt; new Vue(&#123; el: '#vue-app', data: &#123; msg_el: '&lt;h1 style="color: red"&gt;hello world !&lt;/h1&gt;' &#125; &#125;);&lt;/script&gt;&lt;/html&gt;ä½¿ç”¨v-textæˆ–è€…æ’å€¼è¡¨è¾¾å¼åªèƒ½æ˜¾ç¤ºçº¯æ–‡æœ¬å†…å®¹Â¶äº”ã€å±žæ€§æ•°æ®ç»‘å®šÂ¶1. å•å‘æ•°æ®ç»‘å®š v-bindä½œç”¨ï¼šç”¨äºŽç»™htmlå…ƒç´ çš„å±žæ€§ç»‘å®šæ•°æ®ç¼©å†™: :å®žçŽ°æ­¥éª¤ï¼šåœ¨åŽŸæ¥å±žæ€§çš„å€¼é‡Œå†™vueä¸­dataçš„keyï¼Œå¹¶åœ¨åŽŸå±žæ€§å‰æ·»åŠ &quot;v-bind:&quot;ï¼Œä»¥æ­¤æ¥ç»™å±žæ€§ç»‘å®švueçš„æ•°æ®ã€‚æ•°æ®ç»‘å®šæ–¹å¼ï¼šå•å‘æ•°æ®ç»‘å®šï¼Œå³ä»Žmodelè‡ªåŠ¨ç»‘å®šåˆ°viewï¼Œviewä¸Šç»‘å®šçš„å±žæ€§æ•°æ®(å€¼)ä¼šéšç€modelå€¼çš„æ”¹å˜è€Œæ”¹å˜ï¼Œä½†æ˜¯viewä¸­ç»‘å®šçš„å±žæ€§æ•°æ®(å€¼)çš„æ”¹å˜ä¸ä¼šæ”¹å˜modelä¸­å±žæ€§çš„æ•°æ®(å€¼)ã€‚ç»‘å®šæ–¹å‘ï¼šmodel----&gt;viewã€‚ä½œç”¨èŒƒå›´ï¼šæ‰€æœ‰æ ‡ç­¾å…ƒç´ ã€‚vueä¼šå°†å…ƒç´ ä¸­å±žæ€§ç»‘å®šçš„keyå½“ä½œæ˜¯jsè¡¨è¾¾å¼è¿”å›žï¼Œæ‰€ä»¥å¯ä»¥è¿›è¡Œåˆæ³•çš„è¿ç®—æ“ä½œã€‚12345678910111213141516171819202122232425262728293031323334&lt;!DOCTYPE html&gt;&lt;html&gt;&lt;head&gt; &lt;meta charset="utf-8"&gt; &lt;title&gt;v-bind&lt;/title&gt; &lt;script src="https://cdn.staticfile.org/vue/2.7.0/vue.min.js"&gt;&lt;/script&gt;&lt;/head&gt;&lt;body&gt; &lt;div id="vue-app"&gt; &lt;!-- åœ¨åŽŸæ¥å±žæ€§çš„å€¼é‡Œå†™vueä¸­dataçš„keyï¼Œå¹¶åœ¨åŽŸå±žæ€§å‰æ·»åŠ "v-bind:"ï¼Œä»¥æ­¤æ¥ç»™å±žæ€§ç»‘å®švueçš„æ•°æ® --&gt; &lt;a v-bind:href="vue_url"&gt;vueçš„å®˜ç½‘é“¾æŽ¥&lt;/a&gt; &lt;br /&gt; &lt;!-- vueä¼šå°†å…ƒç´ ä¸­å±žæ€§ç»‘å®šçš„keyå½“ä½œæ˜¯jsè¡¨è¾¾å¼è¿”å›žï¼Œæ‰€ä»¥å¯ä»¥è¿›è¡Œåˆæ³•çš„è¿ç®—æ“ä½œ --&gt; &lt;a v-bind:href="vue_url+'/v2/guide/'"&gt;vueå®˜æ–¹æ–‡æ¡£é“¾æŽ¥&lt;/a&gt; &lt;!-- v-bind ä½œç”¨ï¼šç”¨äºŽç»™htmlå…ƒç´ çš„å±žæ€§ç»‘å®šæ•°æ® --&gt; &lt;/div&gt;&lt;/body&gt;&lt;script&gt; new Vue(&#123; el: '#vue-app', data: &#123; vue_url: 'https://cn.vuejs.org' &#125; &#125;);&lt;/script&gt;&lt;/html&gt;Â¶2. åŒå‘æ•°æ®ç»‘å®š v-modelä½œç”¨ï¼šç”¨äºŽç»™htmlå…ƒç´ çš„å±žæ€§ç»‘å®šæ•°æ®ç¼©å†™: :modelå®žçŽ°æ­¥éª¤ï¼šåœ¨éœ€è¦è¡¨å•å…ƒç´ é‡Œæ·»åŠ v-model=&quot;dataæ‰¾é‚£ä¸ªçš„key&quot;å³å¯å®žçŽ°åŒå‘æ•°æ®ç»‘å®šã€‚æ•°æ®ç»‘å®šæ–¹å¼ï¼šåŒå‘æ•°æ®ç»‘å®šï¼Œå³ä»Žmodelå’Œviewæ•°æ®äº’ç›¸ç»‘å®šï¼Œviewä¸Šç»‘å®šçš„å±žæ€§æ•°æ®(å€¼)ä¼šéšç€modelå€¼çš„æ”¹å˜è€Œæ”¹å˜ï¼Œå¹¶ä¸”viewä¸­ç»‘å®šçš„å±žæ€§æ•°æ®(å€¼)çš„æ”¹å˜ä¹Ÿä¼šæ”¹å˜modelä¸­å±žæ€§çš„æ•°æ®(å€¼)ã€‚ç»‘å®šæ–¹å‘ï¼šmodel&lt;----&gt;viewã€‚åŒå‘æ•°æ®ç»‘å®šä¸å¯ä»¥è¿›è¡Œè¡¨è¾¾å¼è¿ç®—æ“ä½œã€‚ä½œç”¨èŒƒå›´ï¼šv-modelåªèƒ½ä½¿ç”¨åœ¨è¡¨å•å…ƒç´ ä¸­ï¼Œå¦‚input(radio, text, address, email....) ã€ select checkbox ã€textareaç­‰ã€‚æµ‹è¯•å•å‘æ•°æ®ç»‘å®šå’ŒåŒå‘æ•°æ®ç»‘å®šçš„åŒºåˆ«123456789101112131415161718192021222324252627&lt;!DOCTYPE html&gt;&lt;html&gt;&lt;head&gt; &lt;meta charset="utf-8"&gt; &lt;title&gt;v-bind&lt;/title&gt; &lt;script src="https://cdn.staticfile.org/vue/2.7.0/vue.min.js"&gt;&lt;/script&gt;&lt;/head&gt;&lt;body&gt; &lt;div id="vue-app"&gt; å•å‘æ•°æ®ç»‘å®šï¼š&lt;input type="text" v-bind:value="key1"&gt; &lt;br&gt;&lt;br&gt; åŒå‘æ•°æ®ç»‘å®šï¼š&lt;input type="text" v-model="key2"&gt; &lt;/div&gt;&lt;/body&gt;&lt;script&gt; var vm = new Vue(&#123; el: '#vue-app', data: &#123; key1: 'value of key1', key2: 'value of key2' &#125; &#125;);&lt;/script&gt;&lt;/html&gt;modelâ€”&gt;viewæ–¹å‘æ•°æ®å˜åŒ–æƒ…å†µ(é€šè¿‡æµè§ˆå™¨çš„æŽ§åˆ¶å°æ“ä½œå†…å­˜ä¸­çš„vueå¯¹è±¡å³å¯æ”¹å˜modelä¸­çš„æ•°æ®)modelæ•°æ®æœªæ”¹å˜æ—¶ï¼šmodelæ•°æ®æ”¹å˜æ—¶ï¼šviewâ€”&gt;modelæ–¹å‘æ•°æ®å˜åŒ–æƒ…å†µinputï¼ˆviewï¼‰ä¸æ”¹å˜å€¼æ—¶çš„æƒ…å†µï¼šinputï¼ˆviewï¼‰æ”¹å˜å€¼æ—¶çš„æƒ…å†µï¼šä»Žä»¥ä¸Šä¸¤ä¸ªæ–¹å‘æ•°æ®çš„æ”¹å˜å³å¯çœ‹å‡ºå•å‘æ•°æ®ç»‘å®šå’ŒåŒå‘æ•°æ®ç»‘å®šçš„å·®å¼‚ã€‚Â¶å…­ã€äº‹ä»¶ç»‘å®šÂ¶1. v-onä½œç”¨ï¼šäº‹ä»¶ç»‘å®šã€‚ç¼©å†™: @æ­¥éª¤ï¼šåœ¨åŽŸæ¥çš„äº‹ä»¶å±žæ€§å‰æ·»åŠ â€œv-on:â€ï¼Œå¹¶ç»™äº‹ä»¶å±žæ€§èµ‹vueçš„data keyã€‚ï¼Œæœ€åŽåœ¨vueå¯¹è±¡çš„methodså±žæ€§é‡Œæ·»åŠ keyå¯¹åº”çš„æ–¹æ³•ã€‚12345678910111213141516171819202122232425262728293031323334&lt;!DOCTYPE html&gt;&lt;html&gt;&lt;head&gt; &lt;meta charset="utf-8"&gt; &lt;title&gt;v-on&lt;/title&gt; &lt;script src="https://cdn.staticfile.org/vue/2.7.0/vue.min.js"&gt;&lt;/script&gt;&lt;/head&gt;&lt;body&gt; &lt;div id="vue-app"&gt; &lt;button v-on:click="show"&gt;ç‚¹å‡»æŒ‰é’®&lt;/button&gt; &lt;!-- v-on ä½œç”¨ï¼šäº‹ä»¶ç»‘å®šã€‚ æ­¥éª¤ï¼šåœ¨åŽŸæ¥çš„äº‹ä»¶å±žæ€§å‰æ·»åŠ â€œv-on:â€ï¼Œå¹¶ç»™äº‹ä»¶å±žæ€§èµ‹vueçš„data keyã€‚ï¼Œæœ€åŽåœ¨vueå¯¹è±¡çš„methodså±žæ€§é‡Œæ·»åŠ keyå¯¹åº”çš„æ–¹æ³•ã€‚ --&gt; &lt;/div&gt;&lt;/body&gt;&lt;script&gt; new Vue(&#123; el: '#vue-app', //elå±žæ€§å®šä¹‰vueçš„æŽ§åˆ¶åŒºåŸŸ data: &#123; //dataå±žæ€§å®šä¹‰æ‰€æœ‰vueæ•°æ® vue_url: 'https://cn.vuejs.org' &#125;, methods: &#123; //methodså®šä¹‰æ‰€æœ‰vueå¯ç”¨çš„æ–¹æ³• show: function () &#123; alert("hello Vue !"); &#125; &#125; &#125;);&lt;/script&gt;&lt;/html&gt;Â¶2. äº‹ä»¶ä¿®é¥°ç¬¦.stop é˜»æ­¢å†’æ³¡â€‹ å†’æ³¡ï¼šåœ¨å¤šä¸ªç»‘å®šæœ‰äº‹ä»¶çš„å…ƒç´ åµŒå¥—ä¸­ã€‚å½“è§¦å‘ä¸€ä¸ªå…ƒç´ æ—¶ï¼Œä¼´éšç€åµŒå¥—çš„å…ƒç´ ä¹Ÿä¼šè§¦å‘äº‹ä»¶ã€‚.prevent é˜»æ­¢é»˜è®¤äº‹ä»¶.capture æ·»åŠ äº‹ä»¶ä¾¦å¬å™¨æ—¶ä½¿ç”¨äº‹ä»¶æ•èŽ·æ¨¡å¼.self åªå½“äº‹ä»¶åœ¨è¯¥å…ƒç´ æœ¬èº«è§¦å‘æ—¶è§¦å‘å›ž.once äº‹ä»¶åªè§¦å‘ä¸€æ¬¡Â¶2.1 é˜»æ­¢å†’æ³¡.stopï¼ˆå†’æ³¡çš„æƒ…å†µï¼‰1234567891011121314151617181920212223242526272829303132333435&lt;!DOCTYPE html&gt;&lt;html&gt;&lt;head&gt; &lt;meta charset="utf-8"&gt; &lt;title&gt;äº‹ä»¶ä¿®é¥°ç¬¦&lt;/title&gt; &lt;script src="https://cdn.staticfile.org/vue/2.7.0/vue.min.js"&gt;&lt;/script&gt;&lt;/head&gt;&lt;body&gt; &lt;div id="vue-app"&gt; &lt;div @click="divHandle"&gt; &lt;!-- ä½¿ç”¨v-onç¼©å†™çš„æ–¹å¼æŒ‡å®švueäº‹ä»¶ç»‘å®š --&gt; &lt;button @click="buttonHandle"&gt;ç‚¹å‡»æŒ‰é’®&lt;/button&gt; &lt;/div&gt; &lt;/div&gt;&lt;/body&gt;&lt;script&gt; new Vue(&#123; el: '#vue-app', //elå±žæ€§å®šä¹‰vueçš„æŽ§åˆ¶åŒºåŸŸ data: &#123; //dataå±žæ€§å®šä¹‰æ‰€æœ‰vueæ•°æ® vue_url: 'https://cn.vuejs.org' &#125;, methods: &#123; //methodså®šä¹‰æ‰€æœ‰vueå¯ç”¨çš„æ–¹æ³• divHandle: function () &#123; console.info("hello div !"); &#125;, buttonHandle() &#123; console.info("hello button !"); &#125; &#125; &#125;);&lt;/script&gt;&lt;/html&gt;ï¼ˆé˜»æ­¢å†’æ³¡çš„æƒ…å†µï¼‰åœ¨éœ€è¦é˜»æ­¢å†’æ³¡çš„çš„å…ƒç´ vueäº‹ä»¶å±žæ€§åŽæ·»åŠ .stopã€‚12345678910111213141516171819202122232425262728293031323334353637&lt;!DOCTYPE html&gt;&lt;html&gt;&lt;head&gt; &lt;meta charset="utf-8"&gt; &lt;title&gt;äº‹ä»¶ä¿®é¥°ç¬¦&lt;/title&gt; &lt;script src="https://cdn.staticfile.org/vue/2.7.0/vue.min.js"&gt;&lt;/script&gt;&lt;/head&gt;&lt;body&gt; &lt;div id="vue-app"&gt; &lt;div @click="divHandler"&gt; &lt;!-- ä½¿ç”¨v-onç¼©å†™çš„æ–¹å¼æŒ‡å®švueäº‹ä»¶ç»‘å®š ä½¿ç”¨.stopé˜»æ­¢çˆ¶å…ƒç´ äº‹ä»¶ï¼ˆåœ¨å½“å‰å…ƒç´ å‘ç”Ÿäº‹ä»¶åŽå°±åœæ­¢äº†ï¼Œæ²¡æœ‰ç»§ç»­å†’æ³¡ä¸‹åŽ»ï¼‰ --&gt; &lt;button @click.stop="buttonHandler"&gt;ç‚¹å‡»æŒ‰é’®&lt;/button&gt; &lt;/div&gt; &lt;/div&gt;&lt;/body&gt;&lt;script&gt; new Vue(&#123; el: '#vue-app', //elå±žæ€§å®šä¹‰vueçš„æŽ§åˆ¶åŒºåŸŸ data: &#123; //dataå±žæ€§å®šä¹‰æ‰€æœ‰vueæ•°æ® vue_url: 'https://cn.vuejs.org' &#125;, methods: &#123; //methodså®šä¹‰æ‰€æœ‰vueå¯ç”¨çš„æ–¹æ³• divHandler: function () &#123; console.info("hello div !"); &#125;, buttonHandler() &#123; console.info("hello button !"); &#125; &#125; &#125;);&lt;/script&gt;&lt;/html&gt;Â¶2.2 é˜»æ­¢é»˜è®¤äº‹ä»¶.prevent12345678910111213141516171819202122232425262728293031&lt;!DOCTYPE html&gt;&lt;html&gt;&lt;head&gt; &lt;meta charset="utf-8"&gt; &lt;title&gt;äº‹ä»¶ä¿®é¥°ç¬¦&lt;/title&gt; &lt;script src="https://cdn.staticfile.org/vue/2.7.0/vue.min.js"&gt;&lt;/script&gt;&lt;/head&gt;&lt;body&gt; &lt;div id="vue-app"&gt; &lt;!-- ä½¿ç”¨.preventäº‹ä»¶ä¿®é¥°ç¬¦é˜»æ­¢aæ ‡ç­¾çš„é»˜è®¤è·³è½¬äº‹ä»¶ --&gt; &lt;a :href="vue_url" @click.prevent="linkHandler"&gt;ç‚¹å‡»é“¾æŽ¥&lt;/a&gt; &lt;/div&gt;&lt;/body&gt;&lt;script&gt; new Vue(&#123; el: '#vue-app', //elå±žæ€§å®šä¹‰vueçš„æŽ§åˆ¶åŒºåŸŸ data: &#123; //dataå±žæ€§å®šä¹‰æ‰€æœ‰vueæ•°æ® vue_url: 'https://cn.vuejs.org' &#125;, methods: &#123; //methodså®šä¹‰æ‰€æœ‰vueå¯ç”¨çš„æ–¹æ³• linkHandler() &#123; console.info("è§¦å‘é“¾æŽ¥ç‚¹å‡»äº‹ä»¶ï¼"); &#125; &#125; &#125;);&lt;/script&gt;&lt;/html&gt;Â¶2.3 æ·»åŠ äº‹ä»¶æ•èŽ· .capture12345678910111213141516171819202122232425262728293031323334353637383940&lt;!DOCTYPE html&gt;&lt;html&gt;&lt;head&gt; &lt;meta charset="utf-8"&gt; &lt;title&gt;äº‹ä»¶ä¿®é¥°ç¬¦&lt;/title&gt; &lt;script src="https://cdn.staticfile.org/vue/2.7.0/vue.min.js"&gt;&lt;/script&gt;&lt;/head&gt;&lt;body&gt; &lt;div id="vue-app"&gt; &lt;!-- äº‹ä»¶æ•èŽ· å³æ˜¯ç»™å…ƒç´ æ·»åŠ ä¸€ä¸ªç›‘å¬å™¨ï¼Œå½“å…ƒç´ å‘ç”Ÿå†’æ³¡æ—¶ï¼Œå…ˆè§¦å‘å¸¦æœ‰è¯¥ä¿®é¥°ç¬¦çš„å…ƒç´ ã€‚è‹¥æœ‰å¤šä¸ªè¯¥ä¿®é¥°ç¬¦ï¼Œåˆ™ç”±å¤–è€Œå†…è§¦å‘ã€‚ å°±æ˜¯è°æœ‰è¯¥äº‹ä»¶ä¿®é¥°ç¬¦ï¼Œå°±å…ˆè§¦å‘è°ã€‚ åœ¨åµŒå¥—çš„äº‹ä»¶å…ƒç´ ç»„ä¸­ï¼Œé»˜è®¤äº‹ä»¶æ˜¯ä»Žé‡Œå¾€å¤–è§¦å‘çš„ï¼Œå¦‚æžœå¸Œæœ›ä»Žå¤–å¾€é‡Œè§¦å‘ï¼Œå¯ä»¥åœ¨å¤–å…ƒç´ çš„vueäº‹ä»¶åŽæ·»åŠ .captureä¿®é¥°ç¬¦å³å¯å®Œæˆã€‚ --&gt; &lt;div @click.capture="divHandler" style="width: 100px; height: 100px; background: gray;"&gt; &lt;button @click="buttonHandler"&gt;ç‚¹å‡»æŒ‰é’®&lt;/button&gt; &lt;/div&gt; &lt;/div&gt;&lt;/body&gt;&lt;script&gt; new Vue(&#123; el: '#vue-app', //elå±žæ€§å®šä¹‰vueçš„æŽ§åˆ¶åŒºåŸŸ data: &#123; //dataå±žæ€§å®šä¹‰æ‰€æœ‰vueæ•°æ® vue_url: 'https://cn.vuejs.org' &#125;, methods: &#123; //methodså®šä¹‰æ‰€æœ‰vueå¯ç”¨çš„æ–¹æ³• divHandler: function () &#123; console.info("hello div !"); &#125;, buttonHandler() &#123; console.info("hello button !"); &#125; &#125; &#125;);&lt;/script&gt;&lt;/html&gt;Â¶2.4 åªè§¦å‘å½“å‰å…ƒç´ äº‹ä»¶ .selfä¸è§¦å‘å…¶ä»–åµŒå¥—çš„å…ƒç´ 1234567891011121314151617181920212223242526272829303132333435363738394041&lt;!DOCTYPE html&gt;&lt;html&gt;&lt;head&gt; &lt;meta charset="utf-8"&gt; &lt;title&gt;äº‹ä»¶ä¿®é¥°ç¬¦&lt;/title&gt; &lt;script src="https://cdn.staticfile.org/vue/2.7.0/vue.min.js"&gt;&lt;/script&gt; &lt;style&gt; &lt;/style&gt;&lt;/head&gt;&lt;body&gt; &lt;div id="vue-app"&gt; &lt;!-- .self åªè§¦å‘å½“å‰å…ƒç´ äº‹ä»¶ã€‚ä¸è§¦å‘å…¶ä»–åµŒå¥—çš„å…ƒç´  --&gt; &lt;div @click.self="divHandler" style="width: 100px; height: 100px; background: gray;"&gt; &lt;button @click="buttonHandler"&gt;ç‚¹å‡»æŒ‰é’®&lt;/button&gt; &lt;/div&gt; &lt;/div&gt;&lt;/body&gt;&lt;script&gt; new Vue(&#123; el: '#vue-app', //elå±žæ€§å®šä¹‰vueçš„æŽ§åˆ¶åŒºåŸŸ data: &#123; //dataå±žæ€§å®šä¹‰æ‰€æœ‰vueæ•°æ® vue_url: 'https://cn.vuejs.org' &#125;, methods: &#123; //methodså®šä¹‰æ‰€æœ‰vueå¯ç”¨çš„æ–¹æ³• divHandler: function () &#123; console.info("hello div !"); &#125;, buttonHandler() &#123; console.info("hello button !"); &#125; &#125; &#125;);&lt;/script&gt;&lt;/html&gt;Â¶2.5 äº‹ä»¶åªè§¦å‘ä¸€æ¬¡.onceä½œç”¨ï¼šäº‹ä»¶åªè§¦å‘ä¸€æ¬¡1234567891011121314151617181920212223242526272829303132333435&lt;!DOCTYPE html&gt;&lt;html&gt;&lt;head&gt; &lt;meta charset="utf-8"&gt; &lt;title&gt;äº‹ä»¶ä¿®é¥°ç¬¦&lt;/title&gt; &lt;script src="https://cdn.staticfile.org/vue/2.7.0/vue.min.js"&gt;&lt;/script&gt;&lt;/head&gt;&lt;body&gt; &lt;div id="vue-app"&gt; &lt;!-- .once ä½œç”¨ï¼šäº‹ä»¶åªè§¦å‘ä¸€æ¬¡ åªåœ¨ç¬¬ä¸€æ¬¡ç‚¹å‡»çš„æ—¶å€™è§¦å‘.preventäº‹ä»¶ä¿®é¥°ç¬¦é˜»æ­¢aæ ‡ç­¾çš„é»˜è®¤è·³è½¬äº‹ä»¶ï¼Œç¬¬äºŒæ¬¡ä¹‹åŽåŽŸæœ¬çš„é»˜è®¤è·³è½¬äº‹ä»¶ä¼šè¢«è§¦å‘ --&gt; &lt;a :href="vue_url" @click.prevent.once="linkHandler"&gt;ç‚¹å‡»é“¾æŽ¥&lt;/a&gt; &lt;/div&gt;&lt;/body&gt;&lt;script&gt; new Vue(&#123; el: '#vue-app', //elå±žæ€§å®šä¹‰vueçš„æŽ§åˆ¶åŒºåŸŸ data: &#123; //dataå±žæ€§å®šä¹‰æ‰€æœ‰vueæ•°æ® vue_url: 'https://cn.vuejs.org' &#125;, methods: &#123; //methodså®šä¹‰æ‰€æœ‰vueå¯ç”¨çš„æ–¹æ³• linkHandler() &#123; console.info("è§¦å‘é“¾æŽ¥ç‚¹å‡»äº‹ä»¶ï¼"); &#125; &#125; &#125;);&lt;/script&gt;&lt;/html&gt;Â¶3. æŒ‰é”®ä¿®é¥°ç¬¦Vue é»˜è®¤æä¾›äº†å‡ ä¸ªå¸¸ç”¨çš„æŒ‰é”®ç çš„åˆ«åï¼ˆé”®ç›˜ä¿®é¥°ç¬¦ï¼‰ï¼š123456789.enter.tab.delete (æ•èŽ·â€œåˆ é™¤â€å’Œâ€œé€€æ ¼â€é”®).esc.space.up.down.left.rightä½¿ç”¨æ–¹å¼ï¼š1v-on:keyup.é”®ç›˜ä¿®é¥°ç¬¦="äº‹ä»¶æ–¹æ³•()"å¦‚ä¸‹ï¼š12&lt;!-- åªæœ‰åœ¨ `key` æ˜¯ `Enter` æ—¶è°ƒç”¨ `vm.submit()` --&gt;&lt;input v-on:keyup.enter="submit"&gt;å¦‚æžœä»¥ä¸Šæä¾›çš„é”®ç›˜ä¿®é¥°ç¬¦ä»»ç„¶ä¸å¤Ÿç”¨ï¼Œå¯ä»¥é€šè¿‡ä»¥ä¸‹jsä»£ç è¿›è¡Œæ‰©å±•ã€‚12// è‡ªå®šä¹‰å…¨å±€æŒ‰é”®ä¿®é¥°ç¬¦Vue.config.keyCodes.è‡ªå®šä¹‰ä¿®é¥°ç¬¦åç§° = é”®ç å€¼;å­—æ¯å’Œæ•°å­—é”®çš„é”®ç å€¼(keyCode)æŒ‰é”®é”®ç æŒ‰é”®é”®ç æŒ‰é”®é”®ç æŒ‰é”®é”®ç A65J74S83149B66K75T84250C67L76U85351D68M77V86452E69N78W87553F70O79X88654G71P80Y89755H72Q81Z90856I73R82048957æ•°å­—é”®ç›˜ä¸Šçš„é”®çš„é”®ç å€¼(keyCode)åŠŸèƒ½é”®é”®ç å€¼(keyCode)æŒ‰é”®é”®ç æŒ‰é”®é”®ç æŒ‰é”®é”®ç æŒ‰é”®é”®ç 0968104F1112F71181979105F2113F8119298*106F3114F9120399+107F4115F101214100Enter108F5116F111225101-109F6117F121236102.1107103/111æŽ§åˆ¶é”®é”®ç å€¼(keyCode)æŒ‰é”®é”®ç æŒ‰é”®é”®ç æŒ‰é”®é”®ç æŒ‰é”®é”®ç BackSpace8Esc27Right Arrow39-_189Tab9Spacebar32Dw Arrow40.&gt;190Clear12Page Up33Insert45/?191Enter13Page Down34Delete46`~192Shift16End35Num Lock144[{219Control17Home36;:186|220Alt18Left Arrow37=+187]}221Cape Lock20Up Arrow38,&lt;188'&quot;222å¤šåª’ä½“é”®ç å€¼(keyCode)æŒ‰é”®é”®ç æŒ‰é”®é”®ç æŒ‰é”®é”®ç æŒ‰é”®é”®ç éŸ³é‡åŠ 175éŸ³é‡å‡174åœæ­¢179é™éŸ³173æµè§ˆå™¨172é‚®ä»¶180æœç´¢170æ”¶è—171123456789101112131415161718192021222324252627282930313233343536373839404142&lt;!DOCTYPE html&gt;&lt;html lang="en"&gt;&lt;head&gt; &lt;meta charset="UTF-8"&gt; &lt;title&gt;Document&lt;/title&gt; &lt;script src="https://cdn.staticfile.org/vue/2.7.0/vue.min.js"&gt;&lt;/script&gt; &lt;style&gt; #app input &#123; width: 300px; border-style: solid; &#125; &lt;/style&gt;&lt;/head&gt;&lt;body&gt; &lt;div id="app"&gt; &lt;input type="text" v-model:value="enter_value" @keyup.enter='enterHandler' placeholder="è¯·è¾“å…¥å€¼ä¹‹åŽï¼ŒæŒ‰Enteré”®å®Œæˆæ“ä½œï¼"&gt; &lt;input type="text" v-model:value="f2_value" @keyup.f2='f2Handler' placeholder="è¯·è¾“å…¥å€¼ä¹‹åŽï¼ŒæŒ‰F2é”®å®Œæˆæ“ä½œï¼"&gt; &lt;/div&gt; &lt;script&gt; // è‡ªå®šä¹‰å…¨å±€æŒ‰é”®ä¿®é¥°ç¬¦ Vue.config.keyCodes.f2 = 113; new Vue(&#123; el: "#app", data: &#123; enter_value: '', f2_value: '' &#125;, methods: &#123; enterHandler: function () &#123; alert("hello " + this.enter_value); &#125;, f2Handler: function () &#123; alert("hello " + this.f2_value); &#125; &#125; &#125;); &lt;/script&gt;&lt;/body&gt;&lt;/html&gt;Â¶ä¸ƒã€æ ·å¼ç»‘å®šÂ¶1. class å±žæ€§ç»‘å®šÂ¶1.1 æ•°ç»„å½¢å¼æ ·å¼åç§°æ•°ç»„ï¼ˆæ­¤æ—¶çš„æ ·å¼åç§°æ˜¯booleanç±»åž‹ï¼‰1&lt;div v-bind:class="['active', 'danger']"&gt;&lt;/div&gt;æˆ–è€…æ•°ç»„ä¸­ä½¿ç”¨ä¸‰å…ƒè¡¨è¾¾å¼å¯¹æ ·å¼åç§°è®¡ç®—1&lt;div v-bind:class="[isActive?'active':'',!'danger']"&gt;&lt;/div&gt;æˆ–è€…æ•°ç»„ä¸­ä½¿ç”¨å¯¹è±¡1&lt;div v-bind:class="[!'danger',&#123;active:isActive&#125;]"&gt;&lt;/div&gt;12345678910111213141516171819202122232425262728293031323334353637383940414243444546&lt;!DOCTYPE html&gt;&lt;html lang="en"&gt;&lt;head&gt; &lt;meta charset="UTF-8"&gt; &lt;title&gt;&lt;/title&gt; &lt;script src="https://cdn.staticfile.org/vue/2.7.0/vue.min.js"&gt;&lt;/script&gt; &lt;style&gt; .active &#123; width: 100px; height: 100px; background: green; &#125; .danger &#123; background: red; &#125; &lt;/style&gt;&lt;/head&gt;&lt;body&gt; &lt;div id="vue-app"&gt; &lt;!-- æ ·å¼åç§°æ•°ç»„ï¼ˆæ­¤æ—¶çš„æ ·å¼åç§°æ˜¯booleanç±»åž‹ï¼‰ --&gt; &lt;div v-bind:class="['active', 'danger']"&gt;&lt;/div&gt; &lt;br&gt;&lt;br&gt; &lt;!-- æ•°ç»„ä¸­ä½¿ç”¨ä¸‰å…ƒè¡¨è¾¾å¼å¯¹æ ·å¼åç§°è®¡ç®— --&gt; &lt;div v-bind:class="[isActive?'active':'',!'danger']"&gt;&lt;/div&gt; &lt;br&gt;&lt;br&gt; &lt;!-- æ•°ç»„ä¸­ä½¿ç”¨å¯¹è±¡ --&gt; &lt;div v-bind:class="[!'danger',&#123;active:isActive&#125;]"&gt;&lt;/div&gt;&lt;!-- &#123;active:isActive&#125;æ˜¯ä¸€ä¸ªå¯¹è±¡ --&gt; &lt;/div&gt; &lt;script&gt; new Vue(&#123; el: '#vue-app', data: &#123; isActive: true &#125; &#125;); &lt;/script&gt;&lt;/body&gt;&lt;/html&gt;Â¶1.2 å¯¹è±¡å½¢å¼1&lt;div v-bind:class="&#123; key: isActive,danger: false &#125;"&gt;&lt;/div&gt;æˆ–è€…1&lt;div v-bind:class="classObj"&gt;&lt;/div&gt;æ¡ˆä¾‹12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849&lt;!DOCTYPE html&gt;&lt;html lang="en"&gt;&lt;head&gt; &lt;meta charset="UTF-8"&gt; &lt;title&gt;&lt;/title&gt; &lt;script src="https://cdn.staticfile.org/vue/2.7.0/vue.min.js"&gt;&lt;/script&gt; &lt;style&gt; .active &#123; width: 100px; height: 100px; background: green; &#125; .danger &#123; background: red; &#125; &lt;/style&gt;&lt;/head&gt;&lt;body&gt; &lt;div id="vue-app"&gt; &lt;!-- v-bind:classçš„å€¼æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå¯ä»¥æ˜¯å¯¹è±¡å®žä¾‹ï¼Œä¹Ÿå¯ä»¥æ˜¯å¯¹è±¡çš„åç§°ï¼ˆmodelçš„keyï¼‰ --&gt; &lt;!-- &#123; active: isActive,danger: false &#125;æ˜¯ä¸€ä¸ªå¯¹è±¡,å¯¹è±¡çš„keyå¯¹åº”çš„å€¼å¯ä»¥æ˜¯modelçš„keyï¼Œä¹Ÿå¯ä»¥æ˜¯booleanå€¼ --&gt; &lt;div v-bind:class="&#123; active: isActive,danger: false &#125;"&gt;&lt;/div&gt; &lt;br&gt;&lt;br&gt; &lt;!-- classObjæ˜¯å¯¹è±¡çš„åç§°ï¼ˆmodelçš„keyï¼‰ --&gt; &lt;div v-bind:class="classObj"&gt;&lt;/div&gt; &lt;/div&gt; &lt;script&gt; new Vue(&#123; el: '#vue-app', data: &#123; isActive: true, classObj: &#123; active: true, danger: true &#125; &#125; &#125;); &lt;/script&gt;&lt;/body&gt;&lt;/html&gt;Â¶2. style(å†…è”æ ·å¼)å±žæ€§ç»‘å®šåœ¨:styleä¸­é€šè¿‡keyå¼•ç”¨dataä¸­çš„æ ·å¼å¯¹è±¡1&lt;h1 :style="styleObj1"&gt;è¿™æ˜¯ä¸€ä¸ªh1&lt;/h1&gt;åœ¨:styleä¸­é€šè¿‡æ•°ç»„ï¼Œå¼•ç”¨å¤šä¸ªdataä¸Šçš„æ ·å¼å¯¹è±¡1&lt;h1 :style="[ styleObj1, styleObj2 ]"&gt;è¿™æ˜¯ä¸€ä¸ªh1&lt;/h1&gt;æ¡ˆä¾‹ï¼š1234567891011121314151617181920212223242526272829303132333435&lt;!DOCTYPE html&gt;&lt;html lang="en"&gt;&lt;head&gt; &lt;meta charset="UTF-8"&gt; &lt;meta name="viewport" content="width=device-width, initial-scale=1.0"&gt; &lt;meta http-equiv="X-UA-Compatible" content="ie=edge"&gt; &lt;title&gt;Document&lt;/title&gt; &lt;script src="https://cdn.staticfile.org/vue/2.7.0/vue.min.js"&gt;&lt;/script&gt;&lt;/head&gt;&lt;body&gt; &lt;div id="app"&gt; &lt;!-- åœ¨:styleä¸­é€šè¿‡keyå¼•ç”¨dataä¸­çš„æ ·å¼å¯¹è±¡ --&gt; &lt;h1 :style="styleObj1"&gt;è¿™æ˜¯ä¸€ä¸ªh1&lt;/h1&gt; &lt;br&gt;&lt;br&gt; &lt;!-- åœ¨:styleä¸­é€šè¿‡æ•°ç»„ï¼Œå¼•ç”¨å¤šä¸ªdataä¸Šçš„æ ·å¼å¯¹è±¡ --&gt; &lt;h1 :style="[ styleObj1, styleObj2 ]"&gt;è¿™æ˜¯ä¸€ä¸ªh1&lt;/h1&gt; &lt;/div&gt; &lt;script&gt; // åˆ›å»º Vue å®žä¾‹ï¼Œå¾—åˆ° ViewModel var vm = new Vue(&#123; el: '#app', data: &#123; styleObj1: &#123; color: 'red', 'font-weight': 200 &#125;, styleObj2: &#123; 'font-style': 'oblique' &#125; &#125;, methods: &#123;&#125; &#125;); &lt;/script&gt;&lt;/body&gt;&lt;/html&gt;Â¶å…«ã€éåŽ†v-for12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364&lt;!DOCTYPE html&gt;&lt;html lang="en"&gt;&lt;head&gt; &lt;meta charset="UTF-8"&gt; &lt;meta name="viewport" content="width=device-width, initial-scale=1.0"&gt; &lt;meta http-equiv="X-UA-Compatible" content="ie=edge"&gt; &lt;title&gt;Document&lt;/title&gt; &lt;script src="https://cdn.staticfile.org/vue/2.7.0/vue.min.js"&gt;&lt;/script&gt;&lt;/head&gt;&lt;body&gt; &lt;div id="app"&gt; &lt;!-- ä¸€ã€éåŽ†æ•°å­— --&gt; &lt;!-- in åŽé¢æˆ‘ä»¬æ”¾è¿‡ æ™®é€šæ•°ç»„ï¼Œå¯¹è±¡æ•°ç»„ï¼Œå¯¹è±¡ï¼Œ è¿˜å¯ä»¥æ”¾æ•°å­— --&gt; &lt;!-- æ³¨æ„ï¼šå¦‚æžœä½¿ç”¨ v-for è¿­ä»£æ•°å­—çš„è¯ï¼Œå‰é¢çš„ count å€¼ä»Ž 1 å¼€å§‹ --&gt; &lt;!-- æ¯éåŽ†ä¸€æ¬¡ç”Ÿæˆä¸€ä¸ªv-forç»‘å®šçš„å…ƒç´  --&gt; &lt;p v-for="count in 10"&gt;è¿™æ˜¯ç¬¬ &#123;&#123; count &#125;&#125; æ¬¡å¾ªçŽ¯&lt;/p&gt; &lt;!-- äºŒã€éåŽ†æ™®é€šæ•°ç»„ (1)é€šè¿‡ä¸‹æ ‡å–å€¼ (2)v-forå±žæ€§éåŽ† --&gt; &lt;p&gt;&#123;&#123;list[0]&#125;&#125;&lt;/p&gt; &lt;p&gt;&#123;&#123;list[1]&#125;&#125;&lt;/p&gt; &lt;p v-for="(item, i) in list"&gt;ç´¢å¼•å€¼ï¼š&#123;&#123;i&#125;&#125; --- æ¯ä¸€é¡¹ï¼š&#123;&#123;item&#125;&#125;&lt;/p&gt; &lt;!-- ä¸‰ã€éåŽ†å¯¹è±¡ --&gt; &lt;!-- æ³¨æ„ï¼šåœ¨éåŽ†å¯¹è±¡èº«ä¸Šçš„é”®å€¼å¯¹çš„æ—¶å€™ï¼Œ é™¤äº† æœ‰ val key ,åœ¨ç¬¬ä¸‰ä¸ªä½ç½®è¿˜æœ‰ ä¸€ä¸ª ç´¢å¼• --&gt; &lt;p v-for="(val, key, i) in user"&gt;å€¼æ˜¯ï¼š &#123;&#123; val &#125;&#125; --- é”®æ˜¯ï¼š &#123;&#123;key&#125;&#125; -- ç´¢å¼•ï¼š &#123;&#123;i&#125;&#125;&lt;/p&gt; &lt;!-- å››ã€éåŽ†å¯¹è±¡æ•°ç»„ --&gt; &lt;p v-for="(user, i) in users"&gt;Idï¼š&#123;&#123; user.id &#125;&#125; --- åå­—ï¼š&#123;&#123; user.name &#125;&#125; --- ç´¢å¼•ï¼š&#123;&#123;i&#125;&#125;&lt;/p&gt; &lt;/div&gt; &lt;script&gt; // åˆ›å»º Vue å®žä¾‹ï¼Œå¾—åˆ° ViewModel var vm = new Vue(&#123; el: '#app', data: &#123; list: [1, 2, 3, 4, 5, 6], user: &#123; id: 1, name: 'æ‰˜å°¼Â·å±Žå¤§é¢—', gender: 'ç”·' &#125;, users: [ &#123; id: 1, name: 'zs1' &#125;, &#123; id: 2, name: 'zs2' &#125;, &#123; id: 3, name: 'zs3' &#125;, &#123; id: 4, name: 'zs4' &#125; ] &#125;, methods: &#123;&#125; &#125;); &lt;/script&gt;&lt;/body&gt;&lt;/html&gt;Â¶ä¹ã€æ¡ä»¶åˆ¤æ–­Â¶1. v-ifv-if æŒ‡ä»¤å°†æ ¹æ®è¡¨è¾¾å¼çš„å€¼(true æˆ– false )æ¥å†³å®šæ˜¯å¦æ’å…¥ç»‘å®šçš„å…ƒç´ ã€‚12345678910111213141516171819202122232425262728293031323334353637&lt;!DOCTYPE html&gt;&lt;html lang="en"&gt;&lt;head&gt; &lt;meta charset="UTF-8"&gt; &lt;title&gt;v-if&lt;/title&gt; &lt;script src="https://cdn.staticfile.org/vue/2.7.0/vue.min.js"&gt;&lt;/script&gt; &lt;style&gt; p &#123; width: 100px; height: 100px; text-align: center; line-height: 100px; background: red; &#125; &lt;/style&gt;&lt;/head&gt;&lt;body&gt; &lt;div id="vue-app"&gt; &lt;!-- v-if æŒ‡ä»¤å°†æ ¹æ®è¡¨è¾¾å¼çš„å€¼(true æˆ– false )æ¥å†³å®šæ˜¯å¦æ’å…¥ç»‘å®šçš„å…ƒç´ ã€‚ --&gt; &lt;p v-if="flag1"&gt;p1&lt;/p&gt; &lt;p v-if="flag2"&gt;p2&lt;/p&gt; &lt;/div&gt; &lt;script&gt; // åˆ›å»º Vue å®žä¾‹ï¼Œå¾—åˆ° ViewModel var vm = new Vue(&#123; el: '#vue-app', data: &#123; flag1: false, flag2: true &#125; &#125;); &lt;/script&gt;&lt;/body&gt;&lt;/html&gt;Â¶2. v-ifã€v-elseå’Œv-else-if123456789101112131415161718192021222324252627282930313233343536&lt;!DOCTYPE html&gt;&lt;html&gt;&lt;head&gt; &lt;meta charset="utf-8"&gt; &lt;title&gt;v-ifã€v-elseã€v-else-if&lt;/title&gt; &lt;script src="https://cdn.staticfile.org/vue/2.7.0/vue.min.js"&gt;&lt;/script&gt;&lt;/head&gt;&lt;body&gt; &lt;div id="app"&gt; &lt;div v-if="type === 'A'"&gt; A &lt;/div&gt; &lt;div v-else-if="type === 'B'"&gt; B &lt;/div&gt; &lt;div v-else-if="type === 'C'"&gt; C &lt;/div&gt; &lt;div v-else&gt; Not A/B/C &lt;/div&gt; &lt;/div&gt; &lt;script&gt; new Vue(&#123; el: '#app', data: &#123; type: 'C' &#125; &#125;) &lt;/script&gt;&lt;/body&gt;&lt;/html&gt;Â¶3. v-showæ ¹æ®æ¡ä»¶å±•ç¤ºæˆ–è€…éšè—å…ƒç´ (è€Œä¸æ˜¯åƒv-ifé‚£æ ·æ’å…¥æˆ–è€…åˆ é™¤å…ƒç´ )12345678910111213141516171819202122232425262728293031323334353637&lt;!DOCTYPE html&gt;&lt;html lang="en"&gt;&lt;head&gt; &lt;meta charset="UTF-8"&gt; &lt;title&gt;v-show&lt;/title&gt; &lt;script src="https://cdn.staticfile.org/vue/2.7.0/vue.min.js"&gt;&lt;/script&gt; &lt;style&gt; p &#123; width: 100px; height: 100px; text-align: center; line-height: 100px; background: red; &#125; &lt;/style&gt;&lt;/head&gt;&lt;body&gt; &lt;div id="vue-app"&gt; &lt;!--æ ¹æ®æ¡ä»¶å±•ç¤ºæˆ–è€…éšè—å…ƒç´ (è€Œä¸æ˜¯åƒv-ifé‚£æ ·æ’å…¥æˆ–è€…åˆ é™¤å…ƒç´ ) --&gt; &lt;p v-show="flag1"&gt;p1&lt;/p&gt; &lt;p v-show="flag2"&gt;p2&lt;/p&gt; &lt;/div&gt; &lt;script&gt; // åˆ›å»º Vue å®žä¾‹ï¼Œå¾—åˆ° ViewModel var vm = new Vue(&#123; el: '#vue-app', data: &#123; flag1: false, flag2: true &#125; &#125;); &lt;/script&gt;&lt;/body&gt;&lt;/html&gt;Â¶4. v-ifå’Œv-showçš„åŒºåˆ«12345678910111213141516171819202122232425262728293031323334&lt;!DOCTYPE html&gt;&lt;html lang="en"&gt;&lt;head&gt; &lt;meta charset="UTF-8"&gt; &lt;title&gt;v-ifå’Œv-show&lt;/title&gt; &lt;script src="https://cdn.staticfile.org/vue/2.7.0/vue.min.js"&gt;&lt;/script&gt;&lt;/head&gt;&lt;body&gt; &lt;div id="app"&gt; &lt;!-- éœ€æ±‚:é€šè¿‡ç‚¹å‡»ä¿®æ”¹flagçš„å€¼ã€‚ --&gt; &lt;!-- v-if çš„ç‰¹ç‚¹ï¼šæ¯æ¬¡éƒ½ä¼šé‡æ–°åˆ é™¤æˆ–åˆ›å»ºå…ƒç´ ã€‚æœ‰è¾ƒé«˜çš„åˆ‡æ¢æ€§èƒ½æ¶ˆè€—ã€‚ v-show çš„ç‰¹ç‚¹ï¼š æ¯æ¬¡ä¸ä¼šé‡æ–°è¿›è¡ŒDOMçš„åˆ é™¤å’Œåˆ›å»ºæ“ä½œï¼Œåªæ˜¯åˆ‡æ¢äº†å…ƒç´ çš„ display:none æ ·å¼ã€‚æœ‰è¾ƒé«˜çš„åˆå§‹æ¸²æŸ“æ¶ˆè€— é€‰æ‹©ï¼š å¦‚æžœå…ƒç´ æ¶‰åŠåˆ°é¢‘ç¹çš„åˆ‡æ¢ï¼Œæœ€å¥½ä¸è¦ä½¿ç”¨ v-if, è€Œæ˜¯æŽ¨èä½¿ç”¨ v-showã€‚ å¦‚æžœå…ƒç´ å¯èƒ½æ°¸è¿œä¹Ÿä¸ä¼šè¢«æ˜¾ç¤ºå‡ºæ¥è¢«ç”¨æˆ·çœ‹åˆ°ï¼Œåˆ™æŽ¨èä½¿ç”¨ v-ifã€‚ --&gt; &lt;input type="button" value="toggle" @click="flag=!flag"&gt; &lt;h3 v-if="flag"&gt;è¿™æ˜¯ç”¨v-ifæŽ§åˆ¶çš„å…ƒç´ &lt;/h3&gt; &lt;h3 v-show="flag"&gt;è¿™æ˜¯ç”¨v-showæŽ§åˆ¶çš„å…ƒç´ &lt;/h3&gt; &lt;/div&gt; &lt;script&gt; // åˆ›å»º Vue å®žä¾‹ï¼Œå¾—åˆ° ViewModel var vm = new Vue(&#123; el: '#app', data: &#123; flag: false &#125; &#125;); &lt;/script&gt;&lt;/body&gt;&lt;/html&gt;Â¶åã€åŸºç¡€è¯­æ³•è¦ç‚¹æ€»ç»“12345678910111213141516171. MVC å’Œ MVVM çš„åŒºåˆ«2. å­¦ä¹ äº†Vueä¸­æœ€åŸºæœ¬ä»£ç çš„ç»“æž„3. æ’å€¼è¡¨è¾¾å¼ v-cloak v-text v-html v-bindï¼ˆç¼©å†™æ˜¯:ï¼‰ v-onï¼ˆç¼©å†™æ˜¯@ï¼‰ v-model v-for v-if v-show4. äº‹ä»¶ä¿®é¥°ç¬¦ ï¼š .stop .prevent .capture .self .once 5. el æŒ‡å®šè¦æŽ§åˆ¶çš„åŒºåŸŸ data æ˜¯ä¸ªå¯¹è±¡ï¼ŒæŒ‡å®šäº†æŽ§åˆ¶çš„åŒºåŸŸå†…è¦ç”¨åˆ°çš„æ•°æ® methods è™½ç„¶å¸¦ä¸ªsåŽç¼€ï¼Œä½†æ˜¯æ˜¯ä¸ªå¯¹è±¡ï¼Œè¿™é‡Œå¯ä»¥è‡ªå®šä¹‰äº†æ–¹æ³•6. åœ¨ VM å®žä¾‹ä¸­ï¼Œå¦‚æžœè¦è®¿é—® data ä¸Šçš„æ•°æ®ï¼Œæˆ–è€…è¦è®¿é—® methods ä¸­çš„æ–¹æ³•ï¼Œ å¿…é¡»å¸¦ this7. åœ¨ v-for è¦ä¼šä½¿ç”¨ key å±žæ€§ ï¼ˆåªæŽ¥å— string / numberï¼‰8. v-model åªèƒ½åº”ç”¨äºŽè¡¨å•å…ƒç´  --&gt;9. åœ¨vueä¸­ç»‘å®šæ ·å¼ä¸¤ç§æ–¹å¼ v-bind:class v-bind:styleÂ¶åä¸€ã€è¿‡æ»¤å™¨æ¦‚å¿µï¼šVue.js å…è®¸è‡ªå®šä¹‰è¿‡æ»¤å™¨ï¼Œå¯è¢«ç”¨ä½œä¸€äº›å¸¸è§çš„æ–‡æœ¬æ ¼å¼åŒ–ã€‚è¿‡æ»¤å™¨å¯ä»¥ç”¨åœ¨ä¸¤ä¸ªåœ°æ–¹ï¼šæ’å€¼è¡¨è¾¾å¼å’Œ v-bind è¡¨è¾¾å¼ã€‚è¿‡æ»¤å™¨åº”è¯¥è¢«æ·»åŠ åœ¨ JavaScript è¡¨è¾¾å¼çš„å°¾éƒ¨ï¼Œç”±**â€œç®¡é“â€**ç¬¦æŒ‡ç¤ºã€‚è¿‡æ»¤å™¨è°ƒç”¨çš„æ ¼å¼ï¼š1&#123;&#123; name | è¿‡æ»¤å™¨çš„åç§°(å®žå‚åˆ—è¡¨) &#125;&#125;è¿‡æ»¤å™¨çš„å®šä¹‰è¯­æ³•:å…¨å±€è¿‡æ»¤å™¨123Vue.filter('è¿‡æ»¤å™¨çš„åç§°', function(è¿‡æ»¤å™¨çš„å‚æ•°åˆ—è¡¨)&#123; //è¿‡æ»¤å™¨åšçš„å¤„ç†&#125;)ç§æœ‰ï¼ˆå±€éƒ¨ï¼‰è¿‡æ»¤å™¨12345filters: &#123; è¿‡æ»¤å™¨çš„åç§°: function (è¿‡æ»¤å™¨çš„å‚æ•°åˆ—è¡¨) &#123; //è¿‡æ»¤å™¨åšçš„å¤„ç† &#125;&#125;ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ç®¡é“å‰çš„å†…å®¹ï¼Œç¬¬äºŒä¸ªä¹‹åŽçš„å‚æ•°æ˜¯è¿‡æ»¤å™¨è°ƒç”¨æ–¹æ³•çš„å®žå‚åˆ—è¡¨ã€‚Â¶1. å…¨å±€è¿‡æ»¤å™¨å¯¹æ‰€æœ‰VM å¯¹è±¡æ‰€æŽ§åˆ¶çš„ View åŒºåŸŸéƒ½èµ·ä½œç”¨ã€‚1234567891011121314151617181920212223242526272829303132333435363738394041424344454647&lt;!DOCTYPE html&gt;&lt;html lang="en"&gt;&lt;head&gt; &lt;meta charset="UTF-8"&gt; &lt;title&gt;Document&lt;/title&gt; &lt;script src="https://cdn.staticfile.org/vue/2.7.0/vue.min.js"&gt;&lt;/script&gt;&lt;/head&gt;&lt;body&gt; &lt;div id="app1"&gt; &lt;h1&gt;app1&lt;/h1&gt; &lt;p&gt;è¿‡æ»¤å‰çš„å†…å®¹ï¼š&#123;&#123; msg&#125;&#125;&lt;/p&gt; &lt;p&gt;ç»å…¨å±€è¿‡æ»¤å™¨å¤„ç†åŽ: &#123;&#123; msg | globalFormat('global', 'filter')&#125;&#125;&lt;/p&gt; &lt;/div&gt; &lt;div id="app2"&gt; &lt;h1&gt;app2&lt;/h1&gt; &lt;p&gt;è¿‡æ»¤å‰çš„å†…å®¹ï¼š&#123;&#123; msg&#125;&#125;&lt;/p&gt; &lt;p&gt;ç»å…¨å±€è¿‡æ»¤å™¨å¤„ç†åŽ: &#123;&#123; msg | globalFormat('global', 'filter')&#125;&#125;&lt;/p&gt; &lt;/div&gt; &lt;script&gt; //å®šä¹‰å…¨å±€è¿‡æ»¤å™¨(å¯¹æ‰€æœ‰VMå¯¹è±¡æ‰€æŽ§åˆ¶çš„ViewåŒºåŸŸéƒ½èµ·ä½œç”¨ã€‚) Vue.filter('globalFormat', function (msg, arg, arg2) &#123;//å®šä¹‰ä¸€ä¸ª Vue å…¨å±€çš„è¿‡æ»¤å™¨ï¼Œåå­—å«åš localFormatï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ç®¡é“å‰çš„å†…å®¹ï¼Œå…¶ä½™å‚æ•°æ˜¯localFormat()è¿‡æ»¤å™¨æ–¹æ³•çš„å®žå‚ //è¿‡æ»¤å™¨åšçš„å¤„ç† return msg.replace(/vue/g, arg + " " + arg2);//å­—ç¬¦ä¸²çš„ replace æ–¹æ³•ï¼Œç¬¬ä¸€ä¸ªå‚æ•°ï¼Œé™¤äº†å¯å†™ä¸€ä¸ª å­—ç¬¦ä¸²ä¹‹å¤–ï¼Œè¿˜å¯ä»¥å®šä¹‰ä¸€ä¸ªæ­£åˆ™ &#125;); var vm1 = new Vue(&#123; el: '#app1', data: &#123; msg: 'hello vue1' &#125; &#125;); var vm2 = new Vue(&#123; el: '#app2', data: &#123; msg: 'hello vue2' &#125; &#125;); &lt;/script&gt;&lt;/body&gt;&lt;/html&gt;Â¶2. ç§æœ‰è¿‡æ»¤å™¨ç§æœ‰ï¼ˆå±€éƒ¨ï¼‰è¿‡æ»¤å™¨ã€‚åªèƒ½åœ¨å½“å‰ VM å¯¹è±¡æ‰€æŽ§åˆ¶çš„ View åŒºåŸŸèµ·ä½œç”¨1234567891011121314151617181920212223242526272829303132333435363738394041424344454647&lt;!DOCTYPE html&gt;&lt;html lang="en"&gt;&lt;head&gt; &lt;meta charset="UTF-8"&gt; &lt;title&gt;Document&lt;/title&gt; &lt;script src="https://cdn.staticfile.org/vue/2.7.0/vue.min.js"&gt;&lt;/script&gt;&lt;/head&gt;&lt;body&gt; &lt;div id="app1"&gt; &lt;h1&gt;app1&lt;/h1&gt; &lt;p&gt;è¿‡æ»¤å‰çš„å†…å®¹ï¼š&#123;&#123; msg&#125;&#125;&lt;/p&gt; &lt;p&gt;ç»å…¨å±€è¿‡æ»¤å™¨å¤„ç†åŽ: &#123;&#123; msg | localFormat('local', 'filter')&#125;&#125;&lt;/p&gt; &lt;/div&gt; &lt;div id="app2"&gt; &lt;h1&gt;app2&lt;/h1&gt; &lt;p&gt;è¿‡æ»¤å‰çš„å†…å®¹ï¼š&#123;&#123; msg&#125;&#125;&lt;/p&gt; &lt;p&gt;ç»å…¨å±€è¿‡æ»¤å™¨å¤„ç†åŽ: &#123;&#123; msg | localFormat('local', 'filter')&#125;&#125;&lt;/p&gt; &lt;/div&gt; &lt;script&gt; var vm1 = new Vue(&#123; el: '#app1', data: &#123; msg: 'hello vue1' &#125;, filters: &#123; //å®šä¹‰ç§æœ‰ï¼ˆå±€éƒ¨ï¼‰è¿‡æ»¤å™¨ã€‚åªèƒ½åœ¨ å½“å‰ VM å¯¹è±¡æ‰€æŽ§åˆ¶çš„ View åŒºåŸŸèµ·ä½œç”¨ localFormat: function (msg,arg,arg2) &#123;//é»˜è®¤å°†ç®¡é“å‰çš„å†…å®¹å½“ä½œlocalFormat()è¿‡æ»¤å™¨æ–¹æ³•çš„ç¬¬ä¸€ä¸ªå®žå‚,å…¶ä½™å‚æ•°æ˜¯localFormat()è¿‡æ»¤å™¨æ–¹æ³•çš„å®žå‚ //è¿‡æ»¤å™¨åšçš„å¤„ç† return msg.replace(/vue/g, arg + " " + arg2);//å­—ç¬¦ä¸²çš„ replace æ–¹æ³•ï¼Œç¬¬ä¸€ä¸ªå‚æ•°ï¼Œé™¤äº†å¯å†™ä¸€ä¸ª å­—ç¬¦ä¸²ä¹‹å¤–ï¼Œè¿˜å¯ä»¥å®šä¹‰ä¸€ä¸ªæ­£åˆ™ &#125; &#125; &#125;); var vm2 = new Vue(&#123; el: '#app2', data: &#123; msg: 'hello vue2' &#125; &#125;); &lt;/script&gt;&lt;/body&gt;&lt;/html&gt;Â¶åäºŒã€è‡ªå®šä¹‰æŒ‡ä»¤é™¤äº†æ ¸å¿ƒåŠŸèƒ½é»˜è®¤å†…ç½®çš„æŒ‡ä»¤ (v-model å’Œ v-show)ï¼ŒVue ä¹Ÿå…è®¸æ³¨å†Œè‡ªå®šä¹‰æŒ‡ä»¤ã€‚å®žçŽ°è‡ªå®šä¹‰æŒ‡ä»¤å¯ä»¥æ˜¯å…¨å±€çš„ï¼Œä¹Ÿå¯ä»¥æ˜¯å±€éƒ¨çš„ã€‚å…¨å±€æŒ‡çš„æ˜¯æ‰€æœ‰vueå¯¹è±¡çš„æŽ§åˆ¶åŒºåŸŸï¼Œå±€éƒ¨æŒ‡çš„æ˜¯å½“å‰å®šä¹‰æŒ‡ä»¤æ‰€åœ¨vueå¯¹è±¡çš„æŽ§åˆ¶åŒºåŸŸã€‚æ¡ˆä¾‹ï¼šç”¨æŒ‡ä»¤æ¥å®žçŽ°å¼€é¡µé¢åŽè¿˜æ²¡ç‚¹å‡»è¿‡ä»»ä½•å†…å®¹ï¼Œè¾“å…¥æ¡†å°±å¤„äºŽèšç„¦çŠ¶æ€ï¼Œå¹¶ä¸”è¦æ±‚ç”¨æŒ‡ä»¤å®žçŽ°è¾“å…¥çš„å†…å®¹é¢œè‰²ä¸ºå¯å˜å®žå‚ã€‚1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465&lt;!DOCTYPE html&gt;&lt;html lang="en"&gt;&lt;head&gt; &lt;meta charset="UTF-8"&gt; &lt;title&gt;Document&lt;/title&gt; &lt;script src="https://cdn.staticfile.org/vue/2.7.0/vue.min.js"&gt;&lt;/script&gt;&lt;/head&gt;&lt;body&gt; &lt;div id="app"&gt; &lt;!-- å¦‚æžœéœ€è¦ç»™è‡ªå®šä¹‰æŒ‡ä»¤ä¼ å‚ï¼Œé‚£ä¹ˆéœ€è¦åœ¨åŒå¼•å·é‡Œä½¿ç”¨å•å¼•å·æŠŠå®žå‚åŒ…å«ä½ï¼Œå¦åˆ™ä¼šæŠ¥é”™ --&gt; &lt;input type="text" v-focus v-color="'green'"&gt; &lt;/div&gt; &lt;script&gt; /*æ³¨å†Œå…¨å±€è‡ªå®šä¹‰æŒ‡ä»¤ v-focus*/ /* ä½¿ç”¨ Vue.directive() å®šä¹‰å…¨å±€çš„æŒ‡ä»¤ v-focus å…¶ä¸­ï¼š å‚æ•°1 ï¼š æŒ‡ä»¤çš„åç§°ï¼Œæ³¨æ„ï¼Œåœ¨å®šä¹‰çš„æ—¶å€™ï¼ŒæŒ‡ä»¤çš„åç§°å‰é¢ï¼Œä¸éœ€è¦åŠ  v- å‰ç¼€, ä½†æ˜¯ï¼š åœ¨è°ƒç”¨çš„æ—¶å€™ï¼Œå¿…é¡» åœ¨æŒ‡ä»¤åç§°å‰ åŠ ä¸Š v- å‰ç¼€æ¥è¿›è¡Œè°ƒç”¨ å‚æ•°2ï¼š æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡èº«ä¸Šï¼Œæœ‰ä¸€äº›æŒ‡ä»¤ç›¸å…³çš„å‡½æ•°ï¼Œè¿™äº›å‡½æ•°å¯ä»¥åœ¨ç‰¹å®šçš„é˜¶æ®µï¼Œæ‰§è¡Œç›¸å…³çš„æ“ä½œã€‚å¸¸ç”¨çš„æœ‰ä¸‰ä¸ªæ–¹æ³•ï¼š1.bind() 2.inserted() 3.updated()ã€‚ä¸€èˆ¬åŠ¨ä½œæŒ‡ä»¤åœ¨inserted()ä¸­è°ƒç”¨ï¼Œè€Œæ ·å¼ç­‰åœ¨bind()ä¸­è°ƒç”¨ã€‚ */ Vue.directive('focus', &#123; bind: function (el) &#123; // æ¯å½“æŒ‡ä»¤ç»‘å®šåˆ°å…ƒç´ ä¸Šçš„æ—¶å€™ï¼Œä¼šç«‹å³æ‰§è¡Œè¿™ä¸ª bind å‡½æ•°ï¼Œåªæ‰§è¡Œä¸€æ¬¡ // æ³¨æ„ï¼š åœ¨æ¯ä¸ª å‡½æ•°ä¸­ï¼Œç¬¬ä¸€ä¸ªå‚æ•°ï¼Œæ°¸è¿œæ˜¯ el ï¼Œè¡¨ç¤º è¢«ç»‘å®šäº†æŒ‡ä»¤çš„é‚£ä¸ªå…ƒç´ ï¼Œè¿™ä¸ª el å‚æ•°ï¼Œæ˜¯ä¸€ä¸ªåŽŸç”Ÿçš„JSå¯¹è±¡ // åœ¨å…ƒç´  åˆšç»‘å®šäº†æŒ‡ä»¤çš„æ—¶å€™ï¼Œè¿˜æ²¡æœ‰ æ’å…¥åˆ° DOMä¸­åŽ»ï¼Œè¿™æ—¶å€™ï¼Œè°ƒç”¨ focus æ–¹æ³•æ²¡æœ‰ä½œç”¨ // å› ä¸ºï¼Œä¸€ä¸ªå…ƒç´ ï¼Œåªæœ‰æ’å…¥DOMä¹‹åŽï¼Œæ‰èƒ½èŽ·å–ç„¦ç‚¹ // el.focus() &#125;, // å½“è¢«ç»‘å®šçš„å…ƒç´ æ’å…¥åˆ° DOM ä¸­æ—¶â€¦â€¦ inserted: function (el) &#123; // èšç„¦å…ƒç´  el.focus(); &#125;, updated: function (el) &#123; // å½“VNodeæ›´æ–°çš„æ—¶å€™ï¼Œä¼šæ‰§è¡Œ updatedï¼Œ å¯èƒ½ä¼šè§¦å‘å¤šæ¬¡ &#125; &#125;); /*æ³¨å†Œå…¨å±€æŒ‡ä»¤v-color*/ Vue.directive('color', &#123; bind: function (el, binding) &#123; el.style.color = binding.value; &#125; &#125;); new Vue(&#123; el: "#app", /*æ³¨å†Œå±€éƒ¨è‡ªå®šä¹‰æŒ‡ä»¤ v-focusï¼Œå¦‚æžœå…¨å±€å’Œå±€éƒ¨è‡ªå®šä¹‰æŒ‡ä»¤çš„åç§°ç›¸åŒï¼Œé‚£ä¹ˆvueä¼šé‡‡å–å°±è¿‘åŽŸåˆ™ã€‚*/ directives: &#123; focus: &#123; // æŒ‡ä»¤çš„å®šä¹‰ inserted: function (el) &#123; el.focus(); &#125; &#125;, color: function (el, binding) &#123; el.style.color = binding.value; &#125; &#125; &#125;); &lt;/script&gt;&lt;/body&gt;&lt;/html&gt;Â¶åä¸‰ã€vueå®žä¾‹çš„ç”Ÿå‘½å‘¨æœŸÂ¶1. æ¦‚å¿µä»€ä¹ˆæ˜¯ç”Ÿå‘½å‘¨æœŸï¼šä»ŽVueå®žä¾‹åˆ›å»ºã€è¿è¡Œã€åˆ°é”€æ¯æœŸé—´ï¼Œæ€»æ˜¯ä¼´éšç€å„ç§å„æ ·çš„äº‹ä»¶ï¼Œè¿™äº›äº‹ä»¶ï¼Œç»Ÿç§°ä¸ºç”Ÿå‘½å‘¨æœŸï¼ç”Ÿå‘½å‘¨æœŸé’©å­ï¼šå°±æ˜¯ç”Ÿå‘½å‘¨æœŸäº‹ä»¶çš„åˆ«åï¼›ç”Ÿå‘½å‘¨æœŸé’©å­ = ç”Ÿå‘½å‘¨æœŸå‡½æ•° = ç”Ÿå‘½å‘¨æœŸäº‹ä»¶Â¶2. ç”Ÿå‘½å‘¨æœŸå‡½æ•°åˆ†ç±»åˆ›å»ºæœŸé—´çš„ç”Ÿå‘½å‘¨æœŸå‡½æ•°1234(1)beforeCreate //å®žä¾‹åˆšåœ¨å†…å­˜ä¸­è¢«åˆ›å»ºå‡ºæ¥ï¼Œæ­¤æ—¶ï¼Œè¿˜æ²¡æœ‰åˆå§‹åŒ–å¥½ data å’Œ methods å±žæ€§(2)created //å®žä¾‹å·²ç»åœ¨å†…å­˜ä¸­åˆ›å»ºOKï¼Œæ­¤æ—¶ data å’Œ methods å·²ç»åˆ›å»ºOKï¼Œæ­¤æ—¶è¿˜æ²¡æœ‰å¼€å§‹ ç¼–è¯‘æ¨¡æ¿(3)beforeMount //æ­¤æ—¶å·²ç»å®Œæˆäº†æ¨¡æ¿çš„ç¼–è¯‘ï¼Œä½†æ˜¯è¿˜æ²¡æœ‰æŒ‚è½½åˆ°é¡µé¢ä¸­(4)mounted //æ­¤æ—¶ï¼Œå·²ç»å°†ç¼–è¯‘å¥½çš„æ¨¡æ¿ï¼ŒæŒ‚è½½åˆ°äº†é¡µé¢æŒ‡å®šçš„å®¹å™¨ä¸­æ˜¾ç¤ºè¿è¡ŒæœŸé—´çš„ç”Ÿå‘½å‘¨æœŸå‡½æ•°12(1)beforeUpdate //çŠ¶æ€æ›´æ–°ä¹‹å‰æ‰§è¡Œæ­¤å‡½æ•°ï¼Œ æ­¤æ—¶ data ä¸­çš„çŠ¶æ€å€¼æ˜¯æœ€æ–°çš„ï¼Œä½†æ˜¯ç•Œé¢ä¸Šæ˜¾ç¤ºçš„ æ•°æ®è¿˜æ˜¯æ—§çš„ï¼Œå› ä¸ºæ­¤æ—¶è¿˜æ²¡æœ‰å¼€å§‹é‡æ–°æ¸²æŸ“DOMèŠ‚ç‚¹(2)updated //å®žä¾‹æ›´æ–°å®Œæ¯•ä¹‹åŽè°ƒç”¨æ­¤å‡½æ•°ï¼Œæ­¤æ—¶ data ä¸­çš„çŠ¶æ€å€¼ å’Œ ç•Œé¢ä¸Šæ˜¾ç¤ºçš„æ•°æ®ï¼Œéƒ½å·²ç»å®Œæˆäº†æ›´æ–°ï¼Œç•Œé¢å·²ç»è¢«é‡æ–°æ¸²æŸ“å¥½äº†ï¼é”€æ¯æœŸé—´çš„ç”Ÿå‘½å‘¨æœŸå‡½æ•°12(1)beforeDestroy //å®žä¾‹é”€æ¯ä¹‹å‰è°ƒç”¨ã€‚åœ¨è¿™ä¸€æ­¥ï¼Œå®žä¾‹ä»ç„¶å®Œå…¨å¯ç”¨ã€‚(2)destroyed //Vue å®žä¾‹é”€æ¯åŽè°ƒç”¨ã€‚è°ƒç”¨åŽï¼ŒVue å®žä¾‹æŒ‡ç¤ºçš„æ‰€æœ‰ä¸œè¥¿éƒ½ä¼šè§£ç»‘å®šï¼Œæ‰€æœ‰çš„äº‹ä»¶ç›‘å¬å™¨ä¼šè¢«ç§»é™¤ï¼Œæ‰€æœ‰çš„å­å®žä¾‹ä¹Ÿä¼šè¢«é”€æ¯ã€‚Â¶åå››ã€httpæ•°æ®è¯·æ±‚vueå®žçŽ°httpæ•°æ®è¯·æ±‚æœ‰å¾ˆå¤šç§ç¬¬ä¸‰æ–¹åŒ…å¯ä»¥å®žçŽ°ã€‚ä¸»è¦æœ‰ä¸¤ç§æ’ä»¶åŒ…å¯ä»¥ä½¿ç”¨ã€‚Â¶1. vue-resourceä¸‹è½½åœ°å€ï¼šhttps://github.com/pagekit/vue-resourceä»¥getè¯·æ±‚ä¸¾ä¾‹ï¼š12345678&#123; // GET /someUrl this.$http.get('/someUrl').then(response =&gt; &#123; // success callback &#125;, response =&gt; &#123; // error callback &#125;);&#125;æŒ‰ç…§ä½œç”¨åŸŸå¯åˆ†ä¸ºï¼š1234567// global Vue objectVue.http.get('/someUrl', [config]).then(successCallback, errorCallback);Vue.http.post('/someUrl', [body], [config]).then(successCallback, errorCallback);// in a Vue instancethis.$http.get('/someUrl', [config]).then(successCallback, errorCallback);this.$http.post('/someUrl', [body], [config]).then(successCallback, errorCallback);å…¶ä»–è¯·æ±‚æ–¹å¼ï¼š1234567get(url, [config])head(url, [config])delete(url, [config])jsonp(url, [config])post(url, [body], [config])put(url, [body], [config])patch(url, [body], [config])æ›´å¤šæ•™ç¨‹å‚è€ƒå®˜æ–¹æ–‡æ¡£https://github.com/pagekit/vue-resource/blob/develop/docs/http.mdÂ¶2. axiosè¿™æ˜¯é‡ç‚¹ï¼Œåœ¨åŽé¢çš„è„šæ‰‹æž¶å·¥ç¨‹ä¸­å¦ä½œä»‹ç»â€¦Â¶åäº”ã€åŸºäºŽè„šæ‰‹æž¶çš„vueå·¥ç¨‹å·¥ç¨‹æ­å»ºæ­¥éª¤Â¶1. å®‰è£…node.jså®˜ç½‘ä¸‹è½½æœ€æ–°ç‰ˆæœ¬åŽé»˜è®¤nextå‚»ç“œå¼å®‰è£…å®Œæˆã€‚Â¶2. å®‰è£…cnpmä¸ºäº†npmä¸‹è½½åŒ…æ›´å¿«æ›´æµç•…ï¼Œå¯ä»¥æ”¹ç”¨å›½å†…æ·˜å®é•œåƒå·¥å…·cnpm1$ npm install -g cnpm --registry=https://registry.npmmirror.comÂ¶3. å®‰è£…webpack1$ cnpm install webpack -gÂ¶4. å®‰è£…vueè„šæ‰‹æž¶ï¼ˆå‘½ä»¤è¡Œå·¥å…·ï¼‰ä½¿ç”¨nodeè‡ªå¸¦çš„npmåŒ…ç®¡ç†å™¨å®‰è£…vue-cli1$ npm install vue-cli -gæ›´å¤šnpmå‘½ä»¤è¯¦è§£ï¼š123456789101112131415161718192021222324252627282930313233343536373839404142##å®‰è£…åŒ…$ npm install #é»˜è®¤æ ¹æ®é¡¹ç›®ä¸‹çš„ package.jsonçš„åŒ…é…ç½®å®‰è£…å¯¹åº”çš„åŒ…$ npm install &lt;åŒ…å&gt; -S #å³ npm install module_name â€“save å†™å…¥package.json dependenciesï¼Œç”¨äºŽç”Ÿäº§çŽ¯å¢ƒ$ npm install &lt;åŒ…å&gt; -D #å³npm install module_name â€“save-dev å†™å…¥package.jsonçš„devDependenciesï¼Œç”¨äºŽå¼€å‘çŽ¯å¢ƒ$ npm install &lt;åŒ…å&gt; #æœ¬åœ°å®‰è£…(å°†å®‰è£…åŒ…æ”¾åœ¨ ./node_modules ä¸‹)ä¸å†™å…¥package.jsonï¼› $ npm install &lt;åŒ…å&gt; -g #å…¨å±€å®‰è£…(å‘½ä»¤è¡Œä½¿ç”¨)##æ ‘åž‹ç»“æž„åˆ—å‡ºå½“å‰é¡¹ç›®å®‰è£…çš„æ‰€æœ‰æ¨¡å—ï¼Œä»¥åŠå®ƒä»¬ä¾èµ–çš„æ¨¡å—ã€‚$ npm list #åˆ—å‡ºå·²å®‰è£…çš„æ¨¡å—ã€‚$ npm list -global #åŠ ä¸Šglobalå‚æ•°ï¼Œä¼šåˆ—å‡ºå…¨å±€å®‰è£…çš„æ¨¡å—ã€‚$ npm list underscore #åˆ—å‡ºå•ä¸ªæ¨¡å—ã€‚##å¸è½½åˆ é™¤åŒ…$ npm uninstall &lt;åŒ…å&gt; #åˆ é™¤xxxåŒ…ï¼›$ npm uninstall -g &lt;åŒ…å&gt; #åˆ é™¤å…¨å±€åŒ…xxx##æ›´æ–°åŒ…npm update &lt;åŒ…å&gt; #æ›´æ–°å½“å‰é¡¹ç›®ä¸­å®‰è£…çš„æŸä¸ªåŒ…npm update #æ›´æ–°å½“å‰é¡¹ç›®ä¸­å®‰è£…çš„æ‰€æœ‰åŒ…npm update &lt;åŒ…å&gt; -g #æ›´æ–°å…¨å±€å®‰è£…çš„åŒ…##æœç´¢åŒ…$ npm search &lt;å…³é”®å­—&gt;##åˆå§‹åŒ–package.json#æ ¹æ®äº¤äº’é—®ç­”äº§ç”Ÿä¸€ä¸ªç¬¦åˆæ ‡å‡†çš„ package.jsonï¼Œå¦‚æžœä½¿ç”¨äº†-fï¼ˆä»£è¡¨forceï¼‰ã€-yï¼ˆä»£è¡¨yesï¼‰ï¼Œåˆ™è·³è¿‡æé—®é˜¶æ®µï¼Œç›´æŽ¥ç”Ÿæˆä¸€ä¸ªæ–°çš„package.jsonæ–‡ä»¶ã€‚npm init##è®¾ç½®çŽ¯å¢ƒå˜é‡#ä¸Šé¢å‘½ä»¤ç­‰äºŽä¸ºnpm initè®¾ç½®äº†é»˜è®¤å€¼ï¼Œä»¥åŽæ‰§è¡Œnpm initçš„æ—¶å€™ï¼Œpackage.jsonçš„ä½œè€…å§“åã€é‚®ä»¶ã€ä¸»é¡µã€è®¸å¯è¯å­—æ®µå°±ä¼šè‡ªåŠ¨å†™å…¥é¢„è®¾çš„å€¼ã€‚è¿™äº›ä¿¡æ¯ä¼šå­˜æ”¾åœ¨ç”¨æˆ·ä¸»ç›®å½•çš„ ~/.npmrcæ–‡ä»¶ï¼Œä½¿å¾—ç”¨æˆ·ä¸ç”¨æ¯ä¸ªé¡¹ç›®éƒ½è¾“å…¥ã€‚å¦‚æžœæŸä¸ªé¡¹ç›®æœ‰ä¸åŒçš„è®¾ç½®ï¼Œå¯ä»¥é’ˆå¯¹è¯¥é¡¹ç›®è¿è¡Œnpm configã€‚$ npm set init-author-name 'Your name'$ npm set init-author-email 'Your email'$ npm set init-author-url 'http://yourdomain.com'$ npm set init-license 'MIT'##åˆ—å‡ºnpmçš„é…ç½®$ npm config list -lÂ¶5. å»ºç«‹å·¥ç¨‹Â¶5.1 æ–¹å¼1 ä½¿ç”¨webpackåˆ›å»ºå·¥ç¨‹1$ vue init webpack demo1 #demo1æ˜¯å·¥ç¨‹åå­—,å·¥ç¨‹åå­—ä¸èƒ½ç”¨ä¸­æ–‡ç­‰å¾…å·¥ç¨‹åˆå§‹åŒ–å¹¶ä¸‹è½½ä¾èµ–åŒ…ï¼Œæž„å»ºå®ŒæˆåŽï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤123$ cd demo1 #è¿›å…¥å·¥ç¨‹é¡¹ç›®$ cnpm install #å†æ¬¡å®‰è£…ä¾èµ–ï¼Œé˜²æ­¢initçš„æ—¶å€™å®‰è£…é”™è¯¯ï¼Œå¦‚æžœvue iniä¸æŠ¥é”™å¯ä»¥çœç•¥æ­¤æ­¥$ npm run dev #å¯åŠ¨é¡¹ç›®Â¶5.2 æ–¹å¼2 ä½¿ç”¨vueè„šæ‰‹æž¶åˆ›å»ºå·¥ç¨‹5.2.1 æ ¹æ®æ¨¡æ¿åˆ›å»ºé¡¹ç›®1$ vue init webpack-simple demo2 #demo2æ˜¯å·¥ç¨‹ç›®å½•çš„åå­—,å·¥ç¨‹åå­—ä¸èƒ½ç”¨ä¸­æ–‡ï¼Œå¦‚æžœä¸åŠ å·¥ç¨‹åï¼Œåˆ™é»˜è®¤ä»¥å½“å‰ç›®å½•ä½œä¸ºå·¥ç¨‹ç›®å½•ç›¸æ¯”äºŽæ–¹å¼1æ­¥éª¤æ›´ç®€å•ï¼Œçœç•¥äº†å¾ˆå¤šæç¤ºæ­¥éª¤ç­‰å¾…å·¥ç¨‹åˆå§‹åŒ–å¹¶ä¸‹è½½ä¾èµ–åŒ…ï¼Œæž„å»ºå®ŒæˆåŽ,æ‰§è¡Œä»¥ä¸‹å‘½ä»¤1234$ cd demo2$ cnpm install #å®‰è£…é¡¹ç›®ä¾èµ–$ cnpm install vue-router --save #ä¸ºäº†ä¸Žæ–¹å¼1åŒæ­¥ï¼Œè¿™é‡Œä¹Ÿå®‰è£…è·¯ç”±æ¨¡å—ã€‚å½“ç„¶å¯ä»¥ç­‰åˆ°éœ€è¦çš„æ—¶å€™å†å•ç‹¬å®‰è£…$ npm run dev #å¯åŠ¨é¡¹ç›®Â¶6. å·¥ç¨‹ç›®å½•å’Œæ–‡ä»¶ä»‹ç»ä»¥ä¸Šé¢ç¬¬äºŒç§æ–¹å¼åˆ›å»ºçš„å·¥ç¨‹åšä»‹ç»Â¶6.1 å·¥ç¨‹ç›®å½•1234567891011.â”œâ”€â”€ README.md #é¡¹ç›®ä»‹ç»æ–‡ä»¶ï¼Œå¯åˆ é™¤â”œâ”€â”€ index.html #é¦–é¡µå…¥å£æ–‡ä»¶ã€‚(é‡ç‚¹)â”œâ”€â”€ node_modules #åŠ è½½çš„é¡¹ç›®ä¾èµ–æ¨¡å—â”œâ”€â”€ package.json #é¡¹ç›®é…ç½®æ–‡ä»¶ï¼ŒåŒ…å«ä¾èµ–ç­‰é…ç½®(é‡ç‚¹)â”œâ”€â”€ src #èµ„æºæ–‡ä»¶ç›®å½•(é‡ç‚¹)â”‚ â”œâ”€â”€ App.vue #æ ¹ç»„ä»¶â”‚ â”œâ”€â”€ assets #å›¾ç‰‡èµ„æºç›®å½•â”‚ â”‚ â””â”€â”€ logo.pngâ”‚ â””â”€â”€ main.js #å…¥å£jsæ–‡ä»¶ï¼Œé¡¹ç›®çš„æ ¸å¿ƒæ–‡ä»¶â””â”€â”€ webpack.config.js #webpacké…ç½®æ–‡ä»¶Â¶6.2 é‡è¦å·¥ç¨‹æ–‡ä»¶è¯¦è§£inde.html123456789101112&lt;!-- é¦–é¡µå…¥å£æ–‡ä»¶ --&gt;&lt;!DOCTYPE html&gt;&lt;html lang="en"&gt; &lt;head&gt; &lt;meta charset="utf-8"&gt; &lt;title&gt;demo2&lt;/title&gt; &lt;/head&gt; &lt;body&gt; &lt;div id="app"&gt;&lt;/div&gt; &lt;script src="/dist/build.js"&gt;&lt;/script&gt; &lt;!-- æŒ‡å®šwebpackç¼–è¯‘ç”Ÿæˆçš„jsè·¯å¾„ï¼Œè¿™ä¸ªjsæ–‡ä»¶æ˜¯å…¥å£jsæ–‡ä»¶main.jsçš„ç¼–è¯‘ç»“æžœ --&gt; &lt;/body&gt;&lt;/html&gt;main.js12345678910111213141516171819202122232425/** * å…¥å£jsæ–‡ä»¶ï¼Œé¡¹ç›®çš„æ ¸å¿ƒæ–‡ä»¶ */import Vue from 'vue' //å¯¼å…¥vueåŒ…import App from './App.vue' //å¯¼å…¥ç»„ä»¶/* new Vue(&#123; el: '#app', render: function (createElements) &#123; // createElements æ˜¯ä¸€ä¸ª æ–¹æ³•ï¼Œè°ƒç”¨å®ƒï¼Œèƒ½å¤ŸæŠŠ æŒ‡å®šçš„ ç»„ä»¶æ¨¡æ¿ï¼Œæ¸²æŸ“ä¸º html ç»“æž„ return createElements(App) // æ³¨æ„ï¼šè¿™é‡Œ return çš„ç»“æžœï¼Œä¼š æ›¿æ¢é¡µé¢ä¸­ el æŒ‡å®šçš„é‚£ä¸ª å®¹å™¨ &#125;&#125;) */// åˆ›å»º Vue å®žä¾‹ï¼Œå¾—åˆ° ViewModelnew Vue(&#123; el: '#app', render: h =&gt; h(App) /*ç®­å¤´å‡½æ•°ï¼Œç”¨äºŽç®€å†™å‡½æ•°(ç®­å¤´å‰æ˜¯å‡½æ•°å‚æ•°ï¼Œç®­å¤´åŽæ˜¯å‡½æ•°çš„è¿”å›žå€¼,hç›¸å½“äºŽcreateElements)ï¼Œ è€Œh(App)ç›¸å½“äºŽreturn createElements(App)ï¼Œå’Œä¸Šé¢çš„render: function (createElements) &#123; &#125; æ¸²æŸ“å‡½æ•°æ„ä¹‰ä¸€æ ·,æ¸²æŸ“Appç»„ä»¶åˆ°elå¯¹åº”çš„æ ¹èŠ‚ç‚¹ä¸­åŽ»ï¼Œä¼šå°†ç»„ä»¶æ›¿ä»£æŽ‰elå¯¹åº”çš„æ ‡ç­¾å…ƒç´ ,è¿™æ ·åšçš„å¥½å¤„ æ˜¯ä¸éœ€è¦åœ¨htmlä¸­å†™ç»„ä»¶æ ‡ç­¾*/&#125;)App.vue123456789101112131415161718192021222324252627282930&lt;!-- æ ¹ç»„ä»¶ .vueç»„ä»¶æ–‡ä»¶ç”±ä¸‰éƒ¨åˆ†ç»„æˆ: 1. æ¨¡ç‰ˆ&lt;template&gt; 2. jsè„šæœ¬&lt;script&gt; 3. æ ·å¼&lt;style&gt;--&gt;&lt;template&gt; &lt;!-- templateé‡Œæœ‰ä¸”ä»…æœ‰ä¸€ä¸ªå¹¶è¡Œæ ¹èŠ‚ç‚¹ï¼Œä½†æ˜¯æ ¹èŠ‚ç‚¹é‡Œå¯ä»¥æœ‰å¤šä¸ªå¹¶è¡ŒèŠ‚ç‚¹ --&gt; &lt;div id="app"&gt;&#123;&#123;msg&#125;&#125;&lt;/div&gt;&lt;/template&gt;&lt;script&gt;export default &#123; name: "app", data() &#123; return &#123; msg: "Hello Vue !" &#125;; &#125;&#125;;&lt;/script&gt;&lt;style&gt;#app &#123; text-align: center; color: #2c3e50; margin-top: 60px;&#125;&lt;/style&gt;Â¶7. å•æ–‡ä»¶ç»„ä»¶.vueæ–‡ä»¶ï¼Œç§°ä¸ºå•æ–‡ä»¶ç»„ä»¶ï¼Œæ˜¯Vue.jsè‡ªå®šä¹‰çš„ä¸€ç§æ–‡ä»¶æ ¼å¼ï¼Œä¸€ä¸ª.vueæ–‡ä»¶å°±æ˜¯ä¸€ä¸ªå•ç‹¬çš„ç»„ä»¶ï¼Œåœ¨æ–‡ä»¶å†…å°è£…äº†ç»„ä»¶ç›¸å…³çš„ä»£ç ï¼šhtmlã€cssã€jsã€‚.vueç»„ä»¶æ–‡ä»¶ç”±ä¸‰éƒ¨åˆ†ç»„æˆ:æ¨¡ç‰ˆ&lt;template&gt;jsè„šæœ¬&lt;script&gt;æ ·å¼&lt;style&gt;123456789101112131415161718192021/** * ä¸€ã€åœ¨ES6ä¸­ï¼Œé€šè¿‡è§„èŒƒçš„å½¢å¼è§„å®šäº†å¦‚ä½•å¯¼å…¥å’Œå¯¼å‡ºæ¨¡å— * å¯¼å…¥æ¨¡å—ï¼š * 1.å¯¼å…¥å¤–éƒ¨çš„å˜é‡æˆ–å‡½æ•°ç­‰ï¼› * import "æ¨¡å—åç§°" from "æ¨¡å—æ ‡è¯†ç¬¦(è·¯å¾„)"; //å¯¹äºŽexport defaultå¯¼å‡ºæ—¶ä½¿ç”¨ * import &#123;key1, key2, key3&#125; from "æ¨¡å—æ ‡è¯†ç¬¦(è·¯å¾„)"; //å¯¹äºŽexportå¯¼å‡ºæ—¶ä½¿ç”¨ * 2.å¯¼å…¥å¤–éƒ¨çš„æ¨¡å—ï¼Œå¹¶ç«‹å³æ‰§è¡Œ * import "è·¯å¾„"; * * å¯¼å‡ºæ¨¡å—ï¼ˆæš´éœ²æˆå‘˜ï¼‰ï¼š * 1.export default * 2.export * *äºŒã€export defaultå’Œexport * 1. export default å‘å¤–æš´éœ²çš„æˆå‘˜ï¼Œå¯ä»¥ä½¿ç”¨ä»»æ„åç§°çš„å˜é‡æ¥æŽ¥æ”¶ * 2. åœ¨ä¸€ä¸ªæ¨¡å—(æ–‡ä»¶)ä¸­ï¼Œexport defaultåªå…è®¸å‘å¤–æš´éœ²1æ¬¡ * 3. åœ¨ä¸€ä¸ªæ¨¡å—(æ–‡ä»¶)ä¸­ï¼Œå¯ä»¥åŒæ—¶ä½¿ç”¨ä¸€ä¸ªexport defaultå’Œå¤šä¸ªexportå‘å¤–æš´éœ²æˆå‘˜ * 4. ä½¿ç”¨exportå‘å¤–æš´éœ²æˆå‘˜æ—¶ï¼Œåªèƒ½ä½¿ç”¨&#123;æš´éœ²çš„æˆå‘˜åç§°&#125;çš„å½¢å¼æŽ¥æ”¶ï¼Œå¤šä¸ªåˆ™ç”¨é€—å·éš”å¼€ï¼Œè€Œä¸éœ€è¦çš„æˆå‘˜åˆ™å¯ä»¥ä¸å†&#123;&#125;ä¸­å®šä¹‰ï¼Œè¿™ç§è¡Œä¸ºå«åšâ€œæŒ‰éœ€å¯¼å‡ºâ€ * 5. ä½¿ç”¨exportå¯¼å‡ºçš„æˆå‘˜ï¼Œå¦‚æžœéœ€è¦å¼•å…¥åˆ™å¿…é¡»ä¸¥æ ¼æŒ‰ç…§å¯¼å‡ºæ—¶å®šä¹‰çš„å˜é‡åç§°åœ¨&#123;&#125;ä¸­å®šä¹‰æŽ¥æ”¶ * 6. ä½¿ç”¨exportå¯¼å‡ºçš„æˆå‘˜ï¼Œå¦‚æžœéœ€è¦å¼•å…¥ï¼Œå¦‚æžœä¸å¸Œæœ›ä½¿ç”¨å¯¼å‡ºæ—¶å®šä¹‰çš„å˜é‡åç§°ï¼Œå¯ä»¥ä½¿ç”¨&#123;å¯¼å‡ºæ—¶å®šä¹‰çš„å˜é‡åç§° as åˆ«å&#125;çš„å½¢å¼ä¿®æ”¹ */App.css123*&#123; color: #8a2be2;&#125;App.js1alert("æ‰§è¡Œapp.js");App.vue1234567891011121314151617181920212223242526272829303132333435363738394041424344454647&lt;template&gt; &lt;!-- templateé‡Œæœ‰ä¸”ä»…æœ‰ä¸€ä¸ªå¹¶è¡Œæ ¹èŠ‚ç‚¹ï¼Œä½†æ˜¯æ ¹èŠ‚ç‚¹é‡Œå¯ä»¥æœ‰å¤šä¸ªå¹¶è¡ŒèŠ‚ç‚¹ --&gt; &lt;div id="app"&gt; &lt;!-- 3.åœ¨æ¨¡ç‰ˆä¸­ä½¿ç”¨å¼•å…¥çš„ç»„ä»¶ --&gt; &lt;v-home&gt;&lt;/v-home&gt; &lt;button @click="getHomeInfo"&gt;ç‚¹å‡»æŒ‰é’®&lt;/button&gt; &lt;/div&gt;&lt;/template&gt;&lt;script&gt;//å¯¼å…¥å¤–éƒ¨çš„å˜é‡æˆ–å‡½æ•°ç­‰import Home from "./components/Home";import &#123; num, title as myTitle, user &#125; from "./components/Home";//å¯¼å…¥å¤–éƒ¨çš„æ¨¡å—ï¼Œå¹¶ç«‹å³æ‰§è¡Œimport "./css/app.css";import "./js/app.js";export default &#123; name: "app", data() &#123; return &#123; appMsg: "This is App.vue !" &#125;; &#125;, methods: &#123; getHomeInfo: function() &#123; console.log("num:" + num); console.log("myTitle:" + myTitle); console.log("user:"); console.log(user); &#125; &#125;, components: &#123; /*æŒ‚è½½ç»„ä»¶ 1.key/valueå½¢å¼ï¼Œkeyæ˜¯å…ƒç´ æ ‡ç­¾çš„åç§° 2.valueå½¢å¼ï¼Œvalueçš„åç§°å°±æ˜¯å…ƒç´ æ ‡ç­¾çš„åç§° */ "v-home": Home //key/valueå½¢å¼ // Home //valueå½¢å¼ &#125;&#125;;&lt;/script&gt;&lt;style&gt;&lt;/style&gt;Home.vue123456789101112131415161718192021222324252627282930&lt;template&gt; &lt;div id="home"&gt; &lt;h3&gt;&#123;&#123;homeMsg&#125;&#125;&lt;/h3&gt; &lt;/div&gt;&lt;/template&gt;&lt;script&gt;//æš´éœ²ç»„ä»¶å¯¹è±¡export default &#123; data() &#123; return &#123; homeMsg: "this is Home.vue !" &#125;; &#125;&#125;;//æš´éœ²titleå˜é‡export var title = "Home Title";export var num = 100;//æš´éœ²userå¯¹è±¡export var user = &#123; username: "wangwu", age: 20&#125;;&lt;/script&gt;&lt;style scoped&gt;&lt;/style&gt;Â¶8. ç»„ä»¶çš„æ•°æ®äº¤äº’Â¶8.1.ç»„ä»¶é—´ä¼ å€¼Â¶8.1.1 çˆ¶ç»„ä»¶ä¼ å­ç»„ä»¶(1).åœ¨çˆ¶ç»„ä»¶è®¾ç½®propç»‘å®šåŠ¨æ€å±žæ€§æˆ–è€…é™æ€å±žæ€§ã€‚è®¾çˆ¶ç»„ä»¶çš„æ•°æ®ä¸º:1&lt;v-content home2content="é™æ€ä¼ çš„propæ•°æ®" v-bind:user="user" v-bind:homefuc="homefuc" v-bind:home="homeobj"/&gt;å…¶ä¸­home2contentæ˜¯é™æ€å­—ç¬¦ä¸²å±žæ€§ï¼Œuseræ˜¯åŠ¨æ€å¯¹è±¡å±žæ€§ï¼Œhomefucæ˜¯åŠ¨æ€æ–¹æ³•å±žæ€§ï¼Œhomeæ˜¯åŠ¨æ€å¯¹è±¡å±žæ€§(2) åœ¨å­ç»„ä»¶é€šè¿‡propsæ•°ç»„æˆ–è€…å¯¹è±¡å±žæ€§æŽ¥æ”¶çˆ¶ç»„ä»¶ä¼ è¿‡æ¥çš„æ•°æ®ã€‚propsæ•°ç»„ï¼š1props: ["user", "home2content","homefuc","home"]propså¯¹è±¡ï¼š123456789101112131415props: &#123; //åœ¨å­ç»„ä»¶é€šè¿‡propså¯¹è±¡å±žæ€§æŽ¥æ”¶çˆ¶ç»„ä»¶å¯ä»¥éªŒè¯ä¼ æ¥çš„æ•°æ® "user":Object, "home2content":&#123; type:String, //éªŒè¯æ•°æ®ç±»åž‹ required: true, //å¿…å¡«çš„å­—ç¬¦ä¸² default: 'xxxxx' å¸¦æœ‰é»˜è®¤å€¼ &#125;, // è‡ªå®šä¹‰éªŒè¯å‡½æ•° propF: &#123; validator: function (value) &#123; // è¿™ä¸ªå€¼å¿…é¡»åŒ¹é…ä¸‹åˆ—å­—ç¬¦ä¸²ä¸­çš„ä¸€ä¸ª return ['success', 'warning', 'danger'].indexOf(value) !== -1 &#125; &#125;&#125;(3) åœ¨å­ç»„ä»¶çš„&lt;template&gt;æˆ–è€…&lt;script&gt;ç›´æŽ¥å¼•ç”¨1234567891011 &lt;template&gt; &lt;div id="content"&gt; &#123;&#123;contentMsg&#125;&#125; &lt;div&gt; &lt;div&gt;åŠ¨æ€propï¼š &lt;/div&gt; user.username:&#123;&#123;user.username&#125;&#125;ã€ home.user.sex:&#123;&#123;home.user.sex&#125;&#125;&lt;/div&gt; &lt;div&gt;é™æ€propï¼š &#123;&#123;home2content&#125;&#125;&lt;/div&gt; &lt;button v-on:click="homefuc()"&gt;ç‚¹å‡»æŒ‰é’®&lt;/button&gt; &lt;/div&gt;&lt;/template&gt;Â¶8.1.2 å­ç»„ä»¶ä¼ çˆ¶ç»„ä»¶(1).åœ¨çˆ¶ç»„ä»¶ä¸­ï¼š(1.1)åœ¨çˆ¶ç»„ä»¶ä¸­å®šä¹‰æœ‰å‚å‡½æ•°123å‡½æ•°å: function(value) &#123; //valueå°±æ˜¯å­ç»„ä»¶ä¼ é€çš„å€¼&#125;(1.2)è®¾ç½®propç»‘å®šåŠ¨æ€æ–¹æ³•å±žæ€§ã€‚1&lt;v-content v-bind:å‡½æ•°å="å‡½æ•°å"/&gt;(2).åœ¨å­ç»„ä»¶ä¸­ï¼š(2.1)é€šè¿‡propsæ•°ç»„æˆ–è€…å¯¹è±¡å±žæ€§æŽ¥æ”¶çˆ¶ç»„ä»¶ä¼ è¿‡æ¥çš„æ•°æ®1props: ["å‡½æ•°å"](2.2)å­ç»„ä»¶è°ƒç”¨çˆ¶ç»„ä»¶æ–¹æ³•çš„åŒæ—¶ä¼ å…¥å­ç»„ä»¶çš„æ•°æ®åˆ°æ–¹æ³•çš„å®žå‚1å‡½æ•°å(å­ç»„ä»¶çš„æ•°æ®)Â¶8.1.3 éžçˆ¶å­ç»„ä»¶ä¼ å€¼(é€šè¿‡äº‹ä»¶å¹¿æ’­çš„æ–¹å¼å®žçŽ°)(1)é¦–å…ˆæ–°å»ºä¸€ä¸ªjsæ–‡ä»¶ï¼Œåœ¨æ–‡ä»¶ä¸­å®žä¾‹ä¸€ä¸ªVueå¯¹è±¡ï¼Œå¹¶æš´éœ²å‡ºæ¥ï¼Œå†…å®¹ä¸ºï¼š123import Vue from 'vue'var vueEvent = new Vue();export default vueEvent;(2) åœ¨å‘é€æ•°æ®çš„ç»„ä»¶ä¸­å¼•ç”¨ä»¥ä¸Šjsæ–‡ä»¶ï¼Œå¹¶å‘èµ·äº‹ä»¶å¹¿æ’­(2.1)å¼•ç”¨jsæ–‡ä»¶ï¼š1import vueEvent from 'jsæ–‡ä»¶è·¯å¾„'(2.2)å‘èµ·äº‹ä»¶å¹¿æ’­1vueEvent.$emit('å¹¿æ’­åç§°',æ•°æ®); //å‘é€å¹¿æ’­(3) åœ¨æŽ¥æ”¶æ–¹ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸå‡½æ•°(å¦‚mounted)ä¸­ç›‘å¬å¹¿æ’­äº‹ä»¶123vueEvent.$on('å¹¿æ’­åç§°',function(data)&#123; //ç›‘å¬å¹¿æ’­äº‹ä»¶ï¼Œfunction(data)ä¸­çš„dataå°±æ˜¯ç›‘å¬åˆ°çš„æ•°æ® //èŽ·å–dataå¹¶å¯ç”¨äºŽæ“ä½œ&#125;);Â¶8.2 ä¸»åŠ¨èŽ·å–æ•°æ®å°±æ˜¯ä¸éœ€è¦åœ¨ä¼ å…¥æ–¹é€šè¿‡ç»‘å®šå±žæ€§çš„æ–¹å¼ä¼ å€¼Â¶8.2.1çˆ¶ç»„ä»¶ä¸»åŠ¨èŽ·å–å­ç»„ä»¶æ•°æ®æ–¹å¼ï¼šï¼ˆ1ï¼‰åœ¨è°ƒç”¨å­ç»„ä»¶çš„æ—¶å€™å®šä¹‰refå±žæ€§12&lt;v-content ref="ä»»æ„å˜é‡å"/&gt;å¦‚ï¼š&lt;v-content ref="content"/&gt;ï¼ˆ2ï¼‰åœ¨çˆ¶ç»„ä»¶é€šè¿‡ä»¥ä¸‹æ–¹å¼èŽ·å–å­ç»„ä»¶çš„å€¼12this.$refs.content.å­ç»„ä»¶å±žæ€§this.$refs.content.å­ç»„ä»¶æ–¹æ³•Â¶8.2.2å­ç»„ä»¶ä¸»åŠ¨èŽ·å–çˆ¶ç»„ä»¶æ•°æ®æ–¹å¼ï¼šåœ¨å­ç»„ä»¶ä¸­é€šè¿‡ä»¥ä¸‹æ–¹å¼èŽ·å–çˆ¶ç»„ä»¶çš„æ•°æ®ï¼ˆä¸éœ€è¦å®šä¹‰refå±žæ€§ï¼‰12this.$parent.çˆ¶ç»„ä»¶å±žæ€§this.$parent.çˆ¶ç»„ä»¶æ–¹æ³•Â¶8.3 vuexå¦‚æžœå¤šä¸ªç»„ä»¶ä¾èµ–äºŽåŒä¸€çŠ¶æ€ã€‚ä¼ å‚çš„æ–¹æ³•å¯¹äºŽå¤šå±‚åµŒå¥—çš„ç»„ä»¶å’Œå…„å¼Ÿç»„ä»¶ä¼šéžå¸¸ç¹çã€‚è¿™æ—¶æœ‰å¿…è¦å­¦ä¹ vuexï¼Œæ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚å®˜ç½‘ï¼šhttps://vuex.vuejs.org/zh/Vuexæ˜¯ä¸€ä¸ªä¸“ä¸ºVue.js åº”ç”¨ç¨‹åºå¼€å‘çš„çŠ¶æ€ç®¡ç†æ¨¡å¼ã€‚ä¸»è¦ä½œç”¨æ˜¯ï¼šè§£å†³ä¸åŒç»„ä»¶é—´åŒä¸€çŠ¶æ€ï¼ˆæ•°æ®ï¼‰å…±äº«é—®é¢˜ã€‚ç»„ä»¶çš„æ•°æ®æŒä¹…åŒ–Â¶8.3.1 å®‰è£…vuex1$ npm install vuex --saveÂ¶8.3.2 å¼•å…¥å’Œæ³¨å†Œvuexåœ¨main.jsä¸­å¼•å…¥ vuex12345import Vue from 'vue'//å¼•å…¥Vuexå¹¶æ³¨å†Œåˆ°Vueä¸­import Vuex from 'vuex'Vue.use(Vuex)Â¶8.3.3 åˆ›å»ºå’Œä½¿ç”¨æ•°æ®ä»“åº“è¯¥æ–‡ä»¶çš„ä¸»è¦åŠŸèƒ½å°±æ˜¯æä¾›ç»™å„ä¸ªç»„ä»¶ä¸€ä¸ªæ•°æ®äº¤äº’ä¸­å¿ƒ(æ•°æ®ä»“åº“)ï¼Œæ•°æ®ä»“åº“é‡Œä¸»è¦åŒ…å«æ•°æ®é¡¹å’Œæ“ä½œæ•°æ®çš„æ–¹æ³•ã€‚åŽŸç†æ˜¯æ³¨å†Œstoreåˆ°Vueä¸­ï¼Œå„ä¸ªç»„ä»¶é€šè¿‡å¼•å…¥æ•°æ®ä»“åº“æ–‡ä»¶åŽï¼Œå°±å¯é€šè¿‡ this.$store è®¿é—®åˆ°storeä¸­çš„æ•°æ®å’Œæ–¹æ³•äº†ã€‚ä¾‹å¦‚ï¼šï¼ˆ1ï¼‰stateå’Œmutationsçš„ä½¿ç”¨æ•°æ®ä»“åº“æ–‡ä»¶store.js1234567891011121314151617181920212223/*1.å¯¼å…¥å¹¶æ³¨å†ŒVuexåˆ°Vueä¸­*/import Vue from 'vue'import Vuex from 'vuex'Vue.use(Vuex);/*2.ä½¿ç”¨ vuex å®žä¾‹åŒ– Vuex.store*/const store = new Vuex.Store(&#123; /*3.stateåœ¨vuexä¸­ç”¨äºŽå­˜å‚¨æ•°æ®*/ state: &#123; count: 1 &#125;, /*4.mutationsé‡Œé¢æ”¾çš„æ˜¯æ–¹æ³•ï¼Œæ–¹æ³•ä¸»è¦ç”¨äºŽæ“ä½œstateé‡Œé¢çš„æ•°æ®*/ mutations: &#123; incCount() &#123; ++this.state.count; &#125; &#125;&#125;)/**5.å¯¼å‡ºï¼ˆæš´éœ²ï¼‰å‡ºæ•°æ®ä»“åº“ */export default store;ç»„ä»¶1ï¼šAbout.vue123456789101112131415161718192021222324252627282930&lt;template&gt; &lt;div id="about"&gt; aboutç»„ä»¶ï¼š &lt;button @click="toIncCount()"&gt;å¢žåŠ æ•°é‡&lt;/button&gt; &lt;!--2.é€šè¿‡ this.$store è®¿é—®åˆ°storeä¸­çš„æ•°æ® --&gt; å½“å‰storeçš„æ•°æ®:&#123;&#123;this.$store.state.count&#125;&#125; &lt;/div&gt;&lt;/template&gt;&lt;script&gt;//1.å¼•å…¥storeimport store from "../vuex/store.js";export default &#123; store: store, methods: &#123; toIncCount() &#123; /*3.é€šè¿‡ this.$store è®¿é—®åˆ°storeä¸­çš„æ–¹æ³•,æ›´æ”¹ Vuex çš„ store ä¸­çš„çŠ¶æ€çš„å”¯ä¸€æ–¹æ³•æ˜¯æäº¤ mutation */ this.$store.commit("incCount"); &#125; &#125;&#125;;&lt;/script&gt;&lt;style scoped&gt;div &#123; border: solid 2px red; margin: 20px;&#125;&lt;/style&gt;ç»„ä»¶2: Home.vue1234567891011121314151617181920212223242526272829303132&lt;template&gt; &lt;div id="home"&gt; homeç»„ä»¶ï¼š &lt;button @click="toIncCount()"&gt;å¢žåŠ æ•°é‡&lt;/button&gt; &lt;!--2.é€šè¿‡ this.$store è®¿é—®åˆ°storeä¸­çš„æ•°æ® --&gt; å½“å‰storeçš„æ•°æ®:&#123;&#123;this.$store.state.count&#125;&#125; &lt;/div&gt;&lt;/template&gt;&lt;script&gt;//1. å¼•å…¥storeimport store from "../vuex/store.js";export default &#123; data() &#123; return &#123;&#125;; &#125;, store: store, methods: &#123; toIncCount() &#123; /*3.é€šè¿‡ this.$store è®¿é—®åˆ°storeä¸­çš„æ–¹æ³•,æ›´æ”¹ Vuex çš„ store ä¸­çš„çŠ¶æ€çš„å”¯ä¸€æ–¹æ³•æ˜¯æäº¤ mutation */ this.$store.commit("incCount"); &#125; &#125;&#125;;&lt;/script&gt;&lt;style scoped&gt;div &#123; border: solid 2px #42109e; margin: 20px;&#125;&lt;/style&gt;æ•ˆæžœï¼šï¼ˆ2ï¼‰getterså’Œactionsçš„ä½¿ç”¨æ•°æ®ä»“åº“æ–‡ä»¶store.js1234567891011121314151617181920212223242526272829303132333435363738/*1.å¯¼å…¥å¹¶æ³¨å†ŒVuexåˆ°Vueä¸­*/import Vue from 'vue'import Vuex from 'vuex'Vue.use(Vuex);/*2.ä½¿ç”¨ vuex å®žä¾‹åŒ– Vuex.store*/const store = new Vuex.Store(&#123; /*3.stateåœ¨vuexä¸­ç”¨äºŽå­˜å‚¨æ•°æ®*/ state: &#123; count: 1 &#125;, /*4.mutationsé‡Œé¢æ”¾çš„æ˜¯æ–¹æ³•ï¼Œï¼ˆ1ï¼‰æ–¹æ³•ä¸»è¦ç”¨äºŽæ“ä½œstateé‡Œé¢çš„æ•°æ®ï¼›ï¼ˆ2ï¼‰mutation å¿…é¡»æ˜¯åŒæ­¥å‡½æ•°ã€‚(é‡ç‚¹)*/ mutations: &#123; //è‡ªå®šä¹‰mutationsæ–¹æ³• incCount() &#123; ++this.state.count; &#125; &#125;, /*5.ç±»ä¼¼è®¡ç®—å±žæ€§,æ”¹å˜stateé‡Œé¢çš„countæ•°æ®çš„æ—¶å€™ä¼šè§¦å‘ gettersé‡Œé¢çš„æ–¹æ³• èŽ·å–æ–°çš„å€¼ (åŸºæœ¬ç”¨ä¸åˆ°) */ getters: &#123; //è‡ªå®šä¹‰gettersæ–¹æ³• computedCount: (state) =&gt; &#123; return state.count * 2 &#125; &#125;, /*6.ç±»ä¼¼äºŽ mutation,ä¸åŒåœ¨äºŽï¼š(1)Action æäº¤çš„æ˜¯ mutationï¼Œè€Œä¸ç›´æŽ¥å˜æ›´æ•°æ®çš„çŠ¶æ€ã€‚(2)Action å¯ä»¥åŒ…å«ä»»æ„å¼‚æ­¥æ“ä½œã€‚(åŸºæœ¬ç”¨ä¸åˆ°) */ actions: &#123; //è‡ªå®šä¹‰actionsæ–¹æ³• incMutationsCount(context) &#123; context.commit('incCount'); /*æ‰§è¡Œ mutations é‡Œé¢çš„incCountæ–¹æ³• æ”¹å˜stateé‡Œé¢çš„æ•°æ®*/ &#125; &#125;&#125;)/*7.å¯¼å‡ºï¼ˆæš´éœ²ï¼‰å‡ºæ•°æ®ä»“åº“ */export default store;ç»„ä»¶1 Home.vueï¼š123456789101112131415161718192021222324252627282930313233343536&lt;template&gt; &lt;div id="home"&gt; homeç»„ä»¶ï¼š &lt;button @click="toIncCount()"&gt;å¢žåŠ æ•°é‡&lt;/button&gt; &lt;button @click="toAction()"&gt;è§¦å‘actionsçš„æ–¹æ³•&lt;/button&gt; å½“å‰storeçš„æ•°æ®:&#123;&#123;this.$store.state.count&#125;&#125; å½“å‰store gettersçš„è®¡ç®—å±žæ€§:&#123;&#123;this.$store.getters.computedCount&#125;&#125; &lt;!-- 2.è§¦å‘äº†gettersçš„computedCount()æ–¹æ³• --&gt; &lt;/div&gt;&lt;/template&gt;&lt;script&gt;//1. å¼•å…¥storeimport store from "../vuex/store.js";export default &#123; data() &#123; return &#123;&#125;; &#125;, store: store, methods: &#123; toIncCount() &#123; this.$store.commit("incCount"); &#125;, toAction()&#123; this.$store.dispatch('incMutationsCount'); /*3.è§¦å‘ actionsé‡Œé¢çš„æ–¹æ³• */ &#125; &#125;&#125;;&lt;/script&gt;&lt;style scoped&gt;div &#123; border: solid 2px #42109e; margin: 20px;&#125;&lt;/style&gt;ç»„ä»¶2 About.vueï¼š123456789101112131415161718192021222324252627&lt;template&gt; &lt;div id="about"&gt; aboutç»„ä»¶ï¼š &lt;button @click="toIncCount()"&gt;å¢žåŠ æ•°é‡&lt;/button&gt; å½“å‰storeçš„æ•°æ®:&#123;&#123;this.$store.state.count&#125;&#125; &lt;/div&gt;&lt;/template&gt;&lt;script&gt;import store from "../vuex/store.js";export default &#123; store: store, methods: &#123; toIncCount() &#123; this.$store.commit("incCount"); &#125; &#125;&#125;;&lt;/script&gt;&lt;style scoped&gt;div &#123; border: solid 2px red; margin: 20px;&#125;&lt;/style&gt;æ•ˆæžœï¼šÂ¶9. è·¯ç”±å®˜ç½‘æ•™ç¨‹https://router.vuejs.org/zh/æŽ§åˆ¶ç»„ä»¶ä¹‹é—´çš„è·³è½¬ï¼Œä¸ä¼šè¯·æ±‚é¡µé¢ã€ä¸ç”¨é¡µé¢åˆ·æ–°ï¼Œç›´æŽ¥è·³è½¬-åˆ‡æ¢ç»„ä»¶å®‰è£…ï¼š1$ cnpm install vue-router --saveÂ¶9.1 æ™®é€šè·¯ç”±Home.vue1234567891011121314151617181920&lt;template&gt; &lt;div id="home"&gt; &lt;h3&gt;&#123;&#123;homeMsg&#125;&#125;&lt;/h3&gt; &lt;/div&gt;&lt;/template&gt;&lt;script&gt;//æš´éœ²ç»„ä»¶å¯¹è±¡export default &#123; data() &#123; return &#123; homeMsg: "Welcome to Home !" &#125;; &#125;&#125;;&lt;/script&gt;&lt;style scoped&gt;&lt;/style&gt;About.vue1234567891011121314151617181920&lt;template&gt; &lt;div id="about"&gt; &lt;h2&gt;&#123;&#123;aboutMe&#125;&#125;&lt;/h2&gt; &lt;/div&gt;&lt;/template&gt;&lt;script&gt;//æš´éœ²ç»„ä»¶å¯¹è±¡export default &#123; data() &#123; return &#123; aboutMe:'I am Qcmoke !' &#125; &#125;&#125;&lt;/script&gt;&lt;style&gt;&lt;/style&gt;main.js123456789101112131415161718192021222324252627282930import Vue from 'vue'import VueRouter from 'vue-router' // 1. å¯¼å…¥ vue-router åŒ…,å®‰è£…æ–¹æ³•ï¼šcnpm install vue-router --save// 2. æ‰‹åŠ¨å®‰è£… VueRouter Vue.use(VueRouter)// 3.å¯¼å…¥ç»„ä»¶import App from './App.vue'import Home from './components/Home'import About from './components/About'// 4. åˆ›å»ºè·¯ç”±å¯¹è±¡(å…¨å±€)var router = new VueRouter(&#123; routes: [ //å°†ç»„ä»¶æ˜ å°„åˆ°è·¯ç”± //path æŒ‡è¯·æ±‚è·¯å¾„ï¼ŒcomponentæŒ‡çš„æ˜¯ç»„ä»¶ &#123; path: '/home', component: Home &#125;, &#123; path: '/about', component: About &#125;, &#123; path: '/*', component: Home &#125; //é»˜è®¤è¿›å…¥å±•ç¤ºHome ]&#125;)new Vue(&#123; el: '#app', render: h =&gt; h(App), router // 5. å°†è·¯ç”±å¯¹è±¡æŒ‚è½½åˆ° vm ä¸Šï¼Œ(ç¼©å†™) ç›¸å½“äºŽ routes: routes&#125;)App.vue1234567891011121314151617181920212223242526272829303132&lt;template&gt; &lt;div id="app"&gt; &lt;!-- 6.æ¸²æŸ“è·¯ç”± --&gt; &lt;!-- è·¯ç”±å…¥å£ --&gt; &lt;!-- ä½¿ç”¨ router-link ç»„ä»¶æ¥å¯¼èˆªï¼Œ&lt;router-link&gt; é»˜è®¤ä¼šè¢«æ¸²æŸ“æˆä¸€ä¸ª `&lt;a&gt;` æ ‡ç­¾ --&gt; &lt;!-- é€šè¿‡ä¼ å…¥ `to` å±žæ€§æŒ‡å®šé“¾æŽ¥. --&gt; &lt;router-link to="/home"&gt;Home&lt;/router-link&gt; &lt;router-link to="/about"&gt;About&lt;/router-link&gt; &lt;!-- è·¯ç”±å‡ºå£ --&gt; &lt;!-- è·¯ç”±åŒ¹é…åˆ°çš„ç»„ä»¶å°†æ¸²æŸ“åœ¨è¿™é‡Œ --&gt; &lt;router-view&gt;&lt;/router-view&gt; &lt;/div&gt;&lt;/template&gt;&lt;script&gt;export default &#123; name: "app", data() &#123; return &#123; msg: "Welcome to Your Vue.js App" &#125;; &#125;&#125;;&lt;/script&gt;&lt;style&gt;&lt;/style&gt;Â¶9.2 å¸¦æœ‰åµŒå¥—å…³ç³»çš„è·¯ç”±Home.vue1234567891011121314151617181920&lt;template&gt; &lt;div id="home"&gt; &lt;h3&gt;&#123;&#123;homeMsg&#125;&#125;&lt;/h3&gt; &lt;/div&gt;&lt;/template&gt;&lt;script&gt;//æš´éœ²ç»„ä»¶å¯¹è±¡export default &#123; data() &#123; return &#123; homeMsg: "Welcome to Home !" &#125;; &#125;&#125;;&lt;/script&gt;&lt;style scoped&gt;&lt;/style&gt;About.vue1234567891011121314151617181920&lt;template&gt; &lt;div id="about"&gt; &lt;h2&gt;&#123;&#123;aboutMe&#125;&#125;&lt;/h2&gt; &lt;/div&gt;&lt;/template&gt;&lt;script&gt;//æš´éœ²ç»„ä»¶å¯¹è±¡export default &#123; data() &#123; return &#123; aboutMe:'I am Qcmoke !' &#125; &#125;&#125;&lt;/script&gt;&lt;style&gt;&lt;/style&gt;Login.vue123456789101112&lt;template&gt; &lt;div id="login"&gt; &lt;div&gt;to login&lt;/div&gt; &lt;/div&gt;&lt;/template&gt;&lt;script&gt;export default &#123;&#125;;&lt;/script&gt;&lt;style&gt;&lt;/style&gt;Register.vue1234567891011&lt;template&gt; &lt;div id="register"&gt; &lt;div&gt;to register&lt;/div&gt; &lt;/div&gt;&lt;/template&gt;&lt;script&gt;export default &#123;&#125;;&lt;/script&gt;&lt;style&gt;&lt;/style&gt;routes.js123456789101112131415161718192021222324252627282930import VueRouter from 'vue-router' // 1. å¯¼å…¥ vue-router åŒ…,å®‰è£…æ–¹æ³•ï¼šcnpm install vue-router --save// 2.å¯¼å…¥ç»„ä»¶import Home from './components/Home'import About from './components/About'import Account from './components/Account'import Login from './components/Login'import Register from './components/Register'// 3. åˆ›å»ºå«æœ‰åµŒå¥—å…³ç³»çš„è·¯ç”±å¯¹è±¡(å…¨å±€)var router = new VueRouter(&#123; routes: [ //å°†ç»„ä»¶æ˜ å°„åˆ°è·¯ç”± //path æŒ‡è¯·æ±‚è·¯å¾„ï¼ŒcomponentæŒ‡çš„æ˜¯ç»„ä»¶ &#123; path: '/account', component: Account, children: [ &#123; path: 'login', component: Login &#125;, &#123; path: 'register', component: Register &#125; ] &#125;, &#123; path: '/home', component: Home &#125;, &#123; path: '/about', component: About &#125;, &#123; path: '/*', component: Home &#125; //é»˜è®¤è¿›å…¥å±•ç¤ºHome ]&#125;)export default router;main.js12345678910111213141516171819import Vue from 'vue'import VueRouter from 'vue-router'// 4. æ‰‹åŠ¨å®‰è£… VueRouter Vue.use(VueRouter)import App from './App.vue'import router from './routes.js'new Vue(&#123; el: '#app', render: h =&gt; h(App), router // 5. å°†è·¯ç”±å¯¹è±¡æŒ‚è½½åˆ° vm ä¸Šï¼Œ(ç¼©å†™) ç›¸å½“äºŽ routes: routes&#125;)App.vue123456789101112131415161718192021222324252627282930313233&lt;template&gt; &lt;div id="app"&gt; &lt;!-- 6.æ¸²æŸ“è·¯ç”± --&gt; &lt;!-- è·¯ç”±å…¥å£ --&gt; &lt;!-- ä½¿ç”¨ router-link ç»„ä»¶æ¥å¯¼èˆªï¼Œ&lt;router-link&gt; é»˜è®¤ä¼šè¢«æ¸²æŸ“æˆä¸€ä¸ª `&lt;a&gt;` æ ‡ç­¾ --&gt; &lt;!-- é€šè¿‡ä¼ å…¥ `to` å±žæ€§æŒ‡å®šé“¾æŽ¥. --&gt; &lt;router-link to="/home"&gt;Home&lt;/router-link&gt; &lt;router-link to="/about"&gt;About&lt;/router-link&gt; &lt;router-link to="/account"&gt;Account&lt;/router-link&gt; &lt;!-- è·¯ç”±å‡ºå£ --&gt; &lt;!-- è·¯ç”±åŒ¹é…åˆ°çš„ç»„ä»¶å°†æ¸²æŸ“åœ¨è¿™é‡Œ --&gt; &lt;router-view&gt;&lt;/router-view&gt; &lt;/div&gt;&lt;/template&gt;&lt;script&gt;export default &#123; name: "app", data() &#123; return &#123; msg: "Welcome to Your Vue.js App" &#125;; &#125;&#125;;&lt;/script&gt;&lt;style&gt;&lt;/style&gt;Account.vue123456789101112131415&lt;template&gt; &lt;div id="account"&gt; &lt;router-link to="/account/login"&gt;Login&lt;/router-link&gt; &lt;router-link to="/account/register"&gt;Register&lt;/router-link&gt; &lt;router-view&gt;&lt;/router-view&gt; &lt;/div&gt;&lt;/template&gt;&lt;script&gt;export default &#123;&#125;;&lt;/script&gt;&lt;style scoped&gt;&lt;/style&gt;Â¶10. axiosÂ¶10.1 ç®€ä»‹Axios æ˜¯ä¸€ä¸ªåŸºäºŽ promise çš„ HTTP åº“ï¼Œå¯ä»¥ç”¨åœ¨æµè§ˆå™¨å’Œ node.js ä¸­ã€‚ä»Žæµè§ˆå™¨ä¸­åˆ›å»º XMLHttpRequestsä»Ž node.js åˆ›å»º http è¯·æ±‚æ”¯æŒ Promise APIæ‹¦æˆªè¯·æ±‚å’Œå“åº”è½¬æ¢è¯·æ±‚æ•°æ®å’Œå“åº”æ•°æ®å–æ¶ˆè¯·æ±‚è‡ªåŠ¨è½¬æ¢ JSON æ•°æ®å®¢æˆ·ç«¯æ”¯æŒé˜²å¾¡ XSRFÂ¶10.2 å®‰è£…1$ npm install --save axiosÂ¶10.3 ä½¿ç”¨å¯¼å…¥åŒ…1import Axios from "axios";è¯·æ±‚ï¼š1234567Axios.get("api_url") .then(response =&gt; &#123; //è¯·æ±‚æˆåŠŸæ—¶å›žè°ƒ //è¯·æ±‚æˆåŠŸæ—¶åšçš„å¤„ç† &#125;) .catch(function(error) &#123;//è¯·æ±‚å¤±è´¥æ—¶å›žè°ƒ //è¯·æ±‚å¤±è´¥æ—¶åšçš„å¤„ç† &#125;);ç®€å•æ¡ˆä¾‹AxiosDemo.vue12345678910111213141516171819202122232425262728293031323334353637&lt;template&gt; &lt;div id="axiosdemo"&gt; &lt;button @click="show"&gt;ç‚¹æˆ‘AxiosDemo&lt;/button&gt; &lt;div class="show" v-show="showText"&gt;&#123;&#123;content&#125;&#125;&lt;/div&gt; &lt;/div&gt;&lt;/template&gt;&lt;script&gt;import Axios from "axios"; //npm install --save axiosexport default &#123; name: "axiosDemo", data() &#123; return &#123; content: "", showText: false &#125;; &#125;, mounted() &#123; Axios.get("https://api.coindesk.com/v1/bpi/currentprice.json") .then(response =&gt; &#123; this.content = response.data.bpi; console.log("ok"); &#125;) .catch(function(error) &#123; console.log(error); &#125;); &#125;, methods: &#123; show() &#123; this.showText = !this.showText; &#125; &#125;&#125;;&lt;/script&gt;&lt;style scoped&gt;&lt;/style&gt;Â¶10.4 vue-axiosvue-axiosæ˜¯ç”¨äºŽå°†axiosé›†æˆåˆ°Vuejsçš„å°åŒ…è£…å™¨,ä½œç”¨æ˜¯æ‰©å±•Vueå¯¹è±¡çš„åŠŸèƒ½ï¼Œå³è®©Vueå¯¹è±¡å…·æœ‰axiosåŠŸèƒ½ï¼Œç›¸å¯¹åŽŸç”Ÿä½¿ç”¨vue-axiosä¼šå¸¦æ¥æ›´å¤šçš„ä¾¿åˆ©ã€‚å®‰è£…ï¼š1$ npm install --save vue-axiosä½¿ç”¨ï¼šå¯¼å…¥vueã€axiosã€vue-axiosä¸‰ä¸ªåŒ…123import Axios from "axios";import VueAxios from "vue-axios";import Vue from "vue";å®‰è£…VueAxioså’ŒAxiosåˆ°Vueä¸­1Vue.use(VueAxios, Axios);è¯·æ±‚ä½¿ç”¨1234567891011Vue.axios.get(api).then((response) =&gt; &#123; console.log(response.data)&#125;) this.axios.get(api).then((response) =&gt; &#123; console.log(response.data)&#125;) this.$http.get(api).then((response) =&gt; &#123; console.log(response.data)&#125;)æ¡ˆä¾‹ï¼šVueAxiosDemo.vue123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869&lt;template&gt; &lt;div id="vueaxios"&gt; &lt;button @click="getDateForVueaxios1()"&gt;ç‚¹å‡»æˆ‘vueaxios1&lt;/button&gt; &lt;button @click="getDateForVueaxios2()"&gt;ç‚¹å‡»æˆ‘vueaxios2&lt;/button&gt; &lt;button @click="getDateForVueaxios3()"&gt;ç‚¹å‡»æˆ‘vueaxios3&lt;/button&gt; &lt;button @click="getDateForVueaxios4()"&gt;ç‚¹å‡»æˆ‘vueaxios4&lt;/button&gt; &lt;div id="view"&gt;&#123;&#123;content&#125;&#125;&lt;/div&gt; &lt;/div&gt;&lt;/template&gt;&lt;script&gt;/* https://www.npmjs.com/package/vue-axios npm install --save axios vue-axios*/import Axios from "axios";import VueAxios from "vue-axios";//vue-axiosæ˜¯ç”¨äºŽå°†axiosé›†æˆåˆ°Vuejsçš„å°åŒ…è£…å™¨,ä½œç”¨æ˜¯æ‰©å±•Vueå¯¹è±¡çš„åŠŸèƒ½ï¼Œå³è®©Vueå¯¹è±¡å…·æœ‰axiosåŠŸèƒ½import Vue from "vue";//å®‰è£…VueAxioså’ŒAxiosåˆ°Vueä¸­Vue.use(VueAxios, Axios);export default &#123; data() &#123; return &#123; content: "" &#125;; &#125;, methods: &#123; getDateForVueaxios1() &#123; var api = "https://api.coindesk.com/v1/bpi/currentprice.json"; Axios.get(api) //ä½¿ç”¨åŽŸç”ŸAxios .then(response =&gt; &#123; this.content = response.data; console.log("response.data"); &#125;) .catch(function(error) &#123; console.log(error); &#125;); &#125;, getDateForVueaxios2() &#123; var api = "https://api.coindesk.com/v1/bpi/currentprice.json"; Vue.axios.get(api).then(response =&gt; &#123; this.content = response.data; console.log("response.data"); &#125;); &#125;, getDateForVueaxios3() &#123; var api = "https://api.coindesk.com/v1/bpi/currentprice.json"; this.axios.get(api).then(response =&gt; &#123; this.content = response.data; console.log("response.data"); &#125;); &#125;, getDateForVueaxios4() &#123; var api = "https://api.coindesk.com/v1/bpi/currentprice.json"; this.$http.get(api).then(response =&gt; &#123; this.content = response.data; console.log("response.data"); &#125;); &#125; &#125;&#125;;&lt;/script&gt;&lt;style&gt;&lt;/style&gt;Â¶11. element-uiå®˜ç½‘ï¼šhttps://element.eleme.io/#/zh-CNÂ¶11.1 å®‰è£…element-ui1$ npm i element-ui -SÂ¶11.2 å¼•å…¥element-uiå’Œelementçš„css12import ElementUI from 'element-ui' //å®Œæ•´å¼•å…¥æ‰€æœ‰çš„element-uiimport 'element-ui/lib/theme-chalk/index.css'Â¶11.3 Vueå®‰è£…element-ui1Vue.use(ElementUI)Â¶11.4 é…ç½®webpackçš„loaderè§„åˆ™element-uiçš„cssæ–‡ä»¶ä¸­ä¼šä½¿ç”¨åˆ°ttfæ–‡ä»¶ï¼Œæ‰€ä»¥éœ€è¦åˆ°webpack.config.jsä¸­é…ç½®ä»¥ä¸‹loaderè§„åˆ™1234&#123; test: /\.(eot|svg|ttf|woff|woff2)(\?\S*)?$/, loader: 'file-loader'&#125;Â¶11.5 ä½¿ç”¨ä¾‹å¦‚ä½¿ç”¨element-uiçš„æ ‡ç­¾ï¼Œå¯ä»¥åœ¨App.vueçš„templateä¸­åŠ å…¥1&lt;el-tag&gt;element-uiæ ‡ç­¾&lt;/el-tag&gt;ä»¥ä¸Šå…³ç³»åˆ°çš„æ–‡ä»¶å¤§æ¦‚å¦‚ä¸‹ï¼šmain.js123456789101112131415import Vue from 'vue'//å¼•å…¥element-uiå’Œelementçš„cssimport ElementUI from 'element-ui'import 'element-ui/lib/theme-chalk/index.css'//Vueå®‰è£…element-uiVue.use(ElementUI)import App from './App.vue'new Vue(&#123; el: '#app', render: h =&gt; h(App)&#125;)webpack.config.js12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576777879808182var path = require('path')var webpack = require('webpack')module.exports = &#123; entry: './src/main.js', output: &#123; path: path.resolve(__dirname, './dist'), publicPath: '/dist/', filename: 'build.js' &#125;, module: &#123; rules: [ &#123; test: /\.css$/, use: [ 'vue-style-loader', 'css-loader' ], &#125;, &#123; test: /\.vue$/, loader: 'vue-loader', options: &#123; loaders: &#123; &#125; // other vue-loader options go here &#125; &#125;, &#123; test: /\.js$/, loader: 'babel-loader', exclude: /node_modules/ &#125;, &#123; test: /\.(png|jpg|gif|svg)$/, loader: 'file-loader', options: &#123; name: '[name].[ext]?[hash]' &#125; &#125;, &#123; test: /\.(eot|svg|ttf|woff|woff2)(\?\S*)?$/, // element-uiçš„cssæ–‡ä»¶ä¸­ä¼šä½¿ç”¨åˆ°ttfæ–‡ä»¶ï¼Œæ‰€ä»¥éœ€è¦åˆ°webpack.config.jsä¸­é…ç½®ä»¥ä¸‹loaderè§„åˆ™ loader: 'file-loader' &#125; ] &#125;, resolve: &#123; alias: &#123; 'vue$': 'vue/dist/vue.esm.js' &#125;, extensions: ['*', '.js', '.vue', '.json'] &#125;, devServer: &#123; historyApiFallback: true, noInfo: true, overlay: true &#125;, performance: &#123; hints: false &#125;, devtool: '#eval-source-map'&#125;if (process.env.NODE_ENV === 'production') &#123; module.exports.devtool = '#source-map' // http://vue-loader.vuejs.org/en/workflow/production.html module.exports.plugins = (module.exports.plugins || []).concat([ new webpack.DefinePlugin(&#123; 'process.env': &#123; NODE_ENV: '"production"' &#125; &#125;), new webpack.optimize.UglifyJsPlugin(&#123; sourceMap: true, compress: &#123; warnings: false &#125; &#125;), new webpack.LoaderOptionsPlugin(&#123; minimize: true &#125;) ])&#125;App.vue123456789101112131415161718&lt;template&gt; &lt;div id="app"&gt; &lt;!-- å¼•ç”¨element-uiæ ‡ç­¾ --&gt; &lt;el-tag&gt;element-uiæ ‡ç­¾&lt;/el-tag&gt; &lt;/div&gt;&lt;/template&gt;&lt;script&gt;export default &#123; name: "app", data() &#123; return &#123;&#125;; &#125;&#125;;&lt;/script&gt;&lt;style&gt;&lt;/style&gt;æ•ˆæžœå¦‚ä¸‹å›¾ï¼šÂ¶11.6 æŒ‰éœ€å¼•å…¥ï¼ˆ1ï¼‰å®‰è£…element-ui1$ npm i element-ui -Sï¼ˆ2ï¼‰é™¤äº†å®‰è£…element-uiè¿˜éœ€è¦å®‰è£… babel-plugin-component1$ npm install babel-plugin-component -Dï¼ˆ3ï¼‰ é…ç½®webpackçš„loaderè§„åˆ™element-uiçš„cssæ–‡ä»¶ä¸­ä¼šä½¿ç”¨åˆ°ttfæ–‡ä»¶ï¼Œæ‰€ä»¥éœ€è¦åˆ°webpack.config.jsä¸­é…ç½®ä»¥ä¸‹loaderè§„åˆ™1234&#123; test: /\.(eot|svg|ttf|woff|woff2)(\?\S*)?$/, loader: 'file-loader'&#125;ï¼ˆ4ï¼‰ä¿®æ”¹.babelrcé…ç½®æ–‡ä»¶å°†åŽŸæ¥çš„123456&#123; "presets": [ ["env", &#123; "modules": false &#125;], "stage-3" ]&#125;æ”¹ä¸ºä»¥ä¸‹ï¼š123456789101112&#123; "presets": [["env", &#123; "modules": false &#125;]], "plugins": [ [ "component", &#123; "libraryName": "element-ui", "styleLibraryName": "theme-chalk" &#125; ] ]&#125;ï¼ˆ5ï¼‰ç®€å•ä½¿ç”¨å¦‚æžœåªéœ€è¦ç”¨åˆ°æŒ‰é’®å’Œæ ‡ç­¾ï¼Œé‚£ä¹ˆå¯ä»¥é€šè¿‡ä»¥ä¸‹å®žçŽ°æŒ‰éœ€å¼•å…¥1234import Vue from 'vue'import &#123; Button, Tag &#125; from 'element-ui';Vue.use(Button) // æˆ–å†™ä¸ºVue.component(Button.name, Button);Vue.use(Tag) //æˆ–å†™ä¸ºVue.component(Tag.name, Tag);æ³¨ï¼šæŒ‰éœ€å¼•å…¥element-uiæ—¶,element-uiçš„æ ·å¼æ–‡ä»¶å¯ä»¥ä¸ç”¨å¼•å…¥å®Œæ•´æ–‡ä»¶å¦‚ä¸‹ï¼šApp.vue123456789101112131415161718192021222324252627282930313233&lt;template&gt; &lt;div id="app"&gt; &lt;!-- å¼•ç”¨element-uiæ ‡ç­¾ --&gt; &lt;el-tag&gt;element-uiæ ‡ç­¾&lt;/el-tag&gt; &lt;el-button type="primary"&gt;æŒ‰é’®&lt;/el-button&gt; &lt;/div&gt;&lt;/template&gt;&lt;script&gt;import Vue from 'vue'//import 'element-ui/lib/theme-chalk/index.css' //æŒ‰éœ€å¼•å…¥element-uiæ—¶,element-uiçš„æ ·å¼æ–‡ä»¶å¯ä»¥ä¸ç”¨å¼•å…¥import &#123; Button, Tag &#125; from 'element-ui'; Vue.use(Button) Vue.use(Tag)/* æˆ–å†™ä¸º * Vue.component(Button.name, Button); * Vue.component(Tag.name, Tag); */export default &#123; name: "app", data() &#123; return &#123;&#125;; &#125;&#125;;&lt;/script&gt;&lt;style&gt;&lt;/style&gt;æ•ˆæžœå¦‚ä¸‹ï¼šÂ¶13. æ’æ§½slotä½œç”¨:çˆ¶ç»„ä»¶å°†ä¸åŒçš„å†…å®¹åˆ†å‘ç»™å¤šä¸ªåŒåçš„å­ç»„ä»¶,å³å¡«å……å†…å®¹åˆ°å­ç»„ä»¶çš„æ’æ§½ä¸­ã€‚Vueçš„æ’æ§½slotï¼Œåˆ†ä¸º3ç§1.åŒ¿åæ’æ§½2.å…·åæ’æ§½3.ä½œç”¨åŸŸæ’æ§½ä¸€èˆ¬éƒ½ä¼šå¼€å‘å¥½æ’æ§½å­ç»„ä»¶åŽæä¾›ç»™å…¶ä»–äººä½¿ç”¨ï¼Œå…¶ä»–äººåªè¦åœ¨è‡ªå·±çš„çˆ¶ç»„ä»¶ä¸­å¼•å…¥è¿™ä¸ªå¸¦æœ‰æ’æ§½çš„å­ç»„ä»¶æ ‡ç­¾åŽï¼Œåœ¨å­ç»„ä»¶æ ‡ç­¾é‡Œè‡ªå®šä¹‰è‡ªå·±çš„å†…å®¹ï¼Œå¦‚æ­¤å°±èƒ½å®žçŽ°ç›¸åº”çš„åŠŸèƒ½ã€‚1.é»˜è®¤æ’æ§½Child1.vue1234567&lt;template&gt; &lt;div id="child1"&gt; &lt;span style="color: blueviolet"&gt; é»˜è®¤æ’æ§½&lt;/span&gt; &lt;!-- é»˜è®¤æ’æ§½;è¿™éƒ¨åˆ†ä¼šè¢«çˆ¶ç»„ä»¶ä¸­çš„&lt;child1&gt;é‡Œçš„å†…å®¹è¦†ç›–æŽ‰ --&gt; &lt;slot&gt;&lt;/slot&gt; &lt;/div&gt;&lt;/template&gt;2.å…·åæ’æ§½Child2.vue12345678&lt;template&gt; &lt;div id="child2"&gt; &lt;span style="color: #2557c5"&gt;å…·åæ’æ§½&lt;/span&gt; &lt;slot name="header"&gt;&lt;/slot&gt;&lt;!-- å…·åæ’æ§½;è¿™éƒ¨åˆ†ä¼šè¢«çˆ¶ç»„ä»¶ä¸­çš„&lt;child1&gt;é‡Œçš„å†…å®¹è¦†ç›–æŽ‰ --&gt; &lt;slot name="content"&gt;&lt;/slot&gt; &lt;slot name="footer"&gt;&lt;/slot&gt; &lt;/div&gt;&lt;/template&gt;3.ä½œç”¨åŸŸæ’æ§½Child3.vue123456789101112131415161718&lt;template&gt; &lt;div id="child3"&gt; &lt;span style="color: #22da62"&gt; ä½œç”¨åŸŸæ’æ§½&lt;/span&gt; &lt;!-- ä½œç”¨åŸŸæ’æ§½ ä½œç”¨åŸŸæ’æ§½è¦æ±‚ï¼Œåœ¨slotä¸Šé¢ç»‘å®šæ•°æ® --&gt; &lt;slot :data="user"&gt;&lt;/slot&gt; &lt;/div&gt;&lt;/template&gt;&lt;script&gt; export default &#123; data: function() &#123; return &#123; user: ["zhangsan", "lisi", "wanwu", "zhaoliu", "tianqi", "xiaoba"] &#125;; &#125; &#125;;&lt;/script&gt;Father.vue123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778&lt;template&gt; &lt;!-- æ’æ§½ ä½œç”¨:çˆ¶ç»„ä»¶å°†ä¸åŒçš„å†…å®¹åˆ†å‘ç»™å¤šä¸ªåŒåçš„å­ç»„ä»¶,å³å¡«å……å†…å®¹åˆ°å­ç»„ä»¶çš„æ’æ§½ä¸­ã€‚ Vueçš„æ’æ§½slotï¼Œåˆ†ä¸º3ç§ 1.åŒ¿åæ’æ§½ 2.å…·åæ’æ§½ 3.ä½œç”¨åŸŸæ’æ§½ --&gt; &lt;div class="father" id="father"&gt; &lt;div id="slot1"&gt; &lt;!-- 1.é»˜è®¤æ’æ§½ å®šä¹‰ï¼šä¸éœ€è¦ç»™æ’æ§½å‘½åçš„æ’æ§½å°±æ˜¯é»˜è®¤æ’æ§½ï¼ˆåŒ¿åæ’æ§½ï¼‰ é¦–å…ˆåœ¨å­ç»„ä»¶ä¸­å®šä¹‰æ’æ§½&lt;slot&gt;&lt;/slot&gt;ï¼Œç„¶åŽåœ¨çˆ¶ç»„ä»¶ä¸­é€šè¿‡å¼•ç”¨å­ç»„ä»¶å…ƒç´ æ ‡ç­¾ï¼Œå¹¶ç»™å­ç»„ä»¶å…ƒç´ æ ‡ç­¾çš„å†…å®¹ä½“ç¼–å†™å†…å®¹ï¼Œå·²å®žçŽ°å†…å®¹åˆ†å‘ç»™éœ€è¦çš„å­ç»„ä»¶ --&gt; &lt;child1&gt; &lt;div&gt; &lt;li&gt;å£æ°´é¸¡&lt;/li&gt; &lt;li&gt;å£æ°´é¸­&lt;/li&gt; &lt;/div&gt; &lt;/child1&gt; &lt;child1&gt; &lt;div&gt;å¤§ç¥ž&lt;/div&gt; &lt;div&gt;ç å†œ&lt;/div&gt; &lt;/child1&gt; &lt;/div&gt; &lt;hr /&gt; &lt;!-- 2.å…·åæ’æ§½ å®šä¹‰ï¼šéœ€è¦ç»™æ’æ§½å‘½åçš„æ’æ§½å°±æ˜¯å…·åæ’æ§½ (1)å†…å®¹è¦å†™åœ¨çˆ¶ç»„ä»¶ä¸­ï¼Œç„¶åŽåˆ†ç»™éœ€è¦çš„å­ç»„ä»¶ã€‚å½“slotå¤šä¸ªæ—¶ï¼Œå¯ä»¥é€šè¿‡nameæ¥åŠ ä»¥åŒºåˆ†ï¼Œè¿™å°±æ˜¯æ‰€è°“çš„å…·åæ’æ§½ã€‚ (2)åœ¨å­ç»„ä»¶ä¸­å®šä¹‰æ’æ§½&lt;slot name="æ’æ§½åç§°"&gt;&lt;/slot&gt;ï¼Œç„¶åŽåœ¨çˆ¶ç»„ä»¶å¼•ç”¨å­ç»„ä»¶æ—¶åœ¨å†…å®¹ä½“é‡Œé€šè¿‡ï¼ˆç»™å…ƒç´ æ ‡ç­¾å®šä¹‰å±žæ€§slot="æ’æ§½åç§°"ï¼‰æˆ–è€…ï¼ˆtemplateå…ƒç´ é…åˆv-slot:æ’æ§½åç§°ï¼‰æ¥ä½¿ç”¨æ’æ§½ï¼Œå¯ä»¥åœ¨çˆ¶ç»„ä»¶çš„æ’æ§½å¼•ç”¨ä½“é‡Œç¼–å†™æ’æ§½å†…å®¹ï¼Œä»¥æ­¤æ¥å®žçŽ°ä¸åŒæ˜¾ç¤ºæ ·å¼çš„æ’æ§½ --&gt; &lt;div id="slot2"&gt; &lt;child2&gt; &lt;!-- 2.6.0ç‰ˆæœ¬ä¹‹å‰å…·åæ’æ§½çš„ä½¿ç”¨æ–¹å¼: slot="æ’æ§½åç§°" --&gt; &lt;div slot="header"&gt; &lt;div&gt;father header&lt;/div&gt; &lt;/div&gt; &lt;!-- 2.6.0ç‰ˆæœ¬ä¹‹åŽå…·åæ’æ§½çš„ä½¿ç”¨æ–¹å¼: templateé…åˆv-slot:æ’æ§½åç§° --&gt; &lt;template v-slot:content&gt; &lt;div&gt;father content&lt;/div&gt; &lt;/template&gt; &lt;template v-slot:footer&gt; &lt;div&gt;father footer&lt;/div&gt; &lt;/template&gt; &lt;/child2&gt; &lt;/div&gt; &lt;hr /&gt; &lt;!-- 3.ä½œç”¨åŸŸæ’æ§½ å®šä¹‰ï¼šç»‘å®šdataæ•°æ®çš„æ’æ§½å°±æ˜¯ä½œç”¨åŸŸæ’æ§½ é€šè¿‡åœ¨å­ç»„ä»¶ä¸­å®šä¹‰ä½œç”¨åŸŸæ’æ§½ &lt;slot :data="æ•°æ®å˜é‡åç§°"&gt;&lt;/slot&gt;ï¼Œç„¶åŽåœ¨çˆ¶ç»„ä»¶ä¸­ä½¿ç”¨å­ç»„ä»¶çš„æ—¶å€™åœ¨å†…å®¹ä½“é‡Œé€šè¿‡ &lt;template slot-scope="å­ç»„ä»¶ç»‘å®šçš„æ•°æ®å˜é‡åç§°"&gt;&lt;/template&gt;ä½¿ç”¨æ’æ§½ï¼ŒåŒæ—¶å¯ä»¥åœ¨çˆ¶ç»„ä»¶ä¸­ä½¿ç”¨å­ç»„ä»¶æ’æ§½ç»‘å®šè¿‡æ¥çš„æ•°æ® --&gt; &lt;div id="slot3"&gt; &lt;child3&gt; &lt;template slot-scope="user"&gt; &lt;li v-for="item in user.data"&gt;&#123;&#123; item &#125;&#125;&lt;/li&gt; &lt;/template&gt; &lt;/child3&gt; &lt;/div&gt; &lt;/div&gt;&lt;/template&gt;&lt;script&gt; import child1 from "./Child1"; import child2 from "./Child2"; import child3 from "./Child3"; export default &#123; components: &#123; child1, child2, child3 &#125; &#125;;&lt;/script&gt;æ•ˆæžœå¦‚ä¸‹ï¼šÂ¶åå…­ã€å…¶å®ƒvueé—®é¢˜å‚è€ƒVue è„±å‘è®° - æŸ¥æ¼è¡¥ç¼º(æ±‡æ€»ä¸‹ç¾¤é‡Œé«˜é¢‘è¯¢é—®çš„ xxx åŠç»™å‡ºä¸é è°±çš„è§£å†³æ–¹æ¡ˆ)]]></content>
      <categories>
        <category>front</category>
      </categories>
      <tags>
        <tag>vue</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[rediså­¦ä¹ ç¬”è®°]]></title>
    <url>%2Fdevops%2Fredis.html</url>
    <content type="text"><![CDATA[Â¶ä¸€ã€ç®€ä»‹Redisæ˜¯key-valueï¼ˆé”®å€¼å¯¹ï¼‰çš„å­˜å‚¨ç³»ç»Ÿã€‚æ”¯æŒå­˜å‚¨çš„valueç±»åž‹ç›¸å¯¹æ›´å¤šï¼ŒåŒ…æ‹¬stringã€listã€set(é›†åˆ)ã€zset(æœ‰åºé›†åˆ)å’Œhashï¼ˆå“ˆå¸Œç±»åž‹ï¼‰ï¼Œç®—ä¸€ç§nosqlå†…å­˜åž‹ç¼“å­˜æ•°æ®åº“ã€‚NoSQLï¼ŒæŒ‡çš„æ˜¯éžå…³ç³»åž‹çš„æ•°æ®åº“ã€‚NoSQLæœ‰æ—¶ä¹Ÿç§°ä½œNot Only SQLçš„ç¼©å†™ï¼Œæ˜¯å¯¹ä¸åŒäºŽä¼ ç»Ÿçš„å…³ç³»åž‹æ•°æ®åº“çš„æ•°æ®åº“ç®¡ç†ç³»ç»Ÿçš„ç»Ÿç§°ã€‚NoSQLä¸€èˆ¬åº”ç”¨äºŽè¶…å¤§è§„æ¨¡æ•°æ®çš„å­˜å‚¨ã€‚å…³ç³»åž‹æ•°æ®åº“å·²ç»ä¸é€‚åˆå¤„ç†å½“ä»Šæˆå€æ•°æ®é‡å¢žåŠ çš„å¤§åž‹äº’è”ç½‘å•†åŠ¡åº”ç”¨äº†ã€‚è¿™æ—¶nosqlæ•°æ®åº“ç”±äºŽå…¶æ›´é«˜çš„æ€§èƒ½ã€æ›´å¿«çš„é€Ÿåº¦ã€æ›´å¥½çš„å¯æ‰©å±•æ€§ç­‰ä¼˜åŠ¿å¯¹è§£å†³å¤§è§„æ¨¡æ•°æ®èµ·åˆ°äº†è‰¯å¥½çš„åº”ç”¨ä½œç”¨ã€‚NoSQLå››å¤§åˆ†ç±»åˆ†ç±»Examplesä¸¾ä¾‹å…¸åž‹åº”ç”¨åœºæ™¯æ•°æ®æ¨¡åž‹ä¼˜ç‚¹ç¼ºç‚¹é”®å€¼ï¼ˆkey-valueï¼‰Redisï¼ŒTokyo Cabinet/Tyrant, Voldemort, Oracle BDBå†…å®¹ç¼“å­˜ï¼Œä¸»è¦ç”¨äºŽå¤„ç†å¤§é‡æ•°æ®çš„é«˜è®¿é—®è´Ÿè½½ï¼Œä¹Ÿç”¨äºŽä¸€äº›æ—¥å¿—ç³»ç»Ÿç­‰ç­‰ã€‚Key æŒ‡å‘ Value çš„é”®å€¼å¯¹ï¼Œé€šå¸¸ç”¨hash tableæ¥å®žçŽ°æŸ¥æ‰¾é€Ÿåº¦å¿«æ•°æ®æ— ç»“æž„åŒ–ï¼Œé€šå¸¸åªè¢«å½“ä½œå­—ç¬¦ä¸²æˆ–è€…äºŒè¿›åˆ¶æ•°æ®åˆ—å­˜å‚¨æ•°æ®åº“Cassandra, HBase, Riakåˆ†å¸ƒå¼çš„æ–‡ä»¶ç³»ç»Ÿä»¥åˆ—ç°‡å¼å­˜å‚¨ï¼Œå°†åŒä¸€åˆ—æ•°æ®å­˜åœ¨ä¸€èµ·æŸ¥æ‰¾é€Ÿåº¦å¿«ï¼Œå¯æ‰©å±•æ€§å¼ºï¼Œæ›´å®¹æ˜“è¿›è¡Œåˆ†å¸ƒå¼æ‰©å±•åŠŸèƒ½ç›¸å¯¹å±€é™æ–‡æ¡£åž‹æ•°æ®åº“CouchDB, MongoDbWebåº”ç”¨ï¼ˆä¸ŽKey-Valueç±»ä¼¼ï¼ŒValueæ˜¯ç»“æž„åŒ–çš„ï¼Œä¸åŒçš„æ˜¯æ•°æ®åº“èƒ½å¤Ÿäº†è§£Valueçš„å†…å®¹ï¼‰Key-Valueå¯¹åº”çš„é”®å€¼å¯¹ï¼ŒValueä¸ºç»“æž„åŒ–æ•°æ®æ•°æ®ç»“æž„è¦æ±‚ä¸ä¸¥æ ¼ï¼Œè¡¨ç»“æž„å¯å˜ï¼Œä¸éœ€è¦åƒå…³ç³»åž‹æ•°æ®åº“ä¸€æ ·éœ€è¦é¢„å…ˆå®šä¹‰è¡¨ç»“æž„æŸ¥è¯¢æ€§èƒ½ä¸é«˜ï¼Œè€Œä¸”ç¼ºä¹ç»Ÿä¸€çš„æŸ¥è¯¢è¯­æ³•ã€‚å›¾å½¢(Graph)æ•°æ®åº“Neo4J, InfoGrid, Infinite Graphç¤¾äº¤ç½‘ç»œï¼ŒæŽ¨èç³»ç»Ÿç­‰ã€‚ä¸“æ³¨äºŽæž„å»ºå…³ç³»å›¾è°±å›¾ç»“æž„åˆ©ç”¨å›¾ç»“æž„ç›¸å…³ç®—æ³•ã€‚æ¯”å¦‚æœ€çŸ­è·¯å¾„å¯»å€ï¼ŒNåº¦å…³ç³»æŸ¥æ‰¾ç­‰å¾ˆå¤šæ—¶å€™éœ€è¦å¯¹æ•´ä¸ªå›¾åšè®¡ç®—æ‰èƒ½å¾—å‡ºéœ€è¦çš„ä¿¡æ¯ï¼Œè€Œä¸”è¿™ç§ç»“æž„ä¸å¤ªå¥½åšåˆ†å¸ƒå¼çš„é›†ç¾¤æ–¹æ¡ˆã€‚NoSQLé€‚ç”¨åœºæ™¯ï¼š1ã€æ•°æ®æ¨¡åž‹æ¯”è¾ƒç®€å•ï¼›2ã€éœ€è¦çµæ´»æ€§æ›´å¼ºçš„ITç³»ç»Ÿï¼›3ã€å¯¹æ•°æ®åº“æ€§èƒ½è¦æ±‚è¾ƒé«˜ï¼›4ã€ä¸éœ€è¦é«˜åº¦çš„æ•°æ®ä¸€è‡´æ€§ï¼›5ã€å¯¹äºŽç»™å®škeyï¼Œæ¯”è¾ƒå®¹æ˜“æ˜ å°„å¤æ‚å€¼çš„çŽ¯å¢ƒã€‚é€šä¿—æ¥è¯´ï¼ŒOracleã€mysqlã€sqlserverç­‰è¿™æ ·çš„å…³ç³»åž‹æ•°æ®åº“ä¸»è¦ç”¨äºŽå­˜æ”¾æŒä¹…åŒ–æ•°æ®ï¼Œå°†æ•°æ®å­˜å‚¨åœ¨ç¡¬ç›˜ä¸­ï¼Œè¯»å–é€Ÿåº¦è¾ƒæ…¢ã€‚è€Œredisä¸»è¦å°†æ•°æ®å­˜å‚¨åœ¨ç¼“å­˜ä¸­ï¼Œç¼“å­˜çš„è¯»å–é€Ÿåº¦å¿«ï¼Œèƒ½å¤Ÿå¤§å¤§çš„æé«˜è¿è¡Œæ•ˆçŽ‡ï¼Œä½†ç›¸åº”çš„ä¿å­˜æ—¶é—´æœ‰é™ã€‚ä½¿ç”¨Redisçš„æƒ…æ™¯ä¸€èˆ¬æ˜¯ä¼šè¯ç¼“å­˜ï¼ˆsession cacheï¼‰ï¼Œç”¨Redisç¼“å­˜ä¼šè¯æ¯”å…¶ä»–å­˜å‚¨ï¼ˆå¦‚Memcachedï¼‰çš„ä¼˜åŠ¿åœ¨äºŽï¼šRedisæä¾›æŒä¹…åŒ–ï¼Œå³å¯ä»¥å°†å†…å­˜ä¸­çš„æ•°æ®åºåˆ—åŒ–åˆ°ç¡¬ç›˜ä¸­ï¼Œå¦‚æ­¤ä»¥ç¡®ä¿ç”¨æˆ·æ•°æ®çš„å®‰å…¨æ€§ã€‚æ­¤å¤–Rediså“Žé›†ç¾¤æ–¹é¢å…·æœ‰å¾ˆå¥½çš„ä¼˜åŠ¿ã€‚NoSQLä¼˜ç¼ºç‚¹ä¼˜ç‚¹æ•°æ®é«˜å¹¶å‘è¯»å†™æµ·é‡æ•°æ®å­˜å‚¨å’Œè®¿é—®æ•ˆçŽ‡é«˜å¯¹æ•°æ®å¯æ‰©å±•ä¸”é«˜å¯ç”¨ç¼ºç‚¹ACIDç›¸æ¯”äºŽå…³ç³»åž‹æ•°æ®åº“è¿‡äºŽç®€å•æ— æ³•åšå¤ªå¤æ‚çš„å…³ç³»æ•°æ®åº“æ¨¡åž‹Â¶äºŒã€å¸¸ç”¨å‘½ä»¤å¤§å…¨Â¶1. keyç›¸å…³1234567891011121314$ keys * #æŸ¥è¯¢å½“å‰åº“çš„æ‰€æœ‰é”® $ EXISTS key #æ£€æŸ¥ç»™å®š key æ˜¯å¦å­˜åœ¨ $ DUMP key #åºåˆ—åŒ–ç»™å®škeyï¼Œå¹¶è¿”å›žè¢«åºåˆ—åŒ–çš„å€¼ $ EXPIRE key seconds #ä¸ºç»™å®š key è®¾ç½®è¿‡æœŸæ—¶é—´ï¼Œä»¥ç§’è®¡ã€‚ $ EXPIREAT key timestamp # EXPIREAT çš„ä½œç”¨å’ŒEXPIRE ç±»ä¼¼ï¼Œéƒ½ç”¨äºŽä¸º key è®¾ç½®è¿‡æœŸæ—¶é—´ã€‚ ä¸åŒåœ¨äºŽ EXPIREAT å‘½ä»¤æŽ¥å—çš„æ—¶é—´å‚æ•°æ˜¯ UNIXæ—¶é—´æˆ³(unix timestamp) $ KEYS pattern #æŸ¥æ‰¾æ‰€æœ‰ç¬¦åˆç»™å®šæ¨¡å¼( pattern)çš„ keyã€‚ $ MOVE key db #å°†å½“å‰æ•°æ®åº“çš„ keyç§»åŠ¨åˆ°ç»™å®šçš„æ•°æ®åº“ db å½“ä¸­ã€‚ $ PERSIST key #ç§»é™¤keyçš„è¿‡æœŸæ—¶é—´ï¼Œkeyå°†æŒä¹…ä¿æŒã€‚ $ PTTL key #ä»¥æ¯«ç§’ä¸ºå•ä½è¿”å›žkeyçš„å‰©ä½™çš„è¿‡æœŸæ—¶é—´ã€‚ $ TTL key #ä»¥ç§’ä¸ºå•ä½ï¼Œè¿”å›žç»™å®škeyçš„å‰©ä½™ç”Ÿå­˜æ—¶é—´(TTL, time to live)ã€‚ $ RANDOMKEY #ä»Žå½“å‰æ•°æ®åº“ä¸­éšæœºè¿”å›žä¸€ä¸ª keyã€‚ $ RENAME key newkey #ä¿®æ”¹ keyçš„åç§° $ RENAMENX key newkey # ä»…å½“newkeyä¸å­˜åœ¨æ—¶ï¼Œå°† keyæ”¹åä¸º newkeyã€‚ $ TYPE key #è¿”å›žkeyæ‰€å‚¨å­˜çš„å€¼çš„ç±»åž‹ã€‚æ¡ˆä¾‹ï¼ˆ1ï¼‰æŸ¥è¯¢å½“å‰åº“çš„æ‰€æœ‰é”®12127.0.0.1:6379&gt; keys *(empty list or set)ï¼ˆ2ï¼‰ä¿®æ”¹ keyçš„åç§°1234127.0.0.1:6379&gt; set name qcmokeOK127.0.0.1:6379&gt; rename name usernameOKÂ¶2. Stringç›¸å…³1234567$ set key value #æ·»åŠ é”®å€¼å¯¹$ setnx key value #å¦‚æžœä¸å­˜åœ¨keyåˆ™è®¾ç½®ï¼Œå­˜åœ¨åˆ™ä¸è®¾ç½® $ get key #æŸ¥è¯¢å¯¹åº”é”®å€¼ $ del key #åˆ é™¤å¯¹åº”é”®å€¼ $ setex key seconds value #è®¾ç½®key/valueçš„æœ‰æ•ˆæœŸï¼Œåˆ°æ—¶åŽå˜ä¸ºnil(ç©º) $ SETRANGE KEY_NAME OFFSET VALUE #æŒ‡å®šçš„å­—ç¬¦ä¸²è¦†ç›–ç»™å®š key æ‰€å‚¨å­˜çš„å­—ç¬¦ä¸²å€¼ï¼Œè¦†ç›–çš„ä½ç½®ä»Žåç§»é‡ offset å¼€å§‹$ GETSET key value #å°†ç»™å®š key çš„å€¼è®¾ä¸º value ï¼Œå¹¶è¿”å›ž key çš„æ—§å€¼(old value)ã€‚æ¡ˆä¾‹ï¼ˆ1ï¼‰æ·»åŠ é”®å€¼å¯¹set key value12127.0.0.1:6379&gt; set name zhangsanOKå¦‚æžœå·²ç»å­˜åœ¨ç›¸åº”çš„key/value,é‚£ä¹ˆä¼šå°†åŽŸæœ¬çš„å€¼è¦†ç›–æŽ‰ã€‚æ·»åŠ å®ŒæˆåŽï¼Œä¼šæ ¹æ®é…ç½®æ–‡ä»¶ä¸­çš„dirçš„è·¯å¾„æ¯éš”ä¸€æ®µæ—¶é—´åºåˆ—åŒ–ç”Ÿæˆdump.rdbæ–‡ä»¶ã€‚è¿™ä¸ªæ–‡ä»¶å¯ä»¥å¤‡ä»½å’Œåˆ é™¤ï¼Œä½†åˆ é™¤äº†ç›¸åº”çš„æ•°æ®åº“ä¸­å°±æ²¡æœ‰ç›¸åº”çš„æ•°æ®äº†ï¼Œæ•…ä¸è¦è½»æ˜“çš„åˆ é™¤ï¼Œè¿™å¾ˆå±é™©ã€‚setnx key valueå¦‚æžœä¸å­˜åœ¨keyåˆ™è®¾ç½®ï¼Œå¦‚æžœå­˜åœ¨keyåˆ™ä¸è®¾ç½®12127.0.0.1:6379&gt; setnx name qcmoke(integer) 1ï¼ˆ2ï¼‰æŸ¥è¯¢å¯¹åº”é”®å€¼get key12127.0.0.1:6379&gt; get name"zhangsan"ï¼ˆ3ï¼‰åˆ é™¤å·²å­˜åœ¨çš„é”®del key12127.0.0.1:6379&gt; del name(integer) 1Â¶3. å“ˆå¸Œ(Hash)1234567891011121314$ HDEL key field1 [field2] #åˆ é™¤ä¸€ä¸ªæˆ–å¤šä¸ªå“ˆå¸Œè¡¨å­—æ®µ$ HEXISTS key field #æŸ¥çœ‹å“ˆå¸Œè¡¨ key ä¸­ï¼ŒæŒ‡å®šçš„å­—æ®µæ˜¯å¦å­˜åœ¨ã€‚$ HGET key field #èŽ·å–å­˜å‚¨åœ¨å“ˆå¸Œè¡¨ä¸­æŒ‡å®šå­—æ®µçš„å€¼ã€‚$ HGETALL key #èŽ·å–åœ¨å“ˆå¸Œè¡¨ä¸­æŒ‡å®š key çš„æ‰€æœ‰å­—æ®µå’Œå€¼$ HINCRBY key field increment #ä¸ºå“ˆå¸Œè¡¨ key ä¸­çš„æŒ‡å®šå­—æ®µçš„æ•´æ•°å€¼åŠ ä¸Šå¢žé‡ increment $ HINCRBYFLOAT key field increment #ä¸ºå“ˆå¸Œè¡¨ key ä¸­çš„æŒ‡å®šå­—æ®µçš„æµ®ç‚¹æ•°å€¼åŠ ä¸Šå¢žé‡ increment ã€‚$ HKEYS key #èŽ·å–æ‰€æœ‰å“ˆå¸Œè¡¨ä¸­çš„å­—æ®µ$ HLEN key #èŽ·å–å“ˆå¸Œè¡¨ä¸­å­—æ®µçš„æ•°é‡$ HMGET key field1 [field2] #èŽ·å–æ‰€æœ‰ç»™å®šå­—æ®µçš„å€¼$ HMSET key field1 value1 [field2 value2 ] #åŒæ—¶å°†å¤šä¸ª field-value (åŸŸ-å€¼)å¯¹è®¾ç½®åˆ°å“ˆå¸Œè¡¨ key ä¸­ã€‚$ HSET key field value #å°†å“ˆå¸Œè¡¨ key ä¸­çš„å­—æ®µ field çš„å€¼è®¾ä¸º value ã€‚$ HSETNX key field value #åªæœ‰åœ¨å­—æ®µ field ä¸å­˜åœ¨æ—¶ï¼Œè®¾ç½®å“ˆå¸Œè¡¨å­—æ®µçš„å€¼ã€‚$ HVALS key #èŽ·å–å“ˆå¸Œè¡¨ä¸­æ‰€æœ‰å€¼$ HSCAN key cursor [MATCH pattern] [COUNT count] #è¿­ä»£å“ˆå¸Œè¡¨ä¸­çš„é”®å€¼å¯¹ã€‚æ¡ˆä¾‹ï¼ˆ1ï¼‰å°†å“ˆå¸Œè¡¨ key ä¸­çš„å­—æ®µ field çš„å€¼è®¾ä¸º value1127.0.0.1:6379&gt; hmset user age 21ï¼ˆ2ï¼‰å°†å¤šä¸ª field-value (åŸŸ-å€¼)å¯¹è®¾ç½®åˆ°å“ˆå¸Œè¡¨ key ä¸­1127.0.0.1:6379&gt; hmset user name zhangsan description "a good boy"ï¼ˆ3ï¼‰ä»Žhashé‡ŒèŽ·å–æŒ‡å®šå­—æ®µçš„å€¼123127.0.0.1:6379&gt; hget user name"zhangsan"127.0.0.1:6379&gt;ï¼ˆ4ï¼‰ä»ŽhashèŽ·å–æŒ‡å®š key çš„æ‰€æœ‰å­—æ®µå’Œå€¼1234567127.0.0.1:6379&gt; hgetall user1) "name"2) "zhangsan"3) "description"4) "a good boy"5) "age"6) "21"ï¼ˆ5ï¼‰ä»ŽhashèŽ·å–æŒ‡å®š key çš„æ‰€æœ‰å€¼1234127.0.0.1:6379&gt; hvals user1) "zhangsan"2) "a good boy"3) "21Â¶4. åˆ—è¡¨(List)æ ¹æ®æ”¶å°¾æ·»åŠ çš„ä¸åŒï¼Œæ—¢å¯ä»¥å®žçŽ°æ ˆï¼Œä¹Ÿå¯ä»¥å®žçŽ°é˜Ÿåˆ—ã€‚1234567891011121314151617$ BLPOP key1 [key2 ] timeout # ç§»å‡ºå¹¶èŽ·å–åˆ—è¡¨çš„ç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œ å¦‚æžœåˆ—è¡¨æ²¡æœ‰å…ƒç´ ä¼šé˜»å¡žåˆ—è¡¨ç›´åˆ°ç­‰å¾…è¶…æ—¶æˆ–å‘çŽ°å¯å¼¹å‡ºå…ƒç´ ä¸ºæ­¢ã€‚$ BRPOP key1 [key2 ] timeout # ç§»å‡ºå¹¶èŽ·å–åˆ—è¡¨çš„æœ€åŽä¸€ä¸ªå…ƒç´ ï¼Œ å¦‚æžœåˆ—è¡¨æ²¡æœ‰å…ƒç´ ä¼šé˜»å¡žåˆ—è¡¨ç›´åˆ°ç­‰å¾…è¶…æ—¶æˆ–å‘çŽ°å¯å¼¹å‡ºå…ƒç´ ä¸ºæ­¢ã€‚$ BRPOPLPUSH source destination timeout # ä»Žåˆ—è¡¨ä¸­å¼¹å‡ºä¸€ä¸ªå€¼ï¼Œå°†å¼¹å‡ºçš„å…ƒç´ æ’å…¥åˆ°å¦å¤–ä¸€ä¸ªåˆ—è¡¨ä¸­å¹¶è¿”å›žå®ƒï¼› å¦‚æžœåˆ—è¡¨æ²¡æœ‰å…ƒç´ ä¼šé˜»å¡žåˆ—è¡¨ç›´åˆ°ç­‰å¾…è¶…æ—¶æˆ–å‘çŽ°å¯å¼¹å‡ºå…ƒç´ ä¸ºæ­¢ã€‚$ LINDEX key index # é€šè¿‡ç´¢å¼•èŽ·å–åˆ—è¡¨ä¸­çš„å…ƒç´ $ LINSERT key BEFORE|AFTER pivot value # åœ¨åˆ—è¡¨çš„å…ƒç´ å‰æˆ–è€…åŽæ’å…¥å…ƒç´ $ LLEN key # èŽ·å–åˆ—è¡¨é•¿åº¦$ LPOP key # ç§»å‡ºå¹¶èŽ·å–åˆ—è¡¨çš„ç¬¬ä¸€ä¸ªå…ƒç´ $ LPUSH key value1 [value2] # å°†ä¸€ä¸ªæˆ–å¤šä¸ªå€¼æ’å…¥åˆ°åˆ—è¡¨å¤´éƒ¨ï¼Œå®žçŽ°å…ˆè¿›åŽå‡ºçš„æ•ˆæžœ(æ ˆ)$ LPUSHX key value # å°†ä¸€ä¸ªå€¼æ’å…¥åˆ°å·²å­˜åœ¨çš„åˆ—è¡¨å¤´éƒ¨$ LRANGE key start stop # èŽ·å–åˆ—è¡¨æŒ‡å®šèŒƒå›´å†…çš„å…ƒç´ $ LREM key count value # ç§»é™¤åˆ—è¡¨å…ƒç´ $ LSET key index value # é€šè¿‡ç´¢å¼•è®¾ç½®åˆ—è¡¨å…ƒç´ çš„å€¼$ LTRIM key start stop # å¯¹ä¸€ä¸ªåˆ—è¡¨è¿›è¡Œä¿®å‰ª(trim)ï¼Œå°±æ˜¯è¯´ï¼Œè®©åˆ—è¡¨åªä¿ç•™æŒ‡å®šåŒºé—´å†…çš„å…ƒç´ ï¼Œä¸åœ¨æŒ‡å®šåŒºé—´ä¹‹å†…çš„å…ƒç´ éƒ½å°†è¢«åˆ é™¤ã€‚$ RPOP key # ç§»é™¤åˆ—è¡¨çš„æœ€åŽä¸€ä¸ªå…ƒç´ ï¼Œè¿”å›žå€¼ä¸ºç§»é™¤çš„å…ƒç´ ã€‚$ RPOPLPUSH source destination # ç§»é™¤åˆ—è¡¨çš„æœ€åŽä¸€ä¸ªå…ƒç´ ï¼Œå¹¶å°†è¯¥å…ƒç´ æ·»åŠ åˆ°å¦ä¸€ä¸ªåˆ—è¡¨å¹¶è¿”å›ž$ RPUSH key value1 [value2] # åœ¨åˆ—è¡¨ä¸­æœ«å°¾æ·»åŠ ä¸€ä¸ªæˆ–å¤šä¸ªå€¼ï¼Œå®žçŽ°å…ˆè¿›å…ˆå‡ºçš„æ•ˆæžœ(é˜Ÿåˆ—)$ RPUSHX key value # ä¸ºå·²å­˜åœ¨çš„åˆ—è¡¨æ·»åŠ å€¼æ¡ˆä¾‹ï¼ˆ1ï¼‰å°†ä¸€ä¸ªæˆ–å¤šä¸ªå€¼æ’å…¥åˆ°åˆ—è¡¨å¤´éƒ¨1234127.0.0.1:6379&gt; lpush lkey zhangsan(integer) 1127.0.0.1:6379&gt; lpush lkey lisi wangwu(integer) 3ï¼ˆ2ï¼‰èŽ·å–åˆ—è¡¨æŒ‡å®šèŒƒå›´å†…çš„å…ƒç´ 1234127.0.0.1:6379&gt; LRANGE lkey 0 101) "wangwu"2) "lisi"3) "zhangsan"Â¶5. é›†åˆSet123456789101112131415$ SADD key member1 [member2] #å‘é›†åˆæ·»åŠ ä¸€ä¸ªæˆ–å¤šä¸ªæˆå‘˜$ SCARD key #èŽ·å–é›†åˆçš„æˆå‘˜æ•°$ SDIFF key1 [key2] #è¿”å›žç»™å®šæ‰€æœ‰é›†åˆçš„å·®é›†$ SDIFFSTORE destination key1 [key2] #è¿”å›žç»™å®šæ‰€æœ‰é›†åˆçš„å·®é›†å¹¶å­˜å‚¨åœ¨ destination ä¸­$ SINTER key1 [key2] #è¿”å›žç»™å®šæ‰€æœ‰é›†åˆçš„äº¤é›†$ SINTERSTORE destination key1 [key2] #è¿”å›žç»™å®šæ‰€æœ‰é›†åˆçš„äº¤é›†å¹¶å­˜å‚¨åœ¨ destination ä¸­$ SISMEMBER key member #åˆ¤æ–­ member å…ƒç´ æ˜¯å¦æ˜¯é›†åˆ key çš„æˆå‘˜$ SMEMBERS key #è¿”å›žé›†åˆä¸­çš„æ‰€æœ‰æˆå‘˜$ SMOVE source destination member #å°† member å…ƒç´ ä»Ž source é›†åˆç§»åŠ¨åˆ° destination é›†åˆ$ SPOP key #ç§»é™¤å¹¶è¿”å›žé›†åˆä¸­çš„ä¸€ä¸ªéšæœºå…ƒç´ $ SRANDMEMBER key [count] #è¿”å›žé›†åˆä¸­ä¸€ä¸ªæˆ–å¤šä¸ªéšæœºæ•°$ SREM key member1 [member2] #ç§»é™¤é›†åˆä¸­ä¸€ä¸ªæˆ–å¤šä¸ªæˆå‘˜$ SUNION key1 [key2] #è¿”å›žæ‰€æœ‰ç»™å®šé›†åˆçš„å¹¶é›†$ SUNIONSTORE destination key1 [key2] #æ‰€æœ‰ç»™å®šé›†åˆçš„å¹¶é›†å­˜å‚¨åœ¨ destination é›†åˆä¸­$ SSCAN key cursor [MATCH pattern] [COUNT count] #è¿­ä»£é›†åˆä¸­çš„å…ƒç´ æ¡ˆä¾‹ï¼ˆ1ï¼‰å‘é›†åˆæ·»åŠ ä¸€ä¸ªæˆ–å¤šä¸ªæˆå‘˜123456127.0.0.1:6379&gt; sadd skey zhangsan(integer) 1127.0.0.1:6379&gt; sadd skey lisi(integer) 1127.0.0.1:6379&gt; sadd skey wangwu zhaoliu(integer) 1ï¼ˆ2ï¼‰è¿”å›žé›†åˆä¸­çš„æ‰€æœ‰æˆå‘˜12345127.0.0.1:6379&gt; smembers skey1) "zhaoliu"2) "zhangsan"3) "wangwu"4) "lisi"Â¶6. æœ‰åºé›†åˆ(sorted set)1234567891011121314151617181920$ ZADD key score1 member1 [score2 member2] #å‘æœ‰åºé›†åˆæ·»åŠ ä¸€ä¸ªæˆ–å¤šä¸ªæˆå‘˜ï¼Œæˆ–è€…æ›´æ–°å·²å­˜åœ¨æˆå‘˜çš„åˆ†æ•°$ ZCARD key #èŽ·å–æœ‰åºé›†åˆçš„æˆå‘˜æ•°$ ZCOUNT key min max #è®¡ç®—åœ¨æœ‰åºé›†åˆä¸­æŒ‡å®šåŒºé—´åˆ†æ•°çš„æˆå‘˜æ•°$ ZINCRBY key increment member #æœ‰åºé›†åˆä¸­å¯¹æŒ‡å®šæˆå‘˜çš„åˆ†æ•°åŠ ä¸Šå¢žé‡ increment$ ZINTERSTORE destination numkeys key [key ...] # è®¡ç®—ç»™å®šçš„ä¸€ä¸ªæˆ–å¤šä¸ªæœ‰åºé›†çš„äº¤é›†å¹¶å°†ç»“æžœé›†å­˜å‚¨åœ¨æ–°çš„æœ‰åºé›†åˆ key ä¸­$ ZLEXCOUNT key min max # åœ¨æœ‰åºé›†åˆä¸­è®¡ç®—æŒ‡å®šå­—å…¸åŒºé—´å†…æˆå‘˜æ•°é‡$ ZRANGE key start stop [WITHSCORES] # é€šè¿‡ç´¢å¼•åŒºé—´è¿”å›žæœ‰åºé›†åˆæˆæŒ‡å®šåŒºé—´å†…çš„æˆå‘˜$ ZRANGEBYLEX key min max [LIMIT offset count] # é€šè¿‡å­—å…¸åŒºé—´è¿”å›žæœ‰åºé›†åˆçš„æˆå‘˜$ ZRANGEBYSCORE key min max [WITHSCORES] [LIMIT] # é€šè¿‡åˆ†æ•°è¿”å›žæœ‰åºé›†åˆæŒ‡å®šåŒºé—´å†…çš„æˆå‘˜$ ZRANK key member # è¿”å›žæœ‰åºé›†åˆä¸­æŒ‡å®šæˆå‘˜çš„ç´¢å¼•$ ZREM key member [member ...] # ç§»é™¤æœ‰åºé›†åˆä¸­çš„ä¸€ä¸ªæˆ–å¤šä¸ªæˆå‘˜$ ZREMRANGEBYLEX key min max # ç§»é™¤æœ‰åºé›†åˆä¸­ç»™å®šçš„å­—å…¸åŒºé—´çš„æ‰€æœ‰æˆå‘˜$ ZREMRANGEBYRANK key start stop # ç§»é™¤æœ‰åºé›†åˆä¸­ç»™å®šçš„æŽ’ååŒºé—´çš„æ‰€æœ‰æˆå‘˜$ ZREMRANGEBYSCORE key min max # ç§»é™¤æœ‰åºé›†åˆä¸­ç»™å®šçš„åˆ†æ•°åŒºé—´çš„æ‰€æœ‰æˆå‘˜$ ZREVRANGE key start stop [WITHSCORES] # è¿”å›žæœ‰åºé›†ä¸­æŒ‡å®šåŒºé—´å†…çš„æˆå‘˜ï¼Œé€šè¿‡ç´¢å¼•ï¼Œåˆ†æ•°ä»Žé«˜åˆ°åº•$ ZREVRANGEBYSCORE key max min [WITHSCORES] # è¿”å›žæœ‰åºé›†ä¸­æŒ‡å®šåˆ†æ•°åŒºé—´å†…çš„æˆå‘˜ï¼Œåˆ†æ•°ä»Žé«˜åˆ°ä½ŽæŽ’åº$ ZREVRANK key member # è¿”å›žæœ‰åºé›†åˆä¸­æŒ‡å®šæˆå‘˜çš„æŽ’åï¼Œæœ‰åºé›†æˆå‘˜æŒ‰åˆ†æ•°å€¼é€’å‡(ä»Žå¤§åˆ°å°)æŽ’åº$ ZSCORE key member # è¿”å›žæœ‰åºé›†ä¸­ï¼Œæˆå‘˜çš„åˆ†æ•°å€¼$ ZUNIONSTORE destination numkeys key [key ...] # è®¡ç®—ç»™å®šçš„ä¸€ä¸ªæˆ–å¤šä¸ªæœ‰åºé›†çš„å¹¶é›†ï¼Œå¹¶å­˜å‚¨åœ¨æ–°çš„ key ä¸­$ ZSCAN key cursor [MATCH pattern] [COUNT count] # è¿­ä»£æœ‰åºé›†åˆä¸­çš„å…ƒç´ ï¼ˆåŒ…æ‹¬å…ƒç´ æˆå‘˜å’Œå…ƒç´ åˆ†å€¼ï¼‰æ¡ˆä¾‹ï¼ˆ1ï¼‰å‘æœ‰åºé›†åˆæ·»åŠ ä¸€ä¸ªæˆ–å¤šä¸ªæˆå‘˜ï¼Œæˆ–è€…æ›´æ–°å·²å­˜åœ¨æˆå‘˜çš„åˆ†æ•°1234567127.0.0.1:6379&gt; zadd sskey 1 zhangsan(integer) 1127.0.0.1:6379&gt; zadd sskey 2 lisi(integer) 1127.0.0.1:6379&gt; zadd sskey 2 wangwu(integer) 1127.0.0.1:6379&gt; zadd sskey 3 zhaoliuï¼ˆ2ï¼‰è¿‡ç´¢å¼•åŒºé—´è¿”å›žæœ‰åºé›†åˆæˆæŒ‡å®šåŒºé—´å†…çš„æˆå‘˜12345127.0.0.1:6379&gt; zrange sskey 0 101) "zhangsan"2) "lisi"3) "wangwu"4) "zhaoliu"ï¼ˆ3ï¼‰å–åˆ†æ•°å’Œå€¼123456789127.0.0.1:6379&gt; zrange sskey 0 10 WITHSCORES1) "zhangsan"2) "1"3) "lisi"4) "2"5) "wangwu"6) "2"7) "zhaoliu"8) "3"Â¶7. é«˜çº§å‘½ä»¤123456$ select [æ•°æ®åº“ä¸‹æ ‡] #é€‰æ‹©æ•°æ®åº“ï¼Œæ•°æ®åº“ä¸º0--15ï¼ˆ16ä¸ªï¼‰ï¼Œé»˜è®¤è¿›å…¥ç¬¬0ä¸ª$ move [key] [æ•°æ®åº“ä¸‹æ ‡] #å°†å½“å‰æ•°æ®åº“çš„keyç§»åŠ¨åˆ°å…¶ä»–æ•°æ®åº“$ info #æŸ¥çœ‹redisä¿¡æ¯$ flushdb #æ¸…ç©ºå½“å‰æ•°æ®åº“çš„key$ flushall #æ¸…ç©ºæ‰€æœ‰æ•°æ®åº“çš„key$ dbsize #æŸ¥çœ‹å½“å‰æ•°æ®åº“keyçš„æ•°é‡æ¡ˆä¾‹ï¼ˆ1ï¼‰åˆ‡æ¢åˆ°ä¸‹æ ‡ä¸ºæŸä¸ªæ•°å­—çš„æ•°æ®åº“12127.0.0.1:6379&gt; select 1OKï¼ˆ2ï¼‰æ¸…ç©ºå½“å‰æ•°æ®åº“çš„key12345127.0.0.1:6379&gt; flushdbOK127.0.0.1:6379&gt; keys *(empty list or set)127.0.0.1:6379&gt;å…³é”®å­—å¯å¤§å°å†™æ›´å¤šå‘½ä»¤è¯·å‚è€ƒï¼šhttps://redis.io/commandsâ€‹Â¶ä¸‰ã€éƒ¨ç½²æ–¹æ¡ˆä¸ºäº†å®žçŽ°Redisçš„é«˜å¹¶å‘é«˜å¯ç”¨åº”ç”¨ï¼ŒRedisæ”¯æŒå•æœºã€ä¸»ä»Žã€å“¨å…µã€é›†ç¾¤å¤šç§æž¶æž„æ¨¡å¼éƒ¨ç½²æ–¹æ¡ˆã€‚Â¶å•æœºæ¨¡å¼Â¶æ¦‚å¿µå•æœºæ¨¡å¼é¡¾åæ€ä¹‰å°±æ˜¯å®‰è£…ä¸€ä¸ª Redisï¼Œå¯åŠ¨èµ·æ¥ï¼Œä¸šåŠ¡è°ƒç”¨å³å¯ã€‚ä¾‹å¦‚ä¸€äº›ç®€å•çš„åº”ç”¨ï¼Œå¹¶éžå¿…é¡»ä¿è¯é«˜å¯ç”¨çš„æƒ…å†µä¸‹å¯ä»¥ä½¿ç”¨è¯¥æ¨¡å¼ã€‚Â¶ä¼˜ç¼ºç‚¹ä¼˜ç‚¹éƒ¨ç½²ç®€å•ï¼›æˆæœ¬ä½Žï¼Œæ— å¤‡ç”¨èŠ‚ç‚¹ï¼›é«˜æ€§èƒ½ï¼Œå•æœºä¸éœ€è¦åŒæ­¥æ•°æ®ï¼Œæ•°æ®å¤©ç„¶ä¸€è‡´æ€§ã€‚ç¼ºç‚¹å¯é æ€§ä¿è¯ä¸æ˜¯å¾ˆå¥½ï¼Œå•èŠ‚ç‚¹æœ‰å®•æœºçš„é£Žé™©ã€‚å•æœºé«˜æ€§èƒ½å—é™äºŽ CPU çš„å¤„ç†èƒ½åŠ›ï¼ŒRedis æ˜¯å•çº¿ç¨‹çš„ã€‚å•æœº Redis èƒ½å¤Ÿæ‰¿è½½çš„ QPSï¼ˆæ¯ç§’æŸ¥è¯¢é€ŸçŽ‡ï¼‰å¤§æ¦‚åœ¨å‡ ä¸‡å·¦å³ã€‚å–å†³äºŽä¸šåŠ¡æ“ä½œçš„å¤æ‚æ€§ï¼ŒLua è„šæœ¬å¤æ‚æ€§å°±æžé«˜ã€‚å‡å¦‚æ˜¯ç®€å•çš„ key value æŸ¥è¯¢é‚£æ€§èƒ½å°±ä¼šå¾ˆé«˜ã€‚å‡è®¾ä¸Šåƒä¸‡ã€ä¸Šäº¿ç”¨æˆ·åŒæ—¶è®¿é—® Redisï¼ŒQPS è¾¾åˆ° 10 ä¸‡+ã€‚è¿™äº›è¯·æ±‚è¿‡æ¥ï¼Œå•æœº Redis ç›´æŽ¥å°±æŒ‚äº†ã€‚ç³»ç»Ÿçš„ç“¶é¢ˆå°±å‡ºçŽ°åœ¨ Redis å•æœºé—®é¢˜ä¸Šï¼Œæ­¤æ—¶æˆ‘ä»¬å¯ä»¥é€šè¿‡ä¸»ä»Žå¤åˆ¶è§£å†³è¯¥é—®é¢˜ï¼Œå®žçŽ°ç³»ç»Ÿçš„é«˜å¹¶å‘ã€‚Â¶å®‰è£…éƒ¨ç½²Â¶1. windowç‰ˆå®‰è£…æ­¥éª¤å¤§è‡´å¦‚ä¸‹ï¼šï¼ˆ1ï¼‰ä¸‹è½½ä¸‹è½½åœ°å€ï¼šhttps://github.com/microsoftarchive/redis/releasesæ¯”å¦‚ä¸‹è½½ Redis-x64-3.0.504.zipï¼ˆ2ï¼‰å¯åŠ¨å’Œå…³é—­è§£åŽ‹åˆ°ä»»æ„ç›®å½•åŽï¼Œç‚¹å‡»å®‰è£…ç›®å½•é‡Œçš„redis-server.exeå³å¯å¯åŠ¨ï¼Œå…³é—­redis-server.exeå¯åŠ¨çš„çª—å£å³å¯å…³é—­ã€‚ï¼ˆ3ï¼‰å¼€å¯åŽå°å®ˆæŠ¤è¿›ç¨‹cmdè¿›å…¥å®‰è£…ç›®å½•å¹¶æ‰§è¡Œä»¥ä¸‹å‘½ä»¤å³å¯å®‰è£…æˆç³»ç»Ÿå®ˆæŠ¤è¿›ç¨‹æœåŠ¡ã€‚ï¼ˆå½“ç„¶ä½ å¯ä»¥å°†å®‰è£…ç›®å½•æ”¾åˆ°çŽ¯å¢ƒå˜é‡ä¸­ï¼Œå°±å¯ä»¥åœ¨ä»»æ„ç›®å½•æ‰§è¡Œrediså‘½ä»¤äº†ï¼Œè¿™é‡Œä¸ºäº†ç®€ä¾¿å°±ä¸åšæ­¤æ“ä½œäº†ï¼‰1redis-server --service-install redis.windows-service.conf --loglevel verboseï¼ˆ4ï¼‰å¯åŠ¨å’Œå…³é—­å®ˆæŠ¤è¿›ç¨‹æœåŠ¡1234#å¯åŠ¨(å¦‚æžœå¯åŠ¨å¤±è´¥ï¼Œåœ¨å®‰è£…ç›®å½•é‡Œåˆ›å»ºä¸€ä¸ªåç§°ä¸ºLogsçš„æ–‡ä»¶å¤¹å³å¯)redis-server --service-start#å…³é—­redis-server --service-stopï¼ˆ4ï¼‰å¸è½½å¦‚æžœæ²¡æœ‰å¼€å¯å®ˆæŠ¤è¿›ç¨‹æœåŠ¡ï¼Œé‚£ä¹ˆç›´æŽ¥åˆ é™¤å®‰è£…ç›®å½•å³å¯å¸è½½ã€‚å¦‚æžœå¼€å¯å®ˆæŠ¤è¿›ç¨‹æœåŠ¡ï¼Œé‚£ä¹ˆå¯åœ¨å®‰è£…ç›®å½•é‡Œé€šè¿‡æ‰§è¡Œä»¥ä¸‹å‘½ä»¤æ¥å¸è½½å®ˆæŠ¤è¿›ç¨‹æœåŠ¡ï¼Œæ‰§è¡Œè¯¥å‘½ä»¤åŽåˆ é™¤å®‰è£…ç›®å½•å³å¯å®Œå…¨å¸è½½ã€‚1redis-server --service-uninstallæ›´å¤šå†…å®¹å¯å‚è€ƒèœé¸Ÿæ•™ç¨‹ã€‚Â¶2. Linuxç‰ˆå®‰è£…è¿™é‡Œä¸»è¦è®²linuxä¸‹ç¼–è¯‘å®‰è£…ã€‚ï¼ˆ1ï¼‰ä¸‹è½½ä¸‹è½½åœ°å€ï¼š https://redis.io/download ï¼Œè¿™é‡Œä½¿ç”¨çš„æ˜¯3.0ç‰ˆæœ¬ã€‚12#ä¸‹è½½redis-3.0.0$ wget http://download.redis.io/releases/redis-3.0.0.tar.gzï¼ˆ2ï¼‰å®‰è£…12345#è§£åŽ‹åˆ°/usr/local/$ tar -zxvf redis-3.0.0.tar.gz -C /usr/local/# è¿›å…¥åˆ°è§£åŽ‹çš„æ–‡ä»¶ä¸­å¹¶æ‰§è¡Œmakeè¿›è¡Œç¼–è¯‘$ cd /usr/local/redis-3.0.0$ makeçœ‹åˆ°ç±»ä¼¼â€œHint: It's a good idea to run 'make test' ;)â€è¿™æ ·çš„æç¤ºè¡¨ç¤ºç¼–è¯‘å®Œæˆã€‚make åŽç¼–è¯‘å¥½çš„æ–‡ä»¶ä¼šä¿å­˜åˆ°srcç›®å½•ä¸‹ã€‚è¿™äº›æ–‡ä»¶ä¸­æœ‰ä¸¤ä¸ªé‡è¦çš„æ–‡ä»¶ï¼šredis-server æœåŠ¡ç«¯ç¨‹åºredis-cli å®¢æˆ·ç«¯ç¨‹åºå…¶å®žè¿™ä¸ªæ—¶å€™æˆ‘ä»¬å·²ç»å¯ä»¥æ‰§è¡Œredis-serverå’Œredis-cli ç›´æŽ¥ä½¿ç”¨äº†ï¼Œä½†ä¸ºäº†æ›´å¥½çš„ç®¡ç†ç¨‹åºï¼Œæˆ‘ä»¬å¯ä»¥å°†è¿™äº›ç¼–è¯‘å¥½çš„æ–‡ä»¶å’Œé…ç½®æ–‡ä»¶ç§»åŠ¨åˆ°å…¶ä»–ç›®å½•åŽ»ã€‚å¦‚/usr/local/redis/bin/å’Œ/usr/local/redis/etc/ã€‚12345678910111213141516171819#åˆ›å»ºä¸¤ä¸ªç›®å½•ç”¨æ¥å­˜æ”¾redisé…ç½®æ–‡ä»¶å’Œç¼–è¯‘å¥½çš„æ–‡ä»¶$ mkdir -p /usr/local/redis/bin/$ mkdir -p /usr/local/redis/etc/#è¿›å…¥ç¼–è¯‘ç›®å½•$ cd /usr/local/redis-3.0.0/src#copyç¼–è¯‘å¥½çš„å¯æ‰§è¡Œæ–‡ä»¶åˆ°/usr/local/redis/bin/,æ³¨æ„ä¸‹é¢ä»Žâ€œcp /usr/..â€ç›´åˆ°â€œ/usr/local/redis/bin/â€æ˜¯ä¸€æ¡å®Œæ•´çš„å‘½ä»¤ã€‚$ cp /usr/local/redis-3.0.0/src/mkreleasehdr.sh \redis-benchmark \redis-check-aof \redis-check-dump \redis-cli \redis-server \redis-sentinel \redis-trib.rb \/usr/local/redis/bin/#copy redisé…ç½®æ–‡ä»¶åˆ°/usr/local/redis/etc/$ cp /usr/local/redis-3.0.0/redis.conf /usr/local/redis/etc/ï¼ˆ3ï¼‰å¸è½½ç›´æŽ¥åˆ é™¤/usr/local/redis-3.0.0ã€/usr/local/redis/bin/å’Œ/usr/local/redis/etc/ç›®å½•å³å¯å®Œæˆå¸è½½ã€‚ï¼ˆ4ï¼‰å¯åŠ¨æœåŠ¡ç«¯12#redis-server + redisé…ç½®æ–‡ä»¶ ä¸€èµ·å¯åŠ¨æœåŠ¡$ /usr/local/redis/bin/redis-server /usr/local/redis/etc/redis.confå¯ä»¥é€šè¿‡æ‰“å¼€å¦ä¸€ä¸ªç»ˆç«¯æ‰§è¡Œps -ef | grep redis æˆ–è€… ps -ef | grep 6379æŸ¥çœ‹redisçº¿ç¨‹ã€‚å¯ä»¥æŒ‰Ctrl+Cä¸­æ–­åœæ­¢æœåŠ¡ç«¯å¯åŠ¨ã€‚ï¼ˆ5ï¼‰é…ç½®æœåŠ¡ç«¯é»˜è®¤å¼€å¯redis-serveréœ€è¦ä¿æŒå½“å‰ç»ˆç«¯å¼€å¯æ‰èƒ½ä½¿ç”¨ï¼Œå¦‚æžœå…³é—­å½“å‰ç»ˆç«¯æˆ–è€…ä¸­æ–­è¿›ç¨‹äº†é‚£ä¹ˆæœåŠ¡å°±å…³é—­äº†ï¼Œå¦‚æžœå¸Œæœ›åŽå°å¯å®ˆæŠ¤è¿›ç¨‹ï¼Œæˆ‘ä»¬å¯ä»¥ä¿®æ”¹redisçš„é…ç½®æ–‡ä»¶ï¼Œä¿®æ”¹daemonizeçš„å€¼ä¸ºyesæ¥å®žçŽ°ã€‚123$ vim /usr/local/redis/etc/redis.conf#é»˜è®¤daemonizeä¸ºnoï¼Œä¿®æ”¹ä¸ºyesè¡¨ç¤ºå¼€å¯å®ˆæŠ¤è¿›ç¨‹daemonize yesæ³¨æ„é‡å¯redis-serveråŽæ‰èƒ½ç”Ÿæ•ˆä»¥ä¸‹æ˜¯å…¶ä»–é…ç½®,ä½†å­¦ä¹ çš„è¯å¹¶ä¸å»ºè®®12345port 6379 #é»˜è®¤ç«¯å£ï¼Œå¯ä»¥ä¿®æ”¹timeout 0 #å®¢æˆ·ç«¯ç©ºé—²Nç§’åŽå…³é—­è¿žæŽ¥#dir ./ #æŒ‡å®šå·¥ä½œç›®å½•ï¼Œæ—¥å¿—æ–‡ä»¶å’Œæ•°æ®æ–‡ä»¶ç­‰å­˜æ”¾è·¯å¾„dir /usr/local/redis/etc/ï¼ˆ6ï¼‰å¯åŠ¨æœåŠ¡ç«¯å®ˆæŠ¤è¿›ç¨‹1$ /usr/local/redis/bin/redis-server /usr/local/redis/etc/redis.confï¼ˆ7ï¼‰å…³é—­æœåŠ¡ç«¯å®ˆæŠ¤è¿›ç¨‹1$ /usr/local/redis/bin/redis-cli shutdownï¼ˆ8ï¼‰å®¢æˆ·ç«¯ä½¿ç”¨1ï¼‰å¯åŠ¨å®¢æˆ·ç«¯1$ /usr/local/redis/bin/redis-cli2ï¼‰å…³é—­å®¢æˆ·ç«¯æŒ‰Ctrl+Cå°±èƒ½åœæ­¢å®¢æˆ·ç«¯å¯åŠ¨Â¶3. dockerç‰ˆå®‰è£…å¯å‚è€ƒï¼šã€ŠDockerå­¦ä¹ ç¬”è®°ã€‹Â¶ä¸»ä»Žå¤åˆ¶Â¶æ¦‚å¿µRedis çš„å¤åˆ¶ï¼ˆReplicationï¼‰åŠŸèƒ½å…è®¸ç”¨æˆ·æ ¹æ®ä¸€ä¸ª Redis æœåŠ¡å™¨æ¥åˆ›å»ºä»»æ„å¤šä¸ªè¯¥æœåŠ¡å™¨çš„å¤åˆ¶å“ï¼Œå…¶ä¸­è¢«å¤åˆ¶çš„æœåŠ¡å™¨ä¸ºä¸»æœåŠ¡å™¨ï¼ˆMasterï¼‰ï¼Œè€Œé€šè¿‡å¤åˆ¶åˆ›å»ºå‡ºæ¥çš„å¤åˆ¶å“åˆ™ä¸ºä»ŽæœåŠ¡å™¨ï¼ˆSlaveï¼‰ã€‚ åªè¦ä¸»ä»ŽæœåŠ¡å™¨ä¹‹é—´çš„ç½‘ç»œè¿žæŽ¥æ­£å¸¸ï¼Œä¸»æœåŠ¡å™¨å°±ä¼šå°†å†™å…¥è‡ªå·±çš„æ•°æ®åŒæ­¥æ›´æ–°ç»™ä»ŽæœåŠ¡å™¨ï¼Œä»Žè€Œä¿è¯ä¸»ä»ŽæœåŠ¡å™¨çš„æ•°æ®ç›¸åŒã€‚æ•°æ®çš„å¤åˆ¶æ˜¯å•å‘çš„ï¼Œåªèƒ½ç”±ä¸»èŠ‚ç‚¹åˆ°ä»ŽèŠ‚ç‚¹ï¼Œç®€å•ç†è§£å°±æ˜¯ä»ŽèŠ‚ç‚¹åªæ”¯æŒè¯»æ“ä½œï¼Œä¸å…è®¸å†™æ“ä½œã€‚ä¸»è¦æ˜¯è¯»é«˜å¹¶å‘çš„åœºæ™¯ä¸‹ç”¨ä¸»ä»Žæž¶æž„ã€‚ä¸»ä»Žæ¨¡å¼éœ€è¦è€ƒè™‘çš„é—®é¢˜æ˜¯ï¼šå½“ Master èŠ‚ç‚¹å®•æœºï¼Œéœ€è¦é€‰ä¸¾äº§ç”Ÿä¸€ä¸ªæ–°çš„ Master èŠ‚ç‚¹ï¼Œä»Žè€Œä¿è¯æœåŠ¡çš„é«˜å¯ç”¨æ€§ã€‚Â¶ä¼˜ç¼ºç‚¹ä¼˜ç‚¹Master/Slave è§’è‰²æ–¹ä¾¿æ°´å¹³æ‰©å±•ï¼ŒQPS å¢žåŠ ï¼Œå¢žåŠ  Slave å³å¯ï¼›é™ä½Ž Master è¯»åŽ‹åŠ›ï¼Œè½¬äº¤ç»™ Slave èŠ‚ç‚¹ï¼›ä¸»èŠ‚ç‚¹å®•æœºï¼Œä»ŽèŠ‚ç‚¹ä½œä¸ºä¸»èŠ‚ç‚¹çš„å¤‡ä»½å¯ä»¥éšæ—¶é¡¶ä¸Šç»§ç»­æä¾›æœåŠ¡ï¼›ç¼ºç‚¹å¯é æ€§ä¿è¯ä¸æ˜¯å¾ˆå¥½ï¼Œä¸»èŠ‚ç‚¹æ•…éšœä¾¿æ— æ³•æä¾›å†™å…¥æœåŠ¡ï¼›æ²¡æœ‰è§£å†³ä¸»èŠ‚ç‚¹å†™çš„åŽ‹åŠ›ï¼›æ•°æ®å†—ä½™ï¼ˆä¸ºäº†é«˜å¹¶å‘ã€é«˜å¯ç”¨å’Œé«˜æ€§èƒ½ï¼Œä¸€èˆ¬æ˜¯å…è®¸æœ‰å†—ä½™å­˜åœ¨çš„ï¼‰ï¼›ä¸€æ—¦ä¸»èŠ‚ç‚¹å®•æœºï¼Œä»ŽèŠ‚ç‚¹æ™‹å‡æˆä¸»èŠ‚ç‚¹ï¼Œéœ€è¦ä¿®æ”¹åº”ç”¨æ–¹çš„ä¸»èŠ‚ç‚¹åœ°å€ï¼Œè¿˜éœ€è¦å‘½ä»¤æ‰€æœ‰ä»ŽèŠ‚ç‚¹åŽ»å¤åˆ¶æ–°çš„ä¸»èŠ‚ç‚¹ï¼Œæ•´ä¸ªè¿‡ç¨‹éœ€è¦äººå·¥å¹²é¢„ï¼›ä¸»èŠ‚ç‚¹çš„å†™èƒ½åŠ›å—åˆ°å•æœºçš„é™åˆ¶ï¼›ä¸»èŠ‚ç‚¹çš„å­˜å‚¨èƒ½åŠ›å—åˆ°å•æœºçš„é™åˆ¶ã€‚Â¶å®‰è£…éƒ¨ç½²è¿™é‡Œéƒ¨ç½²èŠ‚ç‚¹æž¶æž„ä¸ºï¼š1ä¸»2ä»Žã€‚å› ä¸ºè¿™é‡Œåªæ˜¯å­¦ä¹ ä½¿ç”¨æ‰€ä»¥å°±éƒ½æ­å»ºåœ¨åŒä¸€å°æœåŠ¡å™¨ä¸Šäº†ï¼ˆå³æ‰€è°“ä¸ºé›†ç¾¤ï¼‰ï¼Œå¦‚æžœè¦åœ¨ç”Ÿäº§ä¸Šä½¿ç”¨åˆ™åº”è¯¥æ¯ä¸ªredisèŠ‚ç‚¹éƒ½åº”è¯¥æ˜¯ä¸€å°æœåŠ¡å™¨ã€‚ä¸ºäº†ç®€åŒ–éƒ¨ç½²è¿‡ç¨‹ï¼Œè¿™é‡Œé€šè¿‡ä½¿ç”¨redisé…ç½®æ¨¡æ¿æ–‡ä»¶å’Œdocker composeæ¥ç®€åŒ–æ­å»ºè¿‡ç¨‹ã€‚Â¶redisé…ç½®åˆ›å»ºé…ç½®æ¨¡æ¿æ–‡ä»¶12345678910111213141516171819202122232425262728293031323334353637383940mkdir -p /opt/redis/conf##åˆ›å»ºä¸»èŠ‚ç‚¹é…ç½®æ–‡ä»¶æ¨¡æ¿cat &gt; /opt/redis/conf/redis-master.tmpl &lt;&lt; 'EOF'#èŠ‚ç‚¹ç«¯å£6379ã€6380ã€6381port $&#123;PORT&#125;#è®¿é—®è®¤è¯å¯†ç requirepass $&#123;requirepass&#125;#å¦‚æžœä¸»èŠ‚ç‚¹å¼€å¯äº†è®¿é—®è®¤è¯ï¼Œä»ŽèŠ‚ç‚¹è®¿é—®ä¸»èŠ‚ç‚¹éœ€è¦è®¤è¯çš„å¯†ç masterauth $&#123;masterauth&#125;#ä¿æŠ¤æ¨¡å¼ï¼Œé»˜è®¤å€¼ yesï¼Œå³å¼€å¯ã€‚å¼€å¯ä¿æŠ¤æ¨¡å¼ä»¥åŽï¼Œéœ€é…ç½® bind ip æˆ–è€…è®¾ç½®è®¿é—®å¯†ç ï¼›å…³é—­ä¿æŠ¤æ¨¡å¼ï¼Œå¤–éƒ¨ç½‘ç»œå¯ä»¥ç›´æŽ¥è®¿é—®ï¼›protected-mode no#æ˜¯å¦ä»¥å®ˆæŠ¤çº¿ç¨‹çš„æ–¹å¼å¯åŠ¨ï¼ˆåŽå°å¯åŠ¨ï¼‰ï¼Œé»˜è®¤ noï¼›daemonize no#æ˜¯å¦å¼€å¯ AOF æŒä¹…åŒ–æ¨¡å¼ï¼Œé»˜è®¤ noï¼›appendonly yes#æ˜¯å¦å¼€å¯é›†ç¾¤æ¨¡å¼ï¼Œé»˜è®¤ noï¼›cluster-enabled noEOF##åˆ›å»ºä»ŽèŠ‚ç‚¹é…ç½®æ–‡ä»¶æ¨¡æ¿cat &gt; /opt/redis/conf/redis-slave.tmpl &lt;&lt; 'EOF'#èŠ‚ç‚¹ç«¯å£6379ã€6380ã€6381port $&#123;PORT&#125;#è®¿é—®è®¤è¯å¯†ç requirepass $&#123;requirepass&#125;#å¦‚æžœä¸»èŠ‚ç‚¹å¼€å¯äº†è®¿é—®è®¤è¯ï¼Œä»ŽèŠ‚ç‚¹è®¿é—®ä¸»èŠ‚ç‚¹éœ€è¦è®¤è¯çš„å¯†ç masterauth $&#123;masterauth&#125;#ä¿æŠ¤æ¨¡å¼ï¼Œé»˜è®¤å€¼ yesï¼Œå³å¼€å¯ã€‚å¼€å¯ä¿æŠ¤æ¨¡å¼ä»¥åŽï¼Œéœ€é…ç½® bind ip æˆ–è€…è®¾ç½®è®¿é—®å¯†ç ï¼›å…³é—­ä¿æŠ¤æ¨¡å¼ï¼Œå¤–éƒ¨ç½‘ç»œå¯ä»¥ç›´æŽ¥è®¿é—®ï¼›protected-mode no#æ˜¯å¦ä»¥å®ˆæŠ¤çº¿ç¨‹çš„æ–¹å¼å¯åŠ¨ï¼ˆåŽå°å¯åŠ¨ï¼‰ï¼Œé»˜è®¤ noï¼›daemonize no#æ˜¯å¦å¼€å¯ AOF æŒä¹…åŒ–æ¨¡å¼ï¼Œé»˜è®¤ noï¼›appendonly yes#æ˜¯å¦å¼€å¯é›†ç¾¤æ¨¡å¼ï¼Œé»˜è®¤ noï¼›cluster-enabled no#ç»™å½“å‰ä»ŽèŠ‚ç‚¹æŒ‡å®šä¸»èŠ‚ç‚¹çš„ipå’Œç«¯å£slaveof $&#123;masterIp&#125; $&#123;masterPort&#125;EOFé€šè¿‡æ¨¡æ¿æ–‡ä»¶åŠ¨æ€ç”Ÿæˆæ‰€æœ‰èŠ‚ç‚¹çš„é…ç½®æ–‡ä»¶12345678910111213141516171819202122232425262728#ä¸»ä»ŽèŠ‚ç‚¹çš„å¯†ç requirepass=123456#ä»ŽèŠ‚ç‚¹è®¿é—®ä¸»èŠ‚ç‚¹éœ€è¦è®¤è¯çš„å¯†ç masterauth=123456#ä¸»èŠ‚ç‚¹ipmasterIp=192.168.60.200#ä¸»èŠ‚ç‚¹ç«¯å£masterPort=6379#ä»ŽèŠ‚ç‚¹çš„æ‰€æœ‰ç«¯å£masterPorts="6380 6381"##ç”Ÿæˆä¸»èŠ‚ç‚¹çš„é…ç½®æ–‡ä»¶PORT=$&#123;masterPort&#125; \requirepass=$requirepass \masterauth=$masterauth \envsubst &lt; /opt/redis/conf/redis-master.tmpl &gt; /opt/redis/conf/redis-master.conf#ç”Ÿæˆä»ŽèŠ‚ç‚¹çš„é…ç½®æ–‡ä»¶count=1for port in $masterPorts; do masterIp=$masterIp \ masterPort=$masterPort \ PORT=$&#123;port&#125; \ requirepass=$requirepass \ masterauth=$masterauth \ envsubst &lt; /opt/redis/conf/redis-slave.tmpl &gt; /opt/redis/conf/redis-slave-$&#123;count&#125;.conf let count++doneÂ¶dockeré…ç½®12mkdir -p /opt/redisvi /opt/redis/docker-compose.yml12345678910111213141516171819202122232425262728293031323334version: '3'services: master: image: redis container_name: redis-master restart: always command: redis-server /etc/redis/redis.conf #å®¹å™¨å¯åŠ¨æ—¶æ‰§è¡Œçš„å‘½ä»¤ï¼Œä»¥ä¸‹æ˜¯redis-serverå¯åŠ¨æ—¶æŒ‡å®šé…ç½®æ–‡ä»¶ï¼ŒåŽé¢å¯åŠ å‚æ•°å¦‚"--port 6379 --appendonly yes"ç­‰å‚æ•°è¦†ç›–é…ç½®æ–‡ä»¶é‡Œçš„ä¸€äº›é…ç½® #command: redis-server /etc/redis/redis.conf --port 6379 --appendonly yes ports: - 6379:6379 volumes: - /opt/redis/conf/redis-master.conf:/etc/redis/redis.conf - /opt/redis/data/redis-master:/data slave1: image: redis container_name: redis-slave-1 restart: always command: redis-server /etc/redis/redis.conf ports: - 6380:6380 volumes: - /opt/redis/conf/redis-slave-1.conf:/etc/redis/redis.conf - /opt/redis/data/redis-slave-1:/data slave2: image: redis container_name: redis-slave-2 restart: always command: redis-server /etc/redis/redis.conf ports: - 6381:6381 volumes: - /opt/redis/conf/redis-slave-2.conf:/etc/redis/redis.conf - /opt/redis/data/redis-slave-2:/data12#åˆ›å»ºå¹¶å¯åŠ¨æ‰€æœ‰æœåŠ¡å®¹å™¨docker-compose up -dÂ¶å“¨å…µæ¨¡å¼Â¶æ¦‚å¿µä¸»ä»Žæ¨¡å¼ä¸­ï¼Œå½“ä¸»èŠ‚ç‚¹å®•æœºä¹‹åŽï¼Œä»ŽèŠ‚ç‚¹æ˜¯å¯ä»¥ä½œä¸ºä¸»èŠ‚ç‚¹é¡¶ä¸Šæ¥ç»§ç»­æä¾›æœåŠ¡ï¼Œä½†æ˜¯éœ€è¦ä¿®æ”¹åº”ç”¨æ–¹çš„ä¸»èŠ‚ç‚¹åœ°å€ï¼Œè¿˜éœ€è¦å‘½ä»¤æ‰€æœ‰ä»ŽèŠ‚ç‚¹åŽ»å¤åˆ¶æ–°çš„ä¸»èŠ‚ç‚¹ï¼Œæ•´ä¸ªè¿‡ç¨‹éœ€è¦äººå·¥å¹²é¢„ã€‚äºŽæ˜¯ï¼Œåœ¨ Redis 2.8 ç‰ˆæœ¬å¼€å§‹ï¼Œå¼•å…¥äº†å“¨å…µï¼ˆSentinelï¼‰è¿™ä¸ªæ¦‚å¿µï¼Œåœ¨ä¸»ä»Žå¤åˆ¶çš„åŸºç¡€ä¸Šï¼Œå“¨å…µå®žçŽ°äº†è‡ªåŠ¨åŒ–æ•…éšœæ¢å¤ã€‚å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œå“¨å…µæ¨¡å¼ç”±ä¸¤éƒ¨åˆ†ç»„æˆï¼Œå“¨å…µèŠ‚ç‚¹å’Œæ•°æ®èŠ‚ç‚¹ï¼šå“¨å…µèŠ‚ç‚¹ï¼šå“¨å…µèŠ‚ç‚¹æ˜¯ç‰¹æ®Šçš„ Redis èŠ‚ç‚¹ï¼Œä¸å­˜å‚¨æ•°æ®ï¼›æ•°æ®èŠ‚ç‚¹ï¼šä¸»èŠ‚ç‚¹å’Œä»ŽèŠ‚ç‚¹éƒ½æ˜¯æ•°æ®èŠ‚ç‚¹ã€‚Redis Sentinel æ˜¯åˆ†å¸ƒå¼ç³»ç»Ÿä¸­ç›‘æŽ§ Redis ä¸»ä»ŽæœåŠ¡å™¨ï¼Œå¹¶æä¾›ä¸»æœåŠ¡å™¨ä¸‹çº¿æ—¶è‡ªåŠ¨æ•…éšœè½¬ç§»åŠŸèƒ½çš„æ¨¡å¼ã€‚å…¶ä¸­ä¸‰ä¸ªç‰¹æ€§ä¸ºï¼šç›‘æŽ§(Monitoring)ï¼šSentinel ä¼šä¸æ–­åœ°æ£€æŸ¥ä½ çš„ä¸»æœåŠ¡å™¨å’Œä»ŽæœåŠ¡å™¨æ˜¯å¦è¿ä½œæ­£å¸¸ï¼›æé†’(Notification)ï¼šå½“è¢«ç›‘æŽ§çš„æŸä¸ª Redis æœåŠ¡å™¨å‡ºçŽ°é—®é¢˜æ—¶ï¼Œ Sentinel å¯ä»¥é€šè¿‡ API å‘ç®¡ç†å‘˜æˆ–è€…å…¶ä»–åº”ç”¨ç¨‹åºå‘é€é€šçŸ¥ï¼›è‡ªåŠ¨æ•…éšœè¿ç§»(Automatic failover)ï¼šå½“ä¸€ä¸ªä¸»æœåŠ¡å™¨ä¸èƒ½æ­£å¸¸å·¥ä½œæ—¶ï¼Œ Sentinel ä¼šå¼€å§‹ä¸€æ¬¡è‡ªåŠ¨æ•…éšœè¿ç§»æ“ä½œã€‚Â¶ä¼˜ç¼ºç‚¹ä¼˜ç‚¹å“¨å…µæ¨¡å¼æ˜¯åŸºäºŽä¸»ä»Žæ¨¡å¼çš„ï¼Œæ‰€æœ‰ä¸»ä»Žçš„ä¼˜ç‚¹ï¼Œå“¨å…µæ¨¡å¼éƒ½æœ‰ï¼›ä¸»ä»Žå¯ä»¥è‡ªåŠ¨åˆ‡æ¢ï¼Œç³»ç»Ÿæ›´å¥å£®ï¼Œå¯ç”¨æ€§æ›´é«˜ï¼›Sentinel ä¼šä¸æ–­åœ°æ£€æŸ¥ä½ çš„ä¸»æœåŠ¡å™¨å’Œä»ŽæœåŠ¡å™¨æ˜¯å¦è¿ä½œæ­£å¸¸ã€‚å½“è¢«ç›‘æŽ§çš„æŸä¸ª Redis æœåŠ¡å™¨å‡ºçŽ°é—®é¢˜æ—¶ï¼Œ Sentinel å¯ä»¥é€šè¿‡ API å‘ç®¡ç†å‘˜æˆ–è€…å…¶ä»–åº”ç”¨ç¨‹åºå‘é€é€šçŸ¥ã€‚ç¼ºç‚¹ä¸»ä»Žåˆ‡æ¢éœ€è¦æ—¶é—´ï¼Œä¼šä¸¢å¤±æ•°æ®ï¼›è¿˜æ˜¯æ²¡æœ‰è§£å†³ä¸»èŠ‚ç‚¹å†™çš„åŽ‹åŠ›ï¼›ä¸»èŠ‚ç‚¹çš„å†™èƒ½åŠ›ï¼Œå­˜å‚¨èƒ½åŠ›å—åˆ°å•æœºçš„é™åˆ¶ï¼›åŠ¨æ€æ‰©å®¹å›°éš¾å¤æ‚ï¼Œå¯¹äºŽé›†ç¾¤ï¼Œå®¹é‡è¾¾åˆ°ä¸Šé™æ—¶åœ¨çº¿æ‰©å®¹ä¼šå˜å¾—å¾ˆå¤æ‚ã€‚Â¶å®‰è£…éƒ¨ç½²è¿™é‡Œéƒ¨ç½²èŠ‚ç‚¹æž¶æž„ä¸ºï¼š1ä¸»2ä»Ž3å“¨å…µã€‚å› ä¸ºè¿™é‡Œåªæ˜¯å­¦ä¹ ä½¿ç”¨æ‰€ä»¥å°±éƒ½æ­å»ºåœ¨åŒä¸€å°æœåŠ¡å™¨ä¸Šäº†ï¼ˆå³æ‰€è°“ä¸ºé›†ç¾¤ï¼‰ï¼Œå¦‚æžœè¦åœ¨ç”Ÿäº§ä¸Šä½¿ç”¨åˆ™åº”è¯¥æ¯ä¸ªredisèŠ‚ç‚¹éƒ½åº”è¯¥æ˜¯ä¸€å°æœåŠ¡å™¨ã€‚ä¸ºäº†ç®€åŒ–éƒ¨ç½²è¿‡ç¨‹ï¼Œè¿™é‡Œé€šè¿‡ä½¿ç”¨redisé…ç½®æ¨¡æ¿æ–‡ä»¶å’Œdocker composeæ¥ç®€åŒ–æ­å»ºè¿‡ç¨‹ã€‚Â¶redisé…ç½®åˆ›å»ºé…ç½®æ¨¡æ¿æ–‡ä»¶12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667mkdir -p /opt/redis/conf##åˆ›å»ºä¸»èŠ‚ç‚¹é…ç½®æ–‡ä»¶æ¨¡æ¿cat &gt; /opt/redis/conf/redis-master.tmpl &lt;&lt; 'EOF'#èŠ‚ç‚¹ç«¯å£6379ã€6380ã€6381port $&#123;PORT&#125;#è®¿é—®è®¤è¯å¯†ç requirepass $&#123;requirepass&#125;#å¦‚æžœä¸»èŠ‚ç‚¹å¼€å¯äº†è®¿é—®è®¤è¯ï¼Œä»ŽèŠ‚ç‚¹è®¿é—®ä¸»èŠ‚ç‚¹éœ€è¦è®¤è¯çš„å¯†ç masterauth $&#123;masterauth&#125;#ä¿æŠ¤æ¨¡å¼ï¼Œé»˜è®¤å€¼ yesï¼Œå³å¼€å¯ã€‚å¼€å¯ä¿æŠ¤æ¨¡å¼ä»¥åŽï¼Œéœ€é…ç½® bind ip æˆ–è€…è®¾ç½®è®¿é—®å¯†ç ï¼›å…³é—­ä¿æŠ¤æ¨¡å¼ï¼Œå¤–éƒ¨ç½‘ç»œå¯ä»¥ç›´æŽ¥è®¿é—®ï¼›protected-mode no#æ˜¯å¦ä»¥å®ˆæŠ¤çº¿ç¨‹çš„æ–¹å¼å¯åŠ¨ï¼ˆåŽå°å¯åŠ¨ï¼‰ï¼Œé»˜è®¤ noï¼›daemonize no#æ˜¯å¦å¼€å¯ AOF æŒä¹…åŒ–æ¨¡å¼ï¼Œé»˜è®¤ noï¼›appendonly yes#æ˜¯å¦å¼€å¯é›†ç¾¤æ¨¡å¼ï¼Œé»˜è®¤ noï¼›cluster-enabled noEOF##åˆ›å»ºä»ŽèŠ‚ç‚¹é…ç½®æ–‡ä»¶æ¨¡æ¿cat &gt; /opt/redis/conf/redis-slave.tmpl &lt;&lt; 'EOF'#èŠ‚ç‚¹ç«¯å£6379ã€6380ã€6381port $&#123;PORT&#125;#è®¿é—®è®¤è¯å¯†ç requirepass $&#123;requirepass&#125;#å¦‚æžœä¸»èŠ‚ç‚¹å¼€å¯äº†è®¿é—®è®¤è¯ï¼Œä»ŽèŠ‚ç‚¹è®¿é—®ä¸»èŠ‚ç‚¹éœ€è¦è®¤è¯çš„å¯†ç masterauth $&#123;masterauth&#125;#ä¿æŠ¤æ¨¡å¼ï¼Œé»˜è®¤å€¼ yesï¼Œå³å¼€å¯ã€‚å¼€å¯ä¿æŠ¤æ¨¡å¼ä»¥åŽï¼Œéœ€é…ç½® bind ip æˆ–è€…è®¾ç½®è®¿é—®å¯†ç ï¼›å…³é—­ä¿æŠ¤æ¨¡å¼ï¼Œå¤–éƒ¨ç½‘ç»œå¯ä»¥ç›´æŽ¥è®¿é—®ï¼›protected-mode no#æ˜¯å¦ä»¥å®ˆæŠ¤çº¿ç¨‹çš„æ–¹å¼å¯åŠ¨ï¼ˆåŽå°å¯åŠ¨ï¼‰ï¼Œé»˜è®¤ noï¼›daemonize no#æ˜¯å¦å¼€å¯ AOF æŒä¹…åŒ–æ¨¡å¼ï¼Œé»˜è®¤ noï¼›appendonly yes#æ˜¯å¦å¼€å¯é›†ç¾¤æ¨¡å¼ï¼Œé»˜è®¤ noï¼›cluster-enabled no#ç»™å½“å‰ä»ŽèŠ‚ç‚¹æŒ‡å®šä¸»èŠ‚ç‚¹çš„ipå’Œç«¯å£slaveof $&#123;masterIp&#125; $&#123;masterPort&#125;EOF##åˆ›å»ºå“¨å…µèŠ‚ç‚¹é…ç½®æ–‡ä»¶æ¨¡æ¿cat &gt; /opt/redis/conf/redis-sentinel.tmpl &lt;&lt; 'EOF'#èŠ‚ç‚¹ç«¯å£ 26379ã€26380ã€26381port $&#123;PORT&#125;#ä¿æŠ¤æ¨¡å¼ï¼Œé»˜è®¤å€¼ yesï¼Œå³å¼€å¯ã€‚å¼€å¯ä¿æŠ¤æ¨¡å¼ä»¥åŽï¼Œéœ€é…ç½® bind ip æˆ–è€…è®¾ç½®è®¿é—®å¯†ç ï¼›å…³é—­ä¿æŠ¤æ¨¡å¼ï¼Œå¤–éƒ¨ç½‘ç»œå¯ä»¥ç›´æŽ¥è®¿é—®protected-mode no#æ˜¯å¦ä»¥å®ˆæŠ¤çº¿ç¨‹çš„æ–¹å¼å¯åŠ¨ï¼ˆåŽå°å¯åŠ¨ï¼‰ï¼Œé»˜è®¤ nodaemonize no#æ˜¯å¦å¼€å¯ AOF æŒä¹…åŒ–æ¨¡å¼ï¼Œé»˜è®¤ noappendonly yes# ç¬¬ä¸‰ä¸ªå‚æ•°ï¼šå“¨å…µåå­—ï¼Œå¯è‡ªè¡Œä¿®æ”¹ã€‚ï¼ˆè‹¥ä¿®æ”¹äº†ï¼Œé‚£åŽé¢æ¶‰åŠåˆ°çš„éƒ½å¾—åŒæ­¥ï¼‰# ç¬¬å››ä¸ªå‚æ•°ï¼šmasterä¸»æœºipåœ°å€# ç¬¬äº”ä¸ªå‚æ•°ï¼šredisç«¯å£å·# ç¬¬å…­ä¸ªå‚æ•°ï¼šå“¨å…µçš„æ•°é‡ã€‚æ¯”å¦‚2è¡¨ç¤ºï¼Œå½“è‡³å°‘æœ‰2ä¸ªå“¨å…µå‘çŽ°masterçš„redisæŒ‚äº†ï¼Œé‚£ä¹ˆå°±å°†æ­¤masteræ ‡è®°ä¸ºå®•æœºèŠ‚ç‚¹ã€‚è¿™ä¸ªæ—¶å€™å°±ä¼šè¿›è¡Œæ•…éšœçš„è½¬ç§»ï¼Œå°†å…¶ä¸­çš„ä¸€ä¸ªä»ŽèŠ‚ç‚¹å˜ä¸ºmastersentinel monitor mymaster $&#123;masterIp&#125; $&#123;masterPort&#125; 2# å“¨å…µä»ŽmasterèŠ‚ç‚¹å®•æœºåŽï¼Œç­‰å¾…å¤šå°‘æ—¶é—´ï¼ˆæ¯«ç§’ï¼‰ï¼Œè®¤å®šmasterä¸å¯ç”¨ã€‚é»˜è®¤30ssentinel down-after-milliseconds mymaster 30000# å½“æ›¿æ¢ä¸»èŠ‚ç‚¹åŽï¼Œå‰©ä½™ä»ŽèŠ‚ç‚¹å¹¶è¡ŒåŒæ­¥çš„æ•°é‡ï¼Œé»˜è®¤ä¸º 1sentinel parallel-syncs mymaster 1# masterä¸­redisçš„å¯†ç sentinel auth-pass mymaster $&#123;masterauth&#125;# ä¸»å¤‡åˆ‡æ¢çš„æ—¶é—´ï¼Œè‹¥åœ¨3åˆ†é’Ÿå†…æ²¡æœ‰åˆ‡æ¢æˆåŠŸï¼Œæ¢å¦ä¸€ä¸ªä»ŽèŠ‚ç‚¹åˆ‡æ¢sentinel failover-timeout mymaster 180000sentinel deny-scripts-reconfig yesEOFé€šè¿‡æ¨¡æ¿æ–‡ä»¶åŠ¨æ€ç”Ÿæˆæ‰€æœ‰èŠ‚ç‚¹çš„é…ç½®æ–‡ä»¶12345678910111213141516171819202122232425262728293031323334353637383940414243#ä¸»ä»ŽèŠ‚ç‚¹çš„å¯†ç requirepass=123456#ä»ŽèŠ‚ç‚¹æˆ–è€…å“¨å…µèŠ‚ç‚¹è®¿é—®ä¸»èŠ‚ç‚¹éœ€è¦è®¤è¯çš„å¯†ç masterauth=123456#ä¸»èŠ‚ç‚¹ipmasterIp=192.168.60.200#ä¸»èŠ‚ç‚¹ç«¯å£masterPort=6379#ä»ŽèŠ‚ç‚¹çš„æ‰€æœ‰ç«¯å£masterPorts="6380 6381"#å“¨å…µçš„æ‰€æœ‰èŠ‚ç‚¹ç«¯å£sentinelPorts="26379 26380 26381"##ç”Ÿæˆä¸»èŠ‚ç‚¹çš„é…ç½®æ–‡ä»¶PORT=$&#123;masterPort&#125; \requirepass=$requirepass \masterauth=$masterauth \envsubst &lt; /opt/redis/conf/redis-master.tmpl &gt; /opt/redis/conf/redis-master.conf#ç”Ÿæˆä»ŽèŠ‚ç‚¹çš„é…ç½®æ–‡ä»¶count=1for port in $masterPorts; do masterIp=$masterIp \ masterPort=$masterPort \ PORT=$&#123;port&#125; \ requirepass=$requirepass \ masterauth=$masterauth \ envsubst &lt; /opt/redis/conf/redis-slave.tmpl &gt; /opt/redis/conf/redis-slave-$&#123;count&#125;.conf let count++done#ç”Ÿæˆæ‰€æœ‰å“¨å…µèŠ‚ç‚¹çš„é…ç½®æ–‡ä»¶count=1for port in $sentinelPorts; do masterIp=$masterIp \ masterPort=$masterPort \ PORT=$&#123;port&#125; \ requirepass=$requirepass \ masterauth=$masterauth \ envsubst &lt; /opt/redis/conf/redis-sentinel.tmpl &gt; /opt/redis/conf/redis-sentinel-$&#123;count&#125;.conf let count++doneÂ¶dockeré…ç½®12mkdir -p /opt/redisvim /opt/redis/docker-compose.yml1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162version: '3'services: master: image: redis container_name: redis-master restart: always command: redis-server /etc/redis/redis.conf #å®¹å™¨å¯åŠ¨æ—¶æ‰§è¡Œçš„å‘½ä»¤ï¼Œä»¥ä¸‹æ˜¯redis-serverå¯åŠ¨æ—¶æŒ‡å®šé…ç½®æ–‡ä»¶ï¼ŒåŽé¢å¯åŠ å‚æ•°å¦‚"--port 6379 --appendonly yes"ç­‰å‚æ•°è¦†ç›–é…ç½®æ–‡ä»¶é‡Œçš„ä¸€äº›é…ç½® #command: redis-server /etc/redis/redis.conf --port 6379 --appendonly yes ports: - 6379:6379 volumes: - /opt/redis/conf/redis-master.conf:/etc/redis/redis.conf - /opt/redis/data/redis-master:/data slave1: image: redis container_name: redis-slave-1 restart: always command: redis-server /etc/redis/redis.conf ports: - 6380:6380 volumes: - /opt/redis/conf/redis-slave-1.conf:/etc/redis/redis.conf - /opt/redis/data/redis-slave-1:/data slave2: image: redis container_name: redis-slave-2 restart: always command: redis-server /etc/redis/redis.conf ports: - 6381:6381 volumes: - /opt/redis/conf/redis-slave-2.conf:/etc/redis/redis.conf - /opt/redis/data/redis-slave-2:/data sentinel1: image: redis container_name: redis-sentinel-1 command: redis-sentinel /etc/redis/sentinel.conf restart: always ports: - 26379:26379 volumes: - /opt/redis/conf/redis-sentinel-1.conf:/etc/redis/sentinel.conf sentinel2: image: redis container_name: redis-sentinel-2 command: redis-sentinel /etc/redis/sentinel.conf restart: always ports: - 26380:26380 volumes: - /opt/redis/conf/redis-sentinel-2.conf:/etc/redis/sentinel.conf sentinel3: image: redis container_name: redis-sentinel-3 command: redis-sentinel /etc/redis/sentinel.conf restart: always ports: - 26381:26381 volumes: - /opt/redis/conf/redis-sentinel-3.conf:/etc/redis/sentinel.conf12#åˆ›å»ºå¹¶å¯åŠ¨æ‰€æœ‰æœåŠ¡å®¹å™¨docker-compose up -dÂ¶å‚è€ƒhttps://www.cnblogs.com/hckblogs/p/11186311.htmlhttps://juejin.cn/post/6868426752789020685#heading-10Â¶é›†ç¾¤æ¨¡å¼Â¶æ¦‚å¿µ1ã€ä¸»ä»Žå¤åˆ¶æ¨¡å¼åªè¦è§£å†³äº†å•æœºèŠ‚ç‚¹æŸ¥è¯¢å¹¶å‘é‡ç“¶é¢ˆã€‚ä½†ä¸»èŠ‚ç‚¹å‡ºæ•…éšœéœ€è¦äººä¸ºæ›¿æ¢ä»ŽèŠ‚ç‚¹é¡¶æ›¿ä¸»èŠ‚ç‚¹ã€‚å³ä¸»ä»Žå¤åˆ¶æ¨¡å¼è§£å†³äº†è¯»å¹¶å‘ï¼Œä½†ä¸ºè§£å†³å†™å¹¶å‘ï¼ŒåŒæ—¶æ²¡æœ‰é«˜å¯ç”¨æ€§ã€‚2ã€å“¨å…µæ¨¡å¼åœ¨ä¸»ä»Žå¤åˆ¶æ¨¡å¼çš„åŸºç¡€ä¸Šå®žçŽ°äº†è‡ªåŠ¨åŒ–æ•…éšœæ¢å¤ã€‚å³åœ¨ä¸»ä»Žå¤åˆ¶æ¨¡å¼çš„åŸºç¡€ä¸Šè§£å†³äº†é«˜å¯ç”¨æ€§ï¼Œä½†ä»ç„¶æœªè§£å†³å†™å¹¶å‘ã€‚3ã€ä¸ºäº†è§£å†³å“¨å…µæ¨¡å¼çš„å†™å¹¶å‘é—®é¢˜ï¼Œè¯žç”Ÿäº†é›†ç¾¤æ¨¡å¼ã€‚é›†ç¾¤æ¨¡å¼ä¿ç•™äº†ä¸»ä»Žå¤åˆ¶çš„è¯»å¹¶å‘èƒ½åŠ›ï¼ŒåŒæ—¶æ”¯æŒå¤šä¸»èŠ‚ç‚¹æ¥è§£å†³å†™å¹¶å‘é—®é¢˜ï¼Œå¦å¤–é›†ç¾¤ä¸­æ‰€æœ‰èŠ‚ç‚¹é€šè¿‡äº’ç›¸å®šæ—¶æ£€æµ‹æ¥å®žçŽ°é«˜å¯ç”¨æ€§ï¼ˆä¸»èŠ‚ç‚¹æ•…éšœåˆ™å¯¹åº”ä»ŽèŠ‚ç‚¹é‡æ–°é€‰ä¸¾æ›¿æ¢ä¸»èŠ‚ç‚¹ï¼‰ã€‚Â¶é«˜å¹¶å‘å®žçŽ°Â¶å“ˆå¸Œæ§½åˆ†ç‰‡ç”±ä¸Šæ–‡å·²ç»çŸ¥é“ä¸»ä»Žå¤åˆ¶æ¨¡å¼è§£å†³äº†è¯»å¹¶å‘ï¼Œä¸ºäº†è§£å†³å†™å¹¶å‘é—®é¢˜ï¼Œclusteré›†ç¾¤å°†å†™æ“ä½œçš„æ•°æ®æ ¹æ®keyåˆ†é…åˆ°ä¸åŒçš„ä¸»èŠ‚ç‚¹ä¸­ï¼Œè€Œè¿™ä¸ªåˆ†é…è§„åˆ™å³â€œå“ˆå¸Œæ§½åˆ†ç‰‡â€ã€‚clusteré›†ç¾¤çš„æ˜¯é‡‡ç”¨â€œè™šæ‹Ÿå“ˆå¸Œæ§½åˆ†åŒºâ€çš„æ–¹å¼è¿›è¡Œåˆ†ç‰‡å­˜å‚¨çš„ï¼Œå®ƒå°†æ•´ä¸ªæ•°æ®åº“åˆ†ä¸º16384ä¸ªæ§½ä½slotï¼Œæ‰€æœ‰key-valueæ•°æ®éƒ½å­˜å‚¨åœ¨è¿™äº›slotä¸­çš„æŸä¸€ä¸ªä¸Šã€‚ä¸€ä¸ªslotæ§½ä½å¯ä»¥å­˜æ”¾å¤šä¸ªæ•°æ®ï¼Œkeyçš„æ§½ä½è®¡ç®—å…¬å¼ä¸ºï¼šslot_number=crc16(key)%16384ï¼Œå…¶ä¸­crc16ä¸º16ä½çš„å¾ªçŽ¯å†—ä½™æ ¡éªŒå’Œå‡½æ•°ã€‚æ¯ä¸€ä¸ªä¸»èŠ‚ç‚¹é›†ç¾¤ï¼ˆä¸»èŠ‚ç‚¹å’Œå…¶ä»ŽèŠ‚ç‚¹ç»„æˆçš„å°é›†ç¾¤ï¼‰éƒ½è´Ÿè´£ç»´æŠ¤ä¸€éƒ¨åˆ†æ§½ä»¥åŠæ§½æ‰€æ˜ å°„çš„é”®å€¼æ•°æ®ï¼ˆä¹Ÿå°±æ˜¯è¯´é›†ç¾¤ä¸­ä¸æ˜¯æ¯ä¸ªèŠ‚ç‚¹éƒ½ä¿å­˜æœ‰æ‰€æœ‰çš„æ•°æ®ï¼Œæ¯ä¸ªä¸»èŠ‚ç‚¹åªè´Ÿè´£ä¸€éƒ¨åˆ†æ§½å¯¹åº”çš„æ•°æ®å­˜å‚¨ï¼Œæ‰€æœ‰çš„ä¸»èŠ‚ç‚¹å­˜å‚¨çš„æ•°æ®åˆèµ·æ¥æ‰æ˜¯æ•´ä¸ªé›†ç¾¤çš„æ•°æ®ï¼‰ã€‚æ‰©å®¹æˆ–ç¼©å®¹ä»¥åŽï¼Œæ§½éœ€è¦é‡æ–°åˆ†é…ï¼Œæ•°æ®ä¹Ÿéœ€è¦é‡æ–°è¿ç§»ï¼Œä½†æ˜¯æœåŠ¡ä¸éœ€è¦ä¸‹çº¿ã€‚ç”±äºŽRedisé›†ç¾¤æ— ä¸­å¿ƒèŠ‚ç‚¹ï¼Œå®¢æˆ·ç«¯è¯·æ±‚ä¼šéšæœºå‘ç»™ä»»æ„ä¸»èŠ‚ç‚¹ï¼›ä¸»èŠ‚ç‚¹åªä¼šå¤„ç†è‡ªå·±è´Ÿè´£æ§½ä½çš„å‘½ä»¤è¯·æ±‚ï¼Œå¯¹äºŽå…¶å®ƒæ§½ä½çš„å‘½ä»¤è¯·æ±‚è¯¥ä¸»èŠ‚ç‚¹ä¼šè¿”å›žå®¢æˆ·ç«¯ä¸€ä¸ªè½¬å‘é”™è¯¯ï¼Œå®¢æˆ·ç«¯å†æ ¹æ®é”™è¯¯ä¸­åŒ…å«çš„åœ°å€å’Œç«¯å£é‡æ–°å‘æ­£ç¡®è´Ÿè´£å¯¹åº”æ§½ä½çš„ä¸»èŠ‚ç‚¹å‘èµ·å‘½ä»¤è¯·æ±‚ã€‚Â¶é«˜å¯ç”¨å®žçŽ°Â¶Gossipåè®®Redis Clusterå®žä¾‹é—´ä»¥Gossipåè®®è¿›è¡Œé€šä¿¡çš„æœºåˆ¶ã€‚Redis Clusterè¿è¡Œæ—¶ï¼Œå„å®žä¾‹é—´éœ€è¦é€šè¿‡PINGã€PONGæ¶ˆæ¯è¿›è¡Œä¿¡æ¯äº¤æ¢ï¼Œè¿™äº›å¿ƒè·³æ¶ˆæ¯åŒ…å«äº†å½“å‰å®žä¾‹å’Œéƒ¨åˆ†å…¶å®ƒå®žä¾‹çš„çŠ¶æ€ä¿¡æ¯ï¼Œä»¥åŠSlotåˆ†é…ä¿¡æ¯ã€‚è¿™ç§é€šä¿¡æœºåˆ¶æœ‰åŠ©äºŽRedis Clusterä¸­çš„æ‰€æœ‰å®žä¾‹éƒ½æ‹¥æœ‰å®Œæ•´çš„é›†ç¾¤çŠ¶æ€ä¿¡æ¯ï¼Œä»Žè€Œèƒ½å¤Ÿå®žçŽ°é«˜å¯ç”¨ã€‚æ‰©å®¹æ³¨æ„äº‹é¡¹ï¼šéšç€é›†ç¾¤è§„æ¨¡çš„å¢žåŠ ï¼Œå®žä¾‹é—´çš„é€šä¿¡é‡ä¹Ÿä¼šå¢žåŠ ã€‚å¦‚æžœæˆ‘ä»¬ç›²ç›®åœ°å¯¹Redis Clusterè¿›è¡Œæ‰©å®¹ï¼Œå°±å¯èƒ½ä¼šé‡åˆ°é›†ç¾¤æ€§èƒ½å˜æ…¢çš„æƒ…å†µã€‚è¿™æ˜¯å› ä¸ºï¼Œé›†ç¾¤ä¸­å¤§è§„æ¨¡çš„å®žä¾‹é—´å¿ƒè·³æ¶ˆæ¯ä¼šæŒ¤å é›†ç¾¤å¤„ç†æ­£å¸¸è¯·æ±‚çš„å¸¦å®½ã€‚è€Œä¸”ï¼Œæœ‰äº›å®žä¾‹å¯èƒ½å› ä¸ºç½‘ç»œæ‹¥å¡žå¯¼è‡´æ— æ³•åŠæ—¶æ”¶åˆ°PONGæ¶ˆæ¯ï¼Œæ¯ä¸ªå®žä¾‹åœ¨è¿è¡Œæ—¶ä¼šå‘¨æœŸæ€§åœ°ï¼ˆæ¯ç§’10æ¬¡ï¼‰æ£€æµ‹æ˜¯å¦æœ‰è¿™ç§æƒ…å†µå‘ç”Ÿï¼Œä¸€æ—¦å‘ç”Ÿï¼Œå°±ä¼šç«‹å³ç»™è¿™äº›PONGæ¶ˆæ¯è¶…æ—¶çš„å®žä¾‹å‘é€å¿ƒè·³æ¶ˆæ¯ã€‚é›†ç¾¤è§„æ¨¡è¶Šå¤§ï¼Œç½‘ç»œæ‹¥å¡žçš„æ¦‚çŽ‡å°±è¶Šé«˜ï¼Œç›¸åº”çš„ï¼ŒPONGæ¶ˆæ¯è¶…æ—¶çš„å‘ç”Ÿæ¦‚çŽ‡å°±è¶Šé«˜ï¼Œè¿™å°±ä¼šå¯¼è‡´é›†ç¾¤ä¸­æœ‰å¤§é‡çš„å¿ƒè·³æ¶ˆæ¯ï¼Œå½±å“é›†ç¾¤æœåŠ¡æ­£å¸¸è¯·æ±‚ã€‚æœ€åŽï¼Œæˆ‘ä¹Ÿç»™ä½ ä¸€ä¸ªå°å»ºè®®ï¼Œè™½ç„¶æˆ‘ä»¬å¯ä»¥é€šè¿‡è°ƒæ•´cluster-node-timeouté…ç½®é¡¹å‡å°‘å¿ƒè·³æ¶ˆæ¯çš„å ç”¨å¸¦å®½æƒ…å†µï¼Œä½†æ˜¯ï¼Œåœ¨å®žé™…åº”ç”¨ä¸­ï¼Œå¦‚æžœä¸æ˜¯ç‰¹åˆ«éœ€è¦å¤§å®¹é‡é›†ç¾¤ï¼Œæˆ‘å»ºè®®ä½ æŠŠRedis Cluster çš„è§„æ¨¡æŽ§åˆ¶åœ¨400~500ä¸ªå®žä¾‹ã€‚å‡è®¾å•ä¸ªå®žä¾‹æ¯ç§’èƒ½æ”¯æ’‘8ä¸‡è¯·æ±‚æ“ä½œï¼ˆ8ä¸‡QPSï¼‰ï¼Œæ¯ä¸ªä¸»å®žä¾‹é…ç½®1ä¸ªä»Žå®žä¾‹ï¼Œé‚£ä¹ˆï¼Œ400~ 500ä¸ªå®žä¾‹å¯æ”¯æŒ 1600ä¸‡~2000ä¸‡QPSï¼ˆ200/250ä¸ªä¸»å®žä¾‹*8ä¸‡QPS=1600/2000ä¸‡QPSï¼‰ï¼Œè¿™ä¸ªåžåé‡æ€§èƒ½å¯ä»¥æ»¡è¶³ä¸å°‘ä¸šåŠ¡åº”ç”¨çš„éœ€æ±‚ã€‚Â¶èŠ‚ç‚¹æ•…éšœåˆ¤æ–­é›†ç¾¤ä¸­çš„æ¯ä¸ªèŠ‚ç‚¹éƒ½ä¼šå®šæœŸå‘å…¶ä»–èŠ‚ç‚¹å‘é€pingå‘½ä»¤ï¼Œå¦‚æžœæŽ¥å—pingæ¶ˆæ¯çš„èŠ‚ç‚¹åœ¨æŒ‡å®šæ—¶é—´å†…æ²¡æœ‰å›žå¤pongï¼Œåˆ™å‘é€pingçš„èŠ‚ç‚¹å°±æŠŠæŽ¥å—pingçš„èŠ‚ç‚¹æ ‡è®°ä¸ºä¸»è§‚ä¸‹çº¿ã€‚å¦‚æžœé›†ç¾¤åŠæ•°ä»¥ä¸Šçš„ä¸»èŠ‚ç‚¹éƒ½å°†ä¸»èŠ‚ç‚¹Aæ ‡è®°ä¸ºä¸»è§‚ä¸‹çº¿ï¼Œåˆ™èŠ‚ç‚¹Aå°†è¢«æ ‡è®°ä¸ºå®¢è§‚ä¸‹çº¿ï¼ˆé€šè¿‡èŠ‚ç‚¹çš„å¹¿æ’­ï¼‰å³ä¸‹çº¿ã€‚Â¶æ•…éšœè½¬ç§»å½“ä¸€ä¸ªä»ŽèŠ‚ç‚¹å‘çŽ°è‡ªå·±æ­£åœ¨å¤åˆ¶çš„ä¸»èŠ‚ç‚¹è¿›å…¥äº†å·²ä¸‹çº¿çŠ¶æ€æ—¶ï¼Œä»ŽèŠ‚ç‚¹å°†å¼€å§‹å¯¹ä¸‹çº¿ä¸»èŠ‚ç‚¹è¿›è¡Œæ•…éšœè½¬ç§»ï¼Œä»¥ä¸‹æ˜¯æ•…éšœè½¬ç§»æ‰§è¡Œçš„æ­¥éª¤ï¼šæ•…éšœçš„ä¸»èŠ‚ç‚¹å¯¹åº”çš„æ‰€æœ‰ä»ŽèŠ‚ç‚¹è¿›è¡Œé€‰ä¸¾ï¼Œé€‰ä¸¾å‡ºä¸€ä¸ªæˆä¸ºæ–°çš„ä¸»èŠ‚ç‚¹ï¼›æ–°çš„ä¸»èŠ‚ç‚¹ä¼šæ’¤é”€æ‰€æœ‰å¯¹å·²ä¸‹çº¿ä¸»èŠ‚ç‚¹çš„æ§½æŒ‡æ´¾ï¼Œå¹¶å°†è¿™äº›æ§½å…¨éƒ¨æŒ‡æ´¾ç»™è‡ªå·±ï¼›æ–°çš„ä¸»èŠ‚ç‚¹å‘é›†ç¾¤å¹¿æ’­ä¸€æ¡PONGæ¶ˆæ¯ï¼Œè¿™æ¡PONGæ¶ˆæ¯å¯ä»¥è®©é›†ç¾¤ä¸­çš„å…¶ä»–èŠ‚ç‚¹ç«‹å³çŸ¥é“è¿™ä¸ªèŠ‚ç‚¹å·²ç»ç”±ä»ŽèŠ‚ç‚¹å˜æˆäº†ä¸»èŠ‚ç‚¹ï¼Œå¹¶ä¸”è¿™ä¸ªä¸»èŠ‚ç‚¹å·²ç»æŽ¥ç®¡äº†åŽŸæœ¬ç”±å·²ä¸‹çº¿èŠ‚ç‚¹è´Ÿè´£å¤„ç†çš„æ§½ã€‚æ–°çš„ä¸»èŠ‚ç‚¹å¼€å§‹æŽ¥æ”¶å’Œè‡ªå·±è´Ÿè´£å¤„ç†çš„æ§½æœ‰å…³çš„å‘½ä»¤è¯·æ±‚ï¼Œæ•…éšœè½¬ç§»å®Œæˆã€‚Â¶Clusteré™åˆ¶clusteré›†ç¾¤æ¨¡å¼å’Œå•æœºæ¨¡å¼ä¸‹ä»Žä½¿ç”¨ä¸Šæ¥çœ‹æ˜¯ç”±ä¸€äº›åŒºåˆ«çš„ï¼š1ã€éœ€è¦å®¢æˆ·ç«¯çš„æ”¯æŒï¼ˆç›®å‰jedisã€Lettuceã€redissonç­‰éƒ½æœ‰æ”¯æŒï¼‰2ã€åªæ”¯æŒä¸€ä¸ªæ•°æ®åº“ã€‚å•æœºæ¨¡å¼Redis é»˜è®¤è‡ªå¸¦æœ‰16ä¸ªæ•°æ®åº“ï¼Œå³db0~db15. ä½†æ˜¯ Redis Cluster é›†ç¾¤æž¶æž„ä¸‹åªæœ‰ä¸€ä¸ªæ•°æ®åº“ç©ºé—´ï¼Œå³db0ï¼Œselect å‘½ä»¤å°±ä¸èƒ½ç”¨äº†ï¼Œä½†å®žé™…ä¹Ÿå¾ˆå°‘æœ‰äººä½¿ç”¨å¤šæ•°æ®åº“ï¼Œæ‰€ä»¥è¿™ä¸ªé™åˆ¶å¹¶æ²¡ä»€ä¹ˆå½±å“ã€‚3ã€å¤škeyæ“ä½œå—é™ï¼ˆæ—¥å¸¸ä½¿ç”¨ä¸­æœ€å¤§çš„é™åˆ¶ï¼‰ã€‚Redis Clusterè¦æ±‚ï¼ŒåŒä¸€ä¸ªredisæ“ä½œå¤šä¸ªkeyæ—¶éœ€è¦è¿™äº›keyéƒ½åœ¨åŒä¸€ä¸ªslotæ—¶æ‰èƒ½æ‰§è¡Œï¼Œå¦åˆ™æŠ¥é”™ã€‚DELåˆ é™¤å¤šä¸ªkeyã€SUNIONã€äº‹åŠ¡ã€LUAè„šæœ¬ç­‰æ“ä½œéƒ½å¯èƒ½æœ‰å¤škeyæ“ä½œå—é™é—®é¢˜ã€‚å¤škeyæ“ä½œå—é™è§£å†³æ–¹æ¡ˆï¼šRedis Clusteræä¾›äº†ä¸€ä¸ªhash tagçš„æœºåˆ¶ï¼Œå¯ä»¥è®©æˆ‘ä»¬æŠŠä¸€ç»„keyæ˜ å°„åˆ°åŒä¸€ä¸ª slotã€‚ä¾‹å¦‚ï¼šuser1000.following è¿™ä¸ª key ä¿å­˜ç”¨æˆ· user1000 å…³æ³¨çš„ç”¨æˆ·ï¼›user1000.followers ä¿å­˜ç”¨æˆ· user1000 çš„ç²‰ä¸ã€‚è¿™ä¸¤ä¸ª key æœ‰ä¸€ä¸ªå…±åŒçš„éƒ¨åˆ† user1000ï¼Œå¯ä»¥æŒ‡å®šå¯¹è¿™ä¸ªå…±åŒçš„éƒ¨åˆ†åš slot æ˜ å°„è®¡ç®—ï¼Œè¿™æ ·ä»–ä»¬å°±å¯ä»¥åœ¨åŒä¸€ä¸ªæ§½ä¸­äº†ã€‚ä½¿ç”¨æ–¹å¼ï¼š{user1000}.following å’Œ {user1000}.followerså°±æ˜¯æŠŠå…±åŒçš„éƒ¨åˆ†ä½¿ç”¨ { } åŒ…èµ·æ¥ï¼Œè®¡ç®— slot å€¼æ—¶ï¼Œå¦‚æžœå‘çŽ°äº†èŠ±æ‹¬å·ï¼Œå°±ä¼šåªå¯¹å…¶ä¸­çš„éƒ¨åˆ†è¿›è¡Œè®¡ç®—ã€‚å‚è€ƒï¼šhttps://www.cnblogs.com/lovezbs/p/13885569.htmlÂ¶ä¼˜ç¼ºç‚¹ä¼˜ç‚¹æ— ä¸­å¿ƒæž¶æž„ï¼›å¯æ‰©å±•æ€§ï¼Œæ•°æ®æŒ‰ç…§ Slot å­˜å‚¨åˆ†å¸ƒåœ¨å¤šä¸ªèŠ‚ç‚¹ï¼ŒèŠ‚ç‚¹é—´æ•°æ®å…±äº«ï¼ŒèŠ‚ç‚¹å¯åŠ¨æ€æ·»åŠ æˆ–åˆ é™¤ï¼Œå¯åŠ¨æ€è°ƒæ•´æ•°æ®åˆ†å¸ƒï¼›é«˜å¯ç”¨æ€§ï¼Œéƒ¨åˆ†èŠ‚ç‚¹ä¸å¯ç”¨æ—¶ï¼Œé›†ç¾¤ä»å¯ç”¨ã€‚é€šè¿‡å¢žåŠ  Slave åšå¤‡ä»½æ•°æ®å‰¯æœ¬ã€‚å®žçŽ°æ•…éšœè‡ªåŠ¨ failoverï¼ŒèŠ‚ç‚¹ä¹‹é—´é€šè¿‡ gossip åè®®äº¤æ¢çŠ¶æ€ä¿¡æ¯ï¼Œç”¨æŠ•ç¥¨æœºåˆ¶å®Œæˆ Slave åˆ° Master çš„è§’è‰²æå‡ã€‚ç¼ºç‚¹æ•°æ®é€šè¿‡å¼‚æ­¥å¤åˆ¶ï¼Œæ— æ³•ä¿è¯æ•°æ®å¼ºä¸€è‡´æ€§ï¼›é›†ç¾¤çŽ¯å¢ƒæ­å»ºå¤æ‚ï¼Œä¸è¿‡åŸºäºŽ Docker çš„æ­å»ºæ–¹æ¡ˆä¼šç›¸å¯¹ç®€å•ã€‚å­˜åœ¨ä¸€äº›ä½¿ç”¨é™åˆ¶ã€‚æ¯”å¦‚æ”¯æŒä¸€ä¸ªæ•°æ®åº“ã€å¤škeyæ“ä½œå—é™ç­‰ã€‚Â¶éƒ¨ç½²å®‰è£…Â¶çŽ¯å¢ƒå‡†å¤‡redisè¦æ±‚è‡³å°‘ä¸‰ä¸»ä¸‰ä»Žå…±6ä¸ªèŠ‚ç‚¹æ‰èƒ½ç»„æˆredisé›†ç¾¤ï¼Œå¯ä»¥åˆ†å¸ƒåœ¨ä¸€å°æˆ–è€…å¤šå°ä¸»æœºä¸Šã€‚å‡è®¾æœ‰ä¸¤å°æœåŠ¡å™¨ç”¨äºŽæ­å»ºRedis Clusteré›†ç¾¤ã€‚ä¸¤å°æœåŠ¡å™¨çš„IPåˆ†åˆ«æ˜¯ï¼š192.168.102.111192.168.102.112æ¯ä¸ªæœåŠ¡å™¨è·‘ä¸‰ä¸ªä¸åŒç«¯å£ï¼ˆ6371ã€6372ã€6373ï¼‰çš„redisæœåŠ¡è¿›ç¨‹ï¼Œé‚£ä¹ˆå°±èƒ½åœ¨è¿™ä¸¤å°æœåŠ¡å™¨ä¸­æ­å»ºå‡º6ä¸ªredisèŠ‚ç‚¹å‡ºæ¥ã€‚ä¸ºäº†ç®€åŒ–éƒ¨ç½²è¿‡ç¨‹ï¼Œè¿™é‡Œé€šè¿‡ä½¿ç”¨redisé…ç½®æ¨¡æ¿æ–‡ä»¶å’Œdocker composeæ¥ç®€åŒ–æ­å»ºè¿‡ç¨‹ã€‚Â¶åˆ›å»ºredisé…ç½®æ¨¡æ¿æ–‡ä»¶æ¯å°æœåŠ¡å™¨éƒ½æ‰§è¡Œå¦‚ä¸‹æ“ä½œï¼š12345678910111213141516171819202122232425262728mkdir -p /opt/redis/confcat &gt; /opt/redis/conf/redis-cluster.tmpl &lt;&lt; 'EOF'#èŠ‚ç‚¹ç«¯å£port $&#123;PORT&#125;#è®¿é—®è®¤è¯å¯†ç requirepass $&#123;requirepass&#125;#å¦‚æžœä¸»èŠ‚ç‚¹å¼€å¯äº†è®¿é—®è®¤è¯ï¼Œä»ŽèŠ‚ç‚¹è®¿é—®ä¸»èŠ‚ç‚¹éœ€è¦è®¤è¯çš„å¯†ç masterauth $&#123;masterauth&#125;#ä¿æŠ¤æ¨¡å¼ï¼Œé»˜è®¤å€¼ yesï¼Œå³å¼€å¯ã€‚å¼€å¯ä¿æŠ¤æ¨¡å¼ä»¥åŽï¼Œéœ€é…ç½® bind ip æˆ–è€…è®¾ç½®è®¿é—®å¯†ç ï¼›å…³é—­ä¿æŠ¤æ¨¡å¼ï¼Œå¤–éƒ¨ç½‘ç»œå¯ä»¥ç›´æŽ¥è®¿é—®ï¼›protected-mode no#æ˜¯å¦ä»¥å®ˆæŠ¤çº¿ç¨‹çš„æ–¹å¼å¯åŠ¨ï¼ˆåŽå°å¯åŠ¨ï¼‰ï¼Œé»˜è®¤ noï¼›daemonize no#æ˜¯å¦å¼€å¯ AOF æŒä¹…åŒ–æ¨¡å¼ï¼Œé»˜è®¤ noï¼›appendonly yes#æ˜¯å¦å¼€å¯é›†ç¾¤æ¨¡å¼ï¼Œé»˜è®¤ noï¼›cluster-enabled yes#é›†ç¾¤èŠ‚ç‚¹ä¿¡æ¯æ–‡ä»¶ï¼›cluster-config-file nodes.conf#é›†ç¾¤èŠ‚ç‚¹è¿žæŽ¥è¶…æ—¶æ—¶é—´ï¼›cluster-node-timeout 15000#é›†ç¾¤ä¸­å½“å‰èŠ‚ç‚¹IPï¼Œå¡«å†™å®¿ä¸»æœºçš„ IPï¼›cluster-announce-ip $&#123;clusterIp&#125;#é›†ç¾¤ä¸­å½“å‰èŠ‚ç‚¹ç«¯å£ï¼›cluster-announce-port $&#123;PORT&#125;#é›†ç¾¤èŠ‚ç‚¹æ€»çº¿ç«¯å£cluster-announce-bus-port 1$&#123;PORT&#125;EOFæ¯å°æœåŠ¡å™¨éƒ½æ‰§è¡Œå¦‚ä¸‹æ“ä½œï¼Œå¦å¤–æ³¨æ„ä¸‹é¢clusterIpçš„ä¿®æ”¹ï¼ˆæ¯å°æœåŠ¡å™¨ipä¸ä¸€æ ·ï¼‰ï¼š123456789101112131415161718#èŠ‚ç‚¹çš„å¯†ç requirepass=123456#ä»ŽèŠ‚ç‚¹è®¿é—®ä¸»èŠ‚ç‚¹éœ€è¦è®¤è¯çš„å¯†ç masterauth=123456#å½“å‰èŠ‚ç‚¹çš„ipï¼ˆæœåŠ¡å™¨1çš„ipï¼‰clusterIp=192.168.60.201#å½“å‰èŠ‚ç‚¹çš„ipï¼ˆæœåŠ¡å™¨2çš„ipï¼‰#clusterIp=192.168.60.202#é›†ç¾¤çš„æ‰€æœ‰èŠ‚ç‚¹ç«¯å£clusterPorts=`seq 6371 6373`for port in $clusterPorts; do PORT=$&#123;port&#125; \ requirepass=$requirepass \ masterauth=$masterauth \ clusterIp=$clusterIp \ envsubst &lt; /opt/redis/conf/redis-cluster.tmpl &gt; /opt/redis/conf/redis-$&#123;port&#125;.confdoneÂ¶åˆ›å»ºdocker composeé…ç½®æ–‡ä»¶æ¯å°æœåŠ¡å™¨éƒ½æ‰§è¡Œå¦‚ä¸‹æ“ä½œ1vim /opt/redis/docker-compose.ymlå†…å®¹å¦‚ä¸‹ï¼š1234567891011121314151617181920212223242526272829303132333435363738# æè¿° Compose æ–‡ä»¶çš„ç‰ˆæœ¬ä¿¡æ¯version: "3.1"# å®šä¹‰æœåŠ¡ï¼Œå¯ä»¥å¤šä¸ªservices: redis-6371: # æœåŠ¡åç§° image: redis:6.2.7 # åˆ›å»ºå®¹å™¨æ—¶æ‰€éœ€çš„é•œåƒ container_name: redis-6371 # å®¹å™¨åç§° restart: always # å®¹å™¨æ€»æ˜¯é‡æ–°å¯åŠ¨ volumes: # æ•°æ®å·ï¼Œç›®å½•æŒ‚è½½ - /opt/redis/conf/redis-6371.conf:/etc/redis/redis.conf - /opt/redis/data/6371/data:/data ports: - 6371:6371 - 16371:16371 command: redis-server /etc/redis/redis.conf # è¦†ç›–å®¹å™¨å¯åŠ¨åŽé»˜è®¤æ‰§è¡Œçš„å‘½ä»¤ redis-6372: image: redis:6.2.7 container_name: redis-6372 volumes: - /opt/redis/conf/redis-6372.conf:/etc/redis/redis.conf - /opt/redis/data/6372/data:/data ports: - 6372:6372 - 16372:16372 command: redis-server /etc/redis/redis.conf redis-6373: image: redis:6.2.7 container_name: redis-6373 volumes: - /opt/redis/conf/redis-6373.conf:/etc/redis/redis.conf - /opt/redis/data/6373/data:/data ports: - 6373:6373 - 16373:16373 command: redis-server /etc/redis/redis.confðŸ’â€â™‚ æŒ‰ç…§ Redis å®˜ç½‘ï¼šhttps://redis.io/topics/cluster-tutorial çš„æç¤ºï¼Œä¸ºäº†ä½¿ Docker ä¸Ž Redis Cluster å…¼å®¹ï¼ŒæŽ¨èä½¿ç”¨ Docker çš„ host ç½‘ç»œæ¨¡å¼ã€‚ä½†è¿™é‡Œå‘çŽ°ä¸ç”¨ä¹Ÿèƒ½æ”¯æŒï¼Œå¦‚æžœå‘çŽ°æœ‰ç½‘ç»œä¸Šçš„é—®é¢˜å¯ä»¥æ”¹è¯•hostæ¨¡å¼ã€‚å¦å¤–ä½¿ç”¨hostæ¨¡å¼æ³¨æ„å…³é—­å®¿ä¸»æœºé˜²ç«å¢™ã€‚æ¯å°æœåŠ¡å™¨éƒ½æ‰§è¡Œå¦‚ä¸‹æ“ä½œåˆ›å»ºå¹¶å¯åŠ¨æ‰€æœ‰æœåŠ¡å®¹å™¨1docker-compose up -dÂ¶åˆå§‹åŒ–å¹¶åˆ›å»ºé›†ç¾¤é¦–å…ˆç¡®ä¿ä¸¤å°æœåŠ¡å™¨ä¹‹é—´å¯ä»¥äº’ç›¸é€šä¿¡ï¼Œç„¶åŽé€‰æ‹©ä»»æ„ä¸€å°å¹¶ç™»å½•è¿›ä¸€ä¸ªredisæœåŠ¡ï¼Œå¹¶é€šè¿‡rediså®¢æˆ·ç«¯å‘½ä»¤æ¥åˆå§‹åŒ–åˆ›å»ºå‡ºä¸€ä¸ªClusteré›†ç¾¤ã€‚12345678910# è¿›å…¥å®¹å™¨docker exec -it redis-6371 bash# åˆ‡æ¢è‡³æŒ‡å®šç›®å½•cd /usr/local/bin/#é€šè¿‡ä»¥ä¸‹å‘½ä»¤å®žçŽ°å¤šæœåŠ¡å™¨Redis Clusteré›†ç¾¤çš„åˆ›å»º,å‡ºçŽ°é€‰æ‹©æç¤ºä¿¡æ¯ï¼Œè¾“å…¥ yes#-aæ˜¯redisçš„ç™»å½•å¯†ç ï¼Œ--replicas 1 ä»£è¡¨çš„æ˜¯ä¸»èŠ‚ç‚¹æ•°/ä»ŽèŠ‚ç‚¹æ•°çš„æ¯”ä¾‹ï¼Œ1è¡¨ç¤º1ä¸ªmasterå¯¹åº”1ä¸ªä»Žï¼Œå¦‚æžœæ˜¯2ï¼Œåˆ™è¡¨ç¤º1ä¸ªmasterå¯¹åº”2ä¸ªslaveredis-cli -a 123456 --cluster create \192.168.60.201:6371 192.168.60.201:6372 192.168.60.201:6373 \192.168.60.202:6371 192.168.60.202:6372 192.168.60.202:6373 \--cluster-replicas 1æŸ¥çœ‹é›†ç¾¤çŠ¶æ€ã€ä¿¡æ¯å’ŒèŠ‚ç‚¹ä¿¡æ¯1234567891011121314# è¿›å…¥å®¹å™¨docker exec -it redis-6371 bash# åˆ‡æ¢è‡³æŒ‡å®šç›®å½•cd /usr/local/bin/# æŸ¥çœ‹é›†ç¾¤çŠ¶æ€redis-cli -a 123456 --cluster check 192.168.60.201:6371# è¿žæŽ¥è‡³é›†ç¾¤æŸä¸ªèŠ‚ç‚¹ï¼Œ-cè¡¨ç¤ºä»¥é›†ç¾¤çš„æ–¹å¼æ“ä½œredis-cli -c -a 123456 -p 6371# æŸ¥çœ‹é›†ç¾¤ä¿¡æ¯cluster info# æŸ¥çœ‹é›†ç¾¤ç»“ç‚¹ä¿¡æ¯cluster nodes# æŸ¥çœ‹æ§½ä½ä¿¡æ¯cluster slotsÂ¶é›†ç¾¤æ‰©å®¹å‡åˆå¢žåŠ ä¸€å°æœåŠ¡å™¨192.168.60.203ï¼Œå¹¶ä¸”å¯åŠ¨äº†ä¸€ä¸ªç«¯å£ä¸º6371çš„redisèŠ‚ç‚¹ï¼ŒçŽ°åœ¨å¸Œæœ›æŠŠå®ƒåŠ å…¥åˆ°é›†ç¾¤ä¸­ï¼Œå¯å¦‚ä¸‹æ“ä½œï¼š1234#æ–°å¢žä¸€ä¸ªèŠ‚ç‚¹ï¼ˆé»˜è®¤æ˜¯ä¸»èŠ‚ç‚¹çš„æ–¹å¼åŠ å…¥ï¼‰ï¼Œå°†æ–°èŠ‚ç‚¹ä»‹ç»ç»™é›†ç¾¤ä¸­çš„ä»»æ„ä¸€ä¸ªï¼Œé‚£ä¹ˆæ•´ä¸ªé›†ç¾¤çš„æ‰€æœ‰èŠ‚ç‚¹å°±èƒ½ä¸Žæ–°èŠ‚ç‚¹äº’ç›¸è®¤è¯†redis-cli -a 123456 --cluster add-node 192.168.60.203:6371 192.168.60.201:6371#ç»™æ–°èŠ‚ç‚¹åˆ†é…æ§½ï¼Œé»˜è®¤æƒ…å†µä¸‹æ–°å¢žçš„èŠ‚ç‚¹æ˜¯æ²¡æœ‰åˆ†é…åˆ°æ§½çš„redis-cli -a 123456 --cluster reshard 192.168.60.203:6371123456789101112131415161718192021222324252627282930313233343536373839404142root@bogon:/data# redis-cli -a 123456 --cluster reshard 192.168.60.203:6371Warning: Using a password with '-a' or '-u' option on the command line interface may not be safe.&gt;&gt;&gt; Performing Cluster Check (using node 192.168.60.203:6371)M: cd33bd0ef64538dcc803dc60feb9779660bda76f 192.168.60.203:6371 slots: (0 slots) masterM: 6baffb00ad60dae2a1f55fc3307570ce9d95a10b 192.168.60.202:6372 slots:[10923-16383] (5461 slots) master 1 additional replica(s)M: e1e64960fabdafa2f7b803d83d72079e60c376ee 192.168.60.202:6371 slots:[5461-10922] (5462 slots) master 1 additional replica(s)M: ae8ec74c69e808a3f2a64604a4847297f1206397 192.168.60.202:6373 slots:[0-5460] (5461 slots) master 1 additional replica(s)S: d07f345fc7140b471ec0fef272e73b0d7cb4edbd 192.168.60.201:6373 slots: (0 slots) slave replicates e1e64960fabdafa2f7b803d83d72079e60c376eeS: 5bd4fb5aeb3e051ebdfafd96e0b16ed633085b86 192.168.60.201:6372 slots: (0 slots) slave replicates 6baffb00ad60dae2a1f55fc3307570ce9d95a10bS: 2a4157b11b4b88e6b6413a75a8ef1f3c3e2db61e 192.168.60.201:6371 slots: (0 slots) slave replicates ae8ec74c69e808a3f2a64604a4847297f1206397[OK] All nodes agree about slots configuration.&gt;&gt;&gt; Check for open slots...&gt;&gt;&gt; Check slots coverage...[OK] All 16384 slots covered.How many slots do you want to move (from 1 to 16384)? 4096 #è¦è¿ç§»å¤šå°‘ä¸ªæ§½ï¼ˆæ€»å…±16384ä¸ªæ§½ä½ï¼Œ4ä¸ªmasterèŠ‚ç‚¹çš„è¯å¯ä»¥è¾“å…¥4096ä¸ªï¼‰What is the receiving node ID? cd33bd0ef64538dcc803dc60feb9779660bda76f #æŽ¥å—èŠ‚ç‚¹çš„ndoe ID(è¿™é‡Œå¡«æ–°èŠ‚ç‚¹çš„node ID)Please enter all the source node IDs. Type 'all' to use all the nodes as source nodes for the hash slots. Type 'done' once you entered all the source nodes IDs.Source node #1: all #ä»Žæ‰€æœ‰èŠ‚ç‚¹ä¸­è¿ç§»æ§½åˆ°æ–°èŠ‚ç‚¹ä¸­Ready to move 4096 slots. Source nodes: M: 6baffb00ad60dae2a1f55fc3307570ce9d95a10b 192.168.60.202:6372 slots:[10923-16383] (5461 slots) master 1 additional replica(s)............Do you want to proceed with the proposed reshard plan (yes/no)? yes #è¾“å…¥yesç¡®è®¤å³å¯Â¶é›†ç¾¤æ¨¡å¼å¸¸ç”¨å‘½ä»¤12345#åœ¨é›†ç¾¤ä¸­ä½¿ç”¨keys *ï¼Œåªä¼šè¿”å›žå½“å‰ä¼šè¯æ‰€åœ¨çš„å•ä¸ªèŠ‚ç‚¹çš„keyï¼Œå¹¶éžæ•´ä¸ªé›†ç¾¤çš„keydocker exec -it redis-6371 redis-cli -c -a 123456 -p 6371 keys \*#èŽ·å–æ•´ä¸ªé›†ç¾¤çš„keyï¼ˆæ‰€æœ‰èŠ‚ç‚¹ï¼‰docker exec -it redis-6372 redis-cli -c -a 123456 --cluster call 192.168.60.201:6372 keys \*Â¶å‚è€ƒhttps://juejin.cn/post/6868426752789020685https://juejin.cn/post/6870674824247640072https://www.cnblogs.com/cqming/p/11191079.htmlhttps://blog.csdn.net/weixin_36691991/article/details/125868968https://zhuanlan.zhihu.com/p/347125538]]></content>
      <categories>
        <category>devops</category>
      </categories>
      <tags>
        <tag>redis</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[nginxå­¦ä¹ ç¬”è®°]]></title>
    <url>%2Fdevops%2Fnginx.html</url>
    <content type="text"><![CDATA[Â¶ä¸€ã€ç®€ä»‹Nginx æ˜¯ä¸€æ¬¾æ˜¯ç”±ä¿„ç½—æ–¯çš„ç¨‹åºè®¾è®¡å¸ˆIgor Sysoevæ‰€å¼€å‘é«˜æ€§èƒ½çš„ Web å’Œåå‘ä»£ç†æœåŠ¡å™¨ï¼Œä¹Ÿæ˜¯ä¸€ä¸ª IMAP/POP3/SMTP ä»£ç†æœåŠ¡å™¨ã€‚å®˜æ–¹å¼€æºç‰ˆå®˜ç½‘ï¼šhttps://nginx.orgæ–‡æ¡£ï¼šhttps://nginx.org/en/docså®˜æ–¹å•†ä¸šç‰ˆå®˜ç½‘ï¼šhttps://www.nginx.comä¸­æ–‡å®˜ç½‘ï¼šhttps://www.nginx-cn.netNGINX Plus æ–‡æ¡£ï¼šhttps://docs.nginx.com/nginxåœ¨é«˜è¿žæŽ¥å¹¶å‘çš„æƒ…å†µä¸‹ï¼ŒNginx æ˜¯ Apache æœåŠ¡å™¨ä¸é”™çš„æ›¿ä»£å“ã€‚Â¶äºŒã€åœ¨çº¿åŒ…ç®¡ç†å™¨å®‰è£…nginxÂ¶1. aptå®‰è£…nginxÂ¶ï¼ˆ1ï¼‰å®‰è£…nginx1234apt updateapt install -y nginx#æŸ¥çœ‹Nginxçš„æ˜¾å¼ç¼–è¯‘å‚æ•°nginx -VÂ¶ï¼ˆ3ï¼‰å¸è½½nginx12345678systemctl stop nginxapt purge -y nginx nginx-common#å¸è½½ç³»ç»Ÿä¸­æ‰€æœ‰ä¸å†éœ€è¦çš„ä¾èµ–åŒ…apt autoremove -y#åˆ é™¤å·²ä¸‹è½½çš„è½¯ä»¶åŒ…æ–‡ä»¶çš„ç¼“å­˜apt clean#åˆ é™¤nginxé…ç½®æ–‡ä»¶ï¼ˆå¦‚éœ€è¦ï¼‰rm -rf /etc/nginx/å¦‚æžœç”±äºŽ Nginx å¸è½½ä¸å¹²å‡€å¯¼è‡´å‡ºçŽ°é‡è£…å¤±è´¥çš„é—®é¢˜ï¼Œè§£å†³å¯å‚è€ƒï¼šhttps://www.cnblogs.com/alter888/p/9478022.htmlÂ¶2. yumå®‰è£…nginxÂ¶ï¼ˆ1ï¼‰è®¾ç½®nginxå®˜æ–¹yumæºï¼ˆå¯é€‰ï¼‰12345678910111213141516yum install yum-utilscat &gt; /etc/yum.repos.d/nginx.repo &lt;&lt; 'EOF'[nginx-stable]name=nginx stable repobaseurl=http://nginx.org/packages/centos/$releasever/$basearch/gpgcheck=1enabled=1gpgkey=https://nginx.org/keys/nginx_signing.key[nginx-mainline]name=nginx mainline repobaseurl=http://nginx.org/packages/mainline/centos/$releasever/$basearch/gpgcheck=1enabled=0gpgkey=https://nginx.org/keys/nginx_signing.keyEOFè®¾ç½® nginx å®˜æ–¹ yum æºä»¥èƒ½å¤Ÿä½¿ç”¨æœ€æ–°ç‰ˆæœ¬Â¶ï¼ˆ2ï¼‰å®‰è£…nginx1yum install -y nginxÂ¶ï¼ˆ3ï¼‰æŸ¥çœ‹nginxå®‰è£…ä¿¡æ¯12345678#æŸ¥çœ‹å·²ç»å®‰è£…nginxåŒ…ï¼ˆå¦‚ï¼šnginx-1.16.0-1.el7.ngx.x86_64ï¼‰rpm -q nginx#æŸ¥çœ‹nginxç‰ˆæœ¬ï¼ˆå¦‚ï¼šnginx version: nginx/1.16.0ï¼‰nginx -v#æŸ¥çœ‹yumå®‰è£…nginxçš„ç›®å½•rpm -ql nginx#æŸ¥çœ‹Nginxçš„æ˜¾å¼ç¼–è¯‘å‚æ•°nginx -VÂ¶ï¼ˆ4ï¼‰å¸è½½nginx123456systemctl stop nginxyum remove -y nginx#å¸è½½ç³»ç»Ÿä¸­æ‰€æœ‰ä¸å†éœ€è¦çš„ä¾èµ–åŒ…yum autoremove -y#åˆ é™¤nginxé…ç½®æ–‡ä»¶ï¼ˆå¦‚éœ€è¦ï¼‰rm -rf /etc/nginx/Â¶3. åœ¨çº¿åŒ…ç®¡ç†å™¨å®‰è£…nginxè·¯å¾„å®‰è£…nginxçš„ç›®å½•å¦‚ä¸‹ï¼š12345678910111213141516171819202122232425262728293031323334353637383940414243Nginxä¸»é…ç½®æ–‡ä»¶&#x2F;etc&#x2F;nginx &#x2F;etc&#x2F;nginx&#x2F;nginx.conf&#x2F;etc&#x2F;nginx&#x2F;conf.d &#x2F;etc&#x2F;nginx&#x2F;conf.d&#x2F;default.conf Cgiã€Fastcgiã€Uwcgié…ç½®æ–‡ä»¶&#x2F;etc&#x2F;nginx&#x2F;fastcgi_params&#x2F;etc&#x2F;nginx&#x2F;scgi_params&#x2F;etc&#x2F;nginx&#x2F;uwsgi_params Nginxç¼–ç è½¬æ¢æ˜ å°„é…ç½®æ–‡ä»¶&#x2F;etc&#x2F;nginx&#x2F;win-utf&#x2F;etc&#x2F;nginx&#x2F;koi-utf&#x2F;etc&#x2F;nginx&#x2F;koi-win httpåè®®çš„Content-Typeä¸Žæ‰©å±•åé…ç½®æ–‡ä»¶&#x2F;etc&#x2F;nginx&#x2F;mime.typesç³»ç»Ÿå®ˆæŠ¤è¿›ç¨‹ç®¡ç†å™¨é…ç½®æ–‡ä»¶&#x2F;usr&#x2F;lib&#x2F;systemd&#x2F;system&#x2F;nginx.serviceNginxâ½‡å¿—è½®è¯¢,â½‡å¿—åˆ‡å‰²é…ç½®æ–‡ä»¶&#x2F;etc&#x2F;logrotate.d&#x2F;nginxNginxç»ˆç«¯ç®¡ç†å‘½ä»¤&#x2F;usr&#x2F;sbin&#x2F;nginx&#x2F;usr&#x2F;sbin&#x2F;nginx-debug Nginxæ¨¡å—â½¬å½•&#x2F;etc&#x2F;nginx&#x2F;modules&#x2F;usr&#x2F;lib64&#x2F;nginx&#x2F;usr&#x2F;lib64&#x2F;nginx&#x2F;modules Nginxé»˜è®¤ç«™ç‚¹â½¬å½•&#x2F;usr&#x2F;share&#x2F;nginx&#x2F;html#Nginxçš„ç¼“å­˜â½¬å½•&#x2F;usr&#x2F;share&#x2F;doc&#x2F;nginx-1.12.2&#x2F;usr&#x2F;share&#x2F;man&#x2F;man8&#x2F;nginx.8.gzNginxçš„â½‡å¿—â½¬å½•&#x2F;var&#x2F;log&#x2F;nginxyumå®‰è£…nginxçš„ç¼–è¯‘å‚æ•°å¦‚ä¸‹ï¼š1234567891011121314151617181920212223242526ç¨‹åºå®‰è£…â½¬å½•å’Œè·¯å¾„--prefix&#x3D;&#x2F;etc&#x2F;nginx--sbin-path&#x3D;&#x2F;usr&#x2F;sbin&#x2F;nginx--modules-path&#x3D;&#x2F;usr&#x2F;lib64&#x2F;nginx&#x2F;modules--conf-path&#x3D;&#x2F;etc&#x2F;nginx&#x2F;nginx.conf--error-log-path&#x3D;&#x2F;var&#x2F;log&#x2F;nginx&#x2F;error.log--http-log-path&#x3D;&#x2F;var&#x2F;log&#x2F;nginx&#x2F;access.log--pid-path&#x3D;&#x2F;var&#x2F;run&#x2F;nginx.pid--lock-path&#x3D;&#x2F;var&#x2F;run&#x2F;nginx.lock ä¸´æ—¶ç¼“å­˜â½‚ä»¶--http-client-body-temp-path&#x3D;&#x2F;var&#x2F;cache&#x2F;nginx&#x2F;client_temp--http-proxy-temp-path&#x3D;&#x2F;var&#x2F;cache&#x2F;nginx&#x2F;proxy_temp--http-fastcgi-temp-path&#x3D;&#x2F;var&#x2F;cache&#x2F;nginx&#x2F;fastcgi_temp--http-uwsgi-temp-path&#x3D;&#x2F;var&#x2F;cache&#x2F;nginx&#x2F;uwsgi_temp--http-scgi-temp-path&#x3D;&#x2F;var&#x2F;cache&#x2F;nginx&#x2F;scgi_tempè®¾å®šNginxè¿›ç¨‹å¯åŠ¨â½¤æˆ·å’Œç»„(å®‰å…¨)--user&#x3D;nginx--group&#x3D;nginxè®¾ç½®é¢å¤–çš„å‚æ•°å°†è¢«æ·»åŠ åˆ°CFLAGSå˜é‡--with-cc-optè®¾ç½®é™„åŠ çš„å‚æ•°, é“¾æŽ¥ç³»ç»Ÿåº“--with-ld-optÂ¶äºŒã€æºç ç¼–è¯‘å®‰è£…nginxå®˜æ–¹ä¸‹è½½åœ°å€ï¼šhttp://nginx.org/en/download.htmlç‰ˆæœ¬å·æ˜¯åŒæ•°çš„æ˜¯ç¨³å®šç‰ˆï¼Œè€Œå•æ•°åˆ™æ˜¯å¼€å‘ç‰ˆã€‚ä»¥ä¸‹ä»¥ç¼–è¯‘å®‰è£…æ¥è®²è¿°ã€‚ä¸ºä»€ä¹ˆé€‰æ‹©ç¼–è¯‘å®‰è£…è€Œä¸é€‰æ‹©yumæˆ–è€…aptåŒ…ç®¡ç†å™¨å®‰è£…å‘¢ï¼Ÿå› ä¸ºyumæˆ–è€…aptå®‰è£…çš„æ˜¯å·²ç»ç¼–è¯‘å¥½çš„äºŒè¿›åˆ¶æ–‡ä»¶ï¼Œè€Œå·²ç»ç¼–è¯‘å¥½å°±è¯´æ˜Žæ‰©å±•æ¨¡å—å·²ç»å›ºå®šï¼Œå¾ˆéš¾åŽ»æ·»åŠ æˆ–è€…ä¿®æ”¹è‡ªå®šä¹‰çš„æ‰©å±•æ¨¡å—ï¼Œè¿™é‡Œé€‰æ‹©ç¼–è¯‘å®‰è£…å°±æ˜¯ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ã€‚12345678910111213141516171819202122232425262728293031323334353637383940414243#yumå®‰è£…nginxç¼–è¯‘ä¾èµ–yum install -y gcc gcc-c++ zlib gd-devel zlib-devel openssl openssl-devel pcre-devel make #aptå®‰è£…nginxç¼–è¯‘ä¾èµ–# apt install -y gcc make build-essential zlib1g-dev libpcre3-dev libssl-dev#ä¸‹è½½nginxæºç åŒ…wget http://nginx.org/download/nginx-1.18.0.tar.gz#è§£åŽ‹nginxæºç åŒ…tar zxvf nginx-1.18.0.tar.gz#è®¾ç½®vimç¼–è¾‘nginxé…ç½®æ–‡ä»¶è¯­æ³•é«˜äº®ï¼ˆå¯é€‰ï¼Œå¦‚æžœä¸æƒ³ç”¨äº†ç›´æŽ¥åˆ é™¤~/.vim/ç›®å½•å³å¯ï¼‰mkdir ~/.vim &amp;&amp; cp -r nginx-1.18.0/contrib/vim/* ~/.vim/#è¿›å…¥è§£åŽ‹å¥½çš„nginxæºç ç›®å½•cd nginx-1.18.0#ç”Ÿæˆnginxçš„ç¼–è¯‘é…ç½®æ–‡ä»¶MakeFile./configure \--prefix=/opt/nginx \--with-http_ssl_module \--with-http_v2_module \--with-http_sub_module \--with-http_gzip_static_module \--with-http_stub_status_module#æ ¹æ®MakeFileç¼–è¯‘nginxmake#å®‰è£…nginxmake install#å¸è½½nginxï¼ˆå¦‚éœ€è¦ï¼‰rm -rf /opt/nginx#å¦‚æžœMakeFileé‡Œæœ‰uninstallç›®æ ‡ï¼Œä¹Ÿå¯ä»¥é€šè¿‡make uninstallè¿›è¡Œå¸è½½#make uninstall#æ¸…é™¤ç¼–è¯‘ç”Ÿæˆæ–‡ä»¶ï¼ˆå¦‚éœ€è¦ï¼ŒåŒ…æ‹¬ç”Ÿæˆçš„MakeFileã€äºŒè¿›åˆ¶æ–‡ä»¶ç­‰ï¼‰make clean#åˆ é™¤è§£åŽ‹nginxæºç ç›®å½•å’Œnginxå®‰è£…åŒ…ï¼ˆå¦‚éœ€è¦ï¼‰cd .. &amp;&amp; rm -rf nginx-1.18.0 &amp;&amp; rm -f nginx-1.18.0.tar.gzðŸ’â€â™‚ nginx å®‰è£…ç›®å½•ç»“æž„è¯´æ˜Ž123456789101112131415161718192021222324&gt;/opt/nginx&gt;â”œâ”€â”€ conf #å­˜æ”¾é…ç½®æ–‡ä»¶&gt;â”‚ â”œâ”€â”€ fastcgi.conf&gt;â”‚ â”œâ”€â”€ fastcgi.conf.default&gt;â”‚ â”œâ”€â”€ fastcgi_params&gt;â”‚ â”œâ”€â”€ fastcgi_params.default&gt;â”‚ â”œâ”€â”€ koi-utf&gt;â”‚ â”œâ”€â”€ koi-win&gt;â”‚ â”œâ”€â”€ mime.types&gt;â”‚ â”œâ”€â”€ mime.types.default&gt;â”‚ â”œâ”€â”€ nginx.conf&gt;â”‚ â”œâ”€â”€ nginx.conf.default&gt;â”‚ â”œâ”€â”€ scgi_params&gt;â”‚ â”œâ”€â”€ scgi_params.default&gt;â”‚ â”œâ”€â”€ uwsgi_params&gt;â”‚ â”œâ”€â”€ uwsgi_params.default&gt;â”‚ â””â”€â”€ win-utf&gt;â”œâ”€â”€ html #webåŸºç¡€æ ¹ç›®å½•&gt;â”‚ â”œâ”€â”€ 50xhtml&gt;â”‚ â””â”€â”€ index.html&gt;â”œâ”€â”€ logs #æ—¥å¿—æ–‡ä»¶ç›®å½•&gt;â””â”€â”€ sbin #æ‰§è¡Œè„šæœ¬ç›®å½• â””â”€â”€ nginxðŸ’â€â™‚ å¸¸ç”¨ç¼–è¯‘å‚æ•°è¯´æ˜Ž123456789101112131415161718192021222324252627&gt;--prefix=ç»å¯¹è·¯å¾„ #å®šä¹‰nginxå®‰è£…ç›®å½•ã€‚é»˜è®¤ä¸º/usr/local/nginxç›®å½•ã€‚æ³¨æ„ï¼šè¿™ä¸ªç›®æ ‡çš„è®¾ç½®ä¼šå½±å“å…¶ä»–å‚æ•°ä¸­çš„ç›¸å¯¹è·¯å¾„ç›®å½•ã€‚ï¼ˆä¾‹å¦‚ï¼š--sbin-path==sbin/nginx,é‚£ä¹ˆå®žé™…ä¸Šå¯æ‰§è¡Œæ–‡ä»¶nginxçš„å®‰è£…å­˜æ”¾è·¯å¾„ä¸º/opt/nginx/sbin/nginxã€‚ï¼‰&gt;--sbin-path=path #è®¾ç½®nginxå¯æ‰§è¡Œæ–‡ä»¶çš„å®‰è£…å­˜æ”¾è·¯å¾„ã€‚é»˜è®¤ä¸º&lt;prefix&gt;/sbin/nginxã€‚&gt;--conf-path=path #è®¾ç½®nginx.confé…ç½®æ–‡ä»¶çš„å®‰è£…å­˜æ”¾è·¯å¾„ã€‚é»˜è®¤ä¸º&lt;prefix&gt;/confç›®å½•ã€‚&gt;--pid-path=path #è®¾ç½®å°†å­˜å‚¨ä¸»è¿›ç¨‹çš„è¿›ç¨‹IDçš„nginx.pidæ–‡ä»¶çš„è·¯å¾„ã€‚é»˜è®¤&lt;prefix&gt;/logs/nginx.pid&gt;--error-log-path=path #è®¾ç½®errorè­¦å‘Šå’Œè¯Šæ–­æ—¥å¿—è·¯å¾„ã€‚é»˜è®¤&lt;prefix&gt;/logs/error.log&gt;--http-log-path=path #è®¾ç½®æ¯ä¸ªHTTPè¯·æ±‚å®Œæˆçš„è®°å½•æ—¥å¿—è·¯å¾„ã€‚é»˜è®¤&lt;prefix&gt;/logs/access.log&gt;--user=ç”¨æˆ·å #æŒ‡å®šNginx workerè¿›ç¨‹è¿è¡Œæ—¶æ‰€å±žçš„ç”¨æˆ·ã€‚é»˜è®¤ä¸ºï¼šnobodyã€‚&gt;--group=ç”¨æˆ·ç»„ #æŒ‡å®šNginx workerè¿›ç¨‹è¿è¡Œæ—¶æ‰€å±žçš„ç”¨æˆ·ç»„ã€‚é»˜è®¤ä¸ºï¼šnobodyã€‚&gt;--with-pcre #å…è®¸ç”¨æˆ·ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼è¿›è¡Œæ¨¡å¼åŒ¹é…å’Œæ–‡æœ¬å¤„ç†ã€‚ï¼ˆé»˜è®¤å¯ç”¨ï¼‰&gt;--with-threads #å¯ç”¨ Nginx çš„çº¿ç¨‹æ± åŠŸèƒ½ã€‚ï¼ˆé»˜è®¤å¯ç”¨ï¼‰&gt;--with-poll_module #å¯ç”¨pollå¤šè·¯å¤ç”¨å™¨æ¨¡å—ï¼Œç”¨äºŽå¤„ç†ç½‘ç»œäº‹ä»¶çš„å¤šè·¯å¤ç”¨ã€‚ï¼ˆé»˜è®¤å¯ç”¨ï¼Œå¦‚æžœä¸æ˜¾å¼æŒ‡å®šè¿™--with-select_moduleæˆ–--with-poll_moduleä¸­çš„ä»»ä½•ä¸€ä¸ªï¼ŒNginx é»˜è®¤ä¼šä½¿ç”¨ --with-poll_moduleï¼‰&gt;--with-select_module #å¯ç”¨selectå¤šè·¯å¤ç”¨å™¨æ¨¡å—ã€‚ï¼ˆé»˜è®¤æœªå¯ç”¨ï¼‰&gt;--with-file-aio #å¯ç”¨æ–‡ä»¶å¼‚æ­¥ioæ”¯æŒã€‚ï¼ˆé»˜è®¤æœªå¯ç”¨ï¼‰&gt;--with-ipv6 #å¯ç”¨å¯¹IPv6çš„æ”¯æŒã€‚ï¼ˆé»˜è®¤å¯ç”¨ï¼‰&gt;--with-http_upstream_module #å¯ç”¨åå‘ä»£ç†å’Œè´Ÿè½½å‡è¡¡çš„åŠŸèƒ½ï¼Œç”±ngx_http_upstream_moduleæ¨¡å—æ”¯æŒï¼ˆé»˜è®¤å¯ç”¨ï¼‰&gt;--with-http_ssl_module #å¯ç”¨æž„å»ºå°†HTTPSåè®®æ”¯æŒæ·»åŠ åˆ°HTTPæœåŠ¡å™¨çš„æ¨¡å—çš„åŠŸèƒ½ã€‚éœ€è¦OpenSSLåº“æ¥æž„å»ºå’Œè¿è¡Œæ­¤æ¨¡å—ã€‚ï¼ˆé»˜è®¤æœªå¯ç”¨ï¼‰&gt;--with-http_gzip_static_module #ç”¨äºŽé¢„åŽ‹ç¼©é™æ€æ–‡ä»¶ï¼Œä»Žè€Œæé«˜ç½‘ç«™çš„æ€§èƒ½ã€‚ï¼ˆé»˜è®¤æœªå¯ç”¨ï¼‰&gt;--with-http_gunzip_module #ç”¨äºŽåœ¨ Nginx ä¸­è§£åŽ‹ç¼©ç»è¿‡åŽ‹ç¼©çš„ HTTP å“åº”ï¼Œä»¥ä¾¿å®¢æˆ·ç«¯å¯ä»¥æ­£å¸¸æŽ¥æ”¶å“åº”ã€‚ï¼ˆé»˜è®¤æœªå¯ç”¨ï¼‰&gt;--with-http_sub_module #ç”¨äºŽåœ¨å“åº”å†…å®¹ä¸­æ‰§è¡Œå­—ç¬¦ä¸²æ›¿æ¢æ“ä½œï¼Œå¸¸ç”¨äºŽä¿®æ”¹ HTMLã€CSSã€JavaScript ç­‰å“åº”å†…å®¹ã€‚ï¼ˆé»˜è®¤æœªå¯ç”¨ï¼‰&gt;--with-http_realip_module #ç”¨äºŽæ›¿æ¢å®¢æˆ·ç«¯ IP åœ°å€ï¼Œä»¥è§£å†³åå‘ä»£ç†ä¸­çš„ IP åœ°å€ä¼ªè£…é—®é¢˜ã€‚ï¼ˆé»˜è®¤æœªå¯ç”¨ï¼‰&gt;--with-http_image_filter_module #æä¾›äº†åœ¨ HTTP è¯·æ±‚ä¸­å¤„ç†å›¾åƒçš„åŠŸèƒ½ï¼Œä¾‹å¦‚ç¼©æ”¾ã€è£å‰ªã€æ—‹è½¬ã€åè½¬ç­‰åŠŸèƒ½ã€‚ï¼ˆé»˜è®¤æœªå¯ç”¨ï¼‰&gt;--with-http_mp4_module #æä¾›äº†å¤„ç† MP4 æ–‡ä»¶çš„åŠŸèƒ½ï¼ŒåŒ…æ‹¬åˆ‡å‰²ã€æ‹¼æŽ¥ã€ç¼–ç ç­‰ã€‚ï¼ˆé»˜è®¤æœªå¯ç”¨ï¼‰&gt;--with-mail #å®‰è£…é‚®ä»¶æœåŠ¡å™¨åå‘ä»£ç†æ¨¡å—ï¼Œä½¿nginxå¯ä»¥åå‘ä»£ç†IMAPã€POP3ã€SMTPç­‰åè®®ã€‚ï¼ˆé»˜è®¤æœªå¯ç”¨ï¼‰&gt;--with-mail_ssl_module #ä½¿IMAPã€POP3ã€SMTPç­‰åè®®æ”¯æŒSSL/TLSåè®®åŠ å¯†ä¼ è¾“æ”¯æŒã€‚ï¼ˆé»˜è®¤æœªå¯ç”¨ï¼‰&gt;--with-http_v2_module #æ˜¯ç”¨äºŽå¯ç”¨ HTTP/2 æ¨¡å—çš„é€‰é¡¹ã€‚ï¼ˆé»˜è®¤æœªå¯ç”¨ï¼‰&gt;--with-http_stub_status_module #æä¾›äº†ä¸€ä¸ªç®€å•çš„çŠ¶æ€é¡µé¢ï¼Œç”¨äºŽç›‘æŽ§ Nginx æœåŠ¡å™¨çš„è¿è¡ŒçŠ¶æ€ã€‚ï¼ˆé»˜è®¤æœªå¯ç”¨ï¼‰å¦‚æžœæƒ³å¼ºåˆ¶ç¦ç”¨æŸä¸ªæ¨¡å—ï¼Œåªéœ€è¦å°†--withæ”¹æˆ--withoutã€‚æ¯”å¦‚ç¦ç”¨selectå¤šè·¯å¤ç”¨å™¨æ¨¡å—ï¼Œåˆ™å‚æ•°ä¸ºï¼š--without-select_moduleÂ¶ä¸‰ã€nginxå¸¸ç”¨å‘½ä»¤12345678910111213141516171819#å¯åŠ¨nginx#åœæ­¢nginx -s stop #ç«‹å³åœæ­¢æœåŠ¡ï¼ˆæŸ¥å‡ºnginxè¿›ç¨‹idåŽç›´æŽ¥å¼ºåˆ¶killæ€æŽ‰è¿›ç¨‹ï¼‰nginx -s quit #å®‰å…¨åœ°åœæ­¢æœåŠ¡ï¼ˆç­‰å¾…æ‰€æœ‰è¯·æ±‚å¤„ç†å®Œæˆå†åœæ­¢æœåŠ¡ï¼‰#é‡æ–°åŠ è½½é…ç½®ï¼ˆé‡æ–°åŠ è½½é…ç½®è€Œæ— éœ€åœæ­¢æˆ–é‡å¯æœåŠ¡ï¼‰nginx -s reload#æ£€æµ‹é…ç½®æ–‡ä»¶æ­£ç¡®æ€§nginx -t#æŸ¥çœ‹nginxçš„ã€æ˜¾å¼ã€‘ç¼–è¯‘å‚æ•°nginx -V#æŸ¥çœ‹nginxæ˜¯å¦åœ¨è¿è¡Œps aux | grep nginxå…³äºŽnginx -VæŸ¥çœ‹ç¼–è¯‘å‚æ•°çš„è¯´æ˜Žï¼šæ³¨æ„æ‰§è¡Œnginx -Våªæ˜¯åˆ—å‡ºåœ¨ç¼–è¯‘æ—¶æ‰§è¡Œ./configureçš„æ˜¾å¼è®¾ç½®å‚æ•°ï¼Œè€Œä¸ä»£è¡¨çœŸå®žç¼–è¯‘è¿›nginxçš„é…ç½®ï¼Œæ¯”å¦‚æœ‰å¾ˆå¤šçš„ç¼–è¯‘å‚æ•°æ˜¯é»˜è®¤å¯ç”¨çš„ï¼Œç¼–è¯‘æ—¶ä¹Ÿè¢«ç¼–è¯‘è¿›nginxäº†ï¼Œä½†æ˜¯é€šè¿‡nginx -Vå‘½ä»¤å´ä¸èƒ½çœ‹åˆ°å¯¹åº”çš„å‚æ•°ã€‚å¦‚åœ¨æ‰§è¡Œ./configureæ—¶å³ä½¿æ²¡æœ‰æ˜¾å¼åœ°è®¾ç½®--with-pcreè¿™ä¸ªç¼–è¯‘å‚æ•°ï¼Œä½†æ˜¯ç¼–è¯‘å¥½çš„nginxè¿˜æ˜¯èƒ½å¤Ÿä½¿ç”¨æ­£åˆ™åŒ¹é…åŠŸèƒ½ã€‚Â¶äº”ã€nginxå†…ç½®å˜é‡httpæ ¸â¼¼æ¨¡å—çš„å†…ç½®å˜é‡httpè¯·æ±‚å˜é‡Nginxå†…ç½®å˜é‡â¾ƒå®šä¹‰å˜é‡1234567891011121314151617$uri: å½“å‰è¯·æ±‚çš„uriï¼Œä¸å¸¦å‚æ•°$request_uri: å®¢æˆ·ç«¯è¯·æ±‚çš„uriï¼Œå¸¦å®Œæ•´å‚æ•°$host: å®¢æˆ·ç«¯è¯·æ±‚å¤´ä¸­Hostå­—æ®µé™¤åŽ»ç«¯å£å·çš„éƒ¨åˆ†ã€‚å¯ç”¨äºŽèŽ·å–è¯·æ±‚çš„åŸŸåä¿¡æ¯ï¼Œå¦‚æžœhostâ¾¸éƒ¨ä¸ºç©ºåˆ™$hostç­‰ä»·$http_host: å®¢æˆ·ç«¯è¯·æ±‚å¤´ä¸­Hostçš„å®Œæ•´å­—æ®µï¼ˆå¦‚æœ‰å®¢æˆ·ç«¯è¯·æ±‚å¤´Hostä¸­æœ‰ç«¯å£åˆ™$http_hoståŒ…å«ç«¯å£ï¼‰$proxy_hostï¼šæŒ‡proxy_passä¸­è®¾ç½®çš„hostå€¼ï¼ˆå¯¹äºŽç«¯å£ï¼Œé»˜è®¤80ä¸åŒ…å«ï¼Œå…¶ä»–ç«¯å£åŒ…å«ï¼‰$remote_addr: å®¢æˆ·ç«¯IPï¼ˆå¦‚æžœåªç»è¿‡ä¸€ä¸ªä»£ç†æœåŠ¡å™¨ï¼Œåˆ™å¯ä»¥è¡¨ç¤ºå®¢æˆ·ç«¯çš„çœŸå®žIPï¼Œä½†å¦‚æžœç»è¿‡å¤šä¸ªä»£ç†æœåŠ¡å™¨ï¼Œåˆ™åªèƒ½è¡¨ç¤ºæœ€åŽä»£ç†æœåŠ¡å™¨çš„IPï¼‰$remote_port: å®¢æˆ·ç«¯è¯·æ±‚çš„ç«¯å£ï¼ˆå®¢æˆ·ç«¯é€šå¸¸ä¼šä½¿ç”¨éšæœºçš„åŠ¨æ€ç«¯å£æ¥å‘èµ·è¯·æ±‚ï¼‰$remote_user: å®¢æˆ·ç«¯å‘èµ·è¯·æ±‚æ—¶çš„ HTTP è®¤è¯ç”¨æˆ·å$request_filename: å®¢æˆ·ç«¯è¯·æ±‚çš„æ–‡ä»¶è·¯å¾„$request_method: æ±‚â½…æ³•, GET POST PUT$server_addr: å‰æœåŠ¡å™¨çš„ IP åœ°å€$server_name: æœåŠ¡å™¨é…ç½®çš„åŸŸåã€‚å¯ç”¨äºŽèŽ·å–å½“å‰æœåŠ¡å™¨å—ï¼ˆserver blockï¼‰çš„é…ç½®çš„åŸŸåä¿¡æ¯ï¼ˆå¦‚æžœåœ¨é…ç½®ä¸­ä½¿ç”¨äº†å¤šä¸ª server_name å£°æ˜Žï¼Œ$server_name å°†ä¼šè¿”å›žç¬¬ä¸€ä¸ªåŒ¹é…æˆåŠŸçš„åŸŸåã€‚ï¼‰$server_port: æœåŠ¡å™¨ç›‘å¬çš„ç«¯å£$server_protocol: nginxæœåŠ¡å™¨ä½¿ç”¨çš„åè®®ç‰ˆæœ¬, å¦‚http/1.1 http/1.0$schemeï¼šå®¢æˆ·ç«¯è¯·æ±‚çš„åè®®æ–¹æ¡ˆï¼Œå¦‚ï¼šhttp æˆ– https ç­‰$document_root: å½“å‰è¯·æ±‚æ˜ å°„åˆ°çš„rooté…ç½®$hostname: nginxæ‰€åœ¨çš„æœåŠ¡å™¨çš„ä¸»æœºåÂ¶å…­ã€è‡ªå®šä¹‰nginxé…ç½®æ–‡ä»¶åªéœ€åœ¨ nginx ä¸»é…ç½®æ–‡ä»¶ nginx.conf çš„ http èŠ‚ç‚¹ä¸­å¯¼å…¥ conf/conf.d ç›®å½•ï¼ˆå¦‚æžœæ²¡æœ‰è‡ªè¡Œåˆ›å»ºè¯¥ç›®å½•ï¼‰çš„æ‰€æœ‰é…ç½®æ–‡ä»¶ï¼Œå³å¯åœ¨ conf/conf.d ç›®å½•ä¸‹è‡ªå®šä¹‰é…ç½®æ–‡ä»¶ã€‚å¦‚ä¸‹ï¼š12345678910111213http &#123; include mime.types; keepalive_timeout 65; #ä»¥ä¸Šä¸ºå…¶ä»–æ— å…³é…ç½®... ### æ·»åŠ è¿™è¡Œä»£ç  ### include conf.d/*.conf; #nginxåŠ è½½ä¸»é…ç½®æ–‡ä»¶çš„æ—¶å€™è‡ªåŠ¨å¯¼å…¥conf.dç›®å½•ä¸‹çš„æ‰€æœ‰è‡ªå®šä¹‰é…ç½®æ–‡ä»¶ #ä»¥ä¸‹ä¸ºå…¶ä»–æ— å…³é…ç½®... server &#123; &#125;&#125;Â¶ä¸ƒã€é…ç½®httpæœåŠ¡ï¼ˆ1ï¼‰åˆ›å»ºnginxé…ç½®æ–‡ä»¶1vim /opt/nginx/conf/conf.d/http.confå†…å®¹å¦‚ä¸‹ï¼š12345678910111213141516171819202122232425262728293031323334353637383940414243## ç¬¬ä¸€ä¸ªè™šæ‹Ÿä¸»æœºé…ç½®(é™æ€èµ„æºæœåŠ¡å™¨)server &#123; listen 8080; server_name localhost; #server_name example.com; #access_log logs/host.access.log main; location / &#123; root /opt/nginx/html; #é…ç½®webæ ¹ç›®å½• index index.html index.htm; &#125; #å›¾ç‰‡èµ„æº location ~ .*\.(jpg|png|gif)$ &#123; root /opt/nginx/html; gzip on; #ä¼ è¾“åŽ‹ç¼©ï¼ŒåŽ‹ç¼©æœ¬èº«æ¯”è¾ƒè€—è´¹æœåŠ¡ç«¯æ€§èƒ½ï¼Œä½†ç»™å¸¦å®½å¸¦æ¥æ›´å¥½çš„ä¼ è¾“ã€‚æ°å½“çš„ä½¿ç”¨ä¼šå¢žå¼ºèµ„æºçš„è®¿é—®æ•ˆçŽ‡ã€‚ gzip_http_version 1.1; gzip_comp_level 2; gzip_types gzip_types text/plain application/json application/x-javascript application/css application/xml application/xml+rss text/javascript application/x-httpd-php image/jpeg image/gif image/png; #åŽ‹ç¼©çš„æ–‡ä»¶ç±»åž‹ï¼Œä¸€èˆ¬æŒ‰éœ€é€‰æ‹©ï¼Œä½†è¿™é‡Œä¸ºäº†æœªæ¥æ–¹ä¾¿æ·»åŠ æ–‡ä»¶ç±»åž‹å¤šé€‰ä¸€äº›ã€‚å…·ä½“é…ç½®å‚è€ƒæ–‡ä»¶/etc/nginx/mime.types expires 1h; #è®¾ç½®é™æ€èµ„æºæ–‡ä»¶åœ¨å®¢æˆ·ç«¯çš„ç¼“å­˜æ—¶é—´ï¼Œé™¤éžå®¢æˆ·æ¸…æ¥šç¼“å­˜æˆ–è€…å…³é—­ç¼“å­˜æˆ–è€…å¼ºåˆ¶è®¿é—®æ‰ä¼šå†è®¿é—®ã€‚ &#125; #æ–‡ä»¶ä¸‹è½½ location /download &#123; root /opt/nginx/html; #è®¿é—® http://localhost:8080/download/test.txt æ—¶ä¼šä¸‹è½½ /opt/nginx/html/test.txt è·¯å¾„çš„æ–‡ä»¶ charset utf-8,gbk; #è§£å†³ç›®å½•æˆ–è€…æ–‡ä»¶æ˜¾ç¤ºä¸­æ–‡ä¹±ç çš„é—®é¢˜ autoindex on; #è‡ªåŠ¨æ˜¾ç¤ºèµ„æºè·¯å¾„çš„æ–‡ä»¶åç§°ï¼Œä»¥æ­¤æ¥å¼€å¯ç«™ç‚¹ä¸‹è½½ã€‚é»˜è®¤ä¸ºå…³é—­ã€‚ autoindex_localtime on; #æ˜¾ç¤ºçš„â½‚æ–‡ä»¶æ—¶é—´ä¸ºæ–‡ä»¶çš„æœåŠ¡å™¨æ—¶é—´ã€‚é»˜è®¤ä¸ºoffï¼Œæ˜¾ç¤ºçš„æ–‡ä»¶æ—¶é—´ä¸ºGMTæ—¶é—´ autoindex_exact_size off; #é»˜è®¤ä¸ºonï¼Œ æ˜¾ç¤ºå‡ºæ–‡ä»¶çš„ç¡®åˆ‡â¼¤å¤§å°ï¼Œå•ä½æ˜¯bytes;ä¿®æ”¹ä¸ºoffï¼Œæ˜¾ç¤ºå‡ºæ–‡ä»¶çš„â¼¤å¤§æ¦‚å¤§å°ï¼Œå•ä½æ˜¯kBæˆ–è€…MBæˆ–è€…GBã€‚ &#125;&#125;## ç¬¬äºŒä¸ªè™šæ‹Ÿä¸»æœºé…ç½®# server &#123;# listen 8081;# server_name localhost; #ä¸»æœºåï¼Œä¸€èˆ¬ä¸ºä¸€ä¸ªæˆ–å¤šä¸ªåŸŸåæˆ–è€…ip# location / &#123;# root /opt/nginx/html;# index index.html index.htm;# &#125;# &#125;ï¼ˆ2ï¼‰é…ç½®é˜²ç«å¢™å’Œé‡è½½ nginx é…ç½®123456#é˜²ç«å¢™å¼€æ”¾ç›¸å…³ç›‘å¬ç«¯å£firewall-cmd --permanent --add-port=8080/tcpfirewall-cmd --reload#é‡è½½é…ç½®/opt/nginx/sbin/nginx -s reloadï¼ˆ3ï¼‰æµ‹è¯•è®¾æœåŠ¡å™¨ IP åœ°å€ä¸ºï¼š198.23.188.200ï¼Œåˆ™è®¿é—®åœ°å€ï¼šhttp://198.23.188.200:8080Â¶å…«ã€é…ç½®åå‘ä»£ç†åå‘ä»£ç†ï¼šå³å°†å®¢æˆ·ç«¯å¯¹æœ¬æœºçš„è®¿é—®è¯·æ±‚ä»£ç†è½¬å‘åˆ°å…¶ä»–æœåŠ¡å™¨ã€‚åœ¨åå‘ä»£ç†ä¸­å¯ä»¥æŒ‰éœ€æ±‚é…ç½®å°†è¯·æ±‚è½¬å‘åˆ°ä¸€ä¸ªæˆ–å¤šä¸ªæœåŠ¡å™¨ï¼Œå¦‚æžœæ˜¯å¤šä¸ªæœåŠ¡å™¨åˆ™å¯å®žçŽ°è´Ÿè½½å‡è¡¡çš„åŠŸèƒ½æ•ˆæžœã€‚Â¶1. åå‘ä»£ç†å¸¸ç”¨æŒ‡ä»¤ä»£ç†è¯·æ±‚å¸¸ç”¨æŒ‡ä»¤ï¼šproxy_pass: æŒ‡å®šåå‘ä»£ç†çš„ç›®æ ‡æœåŠ¡å™¨åœ°å€ã€‚ä¾‹å¦‚ï¼šproxy_pass http://backend_server;proxy_set_header: è®¾ç½®ä¼ é€’ç»™åŽç«¯æœåŠ¡å™¨çš„è¯·æ±‚å¤´ä¿¡æ¯ï¼ˆåªæœ‰ç›®æ ‡æœåŠ¡å™¨éœ€è¦è§£æžè¿™äº›è¯·æ±‚å¤´æ—¶æ‰æœ‰å¿…è¦é…ç½®ï¼Œå¦åˆ™å¯ä»¥ä¸é…ç½®ï¼‰ã€‚å¸¸è§çš„è¯·æ±‚å¤´è®¾ç½®é…ç½®å¦‚ä¸‹ï¼š12345678proxy_set_header "Connection" ""; #åˆ é™¤Connectionè¯·æ±‚å¤´proxy_set_header Host $host; #è®¾ç½®è¯·æ±‚å¤´æŒ‡å®šä»£ç†è¯·æ±‚æ—¶çš„Hostå¤´ï¼Œ$hostè¡¨ç¤ºä½¿ç”¨å®¢æˆ·ç«¯çš„Hostï¼ˆä¸åŒ…å«ç«¯å£ï¼‰ä½œä¸ºä»£ç†è¯·æ±‚çš„Hostproxy_set_header X-Real-IP $remote_addr; #è®¾ç½®è¯·æ±‚å¤´æŒ‡å®šå®¢æˆ·ç«¯çœŸå®žIPï¼Œ$remote_addrè¡¨ç¤ºå®¢æˆ·ç«¯çš„IPï¼ˆå¦‚æžœåªç»è¿‡ä¸€ä¸ªä»£ç†æœåŠ¡å™¨ï¼Œåˆ™å¯ä»¥è¡¨ç¤ºå®¢æˆ·ç«¯çš„çœŸå®žIPï¼Œä½†å¦‚æžœç»è¿‡å¤šä¸ªä»£ç†æœåŠ¡å™¨ï¼Œåˆ™åªèƒ½è¡¨ç¤ºæœ€åŽä»£ç†æœåŠ¡å™¨çš„IPï¼‰proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for; #è®¾ç½®è¯·æ±‚å¤´æŒ‡å®šå®¢æˆ·ç«¯çš„çœŸå®žIPä»¥åŠæ¯æ¬¡é€”ç»çš„ä»£ç†IPï¼ˆç”±é€—å·éš”å¼€,å¦‚ï¼š"192.168.60.1, 192.168.60.101"ï¼Œç¬¬ä¸€ä¸ªIPå³ä¸ºå®¢æˆ·ç«¯çš„çœŸå®žIPã€‚ç›®æ ‡æœåŠ¡å™¨ä½¿ç”¨X-Forwarded-ForèŽ·å–å®¢æˆ·ç«¯çœŸå®žIPæ¯”è¾ƒå¯é ï¼‰proxy_set_header X-Forwarded-Proto $scheme; #è®¾ç½®è¯·æ±‚å¤´æŒ‡å®šä½¿ç”¨çš„åè®®ï¼ˆå¦‚ï¼šhttpæˆ–è€…httpsï¼Œ$schemeè¡¨ç¤ºå®¢æˆ·ç«¯è¯·æ±‚nginxæ—¶ä½¿ç”¨çš„åè®®ï¼‰##å…¶ä»–è¯·æ±‚å¤´è®¾ç½®proxy_set_header Range $http_range;proxy_http_version: æŒ‡å®š Nginx ä½¿ç”¨çš„ HTTP åè®®ç‰ˆæœ¬ï¼ˆå¦‚ï¼š1.0ï¼ˆé»˜è®¤ï¼‰ã€1.1ï¼‰ã€‚ä¾‹å¦‚ï¼šproxy_http_version 1.1;proxy_cache: è®¾ç½®åå‘ä»£ç†ç¼“å­˜ã€‚å¯ä»¥é€šè¿‡ proxy_cache æŒ‡ä»¤æ¥å¯ç”¨ç¼“å­˜å¹¶æŒ‡å®šç¼“å­˜åç§°ã€‚ä¾‹å¦‚ï¼šproxy_cache my_cache;proxy_redirect: è®¾ç½®åå‘ä»£ç†çš„é‡å®šå‘è§„åˆ™ã€‚å¯é€‰å€¼ï¼šdefaultï¼ˆé»˜è®¤å€¼ï¼Œä¼šè‡ªåŠ¨æ›¿æ¢å“åº”å¤´ä¸­çš„åŸŸåéƒ¨åˆ†ï¼Œå®žçŽ°åå‘ä»£ç†çš„é‡å®šå‘ï¼‰ã€offï¼ˆç¦ç”¨é‡å®šå‘ï¼Œä¸è¿›è¡Œä»»ä½•ä¿®æ”¹ï¼‰ã€redirect &lt;replacement&gt;ï¼ˆæŒ‡å®šè‡ªå®šä¹‰çš„é‡å®šå‘è§„åˆ™ï¼Œå¯ä»¥ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼ç­‰æ–¹å¼æ¥è¿›è¡Œæ›¿æ¢ï¼‰ã€‚ä¾‹å¦‚ï¼šproxy_redirect default;proxy_connect_timeout: è®¾ç½®ä¸ŽåŽç«¯æœåŠ¡å™¨å»ºç«‹è¿žæŽ¥çš„è¶…æ—¶æ—¶é—´ã€‚ä¾‹å¦‚ï¼šproxy_connect_timeout 5s;proxy_read_timeout: è®¾ç½®ä»ŽåŽç«¯æœåŠ¡å™¨è¯»å–å“åº”çš„è¶…æ—¶æ—¶é—´ã€‚ä¾‹å¦‚ï¼šproxy_read_timeout 10s;proxy_send_timeout: è®¾ç½®å‘åŽç«¯æœåŠ¡å™¨å‘é€è¯·æ±‚çš„è¶…æ—¶æ—¶é—´ã€‚ä¾‹å¦‚ï¼šproxy_send_timeout 10s;proxy_bufferingï¼š å¯ç”¨æˆ–ç¦ç”¨åå‘ä»£ç†ç¼“å†²ã€‚å¯é€‰ï¼šonï¼ˆé»˜è®¤ï¼‰ã€offï¼Œä¾‹å¦‚ï¼šproxy_buffering on;proxy_buffer_size &lt;size&gt;ï¼šè®¾ç½®åå‘ä»£ç†ä½¿ç”¨çš„ç¼“å†²åŒºå¤§å°ã€‚é»˜è®¤ 4KBã€‚ä½¿ç”¨ç¤ºä¾‹ï¼šproxy_buffer_size 8k;proxy_buffers &lt;number&gt; &lt;size&gt;ï¼šè®¾ç½®åå‘ä»£ç†ç¼“å†²åŒºçš„æ•°é‡å’Œå¤§å°ã€‚é»˜è®¤æ¯ä¸ªè¿žæŽ¥åˆ†é…ä¸¤ä¸ªç¼“å†²åŒºï¼Œæ¯ä¸ªç¼“å†²åŒºå¤§å°ä¸º 4KBã€‚å¦‚ï¼šproxy_buffers 4 16k;proxy_busy_buffers_size &lt;size&gt;ï¼šè®¾ç½® Nginx å¯ä»¥ç§¯ç´¯çš„å“åº”æ•°æ®å¤§å°ã€‚é»˜è®¤ä¸º proxy_buffers ä¸­æ¯ä¸ªç¼“å†²åŒºçš„å¤§å°ã€‚ä½¿ç”¨ç¤ºä¾‹ï¼šproxy_busy_buffers_size 32k;proxy_ignore_headers: è®¾ç½®è¦å¿½ç•¥çš„å“åº”å¤´å­—æ®µã€‚ä¾‹å¦‚ï¼šproxy_ignore_headers X-Accel-Expires Expires Cache-Control;proxy_intercept_errors: å¯ç”¨æˆ–ç¦ç”¨æ‹¦æˆªæ¥è‡ªåŽç«¯æœåŠ¡å™¨çš„é”™è¯¯å“åº”ã€‚ä½¿ç”¨ç¤ºä¾‹ï¼šproxy_intercept_errors on;proxy_max_temp_file_size &lt;size&gt;ï¼šè®¾ç½®ä»£ç†æ¨¡å—åœ¨å¤„ç†å“åº”æ—¶ï¼Œå…è®¸åˆ›å»ºçš„ä¸´æ—¶æ–‡ä»¶çš„æœ€å¤§å¤§å°ã€‚é»˜è®¤ï¼š1024MBã€‚ä½¿ç”¨ç¤ºä¾‹ï¼šproxy_max_temp_file_size 512m;ä»£ç†ç›¸åº”å¸¸ç”¨æŒ‡ä»¤ï¼š1ï¼‰add_headerï¼š æ·»åŠ è‡ªå®šä¹‰å“åº”å¤´åˆ°æœåŠ¡å™¨çš„å“åº”ä¸­ã€‚ä¾‹å¦‚è·¨åŸŸé…ç½®ï¼Œå¦‚ä¸‹ï¼š12345678910111213add_header Access-Control-Allow-Origin *;add_header Access-Control-Allow-Methods "GET, POST, OPTIONS, PUT, DELETE";add_header Access-Control-Allow-Headers "Authorization, Content-Type, X-Requested-With";add_header Access-Control-Max-Age 86400;if ($request_method = 'OPTIONS') &#123; add_header Access-Control-Allow-Origin *; add_header Access-Control-Allow-Methods "GET, POST, OPTIONS, PUT, DELETE"; add_header Access-Control-Allow-Headers "Authorization, Content-Type, X-Requested-With"; add_header Access-Control-Max-Age 86400; add_header Content-Length 0; add_header Content-Type "text/plain charset=UTF-8"; return 200;&#125;Â¶2. ç®€å•çš„åå‘ä»£ç†é…ç½®Â¶1ï¼‰åå‘ä»£ç†ç›¸å…³é…ç½®nginx é…ç½®ç›¸å…³å†…å®¹å¦‚ä¸‹ï¼š12345678910111213141516171819#ä¸Šæ¸¸æœåŠ¡å™¨é…ç½®ï¼ˆåŽç«¯æœåŠ¡å™¨ï¼‰upstream ops_load &#123; #è´Ÿè½½å‡è¡¡é…ç½® #é…ç½®å¤šä¸ªhttpæœåŠ¡å™¨å³å¯å®žçŽ°è´Ÿè½½å‡è¡¡ï¼Œå…¶ä¸­httpæœåŠ¡å™¨å¯ä¸ºæœ¬æœºï¼Œä¹Ÿå¯ä»¥ä¸ºå…¶ä»–æœåŠ¡å™¨ #é»˜è®¤è´Ÿè½½å‡è¡¡çš„è°ƒåº¦æ¨¡å¼ä¸ºè½®è¯¢æ–¹å¼ server 192.168.60.101::8080; server 192.168.60.102:8080;&#125;server &#123; listen 8080; server_name localhost; location / &#123; #åå‘ä»£ç† #proxy_pass http://localhost:8081; #å¦‚æžœåªéœ€è¦ä»£ç†åˆ°ä¸€ä¸ªæœåŠ¡å™¨ï¼Œåˆ™å¯ä»¥å¦‚æ­¤é…ç½® proxy_pass http://ops_load; #å¦‚æžœåªéœ€è¦ä»£ç†åˆ°å¤šä¸ªæœåŠ¡å™¨ï¼Œåˆ™å¯ä»¥é…ç½®upstreamæ¥è®¾ç½®å¤šä¸ªæœåŠ¡å™¨ &#125;&#125;Â¶2ï¼‰åå‘ä»£ç†æµ‹è¯•ç¤ºä¾‹æµ‹è¯•ç¤ºä¾‹éœ€æ±‚ï¼šåœ¨æœ¬åœ°çš„ nginx ä¸­æ¨¡æ‹Ÿåå‘ä»£ç†åˆ°æœ¬åœ°ä¸åŒç«¯å£çš„ä¸Šæ¸¸æœåŠ¡å™¨ã€‚ï¼ˆ1ï¼‰åˆ›å»ºnginxé…ç½®æ–‡ä»¶1vim /opt/nginx/conf/conf.d/load_balance.confå†…å®¹å¦‚ä¸‹ï¼š123456789101112131415161718192021222324252627282930313233#ä¸Šæ¸¸æœåŠ¡å™¨é…ç½®ï¼ˆåŽç«¯æœåŠ¡å™¨ï¼‰upstream ops_load &#123; server localhost:8081; server 127.0.0.1:8082; server 127.0.0.1:8083;&#125;server &#123; listen 8080; server_name localhost; location / &#123; proxy_pass http://ops_load; &#125;&#125;#æ¨¡æ‹Ÿ3ä¸ªä¸Šæ¸¸æœåŠ¡å™¨server &#123; listen 8081; root /opt/nginx/html/node1; index index.html;&#125;server &#123; listen 8082; root /opt/nginx/html/node2; index index.html;&#125;server &#123; listen 8083; root /opt/nginx/html/node3; index index.html;&#125;ï¼ˆ2ï¼‰æœåŠ¡èŠ‚ç‚¹å·®å¼‚è®¾ç½®ä¸ºäº†æ›´ç›´è§‚çš„æµ‹è¯•è´Ÿè½½å‡è¡¡æ•ˆæžœï¼Œå¯ç»™ä¸åŒçš„æœåŠ¡èŠ‚ç‚¹çš„è®¿é—®é¡µé¢åšä¸€äº›å·®å¼‚å†…å®¹1234mkdir -p /opt/nginx/html/&#123;node1,node2,node3&#125;echo "node1" &gt; /opt/nginx/html/node1/index.htmlecho "node2" &gt; /opt/nginx/html/node2/index.htmlecho "node3" &gt; /opt/nginx/html/node3/index.htmlï¼ˆ3ï¼‰é…ç½®é˜²ç«å¢™å’Œé‡è½½ nginx é…ç½®123456#é˜²ç«å¢™å¼€æ”¾ç›¸å…³ç›‘å¬ç«¯å£firewall-cmd --permanent --add-port=8080/tcpfirewall-cmd --reload#é‡è½½é…ç½®/opt/nginx/sbin/nginx -s reloadï¼ˆ4ï¼‰æµ‹è¯•è®¾æœåŠ¡å™¨ IP åœ°å€ä¸ºï¼š198.23.188.200ï¼Œåˆ™è®¿é—®åœ°å€ï¼šhttp://198.23.188.200:8080æç¤ºï¼šæµè§ˆå™¨è¦è®¾ç½®â€œåœç”¨ç¼“å­˜â€ï¼Œå¦åˆ™å¯èƒ½ä¸€ç›´è§‚å¯Ÿåˆ°çš„éƒ½æ˜¯ä¸€ä¸ªå†…å®¹ã€‚Â¶3. é«˜çº§çš„åå‘ä»£ç†é…ç½®Â¶1ï¼‰è´Ÿè½½å‡è¡¡è°ƒåº¦æ¨¡å¼é…ç½®åœ¨Nginxä¸­ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‡ ç§è´Ÿè½½å‡è¡¡è°ƒåº¦æ¨¡å¼ï¼šè½®è¯¢ï¼ˆRound Robinï¼‰ï¼šé»˜è®¤æƒ…å†µä¸‹ï¼ŒNginxä½¿ç”¨è½®è¯¢æ¨¡å¼è¿›è¡Œè´Ÿè½½å‡è¡¡ã€‚å®ƒæŒ‰ç…§æ¯ä¸ªåŽç«¯æœåŠ¡å™¨çš„é¡ºåºä¾æ¬¡åˆ†é…è¯·æ±‚ï¼Œç¡®ä¿æ¯ä¸ªåŽç«¯æœåŠ¡å™¨å¹³å‡åˆ†æ‹…è´Ÿè½½ã€‚åŠ æƒè½®è¯¢ï¼ˆWeighted Round Robinï¼‰ï¼šå¯ä»¥ä¸ºæ¯ä¸ªåŽç«¯æœåŠ¡å™¨åˆ†é…ä¸åŒçš„æƒé‡ï¼Œä»¥è°ƒæ•´å®ƒä»¬æŽ¥æ”¶è¯·æ±‚çš„æ¯”ä¾‹ã€‚è¾ƒé«˜æƒé‡çš„æœåŠ¡å™¨å°†èŽ·å¾—æ›´å¤šçš„è¯·æ±‚ã€‚IPå“ˆå¸Œï¼ˆIP Hashï¼‰ï¼šåŸºäºŽå®¢æˆ·ç«¯IPåœ°å€å¯¹è¯·æ±‚è¿›è¡Œå“ˆå¸Œè¿ç®—ï¼Œå°†ç›¸åŒIPçš„è¯·æ±‚å§‹ç»ˆè½¬å‘åˆ°åŒä¸€ä¸ªåŽç«¯æœåŠ¡å™¨ã€‚è¿™å¯¹äºŽéœ€è¦ä¿æŒä¼šè¯æˆ–çŠ¶æ€çš„åº”ç”¨ç¨‹åºéžå¸¸æœ‰ç”¨ã€‚æœ€å°‘è¿žæŽ¥ï¼ˆLeast Connectionsï¼‰ï¼šå°†è¯·æ±‚åˆ†é…ç»™å½“å‰è¿žæŽ¥æ•°æœ€å°‘çš„åŽç«¯æœåŠ¡å™¨ã€‚è¿™æœ‰åŠ©äºŽå¹³è¡¡æœåŠ¡å™¨çš„è´Ÿè½½ï¼Œå°†è¯·æ±‚å‘é€åˆ°è¿žæŽ¥è¾ƒå°‘çš„æœåŠ¡å™¨ï¼Œä»¥ç¡®ä¿æ›´å‡åŒ€çš„è´Ÿè½½åˆ†å¸ƒã€‚URLå“ˆå¸Œï¼ˆURL Hashï¼‰ï¼šåŸºäºŽè¯·æ±‚çš„URLå¯¹åŽç«¯æœåŠ¡å™¨è¿›è¡Œå“ˆå¸Œè¿ç®—ï¼Œä½¿ç›¸åŒURLçš„è¯·æ±‚æ€»æ˜¯è½¬å‘åˆ°åŒä¸€ä¸ªåŽç«¯æœåŠ¡å™¨ã€‚è¿™å¯¹äºŽéœ€è¦ç¼“å­˜æˆ–ç‰¹å®šå¤„ç†é€»è¾‘çš„åº”ç”¨ç¨‹åºéžå¸¸æœ‰ç”¨ã€‚nginx é…ç½®ç›¸å…³å†…å®¹å¦‚ä¸‹ï¼š1234567891011121314151617181920212223242526272829303132333435363738394041424344454647#ï¼ˆ1ï¼‰è½®è¯¢ï¼ˆRound Robinï¼‰æ¨¡å¼upstream backend-rr &#123; #é»˜è®¤çš„è´Ÿè½½å‡è¡¡è°ƒåº¦æ¨¡å¼å³ä¸ºè½®è¯¢æ¨¡å¼ï¼Œä¸éœ€è¦æ˜¾å¼åœ°é…ç½® server 192.168.60.101::8080; server 192.168.60.102:8080;&#125;#ï¼ˆ2ï¼‰åŠ æƒè½®è¯¢ï¼ˆWeighted Round Robinï¼‰æ¨¡å¼upstream backend-wrr &#123; server 192.168.60.101::8080 weight=5; server 192.168.60.102:8080 weight=2;&#125;#ï¼ˆ3ï¼‰IPå“ˆå¸Œï¼ˆIP Hashï¼‰æ¨¡å¼upstream backend-ih &#123; ip_hash; server 192.168.60.101::8080; server 192.168.60.102:8080;&#125;#ï¼ˆ4ï¼‰æœ€å°‘è¿žæŽ¥ï¼ˆLeast Connectionsï¼‰æ¨¡å¼upstream backend-lc &#123; least_conn; server 192.168.60.101::8080; server 192.168.60.102:8080;&#125;#ï¼ˆ5ï¼‰URLå“ˆå¸Œï¼ˆURL Hashï¼‰æ¨¡å¼upstream backend-uh &#123; hash $request_uri; server 192.168.60.101::8080; server 192.168.60.102:8080;&#125;server &#123; listen 8080; server_name localhost; location / &#123; proxy_pass http://backend-rr; # proxy_pass http://backend-wrr; # proxy_pass http://backend-ih; # proxy_pass http://backend-lc; # proxy_pass http://backend-uh; &#125;&#125;Â¶2ï¼‰è´Ÿè½½å‡è¡¡å¥åº·æ£€æŸ¥é…ç½®Â¶ï¼ˆ1ï¼‰ç®€è¦è¯´æ˜ŽNginxå¥åº·æ£€æŸ¥çš„ä½œç”¨ï¼šNginx çš„å¥åº·æ£€æŸ¥åŠŸèƒ½ä¸»è¦ç”¨äºŽç›‘æŽ§åŽç«¯æœåŠ¡å™¨çš„å¯ç”¨æ€§å’ŒçŠ¶æ€ï¼Œä»¥ç¡®ä¿è¯·æ±‚è¢«æ­£ç¡®åœ°è½¬å‘ç»™å¯ç”¨çš„æœåŠ¡å™¨ã€‚å…·ä½“ä½œç”¨å¦‚ä¸‹ï¼šç¡®ä¿æœåŠ¡å¯ç”¨æ€§ï¼šé€šè¿‡å®šæœŸå‘åŽç«¯æœåŠ¡å™¨å‘é€å¥åº·æ£€æŸ¥è¯·æ±‚ï¼ŒNginxå¯ä»¥æ£€æµ‹åˆ°æœåŠ¡å™¨æ˜¯å¦åœ¨çº¿ã€å“åº”æ­£å¸¸ä»¥åŠæœåŠ¡æ˜¯å¦å¯ç”¨ã€‚å¦‚æžœæŸä¸ªæœåŠ¡å™¨å®•æœºæˆ–æ— æ³•æ­£å¸¸å“åº”è¯·æ±‚ï¼ŒNginxå°†è‡ªåŠ¨å°†è¯·æ±‚è½¬å‘ç»™å…¶ä»–å¯ç”¨çš„æœåŠ¡å™¨ï¼Œç¡®ä¿æœåŠ¡çš„æŒç»­å¯ç”¨æ€§ã€‚åŠ¨æ€è´Ÿè½½å‡è¡¡ï¼šå¥åº·æ£€æŸ¥åŠŸèƒ½å¯ä»¥è®©Nginxæ ¹æ®åŽç«¯æœåŠ¡å™¨çš„çŠ¶æ€è‡ªåŠ¨è°ƒæ•´è¯·æ±‚çš„è½¬å‘ç­–ç•¥ã€‚å½“æŸä¸ªæœåŠ¡å™¨å‡ºçŽ°æ•…éšœæˆ–æ€§èƒ½ä¸‹é™æ—¶ï¼ŒNginxå¯ä»¥æš‚æ—¶å°†è¯·æ±‚ä»Žæ•…éšœçš„æœåŠ¡å™¨è½¬å‘åˆ°å…¶ä»–å¥åº·çš„æœåŠ¡å™¨ï¼Œå®žçŽ°è´Ÿè½½å‡è¡¡å¹¶é¿å…å‘ä¸å¯ç”¨çš„æœåŠ¡å™¨å‘é€è¯·æ±‚ã€‚æ•…éšœè‡ªåŠ¨æ¢å¤ï¼šå¥åº·æ£€æŸ¥è¿˜èƒ½å¤Ÿå¸®åŠ©Nginxæ£€æµ‹åˆ°åŽç«¯æœåŠ¡å™¨çš„æ¢å¤æƒ…å†µã€‚ä¸€æ—¦æŸä¸ªæœåŠ¡å™¨æ¢å¤æ­£å¸¸ï¼Œå¥åº·æ£€æŸ¥ä¼šå°†å…¶æ ‡è®°ä¸ºå¥åº·ï¼Œå¹¶é‡æ–°å°†è¯·æ±‚è½¬å‘åˆ°è¯¥æœåŠ¡å™¨ä¸Šï¼Œå®žçŽ°æ•…éšœè‡ªåŠ¨æ¢å¤ã€‚é¿å…æœåŠ¡é›ªå´©æ•ˆåº”ï¼šé€šè¿‡å®šæœŸæ£€æŸ¥åŽç«¯æœåŠ¡å™¨çš„çŠ¶æ€ï¼ŒNginxå¯ä»¥åŠæ—¶å‘çŽ°æ•…éšœæœåŠ¡å™¨ï¼Œå¹¶å°†è¯·æ±‚è½¬å‘åˆ°å…¶ä»–å¯ç”¨çš„æœåŠ¡å™¨ä¸Šã€‚è¿™æœ‰åŠ©äºŽé¿å…ç”±äºŽæ•…éšœæœåŠ¡å™¨æ— æ³•å¤„ç†è¯·æ±‚è€Œå¯¼è‡´çš„æœåŠ¡é›ªå´©æ•ˆåº”ï¼Œæé«˜æ•´ä½“ç³»ç»Ÿçš„ç¨³å®šæ€§å’Œå¯é æ€§ã€‚æ€»çš„æ¥è¯´ï¼ŒNginxçš„å¥åº·æ£€æŸ¥åŠŸèƒ½å¯ä»¥æå‡åŽç«¯æœåŠ¡å™¨çš„å¯ç”¨æ€§ã€ä¼˜åŒ–è´Ÿè½½å‡è¡¡ç­–ç•¥ã€è‡ªåŠ¨æ¢å¤æ•…éšœæœåŠ¡å™¨ï¼Œå¹¶æé«˜æ•´ä¸ªç³»ç»Ÿçš„å¯é æ€§å’Œæ€§èƒ½ã€‚Nginxå¥åº·æ£€æŸ¥çš„ç±»åž‹ï¼šðŸ’â€â™‚ Nginx æ”¯æŒä¸¤ç§ç±»åž‹çš„å¥åº·æ£€æŸ¥ï¼šè¢«åŠ¨å¥åº·æ£€æŸ¥å’Œä¸»åŠ¨å¥åº·æ£€æŸ¥ã€‚è¢«åŠ¨å¥åº·æ£€æŸ¥ï¼ˆPassive Health Checksï¼‰ï¼š è¢«åŠ¨å¥åº·æ£€æŸ¥æ˜¯æŒ‡Nginxé€šè¿‡ç›‘æŽ§åŽç«¯æœåŠ¡å™¨çš„è¯·æ±‚å“åº”æ¥ç¡®å®šæœåŠ¡å™¨çš„å¥åº·çŠ¶æ€ã€‚å½“Nginxå‘åŽç«¯æœåŠ¡å™¨è½¬å‘è¯·æ±‚æ—¶ï¼Œå®ƒä¼šç­‰å¾…ä¸€æ®µæ—¶é—´æ¥æŽ¥æ”¶æœåŠ¡å™¨çš„å“åº”ã€‚å¦‚æžœæœåŠ¡å™¨åœ¨è§„å®šæ—¶é—´å†…æˆåŠŸå“åº”è¯·æ±‚ï¼ŒNginxå°†è®¤ä¸ºæœåŠ¡å™¨æ˜¯å¥åº·çš„ï¼Œå¹¶ç»§ç»­å°†è¯·æ±‚è½¬å‘åˆ°è¯¥æœåŠ¡å™¨ã€‚å¦‚æžœæœåŠ¡å™¨åœ¨è§„å®šæ—¶é—´å†…æ— æ³•å“åº”è¯·æ±‚ï¼ˆä¾‹å¦‚è¿”å›žé”™è¯¯çŠ¶æ€ç æˆ–è¿žæŽ¥è¶…æ—¶ï¼‰ï¼ŒNginxå°†è®¤ä¸ºæœåŠ¡å™¨æ˜¯ä¸å¥åº·çš„ï¼Œå¹¶åœæ­¢å°†è¯·æ±‚è½¬å‘åˆ°è¯¥æœåŠ¡å™¨ï¼Œç›´åˆ°ä¸‹æ¬¡å¥åº·æ£€æŸ¥é‡æ–°ç¡®å®šå…¶å¥åº·çŠ¶æ€ã€‚ä¸»åŠ¨å¥åº·æ£€æŸ¥ï¼ˆActive Health Checksï¼‰ï¼š ä¸»åŠ¨å¥åº·æ£€æŸ¥æ˜¯æŒ‡Nginxå®šæœŸä¸»åŠ¨å‘åŽç«¯æœåŠ¡å™¨å‘é€å¥åº·æ£€æŸ¥è¯·æ±‚æ¥ç¡®å®šæœåŠ¡å™¨çš„å¥åº·çŠ¶æ€ã€‚Nginxä¼šæŒ‰ç…§é¢„è®¾çš„æ—¶é—´é—´éš”å‘é€å¥åº·æ£€æŸ¥è¯·æ±‚åˆ°åŽç«¯æœåŠ¡å™¨ï¼Œå¹¶ç­‰å¾…æœåŠ¡å™¨çš„å“åº”ã€‚å¦‚æžœæœåŠ¡å™¨æˆåŠŸå“åº”äº†å¥åº·æ£€æŸ¥è¯·æ±‚ï¼ŒNginxå°†è®¤ä¸ºæœåŠ¡å™¨æ˜¯å¥åº·çš„ï¼Œå¹¶ç»§ç»­å°†è¯·æ±‚è½¬å‘åˆ°è¯¥æœåŠ¡å™¨ã€‚å¦‚æžœæœåŠ¡å™¨æ— æ³•å“åº”å¥åº·æ£€æŸ¥è¯·æ±‚ï¼ˆä¾‹å¦‚è¿”å›žé”™è¯¯çŠ¶æ€ç æˆ–è¿žæŽ¥è¶…æ—¶ï¼‰ï¼ŒNginxå°†è®¤ä¸ºæœåŠ¡å™¨æ˜¯ä¸å¥åº·çš„ï¼Œå¹¶åœæ­¢å°†è¯·æ±‚è½¬å‘åˆ°è¯¥æœåŠ¡å™¨ï¼Œç›´åˆ°ä¸‹æ¬¡å¥åº·æ£€æŸ¥é‡æ–°ç¡®å®šå…¶å¥åº·çŠ¶æ€ã€‚ä¸»åŠ¨å¥åº·æ£€æŸ¥ç›¸å¯¹äºŽè¢«åŠ¨å¥åº·æ£€æŸ¥å¯ä»¥æ›´å¿«åœ°æ¢å¤æ•…éšœæœåŠ¡å™¨çš„æµé‡åˆ†å‘ï¼Œè¿™æ˜¯å› ä¸ºå®ƒå¯ä»¥ä¸»åŠ¨ç›‘æŽ§å’Œæ£€æµ‹åŽç«¯æœåŠ¡å™¨çš„å¥åº·çŠ¶æ€ã€‚ðŸ’â€â™‚ è¢«åŠ¨å¥åº·æ£€æŸ¥çš„ä¸»åŠ¨å¥åº·æ£€æŸ¥çš„é€‰æ‹©ï¼šä½¿ç”¨è¢«åŠ¨å¥åº·æ£€æŸ¥æ—¶ï¼ŒNginx åªèƒ½åœ¨æ”¶åˆ°å®¢æˆ·ç«¯è¯·æ±‚æ—¶æ‰èƒ½æ£€æµ‹åŽç«¯æœåŠ¡å™¨çš„çŠ¶æ€ã€‚å¦‚æžœåŽç«¯æœåŠ¡å™¨å‡ºçŽ°æ•…éšœæˆ–å˜å¾—ä¸å¯ç”¨ï¼ŒNginx éœ€è¦ç­‰å¾…å®¢æˆ·ç«¯è¯·æ±‚åˆ°è¾¾å¹¶åœ¨ä¸€å®šæ—¶é—´å†…æ²¡æœ‰æ”¶åˆ°æ­£ç¡®çš„å“åº”ï¼Œæ‰ä¼šæš‚æ—¶å°†æµé‡åœæ­¢å‘é€åˆ°è¯¥æœåŠ¡å™¨ã€‚è¿™æ„å‘³ç€åœ¨å‘ç”Ÿæ•…éšœæ—¶ï¼Œå­˜åœ¨ä¸€å®šçš„å»¶è¿Ÿæ—¶é—´ï¼ˆé€šå¸¸æ˜¯å‡ ç§’é’Ÿï¼‰æ‰èƒ½åˆ‡æ¢æµé‡åˆ°å…¶ä»–å¯ç”¨çš„æœåŠ¡å™¨ä¸Šã€‚å…¶é€‚ç”¨äºŽå¯¹æ•…éšœæ¢å¤é€Ÿåº¦è¦æ±‚ä¸é«˜çš„æƒ…å†µã€‚ä½¿ç”¨ä¸»åŠ¨å¥åº·æ£€æŸ¥æ—¶ï¼Œå…¶å…è®¸ Nginx å®šæœŸå‘é€å¥åº·æ£€æŸ¥è¯·æ±‚åˆ°åŽç«¯æœåŠ¡å™¨ã€‚å¦‚æžœæœåŠ¡å™¨æ— æ³•æ­£å¸¸å“åº”æˆ–è¿”å›žé”™è¯¯çš„å“åº”ï¼ŒNginx å°†ç«‹å³æ„è¯†åˆ°è¯¥æœåŠ¡å™¨çš„æ•…éšœï¼Œå¹¶åœæ­¢å°†æµé‡å‘é€åˆ°è¯¥æœåŠ¡å™¨ï¼Œè€Œä¸éœ€è¦ç­‰å¾…å®¢æˆ·ç«¯è¯·æ±‚ã€‚è¿™ä½¿å¾—æ•…éšœæœåŠ¡å™¨çš„æ¢å¤é€Ÿåº¦æ›´å¿«ï¼Œå› ä¸º Nginx å¯ä»¥æ›´å¿«åœ°æ£€æµ‹åˆ°æ•…éšœå¹¶å°†æµé‡è½¬ç§»åˆ°å…¶ä»–å¥åº·çš„æœåŠ¡å™¨ä¸Šã€‚é€šè¿‡ä¸»åŠ¨å¥åº·æ£€æŸ¥ï¼ŒNginx å¯ä»¥æ›´åŠæ—¶åœ°å‘çŽ°æ•…éšœï¼Œå¹¶ä¸”å¯ä»¥æ›´å¿«åœ°å°†æµé‡ä»Žæ•…éšœæœåŠ¡å™¨åˆ‡æ¢åˆ°å…¶ä»–å¯ç”¨æœåŠ¡å™¨ä¸Šï¼Œä»Žè€Œæé«˜ç³»ç»Ÿçš„å¯ç”¨æ€§å’Œæ•…éšœæ¢å¤é€Ÿåº¦ã€‚å…¶é€‚ç”¨äºŽå¯¹æ•…éšœæ¢å¤é€Ÿåº¦è¦æ±‚æ¯”è¾ƒé«˜çš„æƒ…å†µã€‚Â¶ï¼ˆ2ï¼‰è¢«åŠ¨å¥åº·æ£€æŸ¥é…ç½®Nginx é»˜è®¤æ˜¯æ”¯æŒåŸºç¡€çš„è¢«åŠ¨å¥åº·æ£€æŸ¥çš„ï¼ˆç”±ngx_http_upstream_moduleæ¨¡å—æ”¯æŒï¼‰ï¼Œä½¿ç”¨é…ç½®å¦‚ä¸‹ï¼š123456789101112upstream ops_load &#123; server 192.168.60.101:8080 max_fails=1 fail_timeout=10s; server 192.168.60.102:8080 max_fails=1 fail_timeout=10s;&#125;server &#123; listen 8080; server_name localhost; location / &#123; proxy_pass http://ops_load; &#125;&#125;max_fails=1 fail_timeout=10s è¯´æ˜Žï¼šå¦‚æžœåŽç«¯æœåŠ¡å™¨åœ¨ä¸€æ¬¡å¥åº·æ£€æŸ¥å‘¨æœŸå†…ï¼ˆç”±Nginxé…ç½®ä¸­çš„check intervalæŒ‡å®šï¼‰å¤±è´¥ä¸€æ¬¡æˆ–æ›´å¤šï¼Œåˆ™å°†å…¶æ ‡è®°ä¸ºä¸å¥åº·çŠ¶æ€ã€‚ä¸€æ—¦æ ‡è®°ä¸ºä¸å¥åº·çŠ¶æ€ï¼ŒNginxå°†æš‚æ—¶å°†å…¶æŽ’é™¤åœ¨è´Ÿè½½å‡è¡¡èŒƒå›´ä¹‹å¤–çš„æ—¶é—´ï¼ˆç”±fail_timeoutæŒ‡å®šï¼‰ï¼Œåœ¨æ­¤æœŸé—´ä¸ä¼šå°†è¯·æ±‚è½¬å‘ç»™è¯¥æœåŠ¡å™¨ã€‚è¿‡äº†æŒ‡å®šçš„æ—¶é—´åŽï¼ŒNginxå°†é‡æ–°å°è¯•å°†è¯·æ±‚è½¬å‘ç»™è¯¥æœåŠ¡å™¨ã€‚max_fails=1ï¼šè¡¨ç¤ºåœ¨ä¸€æ¬¡å¥åº·æ£€æŸ¥å‘¨æœŸå†…ï¼Œå…è®¸çš„æœ€å¤§å¤±è´¥æ¬¡æ•°ã€‚å¦‚æžœåœ¨ä¸€æ¬¡å¥åº·æ£€æŸ¥å‘¨æœŸå†…ï¼Œè¯¥æœåŠ¡å™¨çš„å¤±è´¥æ¬¡æ•°è¾¾åˆ°æˆ–è¶…è¿‡è®¾å®šçš„æœ€å¤§å¤±è´¥æ¬¡æ•°ï¼Œåˆ™è¯¥æœåŠ¡å™¨å°†è¢«æ ‡è®°ä¸ºä¸å¥åº·çŠ¶æ€ã€‚fail_timeout=10sï¼šè¡¨ç¤ºåœ¨æœåŠ¡å™¨è¢«æ ‡è®°ä¸ºä¸å¥åº·çŠ¶æ€åŽï¼Œæš‚æ—¶å°†å…¶æŽ’é™¤åœ¨è´Ÿè½½å‡è¡¡èŒƒå›´ä¹‹å¤–çš„æ—¶é—´ã€‚åœ¨æŒ‡å®šçš„æ—¶é—´æ®µå†…ï¼ŒNginxä¸ä¼šå°†è¯·æ±‚è½¬å‘ç»™è¯¥æœåŠ¡å™¨ã€‚åœ¨æ­¤ç¤ºä¾‹ä¸­ï¼Œå¦‚æžœæœåŠ¡å™¨è¢«æ ‡è®°ä¸ºä¸å¥åº·çŠ¶æ€ï¼Œå°†åœ¨10ç§’åŽé‡æ–°å°è¯•å°†è¯·æ±‚è½¬å‘ç»™è¯¥æœåŠ¡å™¨ã€‚Â¶ï¼ˆ3ï¼‰ä¸»åŠ¨å¥åº·æ£€æŸ¥Nginx é»˜è®¤ä¸æ”¯æŒä¸»åŠ¨å¥åº·æ£€æŸ¥ï¼Œéœ€ä½¿ç”¨ç¬¬ä¸‰æ–¹æ¨¡å—æ¥æ”¯æŒï¼Œå¯ä½¿ç”¨å¼€æºçš„ nginx_upstream_check_module æ¨¡å—æ¥å®žçŽ°ä¸»åŠ¨å¥åº·æ£€æŸ¥ï¼Œé‡æ–°ç¼–è¯‘å®‰è£… nginx å¯¼å…¥å¯¼å…¥è¯¥æ¨¡å—ï¼Œå¦‚ä¸‹ï¼š123456789101112131415161718192021222324252627282930#ï¼ˆ1ï¼‰ä¸‹è½½nginx_upstream_check_moduleæ¨¡å—æºç git clone https://github.com/yaoweibin/nginx_upstream_check_module.git /tmp/nginx_upstream_check_module#git clone https://ghproxy.com/https://github.com/yaoweibin/nginx_upstream_check_module.git /tmp/nginx_upstream_check_module#ï¼ˆ2ï¼‰ä¸‹è½½nginxæºç åŒ…wget http://nginx.org/download/nginx-1.20.1.tar.gz#ï¼ˆ3ï¼‰è§£åŽ‹nginxæºç åŒ…tar zxvf nginx-1.20.1.tar.gz#ï¼ˆ4ï¼‰è¿›å…¥è§£åŽ‹å¥½çš„nginxæºç ç›®å½•cd nginx-1.20.1#ï¼ˆ5ï¼‰ï¼ˆå¯é€‰ï¼‰å¦‚æžœéœ€è¦ä½¿ç”¨å¥åº·ç›‘æŽ§é¡µé¢ï¼Œåˆ™éœ€è¦ä½¿ç”¨nginx_upstream_check_moduleæ¨¡å—çš„è¡¥ä¸æ–‡ä»¶ç»™nginxæºç æ‰“è¡¥ä¸ï¼ˆä¿®æ”¹nginxæºç ï¼‰yum install -y patchpatch -p1 &lt; /tmp/nginx_upstream_check_module/check_1.20.1+.patch #æŒ‡å®šç‰¹å®šnginxç‰ˆæœ¬çš„è¡¥ä¸æ–‡ä»¶ç»™nginxæºç æ‰“è¡¥ä¸#ï¼ˆ6ï¼‰æŒ‡å®šnginx_upstream_check_moduleæ¨¡å—è·¯å¾„ç”Ÿæˆnginxçš„ç¼–è¯‘é…ç½®æ–‡ä»¶MakeFile./configure \--prefix=/opt/nginx \--with-http_ssl_module \--with-http_v2_module \--with-http_sub_module \--with-http_gzip_static_module \--with-http_stub_status_module \--add-module=/tmp/nginx_upstream_check_module#ï¼ˆ7ï¼‰ç¼–è¯‘å¹¶å®‰è£…make &amp;&amp; make installè¯´æ˜Žï¼šnginx å„ç‰ˆæœ¬ç¼–è¯‘nginx_upstream_check_moduleæ¨¡å—åŽå³å¯æ­£å¸¸ä½¿ç”¨ä¸»åŠ¨å¥åº·æ£€æŸ¥é…ç½®ï¼Œä½†æ˜¯è¦ä½¿ç”¨è¯¥æ¨¡å—çš„å¥åº·ç›‘æŽ§é¡µé¢åŠŸèƒ½ï¼ˆç”±æ¨¡å—çš„check_statusæŒ‡ä»¤æ”¯æŒï¼‰ï¼Œåˆ™éœ€è¦å®‰è£…æ¨¡å—ä¸­è¡¥ä¸æ”¯æŒçš„ç‰¹å®šç‰ˆæœ¬ nginxï¼ˆæ”¯æŒç‰ˆæœ¬å¯åœ¨æ¨¡å—æºç ä¸­æŸ¥çœ‹ï¼Œä¾‹å¦‚æºç ä¸­æœ‰check_1.20.1+.patchè¿™ä¸ªè¡¥ä¸æ–‡ä»¶ï¼Œåˆ™è¯´æ˜Žå…¶æ”¯æŒ nginx çš„1.20.1ç‰ˆæœ¬ï¼‰ï¼Œå¹¶ä½¿ç”¨æ¨¡å—ä¸­ç‰¹å®šç‰ˆæœ¬çš„è¡¥ä¸ä¿®æ”¹ nginx æºç ï¼Œå¦åˆ™å¯èƒ½ä¼šå‡ºçŽ°è®¿é—®å¥åº·ç›‘æŽ§é¡µé¢å¤±è´¥çš„é—®é¢˜ã€‚æç¤ºï¼šå¥åº·ç›‘æŽ§é¡µé¢æ˜¯å¦èƒ½ç”¨ä¸å½±å“ä¸»åŠ¨å¥åº·æ£€æŸ¥åŠŸèƒ½çš„ä½¿ç”¨ï¼Œæ•…æ‰“ä¸æ‰“è¡¥ä¸æ ¹æ®éœ€æ±‚æ¥å†³å®šã€‚nginx ä½¿ç”¨é…ç½®å¦‚ä¸‹ï¼š123456789101112131415161718192021222324252627upstream ops_load &#123; server 192.168.60.101:8080; server 192.168.60.102:8080; #ä»¥10sä¸ºä¸€ä¸ªå‘¨æœŸï¼Œæ¯éš”10sï¼Œnginxä¼šè‡ªåŠ¨å‘ä¸Šæ¸¸æœåŠ¡å™¨å‘é€ä¸€æ¬¡è¯·æ±‚ï¼Œå¦‚æžœè¶…è¿‡5sè¶…æ—¶ä¸”è¾¾åˆ°3æ¬¡ï¼Œåˆ™è¯¥æœåŠ¡å™¨æ ‡è®°ä¸ºä¸å¯ç”¨ï¼› #å¦‚æžœè¯·æ±‚æ¬¡æ•°æœ‰1æ¬¡ä»¥ä¸Šæ²¡æœ‰è¶…æ—¶ï¼Œè¿™æ ‡è®°ä¸ºå¯ç”¨ check interval=10000 rise=1 fall=3 timeout=5000 type=tcp default_down=true; check_http_send "HEAD / HTTP/1.1\r\nConnection: keep-alive\r\n\r\n"; check_http_expect_alive http_2xx http_3xx;&#125;server &#123; listen 8080; server_name localhost; location / &#123; proxy_pass http://ops_load; &#125; # å¥åº·ç›‘æŽ§é¡µé¢ location /status &#123; check_status; access_log off; #allow 127.0.0.1; #deny all; &#125;&#125;nginx_upstream_check_module æ¨¡å—ä¸­ç›¸å…³æŒ‡ä»¤è¯´æ˜Ž:checkï¼šå¥åº·æ£€æŸ¥è§„åˆ™è¯­æ³•ï¼šcheck interval=milliseconds [fall=count] [rise=count] [timeout=milliseconds] [default_down=true|false] [type=tcp|http|ssl_hello|mysql|ajp|fastcgi]å¦‚æžœçœç•¥å‚æ•°ï¼Œåˆ™é»˜è®¤å‚æ•°ä¸º interval=30000 fall=5 rise=2 timeout=1000 default_down=true type=tcpç›¸å…³å‚æ•°è¯´æ˜Žï¼šintervalï¼šæ£€æŸ¥è¯·æ±‚çš„é—´éš”æ—¶é—´riseï¼šå¦‚æžœè¯·æ±‚æ¬¡æ•°æœ‰æŒ‡å®šæ¬¡æ•°ä»¥ä¸Šæ²¡æœ‰è¶…æ—¶ï¼Œè¿™æ ‡è®°ä¸ºå¯ç”¨çŠ¶æ€fallï¼šè¾¾åˆ°çš„æŒ‡å®šå¤±è´¥æ¬¡æ•°åˆ™æ ‡è®°ä¸ºä¸å¯ç”¨çŠ¶æ€timeoutï¼šè¯·æ±‚è¾¾åˆ°æŒ‡å®šçš„è¶…æ—¶æ—¶é—´åˆ™æ ‡è®°ä¸ºä¸å¯ç”¨çŠ¶æ€typeï¼šæ£€æŸ¥åè®®ç±»åž‹ï¼ˆtcpã€ssl_helloã€httpã€mysqlã€ajpã€fastcgiï¼‰default_downï¼šè®¾ç½®åŽç«¯æœåŠ¡å™¨çš„åˆå§‹çŠ¶æ€ï¼ˆfalseï¼šå¯ç”¨ï¼Œé»˜è®¤ï¼›trueï¼šä¸å¯ç”¨ï¼‰portï¼šæŒ‡å®šåŽç«¯æœåŠ¡å™¨çš„æ£€æŸ¥ç«¯å£ã€‚æœ‰å¯èƒ½ä¸ŽåŽŸå§‹æœåŠ¡å™¨ç«¯å£ä¸åŒã€‚é»˜è®¤ç«¯å£ä¸º 0ï¼Œè¡¨ç¤ºä¸ŽåŽŸæ¥çš„åŽç«¯æœåŠ¡å™¨ç›¸åŒcheck_http_sendï¼šå‘é€ç»™åŽç«¯æœåŠ¡å™¨çš„è¯·æ±‚æ•°æ®æŠ¥æ–‡check_http_expect_aliveï¼šåˆ¤æ–­åŽç«¯æœåŠ¡å™¨ä¸ºå¥åº·çš„ç›¸åº”çŠ¶æ€ç check_statusï¼šé€šè¿‡ HTTP æ–¹å¼æ˜¾ç¤ºå¥åº·æ£€æŸ¥æœåŠ¡å™¨çš„çŠ¶æ€ã€‚è®¾ Nginx æœåŠ¡å™¨ IP åœ°å€ä¸ºï¼š192.168.60.156ï¼Œåˆ™å¥åº·ç›‘æŽ§é¡µé¢çš„è®¿é—®åœ°å€ï¼šhttp://192.168.60.156:8080/statuså¯ä»¥æŒ‡å®šå¦‚ä¸‹ URL å‚æ•°æŒ‡å®šå¥åº·ç›‘æŽ§é¡µé¢å“åº”çš„æ•°æ®æ ¼å¼/status?format=html/status?format=csv/status?format=jsonå¥åº·ç›‘æŽ§é¡µé¢æ•ˆæžœå¦‚ä¸‹ï¼šÂ¶3ï¼‰é€šè¿‡åå‘ä»£ç†å®žçŽ°åŠ¨é™åˆ†ç¦»è¿™é‡Œçš„é™æ€èµ„æºç”¨å›¾ç‰‡æ¥è¡¨ç¤ºï¼Œè€ŒåŠ¨æ€èµ„æºç”¨ jsp æ¥è¡¨ç¤ºã€‚Â¶1. ä½¿ç”¨tomcaté…ç½®åŠ¨æ€èµ„æºè¯´æ˜Žï¼šå®‰è£… jdk å¹¶é…ç½®çŽ¯å¢ƒå˜é‡å®‰è£… tomcatï¼Œå®˜æ–¹ä¸‹è½½è§£åŽ‹å³ç”¨ï¼ˆè®¾å®‰è£…è·¯å¾„ä¸ºï¼š/opt/apache-tomcat-8.5.31ï¼‰ï¼ˆ1ï¼‰åœ¨ tomcat web æ ¹ç›®å½•é‡Œåˆ›å»ºä¸€ä¸ª jsp æµ‹è¯•æ–‡ä»¶ï¼š1vim /opt/apache-tomcat-8.5.31/webapps/ROOT/java_test.jspå†…å®¹å¦‚ä¸‹ï¼š12345678910111213&lt;%@ page language="java" import="java.util.*" pageEncoding="utf-8"%&gt;&lt;html&gt;&lt;head&gt;&lt;title&gt;JSP Test Page&lt;/title&gt;&lt;/head&gt;&lt;body&gt;&lt;% Random rand = new Random(); out.println("&lt;h2&gt;Random number:&lt;/h2&gt;"); out.println(rand.nextInt(99)+100);%&gt;&lt;/body&gt;&lt;/html&gt;ï¼ˆ2ï¼‰è¿è¡Œ tomcat1sh /opt/apache-tomcat-8.5.31/bin/startup.shÂ¶2. ä½¿ç”¨nginxé…ç½®é™æ€èµ„æºå’Œåå‘ä»£ç†ï¼ˆ1ï¼‰åˆ›å»ºä¸€ä¸ª nginx é…ç½®æ–‡ä»¶1vim /opt/nginx/conf/conf.d/dynamic_static.confé…ç½®å†…å®¹å¦‚ä¸‹ï¼š123456789101112131415161718192021222324252627server &#123; listen 8080; server_name localhost; # é™æ€èµ„æº location / &#123; root /opt/nginx/html; index index.html; &#125; # åŠ¨æ€èµ„æº location ~ .*\.jsp$ &#123; proxy_pass http://192.168.60.102:8080; # åå‘ä»£ç†åˆ° Tomcat #ä»£ç†åˆ°tomcatç­‰æœåŠ¡å™¨æ—¶æ³¨æ„è¦è®¾ç½®è¯·æ±‚å‚æ•°ï¼Œå¦‚æžœåŽç«¯æœåŠ¡å™¨è®¾ç½®æœ‰ç±»ä¼¼é˜²ç›—é“¾æˆ–è€…æ ¹æ®httpè¯·æ±‚å¤´ä¸­çš„hostå­—æ®µæ¥è¿›è¡Œè·¯ç”±æˆ–åˆ¤æ–­åŠŸèƒ½çš„è¯ï¼Œå¦‚æžœåå‘ä»£ç†å±‚çš„nginxä¸é‡å†™è¯·æ±‚å¤´ä¸­çš„hostå­—æ®µï¼Œå°†ä¼šå¯¼è‡´è¯·æ±‚å¤±è´¥ï¼ŒæŠ¥400é”™è¯¯ã€‚æ•…è‡³å°‘è¦åŒ…å«proxy_set_header Host $http_host;ä¸ºäº†æ–¹ä¾¿ï¼Œä»¥ä¸‹é…ç½®äº†è·Ÿå¤šçš„è¯·æ±‚å‚æ•°ã€‚ proxy_set_header Host $http_host; # proxy_redirect default; # proxy_set_header X-Real-IP $remote_addr; # proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for; # proxy_connect_timeout 30; # proxy_send_timeout 60; # proxy_read_timeout 60; # proxy_buffer_size 32k; # proxy_buffering on; # proxy_buffers 4 128k; # proxy_busy_buffers_size 256k; # proxy_max_temp_file_size 256k; &#125;&#125;ï¼ˆ2ï¼‰ä¸Šä¼ ä¸€å¼ é™æ€èµ„æºæ–‡ä»¶å›¾ç‰‡ï¼ˆå¦‚ï¼šlogo.jpgï¼‰åˆ°é‡Œ /opt/nginx/html ç›®å½•é‡Œã€‚ï¼ˆ3ï¼‰ä¸ºäº†èƒ½ä½“çŽ°å‡ºåŠ¨é™åˆ†ç¦»çš„æ•ˆæžœï¼Œå¯åˆ›å»ºä¸€ä¸ªåŒæ—¶æœ‰é™æ€èµ„æºå†…å®¹åˆæœ‰é™æ€èµ„æºå†…å®¹çš„ html æµ‹è¯•æ–‡ä»¶ï¼Œå¦‚ä¸‹ï¼š1vim /opt/nginx/html/dynamic_static.htmlå†…å®¹å¦‚ä¸‹ï¼š123456789101112131415161718192021222324252627282930&lt;html lang="en"&gt;&lt;head&gt;&lt;meta charset="UTF-8" /&gt;&lt;title&gt;æµ‹è¯•nginxåŠ¨é™åˆ†ç¦»&lt;/title&gt;&lt;script src="http://libs.baidu.com/jquery/2.1.4/jquery.min.js"&gt;&lt;/script&gt;&lt;/head&gt;&lt;script type="text/javascript"&gt;$(document).ready(function()&#123; $.ajax(&#123; type: "GET", url: "/java_test.jsp", success: function(data) &#123; $("#get_data").html(data) &#125;, error: function() &#123; alert("fail!!,è¯·åˆ·æ–°å†è¯•!"); &#125; &#125;);&#125;);&lt;/script&gt;&lt;body&gt; &lt;h1 style="color: #0688e8;"&gt;æµ‹è¯•åŠ¨é™åˆ†ç¦»&lt;/h1&gt; &lt;h2&gt;é™æ€æ•°æ®:&lt;/h2&gt; &lt;img src="/logo.jpg" height="200" width="200"&gt; &lt;h2&gt;åŠ¨æ€æ•°æ®:&lt;/h2&gt; &lt;div id="get_data"&gt;&lt;/div&gt;&lt;/body&gt;&lt;/html&gt;ï¼ˆ4ï¼‰é…ç½®é˜²ç«å¢™å’Œé‡è½½ nginx é…ç½®123456#é˜²ç«å¢™å¼€æ”¾ç›¸å…³ç›‘å¬ç«¯å£firewall-cmd --permanent --add-port=8080/tcpfirewall-cmd --reload#é‡è½½é…ç½®/opt/nginx/sbin/nginx -s reloadÂ¶3. è®¿é—®æµ‹è¯•è®¾æœåŠ¡å™¨ IP åœ°å€ä¸ºï¼š198.23.188.200ï¼Œåˆ™æµ‹è¯•å¦‚ä¸‹ï¼šè®¿é—®é™æ€èµ„æºï¼šhttp://198.23.188.200:8080/logo.jpgè®¿é—®åŠ¨æ€èµ„æºï¼šhttp://198.23.188.200:8080/java_test.jspè®¿é—®åŠ¨é™åˆ†ç¦»é¡µé¢ï¼šhttp://198.23.188.200:8080/dynamic_static.htmlÂ¶ä¹ã€é…ç½®sslè¯ä¹¦ä»¥ä½¿ç”¨httpsä½¿ç”¨ https å°±éœ€è¦é…ç½® ssl è¯ä¹¦ã€‚ä¸€èˆ¬åœ°ï¼ŒèŽ·å– ssl è¯ä¹¦æœ‰ä¸¤ç§æ–¹å¼ï¼šè‡ªç­¾åå’Œè´­ä¹° CA é¢å‘çš„ ssl è¯ä¹¦ã€‚è‡ªç­¾åçš„è¯ä¹¦å¯èƒ½ä¼šè¢«æµè§ˆå™¨æ‹¦æˆªå¹¶æç¤ºä¸å—ä¿¡ä»»ï¼Œå› æ­¤å»ºè®®é‡‡ç”¨æ¯”è¾ƒå¯é çš„å•†ä¸šé¢å‘æœºæž„è´­ä¹°ï¼ˆå¦‚ Comodoã€Symantec ç­‰ï¼‰æˆ–è€…å…è´¹çš„ Letâ€™s Encrypt ç­¾å‘çš„è¯ä¹¦ã€‚å¯ä»¥ä½¿ç”¨ certbot å·¥å…·æ¥ç”³è¯·å¾—åˆ°å…è´¹ Letâ€™ s Encrypt SSL è¯ä¹¦ã€‚å…·ä½“æ“ä½œå¯å‚è€ƒã€Šé€šè¿‡certbotå·¥å…·ç”Ÿæˆsslè¯ä¹¦ã€‹ã€‚å‡è®¾è¿™é‡Œå·²ç»ç”³è¯·å¾—åˆ°äº† Letâ€™ s Encrypt SSL è¯ä¹¦ï¼Œä¸‹æ–‡å°†ä»‹ç»å¦‚ä½•åœ¨ nginx ä¸­é…ç½® ssl è¯ä¹¦ä»¥ä½¿ç”¨ https ã€‚Â¶1. åˆ›å»ºnginxé…ç½®æ–‡ä»¶1vi /opt/nginx/conf/conf.d/https.confé…ç½®å†…å®¹å¦‚ä¸‹ï¼š12345678910111213141516171819202122232425262728server &#123; listen 443 ssl; server_name example.com; #ssl_certificate /path/cert.pem; ssl_certificate /path/fullchain.pem; ssl_certificate_key /path/privkey.pem; #ssl_trusted_certificate /path/chain.pem; #ssl_trusted_certificate /path/fullchain.pem; ssl_ciphers HIGH:!aNULL:!MD5; ssl_prefer_server_ciphers on; charset utf-8; # httpèµ„æºæœåŠ¡ location / &#123; root /opt/nginx/html; index index.html index.htm; &#125; # åå‘ä»£ç† # location ^~ /app &#123; # proxy_pass http://127.0.0.1:8080; # proxy_set_header Host $host:$server_port; # proxy_set_header X-Real-IP $remote_addr; # proxy_set_header REMOTE-HOST $remote_addr; # proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for; # client_max_body_size 100m; # &#125;&#125;ðŸ’â€â™‚ nginx SSL è¯ä¹¦é…ç½®è¯´æ˜Žï¼šssl_certificateï¼šSSLè¯ä¹¦è·¯å¾„ã€‚ï¼ˆå¯é…ç½®ä¸ºæœåŠ¡ç«¯è¯ä¹¦æˆ–å…¨é“¾è¯ä¹¦ï¼‰ssl_certificate_keyï¼šç§é’¥æ–‡ä»¶è·¯å¾„ã€‚ssl_trusted_certificateï¼šå¯ä¿¡ä»»çš„è¯ä¹¦é“¾æ–‡ä»¶è·¯å¾„ã€‚ï¼ˆå¯é…ç½®ä¸ºä¸­é—´è¯ä¹¦æˆ–å…¨é“¾è¯ä¹¦ï¼‰å¦‚æžœssl_certificateé…ç½®çš„è¯ä¹¦ä¸ºæœåŠ¡ç«¯è¯ä¹¦è€Œä¸åŒ…å«ä¸­é—´è¯ä¹¦ï¼Œåˆ™åº”è¯¥é…ç½® ssl_trusted_certificate æ¥æŒ‡å®šå¯ä¿¡ä»»çš„è¯ä¹¦é“¾æ–‡ä»¶ï¼Œä»¥ä¾¿å®¢æˆ·ç«¯èƒ½å¤Ÿæ­£ç¡®éªŒè¯æœåŠ¡ç«¯è¯ä¹¦çš„çœŸå®žæ€§ã€‚ä½†ç”±äºŽç›®å‰ä¸»æµCAæœåŠ¡å•†ï¼ˆåŒ…æ‹¬ Letâ€™s Encrypt ï¼‰çš„æ ¹è¯ä¹¦å’Œä¸­é—´è¯ä¹¦éƒ½å·²ç»è¢«å¤§å¤šæ•°å®¢æˆ·ç«¯ï¼ˆå¦‚ï¼šä¸»æµçš„æµè§ˆå™¨ï¼‰çš„è¯ä¹¦ä¿¡ä»»åˆ—è¡¨æ‰€æŽ¥å—ï¼Œæ‰€ä»¥æœåŠ¡ç«¯é…ç½®ä¸­å³ä½¿ç¼ºå°‘ä¸­é—´è¯ä¹¦å’Œæ ¹è¯ä¹¦ï¼Œå®¢æˆ·ç«¯ä»ç„¶å¯ä»¥æ­£ç¡®åœ°éªŒè¯æœåŠ¡å™¨è¯ä¹¦çš„çœŸå®žæ€§ï¼Œä¹Ÿå°±æ˜¯è¯´ ssl_certificate é…ç½® ä¸»æµCAç­¾å‘çš„ SSL è¯ä¹¦æ—¶ï¼Œå³ä½¿ä¸æ˜¯å…¨é“¾è¯ä¹¦ä¹Ÿèƒ½è¢«å¤§å¤šæ•°ä¸»æµçš„å®¢æˆ·ç«¯ä¿¡ä»»ã€‚ðŸ’â€â™‚ å…³äºŽè¯ä¹¦é“¾çš„è¯´æ˜Žï¼šå®¢æˆ·ç«¯éªŒè¯æœåŠ¡å™¨è¯ä¹¦çš„çœŸå®žæ€§æ˜¯é€šè¿‡è¯ä¹¦é“¾æ¥å®žçŽ°çš„ã€‚å¦‚æžœè¯ä¹¦é“¾ä¸­æœ€é¡¶å±‚çš„è¯ä¹¦ï¼ˆå³CAæ ¹è¯ä¹¦ï¼‰åœ¨å®¢æˆ·ç«¯çš„ä¿¡ä»»åˆ—è¡¨é‡Œï¼Œå®¢æˆ·ç«¯ä¼šä»Žä¸Šå¾€ä¸‹æŒ‰åºéªŒè¯æ¯å±‚è¯ä¹¦çš„çœŸå®žæ€§ï¼Œæ¯ä¸€å±‚éƒ½ä½¿ç”¨ä¸Šä¸€å±‚è¯ä¹¦çš„å…¬é’¥æ¥éªŒè¯ä¸‹ä¸€å±‚è¯ä¹¦çš„ç­¾åï¼Œç›´åˆ°éªŒè¯åˆ°æœåŠ¡å™¨è¯ä¹¦ä¸ºæ­¢ã€‚å¦‚æžœè¯ä¹¦é“¾ç¼ºå°‘ä¸­é—´è¯ä¹¦ï¼Œåˆ™å®¢æˆ·ç«¯æ— æ³•éªŒè¯è¯¥è¯ä¹¦é“¾çš„å®Œæ•´æ€§ï¼Œä¹Ÿå°±æ— æ³•éªŒè¯æœåŠ¡ç«¯è¯ä¹¦çš„çœŸå®žæ€§ã€‚å› æ­¤ï¼Œå¿…é¡»åŒ…æ‹¬æ‰€æœ‰ä¸­é—´è¯ä¹¦ä»¥åŠæ ¹è¯ä¹¦æ‰èƒ½æž„å»ºå®Œæ•´çš„è¯ä¹¦é“¾ã€‚åªæœ‰åœ¨è¯ä¹¦é“¾å®Œæ•´ä¸”éªŒè¯æˆåŠŸçš„æƒ…å†µä¸‹ï¼Œå®¢æˆ·ç«¯æ‰èƒ½ä¿¡ä»»æœåŠ¡å™¨è¯ä¹¦å¹¶ä¸Žå…¶å»ºç«‹å®‰å…¨è¿žæŽ¥ã€‚å®¢æˆ·ç«¯çš„ä¿¡ä»»åˆ—è¡¨ä¸€èˆ¬åŒ…æ‹¬æœ‰æ ¹è¯ä¹¦ã€ä¸­é—´è¯ä¹¦ä»¥åŠå…¶ä»–å¯ä¿¡ä»»çš„è¯ä¹¦ç­‰ã€‚Â¶2. é…ç½®é˜²ç«å¢™å’Œé‡è½½nginxé…ç½®123456#é˜²ç«å¢™å¼€æ”¾ç›¸å…³ç›‘å¬ç«¯å£firewall-cmd --permanent --add-port=443/tcpfirewall-cmd --reload#é‡è½½é…ç½®ï¼ˆé‡æ–°åŠ è½½ nginx é…ç½®ä»¥ä½¿å¾— SSL è¯ä¹¦ç”Ÿæ•ˆï¼‰/opt/nginx/sbin/nginx -s reloadÂ¶3. æµ‹è¯•httpsè®¿é—®åˆ›å»ºä¸€ä¸ªå¾…æµ‹è¯•çš„htmlé™æ€èµ„æºæ–‡ä»¶ï¼Œå¦‚ä¸‹ï¼š1echo "&lt;h1&gt;Hi, Nginx !&lt;/h1&gt;" &gt;&gt; /opt/nginx/html/test-https.htmlè®¿é—®åœ°å€ä¸ºï¼šhttps://example.com/test-https.htmlÂ¶åã€é…ç½®nginxè¿›ç¨‹å’Œå…¶æ‰§è¡Œç”¨æˆ·Â¶1. nginxè¿›ç¨‹åœ¨ Nginx çš„ä¸»è¿›ç¨‹å¯åŠ¨åŽï¼Œä¼šåˆ›å»ºå¤šä¸ªå­è¿›ç¨‹æ¥å¤„ç†å®¢æˆ·ç«¯è¯·æ±‚å’Œå…¶ä»–ä»»åŠ¡ã€‚è¿™äº›å­è¿›ç¨‹é€šå¸¸ç”± Nginx ä¸»è¿›ç¨‹è´Ÿè´£ç®¡ç†ã€è°ƒåº¦å’Œç›‘æŽ§ã€‚Nginx å­è¿›ç¨‹é€šå¸¸åˆ†ä¸ºä»¥ä¸‹å‡ ç§ç±»åž‹ï¼šmaster processï¼ˆä¸»è¿›ç¨‹ï¼‰ï¼šNginx çš„ä¸»è¿›ç¨‹ï¼Œè´Ÿè´£ç®¡ç†æ‰€æœ‰å­è¿›ç¨‹ï¼ŒæŽ¥æ”¶å’Œå¤„ç†æ¥è‡ªå‘½ä»¤è¡Œçš„ä¿¡å·ï¼Œå¹¶å¯åŠ¨æ•´ä¸ª Nginx æœåŠ¡ã€‚worker processï¼ˆå·¥ä½œè¿›ç¨‹ï¼‰ï¼šNginx çš„å·¥ä½œè¿›ç¨‹ï¼Œè´Ÿè´£å¤„ç†å®¢æˆ·ç«¯è¯·æ±‚å’Œå…¶ä»–ä»»åŠ¡ï¼Œæ¯ä¸ªå·¥ä½œè¿›ç¨‹éƒ½æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„è¿›ç¨‹ï¼Œå¯ä»¥åŒæ—¶å¤„ç†å¤šä¸ªè¯·æ±‚ã€‚cache loader processï¼ˆç¼“å­˜åŠ è½½è¿›ç¨‹ï¼‰ï¼šç”¨äºŽåŠ è½½å’Œé¢„çƒ­ç¼“å­˜æ•°æ®çš„è¿›ç¨‹ï¼Œåªæœ‰åœ¨å¼€å¯ç¼“å­˜åŠŸèƒ½æ—¶æ‰ä¼šå¯åŠ¨ã€‚cache manager processï¼ˆç¼“å­˜ç®¡ç†è¿›ç¨‹ï¼‰ï¼šç”¨äºŽç®¡ç†ç¼“å­˜æ•°æ®å’Œå¤„ç†ç¼“å­˜æ¸…ç†çš„è¿›ç¨‹ï¼Œåªæœ‰åœ¨å¼€å¯ç¼“å­˜åŠŸèƒ½æ—¶æ‰ä¼šå¯åŠ¨ã€‚é€šå¸¸é…ç½®å·¥ä½œè¿›ç¨‹ä»¥æ»¡è¶³ä¸šåŠ¡éœ€æ±‚ã€‚1234567891011#æŒ‡å®šå¯åŠ¨çš„å·¥ä½œè¿›ç¨‹æ•°é‡ï¼ˆé»˜è®¤å€¼ä¸ºï¼šautoï¼Œè¡¨ç¤ºä»¥CPUæ ¸å¿ƒæ•°å†³å®šå·¥ä½œè¿›ç¨‹æ•°é‡ï¼‰worker_processes 2;events &#123; #è®¾ç½®æ¯ä¸ªå·¥ä½œè¿›ç¨‹ä¸Žå®¢æˆ·ç«¯ä¹‹é—´çš„æœ€å¤§è¿žæŽ¥æ•°ï¼ˆé»˜è®¤å€¼ä¸ºï¼š512ï¼‰ worker_connections 1024;&#125;#ä»¥ä¸‹ä¸ºå…¶ä»–æ— å…³é…ç½®...http &#123; # å…¶ä»–é…ç½®é¡¹...&#125;Â¶2. nginxè¿›ç¨‹æ‰§è¡Œç”¨æˆ·é»˜è®¤æƒ…å†µä¸‹ï¼ŒNginx å¯åŠ¨åŽä¼šåˆ›å»ºä¸€ä¸ªä¸»è¿›ç¨‹å’Œå¤šä¸ªå·¥ä½œè¿›ç¨‹ï¼Œå…¶ä¸­ä¸»è¿›ç¨‹ä¸ºè¿è¡ŒnginxæœåŠ¡çš„linuxç”¨æˆ·ï¼ˆé€šå¸¸æ˜¯ root ç”¨æˆ·ï¼‰ï¼Œè€Œæ¯ä¸ªå·¥ä½œè¿›ç¨‹éƒ½æ˜¯ä»¥æŒ‡å®šç”¨æˆ·èº«ä»½æ¥æ‰§è¡Œçš„ï¼Œé»˜è®¤æƒ…å†µä¸‹æ˜¯ä»¥ nobody ç”¨æˆ·èº«ä»½è¿è¡Œã€‚å¯ä»¥é€šè¿‡ä¿®æ”¹é…ç½®æ–‡ä»¶ä¸­çš„ user æŒ‡ä»¤æ¥æ”¹å˜å·¥ä½œè¿›ç¨‹çš„æ‰§è¡Œç”¨æˆ·ã€‚å…·ä½“æ“ä½œå¦‚ä¸‹ï¼š(1) åˆ›å»ºnginxå·¥ä½œè¿›ç¨‹çš„æ‰§è¡Œç”¨æˆ·12#åˆ›å»ºnginxç”¨æˆ·å’ŒåŒåç”¨æˆ·ç»„ï¼Œä¸è‡ªåŠ¨åˆ›å»ºç”¨æˆ·ä¸»ç›®å½•ï¼Œç¦æ­¢è¯¥ç”¨æˆ·ç™»å½•ç³»ç»Ÿuseradd -U -M -s /usr/sbin/nologin nginx(2) ä¿®æ”¹ nginx ä¸»é…ç½®æ–‡ä»¶nginx.confï¼Œå¦‚ä¸‹ï¼š1vim /opt/nginx/conf/nginx.confä¿®æ”¹å¦‚ä¸‹ï¼š12345678910111213#ä¿®æ”¹useræŒ‡ä»¤å³å¯user nginx; #nginxå·¥ä½œè¿›ç¨‹çš„æ‰§è¡Œç”¨æˆ·#user nginx nginx; #æŒ‡å®šç”¨æˆ·å’Œç”¨æˆ·ç»„ï¼Œå¦‚æžœæ²¡æœ‰æŒ‡å®šç”¨æˆ·ç»„ï¼Œåˆ™ä½¿ç”¨é»˜è®¤ç”¨æˆ·ç»„#ä»¥ä¸‹ä¸ºå…¶ä»–æ— å…³é…ç½®...worker_processes 1;events &#123; worker_connections 1024;&#125;http &#123; # å…¶ä»–é…ç½®é¡¹...&#125;æ³¨æ„ï¼šä¿®æ”¹ nginx ç”¨æˆ·åŽéœ€è¦æ³¨æ„ä¹Ÿè¦åŒæ—¶ä¿®æ”¹ä¸€äº› nginx ç›¸å…³çš„ä¸´æ—¶æ–‡ä»¶æƒé™ï¼š12chown -R nginx:nginx /opt/nginx/proxy_tempchown -R nginx:nginx /opt/nginx/logsï¼ˆ4ï¼‰é‡è½½nginxé…ç½®12#é‡è½½é…ç½®/opt/nginx/sbin/nginx -s reloadÂ¶åä¸€ã€é…ç½®æ–‡ä»¶æ¨¡å—åŒ–Â¶ç®€è¦æ¦‚è¿°åœ¨ Nginx é…ç½®æ–‡ä»¶ä¸­å¯ä»¥é€šè¿‡ä½¿ç”¨ include æŒ‡ä»¤æ¥å®žçŽ°æ¨¡å—åŒ–ã€‚ä»Žè€Œè®©é…ç½®æ–‡ä»¶å…·æœ‰å¯å¤ç”¨æ€§å’Œæ›´æ˜“ç»´æŠ¤æ€§ã€‚å…·ä½“è¡¨çŽ°ä¸ºï¼šå…è®¸ç”¨æˆ·å°†é…ç½®æ–‡ä»¶æ‹†åˆ†ä¸ºæ›´å°çš„é…ç½®æ–‡ä»¶ï¼Œä½¿é…ç½®æ›´åŠ æ¸…æ™°å’Œå¯ç»´æŠ¤ã€‚ç„¶åŽé€šè¿‡ include æŒ‡ä»¤æ¥åŒ…å«è¿™äº›è¢«æ‹†åˆ†çš„é…ç½®æ–‡ä»¶åˆ°æŸä¸ªé…ç½®æ–‡ä»¶ä¸­ã€‚Â¶include æŒ‡ä»¤çš„è¯­æ³•1include file | mask;å…¶ä¸­ï¼šfile æ˜¯è¦åŒ…å«çš„å•ä¸ªæ–‡ä»¶çš„è·¯å¾„ï¼Œå¯ä»¥æ˜¯ç»å¯¹è·¯å¾„æˆ–ç›¸å¯¹äºŽ Nginx é…ç½®æ–‡ä»¶çš„è·¯å¾„ã€‚mask æ˜¯ä¸€ä¸ªé€šé…ç¬¦è¡¨è¾¾å¼ï¼Œç”¨äºŽåŒ¹é…å¤šä¸ªæ–‡ä»¶ã€‚å¯ä»¥ä½¿ç”¨é€šé…ç¬¦å­—ç¬¦ * å’Œ ?ã€‚Â¶include æŒ‡ä»¤ä½¿ç”¨ç¤ºä¾‹12345#åŒ…å«å•ä¸ªæ–‡ä»¶include /path/to/file.conf;#åŒ…å«å¤šä¸ªæ–‡ä»¶ï¼Œä½¿ç”¨é€šé…ç¬¦åŒ¹é…include /path/to/conf.d/*.conf;è¯·æ³¨æ„ï¼Œinclude æŒ‡ä»¤å¯ä»¥å‡ºçŽ°åœ¨ä»»ä½•é€‚å½“çš„ä½ç½®ï¼Œä»¥åŒ…å«å…¶ä»–é…ç½®æ–‡ä»¶çš„å†…å®¹ã€‚å½“ Nginx è¯»å–é…ç½®æ–‡ä»¶æ—¶ï¼Œå®ƒä¼šæŒ‰ç…§æŒ‡ä»¤çš„é¡ºåºé€è¡Œè§£æžï¼Œå¹¶å°†åŒ…å«çš„æ–‡ä»¶å†…å®¹åˆå¹¶åˆ°æœ€ç»ˆçš„é…ç½®ä¸­ã€‚Â¶åä¸€ã€é…ç½®æ—¥å¿—Nginx é»˜è®¤æœ‰ä¸¤ç§æ—¥å¿—æ–‡ä»¶çš„è®°å½•ï¼Œå³ error_logï¼ˆé”™è¯¯æ—¥å¿—ï¼‰å’Œ access_logï¼ˆè®¿é—®æ—¥å¿—ï¼‰ã€‚ç”¨æˆ·å¯ä»¥åˆ†åˆ«å¯¹è¿™ä¸¤ç§æ—¥å¿—æ–‡ä»¶è¿›è¡Œç›¸å…³è‡ªå®šä¹‰é…ç½®ã€‚Â¶error_log é”™è¯¯æ—¥å¿—é…ç½®error_log å‘½ä»¤ç”¨äºŽè®°å½• Nginx çš„é”™è¯¯ä¿¡æ¯ï¼Œå¯ä»¥é…ç½® offåœæ­¢æ—¥å¿—è®°å½•ï¼Œæˆ–è€…é…ç½®æ—¥å¿—è·¯å¾„å’Œé”™è¯¯çº§åˆ«è¿›è¡Œæ—¥å¿—è®°å½•ï¼Œé»˜è®¤æ”¯æŒçš„é”™è¯¯çº§åˆ«å¦‚ä¸‹ï¼šerrorï¼šè®°å½•é”™è¯¯æ¶ˆæ¯ã€‚warnï¼šè®°å½•è­¦å‘Šæ¶ˆæ¯å’Œé”™è¯¯æ¶ˆæ¯ã€‚noticeï¼šè®°å½•æ™®é€šä½†é‡è¦çš„ä¿¡æ¯ã€‚infoï¼šè®°å½•æ›´è¯¦ç»†çš„ä¿¡æ¯ï¼Œé€šå¸¸ç”¨äºŽè°ƒè¯•ã€‚debugï¼šè®°å½•è¯¦ç»†çš„è°ƒè¯•ä¿¡æ¯ï¼Œé€šå¸¸ç”¨äºŽè¯¦å°½çš„æ•…éšœæŽ’é™¤ã€‚ä½¿ç”¨æ ¼å¼å¦‚ä¸‹ï¼š123error_log logs/error.log error;#error_log logs/error.log info;#error_log off; #åœæ­¢é”™è¯¯æ—¥å¿—è®°å½•Â¶access_log è®¿é—®æ—¥å¿—é…ç½®access_log å‘½ä»¤ç”¨äºŽè®°å½•å®¢æˆ·ç«¯è¯·æ±‚çš„è®¿é—®æ—¥å¿—ï¼Œå¯ä»¥é…ç½® offåœæ­¢æ—¥å¿—è®°å½•ï¼Œæˆ–è€…é…ç½®æ—¥å¿—è·¯å¾„å’Œæ—¥å¿—æ ¼å¼è¿›è¡Œæ—¥å¿—è®°å½•ï¼Œé»˜è®¤æ”¯æŒï¼šcombinedï¼ˆé»˜è®¤ï¼Œå³éƒ½ä¸é…ç½®æ—¥å¿—çš„æƒ…å†µï¼‰ã€mainï¼ˆå®‰è£…åŽé€šå¸¸è‡ªåŠ¨ä½¿ç”¨çš„æ ¼å¼ï¼‰ è¿™äº›æ—¥å¿—æ ¼å¼ï¼Œå½“ç„¶ç”¨æˆ·å¯ä»¥è‡ªå®šä¹‰æ—¥å¿—æ ¼å¼ï¼Œå¦‚ä¸‹ï¼š12345678log_format custom '$remote_addr - $remote_user [$time_local] "$request" ' '$status $body_bytes_sent "$http_referer" ' '"$http_user_agent" "$http_x_forwarded_for"';#log_format custom 'è¯·æ±‚æ—¶é—´=$time_iso8601 | è¯·æ±‚IP=$remote_addr | è¯·æ±‚URL=$request | è¯·æ±‚æ•°æ®ç±»åž‹=$http_content_type | è¯·æ±‚ä»£ç†=$http_user_agent | è¯·æ±‚å¤´å¤§å°=$body_bytes_sent | æ¥æºURLåœ°å€=$http_referer | å®¢æˆ·ç«¯çš„çœŸå®žIP=$http_x_forwarded_for | å“åº”çŠ¶æ€ç =$status | å“åº”æ•°æ®ç±»åž‹=$sent_http_content_type | å“åº”æ—¶é—´=$upstream_response_time';access_log logs/access.log custom;#access_log off; #åœæ­¢è®¿é—®æ—¥å¿—è®°å½•Â¶æŒ‰ç…§æ—¥æœŸæ ¼å¼é…ç½®æ—¥å¿—æ–‡ä»¶åç§°éšç€ nginx é•¿æ—¶é—´è¿è¡Œï¼Œæ—¥å¿—æ–‡ä»¶ä¹Ÿä¼šå˜å¾—è¶Šæ¥è¶Šå¤šï¼Œç”šè‡³å‡ ä¸ªæœˆå°±è¾¾åˆ°äº†å‡ ä¸ª GB çš„å¤§å°ï¼Œè¿™ä¼šå¯¼è‡´åœ¨æŽ’æŸ¥æ—¥å¿—æ—¶ä¼šç”±äºŽå†…å®¹å¤ªå¤šè€Œä¸å¥½å®šä½ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå¯ä»¥é…ç½® nginx è®°å½•æ—¥å¿—æ—¶æŒ‰ç…§æ—¥æœŸè®°å½•åˆ°ä¸åŒçš„æ–‡ä»¶é‡Œï¼Œä»Žè€Œå®žçŽ°æ—¥å¿—åˆ‡å‰²çš„æ•ˆæžœã€‚å¦‚ä¸‹ï¼š12345678log_format custom '$remote_addr - $remote_user [$time_local] "$request" ' '$status $body_bytes_sent "$http_referer" ' '"$http_user_agent" "$http_x_forwarded_for"';#log_format custom 'è¯·æ±‚æ—¶é—´=$time_iso8601 | è¯·æ±‚IP=$remote_addr | è¯·æ±‚URL=$request | è¯·æ±‚æ•°æ®ç±»åž‹=$http_content_type | è¯·æ±‚ä»£ç†=$http_user_agent | è¯·æ±‚å¤´å¤§å°=$body_bytes_sent | æ¥æºURLåœ°å€=$http_referer | å®¢æˆ·ç«¯çš„çœŸå®žIP=$http_x_forwarded_for | å“åº”çŠ¶æ€ç =$status | å“åº”æ•°æ®ç±»åž‹=$sent_http_content_type | å“åº”æ—¶é—´=$upstream_response_time';map $time_iso8601 $logdate &#123; '~^(?&lt;year&gt;\d&#123;4&#125;)-(?&lt;month&gt;\d&#123;2&#125;)-(?&lt;day&gt;\d&#123;2&#125;)' $year-$month-$day;&#125;access_log logs/access-$logdate.log custom;è®¾ logs ç›®å½•è·¯å¾„ä¸ºï¼š/opt/nginx/logsï¼Œåˆ™éœ€è¦ç»™è¯¥ç›®å½•èµ‹äºˆ worker è¿›ç¨‹çš„ç”¨æˆ·æƒé™å’Œæ“ä½œæƒé™ã€‚12chown nginx:nginx /opt/nginx/logschmod 755 /opt/nginx/logs12#é‡è½½é…ç½®/opt/nginx/sbin/nginx -s reload]]></content>
      <categories>
        <category>devops</category>
      </categories>
      <tags>
        <tag>nginx</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Spring Boot å­¦ä¹ ç¬”è®°]]></title>
    <url>%2Fjavaee%2Fspringboot.html</url>
    <content type="text"><![CDATA[Â¶ä¸€ã€Spring Boot å…¥é—¨Â¶1. Spring Boot ç®€ä»‹ç®€åŒ–Springåº”ç”¨å¼€å‘çš„ä¸€ä¸ªæ¡†æž¶ï¼›æ•´ä¸ªSpringæŠ€æœ¯æ ˆçš„ä¸€ä¸ªå¤§æ•´åˆï¼›J2EEå¼€å‘çš„ä¸€ç«™å¼è§£å†³æ–¹æ¡ˆï¼›Â¶2. å¾®æœåŠ¡2014ï¼Œmartin fowlerå¾®æœåŠ¡ï¼šæž¶æž„é£Žæ ¼ï¼ˆæœåŠ¡å¾®åŒ–ï¼‰ä¸€ä¸ªåº”ç”¨åº”è¯¥æ˜¯ä¸€ç»„å°åž‹æœåŠ¡ï¼›å¯ä»¥é€šè¿‡HTTPçš„æ–¹å¼è¿›è¡Œäº’é€šï¼›å•ä½“åº”ç”¨ï¼šALL IN ONEå¾®æœåŠ¡ï¼šæ¯ä¸€ä¸ªåŠŸèƒ½å…ƒç´ æœ€ç»ˆéƒ½æ˜¯ä¸€ä¸ªå¯ç‹¬ç«‹æ›¿æ¢å’Œç‹¬ç«‹å‡çº§çš„è½¯ä»¶å•å…ƒï¼›è¯¦ç»†å‚ç…§å¾®æœåŠ¡æ–‡æ¡£Â¶3. çŽ¯å¢ƒå‡†å¤‡http://www.gulixueyuan.com/ è°·ç²’å­¦é™¢çŽ¯å¢ƒçº¦æŸjdk1.8ï¼šSpring Boot æŽ¨èjdk1.7åŠä»¥ä¸Šmaven3.xï¼šmaven 3.3ä»¥ä¸Šç‰ˆæœ¬IntelliJIDEA2018SpringBoot 1.5.9.RELEASEÂ¶(1)MAVENè®¾ç½®ï¼›ç»™maven çš„settings.xmlé…ç½®æ–‡ä»¶çš„profilesæ ‡ç­¾æ·»åŠ 123456789101112&lt;profile&gt; &lt;id&gt;jdk-1.8&lt;/id&gt; &lt;activation&gt; &lt;activeByDefault&gt;true&lt;/activeByDefault&gt; &lt;jdk&gt;1.8&lt;/jdk&gt; &lt;/activation&gt; &lt;properties&gt; &lt;maven.compiler.source&gt;1.8&lt;/maven.compiler.source&gt; &lt;maven.compiler.target&gt;1.8&lt;/maven.compiler.target&gt; &lt;maven.compiler.compilerVersion&gt;1.8&lt;/maven.compiler.compilerVersion&gt; &lt;/properties&gt;&lt;/profile&gt;Â¶(2)IDEAè®¾ç½®IDEAæ•´åˆmavenÂ¶4. HelloWorldä¸€ä¸ªåŠŸèƒ½ï¼šæµè§ˆå™¨å‘é€helloè¯·æ±‚ï¼ŒæœåŠ¡å™¨æŽ¥å—è¯·æ±‚å¹¶å¤„ç†ï¼Œå“åº”Hello Worldå­—ç¬¦ä¸²ï¼›Â¶(1)åˆ›å»ºä¸€ä¸ªmavenå·¥ç¨‹Â¶(2)å¯¼å…¥ä¾èµ–1234567891011121314151617181920212223242526272829303132333435&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"&gt; &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt; &lt;groupId&gt;com.qcmoke&lt;/groupId&gt; &lt;artifactId&gt;spring_01_helloworld&lt;/artifactId&gt; &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt; &lt;!-- Spring Bootçš„ç‰ˆæœ¬ä»²è£ä¸­å¿ƒ--&gt; &lt;parent&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt; &lt;version&gt;1.5.9.RELEASE&lt;/version&gt; &lt;/parent&gt; &lt;dependencies&gt; &lt;!--é€‰æ‹©åœºæ™¯å¯åŠ¨å™¨--&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt; &lt;/dependency&gt; &lt;/dependencies&gt; &lt;build&gt; &lt;plugins&gt; &lt;!-- è¿™ä¸ªæ’ä»¶ï¼Œå¯ä»¥å°†åº”ç”¨æ‰“åŒ…æˆä¸€ä¸ªå¯æ‰§è¡Œçš„jaråŒ…ï¼›--&gt; &lt;plugin&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt; &lt;/plugin&gt; &lt;/plugins&gt; &lt;/build&gt;&lt;/project&gt;1ã€çˆ¶é¡¹ç›®spring-boot-starter-parentæ˜¯åœºæ™¯å¯åŠ¨å™¨çš„ç‰ˆæœ¬ä»²è£ä¸­å¿ƒï¼ŒæŽ§åˆ¶ç€SpringBootçš„ç‰ˆæœ¬ï¼Œè·Ÿæ¢ç‰ˆæœ¬å†æ¬¡ä¿®æ”¹ã€‚2ã€spring-boot-starter-webï¼šspring-bootåœºæ™¯å¯åŠ¨å™¨ï¼›å¸®æˆ‘ä»¬å¯¼å…¥äº†webæ¨¡å—æ­£å¸¸è¿è¡Œæ‰€ä¾èµ–çš„ç»„ä»¶ã€‚æ›´å¤šçš„åœºæ™¯å¯åŠ¨å™¨è¯·æŸ¥çœ‹å®˜æ–¹æ–‡æ¡£3ã€Spring Bootå°†æ‰€æœ‰çš„åŠŸèƒ½åœºæ™¯éƒ½æŠ½å–å‡ºæ¥ï¼Œåšæˆä¸€ä¸ªä¸ªçš„startersï¼ˆå¯åŠ¨å™¨ï¼‰ï¼Œåªéœ€è¦åœ¨é¡¹ç›®é‡Œé¢å¼•å…¥è¿™äº›starterç›¸å…³åœºæ™¯çš„æ‰€æœ‰ä¾èµ–éƒ½ä¼šå¯¼å…¥è¿›æ¥ã€‚è¦ç”¨ä»€ä¹ˆåŠŸèƒ½å°±å¯¼å…¥ä»€ä¹ˆåœºæ™¯çš„å¯åŠ¨å™¨4ã€SpringBootå¯¹J2EEçš„æ•´ä½“æ•´åˆè§£å†³æ–¹æ¡ˆå’Œè‡ªåŠ¨é…ç½®éƒ½åœ¨spring-boot-autoconfigure-1.5.9.RELEASE.jarä¸­Â¶(3)ç¼–å†™ä¸€ä¸ªä¸»ç¨‹åº12345678910111213141516package com.qcmoke;import org.springframework.boot.SpringApplication;import org.springframework.boot.autoconfigure.SpringBootApplication;/** * ä¸»ç¨‹åºç±» */@SpringBootApplicationpublic class HelloWorldMainApplication &#123; public static void main(String[] args) &#123; // å¯åŠ¨Spring Bootåº”ç”¨ SpringApplication.run(HelloWorldMainApplication.class,args); &#125;&#125;1ã€@SpringBootApplication æ¥æ ‡æ³¨ä¸€ä¸ªä¸»ç¨‹åºç±»ï¼Œè¯´æ˜Žè¿™æ˜¯ä¸€ä¸ªSpring Bootåº”ç”¨2ã€Spring Bootä¼šå°†ä¸»é…ç½®ç±»ï¼ˆ@SpringBootApplicationæ ‡æ³¨çš„ç±»ï¼‰çš„æ‰€åœ¨åŒ…åŠè¯¥åŒ…ä¸‹é¢æ‰€æœ‰å­åŒ…é‡Œé¢çš„æ‰€æœ‰ç»„ä»¶æ‰«æåˆ°Springå®¹å™¨ä¸­åœ¨æœ¬ä¾‹ä¸­Spring Bootä¼šåˆ°HelloWorldMainApplicationæ‰€åœ¨çš„åŒ…å³com.qcmokeåŒ…ä¸‹å’ŒControlleråŒ…ä¸‹æ‰«ææ‰€æœ‰ç»„ä»¶ã€‚ç”±æ­¤å°±å¯ä»¥æ‰«æåˆ°äº†com.qcmoke.Controller.HelloControllerç»„ä»¶Â¶(4)ç¼–å†™ç›¸å…³çš„Controller1234567891011121314package com.qcmoke.Controller;import org.springframework.stereotype.Controller;import org.springframework.web.bind.annotation.RequestMapping;import org.springframework.web.bind.annotation.ResponseBody;@Controllerpublic class HelloController &#123; @ResponseBody @RequestMapping("/hello") public String hello()&#123; return "Hello World!"; &#125;&#125;Â¶(5)è¿è¡Œä¸»ç¨‹åºæµ‹è¯•Â¶(6)ç®€åŒ–éƒ¨ç½²å°†è¿™ä¸ªåº”ç”¨æ‰“æˆjaråŒ…ï¼Œç›´æŽ¥ä½¿ç”¨java -jarçš„å‘½ä»¤å¯è¿›è¡Œæ‰§è¡Œ:1F:\myproject\springboot\spring_01_helloworld\target&gt;java -jar spring_01_helloworld-1.0-SNAPSHOT.jaréƒ¨ç½²å®Œæˆåœ¨æ­¤è¿‡ç¨‹ä¸­ä¸éœ€è¦å®‰è£…tomcat,å› ä¸ºspringbootä¼šå°†tomcatæœåŠ¡å™¨ç›´æŽ¥åµŒå…¥åˆ°äº†ç”Ÿäº§çš„jaråŒ…ä¸­äº†ã€‚å½“è¿è¡Œè¿™ä¸ªjaråŒ…çš„æ—¶å€™ï¼ŒåµŒå…¥çš„tomcatä¹ŸåŒæ ·è¿è¡Œäº†èµ·æ¥ã€‚æµè§ˆå™¨è¾“å‡ºhttp://localhost:8080/helloå°±å¯ä»¥è®¿é—®éƒ¨ç½²çš„springbootåº”ç”¨äº†ã€‚Â¶5. ä½¿ç”¨Spring Initializerå¿«é€Ÿåˆ›å»ºSpring Booté¡¹ç›®Â¶ï¼ˆ1ï¼‰IDEA Spring Initializerä½¿ç”¨ Spring Initializerå¿«é€Ÿåˆ›å»ºé¡¹ç›®IDEéƒ½æ”¯æŒä½¿ç”¨Springçš„é¡¹ç›®åˆ›å»ºå‘å¯¼å¿«é€Ÿåˆ›å»ºä¸€ä¸ªSpring Booté¡¹ç›®ã€‚é€‰æ‹©éœ€è¦çš„æ¨¡å—ï¼Œå‘å¯¼ä¼šè”ç½‘åˆ›å»ºSpring Booté¡¹ç›®ã€‚é€‰æ‹©åœºæ™¯å¯åŠ¨å™¨ï¼ˆä¾èµ–ï¼‰é»˜è®¤ç”Ÿæˆçš„Spring Booté¡¹ç›®çš„ç‰¹ç‚¹ï¼šä¸»ç¨‹åºå·²ç»ç”Ÿæˆå¥½äº†ï¼Œæˆ‘ä»¬åªéœ€è¦æˆ‘ä»¬è‡ªå·±çš„é€»è¾‘resourcesæ–‡ä»¶å¤¹ä¸­ç›®å½•ç»“æž„staticï¼šä¿å­˜æ‰€æœ‰çš„é™æ€èµ„æºï¼› js css imagesï¼›templatesï¼šä¿å­˜æ‰€æœ‰çš„æ¨¡æ¿é¡µé¢ï¼›ï¼ˆSpring Booté»˜è®¤jaråŒ…ä½¿ç”¨åµŒå…¥å¼çš„Tomcatï¼Œé»˜è®¤ä¸æ”¯æŒJSPé¡µé¢ï¼‰ï¼›å¯ä»¥ä½¿ç”¨æ¨¡æ¿å¼•æ“Žï¼ˆfreemarkerã€thymeleafï¼‰ï¼›application.propertiesï¼šSpring Bootåº”ç”¨çš„é…ç½®æ–‡ä»¶ï¼›å¯ä»¥ä¿®æ”¹ä¸€äº›é»˜è®¤è®¾ç½®ï¼›æ­¤å¤–è¿˜ä¼šé™„å¸¦ä¸€äº›ç‰ˆæœ¬æŽ§åˆ¶å’Œmarkdownç­‰æ–‡ä»¶ï¼Œç”±äºŽå½“å‰é¡¹ç›®ç”¨ä¸åˆ°ï¼Œæ•…æˆ‘ä»¬å¯ä»¥é€‰æ‹©å°†è¿™äº›æ–‡ä»¶åˆ é™¤æŽ‰ã€‚ç¼–å†™ç›¸å…³çš„Controller123456789101112131415package com.qcmoke.controller;import org.springframework.web.bind.annotation.RequestMapping;import org.springframework.web.bind.annotation.RestController;//@Controller@RestController //ä½¿ç”¨@RestControllerå¯ä»¥æ›¿æ¢@Controllerå’Œ@ResponseBodyï¼›ç›´æŽ¥è¿”å›žæ•°æ®ç»™æµè§ˆå™¨ï¼Œå¦‚æžœè¿”å›žçš„æ˜¯å¯¹è±¡ï¼Œé‚£ä¹ˆä¼šè½¬ä¸ºjsonæ•°æ®public class HelloController &#123; //@ResponseBody @RequestMapping("/hello") public String hello()&#123; return "Hello World!"; &#125;&#125;è¿è¡Œæµ‹è¯•Â¶ï¼ˆ2ï¼‰STSä½¿ç”¨ Spring Starter Projectå¿«é€Ÿåˆ›å»ºé¡¹ç›®å¾…å®Œæˆâ€¦Â¶äºŒã€springbooté…ç½®Â¶1. é…ç½®æ–‡ä»¶SpringBooté»˜è®¤ä½¿ç”¨çš„é…ç½®æ–‡ä»¶æ˜¯resourcesç›®å½•ä¸‹çš„application.propertieså’Œapplication.ymlã€‚è¦æ±‚æ–‡ä»¶åç§°æ˜¯ä¸èƒ½å˜çš„ã€‚è€Œé€šè¿‡Spring Initializeråˆ›å»ºçš„é¡¹ç›®é»˜è®¤åªç”Ÿæˆä¸€ä¸ªåç§°ä¸ºapplication.propertiesçš„é…ç½®æ–‡ä»¶ã€‚Â¶ï¼ˆ1ï¼‰é…ç½®æ–‡ä»¶çš„ä½œç”¨SpringBootåœ¨åº•å±‚éƒ½ç»™æˆ‘ä»¬è‡ªåŠ¨é…ç½®å¥½äº†é»˜è®¤å€¼ï¼Œå¯ä»¥é€šè¿‡ä¿®æ”¹é…ç½®æ–‡ä»¶ä»Žè€Œä¿®æ”¹SpringBootè‡ªåŠ¨é…ç½®çš„é»˜è®¤å€¼ã€‚è¿™äº›é»˜è®¤å€¼åŒ…æ‹¬ç«¯å£ç­‰ã€‚Â¶ï¼ˆ2ï¼‰é…ç½®æ–‡ä»¶è¯­æ³•ä»‹ç»ç”±äºŽpropertiesæ–‡ä»¶è¾ƒä¸ºæ™®éä½¿ç”¨ï¼Œè¿™é‡Œå¯¹å…¶è¯­æ³•å°±ä¸è¿›è¡Œè¿‡å¤šè®²è§£ã€‚Â¶â‘ YAMLè¯­æ³•YAMLï¼ˆYAML Ainâ€™t Markup Languageï¼‰â€‹ YAML A Markup Languageï¼šæ˜¯ä¸€ä¸ªæ ‡è®°è¯­è¨€â€‹ YAML isnâ€™t Markup Languageï¼šä¸æ˜¯ä¸€ä¸ªæ ‡è®°è¯­è¨€ï¼›æ ‡è®°è¯­è¨€ï¼šâ€‹ ä»¥å‰çš„é…ç½®æ–‡ä»¶ï¼›å¤§å¤šéƒ½ä½¿ç”¨çš„æ˜¯ xxxx.xmlæ–‡ä»¶ï¼›â€‹ YAMLï¼šä»¥æ•°æ®ä¸ºä¸­å¿ƒï¼Œæ¯”jsonã€xmlç­‰æ›´é€‚åˆåšé…ç½®æ–‡ä»¶ï¼›Â¶â‘¡åŸºæœ¬è¯­æ³•ä½¿ç”¨k:(ç©ºæ ¼)vï¼šè¡¨ç¤ºä¸€å¯¹é”®å€¼å¯¹ï¼ˆç©ºæ ¼å¿…é¡»æœ‰ï¼‰ï¼›ä»¥ç©ºæ ¼çš„ç¼©è¿›æ¥æŽ§åˆ¶å±‚çº§å…³ç³»ï¼›åªè¦æ˜¯å·¦å¯¹é½çš„ä¸€åˆ—æ•°æ®ï¼Œéƒ½æ˜¯åŒä¸€ä¸ªå±‚çº§çš„ã€‚123server: port: 8081 path: /helloæ³¨æ„ï¼šå±žæ€§å’Œå€¼æ˜¯å¤§å°å†™æ•æ„Ÿçš„ã€‚Â¶â‘¢å€¼çš„å†™æ³•å­—é¢é‡ï¼šæ™®é€šçš„å€¼ï¼ˆæ•°å­—ï¼Œå­—ç¬¦ä¸²ï¼Œå¸ƒå°”ï¼‰â€‹ k: vï¼šå­—é¢ç›´æŽ¥æ¥å†™ï¼›â€‹ å­—ç¬¦ä¸²é»˜è®¤ä¸ç”¨åŠ ä¸Šå•å¼•å·æˆ–è€…åŒå¼•å·ï¼›â€‹ &quot;&quot;ï¼šåŒå¼•å·ï¼›ä¸ä¼šè½¬ä¹‰å­—ç¬¦ä¸²é‡Œé¢çš„ç‰¹æ®Šå­—ç¬¦ï¼›ç‰¹æ®Šå­—ç¬¦ä¼šä½œä¸ºæœ¬èº«æƒ³è¡¨ç¤ºçš„æ„æ€â€‹ name: &quot;zhangsan \n lisi&quot;ï¼šè¾“å‡ºï¼›zhangsan æ¢è¡Œ lisiâ€‹ ''ï¼šå•å¼•å·ï¼›ä¼šè½¬ä¹‰ç‰¹æ®Šå­—ç¬¦ï¼Œç‰¹æ®Šå­—ç¬¦æœ€ç»ˆåªæ˜¯ä¸€ä¸ªæ™®é€šçš„å­—ç¬¦ä¸²æ•°æ®â€‹ name: â€˜zhangsan \n lisiâ€™ï¼šè¾“å‡ºï¼›zhangsan \n lisiå¯¹è±¡ã€Mapï¼ˆå±žæ€§å’Œå€¼ï¼‰ï¼ˆé”®å€¼å¯¹ï¼‰,æœ‰ä¸¤ç§æ–¹å¼â…  k: vï¼šåœ¨ä¸‹ä¸€è¡Œæ¥å†™å¯¹è±¡çš„å±žæ€§å’Œå€¼çš„å…³ç³»ï¼›æ³¨æ„ç¼©è¿›â€‹ å¯¹è±¡è¿˜æ˜¯k: vçš„æ–¹å¼123friends: lastName: zhangsan age: 20â…¡ è¡Œå†…å†™æ³•ï¼š1friends: &#123;lastName: zhangsan,age: 18&#125;æ•°ç»„ï¼ˆListã€Setï¼‰,æœ‰ä¸¤ç§æ–¹å¼â…  ç”¨-å€¼è¡¨ç¤ºæ•°ç»„ä¸­çš„ä¸€ä¸ªå…ƒç´ 1234pets: - cat - dog - pigâ…¡ è¡Œå†…å†™æ³•1pets: [cat,dog,pig]Â¶ï¼ˆ3ï¼‰æµ‹è¯•yamlæ–‡ä»¶èŽ·å–å€¼æ³¨å…¥åˆ°ç»„ä»¶ä¸­ç»„ä»¶ï¼šPerson.javaé…ç½®æ–‡ä»¶ï¼šapplication.ymlæ–¹æ¡ˆï¼šé€šè¿‡åœ¨ç»„ä»¶ä¸­æ·»åŠ æ³¨è§£@ConfigurationProperties(prefix = â€œé…ç½®æ–‡ä»¶ä¸­çš„æŸä¸ªå±žæ€§åç§°â€)æ¥è®©ç»„ä»¶èƒ½å¤Ÿä¸Žé…ç½®æ–‡ä»¶ä¸­çš„æŸä¸ªå±žæ€§å»ºç«‹å…³è”å¯¼å…¥é…ç½®æ–‡ä»¶å¤„ç†å™¨ä¾èµ–,è®©é…ç½®æ–‡ä»¶èƒ½å¤Ÿæœ‰æç¤º12345&lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-configuration-processor&lt;/artifactId&gt; &lt;optional&gt;true&lt;/optional&gt;&lt;/dependency&gt;å¯¼å…¥ä¾èµ–å®Œæˆéœ€è¦é‡æ–°è¿è¡Œspringbooté¡¹ç›®ä»¥ç”Ÿæ•ˆã€‚è¦æ³¨å…¥çš„ç»„ä»¶ç±»Person.java123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101package com.qcmoke.bean;import org.springframework.boot.context.properties.ConfigurationProperties;import org.springframework.stereotype.Component;import java.util.Date;import java.util.List;import java.util.Map;/** * 1ã€å°†é…ç½®æ–‡ä»¶ä¸­é…ç½®çš„æ¯ä¸€ä¸ªå±žæ€§çš„å€¼ï¼Œæ˜ å°„åˆ°å½“å‰ç±»ç»„ä»¶ä¸­ * @ConfigurationPropertiesï¼šå‘Šè¯‰SpringBootå°†æœ¬ç±»ä¸­çš„æ‰€æœ‰å±žæ€§å’Œé…ç½®æ–‡ä»¶ä¸­ç›¸å…³çš„é…ç½®è¿›è¡Œç»‘å®šï¼› * prefix = "person"ï¼šé…ç½®æ–‡ä»¶ä¸­å“ªä¸ªä¸‹é¢çš„æ‰€æœ‰å±žæ€§è¿›è¡Œä¸€ä¸€æ˜ å°„ * * 2ã€åªæœ‰è¿™ä¸ªç»„ä»¶æ˜¯å®¹å™¨ä¸­çš„ç»„ä»¶ï¼Œæ‰èƒ½å®¹å™¨æä¾›çš„@ConfigurationPropertiesåŠŸèƒ½ï¼› * @ConfigurationProperties(prefix = "person")é»˜è®¤ä»Žå…¨å±€é…ç½®æ–‡ä»¶ä¸­èŽ·å–å€¼ï¼› * */@Component@ConfigurationProperties(prefix = "person") //é…ç½®æ³¨å…¥é…ç½®æ–‡ä»¶ä¸­personå±žæ€§çš„å€¼public class Person &#123; /*ç”Ÿæˆget setæ–¹æ³•ï¼›Alt + Insert ç»„åˆ,å¦‚æžœä¸ç”Ÿæ•ˆï¼Œå…ˆæŒ‰NumLké”®*/ private String lastName; private Integer age; private Boolean boss; private Date birth; private Map&lt;String,Object&gt; maps; private List&lt;Object&gt; lists; private Dog dog; @Override public String toString() &#123; return "Person&#123;" + "lastName='" + lastName + '\'' + ", age=" + age + ", boss=" + boss + ", birth=" + birth + ", maps=" + maps + ", lists=" + lists + ", dog=" + dog + '&#125;'; &#125; public String getLastName() &#123; return lastName; &#125; public void setLastName(String lastName) &#123; this.lastName = lastName; &#125; public Integer getAge() &#123; return age; &#125; public void setAge(Integer age) &#123; this.age = age; &#125; public Boolean getBoss() &#123; return boss; &#125; public void setBoss(Boolean boss) &#123; this.boss = boss; &#125; public Date getBirth() &#123; return birth; &#125; public void setBirth(Date birth) &#123; this.birth = birth; &#125; public Map&lt;String, Object&gt; getMaps() &#123; return maps; &#125; public void setMaps(Map&lt;String, Object&gt; maps) &#123; this.maps = maps; &#125; public List&lt;Object&gt; getLists() &#123; return lists; &#125; public void setLists(List&lt;Object&gt; lists) &#123; this.lists = lists; &#125; public Dog getDog() &#123; return dog; &#125; public void setDog(Dog dog) &#123; this.dog = dog; &#125;&#125;Dog.java12345678910111213141516171819202122232425262728293031package com.qcmoke.bean;public class Dog &#123; private String name; private Integer age; @Override public String toString() &#123; return "Dog&#123;" + "name='" + name + '\'' + ", age=" + age + '&#125;'; &#125; public String getName() &#123; return name; &#125; public void setName(String name) &#123; this.name = name; &#125; public Integer getAge() &#123; return age; &#125; public void setAge(Integer age) &#123; this.age = age; &#125;&#125;ç¼–å†™é…ç½®æ–‡ä»¶ï¼Œå°†é…ç½®æ–‡ä»¶ä¸­çš„å±žæ€§å€¼æ³¨å…¥åˆ°Personå¯¹è±¡é‡Œã€‚application.yml12345678910111213person: lastName: zhangsan #å¯¹äºŽé©¼å³°å¼çš„å±žæ€§ä¹Ÿå¯ä»¥æ”¹å†™æˆlast-name: zhangsan age: 22 boss: false birth: 1996/08/27 maps: &#123;k1: zhangsan,age: 22&#125; #è¡Œå†…å†™æ³• lists: #æ•°ç»„å†™æ³• - è¯­æ–‡ - æ•°å­¦ - è‹±è¯­ dog: #å¯¹è±¡æ¢è¡Œå†™æ³• name: æ—ºè´¢ age: 2ç¼–å†™å•å…ƒæµ‹è¯•ç±»SpringBoot02ConfigApplicationTests.java123456789101112131415161718192021222324package com.qcmoke;import com.qcmoke.bean.Person;import org.junit.Test;import org.junit.runner.RunWith;import org.springframework.beans.factory.annotation.Autowired;import org.springframework.boot.test.context.SpringBootTest;import org.springframework.test.context.junit4.SpringRunner;/* spring bootçš„å•å…ƒæµ‹è¯• ä½¿ç”¨SpringRunneré©±åŠ¨å™¨æ¥æ‰§è¡Œæµ‹è¯•ï¼Œè€Œä¸è¦junit */@RunWith(SpringRunner.class)@SpringBootTestpublic class SpringBoot02ConfigApplicationTests &#123; @Autowired Person person; //è‡ªåŠ¨æ³¨å…¥ @Test public void contextLoads() &#123; System.out.println(person); &#125;&#125;Â¶ï¼ˆ4ï¼‰æµ‹è¯•propertiesé…ç½®æ–‡ä»¶èŽ·å–å€¼æ³¨å…¥åˆ°ç»„ä»¶ä¸­ç»„ä»¶ï¼šPerson.javaé…ç½®æ–‡ä»¶ï¼šapplication.propertiesæ–¹æ¡ˆï¼šé€šè¿‡åœ¨ç»„ä»¶ä¸­æ·»åŠ æ³¨è§£@ConfigurationProperties(prefix = &quot;é…ç½®æ–‡ä»¶ä¸­çš„æŸä¸ªå±žæ€§åç§°&quot;)æ¥è®©ç»„ä»¶èƒ½å¤Ÿä¸Žé…ç½®æ–‡ä»¶ä¸­çš„æŸä¸ªå±žæ€§å»ºç«‹å…³è”å¯¹äºŽpropertiesæ–‡ä»¶ï¼Œéœ€è¦è§£å†³ideaä¸­é»˜è®¤utf-8å¯èƒ½ä¼šè¾“å‡ºä¹±ç çš„é—®é¢˜ã€‚âž¡ï¸ideaè®¾ç½®å¯¼å…¥é…ç½®æ–‡ä»¶å¤„ç†å™¨ä¾èµ–,è®©é…ç½®æ–‡ä»¶èƒ½å¤Ÿæœ‰æç¤º12345&lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-configuration-processor&lt;/artifactId&gt; &lt;optional&gt;true&lt;/optional&gt;&lt;/dependency&gt;å¯¼å…¥ä¾èµ–å®Œæˆéœ€è¦é‡æ–°è¿è¡Œspringbooté¡¹ç›®ä»¥ç”Ÿæ•ˆã€‚è¦æ³¨å…¥çš„ç»„ä»¶ç±»Person.java123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101package com.qcmoke.bean;import org.springframework.boot.context.properties.ConfigurationProperties;import org.springframework.stereotype.Component;import java.util.Date;import java.util.List;import java.util.Map;/** * 1ã€å°†é…ç½®æ–‡ä»¶ä¸­é…ç½®çš„æ¯ä¸€ä¸ªå±žæ€§çš„å€¼ï¼Œæ˜ å°„åˆ°å½“å‰ç±»ç»„ä»¶ä¸­ * @ConfigurationPropertiesï¼šå‘Šè¯‰SpringBootå°†æœ¬ç±»ä¸­çš„æ‰€æœ‰å±žæ€§å’Œé…ç½®æ–‡ä»¶ä¸­ç›¸å…³çš„é…ç½®è¿›è¡Œç»‘å®šï¼› * prefix = "person"ï¼šé…ç½®æ–‡ä»¶ä¸­å“ªä¸ªä¸‹é¢çš„æ‰€æœ‰å±žæ€§è¿›è¡Œä¸€ä¸€æ˜ å°„ * * 2ã€åªæœ‰è¿™ä¸ªç»„ä»¶æ˜¯å®¹å™¨ä¸­çš„ç»„ä»¶ï¼Œæ‰èƒ½å®¹å™¨æä¾›çš„@ConfigurationPropertiesåŠŸèƒ½ï¼› * @ConfigurationProperties(prefix = "person")é»˜è®¤ä»Žå…¨å±€é…ç½®æ–‡ä»¶ä¸­èŽ·å–å€¼ï¼› * */@Component@ConfigurationProperties(prefix = "person") //é…ç½®æ³¨å…¥é…ç½®æ–‡ä»¶ä¸­personå±žæ€§çš„å€¼public class Person &#123; /*ç”Ÿæˆget setæ–¹æ³•ï¼›Alt + Insert ç»„åˆ,å¦‚æžœä¸ç”Ÿæ•ˆï¼Œå…ˆæŒ‰NumLké”®*/ private String lastName; private Integer age; private Boolean boss; private Date birth; private Map&lt;String,Object&gt; maps; private List&lt;Object&gt; lists; private Dog dog; @Override public String toString() &#123; return "Person&#123;" + "lastName='" + lastName + '\'' + ", age=" + age + ", boss=" + boss + ", birth=" + birth + ", maps=" + maps + ", lists=" + lists + ", dog=" + dog + '&#125;'; &#125; public String getLastName() &#123; return lastName; &#125; public void setLastName(String lastName) &#123; this.lastName = lastName; &#125; public Integer getAge() &#123; return age; &#125; public void setAge(Integer age) &#123; this.age = age; &#125; public Boolean getBoss() &#123; return boss; &#125; public void setBoss(Boolean boss) &#123; this.boss = boss; &#125; public Date getBirth() &#123; return birth; &#125; public void setBirth(Date birth) &#123; this.birth = birth; &#125; public Map&lt;String, Object&gt; getMaps() &#123; return maps; &#125; public void setMaps(Map&lt;String, Object&gt; maps) &#123; this.maps = maps; &#125; public List&lt;Object&gt; getLists() &#123; return lists; &#125; public void setLists(List&lt;Object&gt; lists) &#123; this.lists = lists; &#125; public Dog getDog() &#123; return dog; &#125; public void setDog(Dog dog) &#123; this.dog = dog; &#125;&#125;Dog.java12345678910111213141516171819202122232425262728293031package com.qcmoke.bean;public class Dog &#123; private String name; private Integer age; @Override public String toString() &#123; return "Dog&#123;" + "name='" + name + '\'' + ", age=" + age + '&#125;'; &#125; public String getName() &#123; return name; &#125; public void setName(String name) &#123; this.name = name; &#125; public Integer getAge() &#123; return age; &#125; public void setAge(Integer age) &#123; this.age = age; &#125;&#125;ç¼–å†™é…ç½®æ–‡ä»¶ï¼Œå°†é…ç½®æ–‡ä»¶ä¸­çš„å±žæ€§å€¼æ³¨å…¥åˆ°Personå¯¹è±¡é‡Œã€‚application.properties123456person.last-name=æŽå››person.age=21person.birth=1996/08/27person.boss=falseperson.maps.k1=v1person.maps.k2=v2ç¼–å†™å•å…ƒæµ‹è¯•ç±»SpringBoot02ConfigApplicationTests.java123456789101112131415161718192021222324package com.qcmoke;import com.qcmoke.bean.Person;import org.junit.Test;import org.junit.runner.RunWith;import org.springframework.beans.factory.annotation.Autowired;import org.springframework.boot.test.context.SpringBootTest;import org.springframework.test.context.junit4.SpringRunner;/* spring bootçš„å•å…ƒæµ‹è¯• ä½¿ç”¨SpringRunneré©±åŠ¨å™¨æ¥æ‰§è¡Œæµ‹è¯•ï¼Œè€Œä¸è¦junit */@RunWith(SpringRunner.class)@SpringBootTestpublic class SpringBoot02ConfigApplicationTests &#123; @Autowired Person person; //è‡ªåŠ¨æ³¨å…¥ @Test public void contextLoads() &#123; System.out.println(person); &#125;&#125;Â¶ï¼ˆ5ï¼‰@Valueä»Žé…ç½®æ–‡ä»¶èŽ·å–å€¼æ³¨å…¥ç»„ä»¶å±žæ€§ç»„ä»¶ï¼šPerson.javaé…ç½®æ–‡ä»¶ï¼šapplication.ymlï¼ˆæˆ–è€…application.propertiesï¼‰æ–¹æ¡ˆï¼šé€šè¿‡åœ¨ç»„ä»¶ä¸­æ·»åŠ æ³¨è§£@Value()æ¥è®©ç»„ä»¶èƒ½å¤Ÿä¸Žé…ç½®æ–‡ä»¶ä¸­çš„æŸä¸ªå±žæ€§å»ºç«‹å…³è”ä»¥ä¸‹æ²¡æœ‰ä¿®æ”¹çš„æ–‡ä»¶åŒä¸Šâ¬†ï¸Person.java1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980818283848586878889909192939495package com.qcmoke.bean;import org.springframework.beans.factory.annotation.Value;import org.springframework.stereotype.Component;import java.util.Date;import java.util.List;import java.util.Map;@Componentpublic class Person &#123; /** * &lt;bean class="Person"&gt; * &lt;property name="lastName" value="å­—é¢é‡/$&#123;key&#125;ä»ŽçŽ¯å¢ƒå˜é‡ã€é…ç½®æ–‡ä»¶ä¸­èŽ·å–å€¼/#&#123;SpELå³SpringBè¡¨è¾¾å¼è¯­è¨€&#125;"&gt;&lt;/property&gt; * &lt;bean/&gt; */ /*ç”Ÿæˆget setæ–¹æ³•ï¼›Alt + Insert ç»„åˆ,å¦‚æžœä¸ç”Ÿæ•ˆï¼Œå…ˆæŒ‰NumLké”®*/ @Value("$&#123;person.last-name&#125;") private String lastName; @Value("#&#123;20+1&#125;") private Integer age; private Boolean boss; private Date birth; private Map&lt;String,Object&gt; maps; private List&lt;Object&gt; lists; private Dog dog; @Override public String toString() &#123; return "Person&#123;" + "lastName='" + lastName + '\'' + ", age=" + age + ", boss=" + boss + ", birth=" + birth + ", maps=" + maps + ", lists=" + lists + ", dog=" + dog + '&#125;'; &#125; public String getLastName() &#123; return lastName; &#125; public void setLastName(String lastName) &#123; this.lastName = lastName; &#125; public Integer getAge() &#123; return age; &#125; public void setAge(Integer age) &#123; this.age = age; &#125; public Boolean getBoss() &#123; return boss; &#125; public void setBoss(Boolean boss) &#123; this.boss = boss; &#125; public Date getBirth() &#123; return birth; &#125; public void setBirth(Date birth) &#123; this.birth = birth; &#125; public Map&lt;String, Object&gt; getMaps() &#123; return maps; &#125; public void setMaps(Map&lt;String, Object&gt; maps) &#123; this.maps = maps; &#125; public List&lt;Object&gt; getLists() &#123; return lists; &#125; public void setLists(List&lt;Object&gt; lists) &#123; this.lists = lists; &#125; public Dog getDog() &#123; return dog; &#125; public void setDog(Dog dog) &#123; this.dog = dog; &#125;&#125;Â¶ï¼ˆ6ï¼‰é…ç½®æ–‡ä»¶æ³¨å…¥å€¼æ•°æ®æ ¡éªŒç»„ä»¶ï¼šPerson.javaé…ç½®æ–‡ä»¶ï¼šapplication.propertiesï¼ˆæˆ–è€…application.yml)æ–¹æ¡ˆï¼šé€šè¿‡åœ¨ç»„ä»¶ä¸­æ·»åŠ æ³¨è§£@ConfigurationProperties(prefix = â€œé…ç½®æ–‡ä»¶ä¸­çš„æŸä¸ªå±žæ€§åç§°â€)æ³¨å…¥å€¼æ¥è®©ç»„ä»¶èƒ½å¤Ÿä¸Žé…ç½®æ–‡ä»¶ä¸­çš„æŸä¸ªå±žæ€§å»ºç«‹å…³è”çš„åŒæ—¶ä½¿ç”¨@Validatedå’Œç‰¹å®šæ ¡éªŒæ³¨è§£ã€‚ä»¥ä¸‹æ²¡æœ‰ä¿®æ”¹çš„æ–‡ä»¶åŒä¸Šâ¬†ï¸application.properties123456person.last-name=lisi@qq.comperson.age=21person.birth=1996/08/27person.boss=falseperson.maps.k1=v1person.maps.k2=v2Person.java123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293package com.qcmoke.bean;import org.springframework.boot.context.properties.ConfigurationProperties;import org.springframework.stereotype.Component;import org.springframework.validation.annotation.Validated;import javax.validation.constraints.Email;import java.util.Date;import java.util.List;import java.util.Map;@Component@ConfigurationProperties(prefix = "person")@Validatedpublic class Person &#123; @Email //æ³¨å…¥çš„å€¼å¿…é¡»æ˜¯é‚®ç®±æ ¼å¼ private String lastName; private Integer age; private Boolean boss; private Date birth; private Map&lt;String,Object&gt; maps; private List&lt;Object&gt; lists; private Dog dog; @Override public String toString() &#123; return "Person&#123;" + "lastName='" + lastName + '\'' + ", age=" + age + ", boss=" + boss + ", birth=" + birth + ", maps=" + maps + ", lists=" + lists + ", dog=" + dog + '&#125;'; &#125; public String getLastName() &#123; return lastName; &#125; public void setLastName(String lastName) &#123; this.lastName = lastName; &#125; public Integer getAge() &#123; return age; &#125; public void setAge(Integer age) &#123; this.age = age; &#125; public Boolean getBoss() &#123; return boss; &#125; public void setBoss(Boolean boss) &#123; this.boss = boss; &#125; public Date getBirth() &#123; return birth; &#125; public void setBirth(Date birth) &#123; this.birth = birth; &#125; public Map&lt;String, Object&gt; getMaps() &#123; return maps; &#125; public void setMaps(Map&lt;String, Object&gt; maps) &#123; this.maps = maps; &#125; public List&lt;Object&gt; getLists() &#123; return lists; &#125; public void setLists(List&lt;Object&gt; lists) &#123; this.lists = lists; &#125; public Dog getDog() &#123; return dog; &#125; public void setDog(Dog dog) &#123; this.dog = dog; &#125;&#125;Â¶ï¼ˆ7ï¼‰@ValueèŽ·å–å€¼å’Œ@ConfigurationPropertiesèŽ·å–å€¼æ¯”è¾ƒ@ConfigurationProperties@ValueåŠŸèƒ½æ‰¹é‡æ³¨å…¥é…ç½®æ–‡ä»¶ä¸­çš„å±žæ€§ä¸€ä¸ªä¸ªæŒ‡å®šæ¾æ•£ç»‘å®šï¼ˆæ¾æ•£è¯­æ³•)ï¼Œä¾‹å¦‚å±žæ€§åç§°ä¸ºé©¼å³°æˆ–è€…æ¨ªçº¿ä¸æ•æ„Ÿæ”¯æŒä¸æ”¯æŒSpELä¸æ”¯æŒæ”¯æŒJSR303æ•°æ®æ ¡éªŒæ”¯æŒä¸æ”¯æŒå¤æ‚ç±»åž‹å°è£…æ”¯æŒä¸æ”¯æŒé…ç½®æ–‡ä»¶ymlè¿˜æ˜¯propertieséƒ½èƒ½èŽ·å–åˆ°å€¼ã€‚@Valueå’Œ@ConfigurationPropertiesçš„ä½¿ç”¨åœºæ™¯ï¼šå¦‚æžœè¯´ï¼Œæˆ‘ä»¬åªæ˜¯åœ¨æŸä¸ªä¸šåŠ¡é€»è¾‘ä¸­éœ€è¦èŽ·å–ä¸€ä¸‹é…ç½®æ–‡ä»¶ä¸­çš„æŸé¡¹å€¼ï¼Œå¯é€‰æ‹©ä½¿ç”¨@Valueã€‚å¦‚æžœè¯´ï¼Œæˆ‘ä»¬ä¸“é—¨ç¼–å†™äº†ä¸€ä¸ªjavaBeanæ¥å’Œé…ç½®æ–‡ä»¶è¿›è¡Œæ˜ å°„ï¼Œæˆ‘ä»¬å°±ç›´æŽ¥é€‰æ‹©ä½¿ç”¨@ConfigurationPropertiesã€‚Â¶ï¼ˆ8ï¼‰@PropertySourceä½œç”¨ : åŠ è½½æŒ‡å®šçš„è‡ªå®šä¹‰é…ç½®æ–‡ä»¶ã€‚ä½¿ç”¨èƒŒæ™¯ï¼š@ConfigurationPropertiesé»˜è®¤åŠ è½½çš„æ˜¯å…¨å±€é…ç½®æ–‡ä»¶,å¦‚æžœå…¨éƒ¨çš„é…ç½®éƒ½å†™åˆ°ä¸»é…ç½®æ–‡ä»¶é‡Œï¼Œé‚£ä¹ˆä¸»é…ç½®æ–‡ä»¶å°†ä¼šè¶Šæ¥è¶Šéš¾ç»´æŠ¤ã€‚æˆ‘ä»¬å¯ä»¥å°†ä¸Žæ¡†æž¶æ— å…³çš„é…ç½®å†™åœ¨éžä¸»é…ç½®æ–‡ä»¶ä¸­ï¼Œå°½é‡è§£è€¦ã€‚ä½¿ç”¨æ–¹æ³•ï¼šåœ¨ç»„ä»¶ä¸­æ·»åŠ æ³¨è§£@PropertySource(value = {&quot;è‡ªå®šä¹‰é…ç½®æ–‡ä»¶è·¯å¾„&quot;})æ¥æŒ‡å®šè‡ªå®šä¹‰é…ç½®æ–‡ä»¶å¹¶ä¸”é…åˆ@ConfigurationProperties(prefix = &quot;å±žæ€§å&quot;)æŒ‡å®šå…·ä½“å±žæ€§ã€‚æ¡ˆä¾‹ï¼šä»¥ä¸‹æ‰€æœ‰æœªè¯´æ˜Žçš„æ–‡ä»¶åŒä¸Šæ¬¡æ¡ˆä¾‹ã€‚â‘ æ³¨é‡ŠæŽ‰æ‰€æœ‰ä¸»é…ç½®æ–‡ä»¶çš„personç›¸å…³é…ç½®ã€‚â‘¡person.properties(è‡ªå®šä¹‰é…ç½®æ–‡ä»¶)123456person.last-name=wangwu@qq.comperson.age=21person.birth=1996/08/27person.boss=falseperson.maps.k1=v1person.maps.k2=v2â‘¢Person.javaï¼ˆç»„ä»¶ï¼‰12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576777879808182838485868788899091package com.qcmoke.bean;import org.springframework.boot.context.properties.ConfigurationProperties;import org.springframework.context.annotation.PropertySource;import org.springframework.stereotype.Component;import java.util.Date;import java.util.List;import java.util.Map;@PropertySource(value = &#123;"classpath:person.properties"&#125;)//åŠ è½½æŒ‡å®šçš„è‡ªå®šä¹‰é…ç½®æ–‡ä»¶@ConfigurationProperties(prefix = "person")@Componentpublic class Person &#123; private String lastName; private Integer age; private Boolean boss; private Date birth; private Map&lt;String,Object&gt; maps; private List&lt;Object&gt; lists; private Dog dog; @Override public String toString() &#123; return "Person&#123;" + "lastName='" + lastName + '\'' + ", age=" + age + ", boss=" + boss + ", birth=" + birth + ", maps=" + maps + ", lists=" + lists + ", dog=" + dog + '&#125;'; &#125; public String getLastName() &#123; return lastName; &#125; public void setLastName(String lastName) &#123; this.lastName = lastName; &#125; public Integer getAge() &#123; return age; &#125; public void setAge(Integer age) &#123; this.age = age; &#125; public Boolean getBoss() &#123; return boss; &#125; public void setBoss(Boolean boss) &#123; this.boss = boss; &#125; public Date getBirth() &#123; return birth; &#125; public void setBirth(Date birth) &#123; this.birth = birth; &#125; public Map&lt;String, Object&gt; getMaps() &#123; return maps; &#125; public void setMaps(Map&lt;String, Object&gt; maps) &#123; this.maps = maps; &#125; public List&lt;Object&gt; getLists() &#123; return lists; &#125; public void setLists(List&lt;Object&gt; lists) &#123; this.lists = lists; &#125; public Dog getDog() &#123; return dog; &#125; public void setDog(Dog dog) &#123; this.dog = dog; &#125;&#125;Â¶ï¼ˆ9ï¼‰@ImportResourceä½œç”¨ï¼šå¯¼å…¥springé…ç½®æ–‡ä»¶(.xml)ï¼Œè®©é…ç½®æ–‡ä»¶é‡Œé¢çš„å†…å®¹ç”Ÿæ•ˆï¼›ä½¿ç”¨æ–¹æ³•ï¼šè‡ªå·±ç¼–å†™çš„springé…ç½®æ–‡ä»¶.xmlé…ç½®æ–‡ä»¶ï¼Œä¸èƒ½è‡ªåŠ¨è¯†åˆ«ï¼›æƒ³è®©xmlé…ç½®æ–‡ä»¶ç”Ÿæ•ˆ,å¯ä½¿ç”¨@ImportResource(locations = {&quot;springé…ç½®æ–‡ä»¶xmlçš„è·¯å¾„&quot;})æ ‡æ³¨åœ¨ä¸€ä¸ªé…ç½®ç±»ä¸ŠåŠ è½½è¿›æ¥ã€‚æ¡ˆä¾‹ï¼šä»¥ä¸‹æ²¡æœ‰ä¿®æ”¹çš„æ–‡ä»¶åŒä¸Šâ¬†ï¸beans.xml1234567&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;beans xmlns="http://www.springframework.org/schema/beans" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd"&gt; &lt;bean id="personService" class="com.qcmoke.service.PersonService"&gt;&lt;/bean&gt;&lt;/beans&gt;PersonService.java12345678910111213package com.qcmoke.service;import com.qcmoke.bean.Person;import org.springframework.beans.factory.annotation.Autowired;public class PersonService &#123; @Autowired Person person; public Person getPerson()&#123; return person; &#125;&#125;SpringBoot02Config5Application.java123456789101112131415package com.qcmoke;import org.springframework.boot.SpringApplication;import org.springframework.boot.autoconfigure.SpringBootApplication;import org.springframework.context.annotation.ImportResource;@ImportResource(locations = &#123;"classpath:beans.xml"&#125;)//åœ¨ä¸»é…ç½®ç±»ä¸ŠåŠ è½½beans.xml@SpringBootApplicationpublic class SpringBoot02Config5Application &#123; public static void main(String[] args) &#123; SpringApplication.run(SpringBoot02Config5Application.class, args); &#125;&#125;SpringBoot02Config5ApplicationTests.java12345678910111213141516171819202122232425package com.qcmoke;import com.qcmoke.bean.Person;import com.qcmoke.service.PersonService;import org.junit.Test;import org.junit.runner.RunWith;import org.springframework.beans.factory.annotation.Autowired;import org.springframework.boot.test.context.SpringBootTest;import org.springframework.test.context.junit4.SpringRunner;/* spring bootçš„å•å…ƒæµ‹è¯• ä½¿ç”¨SpringRunneré©±åŠ¨å™¨æ¥æ‰§è¡Œæµ‹è¯•ï¼Œè€Œä¸è¦junit */@RunWith(SpringRunner.class)@SpringBootTestpublic class SpringBoot02Config5ApplicationTests&#123; @Autowired PersonService service; @Test public void contextLoads() &#123; System.out.println(service.getPerson()); &#125;&#125;Â¶ï¼ˆ10ï¼‰é…ç½®æ–‡ä»¶å ä½ç¬¦åœ¨propertiesæˆ–yamlé…ç½®æ–‡ä»¶ä¸­æ˜¯å¯ä»¥ä½¿ç”¨å ä½ç¬¦çš„Â¶â‘ éšæœºæ•°${random.value} - ç±»ä¼¼uuidçš„éšæœºæ•°ï¼Œæ²¡æœ‰&quot;-&quot;è¿žæŽ¥${random.int} - éšæœºå–æ•´åž‹èŒƒå›´å†…çš„ä¸€ä¸ªå€¼${random.long} - éšæœºå–é•¿æ•´åž‹èŒƒå›´å†…çš„ä¸€ä¸ªå€¼${random.long(100,200)} - éšæœºç”Ÿæˆé•¿æ•´åž‹100-200èŒƒå›´å†…çš„ä¸€ä¸ªå€¼${random.uuid} - ç”Ÿæˆä¸€ä¸ªuuidï¼Œæœ‰çŸ­æ è¿žæŽ¥${random.int(10)} - éšæœºç”Ÿæˆä¸€ä¸ª10ä»¥å†…çš„æ•°${random.int(100,200)} - éšæœºç”Ÿæˆä¸€ä¸ª100-200 èŒƒå›´ä»¥å†…çš„æ•°Â¶â‘¡å ä½ç¬¦${key:defaultValue} - è‹¥key ä¸å­˜åœ¨ï¼Œåˆ™å°†defaultValueçš„å€¼èµ‹å€¼ç»™å–å€¼çš„å¯¹è±¡æ¡ˆä¾‹ï¼šé™¤ä»¥ä¸‹ç‰¹åˆ«è¯´æ˜Žçš„æ–‡ä»¶éœ€è¦ä¿®æ”¹ï¼Œå…¶ä»–æ–‡ä»¶åŒä¸Šâ¬†ï¸person.properties1234567891011121314151617181920person.last-name=$&#123;random.uuid&#125;@qq.com#éšæœºç”Ÿæˆä»Ž0åˆ°120çš„æ•´åž‹å€¼person.age=$&#123;random.int(0,120)&#125;person.birth=1996/$&#123;random.int(12)&#125;/27person.boss=false#éšæœºç”Ÿæˆ10ä»¥å†…å¾—æ•´åž‹å€¼person.maps.k1=$&#123;random.int(10)&#125;#ç±»ä¼¼uuidçš„éšæœºæ•°ï¼Œæ²¡æœ‰"-"è¿žæŽ¥person.maps.k2=$&#123;random.value&#125;#èŽ·å–é…ç½®å±žæ€§çš„å€¼è¿›è¡Œå ä½person.dog.name=$&#123;person.last-name&#125;_dog#å…ˆå–ageçš„å€¼ç»™person.dog.ageï¼Œå¦‚æžœä¸Šé¢æ²¡æœ‰ageçš„å±žæ€§å’Œå€¼ï¼Œé‚£ä¹ˆå°±å–é»˜è®¤å€¼2person.dog.age=$&#123;age:2&#125;Â¶2. å¤šçŽ¯å¢ƒé…ç½®springbooté»˜è®¤æ¿€æ´»çš„çš„æ˜¯ä¸»é…ç½®æ–‡ä»¶application.properties/ymlã€‚ä½†å¾ˆå¤šåœºæ™¯çš„é…ç½®ï¼Œæ¯”å¦‚æ•°æ®åº“é…ç½®ã€Redis é…ç½®ã€æ³¨å†Œä¸­å¿ƒå’Œæ—¥å¿—é…ç½®ç­‰ï¼Œåœ¨ä¸åŒçš„çŽ¯å¢ƒï¼Œæˆ‘ä»¬éœ€è¦ä¸åŒçš„åŒ…åŽ»è¿è¡Œé¡¹ç›®ï¼Œé‚£ä¹ˆå°±éœ€è¦æœ‰å¤šç§é…ç½®æ–¹æ¡ˆï¼Œè€Œä¸”å¸Œæœ›ä¸åŒé…ç½®æ–‡ä»¶ç®¡ç†ä¸åŒçš„çŽ¯å¢ƒé…ç½®ï¼Œè¿™ç§æƒ…å†µï¼Œæ–‡ä»¶ååªè¦æ˜¯application-{profile}.properties/ymlï¼Œç„¶åŽåœ¨ä¸»é…ç½®æ–‡ä»¶application.properties/ymlé€šè¿‡ä»¥ä¸‹é…ç½®æ¥æ¿€æ´»å³å¯ã€‚123spring: profiles: active: &#123;profile&#125;æ¡ˆä¾‹ï¼šå¤šçŽ¯å¢ƒé…ç½®æ–‡ä»¶æœ‰ï¼šapplication-dev.yml ï¼ˆå¼€å‘çŽ¯å¢ƒï¼‰12server: port: 8081application-prod.yml ï¼ˆç”Ÿäº§çŽ¯å¢ƒï¼‰12server: port: 80æ¿€æ´»ä¸åŒçŽ¯å¢ƒä¸‹çš„é…ç½®æ–‡ä»¶(ä¸‰ç§æ–¹å¼)ï¼ˆ1ï¼‰ä¸»é…ç½®æ–‡ä»¶æŒ‡å®šæ–¹å¼application.yml123spring: profiles: active: devï¼ˆ2ï¼‰å‘½ä»¤è¡Œï¼š1java -jar spring-boot-02-config-0.0.1-SNAPSHOT.jar --spring.profiles.active=devï¼›ä¹Ÿå¯ä»¥ç›´æŽ¥åœ¨æµ‹è¯•çš„æ—¶å€™ï¼Œideä¸­é…ç½®ä¼ å…¥å‘½ä»¤è¡Œå‚æ•°ï¼ˆ3ï¼‰è™šæ‹Ÿæœºå‚æ•°ï¼›1-Dspring.profiles.active=devÂ¶3. å¤šæ–‡æ¡£å—é…ç½®è¦æ±‚é…ç½®æ–‡ä»¶æ˜¯ymlæ ¼å¼ã€‚12345678910111213141516171819server: port: 8081spring: profiles: active: prod---server: port: 8083spring: profiles: dev---server: port: 8084spring: profiles: prod #æŒ‡å®šå±žäºŽå“ªä¸ªçŽ¯å¢ƒÂ¶4. é…ç½®æ–‡ä»¶åŠ è½½ä½ç½®Â¶4.1 åŠ è½½ä¼˜å…ˆçº§springboot å¯åŠ¨ä¼šæ‰«æä»¥ä¸‹ä½ç½®çš„application.propertiesæˆ–è€…application.ymlæ–‡ä»¶ä½œä¸ºSpring bootçš„é»˜è®¤é…ç½®æ–‡ä»¶,ä¼˜å…ˆçº§ç”±é«˜åˆ°åº•ï¼Œé«˜ä¼˜å…ˆçº§çš„é…ç½®ä¼šè¦†ç›–ä½Žä¼˜å…ˆçº§çš„é…ç½®ï¼›â€“file:./config/â€“file:./â€“classpath:/config/â€“classpath:/å¦‚æžœä»¥ä¸Š4ä¸ªä½ç½®éƒ½æœ‰ä¸»é…ç½®æ–‡ä»¶ï¼Œé‚£ä¹ˆSpringBootä¼šä»Žè¿™å››ä¸ªä½ç½®å…¨éƒ¨åŠ è½½ä¸»é…ç½®æ–‡ä»¶ï¼Œè¾¾åˆ°äº’è¡¥é…ç½®çš„æ•ˆæžœï¼›Â¶4.2 è‡ªå®šä¹‰åŠ è½½ä½ç½®æˆ‘ä»¬è¿˜å¯ä»¥é€šè¿‡spring.config.locationæ¥æ”¹å˜é»˜è®¤çš„é…ç½®æ–‡ä»¶ä½ç½®é¡¹ç›®æ‰“åŒ…å¥½ä»¥åŽï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨å‘½ä»¤è¡Œå‚æ•°çš„å½¢å¼ï¼Œå¯åŠ¨é¡¹ç›®çš„æ—¶å€™æ¥æŒ‡å®šé…ç½®æ–‡ä»¶çš„æ–°ä½ç½®ï¼›æŒ‡å®šé…ç½®æ–‡ä»¶å’Œé»˜è®¤åŠ è½½çš„è¿™äº›é…ç½®æ–‡ä»¶å…±åŒèµ·ä½œç”¨å½¢æˆäº’è¡¥é…ç½®ï¼›1java -jar spring-boot-02-config-02-0.0.1-SNAPSHOT.jar --spring.config.location=G:/application.propertiesÂ¶5. å¤–éƒ¨é…ç½®åŠ è½½é¡ºåºSpringBootä¹Ÿå¯ä»¥ä»Žä»¥ä¸‹ä½ç½®åŠ è½½é…ç½®ï¼› ä¼˜å…ˆçº§ä»Žé«˜åˆ°ä½Žï¼›é«˜ä¼˜å…ˆçº§çš„é…ç½®è¦†ç›–ä½Žä¼˜å…ˆçº§çš„é…ç½®ï¼Œæ‰€æœ‰çš„é…ç½®ä¼šå½¢æˆäº’è¡¥é…ç½®ã€‚1.å‘½ä»¤è¡Œå‚æ•°æ‰€æœ‰çš„é…ç½®éƒ½å¯ä»¥åœ¨å‘½ä»¤è¡Œä¸Šè¿›è¡ŒæŒ‡å®š1java -jar spring-boot-02-config-02-0.0.1-SNAPSHOT.jar --server.port=8087 --server.context-path=/abcå¤šä¸ªé…ç½®ç”¨ç©ºæ ¼åˆ†å¼€ï¼› --é…ç½®é¡¹=å€¼2.æ¥è‡ªjava:comp/envçš„JNDIå±žæ€§3.Javaç³»ç»Ÿå±žæ€§ï¼ˆSystem.getProperties()ï¼‰4.æ“ä½œç³»ç»ŸçŽ¯å¢ƒå˜é‡*5.RandomValuePropertySourceé…ç½®çš„random.å±žæ€§å€¼6.jaråŒ…å¤–éƒ¨çš„application-{profile}.propertiesæˆ–application.yml(å¸¦spring.profile)é…ç½®æ–‡ä»¶7.jaråŒ…å†…éƒ¨çš„application-{profile}.propertiesæˆ–application.yml(å¸¦spring.profile)é…ç½®æ–‡ä»¶8.jaråŒ…å¤–éƒ¨çš„application.propertiesæˆ–application.yml(ä¸å¸¦spring.profile)é…ç½®æ–‡ä»¶9.jaråŒ…å†…éƒ¨çš„application.propertiesæˆ–application.yml(ä¸å¸¦spring.profile)é…ç½®æ–‡ä»¶10.@Configurationæ³¨è§£ç±»ä¸Šçš„@PropertySource11.é€šè¿‡SpringApplication.setDefaultPropertiesæŒ‡å®šçš„é»˜è®¤å±žæ€§Â¶6. é…ç½®ç±»åœ¨springä¸­ï¼Œç»™springå®¹å™¨æ·»åŠ ç»„ä»¶æœ‰ä¸¤ç§æ–¹å¼ï¼šé€šè¿‡é…ç½®æ–‡ä»¶æ·»åŠ ç»„ä»¶ ï¼ˆå‰é¢å·²ç»ä»‹ç»ï¼‰é€šè¿‡é…ç½®ç±»çš„æ–¹å¼æ·»åŠ ç»„ä»¶è€ŒSpringBootæŽ¨èç»™å®¹å™¨ä¸­æ·»åŠ ç»„ä»¶çš„æ–¹å¼æ˜¯ä½¿ç”¨å…¨æ³¨è§£çš„æ–¹å¼ï¼Œä¹Ÿå°±æ˜¯é…ç½®ç±»çš„æ–¹å¼ã€‚Â¶ï¼ˆ1ï¼‰é…ç½®ç±»æ·»åŠ ç»„ä»¶ä¼šç”¨åˆ°ä¸¤ä¸ªé‡è¦çš„æ³¨è§£@Configuration æŒ‡æ˜Žå½“å‰ç±»æ˜¯ä¸€ä¸ªé…ç½®ç±»ï¼Œç›¸å½“äºŽspring.xml@Bean å°†æ–¹æ³•çš„è¿”å›žå€¼æ·»åŠ åˆ°å®¹å™¨ä¸­ã€‚é»˜è®¤çš„bean idå°±æ˜¯æ–¹æ³•åÂ¶ï¼ˆ2ï¼‰æ¡ˆä¾‹ä»¥ä¸‹æ²¡æœ‰ä¿®æ”¹çš„æ–‡ä»¶åŒä¸Šâ¬†ï¸ï¼ˆ1ï¼‰åˆ›å»ºé…ç½®ç±»PersonConfig.java1234567891011121314151617package com.qcmoke.config;import com.qcmoke.service.PersonService;import org.springframework.context.annotation.Bean;import org.springframework.context.annotation.Configuration;/** * @Configuration æŒ‡æ˜Žå½“å‰ç±»æ˜¯ä¸€ä¸ªé…ç½®ç±»ï¼Œç›¸å½“äºŽspring.xml * @Bean å°†æ–¹æ³•çš„è¿”å›žå€¼æ·»åŠ åˆ°å®¹å™¨ä¸­ã€‚é»˜è®¤çš„bean idå°±æ˜¯æ–¹æ³•å */@Configurationpublic class PersonConfig &#123; @Bean public PersonService personService()&#123; return new PersonService(); &#125;&#125;ï¼ˆ2ï¼‰å–æ¶ˆä¸»é…ç½®æ–‡ä»¶çš„@ImportResourceæ³¨è§£SpringBoot02Config5Application.java123456789101112131415package com.qcmoke;import org.springframework.boot.SpringApplication;import org.springframework.boot.autoconfigure.SpringBootApplication;import org.springframework.context.annotation.ImportResource;//@ImportResource(locations = &#123;"classpath:beans.xml"&#125;)//åœ¨ä¸»é…ç½®ç±»ä¸ŠåŠ è½½beans.xml@SpringBootApplicationpublic class SpringBoot02Config5Application &#123; public static void main(String[] args) &#123; SpringApplication.run(SpringBoot02Config5Application.class, args); &#125;&#125;Â¶ä¸‰ã€æ—¥å¿—Â¶1. å¸‚é¢ä¸Šçš„æ—¥å¿—æ¡†æž¶JULã€JCLã€Jboss-loggingã€logbackã€log4jã€log4j2ã€slf4jâ€¦æ—¥å¿—é—¨é¢ ï¼ˆæ—¥å¿—çš„æŠ½è±¡å±‚ï¼‰æ—¥å¿—å®žçŽ°JCLï¼ˆJakarta Commons Loggingï¼‰ SLF4jï¼ˆSimple Logging Facade for Javaï¼‰ jboss-loggingLog4j JULï¼ˆjava.util.loggingï¼‰ Log4j2 Logbackå·¦è¾¹é€‰ä¸€ä¸ªé—¨é¢ï¼ˆæŠ½è±¡å±‚ï¼‰ã€å³è¾¹æ¥é€‰ä¸€ä¸ªå®žçŽ°ï¼›æ—¥å¿—é—¨é¢ï¼š SLF4Jï¼›æ—¥å¿—å®žçŽ°ï¼šLogbackï¼›SpringBootï¼šåº•å±‚æ˜¯Springæ¡†æž¶ï¼ŒSpringæ¡†æž¶é»˜è®¤æ˜¯ç”¨JCLè€ŒSpringBooté€‰ç”¨ SLF4jå’Œlogbackã€‚æ¯ä¸€ä¸ªæ—¥å¿—çš„å®žçŽ°æ¡†æž¶éƒ½æœ‰è‡ªå·±çš„é…ç½®æ–‡ä»¶ã€‚ä½¿ç”¨slf4jä»¥åŽï¼Œé…ç½®æ–‡ä»¶è¿˜æ˜¯åšæˆæ—¥å¿—å®žçŽ°æ¡†æž¶è‡ªå·±æœ¬èº«çš„é…ç½®æ–‡ä»¶ï¼›Â¶2. é—ç•™é—®é¢˜Springï¼ˆcommons-loggingï¼‰ã€Hibernateï¼ˆjboss-loggingï¼‰ã€MyBatisã€xxxxç»Ÿä¸€æ—¥å¿—è®°å½•ï¼Œå³ä½¿æ˜¯åˆ«çš„æ¡†æž¶å’Œæˆ‘ä¸€èµ·ç»Ÿä¸€ä½¿ç”¨slf4jè¿›è¡ŒÂ¶3. ç»Ÿä¸€æ—¥å¿—è®°å½•å¦‚ä½•è®©ç³»ç»Ÿä¸­æ‰€æœ‰çš„æ—¥å¿—éƒ½ç»Ÿä¸€åˆ°slf4jï¼›1ã€å°†ç³»ç»Ÿä¸­å…¶ä»–æ—¥å¿—æ¡†æž¶å…ˆæŽ’é™¤å‡ºåŽ»2ã€ç”¨ä¸­é—´åŒ…æ¥æ›¿æ¢åŽŸæœ‰çš„æ—¥å¿—æ¡†æž¶3ã€æˆ‘ä»¬å¯¼å…¥slf4jå…¶ä»–çš„å®žçŽ°Â¶4. ä½¿ç”¨æ—¥å¿—SpringBootåº•å±‚ä¹Ÿæ˜¯ä½¿ç”¨slf4j+logbackçš„æ–¹å¼è¿›è¡Œæ—¥å¿—è®°å½•ã€‚å¹¶ä¸”ä¹ŸæŠŠå…¶ä»–çš„æ—¥å¿—éƒ½æ›¿æ¢æˆäº†slf4j,å¹¶ä¸”éƒ½å·²ç»é…æœ‰æ—¥å¿—é…ç½®é»˜è®¤å€¼ã€‚å¼€å‘çš„æ—¶å€™ç›´æŽ¥ä½¿ç”¨å³å¯ã€‚æµ‹è¯•ï¼šSpringBoot03LogApplicationTests.java12345678910111213141516171819202122232425262728package com.qcmoke;import org.junit.Test;import org.junit.runner.RunWith;import org.slf4j.Logger;import org.slf4j.LoggerFactory;import org.springframework.boot.test.context.SpringBootTest;import org.springframework.test.context.junit4.SpringRunner;@RunWith(SpringRunner.class)@SpringBootTestpublic class SpringBoot03LogApplicationTests &#123; //è®°å½•å™¨ Logger logger = LoggerFactory.getLogger(getClass()); @Test public void contextLoads() &#123; //æ—¥å¿—çš„çº§åˆ«ï¼› //ç”±ä½Žåˆ°é«˜ trace&lt;debug&lt;info&lt;warn&lt;error //å¯ä»¥è°ƒæ•´è¾“å‡ºçš„æ—¥å¿—çº§åˆ«ï¼›æ—¥å¿—å°±åªä¼šåœ¨è¿™ä¸ªçº§åˆ«ä»¥ä»¥åŽçš„é«˜çº§åˆ«ç”Ÿæ•ˆ logger.trace("è¿™æ˜¯traceæ—¥å¿—..."); logger.debug("è¿™æ˜¯debugæ—¥å¿—..."); //SpringBooté»˜è®¤ç»™æˆ‘ä»¬ä½¿ç”¨çš„æ˜¯infoçº§åˆ«çš„ï¼Œæ²¡æœ‰æŒ‡å®šçº§åˆ«çš„å°±ç”¨SpringBooté»˜è®¤è§„å®šçš„çº§åˆ«ï¼›rootçº§åˆ« logger.info("è¿™æ˜¯infoæ—¥å¿—..."); logger.warn("è¿™æ˜¯warnæ—¥å¿—..."); logger.error("è¿™æ˜¯erroræ—¥å¿—..."); &#125;&#125;Â¶5. SpringBootä¿®æ”¹æ—¥å¿—çš„é»˜è®¤é…ç½®application.properties123456789101112131415logging.level.com.atguigu=trace#logging.path=# ä¸æŒ‡å®šè·¯å¾„åœ¨å½“å‰é¡¹ç›®ä¸‹ç”Ÿæˆspringboot.logæ—¥å¿—# å¯ä»¥æŒ‡å®šå®Œæ•´çš„è·¯å¾„ï¼›#logging.file=G:/springboot.log# åœ¨å½“å‰ç£ç›˜çš„æ ¹è·¯å¾„ä¸‹åˆ›å»ºspringæ–‡ä»¶å¤¹å’Œé‡Œé¢çš„logæ–‡ä»¶å¤¹ï¼›ä½¿ç”¨ spring.log ä½œä¸ºé»˜è®¤æ–‡ä»¶logging.path=/spring/log# åœ¨æŽ§åˆ¶å°è¾“å‡ºçš„æ—¥å¿—çš„æ ¼å¼logging.pattern.console=%d&#123;yyyy-MM-dd&#125; [%thread] %-5level %logger&#123;50&#125; - %msg%n# æŒ‡å®šæ–‡ä»¶ä¸­æ—¥å¿—è¾“å‡ºçš„æ ¼å¼logging.pattern.file=%d&#123;yyyy-MM-dd&#125; === [%thread] === %-5level === %logger&#123;50&#125; ==== %msg%nlogging.fileå’Œlogging.pathlogging.filelogging.pathExampleDescription(none)(none)åªåœ¨æŽ§åˆ¶å°è¾“å‡ºæŒ‡å®šæ–‡ä»¶å(none)my.logè¾“å‡ºæ—¥å¿—åˆ°my.logæ–‡ä»¶(none)æŒ‡å®šç›®å½•/var/logè¾“å‡ºåˆ°æŒ‡å®šç›®å½•çš„ spring.log æ–‡ä»¶ä¸­æŸ¥çœ‹springbooté»˜è®¤æ—¥å¿—é…ç½®çš„ç›®å½•spring-boot-2.1.4.RELEASE.jar!/org/springframework/boot/logging/logback/Â¶6. è‡ªå®šä¹‰æ—¥å¿—é…ç½®ç»™ç±»è·¯å¾„ä¸‹æ”¾ä¸Šæ—¥å¿—æ¡†æž¶è‡ªå·±çš„é…ç½®æ–‡ä»¶å³å¯ï¼›SpringBootå°±ä¸ä½¿ç”¨ä»–é»˜è®¤é…ç½®çš„äº†ã€‚ä»¥ä¸‹è¡¨æ ¼æ˜¯å„ç±»æ—¥å¿—æ¡†æž¶çš„é…ç½®æ–‡ä»¶åè§„èŒƒã€‚Logging SystemCustomizationLogbacklogback-spring.xml, logback-spring.groovy, logback.xml or logback.groovyLog4j2log4j2-spring.xml or log4j2.xmlJDK (Java Util Logging)logging.propertieså¯¹äºŽLogbackæ—¥å¿—æ¡†æž¶çš„å¦å¤–è¯´æ˜Žï¼Œä¸¤ç§å‘½åè§„åˆ™çš„å·®åˆ«ã€‚logback.xmlï¼šç›´æŽ¥å°±è¢«æ—¥å¿—æ¡†æž¶è¯†åˆ«äº†ã€‚logback-spring.xml(å»ºè®®ä½¿ç”¨)ï¼šæ—¥å¿—æ¡†æž¶å°±ä¸ç›´æŽ¥åŠ è½½æ—¥å¿—çš„é…ç½®é¡¹ï¼Œç”±SpringBootè§£æžæ—¥å¿—é…ç½®ï¼Œå¯ä»¥ä½¿ç”¨SpringBootçš„é«˜çº§ProfileåŠŸèƒ½ã€‚å¦‚12345678910111213141516171819&lt;appender name="stdout" class="ch.qos.logback.core.ConsoleAppender"&gt; &lt;!-- æ—¥å¿—è¾“å‡ºæ ¼å¼ï¼š %dè¡¨ç¤ºæ—¥æœŸæ—¶é—´ï¼Œ %threadè¡¨ç¤ºçº¿ç¨‹åï¼Œ %-5levelï¼šçº§åˆ«ä»Žå·¦æ˜¾ç¤º5ä¸ªå­—ç¬¦å®½åº¦ %logger&#123;50&#125; è¡¨ç¤ºloggeråå­—æœ€é•¿50ä¸ªå­—ç¬¦ï¼Œå¦åˆ™æŒ‰ç…§å¥ç‚¹åˆ†å‰²ã€‚ %msgï¼šæ—¥å¿—æ¶ˆæ¯ï¼Œ %næ˜¯æ¢è¡Œç¬¦ --&gt; &lt;layout class="ch.qos.logback.classic.PatternLayout"&gt; &lt;springProfile name="dev"&gt; &lt;pattern&gt;%d&#123;yyyy-MM-dd HH:mm:ss.SSS&#125; ----&gt; [%thread] ---&gt; %-5level %logger&#123;50&#125; - %msg%n&lt;/pattern&gt; &lt;/springProfile&gt; &lt;springProfile name="!dev"&gt; &lt;pattern&gt;%d&#123;yyyy-MM-dd HH:mm:ss.SSS&#125; ==== [%thread] ==== %-5level %logger&#123;50&#125; - %msg%n&lt;/pattern&gt; &lt;/springProfile&gt; &lt;/layout&gt; &lt;/appender&gt;å¦‚æžœä½¿ç”¨logback.xmlä½œä¸ºæ—¥å¿—é…ç½®æ–‡ä»¶ï¼Œè¿˜è¦ä½¿ç”¨profileåŠŸèƒ½,å¯èƒ½ä¼šæŠ¥é”™logback-spring.xmlé…ç½®è¯¦æƒ…è§£é‡Š123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;!--scanï¼šå½“æ­¤å±žæ€§è®¾ç½®ä¸ºtrueæ—¶ï¼Œé…ç½®æ–‡ä»¶å¦‚æžœå‘ç”Ÿæ”¹å˜ï¼Œå°†ä¼šè¢«é‡æ–°åŠ è½½ï¼Œé»˜è®¤å€¼ä¸ºtrueã€‚scanPeriodï¼šè®¾ç½®ç›‘æµ‹é…ç½®æ–‡ä»¶æ˜¯å¦æœ‰ä¿®æ”¹çš„æ—¶é—´é—´éš”ï¼Œå¦‚æžœæ²¡æœ‰ç»™å‡ºæ—¶é—´å•ä½ï¼Œé»˜è®¤å•ä½æ˜¯æ¯«ç§’å½“scanä¸ºtrueæ—¶ï¼Œæ­¤å±žæ€§ç”Ÿæ•ˆã€‚é»˜è®¤çš„æ—¶é—´é—´éš”ä¸º1åˆ†é’Ÿã€‚debugï¼šå½“æ­¤å±žæ€§è®¾ç½®ä¸ºtrueæ—¶ï¼Œå°†æ‰“å°å‡ºlogbackå†…éƒ¨æ—¥å¿—ä¿¡æ¯ï¼Œå®žæ—¶æŸ¥çœ‹logbackè¿è¡ŒçŠ¶æ€ã€‚é»˜è®¤å€¼ä¸ºfalseã€‚--&gt;&lt;configuration scan="false" scanPeriod="60 seconds" debug="false"&gt; &lt;!-- å®šä¹‰æ—¥å¿—çš„æ ¹ç›®å½• --&gt; &lt;property name="LOG_HOME" value="/app/log" /&gt; &lt;!-- å®šä¹‰æ—¥å¿—æ–‡ä»¶åç§° --&gt; &lt;property name="appName" value="atguigu-springboot"&gt;&lt;/property&gt; &lt;!-- ch.qos.logback.core.ConsoleAppender è¡¨ç¤ºæŽ§åˆ¶å°è¾“å‡º --&gt; &lt;appender name="stdout" class="ch.qos.logback.core.ConsoleAppender"&gt; &lt;!-- æ—¥å¿—è¾“å‡ºæ ¼å¼ï¼š %dè¡¨ç¤ºæ—¥æœŸæ—¶é—´ï¼Œ %threadè¡¨ç¤ºçº¿ç¨‹åï¼Œ %-5levelï¼šçº§åˆ«ä»Žå·¦æ˜¾ç¤º5ä¸ªå­—ç¬¦å®½åº¦ %logger&#123;50&#125; è¡¨ç¤ºloggeråå­—æœ€é•¿50ä¸ªå­—ç¬¦ï¼Œå¦åˆ™æŒ‰ç…§å¥ç‚¹åˆ†å‰²ã€‚ %msgï¼šæ—¥å¿—æ¶ˆæ¯ï¼Œ %næ˜¯æ¢è¡Œç¬¦ --&gt; &lt;layout class="ch.qos.logback.classic.PatternLayout"&gt; &lt;pattern&gt;%d&#123;yyyy-MM-dd HH:mm:ss.SSS&#125; -----ã€‹ [%thread] ã€Š----- %-5level %logger&#123;50&#125; - %msg%n&lt;/pattern&gt; &lt;/layout&gt; &lt;/appender&gt; &lt;!-- æ»šåŠ¨è®°å½•æ–‡ä»¶ï¼Œå…ˆå°†æ—¥å¿—è®°å½•åˆ°æŒ‡å®šæ–‡ä»¶ï¼Œå½“ç¬¦åˆæŸä¸ªæ¡ä»¶æ—¶ï¼Œå°†æ—¥å¿—è®°å½•åˆ°å…¶ä»–æ–‡ä»¶ --&gt; &lt;appender name="appLogAppender" class="ch.qos.logback.core.rolling.RollingFileAppender"&gt; &lt;!-- æŒ‡å®šæ—¥å¿—æ–‡ä»¶çš„åç§° --&gt; &lt;file&gt;$&#123;LOG_HOME&#125;/$&#123;appName&#125;.log&lt;/file&gt; &lt;!-- å½“å‘ç”Ÿæ»šåŠ¨æ—¶ï¼Œå†³å®š RollingFileAppender çš„è¡Œä¸ºï¼Œæ¶‰åŠæ–‡ä»¶ç§»åŠ¨å’Œé‡å‘½å TimeBasedRollingPolicyï¼š æœ€å¸¸ç”¨çš„æ»šåŠ¨ç­–ç•¥ï¼Œå®ƒæ ¹æ®æ—¶é—´æ¥åˆ¶å®šæ»šåŠ¨ç­–ç•¥ï¼Œæ—¢è´Ÿè´£æ»šåŠ¨ä¹Ÿè´Ÿè´£å‡ºå‘æ»šåŠ¨ã€‚ --&gt; &lt;rollingPolicy class="ch.qos.logback.core.rolling.TimeBasedRollingPolicy"&gt; &lt;!-- æ»šåŠ¨æ—¶äº§ç”Ÿçš„æ–‡ä»¶çš„å­˜æ”¾ä½ç½®åŠæ–‡ä»¶åç§° %d&#123;yyyy-MM-dd&#125;ï¼šæŒ‰å¤©è¿›è¡Œæ—¥å¿—æ»šåŠ¨ %iï¼šå½“æ–‡ä»¶å¤§å°è¶…è¿‡maxFileSizeæ—¶ï¼ŒæŒ‰ç…§iè¿›è¡Œæ–‡ä»¶æ»šåŠ¨ --&gt; &lt;fileNamePattern&gt;$&#123;LOG_HOME&#125;/$&#123;appName&#125;-%d&#123;yyyy-MM-dd&#125;-%i.log&lt;/fileNamePattern&gt; &lt;!-- å¯é€‰èŠ‚ç‚¹ï¼ŒæŽ§åˆ¶ä¿ç•™çš„å½’æ¡£æ–‡ä»¶çš„æœ€å¤§æ•°é‡ï¼Œè¶…å‡ºæ•°é‡å°±åˆ é™¤æ—§æ–‡ä»¶ã€‚å‡è®¾è®¾ç½®æ¯å¤©æ»šåŠ¨ï¼Œ ä¸”maxHistoryæ˜¯365ï¼Œåˆ™åªä¿å­˜æœ€è¿‘365å¤©çš„æ–‡ä»¶ï¼Œåˆ é™¤ä¹‹å‰çš„æ—§æ–‡ä»¶ã€‚æ³¨æ„ï¼Œåˆ é™¤æ—§æ–‡ä»¶æ˜¯ï¼Œ é‚£äº›ä¸ºäº†å½’æ¡£è€Œåˆ›å»ºçš„ç›®å½•ä¹Ÿä¼šè¢«åˆ é™¤ã€‚ --&gt; &lt;MaxHistory&gt;365&lt;/MaxHistory&gt; &lt;!-- å½“æ—¥å¿—æ–‡ä»¶è¶…è¿‡maxFileSizeæŒ‡å®šçš„å¤§å°æ˜¯ï¼Œæ ¹æ®ä¸Šé¢æåˆ°çš„%iè¿›è¡Œæ—¥å¿—æ–‡ä»¶æ»šåŠ¨ æ³¨æ„æ­¤å¤„é…ç½®SizeBasedTriggeringPolicyæ˜¯æ— æ³•å®žçŽ°æŒ‰æ–‡ä»¶å¤§å°è¿›è¡Œæ»šåŠ¨çš„ï¼Œå¿…é¡»é…ç½®timeBasedFileNamingAndTriggeringPolicy --&gt; &lt;timeBasedFileNamingAndTriggeringPolicy class="ch.qos.logback.core.rolling.SizeAndTimeBasedFNATP"&gt; &lt;maxFileSize&gt;100MB&lt;/maxFileSize&gt; &lt;/timeBasedFileNamingAndTriggeringPolicy&gt; &lt;/rollingPolicy&gt; &lt;!-- æ—¥å¿—è¾“å‡ºæ ¼å¼ï¼š --&gt; &lt;layout class="ch.qos.logback.classic.PatternLayout"&gt; &lt;pattern&gt;%d&#123;yyyy-MM-dd HH:mm:ss.SSS&#125; [ %thread ] - [ %-5level ] [ %logger&#123;50&#125; : %line ] - %msg%n&lt;/pattern&gt; &lt;/layout&gt; &lt;/appender&gt; &lt;!-- loggerä¸»è¦ç”¨äºŽå­˜æ”¾æ—¥å¿—å¯¹è±¡ï¼Œä¹Ÿå¯ä»¥å®šä¹‰æ—¥å¿—ç±»åž‹ã€çº§åˆ« nameï¼šè¡¨ç¤ºåŒ¹é…çš„loggerç±»åž‹å‰ç¼€ï¼Œä¹Ÿå°±æ˜¯åŒ…çš„å‰åŠéƒ¨åˆ† levelï¼šè¦è®°å½•çš„æ—¥å¿—çº§åˆ«ï¼ŒåŒ…æ‹¬ TRACE &lt; DEBUG &lt; INFO &lt; WARN &lt; ERROR additivityï¼šä½œç”¨åœ¨äºŽchildren-loggeræ˜¯å¦ä½¿ç”¨ rootLoggeré…ç½®çš„appenderè¿›è¡Œè¾“å‡ºï¼Œ falseï¼šè¡¨ç¤ºåªç”¨å½“å‰loggerçš„appender-refï¼Œtrueï¼š è¡¨ç¤ºå½“å‰loggerçš„appender-refå’ŒrootLoggerçš„appender-reféƒ½æœ‰æ•ˆ --&gt; &lt;!-- hibernate logger --&gt; &lt;logger name="com.atguigu" level="debug" /&gt; &lt;!-- Spring framework logger --&gt; &lt;logger name="org.springframework" level="debug" additivity="false"&gt;&lt;/logger&gt; &lt;!-- rootä¸Žloggeræ˜¯çˆ¶å­å…³ç³»ï¼Œæ²¡æœ‰ç‰¹åˆ«å®šä¹‰åˆ™é»˜è®¤ä¸ºrootï¼Œä»»ä½•ä¸€ä¸ªç±»åªä¼šå’Œä¸€ä¸ªloggerå¯¹åº”ï¼Œ è¦ä¹ˆæ˜¯å®šä¹‰çš„loggerï¼Œè¦ä¹ˆæ˜¯rootï¼Œåˆ¤æ–­çš„å…³é”®åœ¨äºŽæ‰¾åˆ°è¿™ä¸ªloggerï¼Œç„¶åŽåˆ¤æ–­è¿™ä¸ªloggerçš„appenderå’Œlevelã€‚ --&gt; &lt;root level="info"&gt; &lt;appender-ref ref="stdout" /&gt; &lt;appender-ref ref="appLogAppender" /&gt; &lt;/root&gt;&lt;/configuration&gt;Â¶7. åˆ‡æ¢æ—¥å¿—æ¡†æž¶Â¶å››ã€webå¼€å‘Â¶1. é™æ€èµ„æºçš„æ˜ å°„è§„åˆ™å®šä¹‰è§„åˆ™çš„ç±»ä¸ºï¼šorg.springframework.boot.autoconfigure.web.servlet.WebMvcAutoConfigurationå’Œorg.springframework.boot.autoconfigure.web.ResourcePropertiesæ‰€æœ‰/webjars/** ï¼Œéƒ½åŽ»classpath:/META-INF/resources/webjars/æ‰¾èµ„æºâ€‹ webjarsï¼šä»¥jaråŒ…çš„æ–¹å¼å¼•å…¥é™æ€èµ„æºã€‚http://www.webjars.org/ä¾‹å¦‚å¼•å…¥jquery123456&lt;!--jquery-webjar--&gt;&lt;dependency&gt; &lt;groupId&gt;org.webjars&lt;/groupId&gt; &lt;artifactId&gt;jquery&lt;/artifactId&gt; &lt;version&gt;3.3.1&lt;/version&gt;&lt;/dependency&gt;é‚£ä¹ˆè®¿é—®jqueryçš„åœ°å€æ˜¯http://localhost:8080/webjars/jquery/3.3.1/jquery.jsâ€œ/**â€ è®¿é—®å½“å‰é¡¹ç›®çš„ä»»ä½•èµ„æºï¼Œéƒ½åŽ»ï¼ˆé™æ€èµ„æºçš„æ–‡ä»¶å¤¹ï¼‰æ‰¾æ˜ å°„,ä»¥ä¸‹å°±æ˜¯springbooté»˜è®¤çš„é™æ€èµ„æºç›®å½•ã€‚12345"classpath:/META-INF/resources/", "classpath:/resources/","classpath:/static/", "classpath:/public/" "/"ï¼šå½“å‰é¡¹ç›®çš„æ ¹è·¯å¾„index.htmlé¡µé¢ä¼šè¢«&quot;/**â€œæ˜ å°„ï¼Œé»˜è®¤åŒ¹é…â€/&quot;ã€‚æ‰€æœ‰çš„ **/favicon.icoï¼ˆé¡µé¢å›¾æ ‡ï¼‰éƒ½æ˜¯åœ¨é™æ€èµ„æºæ–‡ä»¶ä¸‹æ‰¾Â¶2. è‡ªå®šä¹‰é™æ€èµ„æºç›®å½•å½“å¯ç”¨è‡ªå®šä¹‰çš„é™æ€èµ„æºç›®å½•åŽï¼Œé‚£ä¹ˆé»˜è®¤çš„é™æ€èµ„æºç›®å½•å°±ä¼šå¤±æ•ˆã€‚å¦‚ä»¥ä¸‹å°†classpath:/mystatic/å’Œclasspath:/mypublic/è®¾ç½®ä¸ºé™æ€èµ„æºç›®å½•ï¼Œé‚£ä¹ˆclasspath:/META-INF/resources/, classpath:/resources/,classpath:/static/, classpath:/public/,/ç­‰é™æ€èµ„æºç›®å½•å°±ä¼šå¤±æ•ˆã€‚application.properties1spring.resources.static-locations=classpath:/mystatic/,classpath:/mypublic/Â¶3. æ¨¡æ¿å¼•æ“ŽJSPï¼ˆç”±äºŽspringbooté»˜è®¤æ˜¯ä»¥jaråŒ…çš„æ–¹å¼æ‰“åŒ…ï¼Œæ‰€æœ‰é»˜è®¤ä¸æ”¯æŒjspï¼‰ã€Velocityã€Freemarkerã€ThymeleafSpringBootæŽ¨èçš„Thymeleafï¼›è¯­æ³•æ›´ç®€å•ï¼ŒåŠŸèƒ½æ›´å¼ºå¤§ï¼›Â¶3.1 ThymeleafÂ¶(1)å¼•å…¥thymeleaf12345678910111213&lt;properties&gt; &lt;!--é…ç½®thymeleafç‰ˆæœ¬--&gt; &lt;thymeleaf.version&gt;3.0.9.RELEASE&lt;/thymeleaf.version&gt; &lt;thymeleaf-layout-dialect.version&gt;2.2.2&lt;/thymeleaf-layout-dialect.version&gt; &lt;!-- å¸ƒå±€åŠŸèƒ½çš„æ”¯æŒç¨‹åº thymeleaf3ä¸»ç¨‹åºè¦layout2ä»¥ä¸Šç‰ˆæœ¬ --&gt;&lt;/properties&gt;&lt;dependencies&gt; &lt;!--thymeleaf--&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-thymeleaf&lt;/artifactId&gt; &lt;/dependency&gt;&lt;/dependencies&gt;å®Œæ•´pom.xml:12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"&gt; &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt; &lt;parent&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt; &lt;version&gt;1.5.10.RELEASE&lt;/version&gt; &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt; &lt;/parent&gt; &lt;groupId&gt;com.qcmoke&lt;/groupId&gt; &lt;artifactId&gt;spring_boot_03_web&lt;/artifactId&gt; &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt; &lt;name&gt;spring_boot_03_web&lt;/name&gt; &lt;description&gt;Demo project for Spring Boot&lt;/description&gt; &lt;properties&gt; &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt; &lt;project.reporting.outputEncoding&gt;UTF-8&lt;/project.reporting.outputEncoding&gt; &lt;java.version&gt;1.8&lt;/java.version&gt; &lt;!--é…ç½®thymeleafç‰ˆæœ¬--&gt; &lt;thymeleaf.version&gt;3.0.9.RELEASE&lt;/thymeleaf.version&gt; &lt;thymeleaf-layout-dialect.version&gt;2.2.2&lt;/thymeleaf-layout-dialect.version&gt; &lt;!-- å¸ƒå±€åŠŸèƒ½çš„æ”¯æŒç¨‹åº thymeleaf3ä¸»ç¨‹åºè¦layout2ä»¥ä¸Šç‰ˆæœ¬ --&gt; &lt;/properties&gt; &lt;dependencies&gt; &lt;!--springboot webæ¨¡å—--&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt; &lt;/dependency&gt; &lt;!--springbootæµ‹è¯•--&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt; &lt;scope&gt;test&lt;/scope&gt; &lt;/dependency&gt; &lt;!--jquery-webjar--&gt; &lt;dependency&gt; &lt;groupId&gt;org.webjars&lt;/groupId&gt; &lt;artifactId&gt;jquery&lt;/artifactId&gt; &lt;version&gt;3.3.1&lt;/version&gt; &lt;/dependency&gt; &lt;!--thymeleaf--&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-thymeleaf&lt;/artifactId&gt; &lt;/dependency&gt; &lt;/dependencies&gt; &lt;build&gt; &lt;plugins&gt; &lt;plugin&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt; &lt;/plugin&gt; &lt;/plugins&gt; &lt;/build&gt;&lt;/project&gt;æ³¨:ä»¥ä¸Šthymeleaféœ€è¦springboot1.5.10.RELEASEç‰ˆæœ¬ï¼Œé«˜ç‰ˆæœ¬å¯èƒ½ä¼šå‡ºé”™Â¶(2)è¡¨è¾¾å¼12345$&#123;...&#125; : å˜é‡è¡¨è¾¾å¼ã€‚OGNLè¡¨è¾¾å¼*&#123;...&#125; : é€‰æ‹©è¡¨è¾¾å¼ã€‚#&#123;...&#125; : æ¶ˆæ¯ (i18n) è¡¨è¾¾å¼ã€‚@&#123;...&#125; : é“¾æŽ¥ (URL) è¡¨è¾¾å¼ã€‚~&#123;...&#125; : ç‰‡æ®µè¡¨è¾¾å¼ã€‚è¡¨è¾¾å¼éƒ½ä½œä¸ºæ ‡ç­¾çš„å±žæ€§å€¼ã€‚æ›´å¤šè¡¨è¾¾å¼ä»‹ç»å¯å‚é˜…å®˜æ–¹æ–‡æ¡£æˆ–è€…https://www.e-learn.cn/thymeleaf/standard-dialectsÂ¶(3) è¯­æ³•æ›´å¤šè¯­æ³•å‚é˜…å®˜æ–¹æ–‡æ¡£æˆ–è€…https://www.kancloud.cn/cxr17618/springboot/428898Â¶(4)æµ‹è¯•thymeleafåªè¦æˆ‘ä»¬æŠŠç¼–å†™æœ‰thymeleafè¯­æ³•çš„HTMLé¡µé¢æ”¾åœ¨classpath:/templates/ï¼Œthymeleafå°±èƒ½è‡ªåŠ¨æ¸²æŸ“ã€‚â‘ SuccessController.java(ç›®çš„æ˜¯ç»™thymeleafé¡µé¢æä¾›åŠ¨æ€æ•°æ®)12345678910111213141516171819package com.qcmoke.controller;import org.springframework.stereotype.Controller;import org.springframework.web.bind.annotation.RequestMapping;import java.util.Arrays;import java.util.Map;@Controllerpublic class SuccessController &#123; //æŸ¥å‡ºç”¨æˆ·æ•°æ®ï¼Œåœ¨é¡µé¢å±•ç¤º @RequestMapping("/success") public String success(Map&lt;String,Object&gt; map)&#123; map.put("hello","&lt;h1&gt;ä½ å¥½&lt;/h1&gt;");//åŠ¨æ€æ•°æ® map.put("users",Arrays.asList("qcmoke","zhangsan","lisi")); return "success"; &#125;&#125;â‘¡success.html12345678910111213141516171819202122232425262728&lt;!DOCTYPE html&gt;&lt;html lang="en" xmlns:th="http://www.thymeleaf.org"&gt; &lt;!--å¯¼å…¥thymeleafçš„åç§°ç©ºé—´ï¼Œæœ‰æ›´å¥½çš„thymeleafè¯­æ³•æç¤ºæ•ˆæžœ--&gt;&lt;head&gt; &lt;meta charset="UTF-8"&gt; &lt;title&gt;Title&lt;/title&gt;&lt;/head&gt;&lt;body&gt;&lt;!--th:textä¸è½¬è¯‘ç‰¹æ®Šå­—ç¬¦--&gt;&lt;div th:utext="$&#123;hello&#125;"&gt;è¿™æ˜¯æ˜¾ç¤ºæ¬¢è¿Žä¿¡æ¯&lt;/div&gt;&lt;!--å°†divé‡Œé¢çš„æ–‡æœ¬å†…å®¹è®¾ç½®ä¸ºhelloåŠ¨æ€å˜é‡çš„å€¼--&gt;&lt;!--th:textè½¬è¯‘ç‰¹æ®Šå­—ç¬¦--&gt;&lt;div th:text="$&#123;hello&#125;"&gt;&lt;/div&gt;&lt;!--th:each--&gt;&lt;h4 th:text="$&#123;user&#125;" th:each="user:$&#123;users&#125;"&gt;&lt;/h4&gt;&lt;!--æ¯éåŽ†ä¸€æ¬¡å°±ä¼šç”Ÿæˆä¸€ä¸ªh4æ ‡ç­¾--&gt;&lt;h4&gt; &lt;span th:text="$&#123;user&#125;" th:each="user:$&#123;users&#125;"&gt;&lt;/span&gt;&lt;!--æ¯éåŽ†ä¸€æ¬¡å°±ä¼šç”Ÿæˆä¸€ä¸ªspanæ ‡ç­¾--&gt;&lt;/h4&gt;&lt;!--è¡Œå†…è¡¨è¾¾å¼ï¼Œå–å€¼å¹¶æ˜¾ç¤º--&gt;&lt;h4&gt; &lt;span th:each="user:$&#123;users&#125;"&gt; [[$&#123;user&#125;]] &lt;/span&gt;&lt;/h4&gt;&lt;/body&gt;&lt;/html&gt;Â¶3.2 Jspspringbootå†…ç½®servletæœåŠ¡å™¨é»˜è®¤ä¸æ”¯æŒä»¥å¯åŠ¨springbootåº”ç”¨å³mainæ–¹æ³•å¯åŠ¨çš„æ–¹å¼è§£æžå™¨jspã€‚ä¸ºäº†è§£å†³è¿™ç§é—®é¢˜ã€‚æœ‰ä¸¤ç§å†³ç»æ–¹æ¡ˆã€‚Â¶3.2.1 å¤–ç½®servletæœåŠ¡å™¨æ–¹æ¡ˆï¼ˆ1ï¼‰åˆ›å»ºé¡¹ç›®çš„æ‰“åŒ…æ–¹å¼ä½warï¼ˆ2ï¼‰æ·»åŠ ä¾èµ–12345&lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-tomcat&lt;/artifactId&gt; &lt;scope&gt;provided&lt;/scope&gt;&lt;/dependency&gt;å®Œæ•´pom.xml1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"&gt; &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt; &lt;parent&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt; &lt;version&gt;1.5.10.RELEASE&lt;/version&gt; &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt; &lt;/parent&gt; &lt;groupId&gt;com.qcmoke&lt;/groupId&gt; &lt;artifactId&gt;spring_boot_03_web_support_jsp&lt;/artifactId&gt; &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt; &lt;packaging&gt;war&lt;/packaging&gt; &lt;name&gt;spring_boot_03_web_support_jsp&lt;/name&gt; &lt;description&gt;Demo project for Spring Boot&lt;/description&gt; &lt;properties&gt; &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt; &lt;project.reporting.outputEncoding&gt;UTF-8&lt;/project.reporting.outputEncoding&gt; &lt;java.version&gt;1.8&lt;/java.version&gt; &lt;/properties&gt; &lt;dependencies&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt; &lt;/dependency&gt; &lt;!--å¤–ç½®tomcatæ”¯æŒjspæ–¹æ¡ˆ--&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-tomcat&lt;/artifactId&gt; &lt;scope&gt;provided&lt;/scope&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt; &lt;scope&gt;test&lt;/scope&gt; &lt;/dependency&gt; &lt;/dependencies&gt; &lt;build&gt; &lt;plugins&gt; &lt;plugin&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt; &lt;/plugin&gt; &lt;/plugins&gt; &lt;/build&gt;&lt;/project&gt;ï¼ˆ3ï¼‰å®Œå–„é¡¹ç›®ç»“æž„å’Œé…ç½®tomcatç”Ÿæˆwebappç”Ÿæˆweb.xmlä¿®æ”¹web.xmlè·¯å¾„ä¸ºé¡¹ç›®åœ°å€\src\main\webapp\WEB-INF\web.xmlé…ç½®tomcatéƒ¨ç½²webé¡¹ç›®ï¼ˆ4ï¼‰ç¼–å†™ä¸€ä¸ªSpringBootServletInitializerçš„å­ç±»ï¼Œå¹¶è°ƒç”¨configureæ–¹æ³•ï¼ˆå¿…é¡»ï¼‰ï¼Œä½œç”¨æ˜¯åœ¨tomcatå¯åŠ¨åŒæ—¶1234567891011121314package com.qcmoke;import org.springframework.boot.builder.SpringApplicationBuilder;import org.springframework.boot.web.support.SpringBootServletInitializer;/*** Webç¨‹åºå¯åŠ¨ç±»*/public class ServletInitializer extends SpringBootServletInitializer &#123; @Override protected SpringApplicationBuilder configure(SpringApplicationBuilder application) &#123; return application.sources(SpringBoot03WebSupportJspApplication.class); &#125;&#125;ï¼ˆ3ï¼‰é…ç½®application.properties123# é…ç½®è§†å›¾è§£æžå™¨ï¼Œé…ç½®jspçš„è·¯å¾„å’ŒåŽç¼€spring.mvc.view.prefix=/WEB-INF/spring.mvc.view.suffix=.jspï¼ˆ4ï¼‰ç¼–å†™æµ‹è¯•ä»£ç UserController.java1234567891011121314151617package com.qcmoke.controller;import org.springframework.stereotype.Controller;import org.springframework.ui.Model;import org.springframework.web.bind.annotation.RequestMapping;import java.util.Map;@Controllerpublic class UserController &#123; @RequestMapping("/tomain") public String tomain(Model model, Map&lt;String,Object&gt; map)&#123; model.addAttribute("name","qcmoke"); map.put("age",22); return "success"; &#125;&#125;WEB-INF/success.jsp12345678910111213141516&lt;%-- Created by IntelliJ IDEA. User: qcmoke Date: 2019/4/19 Time: 1:20 To change this template use File | Settings | File Templates.--%&gt;&lt;%@ page contentType="text/html;charset=UTF-8" language="java" %&gt;&lt;html&gt;&lt;head&gt; &lt;title&gt;Title&lt;/title&gt;&lt;/head&gt;&lt;body&gt; hello $&#123;name&#125;,your age is $&#123;age&#125; !&lt;/body&gt;&lt;/html&gt;ï¼ˆ5ï¼‰ä¸ä»¥mainæ–¹æ³•å¯åŠ¨ï¼Œè€Œæ˜¯ç‚¹å‡»runæŒ‰é’®è¿è¡Œéƒ¨ç½²webé¡¹ç›®Â¶3.2.2 å†…ç½®servletæœåŠ¡å™¨åŠ æ’ä»¶æ–¹æ¡ˆï¼ˆ1ï¼‰æ‰“åŒ…æ–¹å¼ä¸ºjaræˆ–è€…warï¼ˆå»ºè®®ä¸ºjarï¼‰ï¼ˆ2ï¼‰æ·»åŠ ä¾èµ–123456789101112&lt;!--å†…åµŒtomcatæ”¯æŒjspæ–¹æ¡ˆ1ï¼ˆæŽ¨èï¼‰--&gt;&lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-tomcat&lt;/artifactId&gt; &lt;scope&gt;provided&lt;/scope&gt;&lt;/dependency&gt;&lt;dependency&gt; &lt;groupId&gt;org.apache.tomcat.embed&lt;/groupId&gt; &lt;artifactId&gt;tomcat-embed-jasper&lt;/artifactId&gt; &lt;scope&gt;provided&lt;/scope&gt;&lt;/dependency&gt;æˆ–è€…1234567891011&lt;!--å†…åµŒtomcatæ”¯æŒjspæ–¹æ¡ˆ2--&gt;&lt;dependency&gt; &lt;groupId&gt;org.apache.tomcat.embed&lt;/groupId&gt; &lt;artifactId&gt;tomcat-embed-core&lt;/artifactId&gt; &lt;version&gt;8.5.16&lt;/version&gt;&lt;/dependency&gt;&lt;dependency&gt; &lt;groupId&gt;org.apache.tomcat&lt;/groupId&gt; &lt;artifactId&gt;tomcat-jasper&lt;/artifactId&gt; &lt;version&gt;8.5.16&lt;/version&gt;&lt;/dependency&gt;å®Œæ•´pom.xml12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"&gt; &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt; &lt;parent&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt; &lt;version&gt;2.1.4.RELEASE&lt;/version&gt; &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt; &lt;/parent&gt; &lt;groupId&gt;com.qcmoke&lt;/groupId&gt; &lt;artifactId&gt;spring_boot_web_jsp2&lt;/artifactId&gt; &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt; &lt;name&gt;spring_boot_web_jsp2&lt;/name&gt; &lt;description&gt;Demo project for Spring Boot&lt;/description&gt; &lt;properties&gt; &lt;java.version&gt;1.8&lt;/java.version&gt; &lt;/properties&gt; &lt;dependencies&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt; &lt;scope&gt;test&lt;/scope&gt; &lt;/dependency&gt; &lt;!--å†…åµŒtomcatæ”¯æŒjspæ–¹æ¡ˆ1--&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-tomcat&lt;/artifactId&gt; &lt;scope&gt;provided&lt;/scope&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.apache.tomcat.embed&lt;/groupId&gt; &lt;artifactId&gt;tomcat-embed-jasper&lt;/artifactId&gt; &lt;scope&gt;provided&lt;/scope&gt; &lt;/dependency&gt; &lt;!--å†…åµŒtomcatæ”¯æŒjspæ–¹æ¡ˆ2--&gt; &lt;!--&lt;dependency&gt; &lt;groupId&gt;org.apache.tomcat.embed&lt;/groupId&gt; &lt;artifactId&gt;tomcat-embed-core&lt;/artifactId&gt; &lt;version&gt;8.5.16&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.apache.tomcat&lt;/groupId&gt; &lt;artifactId&gt;tomcat-jasper&lt;/artifactId&gt; &lt;version&gt;8.5.16&lt;/version&gt; &lt;/dependency&gt;--&gt; &lt;/dependencies&gt; &lt;build&gt; &lt;plugins&gt; &lt;plugin&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt; &lt;/plugin&gt; &lt;/plugins&gt; &lt;/build&gt;&lt;/project&gt;ï¼ˆ3ï¼‰å®Œå–„é¡¹ç›®ç»“æž„å’Œé…ç½®tomcatï¼ˆåŒä¸Šï¼‰ï¼ˆ4ï¼‰é…ç½®application.properties123# é…ç½®è§†å›¾è§£æžå™¨ï¼Œé…ç½®jspçš„è·¯å¾„å’ŒåŽç¼€spring.mvc.view.prefix=/WEB-INF/spring.mvc.view.suffix=.jspï¼ˆ5ï¼‰ç¼–å†™æµ‹è¯•ä»£ç UserController.java1234567891011121314151617package com.qcmoke.controller;import org.springframework.stereotype.Controller;import org.springframework.ui.Model;import org.springframework.web.bind.annotation.RequestMapping;import java.util.Map;@Controllerpublic class UserController &#123; @RequestMapping("/tomain") public String tomain(Model model, Map&lt;String,Object&gt; map)&#123; model.addAttribute("name","qcmoke"); map.put("age",22); return "success"; &#125;&#125;WEB-INF/success.jsp123456789&lt;%@ page contentType="text/html;charset=UTF-8" language="java" %&gt;&lt;html&gt;&lt;head&gt; &lt;title&gt;Title&lt;/title&gt;&lt;/head&gt;&lt;body&gt; hello $&#123;name&#125;,your age is $&#123;age&#125; !&lt;/body&gt;&lt;/html&gt;ï¼ˆ6ï¼‰è¿è¡Œmainæ–¹æ³•å¯åŠ¨springbootåº”ç”¨Â¶3.3 jarå’Œwaræ‰“åŒ…æ–¹å¼å¯åŠ¨åŒºåˆ«jaråŒ…:æ‰§è¡ŒSpringBootApplicationçš„runæ–¹æ³•,å¯åŠ¨IOCå®¹å™¨,ç„¶åŽåˆ›å»ºåµŒå…¥å¼Servletå®¹å™¨ã€‚waråŒ…: å…ˆæ˜¯å¯åŠ¨å¤–ç½®ServletæœåŠ¡å™¨,æœåŠ¡å™¨å°±ä¼šå¯åŠ¨Springbootåº”ç”¨(springBootServletInitizer),ç„¶åŽSpringbootåº”ç”¨å†å¯åŠ¨IOCå®¹å™¨ã€‚Â¶4. SpringMVCè‡ªåŠ¨é…ç½®å®˜æ–¹æ–‡æ¡£Â¶1. Spring MVC auto-configurationSpring Boot é»˜è®¤å·²ç»è‡ªåŠ¨é…ç½®å¥½äº†SpringMVCï¼Œç›´æŽ¥ä½¿ç”¨å³å¯ã€‚è‡ªåŠ¨é…ç½®äº†è§†å›¾è§£æžå™¨è‡ªå®šä¹‰è§†å›¾è§£æžå™¨ï¼ˆå¦‚éœ€è¦ï¼‰ä¾‹å¦‚ï¼š12345678910111213141516171819202122232425262728293031323334353637package com.qcmoke.demo;import org.springframework.boot.SpringApplication;import org.springframework.boot.autoconfigure.SpringBootApplication;import org.springframework.context.annotation.Bean;import org.springframework.web.servlet.View;import org.springframework.web.servlet.ViewResolver;import java.util.Locale;@SpringBootApplicationpublic class DemoApplication &#123; public static void main(String[] args) &#123; SpringApplication.run(DemoApplication.class, args); &#125; /** * è‡ªå®šä¹‰è§†å›¾è§£æžå™¨ */ public static class MyViewResolver implements ViewResolver&#123; @Override public View resolveViewName(String viewName, Locale locale) throws Exception &#123; return null; &#125; &#125; /** * å°†è‡ªå®šä¹‰çš„è§†å›¾è§£æžå™¨æ”¾åˆ°springå®¹å™¨ä¸­ */ @Bean public ViewResolver myViewReolver()&#123; return new MyViewResolver(); &#125;&#125;è‡ªåŠ¨æ³¨å†Œäº† Converter, GenericConverter, Formatteræ ¼å¼åŒ–å™¨ ç­‰è½¬æ¢å™¨.Â¶2. å¦‚ä½•ä¿®æ”¹SpringBootçš„é»˜è®¤webé…ç½®Â¶2.1 æ¨¡å¼â€‹ 1ï¼‰ã€SpringBootåœ¨è‡ªåŠ¨é…ç½®å¾ˆå¤šç»„ä»¶çš„æ—¶å€™ï¼Œå…ˆçœ‹å®¹å™¨ä¸­æœ‰æ²¡æœ‰ç”¨æˆ·è‡ªå·±é…ç½®çš„ï¼ˆ@Beanã€@Componentï¼‰å¦‚æžœæœ‰å°±ç”¨ç”¨æˆ·é…ç½®çš„ï¼Œå¦‚æžœæ²¡æœ‰ï¼Œæ‰è‡ªåŠ¨é…ç½®ï¼›å¦‚æžœæœ‰äº›ç»„ä»¶å¯ä»¥æœ‰å¤šä¸ªï¼ˆå¦‚ViewResolverï¼‰ï¼Œé‚£ä¹ˆSpringBootä¼šå°†ç”¨æˆ·é…ç½®çš„å’Œè‡ªå·±é»˜è®¤çš„é…ç½®çš„ç»„åˆèµ·æ¥ã€‚â€‹ 2ï¼‰ã€åœ¨SpringBootä¸­ä¼šæœ‰éžå¸¸å¤šçš„xxxConfigurerå¸®åŠ©æˆ‘ä»¬è¿›è¡Œæ‰©å±•é…ç½®â€‹ 3ï¼‰ã€åœ¨SpringBootä¸­ä¼šæœ‰å¾ˆå¤šçš„xxxCustomizerå¸®åŠ©æˆ‘ä»¬è¿›è¡Œå®šåˆ¶é…ç½®Â¶2.2 é»˜è®¤è®¿é—®é¦–é¡µ12345678910111213141516171819202122232425//ç»§æ‰¿WebMvcConfigurerAdapterç±»å¯ä»¥æ¥æ‰©å±•SpringMVCçš„åŠŸèƒ½//@EnableWebMvc é…ç½®ä¸è¦å®Œå…¨æŽ¥ç®¡SpringMVC@Configurationpublic class MyMvcConfig extends WebMvcConfigurerAdapter &#123; @Override public void addViewControllers(ViewControllerRegistry registry) &#123; // super.addViewControllers(registry); //æµè§ˆå™¨å‘é€ /atguigu è¯·æ±‚æ¥åˆ° success registry.addViewController("/atguigu").setViewName("success"); &#125; //æ‰€æœ‰çš„WebMvcConfigurerAdapterç»„ä»¶éƒ½ä¼šä¸€èµ·èµ·ä½œç”¨ @Bean //å°†ç»„ä»¶æ³¨å†Œåœ¨å®¹å™¨ public WebMvcConfigurerAdapter webMvcConfigurerAdapter()&#123; WebMvcConfigurerAdapter adapter = new WebMvcConfigurerAdapter() &#123; @Override public void addViewControllers(ViewControllerRegistry registry) &#123; registry.addViewController("/").setViewName("login"); registry.addViewController("/index.html").setViewName("login"); &#125; &#125;; return adapter; &#125;&#125;Â¶äº”ã€æŒä¹…å±‚å¼€å‘Â¶1. å¸¸ç”¨æ•°æ®æºé…ç½®Â¶1.1 é»˜è®¤æ•°æ®æºspringboot jdbcspringbooté»˜è®¤æ˜¯ä½¿ç”¨org.apache.tomcat.jdbc.pool.DataSourceä½œä¸ºè¿žæŽ¥æ± ï¼ˆæ•°æ®æºï¼‰ã€‚SpringBooté»˜è®¤å¯ä»¥æ”¯æŒçš„è¿žæŽ¥æ± åŒ…æ‹¬org.apache.tomcat.jdbc.pool.DataSourceã€HikariDataSourceã€BasicDataSourceã€‚ä¸‹é¢å°†ä»‹ç»ä½¿ç”¨é»˜è®¤æä¾›çš„org.apache.tomcat.jdbc.pool.DataSourceä½œä¸ºè¿žæŽ¥æ± ï¼ˆæ•°æ®æºï¼‰æµ‹è¯•æ•°æ®åº“è®¿é—®ã€‚Â¶ï¼ˆ1ï¼‰æ•°æ®è¡¨resources/department.sql12345678910111213141516171819SET NAMES utf8mb4;SET FOREIGN_KEY_CHECKS = 0;-- ------------------------------ Table structure for department-- ----------------------------DROP TABLE IF EXISTS `department`;CREATE TABLE `department` ( `id` int(11) NOT NULL AUTO_INCREMENT, `departmentName` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL, PRIMARY KEY (`id`) USING BTREE) ENGINE = InnoDB AUTO_INCREMENT = 2 CHARACTER SET = utf8 COLLATE = utf8_general_ci ROW_FORMAT = Dynamic;-- ------------------------------ Records of department-- ----------------------------INSERT INTO `department` VALUES (1, 'ç ”å‘éƒ¨');SET FOREIGN_KEY_CHECKS = 1;Â¶ï¼ˆ2ï¼‰å¼•å…¥ä¾èµ–éœ€è¦å¼•å…¥springboot jdbcä¾èµ–å’Œæ•°æ®åº“é©±åŠ¨åŒ…123456789&lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-jdbc&lt;/artifactId&gt;&lt;/dependency&gt;&lt;dependency&gt; &lt;groupId&gt;mysql&lt;/groupId&gt; &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt; &lt;scope&gt;runtime&lt;/scope&gt;&lt;/dependency&gt;å®Œæ•´ä¾èµ–ï¼špom.xml1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"&gt; &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt; &lt;parent&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt; &lt;version&gt;1.5.10.RELEASE&lt;/version&gt; &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt; &lt;/parent&gt; &lt;groupId&gt;com.qcmoke&lt;/groupId&gt; &lt;artifactId&gt;spring_boot_04_jdbc&lt;/artifactId&gt; &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt; &lt;name&gt;spring_boot_04_jdbc&lt;/name&gt; &lt;description&gt;Demo project for Spring Boot&lt;/description&gt; &lt;properties&gt; &lt;java.version&gt;1.8&lt;/java.version&gt; &lt;/properties&gt; &lt;dependencies&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt; &lt;scope&gt;test&lt;/scope&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-jdbc&lt;/artifactId&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;mysql&lt;/groupId&gt; &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt; &lt;scope&gt;runtime&lt;/scope&gt; &lt;/dependency&gt; &lt;/dependencies&gt; &lt;build&gt; &lt;plugins&gt; &lt;plugin&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt; &lt;/plugin&gt; &lt;/plugins&gt; &lt;/build&gt;&lt;/project&gt;Â¶ï¼ˆ3ï¼‰é…ç½®æ•°æ®åº“è¿žæŽ¥ä¿¡æ¯application.yml123456spring: datasource: username: root password: 123456 url: jdbc:mysql://127.0.0.1:3306/jdbc?useUnicode=true&amp;characterEncoding=utf8&amp;useSSL=false driver-class-name: com.mysql.jdbc.DriverÂ¶ï¼ˆ4ï¼‰æµ‹è¯•æ•°æ®åº“é“¾æŽ¥ApplicationTests.java1234567891011121314151617181920212223242526272829303132package com.qcmoke;import org.junit.Test;import org.junit.runner.RunWith;import org.springframework.beans.factory.annotation.Autowired;import org.springframework.boot.test.context.SpringBootTest;import org.springframework.test.context.junit4.SpringRunner;import javax.sql.DataSource;import java.sql.Connection;import java.sql.SQLException;@RunWith(SpringRunner.class)@SpringBootTestpublic class ApplicationTests &#123; /** * é»˜è®¤æ˜¯ç”¨org.apache.tomcat.jdbc.pool.DataSourceä½œä¸ºæ•°æ®æºï¼› */ @Autowired DataSource dataSource; @Test public void contextLoads() throws SQLException &#123; Connection connection = dataSource.getConnection(); System.out.println(connection!=null?"conn success":"conn fail"); connection.close(); &#125;&#125;Â¶1.2 Druidæ•°æ®æºÂ¶ï¼ˆ1ï¼‰æ•°æ®è¡¨resources/department.sql12345678910111213141516171819SET NAMES utf8mb4;SET FOREIGN_KEY_CHECKS = 0;-- ------------------------------ Table structure for department-- ----------------------------DROP TABLE IF EXISTS `department`;CREATE TABLE `department` ( `id` int(11) NOT NULL AUTO_INCREMENT, `departmentName` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL, PRIMARY KEY (`id`) USING BTREE) ENGINE = InnoDB AUTO_INCREMENT = 2 CHARACTER SET = utf8 COLLATE = utf8_general_ci ROW_FORMAT = Dynamic;-- ------------------------------ Records of department-- ----------------------------INSERT INTO `department` VALUES (1, 'ç ”å‘éƒ¨');SET FOREIGN_KEY_CHECKS = 1;å¦‚æžœä¸é…ç½®ï¼Œé‚£ä¹ˆé»˜è®¤è¿žæŽ¥æ± ä¸ºtomcat.jdbc.pool.DataSourceã€‚Â¶ï¼ˆ2ï¼‰å¼•å…¥ä¾èµ–12345678910111213141516171819&lt;!--springboot jdbc--&gt;&lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-jdbc&lt;/artifactId&gt;&lt;/dependency&gt;&lt;!--å¼•å…¥druidæ•°æ®æº--&gt;&lt;!-- https://mvnrepository.com/artifact/com.alibaba/druid --&gt;&lt;dependency&gt; &lt;groupId&gt;com.alibaba&lt;/groupId&gt; &lt;artifactId&gt;druid&lt;/artifactId&gt; &lt;version&gt;1.1.8&lt;/version&gt;&lt;/dependency&gt;&lt;!--mysql é©±åŠ¨åŒ…--&gt;&lt;dependency&gt; &lt;groupId&gt;mysql&lt;/groupId&gt; &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt; &lt;!-- &lt;version&gt;8.0.11&lt;/version&gt;--&gt;&lt;!--mysql8.0éœ€è¦æŒ‡å®šé«˜ç‰ˆæœ¬çš„é©±åŠ¨åŒ…--&gt; &lt;scope&gt;runtime&lt;/scope&gt;&lt;/dependency&gt;å®Œæ•´ä¾èµ–ï¼špom.xml1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"&gt; &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt; &lt;groupId&gt;com.qcmoke&lt;/groupId&gt; &lt;artifactId&gt;spring_boot_04_druid&lt;/artifactId&gt; &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt; &lt;name&gt;spring_boot_04_jdbc&lt;/name&gt; &lt;description&gt;Demo project for Spring Boot&lt;/description&gt; &lt;parent&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt; &lt;version&gt;1.5.10.RELEASE&lt;/version&gt; &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt; &lt;/parent&gt; &lt;properties&gt; &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt; &lt;project.reporting.outputEncoding&gt;UTF-8&lt;/project.reporting.outputEncoding&gt; &lt;java.version&gt;1.8&lt;/java.version&gt; &lt;/properties&gt; &lt;dependencies&gt; &lt;!--springboot web--&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt; &lt;/dependency&gt; &lt;!--springboot test--&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt; &lt;scope&gt;test&lt;/scope&gt; &lt;/dependency&gt; &lt;!--springboot jdbc--&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-jdbc&lt;/artifactId&gt; &lt;/dependency&gt; &lt;!--å¼•å…¥druidæ•°æ®æº--&gt; &lt;!-- https://mvnrepository.com/artifact/com.alibaba/druid --&gt; &lt;dependency&gt; &lt;groupId&gt;com.alibaba&lt;/groupId&gt; &lt;artifactId&gt;druid&lt;/artifactId&gt; &lt;version&gt;1.1.8&lt;/version&gt; &lt;/dependency&gt; &lt;!--mysql é©±åŠ¨åŒ…--&gt; &lt;dependency&gt; &lt;groupId&gt;mysql&lt;/groupId&gt; &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt; &lt;!-- &lt;version&gt;8.0.11&lt;/version&gt;--&gt;&lt;!--mysql8.0éœ€è¦æŒ‡å®šé«˜ç‰ˆæœ¬çš„é©±åŠ¨åŒ…--&gt; &lt;scope&gt;runtime&lt;/scope&gt; &lt;/dependency&gt; &lt;/dependencies&gt; &lt;build&gt; &lt;plugins&gt; &lt;plugin&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt; &lt;configuration&gt; &lt;fork&gt;true&lt;/fork&gt; &lt;/configuration&gt; &lt;/plugin&gt; &lt;/plugins&gt; &lt;/build&gt;&lt;/project&gt;Â¶ï¼ˆ3ï¼‰é…ç½®æ•°æ®åº“è¿žæŽ¥ä¿¡æ¯12345678910111213141516171819202122232425spring: datasource: username: root password: 123456 url: jdbc:mysql://47.101.174.33:3306/jdbc?useUnicode=true&amp;characterEncoding=utf8&amp;useSSL=false driver-class-name: com.mysql.jdbc.Driver schema: #è¿è¡Œsqlè„šæœ¬æ–‡ä»¶ï¼Œå¦‚æžœä¸å­˜åœ¨åˆ™åˆ›å»ºï¼Œå¦‚æžœå­˜åœ¨ä¸è¿›è¡Œæ“ä½œï¼ˆå¯é€‰ï¼‰ - classpath:department.sql type: com.alibaba.druid.pool.DruidDataSource #æŒ‡å®šæ•°æ®æºç±»åž‹ï¼Œé»˜è®¤æ˜¯ä½¿ç”¨org.apache.tomcat.jdbc.pool.DataSourceä½œä¸ºè¿žæŽ¥æ± ï¼ˆæ•°æ®æºï¼‰ #druidå¯é€‰çš„å±žæ€§é…ç½®ï¼Œé»˜è®¤æ¯”ä¸èµ·ä½œç”¨ï¼Œå¦‚æžœéœ€è¦è¿™äº›å¯é€‰é…ç½®éœ€è¦new DruidDataSource()åˆ°springå®¹å™¨ä¸­è¦†ç›–æŽ‰åŽŸæ¥é»˜è®¤çš„æ•°æ®æºã€‚å¹¶é€šè¿‡@ConfigurationProperties(prefix = "spring.datasource")çš„æ–¹å¼å°†datasourceçš„å±žæ€§åŒ…æ‹¬å¯é€‰æ³¨å…¥åˆ°è¿™ä¸ªæ–°å»ºçš„å®žä¾‹å¯¹è±¡ä¸­ initialSize: 5 minIdle: 5 maxActive: 20 maxWait: 60000 timeBetweenEvictionRunsMillis: 60000 minEvictableIdleTimeMillis: 300000 validationQuery: SELECT 1 FROM DUAL testWhileIdle: true testOnBorrow: false testOnReturn: false poolPreparedStatements: true filters: stat,wall,log4j # é…ç½®ç›‘æŽ§ç»Ÿè®¡æ‹¦æˆªçš„filtersï¼ŒåŽ»æŽ‰åŽç›‘æŽ§ç•Œé¢sqlæ— æ³•ç»Ÿè®¡ï¼Œ'wall'ç”¨äºŽé˜²ç«å¢™ maxPoolPreparedStatementPerConnectionSize: 20 useGlobalDataSourceStat: true connectionProperties: druid.stat.mergeSql=true;druid.stat.slowSqlMillis=500druidå¯é€‰çš„å±žæ€§é…ç½®ï¼ˆå¦‚initialSizeã€minIdleç­‰ï¼‰ï¼Œé»˜è®¤æ¯”ä¸èµ·ä½œç”¨(ä½†ä¸ä¼šæŠ¥é”™)ï¼Œå¦‚æžœéœ€è¦è¿™äº›å¯é€‰é…ç½®éœ€è¦new DruidDataSource()åˆ°springå®¹å™¨ä¸­è¦†ç›–æŽ‰åŽŸæ¥é»˜è®¤çš„æ•°æ®æºã€‚å¹¶é€šè¿‡@ConfigurationProperties(prefix = &quot;spring.datasource&quot;)çš„æ–¹å¼å°†datasourceçš„å±žæ€§åŒ…æ‹¬å¯é€‰æ³¨å…¥åˆ°è¿™ä¸ªæ–°å»ºçš„å®žä¾‹å¯¹è±¡ä¸­ã€‚src/main/java/com/qcmoke/config/DruidConfig.java123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566package com.qcmoke.config;import com.alibaba.druid.pool.DruidDataSource;import com.alibaba.druid.support.http.StatViewServlet;import com.alibaba.druid.support.http.WebStatFilter;import org.springframework.boot.context.properties.ConfigurationProperties;import org.springframework.boot.web.servlet.FilterRegistrationBean;import org.springframework.boot.web.servlet.ServletRegistrationBean;import org.springframework.context.annotation.Bean;import org.springframework.context.annotation.Configuration;import javax.sql.DataSource;import java.util.Arrays;import java.util.HashMap;import java.util.Map;@Configurationpublic class DruidConfig &#123; /** * åˆ›å»ºæ•°æ®æº */ @ConfigurationProperties(prefix = "spring.datasource") @Bean public DataSource druid()&#123; return new DruidDataSource(); &#125; /** * é…ç½®Druidçš„ç›‘æŽ§webé¡µé¢ * druidç›‘æŽ§åœ°å€http://localhost:8080/druid/login.html * @return */ //1ã€é…ç½®ä¸€ä¸ªç®¡ç†åŽå°çš„Servlet @Bean public ServletRegistrationBean statViewServlet()&#123; ServletRegistrationBean bean = new ServletRegistrationBean(new StatViewServlet(), "/druid/*"); Map&lt;String,String&gt; initParams = new HashMap&lt;&gt;(); initParams.put("loginUsername","admin"); initParams.put("loginPassword","123456"); initParams.put("allow","");//é»˜è®¤å°±æ˜¯å…è®¸æ‰€æœ‰è®¿é—® initParams.put("deny","192.168.15.21"); //æ‹’ç»192.168.15.21è®¿é—® bean.setInitParameters(initParams); return bean; &#125; //2ã€é…ç½®ä¸€ä¸ªwebç›‘æŽ§çš„filter @Bean public FilterRegistrationBean webStatFilter()&#123; FilterRegistrationBean bean = new FilterRegistrationBean(); bean.setFilter(new WebStatFilter()); Map&lt;String,String&gt; initParams = new HashMap&lt;&gt;(); initParams.put("exclusions","*.js,*.css,/druid/*"); bean.setInitParameters(initParams); bean.setUrlPatterns(Arrays.asList("/*")); return bean; &#125;&#125;è¿™ä¸ªç±»é™¤äº†åˆ›å»ºæ•°æ®æºåˆ°springå®¹å™¨å¤–ï¼Œè¿˜é…ç½®äº†Druidçš„ç›‘æŽ§webé¡µé¢ï¼ˆå¯é€‰ï¼‰ã€‚Â¶ï¼ˆ4ï¼‰æµ‹è¯•æ•°æ®åº“è¿žæŽ¥ApplicationTests.java12345678910111213141516171819202122232425262728293031package com.qcmoke;import org.junit.Test;import org.junit.runner.RunWith;import org.springframework.beans.factory.annotation.Autowired;import org.springframework.boot.test.context.SpringBootTest;import org.springframework.test.context.junit4.SpringRunner;import javax.sql.DataSource;import java.sql.Connection;import java.sql.SQLException;/** * druidæ•°æ®åº“è¿žæŽ¥æ± é…ç½®ç±» * å¦‚æžœä¸é…ç½®ï¼Œé‚£ä¹ˆé»˜è®¤è¿žæŽ¥æ± ä¸ºtomcat.jdbc.pool.DataSource */@RunWith(SpringRunner.class)@SpringBootTestpublic class ApplicationTests &#123; @Autowired DataSource dataSource; @Test public void contextLoads() throws SQLException &#123; System.out.println(dataSource);//æŸ¥çœ‹æ•°æ®æºdataSource Connection connection = dataSource.getConnection(); System.out.println(connection!=null?"conn success":"conn fail"); connection.close(); &#125;&#125;Â¶2. æ•´åˆMyBatisÂ¶ï¼ˆ1ï¼‰æ•°æ®è¡¨resources/sql/mybatis.sql1234567891011121314151617181920212223242526272829303132SET NAMES utf8mb4;SET FOREIGN_KEY_CHECKS = 0;-- ------------------------------ Table structure for department-- ----------------------------DROP TABLE IF EXISTS `department`;CREATE TABLE `department` ( `id` int(11) NOT NULL AUTO_INCREMENT, `departmentName` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL, PRIMARY KEY (`id`) USING BTREE) ENGINE = InnoDB AUTO_INCREMENT = 1 CHARACTER SET = utf8 COLLATE = utf8_general_ci ROW_FORMAT = Dynamic;-- ------------------------------ Table structure for employee-- ----------------------------DROP TABLE IF EXISTS `employee`;CREATE TABLE `employee` ( `id` int(11) NOT NULL AUTO_INCREMENT, `lastName` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL, `email` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL, `gender` int(2) NULL DEFAULT NULL, `d_id` int(11) NULL DEFAULT NULL, PRIMARY KEY (`id`) USING BTREE) ENGINE = InnoDB AUTO_INCREMENT = 2 CHARACTER SET = utf8 COLLATE = utf8_general_ci ROW_FORMAT = Dynamic;-- ------------------------------ Records of employee-- ----------------------------INSERT INTO `employee` VALUES (1, 'wen', '166@qq.com', 1, 1);SET FOREIGN_KEY_CHECKS = 1;Â¶ï¼ˆ2ï¼‰pojoEmployee.java12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061package com.qcmoke.bean;public class Employee &#123; private Integer id; private String lastName; private Integer gender; private String email; private Integer dId; public void setId(Integer id) &#123; this.id = id; &#125; public void setLastName(String lastName) &#123; this.lastName = lastName; &#125; public void setGender(Integer gender) &#123; this.gender = gender; &#125; public void setEmail(String email) &#123; this.email = email; &#125; public void setdId(Integer dId) &#123; this.dId = dId; &#125; public Integer getId() &#123; return id; &#125; public String getLastName() &#123; return lastName; &#125; public Integer getGender() &#123; return gender; &#125; public String getEmail() &#123; return email; &#125; public Integer getdId() &#123; return dId; &#125; @Override public String toString() &#123; return "Employee&#123;" + "id=" + id + ", lastName='" + lastName + '\'' + ", gender=" + gender + ", email='" + email + '\'' + ", dId=" + dId + '&#125;'; &#125;&#125;Department.java1234567891011121314151617181920212223package com.qcmoke.bean;public class Department &#123; private Integer id; private String departmentName; public void setId(Integer id) &#123; this.id = id; &#125; public void setDepartmentName(String departmentName) &#123; this.departmentName = departmentName; &#125; public Integer getId() &#123; return id; &#125; public String getDepartmentName() &#123; return departmentName; &#125;&#125;Â¶ï¼ˆ3ï¼‰å¼•å…¥ä¾èµ–123456789101112131415161718192021222324&lt;!--mybatis--&gt; &lt;dependency&gt; &lt;groupId&gt;org.mybatis.spring.boot&lt;/groupId&gt; &lt;artifactId&gt;mybatis-spring-boot-starter&lt;/artifactId&gt; &lt;version&gt;1.3.1&lt;/version&gt; &lt;/dependency&gt; &lt;!--springboot jdbc--&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-jdbc&lt;/artifactId&gt; &lt;/dependency&gt; &lt;!--å¼•å…¥druid--&gt; &lt;!-- https://mvnrepository.com/artifact/com.alibaba/druid --&gt; &lt;dependency&gt; &lt;groupId&gt;com.alibaba&lt;/groupId&gt; &lt;artifactId&gt;druid&lt;/artifactId&gt; &lt;version&gt;1.1.8&lt;/version&gt; &lt;/dependency&gt; &lt;!--mysql--&gt; &lt;dependency&gt; &lt;groupId&gt;mysql&lt;/groupId&gt; &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt; &lt;scope&gt;runtime&lt;/scope&gt; &lt;/dependency&gt;å®Œæ•´ä¾èµ–pom.xml1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980818283&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"&gt; &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt; &lt;groupId&gt;com.qcmoke&lt;/groupId&gt; &lt;artifactId&gt;spring_boot_04_mybatis&lt;/artifactId&gt; &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt; &lt;name&gt;spring_boot_04_mybatis&lt;/name&gt; &lt;description&gt;Demo project for Spring Boot&lt;/description&gt; &lt;parent&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt; &lt;version&gt;1.5.10.RELEASE&lt;/version&gt; &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt; &lt;/parent&gt; &lt;properties&gt; &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt; &lt;project.reporting.outputEncoding&gt;UTF-8&lt;/project.reporting.outputEncoding&gt; &lt;java.version&gt;1.8&lt;/java.version&gt; &lt;/properties&gt; &lt;dependencies&gt; &lt;!--springboot web--&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt; &lt;/dependency&gt; &lt;!--springboot test--&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt; &lt;scope&gt;test&lt;/scope&gt; &lt;/dependency&gt; &lt;!--mybatis--&gt; &lt;dependency&gt; &lt;groupId&gt;org.mybatis.spring.boot&lt;/groupId&gt; &lt;artifactId&gt;mybatis-spring-boot-starter&lt;/artifactId&gt; &lt;version&gt;1.3.1&lt;/version&gt; &lt;/dependency&gt; &lt;!--springboot jdbc--&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-jdbc&lt;/artifactId&gt; &lt;/dependency&gt; &lt;!--å¼•å…¥druid--&gt; &lt;!-- https://mvnrepository.com/artifact/com.alibaba/druid --&gt; &lt;dependency&gt; &lt;groupId&gt;com.alibaba&lt;/groupId&gt; &lt;artifactId&gt;druid&lt;/artifactId&gt; &lt;version&gt;1.1.8&lt;/version&gt; &lt;/dependency&gt; &lt;!--mysql--&gt; &lt;dependency&gt; &lt;groupId&gt;mysql&lt;/groupId&gt; &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt; &lt;scope&gt;runtime&lt;/scope&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;net.minidev&lt;/groupId&gt; &lt;artifactId&gt;json-smart&lt;/artifactId&gt; &lt;version&gt;2.2.1&lt;/version&gt; &lt;/dependency&gt; &lt;/dependencies&gt; &lt;build&gt; &lt;plugins&gt; &lt;plugin&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt; &lt;/plugin&gt; &lt;/plugins&gt; &lt;/build&gt;&lt;/project&gt;Â¶ï¼ˆ4ï¼‰é…ç½®mybatisæ–¹å¼ä¸€ï¼šé…ç½®æ–‡ä»¶æ–¹å¼é…ç½®MyBatisresources/mybatis/mybatis-config.xml123456789&lt;?xml version="1.0" encoding="UTF-8" ?&gt;&lt;!DOCTYPE configuration PUBLIC "-//mybatis.org//DTD Config 3.0//EN" "http://mybatis.org/dtd/mybatis-3-config.dtd"&gt;&lt;configuration&gt; &lt;settings&gt; &lt;setting name="mapUnderscoreToCamelCase" value="true"/&gt; &lt;!--å¼€å¯é©¼å³°å¼å‘½åè§„åˆ™æ”¯æŒ--&gt; &lt;/settings&gt;&lt;/configuration&gt;æ–¹å¼äºŒï¼šé…ç½®ç±»æ–¹å¼é…ç½®MyBatis123456789101112131415161718192021222324252627package com.qcmoke.config;import org.mybatis.spring.annotation.MapperScan;import org.mybatis.spring.boot.autoconfigure.ConfigurationCustomizer;import org.springframework.context.annotation.Bean;import org.springframework.context.annotation.Configuration;/** * é…ç½®ç±»æ–¹å¼é…ç½®MyBatis */@MapperScan(value = "com.qcmoke.mapper") //æ‰¹é‡æ‰«æï¼Œåœ¨é…ç½®ç±»ä¸­ä½¿ç”¨@MapperScanå°†æŸä¸ªåŒ…ä¸‹çš„æ‰€æœ‰æŽ¥å£æ‰«æè£…é…åˆ°å®¹å™¨ä¸­,å¦‚æžœä¸æ‰«æå¯ä»¥åœ¨mapperæŽ¥å£ä¸Šä½¿ç”¨@Mapper æ³¨è§£æ‰«æè£…é…åˆ°å®¹å™¨ä¸­@Configurationpublic class MyBatisConfig &#123; @Bean public ConfigurationCustomizer configurationCustomizer()&#123; return new ConfigurationCustomizer()&#123; /** * å¼€å¯é©¼å³°å¼å‘½åè§„åˆ™æ”¯æŒ * @param configuration */ @Override public void customize(org.apache.ibatis.session.Configuration configuration) &#123; configuration.setMapUnderscoreToCamelCase(true); &#125; &#125;; &#125;&#125;Â¶ï¼ˆ5ï¼‰é…ç½®springbootå’Œæ•°æ®æº1234567891011121314151617181920212223242526272829303132333435spring:##é…ç½®druidè¿žæŽ¥æ± (æ•°æ®æº) datasource:# æ•°æ®æºåŸºæœ¬é…ç½® username: root password: 123456 driver-class-name: com.mysql.jdbc.Driver url: jdbc:mysql://127.0.0.1:3306/mybatis type: com.alibaba.druid.pool.DruidDataSource# æ•°æ®æºå…¶ä»–é…ç½® initialSize: 5 minIdle: 5 maxActive: 20 maxWait: 60000 timeBetweenEvictionRunsMillis: 60000 minEvictableIdleTimeMillis: 300000 validationQuery: SELECT 1 FROM DUAL testWhileIdle: true testOnBorrow: false testOnReturn: false poolPreparedStatements: true# é…ç½®ç›‘æŽ§ç»Ÿè®¡æ‹¦æˆªçš„filtersï¼ŒåŽ»æŽ‰åŽç›‘æŽ§ç•Œé¢sqlæ— æ³•ç»Ÿè®¡ï¼Œ'wall'ç”¨äºŽé˜²ç«å¢™ filters: stat,wall,log4j maxPoolPreparedStatementPerConnectionSize: 20 useGlobalDataSourceStat: true connectionProperties: druid.stat.mergeSql=true;druid.stat.slowSqlMillis=500##é…ç½®mybatismybatis: config-location: classpath:mybatis/mybatis-config.xml # æŒ‡å®šå…¨å±€é…ç½®æ–‡ä»¶ä½ç½® mapper-locations: classpath:mybatis/mapper/*.xml # æŒ‡å®šsqlæ˜ å°„æ–‡ä»¶ä½ç½®# schema:# - classpath:sql/department.sql# - classpath:sql/employee.sqldruidå¯é€‰çš„å±žæ€§é…ç½®ï¼ˆå¦‚initialSizeã€minIdleç­‰ï¼‰ï¼Œé»˜è®¤æ¯”ä¸èµ·ä½œç”¨(ä½†ä¸ä¼šæŠ¥é”™)ï¼Œå¦‚æžœéœ€è¦è¿™äº›å¯é€‰é…ç½®éœ€è¦new DruidDataSource()åˆ°springå®¹å™¨ä¸­è¦†ç›–æŽ‰åŽŸæ¥é»˜è®¤çš„æ•°æ®æºã€‚å¹¶é€šè¿‡@ConfigurationProperties(prefix = &quot;spring.datasource&quot;)çš„æ–¹å¼å°†datasourceçš„å±žæ€§åŒ…æ‹¬å¯é€‰æ³¨å…¥åˆ°è¿™ä¸ªæ–°å»ºçš„å®žä¾‹å¯¹è±¡ä¸­ã€‚src/main/java/com/qcmoke/config/DruidConfig.java123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566package com.qcmoke.config;import com.alibaba.druid.pool.DruidDataSource;import com.alibaba.druid.support.http.StatViewServlet;import com.alibaba.druid.support.http.WebStatFilter;import org.springframework.boot.context.properties.ConfigurationProperties;import org.springframework.boot.web.servlet.FilterRegistrationBean;import org.springframework.boot.web.servlet.ServletRegistrationBean;import org.springframework.context.annotation.Bean;import org.springframework.context.annotation.Configuration;import javax.sql.DataSource;import java.util.Arrays;import java.util.HashMap;import java.util.Map;@Configurationpublic class DruidConfig &#123; /** * åˆ›å»ºæ•°æ®æº */ @ConfigurationProperties(prefix = "spring.datasource") @Bean public DataSource druid()&#123; return new DruidDataSource(); &#125; /** * é…ç½®Druidçš„ç›‘æŽ§webé¡µé¢ * druidç›‘æŽ§åœ°å€http://localhost:8080/druid/login.html * @return */ //1ã€é…ç½®ä¸€ä¸ªç®¡ç†åŽå°çš„Servlet @Bean public ServletRegistrationBean statViewServlet()&#123; ServletRegistrationBean bean = new ServletRegistrationBean(new StatViewServlet(), "/druid/*"); Map&lt;String,String&gt; initParams = new HashMap&lt;&gt;(); initParams.put("loginUsername","admin"); initParams.put("loginPassword","123456"); initParams.put("allow","");//é»˜è®¤å°±æ˜¯å…è®¸æ‰€æœ‰è®¿é—® initParams.put("deny","192.168.15.21"); //æ‹’ç»192.168.15.21è®¿é—® bean.setInitParameters(initParams); return bean; &#125; //2ã€é…ç½®ä¸€ä¸ªwebç›‘æŽ§çš„filter @Bean public FilterRegistrationBean webStatFilter()&#123; FilterRegistrationBean bean = new FilterRegistrationBean(); bean.setFilter(new WebStatFilter()); Map&lt;String,String&gt; initParams = new HashMap&lt;&gt;(); initParams.put("exclusions","*.js,*.css,/druid/*"); bean.setInitParameters(initParams); bean.setUrlPatterns(Arrays.asList("/*")); return bean; &#125;&#125;è¿™ä¸ªç±»é™¤äº†åˆ›å»ºæ•°æ®æºåˆ°springå®¹å™¨å¤–ï¼Œè¿˜é…ç½®äº†Druidçš„ç›‘æŽ§webé¡µé¢ï¼ˆå¯é€‰ï¼‰ã€‚Â¶ï¼ˆ6ï¼‰mappercom.qcmoke.mapper.EmployeeMapper12345678910111213package com.qcmoke.mapper;import com.qcmoke.bean.Employee;import org.apache.ibatis.annotations.Mapper;//@Mapper //ä½¿ç”¨@Mapperæ³¨è§£æŒ‡å®šæ“ä½œæ•°æ®åº“çš„mapperæŽ¥å£ã€‚å¦‚æžœä¸å†™è¿™ä¸ª@Mapperæ³¨è§£ï¼Œå¯ä»¥åœ¨é…ç½®ç±»ä¸­ä½¿ç”¨@MapperScanå°†æŸä¸ªåŒ…ä¸‹çš„æ‰€æœ‰æŽ¥å£æ‰«æè£…é…åˆ°å®¹å™¨ä¸­public interface EmployeeMapper &#123; public Employee getEmpById(Integer id); public void insertEmp(Employee employee);&#125;é…ç½®mapperï¼ˆé…ç½®æ–‡ä»¶ç‰ˆï¼‰resources/mybatis/mapper/EmployeeMapper.xml12345678910111213141516&lt;?xml version="1.0" encoding="UTF-8" ?&gt;&lt;!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd"&gt;&lt;mapper namespace="com.qcmoke.mapper.EmployeeMapper"&gt; &lt;!-- public Employee getEmpById(Integer id); public void insertEmp(Employee employee);--&gt; &lt;select id="getEmpById" resultType="com.qcmoke.bean.Employee"&gt; SELECT * FROM employee WHERE id=#&#123;id&#125; &lt;/select&gt; &lt;insert id="insertEmp"&gt; INSERT INTO employee(lastName,email,gender,d_id) VALUES (#&#123;lastName&#125;,#&#123;email&#125;,#&#123;gender&#125;,#&#123;dId&#125;) &lt;/insert&gt;&lt;/mapper&gt;é…ç½®mapperï¼ˆæ³¨è§£ç‰ˆï¼‰com.qcmoke.mapper.DepartmentMapper1234567891011121314151617181920212223package com.qcmoke.mapper;import com.qcmoke.bean.Department;import org.apache.ibatis.annotations.*;import org.mybatis.spring.annotation.MapperScan;@Mapper //ä½¿ç”¨@Mapperæ³¨è§£æŒ‡å®šæ“ä½œæ•°æ®åº“çš„mapperæŽ¥å£ã€‚å¦‚æžœä¸å†™è¿™ä¸ª@Mapperæ³¨è§£ï¼Œå¯ä»¥åœ¨é…ç½®ç±»ä¸­ä½¿ç”¨@MapperScanå°†æŸä¸ªåŒ…ä¸‹çš„æ‰€æœ‰æŽ¥å£æ‰«æè£…é…åˆ°å®¹å™¨ä¸­public interface DepartmentMapper &#123; @Select("select * from department where id=#&#123;id&#125;") public Department getDeptById(Integer id); @Delete("delete from department where id=#&#123;id&#125;") public int deleteDeptById(Integer id); @Options(useGeneratedKeys = true,keyProperty = "id") //è®¾ç½®idè‡ªåŠ¨å¢žé•¿ @Insert("insert into department(department_name) values(#&#123;departmentName&#125;)") public int insertDept(Department department); @Update("update department set department_name=#&#123;departmentName&#125; where id=#&#123;id&#125;") public int updateDept(Department department);&#125;Â¶ï¼ˆ7ï¼‰controllercom.qcmoke.controller.EmpController123456789101112131415161718192021package com.qcmoke.controller;import com.qcmoke.bean.Employee;import com.qcmoke.mapper.EmployeeMapper;import org.springframework.beans.factory.annotation.Autowired;import org.springframework.web.bind.annotation.GetMapping;import org.springframework.web.bind.annotation.PathVariable;import org.springframework.web.bind.annotation.RestController;@RestControllerpublic class EmpController &#123; @Autowired EmployeeMapper employeeMapper; @GetMapping("/emp/&#123;id&#125;") public Employee getEmp(@PathVariable("id") Integer id)&#123; return employeeMapper.getEmpById(id); &#125;&#125;com.qcmoke.controller.DeptController123456789101112131415161718192021222324252627282930313233343536package com.qcmoke.controller;import com.qcmoke.bean.Department;import com.qcmoke.mapper.DepartmentMapper;import org.springframework.beans.factory.annotation.Autowired;import org.springframework.web.bind.annotation.GetMapping;import org.springframework.web.bind.annotation.PathVariable;import org.springframework.web.bind.annotation.RestController;@RestControllerpublic class DeptController &#123; @Autowired DepartmentMapper departmentMapper; /** * æ ¹æ®idèŽ·å–éƒ¨é—¨æ•°æ® * @param id * @return */ @GetMapping("/dept/&#123;id&#125;") public Department getDepartment(@PathVariable("id") Integer id)&#123; return departmentMapper.getDeptById(id); &#125; /** * æ–°å¢žéƒ¨é—¨ * @param department * @return */ @GetMapping("/dept") public Department insertDept(Department department)&#123; departmentMapper.insertDept(department); return department; &#125;&#125;Â¶ï¼ˆ8ï¼‰æµ‹è¯•ApplicationTests12345678910111213141516171819202122232425262728293031323334353637383940414243444546package com.qcmoke;import com.qcmoke.mapper.DepartmentMapper;import com.qcmoke.mapper.EmployeeMapper;import org.junit.Test;import org.junit.runner.RunWith;import org.springframework.beans.factory.annotation.Autowired;import org.springframework.boot.test.context.SpringBootTest;import org.springframework.context.ApplicationContext;import org.springframework.test.context.junit4.SpringRunner;@RunWith(SpringRunner.class)@SpringBootTestpublic class ApplicationTests &#123; @Autowired ApplicationContext ac; @Autowired DepartmentMapper departmentMapper; @Autowired EmployeeMapper employeeMapper; @Test public void contextLoads() &#123; String[] names = ac.getBeanDefinitionNames(); for (String name : names) &#123; System.out.println(name); &#125; &#125; @Test public void getemp()&#123; System.out.println(employeeMapper.getEmpById(1));; &#125; @Test public void getdepts()&#123; System.out.println(departmentMapper.getDeptById(1)); &#125;&#125;securityä¾èµ–åŒ…åªè¦å¼•å…¥äº†ï¼Œå®ƒä¼šé»˜è®¤ç»™é¡¹ç›®åŠ å…¥å¯†ç ã€‚ç”¨æˆ·åæ˜¯user é»˜è®¤å¯†ç åœ¨æŽ§åˆ¶å°æ‰¾ä¸‹ã€‚Â¶å…­ã€æ•´åˆRedisÂ¶1. å¼•å…¥Redisä¾èµ–12345&lt;!-- redis--&gt;&lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-data-redis&lt;/artifactId&gt;&lt;/dependency&gt;Â¶2. é…ç½®æ–‡ä»¶Â¶3. æ·»åŠ Redisé…ç½®ç±»ä¸æ·»åŠ è¿™ä¸ªé…ç½®ç±»çš„è¯ï¼Œé»˜è®¤Redisæ˜¯ä»¥jdké»˜è®¤åºåˆ—åŒ–çš„äºŒè¿›åˆ¶æ–¹å¼è¿›è¡Œå­˜å–çš„ï¼Œè¿™å¯èƒ½ä¸å¤ªå‹å¥½ï¼Œæ‰€ä»¥è¿™é‡Œæœ‰å¿…è¦å†™ä¸€ä¸ªé…ç½®ç±»æ¥å®žçŽ°Redisä»¥jsonæ ¼å¼å­—ç¬¦ä¸²è¿›è¡Œè‡ªåŠ¨å­˜å–ã€‚123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105package com.qcmoke.configuration;import com.fasterxml.jackson.annotation.JsonAutoDetect;import com.fasterxml.jackson.annotation.PropertyAccessor;import com.fasterxml.jackson.databind.ObjectMapper;import org.springframework.cache.CacheManager;import org.springframework.cache.annotation.CachingConfigurerSupport;import org.springframework.cache.annotation.EnableCaching;import org.springframework.cache.interceptor.KeyGenerator;import org.springframework.context.annotation.Bean;import org.springframework.context.annotation.Configuration;import org.springframework.data.redis.cache.RedisCacheConfiguration;import org.springframework.data.redis.cache.RedisCacheManager;import org.springframework.data.redis.connection.RedisConnectionFactory;import org.springframework.data.redis.core.RedisTemplate;import org.springframework.data.redis.serializer.Jackson2JsonRedisSerializer;import org.springframework.data.redis.serializer.RedisSerializationContext;import org.springframework.data.redis.serializer.RedisSerializer;import org.springframework.data.redis.serializer.StringRedisSerializer;import java.time.Duration;/** * Spring Boot2.X å¯¹Redisçš„ä¸“ç”¨é…ç½®ç±» * å‚è€ƒï¼šhttps://blog.csdn.net/caojidasabi/article/details/83059642 * * @author qcmoke * @date 2019/6/16 15:34 */@Configuration@EnableCachingpublic class RedisConfig extends CachingConfigurerSupport &#123; private Duration timeToLive = Duration.ZERO; public void setTimeToLive(Duration timeToLive) &#123; this.timeToLive = timeToLive; &#125; /** * RedisTemplateé…ç½® * * @param factory RedisConnectionFactory * @return RedisTemplate&lt;String, Object&gt; */ @Bean public RedisTemplate&lt;String, Object&gt; redisTemplate(RedisConnectionFactory factory) &#123; RedisTemplate&lt;String, Object&gt; template = new RedisTemplate&lt;String, Object&gt;(); template.setConnectionFactory(factory); StringRedisSerializer stringRedisSerializer = new StringRedisSerializer(); // keyé‡‡ç”¨Stringçš„åºåˆ—åŒ–æ–¹å¼ template.setKeySerializer(stringRedisSerializer); // hashçš„keyä¹Ÿé‡‡ç”¨Stringçš„åºåˆ—åŒ–æ–¹å¼ template.setHashKeySerializer(stringRedisSerializer); // valueåºåˆ—åŒ–æ–¹å¼é‡‡ç”¨jackson template.setValueSerializer(getJackson2JsonRedisSerializer()); // hashçš„valueåºåˆ—åŒ–æ–¹å¼é‡‡ç”¨jackson template.setHashValueSerializer(getJackson2JsonRedisSerializer()); template.afterPropertiesSet(); return template; &#125; /** * èŽ·å–Jackson2JsonRedisSerializer * åºåˆ—åŒ–ç­–ç•¥ */ private Jackson2JsonRedisSerializer&lt;Object&gt; getJackson2JsonRedisSerializer() &#123; Jackson2JsonRedisSerializer&lt;Object&gt; jackson2JsonRedisSerializer = new Jackson2JsonRedisSerializer&lt;&gt;(Object.class); ObjectMapper om = new ObjectMapper(); om.setVisibility(PropertyAccessor.ALL, JsonAutoDetect.Visibility.ANY); om.enableDefaultTyping(ObjectMapper.DefaultTyping.NON_FINAL); jackson2JsonRedisSerializer.setObjectMapper(om); return jackson2JsonRedisSerializer; &#125; /***********æ³¨è§£æ—¶æ‰éœ€è¦ä»¥ä¸‹é…ç½®ï¼Œä¸ç”¨æ³¨è§£çš„è¯ä»¥ä¸Šé…ç½®å³å¯****************/ @Bean public CacheManager cacheManager(RedisConnectionFactory factory) &#123; RedisSerializer&lt;String&gt; redisSerializer = new StringRedisSerializer(); RedisCacheConfiguration config = RedisCacheConfiguration.defaultCacheConfig() //ç”Ÿæˆä¸€ä¸ªé»˜è®¤é…ç½®ï¼Œé€šè¿‡configå¯¹è±¡å³å¯å¯¹ç¼“å­˜è¿›è¡Œè‡ªå®šä¹‰é…ç½® .entryTtl(timeToLive)//è®¾ç½®ç¼“å­˜çš„é»˜è®¤è¿‡æœŸæ—¶é—´ï¼Œä¹Ÿæ˜¯ä½¿ç”¨Durationè®¾ç½® .serializeKeysWith(RedisSerializationContext.SerializationPair.fromSerializer(redisSerializer)) .serializeValuesWith(RedisSerializationContext.SerializationPair.fromSerializer(getJackson2JsonRedisSerializer())) .disableCachingNullValues();//ä¸ç¼“å­˜ç©ºå€¼ return RedisCacheManager.builder(factory) .cacheDefaults(config) .build(); &#125; @Override @Bean public KeyGenerator keyGenerator() &#123; return (target, method, params) -&gt; &#123; StringBuilder sb = new StringBuilder(); sb.append(target.getClass().getName()); sb.append(method.getName()); for (Object obj : params) &#123; sb.append(obj.toString()); &#125; return sb.toString(); &#125;; &#125;&#125;Â¶4. ä½¿ç”¨æ€è·¯ï¼šæŸ¥è¯¢çš„æ—¶å€™å…ˆæŸ¥çœ‹redisç¼“å­˜ä¸­æœ‰æ²¡æœ‰ï¼Œæœ‰çš„è¯åˆ™ç›´æŽ¥ä»Žredisä¸­èŽ·å–æ•°æ®è¿”å›žï¼Œä¸ç»è¿‡daoå±‚è®¿é—®mysqläº†ï¼Œå¦‚æžœredisä¸­æ²¡æœ‰ç›¸åº”çš„ç¼“å­˜æ‰è°ƒç”¨daoå±‚è®¿é—®mysqlã€‚è€Œè¿›è¡Œåˆ é™¤çš„æ—¶å€™è¦æŠŠredisä¸­çš„ç›¸åº”ç¼“å­˜åˆ é™¤æŽ‰ï¼Œè¿›è¡Œä¿®æ”¹æ—¶ä¹Ÿè¦ä¿®æ”¹ç›¸åº”çš„ç¼“å­˜ã€‚Â¶4.1 dao1234567891011121314151617181920package com.qcmoke.dao;import com.baomidou.mybatisplus.core.mapper.BaseMapper;import com.qcmoke.entity.Student;import org.apache.ibatis.annotations.*;import org.springframework.stereotype.Repository;import java.util.List;@Mapper@Repositorypublic interface StudentMapper extends BaseMapper&lt;Student&gt; &#123; @Delete("delete from student where sid=#&#123;0&#125;") Boolean deleteBySid(Integer sid); @Select("select * from student where sid = #&#123;0&#125;") Student selectOneBySid(Integer sid);&#125;Â¶4.2 service1234567891011121314151617package com.qcmoke.service;import com.qcmoke.entity.Student;import java.util.List;public interface IStudentService &#123; Student getOne(Integer sid); Student update(Student student); Boolean delete(Integer sid); Integer add(Student student); List&lt;Student&gt; getList();&#125;springæ³¨è§£çš„æ–¹å¼è¿›è¡Œç¼“å­˜ç®¡ç†12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758package com.qcmoke.service;import com.qcmoke.dao.StudentMapper;import com.qcmoke.entity.Student;import org.springframework.beans.factory.annotation.Autowired;import org.springframework.cache.annotation.CacheEvict;import org.springframework.cache.annotation.CachePut;import org.springframework.cache.annotation.Cacheable;import org.springframework.stereotype.Service;import org.springframework.transaction.annotation.Transactional;import java.util.List;/** * TODO * * @author qcmoke * @date 2019/6/16 2:57 */@Service("iStudentServiceImpl")public class IStudentServiceImpl implements IStudentService &#123; @Autowired StudentMapper studentMapper; @Cacheable(cacheNames = "student", key = "#sid", unless = "#result == null") @Override public Student getOne(Integer sid) &#123; return studentMapper.selectOneBySid(sid); &#125; @Transactional @CachePut(cacheNames = "student", key = "#student.sid") @Override public Student update(Student student) &#123; studentMapper.updateById(student); return student; &#125; @Transactional @CacheEvict(cacheNames = "student", key = "#sid") @Override public Boolean delete(Integer sid) &#123; return studentMapper.deleteById(sid) &gt; 0; &#125; @Transactional @Override public Integer add(Student student) &#123; return studentMapper.insert(student); &#125; @Override public List&lt;Student&gt; getList() &#123; return null; &#125;&#125;ä½¿ç”¨RedisTemplateè¿›è¡Œç¼“å­˜ç®¡ç†123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869package com.qcmoke.service;import com.qcmoke.dao.StudentMapper;import com.qcmoke.entity.Student;import org.springframework.beans.factory.annotation.Autowired;import org.springframework.data.redis.core.RedisTemplate;import org.springframework.stereotype.Service;import org.springframework.transaction.annotation.Transactional;import java.util.List;@Service(value = "iStudentServiceImpl2")public class IStudentServiceImpl2 implements IStudentService &#123; @Autowired StudentMapper studentMapper; /** * æ“ä½œå¯¹è±¡ï¼ˆkeyå’Œvalueéƒ½æ˜¯å¯¹è±¡ï¼‰ */ @Autowired RedisTemplate redisTemplate; @Override public Student getOne(Integer sid) &#123; Student student = (Student)redisTemplate.opsForValue().get("student_"+sid); if (student == null) &#123; student = studentMapper.selectOneBySid(sid); if (student!=null)&#123; redisTemplate.opsForValue().set("student_"+sid, student); &#125; &#125; return student; &#125; @Transactional @Override public Student update(Student student) &#123; int flag = studentMapper.updateById(student); if (flag&gt;0)&#123; redisTemplate.opsForValue().set("student_"+student.getSid(), student); &#125; return student; &#125; @Transactional @Override public Boolean delete(Integer sid) &#123; boolean flag1 = studentMapper.deleteById(sid) &gt; 0; Boolean flag2 = false; if (flag1)&#123; flag2= redisTemplate.delete("student_" + sid); &#125; return flag1 &amp;&amp; flag2; &#125; @Transactional @Override public Integer add(Student student) &#123; return studentMapper.insert(student); &#125; @Override public List&lt;Student&gt; getList() &#123; return null; &#125;&#125;å¤æ‚çš„ç¼“å­˜æ³¨è§£1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374package com.qcmoke.service;import com.qcmoke.dao.StudentMapper;import com.qcmoke.entity.Student;import org.springframework.beans.factory.annotation.Autowired;import org.springframework.cache.annotation.*;import org.springframework.stereotype.Service;import org.springframework.transaction.annotation.Transactional;import java.util.List;@CacheConfig(cacheNames = "student") //æŠ½å–ç¼“å­˜çš„å…¬å…±é…ç½®@Service("iStudentServiceImpl3")public class IStudentServiceImpl3 implements IStudentService &#123; @Autowired StudentMapper studentMapper; @Cacheable(key = "#sid") @Override public Student getOne(Integer sid) &#123; return studentMapper.selectOneBySid(sid); &#125; @Cacheable(key = "#root.method.name") @Override public List&lt;Student&gt; getList() &#123; return studentMapper.selectList(null); &#125; @Transactional @Caching( put = &#123; @CachePut(key = "#student.sid") &#125;, evict = &#123; @CacheEvict(key = "'getList'") &#125; ) @Override public Student update(Student student) &#123; studentMapper.updateById(student); return student; &#125; @Transactional @Caching( evict = &#123; @CacheEvict(key = "#sid"), @CacheEvict(key = "'getList'") &#125; ) @Override public Boolean delete(Integer sid) &#123; return studentMapper.deleteById(sid) &gt; 0; &#125; @Transactional @Caching( put = &#123; @CachePut(key = "#student.sid") &#125;, evict = &#123; @CacheEvict(key = "'getList'") &#125; ) @Override public Integer add(Student student) &#123; return studentMapper.insert(student); &#125;&#125;Â¶4.3 test123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139package com.qcmoke;import com.qcmoke.entity.Student;import com.qcmoke.service.IStudentService;import org.junit.Test;import org.junit.runner.RunWith;import org.springframework.boot.test.context.SpringBootTest;import org.springframework.test.context.junit4.SpringRunner;import javax.annotation.Resource;import java.util.List;/** * ä¸€ã€å¿«é€Ÿä½“éªŒç¼“å­˜ * æ­¥éª¤ï¼š * 1ã€åœ¨é…ç½®ç±»å¼€å¯åŸºäºŽæ³¨è§£çš„ç¼“å­˜ @EnableCaching * 2ã€æ ‡æ³¨ç¼“å­˜æ³¨è§£å³å¯ * 3ã€é»˜è®¤springbootè‡ªå¸¦çš„SimpleCacheConfigurationä½¿ç”¨çš„æ˜¯ConcurrentMapCacheManager==ConcurrentMapCacheï¼›å°†æ•°æ®ä¿å­˜åœ¨ConcurrentMap&lt;Object, Object&gt;ä¸­ã€‚ä½†å¼€å‘ä¸­å´å¸¸å¸¸ä½¿ç”¨çš„æ˜¯ç¼“å­˜ä¸­é—´ä»¶ï¼›redisã€memcachedã€ehcacheï¼› * * äºŒã€æ•´åˆredisä½œä¸ºç¼“å­˜ï¼Œå®ƒæ˜¯å†…å­˜ä¸­çš„æ•°æ®ç»“æž„å­˜å‚¨ç³»ç»Ÿï¼Œå®ƒå¯ä»¥ç”¨ä½œæ•°æ®åº“ã€ç¼“å­˜å’Œæ¶ˆæ¯ä¸­é—´ä»¶ã€‚ï¼‰ * 1ã€å®‰è£…redis * 2ã€å¼•å…¥redisçš„starterä¾èµ– * 3ã€é…ç½®redis * 4ã€æµ‹è¯•ç¼“å­˜ * åŽŸç†ï¼šå®¹å™¨ä¸­ä¿å­˜çš„SimpleCacheConfigurationä¼šè¢«æ›¿æ¢æˆRedisCacheConfigurationï¼›ç¼“å­˜ç®¡ç†å™¨ConcurrentMapCacheManagerä¼šè¢«æ›¿æ¢æˆRedisCacheManagerï¼› * 1ï¼‰ã€å¼•å…¥redisçš„starter * 2ï¼‰ã€RedisCacheManager å¸®æˆ‘ä»¬åˆ›å»º RedisCache æ¥ä½œä¸ºç¼“å­˜ç»„ä»¶ï¼›è€ŒRedisCacheå°±æ˜¯é€šè¿‡æ“ä½œredisæ¥ç¼“å­˜æ•°æ®çš„ * 3ï¼‰ã€é»˜è®¤ä½¿ç”¨çš„æ˜¯ RedisTemplate&lt;Object, Object&gt;ï¼Œæ‰€æœ‰å­˜æ•°æ® k-v éƒ½æ˜¯Objectï¼Œæ•…é»˜è®¤æ˜¯åˆ©ç”¨jdkçš„åºåˆ—åŒ–æœºåˆ¶æ¥ä¿å­˜æ•°æ®åˆ°Redisçš„ã€‚å¦‚æžœå¸Œæœ›ä¿å­˜ä¸ºjsonå­—ç¬¦ä¸²ï¼Œå¯ä»¥é€šè¿‡é…ç½®ç±»è¿›è¡Œé…ç½® * 4ï¼‰ã€è‡ªå®šä¹‰CacheManagerï¼› * 5ï¼‰ã€ä½¿ç”¨æ³¨è§£å®žçŽ°ç¼“å­˜ * @Cacheableï¼ˆç¼“å­˜ï¼‰ * 1ã€æ–¹æ³•è¿è¡Œä¹‹å‰ï¼Œå…ˆåŽ»æŸ¥è¯¢Cacheï¼ˆç¼“å­˜ç»„ä»¶ï¼‰ï¼ŒæŒ‰ç…§cacheNamesæŒ‡å®šçš„åå­—å’ŒkeyèŽ·å–ï¼› * 2ã€æ²¡æœ‰æŸ¥åˆ°ç¼“å­˜å°±è°ƒç”¨ç›®æ ‡æ–¹æ³•ï¼› * 3.å°†ç›®æ ‡æ–¹æ³•è¿”å›žçš„ç»“æžœï¼Œæ”¾è¿›ç¼“å­˜ä¸­ * * å‡ ä¸ªå±žæ€§ï¼š * * cacheNames/valueï¼šæŒ‡å®šç¼“å­˜ç»„ä»¶çš„åå­—;å°†æ–¹æ³•çš„è¿”å›žç»“æžœæ”¾åœ¨å“ªä¸ªç¼“å­˜ä¸­ï¼Œæ˜¯æ•°ç»„çš„æ–¹å¼ï¼Œå¯ä»¥æŒ‡å®šå¤šä¸ªç¼“å­˜ï¼› * * * * keyï¼šç¼“å­˜æ•°æ®ä½¿ç”¨çš„keyï¼›å¯ä»¥ç”¨å®ƒæ¥æŒ‡å®šã€‚é»˜è®¤æ˜¯ä½¿ç”¨æ–¹æ³•å‚æ•°çš„å€¼ 1-æ–¹æ³•çš„è¿”å›žå€¼ * * ç¼–å†™SpELï¼› #i d;å‚æ•°idçš„å€¼ #a0 #p0 #root.args[0] * * getEmp[2] * * * * keyGeneratorï¼škeyçš„ç”Ÿæˆå™¨ï¼›å¯ä»¥è‡ªå·±æŒ‡å®škeyçš„ç”Ÿæˆå™¨çš„ç»„ä»¶id * * key/keyGeneratorï¼šäºŒé€‰ä¸€ä½¿ç”¨; * * * * cacheManagerï¼šæŒ‡å®šç¼“å­˜ç®¡ç†å™¨ï¼›æˆ–è€…cacheResolveræŒ‡å®šèŽ·å–è§£æžå™¨ * * * * conditionï¼šæŒ‡å®šç¬¦åˆæ¡ä»¶çš„æƒ…å†µä¸‹æ‰ç¼“å­˜ï¼› * * ,condition = "#id&gt;0" * * condition = "#a0&gt;1"ï¼šç¬¬ä¸€ä¸ªå‚æ•°çš„å€¼ã€‹1çš„æ—¶å€™æ‰è¿›è¡Œç¼“å­˜ * * * * unless:å¦å®šç¼“å­˜ï¼›å½“unlessæŒ‡å®šçš„æ¡ä»¶ä¸ºtrueï¼Œæ–¹æ³•çš„è¿”å›žå€¼å°±ä¸ä¼šè¢«ç¼“å­˜ï¼›å¯ä»¥èŽ·å–åˆ°ç»“æžœè¿›è¡Œåˆ¤æ–­ * * unless = "#result == null" * * unless = "#a0==2":å¦‚æžœç¬¬ä¸€ä¸ªå‚æ•°çš„å€¼æ˜¯2ï¼Œç»“æžœä¸ç¼“å­˜ï¼› * * syncï¼šæ˜¯å¦ä½¿ç”¨å¼‚æ­¥æ¨¡å¼ * * @CacheEvictï¼ˆç¼“å­˜æ¸…é™¤ï¼‰ * * keyï¼šæŒ‡å®šè¦æ¸…é™¤çš„æ•°æ® * * allEntries = trueï¼šæŒ‡å®šæ¸…é™¤è¿™ä¸ªç¼“å­˜ä¸­æ‰€æœ‰çš„æ•°æ® * * beforeInvocation = falseï¼šç¼“å­˜çš„æ¸…é™¤æ˜¯å¦åœ¨æ–¹æ³•ä¹‹å‰æ‰§è¡Œ * * é»˜è®¤ä»£è¡¨ç¼“å­˜æ¸…é™¤æ“ä½œæ˜¯åœ¨æ–¹æ³•æ‰§è¡Œä¹‹åŽæ‰§è¡Œ;å¦‚æžœå‡ºçŽ°å¼‚å¸¸ç¼“å­˜å°±ä¸ä¼šæ¸…é™¤ * * beforeInvocation = trueï¼š * * ä»£è¡¨æ¸…é™¤ç¼“å­˜æ“ä½œæ˜¯åœ¨æ–¹æ³•è¿è¡Œä¹‹å‰æ‰§è¡Œï¼Œæ— è®ºæ–¹æ³•æ˜¯å¦å‡ºçŽ°å¼‚å¸¸ï¼Œç¼“å­˜éƒ½æ¸…é™¤ * * @CachePutï¼ˆæ›´æ–°ç¼“å­˜ï¼‰ * æ—¢è°ƒç”¨æ–¹æ³•ï¼Œåˆæ›´æ–°ç¼“å­˜æ•°æ®ï¼›åŒæ­¥æ›´æ–°ç¼“å­˜ * * ä¿®æ”¹äº†æ•°æ®åº“çš„æŸä¸ªæ•°æ®ï¼ŒåŒæ—¶æ›´æ–°ç¼“å­˜ï¼› * * è¿è¡Œæ—¶æœºï¼š * * 1ã€å…ˆè°ƒç”¨ç›®æ ‡æ–¹æ³• * * 2ã€å°†ç›®æ ‡æ–¹æ³•çš„ç»“æžœç¼“å­˜èµ·æ¥ * * */@RunWith(SpringRunner.class)@SpringBootTestpublic class TestRedisCache &#123; @Resource(name = "iStudentServiceImpl") private IStudentService studentService; @Test public void getOne()&#123; System.out.println(studentService.getOne(1)); &#125; @Test public void update()&#123; Student student = studentService.getOne(1); student.setSname("xiaolifeidao"); System.out.println(studentService.update(student)); &#125; @Test public void delete()&#123; System.out.println(studentService.delete(1)); &#125; @Resource(name = "iStudentServiceImpl2") private IStudentService iStudentServiceImpl2; @Test public void getOne2()&#123; System.out.println(iStudentServiceImpl2.getOne(2)); &#125; @Test public void update2()&#123; Student student = iStudentServiceImpl2.getOne(2); student.setSname("zh"); System.out.println(iStudentServiceImpl2.update(student)); &#125; @Test public void delete2()&#123; System.out.println(iStudentServiceImpl2.delete(2)); &#125; @Resource(name = "iStudentServiceImpl3") private IStudentService iStudentServiceImpl3; @Test public void getOne3()&#123; System.out.println(iStudentServiceImpl3.getOne(2)); &#125; @Test public void update3()&#123; Student student = iStudentServiceImpl3.getOne(2); student.setSname("lisi"); System.out.println(iStudentServiceImpl3.update(student)); &#125; @Test public void getList()&#123; List&lt;Student&gt; list = iStudentServiceImpl3.getList(); System.out.println(list); &#125; @Test public void delete3()&#123; System.out.println(iStudentServiceImpl3.delete(3)); &#125;&#125;Â¶ä¸ƒã€ä»»åŠ¡è°ƒåº¦Â¶1.å®šæ—¶ä»»åŠ¡å¼€å‘ä¸­ç»å¸¸éœ€è¦æ‰§è¡Œä¸€äº›å®šæ—¶ä»»åŠ¡ï¼Œæ¯”å¦‚éœ€è¦åœ¨æ¯å¤©å‡Œæ™¨æ—¶å€™ï¼Œåˆ†æžä¸€æ¬¡å‰ä¸€å¤©çš„æ—¥å¿—ä¿¡æ¯ã€‚Springä¸ºæˆ‘ä»¬æä¾›äº†å¼‚æ­¥æ‰§è¡Œä»»åŠ¡è°ƒåº¦çš„æ–¹å¼ã€‚ä¸¤ä¸ªé‡è¦çš„æ³¨è§£ï¼š@EnableSchedulingã€@Scheduled(cron = â€œcronè¡¨è¾¾å¼â€)cronè¡¨è¾¾å¼ï¼šå­—æ®µå…è®¸å€¼å…è®¸çš„ç‰¹æ®Šå­—ç¬¦ç§’0-59, - * /åˆ†0-59, - * /å°æ—¶0-23, - * /æ—¥æœŸ1-31, - * ? / L W Cæœˆä»½1-12, - * /æ˜ŸæœŸ0-7æˆ–SUN-SAT 0,7æ˜¯SUN, - * ? / L C #ç‰¹æ®Šå­—ç¬¦ä»£è¡¨å«ä¹‰,æžšä¸¾-åŒºé—´*ä»»æ„/æ­¥é•¿?æ—¥/æ˜ŸæœŸå†²çªåŒ¹é…Læœ€åŽWå·¥ä½œæ—¥Cå’Œcalendarè”ç³»åŽè®¡ç®—è¿‡çš„å€¼#æ˜ŸæœŸï¼Œ4#2ï¼Œç¬¬2ä¸ªæ˜ŸæœŸå››Â¶1.1 é…ç½®ç±»12345678910package com.qcmoke.configuration;import org.springframework.context.annotation.Configuration;import org.springframework.scheduling.annotation.EnableScheduling;@EnableScheduling //å¼€å¯åŸºäºŽæ³¨è§£çš„å®šæ—¶ä»»åŠ¡@Configurationpublic class ScheduledConfig &#123;&#125;Â¶1.2 ä½¿ç”¨1234567891011121314151617181920212223242526package com.qcmoke.service;import org.springframework.scheduling.annotation.Scheduled;import org.springframework.stereotype.Service;@Servicepublic class ScheduledService &#123; /** * second(ç§’), minuteï¼ˆåˆ†ï¼‰, hourï¼ˆæ—¶ï¼‰, day of monthï¼ˆæ—¥ï¼‰, monthï¼ˆæœˆï¼‰, day of weekï¼ˆå‘¨å‡ ï¼‰. * 0 * * * * MON-FRI * ã€0 0/5 14,18 * * ?ã€‘ æ¯å¤©14ç‚¹æ•´ï¼Œå’Œ18ç‚¹æ•´ï¼Œæ¯éš”5åˆ†é’Ÿæ‰§è¡Œä¸€æ¬¡ * ã€0 15 10 ? * 1-6ã€‘ æ¯ä¸ªæœˆçš„å‘¨ä¸€è‡³å‘¨å…­10:15åˆ†æ‰§è¡Œä¸€æ¬¡ * ã€0 0 2 ? * 6Lã€‘æ¯ä¸ªæœˆçš„æœ€åŽä¸€ä¸ªå‘¨å…­å‡Œæ™¨2ç‚¹æ‰§è¡Œä¸€æ¬¡ * ã€0 0 2 LW * ?ã€‘æ¯ä¸ªæœˆçš„æœ€åŽä¸€ä¸ªå·¥ä½œæ—¥å‡Œæ™¨2ç‚¹æ‰§è¡Œä¸€æ¬¡ * ã€0 0 2-4 ? * 1#1ã€‘æ¯ä¸ªæœˆçš„ç¬¬ä¸€ä¸ªå‘¨ä¸€å‡Œæ™¨2ç‚¹åˆ°4ç‚¹æœŸé—´ï¼Œæ¯ä¸ªæ•´ç‚¹éƒ½æ‰§è¡Œä¸€æ¬¡ï¼› */ // @Scheduled(cron = "0 * * * * MON-SAT") //@Scheduled(cron = "0,1,2,3,4 * * * * MON-SAT") // @Scheduled(cron = "0-4 * * * * MON-SAT") @Scheduled(cron = "0/4 * * * * MON-SAT") //æ¯4ç§’æ‰§è¡Œä¸€æ¬¡ public void hello()&#123; System.out.println("hello ... "); &#125;&#125;åœ¨å¯åŠ¨springbootåº”ç”¨åŽï¼Œæ¯éš”4ç§’é’Ÿå°±ä¼šæ‰“å°&quot;hello ...&quot;ã€‚Â¶2. å¼‚æ­¥ä»»åŠ¡Â¶2.1 é…ç½®ç±»123456789package com.qcmoke.configuration;import org.springframework.context.annotation.Configuration;import org.springframework.scheduling.annotation.EnableAsync;@Configuration@EnableAsync //å¼€å¯å¼‚æ­¥æ³¨è§£åŠŸèƒ½public class AsyncConfig &#123;&#125;Â¶2.2 å®šä¹‰å¼‚æ­¥æ–¹æ³•12345678910111213141516171819package com.qcmoke.service;import org.springframework.scheduling.annotation.Async;import org.springframework.stereotype.Service;@Servicepublic class AsyncService &#123; //å‘Šè¯‰Springè¿™æ˜¯ä¸€ä¸ªå¼‚æ­¥æ–¹æ³• @Async public void async()&#123; try &#123; Thread.sleep(10000); System.out.println("å¤„ç†å¼‚æ­¥æ•°æ®ä¸­..."); &#125; catch (InterruptedException e) &#123; e.printStackTrace(); &#125; &#125;&#125;Â¶2.3 ä½¿ç”¨1234567891011121314151617181920212223package com.qcmoke.controller;import com.qcmoke.service.AsyncService;import org.springframework.beans.factory.annotation.Autowired;import org.springframework.stereotype.Controller;import org.springframework.web.bind.annotation.GetMapping;import org.springframework.web.bind.annotation.ResponseBody;@Controllerpublic class AsyncController &#123; @Autowired AsyncService asyncService; @ResponseBody @GetMapping("/testAsync") public String async()&#123; /** * â‘ å’Œâ‘¡æ˜¯ä¸¤æ¡æ‰§è¡Œè¯­å¥ï¼Œç”±äºŽâ‘ æ–¹æ³•ä½¿ç”¨äº†@Asyncæ³¨è§£ï¼Œæ‰€ä»¥â‘ å’Œâ‘¡æ˜¯å¼‚æ­¥è¿›è¡Œçš„ï¼Œä¹Ÿå°±æ˜¯åœ¨è¿™ä¸ªæ–¹æ³•ä½“å†…â‘ å¼€è¾Ÿäº†ä¸€æ¡æ–°çš„çº¿ç¨‹ã€‚â‘¡ä¸éœ€è¦ç­‰å¾…â‘ åŒæ­¥æ‰§è¡Œç»“æŸæ‰æ‰§è¡Œ */ asyncService.async();//â‘  è°ƒç”¨å¼‚æ­¥æ–¹æ³•ï¼Œéœ€è¦10ç§’æ‰§è¡Œå®Œ return "æ‰§è¡Œä¸‹ä¸€æ¡è¯­å¥";//â‘¡ &#125;&#125;Â¶å…«. é‚®ä»¶å¼€å‘é‚®ä»¶ä»»åŠ¡æ˜¯å…¶å®žæ˜¯ä¸€ä¸ªå®¢æˆ·ç«¯æ”¶å‘é‚®ä»¶çš„è¿‡ç¨‹ï¼Œè¿™é‡Œä»¥QQé‚®ç®±ä¸ºä¾‹ï¼Œé¦–å…ˆéœ€è¦åœ¨é¡¹ç›®ä¸­ç™»å½•åˆ°é…ç½®å¥½çš„QQé‚®ä»¶æœåŠ¡å™¨åŽï¼Œå‘é€é‚®ä»¶ç»™QQé‚®ä»¶æœåŠ¡å™¨ï¼ŒQQé‚®æœåŠ¡å™¨åœ¨ä¸­è½¬ä½ å‘é€çš„é‚®ä»¶ç»™æŽ¥æ”¶é‚®ä»¶è´¦å·å¯¹åº”çš„é‚®ä»¶æœåŠ¡å™¨ï¼Œæœ€åŽå†é€šè¿‡è¯¥æœåŠ¡å™¨å‘é€ç»™é‚®ä»¶æŽ¥æ”¶è€…çš„è´¦å·ã€‚æ‰€ä»¥è¯´åªè¦ä½ æœ¬åœ°çš„ä¸»æœºå¯ä»¥è¿žç½‘é‚£ä¹ˆå°±å¯ä»¥å®Œæˆè¿™ä¸ªè¿‡ç¨‹ã€‚Â¶1. å¼•å…¥ä¾èµ–12345&lt;!-- springboot mail --&gt;&lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-mail&lt;/artifactId&gt;&lt;/dependency&gt;Â¶2. é…ç½®12345spring: mail: username: 1667164190@qq.com password: fi*********gih host: smtp.qq.comæ³¨æ„ï¼šè¿™é‡Œçš„passwordä¸æ˜¯é‚®ç®±ç™»å½•çš„å¯†ç ï¼Œè€Œæ˜¯é‚®ä»¶æœåŠ¡å™¨å¯¹æŒ‡å®šé‚®ä»¶è´¦å·çš„ç™»å½•æŽˆæƒç ï¼Œå¯¹äºŽQQé‚®ç®±æ¥è¯´ï¼ŒæŽˆæƒç çš„èŽ·å–å¯å‚è€ƒä¸‹å›¾ï¼šÂ¶3. æµ‹è¯•123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960package com.qcmoke;import org.junit.Test;import org.junit.runner.RunWith;import org.springframework.beans.factory.annotation.Autowired;import org.springframework.boot.test.context.SpringBootTest;import org.springframework.mail.SimpleMailMessage;import org.springframework.mail.javamail.JavaMailSenderImpl;import org.springframework.mail.javamail.MimeMessageHelper;import org.springframework.test.context.junit4.SpringRunner;import javax.mail.MessagingException;import javax.mail.internet.MimeMessage;import java.io.File;@RunWith(SpringRunner.class)@SpringBootTestpublic class TestMail &#123; @Autowired JavaMailSenderImpl mailSender; /** * å‘é€ç®€å•é‚®ä»¶ */ @Test public void sendMail()&#123; SimpleMailMessage message = new SimpleMailMessage(); message.setSubject("é€šçŸ¥-ä»Šæ™šå¼€ä¼š");//è®¾ç½®é‚®ä»¶æ ‡é¢˜ message.setText("ä»Šæ™š7:30å¼€ä¼š");//è®¾ç½®é‚®ä»¶å†…å®¹ message.setTo("qcmoke@gmail.com");//è®¾ç½®æ”¶é‚®ä»¶çš„è´¦å· message.setFrom("1667164190@qq.com");//è®¾ç½®å‘é‚®ä»¶çš„è´¦å· mailSender.send(message); &#125; /** * å‘é€å¤æ‚é‚®ä»¶ */ @Test public void sendMail2() throws MessagingException &#123; //1ã€åˆ›å»ºä¸€ä¸ªå¤æ‚çš„æ¶ˆæ¯é‚®ä»¶ MimeMessage mimeMessage = mailSender.createMimeMessage(); MimeMessageHelper helper = new MimeMessageHelper(mimeMessage, true); helper.setSubject("é€šçŸ¥-ä»Šæ™šå¼€ä¼š");//è®¾ç½®é‚®ä»¶æ ‡é¢˜ helper.setText("&lt;b style='color:red'&gt;ä»Šå¤© 7:30 å¼€ä¼š&lt;/b&gt;",true);//è®¾ç½®é‚®ä»¶å†…å®¹ helper.setTo("qcmoke@gmail.com");//è®¾ç½®æ”¶é‚®ä»¶çš„è´¦å· helper.setFrom("1667164190@qq.com");//è®¾ç½®å‘é‚®ä»¶çš„è´¦å· //æ·»åŠ é™„ä»¶æ–‡ä»¶ helper.addAttachment("1.jpg",new File("src/main/resources/static/img/1.jpg")); helper.addAttachment("2.jpg",new File("src/main/resources/static/img/2.png")); mailSender.send(mimeMessage); &#125;&#125;Â¶ä¹ã€çƒ­éƒ¨ç½²æ·»åŠ ä¾èµ–123456 &lt;!--çƒ­éƒ¨ç½²ä¾èµ–--&gt;&lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt; &lt;optional&gt;true&lt;/optional&gt;&lt;!-- optional=true,ä¾èµ–ä¸ä¼šä¼ é€’ï¼Œå³å­é¡¹ç›®å¦‚æžœä¾èµ–å½“å‰é¡¹ç›®ï¼Œä¸ä¼šèŽ·å–devtoolsï¼Œé‚£ä¹ˆéœ€è¦é‡æ–°å¼•å…¥devtools --&gt;&lt;/dependency&gt;123456789101112&lt;build&gt; &lt;plugins&gt; &lt;!-- è¿™ä¸ªæ’ä»¶ï¼Œå¯ä»¥å°†åº”ç”¨æ‰“åŒ…æˆä¸€ä¸ªå¯æ‰§è¡Œçš„jaråŒ…ï¼›--&gt; &lt;plugin&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt; &lt;configuration&gt; &lt;fork&gt;true&lt;/fork&gt; &lt;!--fork : å¦‚æžœæ²¡æœ‰è¯¥é¡¹é…ç½®ï¼Œè‚¯å®šdevtoolsä¸ä¼šèµ·ä½œç”¨ï¼Œå³åº”ç”¨ä¸ä¼šrestart --&gt; &lt;/configuration&gt; &lt;/plugin&gt; &lt;/plugins&gt;&lt;/build&gt;æ·»åŠ ä»¥ä¸Šä¾èµ–åŽï¼Œåœ¨eclipseä¸­å·²ç»å¯ä»¥å®žçŽ°çƒ­å¯åŠ¨ï¼Œä½†æ˜¯åœ¨ideaä¸­è¿˜éœ€è¦åšä¸¤å¤„è®¾ç½®ã€‚ï¼ˆ1ï¼‰setting â€“&gt; compiler ï¼Œå°† Build project automatically å‹¾é€‰ä¸Šï¼ˆ2ï¼‰å¿«æ·é”®ctrl + shift + alt + /æˆ–è€…Ctrl+ shift + aæœç´¢ registryåŽé€‰ç¬¬ä¸€ä¸ªï¼Œå¼¹å‡ºæ¡†åŽä¸‹æ‹‰æ‰¾åˆ°compiler.automake.allow.when.app.running å‹¾é€‰ä¸Šå³å¯ã€‚Â¶å æ·±å…¥åº•å±‚12345678910BeanPostProcessorhttps://www.jianshu.com/p/e6a6013ef0a0ApplicationListenerhttps://my.oschina.net/u/2931319/blog/1631740http://followtry.cn/2019-10-30/spring-custom-scanner-demo.htmlApplicationListener&lt;ContextRefreshedEvent&gt;https://www.shangmayuan.com/a/b9ea85ed208b46ac8c7c64b2.htmlå¾…ç»­â€¦]]></content>
      <categories>
        <category>javaee</category>
      </categories>
      <tags>
        <tag>Spring Boot</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ä¸€ä¸ªç®€å•çš„hello worldäº¤å‰ç¼–è¯‘å®žéªŒ]]></title>
    <url>%2Flinux%2Fcross_compilation.html</url>
    <content type="text"><![CDATA[äº¤å‰ç¼–è¯‘ï¼Œç®€å•åœ°è¯´ï¼Œå°±æ˜¯åœ¨ä¸€ä¸ªå¹³å°ä¸Šç”Ÿæˆå¦ä¸€ä¸ªå¹³å°ä¸Šçš„å¯æ‰§è¡Œä»£ç ã€‚ä¸‹é¢å°±åšä¸€ä¸ªç®€å•çš„hello worldå®žéªŒæ¥å®Œæˆè¿™ä¸€è¿‡ç¨‹ã€‚Â¶0. ç½‘ç»œçŽ¯å¢ƒæ­å»ºæœ¬å®žéªŒæ¶‰åŠä¸¤å°ä¸»æœºã€‚Aä¸»æœºï¼šå®‰è£…äº¤å‰ç¼–è¯‘çŽ¯å¢ƒï¼Œå¹¶ç”¨æ¥ç¼–è¯‘æºæ–‡ä»¶ã€‚åœ¨æœ¬æ¬¡å®žéªŒä¸­ä½¿ç”¨çš„æ˜¯è™šæ‹Ÿæœºubuntuç³»ç»ŸçŽ¯å¢ƒBä¸»æœº: armæž¶æž„å¹³å°å¼€å‘æ¿ï¼Œç”¨æ¥è¿è¡ŒAä¸»æœºç¼–è¯‘å¥½çš„å¯æ‰§è¡Œæ–‡ä»¶ï¼Œipåœ°å€å›ºå®šä¸º192.168.1.230ï¼ˆ1ï¼‰é¦–å…ˆä½¿ç”¨ç›´è¿žçº¿è¿žæŽ¥Aä¸»æœºå¯¹åº”çš„ç‰©ç†ä¸»æœºã€‚ï¼ˆ2ï¼‰ä¿®æ”¹ç‰©ç†ä¸»æœºçš„ipåœ°å€(è¦æ±‚å’ŒBä¸»æœºçš„ç½‘æ®µä¸€è‡´)ï¼Œå­ç½‘æŽ©ç ï¼Œç½‘å…³(é»˜è®¤å³å¯ï¼Œä¸è¦é…ç½®)ï¼ˆ3ï¼‰ä¿®æ”¹è™šæ‹Ÿæœºçš„ç½‘ç»œè¿žæŽ¥æ–¹å¼ä¸ºæ¡¥æŽ¥ï¼ˆ4ï¼‰ä¿®æ”¹è™šæ‹Ÿæœºçš„ipåœ°å€å’Œå­ç½‘æŽ©ç ï¼ˆ5ï¼‰é‡å¯è™šæ‹Ÿæœºï¼Œä»¥ä½¿ç½‘ç»œé…ç½®å¯ä»¥1$ rebooté‡å¯å®ŒæˆåŽæ‰§è¡Œä»¥ä¸‹å‘½ä»¤æŸ¥çœ‹æ˜¯å¦é…ç½®æˆåŠŸ1$ ifconfigé…ç½®å®ŒæˆåŽè™šæ‹Ÿæœºå’Œå¼€å‘æ¿äº’pingï¼Œéƒ½pingé€šã€‚Â¶1. æ­å»ºäº¤å‰ç¼–è¯‘çŽ¯å¢ƒè§£åŽ‹äº¤å‰ç¼–è¯‘gccå·¥å…·å¹¶æ”¾åˆ°å…±äº«ç›®å½•é‡Œä¸‹è½½arm-linux-gcc-4.5.1-v6-vfp-20120301.tgz1234#å¤åˆ¶gccåˆ°å…±äº«ç›®å½•é‡Œqcmoke@qcmoke-virtual-machine:~/nfs/Linux$ cp arm-linux-gcc-4.5.1-v6-vfp-20120301.tgz /home/qcmoke/nfs/#è§£åŽ‹qcmoke@qcmoke-virtual-machine:~/nfs$ tar zxvf arm-linux-gcc-4.5.1-v6-vfp-20120301.tgzÂ¶2. ç¼–å†™hello.cæµ‹è¯•æ–‡ä»¶1qcmoke@qcmoke-virtual-machine:~/nfs$ vim hello.c123456#include&lt;stdio.h&gt;int main()&#123; printf("Hello world!\n"); return 0;&#125;Â¶3. ç¼–è¯‘hello.c1qcmoke@qcmoke-virtual-machine:~/nfs$ ./opt/FriendlyARM/toolschain/4.5.1/bin/arm-linux-gcc hello.c -o helloÂ¶4. ç™»å½•armä¸»æœº1qcmoke@qcmoke-virtual-machine:~$ telnet 192.168.1.230Â¶5. æŒ‚è½½å…±äº«ç›®å½•éœ€è¦åœ¨Aä¸»æœºæ­å»ºnfsæœåŠ¡å™¨ï¼Œä»¥ä¾¿å¿«é€Ÿå…±äº«ç¼–è¯‘å¥½çš„å¯æ‰§è¡Œæ–‡ä»¶ã€‚å…·ä½“æ­å»ºæ•™ç¨‹è¯·å‚è€ƒubuntu 16.04 nfsæœåŠ¡çš„æ­å»ºã€‚åœ¨æœ¬æ¬¡å®žéªŒä¸­æ­å»ºçš„nfså…±äº«ç›®å½•æ˜¯Aä¸»æœºçš„/home/qcmoke/nfs/ç›®å½•ï¼Œè€ŒæŒ‚è½½ç‚¹æ˜¯Bä¸»æœºçš„/mnt/nfs/ç›®å½•ã€‚é€šè¿‡åœ¨ç¼–è¯‘çŽ¯å¢ƒçš„ä¸»æœºæ‰§è¡Œä»¥ä¸‹å‘½ä»¤æŸ¥çœ‹å…±äº«ç›®å½•åœ°å€123qcmoke@qcmoke-virtual-machine:~$ showmount -e localhostExport list for localhost:/home/qcmoke/nfs *æ ¹æ®æŸ¥è¯¢ç»“æžœæŒ‚è½½åˆ°armä¸»æœºæŸä¸ªç›®å½•,å¦‚/mnt/nfs12345#åˆ›å»ºæŒ‚è½½ç‚¹[root@FriendlyARM /]# mkdir /mnt/nfs#æŒ‚è½½[root@FriendlyARM /]# mount -o rw 192.168.1.232:/home/qcmoke/nfs/ /mnt/nfs/ -o nolocké€šè¿‡ä»¥ä¸‹å‘½ä»¤æŸ¥çœ‹æ˜¯å¦æŒ‚è½½æˆåŠŸ1[root@FriendlyARM /]# dfÂ¶6. åœ¨armä¸»æœºä¸Šè¿è¡Œhelloå¯æ‰§è¡Œæ–‡ä»¶1[root@FriendlyARM /]# /mnt/nfs/helloè¿è¡ŒæˆåŠŸï¼Œäº¤å‰ç¼–è¯‘å®Œæˆï¼ðŸ˜„]]></content>
      <categories>
        <category>linux</category>
      </categories>
      <tags>
        <tag>ubuntu</tag>
        <tag>arm</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[linuxæ­å»ºnfsæœåŠ¡]]></title>
    <url>%2Fdevops%2Fnfs.html</url>
    <content type="text"><![CDATA[NFSï¼ˆNetwork File Systemï¼‰ç½‘ç»œæ–‡ä»¶ç³»ç»Ÿã€‚å®ƒå…è®¸ç½‘ç»œä¸­çš„è®¡ç®—æœºä¹‹é—´é€šè¿‡TCP/IPç½‘ç»œå…±äº«èµ„æºã€‚åœ¨NFSçš„åº”ç”¨ä¸­ï¼Œæœ¬åœ°NFSçš„å®¢æˆ·ç«¯åº”ç”¨å¯ä»¥é€æ˜Žåœ°è¯»å†™ä½äºŽè¿œç«¯NFSæœåŠ¡å™¨ä¸Šçš„æ–‡ä»¶ï¼Œå°±åƒè®¿é—®æœ¬åœ°æ–‡ä»¶ä¸€æ ·ã€‚Â¶ä¸€ã€centosÂ¶1. æœåŠ¡ç«¯å®‰è£…å¹¶é…ç½®Â¶1.1 å®‰è£…1234#å…³é—­é˜²ç«å¢™$ service firewalld stop#å®‰è£…nfs$ yum install nfs-utils nfs4-acl-tools net-tools -yÂ¶1.2 é…ç½®123456789101112131415#åˆ›å»ºå…±äº«ç›®å½•ï¼Œç”±äºŽå®¢æˆ·ç«¯æŒ‚è½½çš„ç”¨æˆ·æ˜¯nfsnobodyç”¨æˆ·ï¼Œå¦‚æžœè¦è®©å®¢æˆ·ç«¯å¯è¯»å¯å†™ï¼Œéœ€è¦è¿™é‡Œæ˜¯ä½¿ç”¨rootç”¨æˆ·å»ºç«‹çš„ç›®å½•ï¼Œæ‰€ä»¥è¦ç»™å…¶ä»–ç”¨æˆ· 7 rwx çš„æƒé™$ mkdir -p /mnt/nfs &amp;&amp; chown -R root:root /mnt/nfs/ &amp;&amp; chmod 757 /mnt/nfs#é…ç½®NFSå…±äº«ç›®å½•ï¼Œå…±äº«æœ¬æœº/mnt/nfsç›®å½•ç»™æ‰€æœ‰ç½‘ç»œä¸»æœºï¼ˆå…±äº«ç»™å…·ä½“çš„ç½‘ç»œä¸»æœºçš„è¯ï¼Œå¯ä»¥å°†*æ”¹æˆå…·ä½“ipæˆ–è€…ç½‘æ®µé…ç½®ï¼‰##()é‡Œçš„é…ç½®å‚æ•°å¯é€‰ï¼Œæ•°é‡æ— å…³ï¼Œä½ç½®æ— å…³ï¼Œä½†æ˜¯å¦‚æžœè¦é…ç½®åç§°ä¸€å®šè¦å†™å¯¹ï¼Œå¤šä¸ªå‚æ•°ç”¨,åˆ†å‰²$ cat &gt;&gt; /etc/exports &lt;&lt;EOF/mnt/nfs *(rw,no_root_squash,async)EOF#é‡æ–°åŠ è½½nfsæœåŠ¡é…ç½®ï¼ˆæ¯æ¬¡ä¿®æ”¹éƒ½è¦æ‰§è¡Œï¼‰$ exportfs -r #æˆ–è€…é‡å¯nfsæœåŠ¡systemctl restart nfs$ service nfs restart#æ˜¾ç¤ºå…±äº«è¯¦ç»†æƒ…å†µ$ exportfs -v #æˆ–è€…showmount -eexportsæ–‡ä»¶é…ç½®ä»‹ç»ï¼š1234567891011121314151617181920212223/home/nfs ï¼šå…±äº«çš„ç›®å½•* ï¼šæŒ‡å®šå“ªäº›ç”¨æˆ·å¯ä»¥è®¿é—® * æ‰€æœ‰å¯ä»¥pingåŒè¯¥ä¸»æœºçš„ç”¨æˆ· 192.168.1.* æŒ‡å®šç½‘æ®µï¼Œåœ¨è¯¥ç½‘æ®µä¸­çš„ç”¨æˆ·å¯ä»¥æŒ‚è½½ 192.168.1.12 åªæœ‰è¯¥ç”¨æˆ·èƒ½æŒ‚è½½(rw,sync,no_root_squash)ï¼š æƒé™ é€‰é¡¹è¯´æ˜Ž roï¼šå…±äº«ç›®å½•åªè¯»ï¼› rwï¼šå…±äº«ç›®å½•å¯è¯»å¯å†™ï¼› syncï¼šåŒæ­¥ï¼Œå°†æ•°æ®åŒæ­¥å†™å…¥å†…å­˜ç¼“å†²åŒºä¸Žç£ç›˜ä¸­ï¼Œæ•ˆçŽ‡ä½Žï¼Œä½†å¯ä»¥ä¿è¯æ•°æ®çš„ä¸€è‡´æ€§ï¼› asyncï¼šå°†æ•°æ®å…ˆä¿å­˜åœ¨å†…å­˜ç¼“å†²åŒºä¸­ï¼Œå¿…è¦æ—¶æ‰å†™å…¥ç£ç›˜ï¼› all_squashï¼šæ‰€æœ‰è®¿é—®ç”¨æˆ·éƒ½æ˜ å°„ä¸ºåŒ¿åç”¨æˆ·æˆ–ç”¨æˆ·ç»„ï¼› no_all_squashï¼ˆé»˜è®¤ï¼‰ï¼šè®¿é—®ç”¨æˆ·å…ˆä¸Žæœ¬æœºç”¨æˆ·åŒ¹é…ï¼ŒåŒ¹é…å¤±è´¥åŽå†æ˜ å°„ä¸ºåŒ¿åç”¨æˆ·æˆ–ç”¨æˆ·ç»„ï¼› root_squashï¼ˆé»˜è®¤ï¼‰ï¼šå°†æ¥è®¿çš„rootç”¨æˆ·æ˜ å°„ä¸ºåŒ¿åç”¨æˆ·æˆ–ç”¨æˆ·ç»„ï¼› no_root_squashï¼šæ¥è®¿çš„rootç”¨æˆ·ä¿æŒrootå¸å·æƒé™ï¼› anonuid=&lt;UID&gt;ï¼šæŒ‡å®šåŒ¿åè®¿é—®ç”¨æˆ·çš„æœ¬åœ°ç”¨æˆ·UIDï¼Œé»˜è®¤ä¸ºnfsnobodyï¼ˆ65534ï¼‰ï¼› anongid=&lt;GID&gt;ï¼šæŒ‡å®šåŒ¿åè®¿é—®ç”¨æˆ·çš„æœ¬åœ°ç”¨æˆ·ç»„GIDï¼Œé»˜è®¤ä¸ºnfsnobodyï¼ˆ65534ï¼‰ï¼› secureï¼ˆé»˜è®¤ï¼‰ï¼šé™åˆ¶å®¢æˆ·ç«¯åªèƒ½ä»Žå°äºŽ1024çš„tcp/ipç«¯å£è¿žæŽ¥æœåŠ¡å™¨ï¼› insecureï¼šå…è®¸å®¢æˆ·ç«¯ä»Žå¤§äºŽ1024çš„tcp/ipç«¯å£è¿žæŽ¥æœåŠ¡å™¨ï¼› wdelayï¼ˆé»˜è®¤ï¼‰ï¼šæ£€æŸ¥æ˜¯å¦æœ‰ç›¸å…³çš„å†™æ“ä½œï¼Œå¦‚æžœæœ‰åˆ™å°†è¿™äº›å†™æ“ä½œä¸€èµ·æ‰§è¡Œï¼Œè¿™æ ·å¯ä»¥æé«˜æ•ˆçŽ‡ï¼› no_wdelayï¼šè‹¥æœ‰å†™æ“ä½œåˆ™ç«‹å³æ‰§è¡Œï¼Œåº”ä¸Žsyncé…åˆä½¿ç”¨ï¼› subtree_checkï¼ˆé»˜è®¤ï¼‰ ï¼šè‹¥è¾“å‡ºç›®å½•æ˜¯ä¸€ä¸ªå­ç›®å½•ï¼Œåˆ™nfsæœåŠ¡å™¨å°†æ£€æŸ¥å…¶çˆ¶ç›®å½•çš„æƒé™ï¼› no_subtree_check ï¼šå³ä½¿è¾“å‡ºç›®å½•æ˜¯ä¸€ä¸ªå­ç›®å½•ï¼ŒnfsæœåŠ¡å™¨ä¹Ÿä¸æ£€æŸ¥å…¶çˆ¶ç›®å½•çš„æƒé™ï¼Œè¿™æ ·å¯ä»¥æé«˜æ•ˆçŽ‡ï¼›exportfså‘½ä»¤å·¥å…·ï¼šexportfsç”¨äºŽç®¡ç†NFSæ–‡ä»¶ç³»ç»Ÿçš„å‘½ä»¤å·¥å…·ï¼Œå¯åœ¨ä¸ç›´æŽ¥ç¼–è¾‘/etc/exportsæ–‡ä»¶çš„æƒ…å†µä¸‹æ–¹ä¾¿çš„ç®¡ç†NFSã€‚è¿™å‘½ä»¤è¿˜æ²¡ç ”ç©¶é€ï¼ŒåŽé¢æœ‰æ—¶é—´å†å¥½å¥½è¡¥é½ã€‚-a æ‰“å¼€æˆ–è€…å–æ¶ˆæ‰€æœ‰ç›®å½•çš„å…±äº«-i &lt;æ–‡ä»¶&gt; æŒ‡å®šé…ç½®æ–‡ä»¶-r æ›´æ–°é…ç½®,é‡æ–°è¯»å–/etc/exports-u å¸è½½æŒ‡å®šç›®å½•-o ä½¿ç”¨æŒ‡å®šå‚æ•°-v æ˜¾ç¤ºå…±äº«è¯¦ç»†æƒ…å†µæ›´å¤šï¼šexportfså‘½ä»¤ç»´æŠ¤NFSæœåŠ¡ç«¯å½“å‰å¯¼å‡ºè¡¨ã€‚å…¶ä¸­å¯¼å‡ºä¸»è¡¨å­˜æ”¾åœ¨/var/lib/nfs/etabæ–‡ä»¶ä¸­(è¿™ä¸ªæ–‡ä»¶æœ‰æœ€è¯¦ç»†çš„é…ç½®ï¼Œæ¯”å¦‚æœ‰çš„å‚æ•°ç”¨æˆ·æ²¡æœ‰æŒ‡å®šï¼Œé‚£ä¹ˆnfsä¼šè‡ªåŠ¨ç”Ÿæˆå¯¹åº”çš„é»˜è®¤å‚æ•°)ã€‚å½“å®¢æˆ·ç«¯å‘é€ä¸€ä¸ªNFS MOUNTè¯·æ±‚æ—¶ï¼Œrpc.mountdè¿›ç¨‹ä¼šè¯»å–è¯¥æ–‡ä»¶ã€‚http://linux.51yip.com/search/exportfshttps://www.cnblogs.com/xzlive/p/9766388.htmlÂ¶2. å®¢æˆ·ç«¯å®‰è£…å¹¶æŒ‚è½½Â¶2.1 å®‰è£…1234#å…³é—­é˜²ç«å¢™$ service firewalld stop#å®‰è£…nfs$ yum install nfs-utils nfs4-acl-tools net-tools -yÂ¶2.2 æŒ‚è½½12345678910111213141516171819202122232425#æŸ¥çœ‹æœåŠ¡ç«¯çš„å…±äº«ç›®å½• showmount -e + nfsæœåŠ¡ä¸»æœºIP#æ¯”å¦‚æœåŠ¡ç«¯çš„IPä¸º192.168.1.161$ showmount -e 192.168.1.161#åˆ›å»ºæŒ‚è½½ç‚¹ï¼ˆç›®å½•ï¼‰$ mkdir /mnt/nfs/#å°†æœåŠ¡ç«¯çš„å…±äº«ç›®å½•æŒ‚è½½åˆ°æœ¬åœ°çš„åˆ›å»ºæŒ‚è½½ç‚¹ï¼ˆè¿™æ ·è¯¥ç›®å½•å®žé™…å­˜æ”¾çš„æ•°æ®å°±åªå­˜å‚¨åœ¨æœåŠ¡ç«¯çš„ç£ç›˜é‡Œï¼Œè€Œä¸ä¼šå†å®¢æˆ·ç«¯ç£ç›˜é‡Œï¼‰$ mount -o rw 192.168.1.161:/mnt/nfs /mnt/nfs/#æµ‹è¯•æŒ‚è½½æ˜¯å¦æˆåŠŸ$ dfæ–‡ä»¶ç³»ç»Ÿ 1K-å— å·²ç”¨ å¯ç”¨ å·²ç”¨% æŒ‚è½½ç‚¹devtmpfs 495636 0 495636 0% /devtmpfs 507412 0 507412 0% /dev/shmtmpfs 507412 6924 500488 2% /runtmpfs 507412 0 507412 0% /sys/fs/cgroup/dev/mapper/centos-root 3655680 2234020 1421660 62% //dev/sda1 1038336 138812 899524 14% /boottmpfs 101484 0 101484 0% /run/user/0192.168.1.161:/mnt/nfs 3655680 2157824 1497856 60% /mnt/nfs#åœ¨å®¢æˆ·ç«¯æµ‹è¯•åˆ›å»ºæ–‡ä»¶ï¼Œç„¶åŽåˆ°æœåŠ¡ç«¯çœ‹å…±äº«çš„ç›®å½•æ˜¯å¦æœ‰å®¢æˆ·ç«¯åˆ›å»ºçš„æ–‡ä»¶å³å¯$ touch /mnt/nfs/helloworld.txt$ ls -l /mnt/nfs/æ€»ç”¨é‡ 0-rw-r--r-- 1 root root 0 11æœˆ 28 23:34 helloworld.txtÂ¶3. NFSæƒé™æœåŠ¡ç«¯è¦å…±äº«ç›®å½•ï¼Œå¿…å®šå­˜åœ¨æƒé™é—®é¢˜ï¼Œè¯¥ç›®å½•æ˜¯å¦è¦å…¬å¼€ï¼Œæ˜¯å¦å¯è¯»å¯å†™å¯æ‰§è¡Œï¼Œæ˜¯å¦æ¯ä¸ªäººéƒ½èƒ½çœ‹â€¦ç­‰ç­‰è¿™äº›éƒ½æ˜¯é‡ç‚¹è€ƒè™‘çš„äº‹æƒ…ã€‚æ¯”å¦‚å…±äº«ç›®å½•è¢«è®¾ç½®æˆ777ï¼Œé‚£ä¹ˆä»»æ„ç”¨æˆ·å°±éƒ½å¯è¯»å¯å†™å¯æ‰§è¡Œã€‚ä¸‹é¢å°†è®¾ç½®ä¸º750æƒé™ï¼Œè¡¨ç¤ºæ–‡ä»¶æˆ–ç›®å½•æ‰€æœ‰è€…å…·æœ‰è¯»ã€å†™å’Œæ‰§è¡Œæƒé™ï¼›æ‰€å±žç»„å…·æœ‰è¯»å’Œæ‰§è¡Œæƒé™ï¼Œä½†æ²¡æœ‰å†™æƒé™ï¼›å…¶ä»–ç”¨æˆ·æ²¡æœ‰ä»»ä½•æƒé™ã€‚Â¶3.1 æœåŠ¡ç«¯æ“ä½œ123456789101112131415#ä¿®æ”¹nfsé…ç½®æ–‡ä»¶ï¼ˆ1ã€å…±äº«ç›®å½•å¯è¯»å¯å†™ï¼›2ã€å°†æ¥è®¿çš„rootç”¨æˆ·ä¸ä¿ç•™rootæ€§è´¨è€Œæ˜¯æ˜ å°„ä¸ºnfsnobodyåŒ¿åç”¨æˆ·æˆ–ç”¨æˆ·ç»„ï¼›3ã€å°†æ•°æ®å…ˆä¿å­˜åœ¨å†…å­˜ç¼“å†²åŒºä¸­ï¼Œå¿…è¦æ—¶æ‰å†™å…¥ç£ç›˜ï¼‰$ echo "/mnt/nfs *(rw,root_squash,async)" &gt; /etc/exports#é‡è½½nfsé…ç½®æ–‡ä»¶$ exportfs -r#åˆ›å»ºtomcatç”¨æˆ·ç»„å’Œç”¨æˆ· å¹¶æŒ‡å®šgidå’Œuid$ groupadd tomcat -g 501 &amp;&amp; useradd -m -g tomcat -u 501 tomcat &amp;&amp; passwd tomcat#ç»™ç›®å½•åŠå…¶å­ç›®å½•æ‰€æœ‰æ–‡ä»¶tomcatæƒé™$ chgrp -R tomcat /mnt/nfs/ &amp;&amp; chown -R tomcat:tomcat /mnt/nfs/#tomcatç”¨æˆ·å¯è¯»å¯å†™å¯æ‰§è¡Œï¼Œtomcatç”¨æˆ·ç»„å¯è¯»å¯æ‰§è¡Œï¼Œå…¶ä»–ç”¨æˆ·æ— æƒé™æ“ä½œï¼ˆæ³¨æ„ï¼šå¦‚æžœæ²¡æœ‰æ‰§è¡Œæƒé™å®¢æˆ·ç«¯æ— æ³•cdè¿›ç›®å½•ï¼‰$ chmod -R 750 /mnt/nfs/#åˆ‡æ¢åˆ°tomcatç”¨æˆ·ï¼Œç„¶åŽåˆ›å»ºä¸€ä¸ªæµ‹è¯•æ–‡ä»¶$ su tomcat$ echo "tomcat server" &gt; /mnt/nfs/tomcat-server.txtè¯´æ˜Žï¼šç”¨æˆ·å’Œç»„æƒé™å¯ä½¿ç”¨ [user]:[group] å’Œ [user].[group] ï¼Œæ•ˆæžœæ˜¯ä¸€æ ·ã€‚å…¶ä¸­userå’Œgroupå¯ä»¥æ˜¯åç§°ï¼ˆå¦‚ï¼štomcatï¼‰ï¼Œä¹Ÿå¯ä»¥æ˜¯idï¼ˆå¦‚ï¼š501ï¼‰ðŸ’â€â™‚æç¤ºï¼š1234#å¦‚æžœéœ€è¦åˆªé™¤ç”¨æˆ¶ç»„ï¼Œå¯æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤$ groupdel tomcat#å¦‚æžœéœ€è¦åˆªé™¤ç”¨æˆ¶ï¼Œå¯æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ï¼ˆåˆªé™¤ç”¨æˆ¶åŠå…¶ä¸»ç›®å½•å¯æ‰§è¡Œuserdel tomcat -rï¼‰$ userdel tomcatÂ¶3.2 å®¢æˆ·ç«¯æ“ä½œ123456789101112131415161718192021222324252627#å®¢æˆ·ç«¯ä¹Ÿè¦è¦åˆ›å»ºåŒæ ·çš„tomcatç”¨æˆ·æ‰èƒ½ä½¿ç”¨æœåŠ¡ç«¯ä¸­å…±äº«ç›®å½•tomcatçš„æ‰€æœ‰æƒé™$ groupadd tomcat -g 501$ useradd -m -g tomcat -u 501 tomcat &amp;&amp; passwd tomcat#æ­¤å¤–ä¸ºäº†æµ‹è¯•è¿˜åˆ›å»ºä¸€ä¸ªtomcatç”¨æˆ·ç»„çš„tomcat2ç”¨æˆ·ï¼Œä»¥åŠéžtomcatç”¨æˆ·ç»„çš„test2ç”¨æˆ·$ useradd -m -g tomcat -u 502 tomcat2 &amp;&amp; passwd tomcat2$ groupadd test2 -g 5002 &amp;&amp; useradd -m -g test2 -u 5002 test2 &amp;&amp; passwd test2#ç„¶åŽè¿›å…¥/mnt/nfs/ç›®å½•ç”¨ä¸åŒç”¨æˆ·æµ‹è¯•$ su tomcat[tomcat@box-centos7x64-docker-1 mnt]$ cat /mnt/nfs/tomcat-server.txt tomcat server[tomcat@box-centos7x64-docker-1 mnt]$ echo "tomcat-client" &gt; /mnt/nfs/tomcat-client.txt[tomcat@box-centos7x64-docker-1 mnt]$$ su tomcat2[tomcat2@box-centos7x64-docker-1 mnt]$ cat /mnt/nfs/tomcat-server.txttomcat server[tomcat2@box-centos7x64-docker-1 mnt]$ echo "tomcat2-client" &gt; /mnt/nfs/tomcat2-client.txtbash: /mnt/nfs/tomcat2-client.txt: æƒé™ä¸å¤Ÿ[tomcat2@box-centos7x64-docker-1 mnt]$$ su test2[test2@box-centos7x64-docker-1 mnt]$ cat /mnt/nfs/tomcat-server.txtcat: /mnt/nfs/tomcat-server.txt: æƒé™ä¸å¤Ÿ[test2@box-centos7x64-docker-1 mnt]$ echo "test2-client" &gt; /mnt/nfs/test2-client.txtbash: /mnt/nfs/test2-client.txt: æƒé™ä¸å¤Ÿ[test2@box-centos7x64-docker-1 mnt]$ðŸ’â€â™‚æç¤ºï¼šå¸è½½æŽ‰æŒ‚è½½çš„ç›®å½•12#æ ¹æ®æŒ‚è½½ç‚¹å¸è½½$ umount /mnt/nfs/ðŸ’â€â™‚ æ‹“å±•ï¼šå¦‚æžœå…±äº«ç›®å½•æœ‰777æƒé™ä¸”ä¸ä¿ç•™å®¢æˆ·ç«¯rootç”¨æˆ·æ€§è´¨æƒé™çš„è¯ï¼Œé‚£ä¹ˆåœ¨å®¢æˆ·ç«¯ä½¿ç”¨ä¸å­˜åœ¨äºŽæœåŠ¡ç«¯çš„ç”¨æˆ·ï¼ˆæ¯”å¦‚test2ï¼‰åœ¨å…±äº«ç›®å½•ä¸­åˆ›å»ºçš„æ–‡ä»¶æˆ–è€…ç›®å½•æ—¶çš„ï¼Œåˆ™æ”¹æ–‡ä»¶æˆ–ç›®å½•çš„æ–‡ä»¶åˆ›å»ºè€…å°†ä¼šè¢«nfsè®¾ç½®ä¸ºnfsnobodyåŒ¿åç”¨æˆ·ã€‚Â¶4. windowså®¢æˆ·ç«¯æŒ‚è½½å¯ç›´æŽ¥ä½¿ç”¨windows10 è‡ªå¸¦çš„nfså®¢æˆ·ç«¯æœåŠ¡åŠŸèƒ½ï¼Œæ‰“å¼€æŽ§åˆ¶é¢æ¿&gt;&gt;ç¨‹åº&gt;&gt;ç¨‹åºå’ŒåŠŸèƒ½&gt;&gt;å¯åŠ¨æˆ–å…³é—­WindowsåŠŸèƒ½1$ mount 192.168.1.161:/mnt/nfs k:å¸è½½æŒ‚è½½12$ umount k: #å¸è½½æŒ‚è½½ç‚¹kç›˜#umount -f -a #ä¼šå¸è½½å…¨éƒ¨æŒ‚è½½ç‚¹ï¼ˆæ…Žç”¨ï¼Œå¯èƒ½å¸è½½æŽ‰å…¶ä»–éžè‡ªå·±æŒ‚è½½çš„æŒ‚è½½ç‚¹ï¼‰Â¶5. ç«¯å£é…ç½®NFS ç”¨åˆ°çš„æœåŠ¡æœ‰ portmapper nfs rquotad nlockmgr mountd 5ä¸ªæœåŠ¡ã€‚é€šè¿‡å‘½ä»¤ rpcinfo -p å¯æŸ¥çœ‹nfsä½¿ç”¨çš„ç«¯å£12345678910111213141516171819202122232425262728[root@0003 ~]# rpcinfo -p program vers proto port service 100000 4 tcp 111 portmapper 100000 3 tcp 111 portmapper 100000 2 tcp 111 portmapper 100000 4 udp 111 portmapper 100000 3 udp 111 portmapper 100000 2 udp 111 portmapper 100024 1 udp 15276 status 100024 1 tcp 59582 status 100005 1 udp 892 mountd 100005 1 tcp 892 mountd 100005 2 udp 892 mountd 100005 2 tcp 892 mountd 100005 3 udp 892 mountd 100005 3 tcp 892 mountd 100003 3 tcp 2049 nfs 100003 4 tcp 2049 nfs 100227 3 tcp 2049 nfs_acl 100003 3 udp 2049 nfs 100003 4 udp 2049 nfs 100227 3 udp 2049 nfs_acl 100021 1 udp 32769 nlockmgr 100021 3 udp 32769 nlockmgr 100021 4 udp 32769 nlockmgr 100021 1 tcp 32803 nlockmgr 100021 3 tcp 32803 nlockmgr 100021 4 tcp 32803 nlockmgrå…¶ä¸­ portmapper nfs æœåŠ¡ç«¯å£æ˜¯å›ºå®šçš„åˆ†åˆ«æ˜¯ 111 2049å¦å¤– rquotad nlockmgr mountd æœåŠ¡ç«¯å£æ˜¯éšæœºçš„ã€‚ç”±äºŽç«¯å£æ˜¯éšæœºçš„ï¼Œè¿™å¯¼è‡´é˜²ç«å¢™æ— æ³•è®¾ç½®ã€‚è¿™æ—¶éœ€è¦é…ç½®/etc/sysconfig/nfsä½¿ rquotad nlockmgrï¼ˆè¿™ä¸ªæœåŠ¡åŒ…å«ä¸¤ä¸ªç«¯å£ï¼‰ mountd çš„ç«¯å£å›ºå®šã€‚123456$ vim /etc/sysconfig/nfs#æ‰¾åˆ°ä»¥ä¸‹å‡ é¡¹ï¼Œå°†å‰é¢çš„#å·åŽ»æŽ‰ã€‚RQUOTAD_PORT=875LOCKD_TCPPORT=32803LOCKD_UDPPORT=32769MOUNTD_PORT=892é‡å¯nfså³å¯ç”Ÿæ•ˆ1$ service nfs restartæœ€åŽå°†5ä¸ªæœåŠ¡å›ºå®šçš„6ä¸ªç«¯å£é…ç½®åˆ°é˜²ç«å¢™å³å¯ï¼Œç«¯å£åŒ…æ‹¬ï¼š111ã€875ã€892ã€2049ã€32769ã€3280312345678910111213141516$ firewall-cmd --permanent --add-port=111/tcp$ firewall-cmd --permanent --add-port=875/tcp$ firewall-cmd --permanent --add-port=2049/tcp$ firewall-cmd --permanent --add-port=32769/tcp$ firewall-cmd --permanent --add-port=32803/tcp$ firewall-cmd --permanent --add-port=892/tcp$ firewall-cmd --permanent --add-port=111/udp$ firewall-cmd --permanent --add-port=875/udp$ firewall-cmd --permanent --add-port=2049/udp$ firewall-cmd --permanent --add-port=32769/udp$ firewall-cmd --permanent --add-port=32803/udp$ firewall-cmd --permanent --add-port=892/udp#é‡æ–°åŠ è½½é…ç½®$ firewall-cmd --reloadå‚è€ƒï¼šhttp://www.blogjava.net/envoydada/archive/2012/03/14/371875.htmlhttps://www.cnblogs.com/cheyunhua/p/12033457.htmlhttps://blog.csdn.net/qq43748322/article/details/98484637Â¶äºŒã€ubuntu123456789#1. å®‰è£…$ sudo apt-get install nfs-common nfs-kernel-server#2. ä¿®æ”¹é…ç½®æ–‡ä»¶$ sudo vim /etc/exports/home/nfs *(rw,sync,no_root_squash)#3. åŠ è½½é…ç½®æ–‡ä»¶$ sudo exportfs -a#4. é‡å¯nfsæœåŠ¡$ sudo /etc/init.d/nfs-kernel-server restart]]></content>
      <categories>
        <category>devops</category>
      </categories>
      <tags>
        <tag>linux</tag>
        <tag>nfs</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[mavenå­¦ä¹ ç¬”è®°]]></title>
    <url>%2Fjavaee%2Fmaven.html</url>
    <content type="text"><![CDATA[Â¶ä¸€ã€å®‰è£…å’Œé…ç½®1.å®‰è£…å‰ææ¡ä»¶ï¼šå·²ç»å®‰è£…å¥½é€‚é…mavenå…·ä½“ç‰ˆæœ¬çš„jdkçŽ¯å¢ƒï¼Œæœ¬æ•™ç¨‹ä½¿ç”¨çš„æ˜¯jdk8ï¼ˆMaven 3.3+ require JDK 1.7 or aboveï¼‰ä¸‹è½½Apache Maven,è®¿é—® Mavenå®˜æ–¹ç½‘ç«™;ä¸‹è½½ Maven çš„ zip æ–‡ä»¶ï¼Œä¾‹å¦‚ï¼š apache-maven-3.6.0-bin.zipï¼Œå°†å®ƒè§£åŽ‹åˆ°ä½ è¦å®‰è£… Maven çš„æ–‡ä»¶å¤¹ã€‚æ¯”å¦‚ï¼šD:\DevelopmentTools\apache-maven-3.6.02.é…ç½®æ·»åŠ çŽ¯å¢ƒå˜é‡12MAVEN_HOME:D:\DevelopmentTools\apache-maven-3.6.0PATH:%MAVEN_HOME%\bin3.å®‰è£…éªŒè¯1mvn â€“version4.ä¼˜åŒ–é…ç½®ç¼–è¾‘maven\conf\settings.xml ,å¦‚ï¼š D:\DevelopmentTools\apache-maven-3.6.0\conf\settings.xmlã€‚åªåšä¸€ä¸‹ä¿®æ”¹ï¼Œå…¶ä»–åœ°æ–¹ä¸è¦åŠ¨1234567891011121314151617181920212223242526272829 &lt;!-- 1.è®¾ç½®æœ¬åœ°ä»“åº“ &lt;localRepository&gt;D:/maven/r2/myrepository&lt;/localRepository&gt; --&gt; &lt;mirrors&gt;&lt;!-- 2.ä¿®æ”¹ä¸ºé˜¿é‡Œäº‘é•œåƒåœ°å€ --&gt; &lt;mirror&gt; &lt;id&gt;alimaven&lt;/id&gt; &lt;name&gt;aliyun maven&lt;/name&gt; &lt;url&gt;http://maven.aliyun.com/nexus/content/groups/public/&lt;/url&gt; &lt;mirrorOf&gt;central&lt;/mirrorOf&gt; &lt;/mirror&gt; &lt;/mirrors&gt; &lt;profiles&gt; &lt;!-- 3.é…ç½®jdkçŽ¯å¢ƒ,ä¸ä»£è¡¨å®‰è£…çš„jdkç‰ˆæœ¬ --&gt; &lt;profile&gt; &lt;id&gt;jdk-1.8&lt;/id&gt; &lt;activation&gt; &lt;activeByDefault&gt;true&lt;/activeByDefault&gt; &lt;jdk&gt;1.8&lt;/jdk&gt; &lt;/activation&gt; &lt;properties&gt; &lt;maven.compiler.source&gt;1.8&lt;/maven.compiler.source&gt; &lt;maven.compiler.target&gt;1.8&lt;/maven.compiler.target&gt; &lt;maven.compiler.compilerVersion&gt;1.8&lt;/maven.compiler.compilerVersion&gt; &lt;/properties&gt;&lt;/profile&gt; &lt;/profiles&gt;Â¶äºŒã€åˆ›å»ºç®€å•mavené¡¹ç›®åˆ›å»ºä¸€ä¸ªç›®å½•è®¾ä¸ºmavendemoï¼Œåœ¨é‡Œé¢æ·»åŠ ä¸€ä¸‹å†…å®¹ï¼Œé™¤äº†pom.xmlï¼Œéƒ½æ˜¯æ–‡ä»¶å¤¹ã€‚å¿…é¡»è¦è¿™æ ·åˆ›å»ºé¡¹ç›®ï¼Œmavenæ‰èƒ½è¯†åˆ«ã€‚123456789.â”œâ”€â”€ pom.xmlâ””â”€â”€ src â”œâ”€â”€ main â”‚ â”œâ”€â”€ java â”‚ â””â”€â”€ resources â””â”€â”€ test â”œâ”€â”€ java â””â”€â”€ resourcesåˆ›å»ºä¸¤ä¸ªjavaæ–‡ä»¶ã€‚src/main/java/com/qcmoke/Helloworld.javaå’Œsrc/test/java/com/qcmoke/HelloTest.java123456789101112131415.â”œâ”€â”€ pom.xmlâ””â”€â”€ src â”œâ”€â”€ main â”‚ â”œâ”€â”€ java â”‚ â”‚ â””â”€â”€ com â”‚ â”‚ â””â”€â”€ qcmoke â”‚ â”‚ â””â”€â”€ Helloworld.java â””â”€â”€ resources â””â”€â”€ test â”œâ”€â”€ java â”‚ â””â”€â”€ com â”‚ â””â”€â”€ qcmoke â”‚ â””â”€â”€ HelloTest.java â””â”€â”€ resourcesHelloworld.java12345678package com.qcmoke;public class Helloworld &#123; public String sayHello(String val) &#123; System.out.println("hello "+val); return "hello "+val; &#125;&#125;HelloTest.java123456789101112131415package com.qcmoke;import org.junit.Test;import junit.framework.Assert;import com.qcmoke.Helloworld;public class HelloTest &#123; @Test public void testSayHello() &#123; Helloworld h = new Helloworld(); String result = h.sayHello("jack"); Assert.assertEquals("hello jack", result); &#125;&#125;pom.xml1234567891011121314151617181920212223242526&lt;project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"&gt; &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt; &lt;groupId&gt;com.qcmoke&lt;/groupId&gt; &lt;artifactId&gt;mavendemo&lt;/artifactId&gt; &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt; &lt;packaging&gt;jar&lt;/packaging&gt; &lt;name&gt;mavendemo&lt;/name&gt; &lt;!--æŒ‡å®šmavené¡¹ç›®åç§°ï¼Œä¸æŒ‡å®šé‚£ä¹ˆé»˜è®¤ä½¿ç”¨å·¥ç¨‹åç§°ä½œä¸ºmavené¡¹ç›®åç§°--&gt; &lt;url&gt;http://maven.apache.org&lt;/url&gt; &lt;properties&gt; &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt; &lt;/properties&gt; &lt;dependencies&gt; &lt;dependency&gt; &lt;groupId&gt;junit&lt;/groupId&gt; &lt;artifactId&gt;junit&lt;/artifactId&gt; &lt;version&gt;4.9&lt;/version&gt; &lt;scope&gt;test&lt;/scope&gt; &lt;/dependency&gt; &lt;/dependencies&gt;&lt;/project&gt;12mvn compile #ç¼–è¯‘æºä»£ç mvn test #è¿è¡Œæµ‹è¯•ï¼ŒåŒ…æ‹¬ç¼–è¯‘æºç mvnå¸¸ç”¨å‘½ä»¤ï¼š123456mvn compile #ç¼–è¯‘æºä»£ç mvn test-compile #ç¼–è¯‘æµ‹è¯•ä»£ç mvn test #è¿è¡Œæµ‹è¯•ï¼ŒåŒ…æ‹¬ç¼–è¯‘æºç mvn clean #æ¸…é™¤äº§ç”Ÿçš„é¡¹ç›®mvn package #æ‰“åŒ…ï¼Œæ ¹æ®pom.xmlæ‰“æˆwaræˆ–jarã€‚å¦‚æžœpom.xmlä¸­è®¾ç½® warï¼Œåˆ™æ­¤å‘½ä»¤ç›¸å½“äºŽmvn war:warï¼›å¦‚æžœpom.xmlä¸­è®¾ç½® jarï¼Œåˆ™æ­¤å‘½ä»¤ç›¸å½“äºŽmvn jar:jarmvn install #åœ¨æœ¬åœ°Repositoryä¸­å®‰è£…jarï¼ˆéœ€è¦å…ˆæ‰“åŒ…ï¼‰Â¶ä¸‰ã€Eclipseåˆ›å»ºmavené¡¹ç›®ç»™Eclipseé…ç½®mavenæ‰¾åˆ°Window--&gt;Preferences--&gt;Maven--&gt;Installations--&gt;add--&gt;External--&gt;Directoryï¼Œå°†D:\DevelopmentTools\apache-maven-3.6.0æ·»åŠ åˆ°Eclipseä¸­,ç„¶åŽApply and Closeæ‰¾åˆ°Window--&gt;Preferences--&gt;Maven--&gt;User Settingï¼Œå°†Global Settingså’ŒUser Settingsçš„è·¯å¾„éƒ½ä¿®æ”¹ä¸ºD:\DevelopmentTools\apache-maven-3.6.0\conf\settings.xmlåˆ›å»ºé¡¹ç›®New--&gt;Other--&gt;Mavven Projecté€‰ä¸­Create project sinple name and locationï¼Œç„¶åŽNextï¼Œå¡«å†™ä¸‹å›¾å†…å®¹åŽFinishå³å¯åˆ›å»ºå®Œæˆã€‚åˆ›å»ºåŒ…åå’Œjavaæ–‡ä»¶Helloworld.java12345678package com.qcmoke;public class Helloworld &#123; public String sayHello(String val) &#123; System.out.println("hello "+val); return "hello "+val; &#125;&#125;HelloTest.java123456789101112131415package com.qcmoke;import org.junit.Test;import junit.framework.Assert;import com.qcmoke.Helloworld;public class HelloTest &#123; @Test public void testSayHello() &#123; Helloworld h = new Helloworld(); String result = h.sayHello("jack"); Assert.assertEquals("hello jack", result); &#125;&#125;pom.xml12345678910111213141516171819202122232425262728&lt;project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"&gt; &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt; &lt;groupId&gt;com.qcmoke&lt;/groupId&gt; &lt;artifactId&gt;mavendemo&lt;/artifactId&gt; &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt; &lt;packaging&gt;jar&lt;/packaging&gt; &lt;name&gt;mavendemo&lt;/name&gt; &lt;url&gt;http://maven.apache.org&lt;/url&gt; &lt;properties&gt; &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt; &lt;/properties&gt; &lt;dependencies&gt; &lt;dependency&gt; &lt;groupId&gt;junit&lt;/groupId&gt; &lt;artifactId&gt;junit&lt;/artifactId&gt; &lt;version&gt;4.9&lt;/version&gt; &lt;scope&gt;test&lt;/scope&gt; &lt;/dependency&gt; &lt;/dependencies&gt;&lt;/project&gt;å³é”®é¡¹ç›®Run As é€‰æ‹©Maven Buildâ€¦åŽï¼Œåœ¨Goalsä¸­è¾“å…¥compileåŽç‚¹å‡»Runå¼€å§‹ç¼–è¯‘åˆ›å»ºwebå·¥ç¨‹åˆ›å»ºé¡¹ç›®New--&gt;Other--&gt;Mavven Projecté€‰ä¸­Create project sinple name and locationï¼Œç„¶åŽNextï¼Œå¡«å†™ä¸‹å›¾å†…å®¹åŽFinishå³å¯åˆ›å»ºå®Œæˆã€‚æ³¨æ„æ‰“åŒ…æ–¹å¼è¦é€‰æ‹©warç”Ÿæˆwebappç›¸å…³æ–‡ä»¶ã€‚å³é”®é¡¹ç›®ï¼Œé€‰æ‹©properties&gt;Project Facets,å…ˆå–æ¶ˆDynamic Web Moduleå‹¾é€‰åŽç‚¹å‡»Applyï¼Œç„¶åŽå†å‹¾é€‰ï¼Œä¼šå¤šå‡ºæ¥Further configuration available...çš„é“¾æŽ¥ï¼Œç‚¹å‡»è¿™ä¸ªé“¾æŽ¥ï¼Œä¼šçœ‹åˆ°ä¸‹å›¾çš„å¼¹æ¡†ã€‚åœ¨Content directoryè¾“å…¥æ¡†é‡Œçš„å†…å®¹æ”¹ä¸ºsrc/main/webappä¿®æ”¹å¥½åŽï¼Œç‚¹å‡»Okï¼Œåœ¨ç‚¹å‡»Apply and Closeå³å¯åˆ›å»ºwebappç›¸å…³æ–‡ä»¶pom.xml12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849&lt;project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"&gt; &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt; &lt;groupId&gt;com.qcmoke&lt;/groupId&gt; &lt;artifactId&gt;mavenweb&lt;/artifactId&gt; &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt; &lt;packaging&gt;war&lt;/packaging&gt; &lt;properties&gt; &lt;!-- ç¼–è¯‘å­—ç¬¦é›† --&gt; &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt; &lt;failOnMissingWebXml&gt;false&lt;/failOnMissingWebXml&gt; &lt;/properties&gt; &lt;!-- ä¾èµ–ç®¡ç†é…ç½® --&gt; &lt;dependencies&gt; &lt;!-- Servlet API --&gt; &lt;dependency&gt; &lt;groupId&gt;javax.servlet&lt;/groupId&gt; &lt;artifactId&gt;javax.servlet-api&lt;/artifactId&gt; &lt;version&gt;3.1.0&lt;/version&gt; &lt;scope&gt;provided&lt;/scope&gt; &lt;/dependency&gt; &lt;!-- ä¼˜åŒ–elè¡¨è¾¾å¼æç¤º --&gt; &lt;dependency&gt; &lt;groupId&gt;javax.servlet.jsp&lt;/groupId&gt; &lt;artifactId&gt;jsp-api&lt;/artifactId&gt; &lt;version&gt;2.1.3-b06&lt;/version&gt; &lt;scope&gt;provided&lt;/scope&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;junit&lt;/groupId&gt; &lt;artifactId&gt;junit&lt;/artifactId&gt; &lt;version&gt;4.9&lt;/version&gt; &lt;scope&gt;test&lt;/scope&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;log4j&lt;/groupId&gt; &lt;artifactId&gt;log4j&lt;/artifactId&gt; &lt;version&gt;1.2.17&lt;/version&gt; &lt;!-- é»˜è®¤å€¼ä¸ºcompile --&gt; &lt;/dependency&gt; &lt;/dependencies&gt;&lt;/project&gt;Â¶å››ã€ä¾èµ–èŒƒå›´compileèŒƒå›´:å¯¹ä¸»ç¨‹åºæœ‰æ•ˆå¯¹æµ‹è¯•ç¨‹åºæœ‰æ•ˆå‚ä¸Žæ‰“åŒ…å‚ä¸Žéƒ¨ç½²testèŒƒå›´ï¼šå¯¹ä¸»ç¨‹åºæ— æ•ˆå¯¹æµ‹è¯•ç¨‹åºæœ‰æ•ˆä¸å‚ä¸Žæ‰“åŒ…å‚ä¸Žéƒ¨ç½²providedèŒƒå›´ï¼šå¯¹ä¸»ç¨‹åºæœ‰æ•ˆå¯¹æµ‹è¯•ç¨‹åºæœ‰æ•ˆä¸å‚ä¸Žæ‰“åŒ…ä¸å‚ä¸Žéƒ¨ç½²]]></content>
      <categories>
        <category>javaee</category>
      </categories>
      <tags>
        <tag>maven</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[svnå­¦ä¹ ç¬”è®°]]></title>
    <url>%2Ftools%2Fsvn.html</url>
    <content type="text"><![CDATA[Â¶ä¸€ã€ç®€è¦è¯´æ˜ŽÂ¶äºŒã€æœåŠ¡ç«¯æ­å»ºÂ¶1. å®‰è£…1234#yumå®‰è£…SVNyum install -y subversion#aptå®‰è£…SVNapt install -y subversionå„ç³»ç»Ÿç‰ˆæœ¬å®‰è£…åŒ…ä¸‹è½½ï¼šhttps://subversion.apache.org/packages.htmlwindows ç³»ç»Ÿå¯æŽ¨èå®‰è£… VisualSVN ï¼ˆå¦‚ï¼š Apache-Subversion-1.14.2.zip æˆ–è€… VisualSVN-Server-5.1.4-x64.msiï¼‰Â¶2. åˆ›å»ºç‰ˆæœ¬ä»“åº“å¹¶å¯åŠ¨svnæœåŠ¡å™¨1234#åˆ›å»ºç‰ˆæœ¬åº“ç›®å½•svnadmin create &lt;pathä»“åº“ç›®å½•&gt;#å¯åŠ¨svnæœåŠ¡å™¨svnserve -d -r &lt;pathä»“åº“ç›®å½•&gt;ç¤ºä¾‹ï¼š12345678910111213#ï¼ˆ1ï¼‰Linuxç³»ç»Ÿæ­å»ºsvnæœåŠ¡å™¨svnadmin create /opt/mysvnsvnserve -d -r /opt/mysvn#é˜²ç«å¢™å¼€æ”¾svnçš„ç›‘å¬ç«¯å£ï¼ˆé»˜è®¤ä¸º3690ï¼‰firewall-cmd --permanent --add-port=3690/tcpfirewall-cmd --reload#ï¼ˆ2ï¼‰Windowsç³»ç»Ÿæ­å»ºsvnæœåŠ¡å™¨#å»ºç‰ˆæœ¬åº“svnadmin create D:\DevelopmentTools\SVN\mysvn#ä¿®æ”¹ conf/svnserve.conf é…ç½®æ–‡ä»¶ï¼Œä¿®æ”¹ï¼šanon-access = write#å¯åŠ¨æœåŠ¡svnserve -d -r D:\DevelopmentTools\SVN\mysvnæ³¨æ„ï¼šå¯åŠ¨çš„è·¯å¾„å†³å®šè®¿é—®åœ°å€çš„è·¯å¾„ï¼Œå¦‚ä¸‹ï¼šå¦‚æžœå¯åŠ¨çš„è·¯å¾„ä¸º/optï¼Œé‚£ä¹ˆè®¿é—®åœ°å€ä¸ºï¼šsvn://ip/mysvnå¦‚æžœå¯åŠ¨çš„è·¯å¾„ä¸º/opt/mysvn é‚£ä¹ˆè®¿é—®åœ°å€ä¸ºï¼šsvn://ipÂ¶3. é…ç½®ç‰ˆæœ¬ä»“åº“è®¿é—®æƒé™ï¼ˆ1ï¼‰æŽˆæƒè®¿é—®é…ç½®12#ä¿®æ”¹æŒ‡å®šç‰ˆæœ¬åº“çš„æœåŠ¡é…ç½®æ–‡ä»¶vim /opt/mysvn/conf/svnserve.confä¿®æ”¹å¦‚ä¸‹ç›¸å…³å†…å®¹ï¼š1234anon-access = none #åŒ¿åè®¿é—®æƒé™ï¼Œ readè¡¨ç¤ºåªè¯»ï¼Œwriteè¡¨ç¤ºè¯»å†™ï¼Œnoneè¡¨ç¤ºæ— æƒè®¿é—®auth-access = write #å¼€å¯æŽˆæƒå¯è¯»å†™å…¥password-db = passwd #è¡¨ç¤ºæŽˆæƒçš„ç”¨æˆ·åå’Œå¯†ç æ”¾åœ¨passwdæ–‡ä»¶é‡Œauthz-db = authz #è®¾ç½®æƒé™æ–‡ä»¶ï¼ˆ2ï¼‰é…ç½®svnç”¨æˆ·ç”¨æˆ·åå’Œå¯†ç 12#ç¼–è¾‘ç”¨æˆ·å¯†ç æ–‡ä»¶vim /opt/mysvn/conf/passwdä¿®æ”¹å¦‚ä¸‹ç›¸å…³å†…å®¹ï¼š123[users]zhangsan = 123456lisi = 123456ï¼ˆ3ï¼‰é…ç½®æƒé™æ–‡ä»¶ï¼ˆè®¾ç½®svnç”¨æˆ·å’Œç”¨æˆ·ç»„çš„å…·ä½“è®¿é—®æƒé™ï¼‰12#ç¼–è¾‘æƒé™æ–‡ä»¶vim /opt/mysvn/conf/authzä¿®æ”¹å¦‚ä¸‹ç›¸å…³å†…å®¹ï¼š12345678910111213[aliases]#é…ç½®ç”¨æˆ·ç»„[groups]dev = zhangsan,lisi#é…ç½®ç”¨æˆ·ç»„æˆ–ç”¨æˆ·å¯¹æŸä¸ªç›®å½•çš„æ‰§è¡Œæƒé™[/]#ç”¨æˆ·ç»„å…·æœ‰è¯»å†™æ“ä½œ@dev = rw#é…ç½®å…¶ä»–ç”¨æˆ·æ²¡æœ‰ä»»ä½•æƒé™* =Â¶ä¸‰ã€å®¢æˆ·ç«¯ä½¿ç”¨Â¶é€šè¿‡å‘½ä»¤è¡Œä½¿ç”¨SVN1234567891011121314151617#yumå®‰è£…SVNyum install -y subversion#aptå®‰è£…SVNapt install -y subversion#å°†æœåŠ¡ç«¯æ£€å‡ºï¼ˆä¸‹è½½ï¼‰åˆ°æœ¬åœ°çš„æŒ‡å®šç›®å½•svn checkout --username zhangsan --password 123456 svn://192.168.60.156 /tmp/mysvn#è¿›å…¥æœ¬åœ°æ£€å‡ºçš„ç›®å½•cd /tmp/mysvn#åˆ›å»ºä¸€ä¸ªæµ‹è¯•æ–‡ä»¶echo "hello" &gt; test.txt#æ·»åŠ æ–‡ä»¶è‡³ç‰ˆæœ¬æŽ§åˆ¶svn add test.txt#æäº¤æœ¬åœ°ç‰ˆæœ¬åˆ°æœåŠ¡ç«¯svn commit -m "first commit" test.txt#åŒæ­¥æœåŠ¡ç«¯ç‰ˆæœ¬åˆ°æœ¬åœ°svn updateå„ç³»ç»Ÿç‰ˆæœ¬å®‰è£…åŒ…ä¸‹è½½ï¼šhttps://subversion.apache.org/packages.htmlwindows ç³»ç»Ÿå¯æŽ¨èå®‰è£… VisualSVN ï¼ˆå¦‚ï¼š Apache-Subversion-1.14.2.zip æˆ–è€… VisualSVN-Server-5.1.4-x64.msiï¼‰Â¶é€šè¿‡TortoiseSVNä½¿ç”¨SVNTortoiseSVN ä¸‹è½½åœ°å€ï¼šhttps://tortoisesvn.net/downloads.htmlå¦‚ï¼šTortoiseSVN-1.14.5.29465-x64-svn-1.14.2.msiTortoiseSVN å®‰è£…å¥½åŽï¼Œä½¿ç”¨æ“ä½œå¦‚ä¸‹ï¼šÂ¶é€šè¿‡Eclipseä½¿ç”¨SVNÂ¶ï¼ˆ1ï¼‰eclipseå®‰è£…svnæ’ä»¶ä¸‹è½½subclipseçš„site-1.10.13-1.9.xç‰ˆæœ¬ï¼Œå¹¶å°†site-1.10.13-1.9.x.zipå°†è§£åŽ‹åŽæ”¾åˆ°***/eclipse/dropinsé‡Œ,å¹¶é‡å¯eclipseÂ¶ï¼ˆ2ï¼‰æäº¤é¦–å…ˆåˆ›å»ºå¥½ä¸€ä¸ªé¡¹ç›®æ·»åŠ svnæœåŠ¡ä»“åº“åœ°å€å¦‚æžœæ˜¯svnæœåŠ¡å™¨è®¾ç½®å…è®¸åŒ¿åè®¿é—®ï¼Œé‚£ä¹ˆå°±èƒ½æˆåŠŸã€‚å¦‚æžœä¸èƒ½è®¿é—®ï¼Œå¯è¾“å…¥é…ç½®æ–‡ä»¶ä¸­çš„ç”¨æˆ·åå’Œå¯†ç åŽå³å¯å®Œæˆæäº¤ã€‚ç™»å½•æäº¤çš„æ–¹å¼å¯ä»¥æ–¹ä¾¿çœ‹åˆ°æäº¤æ–‡ä»¶çš„å…·ä½“ç”¨æˆ·æäº¤åˆ°svnæœåŠ¡å™¨æ·»åŠ æäº¤ä¿¡æ¯Â¶ï¼ˆ3ï¼‰SVNèµ„æºåº“ç ”ç©¶ç›®çš„ï¼šæŸ¥çœ‹svnæœåŠ¡å™¨çš„ç‰ˆæœ¬ä»“åº“æƒ…å†µä»¥åŠåŽ†å²ç‰ˆæœ¬Â¶ï¼ˆ4ï¼‰æ£€å‡ºç›®çš„ï¼šä»ŽsvnæœåŠ¡å™¨å¯¼å…¥ï¼ˆä¸‹è½½ï¼‰é¡¹ç›®æ·»åŠ svnæœåŠ¡ä»“åº“åœ°å€å¦‚æžœæ˜¯svnæœåŠ¡å™¨è®¾ç½®å…è®¸åŒ¿åè®¿é—®ï¼Œé‚£ä¹ˆå°±èƒ½æˆåŠŸã€‚å¦‚æžœä¸èƒ½è®¿é—®ï¼Œå¯è¾“å…¥é…ç½®æ–‡ä»¶ä¸­çš„ç”¨æˆ·åå’Œå¯†ç åŽå³å¯å®Œæˆæ£€å‡ºã€‚ç‚¹å‡»finishÂ¶ï¼ˆ5ï¼‰è§£å†³å†²çªè®¾æœ‰ä¸¤ä¸ªäººæ‰“å¼€äº†ä¸åŒçš„eclipseï¼Œåˆ†åˆ«å¯¹åŒä¸€ä¸ªç‰ˆæœ¬çš„é¡¹ç›®çš„DEMO.javaè¿›è¡Œä¿®æ”¹ï¼ˆå¼ ä¸‰ï¼‰ç¬¬ä¸€ä¸ªäººï¼šåŽŸç‰ˆæœ¬ï¼ˆç‰ˆæœ¬ä¸º6ï¼‰1234567package demo;public class DEMO &#123; public static void main(String[] args) &#123; System.out.println("hello world!"); &#125;&#125;ä¿®æ”¹ï¼š12345678package demo;public class DEMO &#123; public static void main(String[] args) &#123; System.out.println("hello world!"); System.out.println("I am zhangsan"); &#125;&#125;ä¿®æ”¹å¥½åŽæäº¤ï¼ˆç‰ˆæœ¬å˜ä¸º7ï¼‰ï¼ˆæŽå››ï¼‰ç¬¬äºŒä¸ªäººï¼šåŽŸç‰ˆæœ¬ï¼ˆç‰ˆæœ¬ä¸º6ï¼‰1234567package demo;public class DEMO &#123; public static void main(String[] args) &#123; System.out.println("hello world!"); &#125;&#125;ä¿®æ”¹ï¼š12345678package demo;public class DEMO &#123; public static void main(String[] args) &#123; System.out.println("hello world!"); System.out.println("I am lisi"); &#125;&#125;ä¿®æ”¹å¥½åŽæäº¤æäº¤åŽå‘çŽ°å¤±è´¥ï¼Œè¿™å°±æ˜¯æ‰€è°“çš„æäº¤å†²çªåŽŸå› ï¼šåŽŸå› æ˜¯æœåŠ¡ç«¯ä»“åº“çš„ç‰ˆæœ¬æ¯”æŽå››å½“å‰çš„ç‰ˆæœ¬æ–°ï¼ŒæŽå››çš„å½“å‰ç‰ˆæœ¬å·²ç»è¿‡æ—¶äº†ã€‚å¦‚ä½•è§£å†³ï¼Ÿéœ€è¦è·Ÿæ–°æŽå››çš„å†²çªæ–‡ä»¶ã€‚ç¼–è¾‘å†²çªï¼šä¿®æ”¹å¥½åŽctrl + s ä¿å­˜æ ‡è®°å·²è§£å†³å†²çªæˆ‘ä»¬å‘çŽ°å¤šå‡ºæ¥çš„æ–‡ä»¶ä¸è§äº†ï¼Œå¹¶ä¸”ç‰ˆæœ¬ä¹Ÿä¸ŽæœåŠ¡ç«¯ç‰ˆæœ¬ä¸€è‡´äº†ï¼Œä¹Ÿå°±æ˜¯è¯´å¯ä»¥æ­£å¸¸æäº¤äº†ã€‚æŽå››æäº¤å®ŒæˆåŽæ‰“å¼€SVNèµ„æºåº“ç ”ç©¶å³å¯å‘çŽ°æœåŠ¡ç«¯ä»“åº“çš„ç‰ˆæœ¬å˜æˆäº†æ›´æ–°çš„ç‰ˆæœ¬ï¼ˆåŽŸæœ¬æœåŠ¡ç«¯ç‰ˆæœ¬ä¸º7ï¼ŒçŽ°åœ¨å˜æˆäº†8ï¼‰Â¶ï¼ˆ6ï¼‰æ¢å¤åˆ°åŽ†å²æŸä¸ªç‰ˆæœ¬å³é”®æŸä¸ªç‰ˆæœ¬ï¼Œç„¶åŽé€‰æ‹©èŽ·å–å†…å®¹å½“å‰æœ¬åœ°å°±ä¼šæ¢å¤åˆ°é€‰æ‹©çš„ç‰ˆæœ¬æ¢å¤åŽå†æäº¤çš„è¯ï¼ŒæœåŠ¡ç«¯çš„ä»“åº“ä¹Ÿä¼š&quot;æ¢å¤åˆ°åŽ†å²ç‰ˆæœ¬&quot;,è¿™é‡Œæ‰“åŒå¼•å·çš„åŽŸå› æ˜¯æœåŠ¡ç«¯ä»“åº“åªæ˜¯æ¢å¤ä»£ç ï¼Œä½†å®žé™…ç‰ˆæœ¬æ˜¯å†æ›´æ–°åˆ°äº†æ›´åŠ æ–°çš„ç‰ˆæœ¬Â¶ï¼ˆ7ï¼‰æäº¤å¿½ç•¥æ–‡ä»¶è®¾ç½®é€‰æ‹©Teamâ€“&gt; Gitä¸‹é¢çš„Ignoreed Resources â€“&gt;Add Pattern â€“&gt;ä¸€ä¸ªä¸€ä¸ªçš„æ·»åŠ è¾“å…¥è¦å¿½ç•¥çš„æ–‡ä»¶.classpath.settings.projecttargetæœ€åŽç‚¹å‡»Applyâ€“ &gt;OKÂ¶ï¼ˆ8ï¼‰é¿å…å†²çªå¼€å‘ä¹‹å‰å…ˆæ›´æ–°ï¼Œå®Œæˆå·¥ä½œä¹‹åŽç«‹å³æäº¤å›¢é˜Ÿåˆä½œæ—¶ä¸åŒäººä¹‹é—´åº”è¯¥è‡ªå·±ä¿®æ”¹è‡ªå·±çš„æ–‡ä»¶ï¼Œå°½å°‘ç¼–è¾‘å…¬å…±æ–‡ä»¶]]></content>
      <categories>
        <category>tools</category>
      </categories>
      <tags>
        <tag>svn</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[javaé«˜çº§æ¡†æž¶å­¦ä¹ ç¬”è®°]]></title>
    <url>%2Fjavaee%2Fframeworks.html</url>
    <content type="text"><![CDATA[Â¶ä¸€ã€SpringÂ¶1. æ¦‚å¿µSpring æ¡†æž¶è¿è¡Œæ—¶1 test: spring æä¾›æµ‹è¯•åŠŸèƒ½2 Core Container:æ ¸å¿ƒå®¹å™¨.Spring å¯åŠ¨æœ€åŸºæœ¬çš„æ¡ä»¶.2.1 Beans : Spring è´Ÿè´£åˆ›å»ºç±»å¯¹è±¡å¹¶ç®¡ç†å¯¹è±¡2.2 Core: æ ¸å¿ƒç±»2.3 Context: ä¸Šä¸‹æ–‡å‚æ•°.èŽ·å–å¤–éƒ¨èµ„æºæˆ–è¿™ç®¡ç†æ³¨è§£ç­‰2.4 SpEl: expression.jar3 AOP: å®žçŽ° aop åŠŸèƒ½éœ€è¦ä¾èµ–4 Aspects: åˆ‡é¢ AOP ä¾èµ–çš„åŒ…5 Data Access/Integration : spring å°è£…æ•°æ®è®¿é—®å±‚ç›¸å…³å†…å®¹5.1 JDBC : Spring å¯¹ JDBC å°è£…åŽçš„ä»£ç .5.2 ORM: å°è£…äº†æŒä¹…å±‚æ¡†æž¶çš„ä»£ç .ä¾‹å¦‚ Hibernate5.3 transactions:å¯¹åº” spring-tx.jar,å£°æ˜Žå¼äº‹åŠ¡ä½¿1.ä»€ä¹ˆæ˜¯Springï¼šSpringæ˜¯ä¸€ä¸ªåŸºäºŽIOCå’ŒAOPçš„ç»“æž„J2EEç³»ç»Ÿçš„æ¡†æž¶ ã€‚2.å®¹å™¨(Container): Springå¯ä»¥ç†è§£æˆä¸€ä¸ªç®¡ç†ç±»å¯¹è±¡çš„å¤§å®¹å™¨.3 ApplicationContext æŽ¥å£,æ˜¯ BeanFactory å­æŽ¥å£.BeanFactory çš„åŠŸèƒ½åœ¨ ApplicationContext ä¸­éƒ½æœ‰.ï¼ˆBeanFactory æ˜¯è€ç‰ˆæœ¬Springçš„ä¸»è¦ä¿¡æ¯èŽ·å¾—æŽ¥å£.ï¼‰4.ä»Ž Spring3 å¼€å§‹æŠŠ Spring æ¡†æž¶çš„åŠŸèƒ½æ‹†åˆ†æˆå¤šä¸ª jar. Spring2 åŠä»¥å‰å°±ä¸€ä¸ª jaræ ¸å¿ƒåŠŸèƒ½IoC/DI æŽ§åˆ¶åè½¬(IoC)/ä¾èµ–æ³¨å…¥(DI) â€”â€”è§£è€¦AOP é¢å‘åˆ‡é¢ç¼–ç¨‹ â€”â€”æ‰©å±•å£°æ˜Žå¼äº‹åŠ¡Â¶2. IoC/DIÂ¶2.1 IoCæŽ§åˆ¶åè½¬ä¸ç”¨é€šè¿‡new å®žä¾‹åŒ–å¯¹è±¡,è€Œæ˜¯å°†åˆ›å»ºå¯¹è±¡çš„æŽ§åˆ¶æƒåè½¬ç»™Springæ¥å¤„ç†ã€‚æœ€å¤§çš„ä½œç”¨: è§£è€¦ã€‚IoCåˆ›å»ºå¯¹è±¡çš„ä¸‰ç§æ–¹å¼ï¼ˆ1ï¼‰é€šè¿‡æž„é€ æ–¹æ³•åˆ›å»ºä¸¤ç§æž„é€ æ–¹æ³•åˆ›å»ºæ–¹å¼æ— å‚æž„é€ åˆ›å»º:é»˜è®¤æƒ…å†µæœ‰å‚æž„é€ åˆ›å»º:éœ€è¦æ˜Žç¡®é…ç½®ä½¿ç”¨æ­¥éª¤ï¼šâ‘ éœ€è¦åœ¨ç±»ä¸­æä¾›æœ‰å‚æž„é€ æ–¹æ³•â‘¡åœ¨ applicationContext.xmlä¸­è®¾ç½®è°ƒç”¨å“ªä¸ªæž„é€ æ–¹æ³•åˆ›å»ºå¯¹è±¡ï¼Œå¯ä»¥é€šè¿‡&lt;constructor-arg&gt;æŒ‡å®šæž„é€ æ–¹æ³•é…ç½®å‚æ•°ï¼šindex : å‚æ•°çš„ç´¢å¼•,ä»Ž 0 å¼€å§‹name: å‚æ•°åtype:ç±»åž‹(åŒºåˆ†å¼€å…³é”®å­—å’Œå°è£…ç±»ï¼Œå¦‚ï¼š int å’Œ Integer)å¦‚æžœè®¾å®šçš„æ¡ä»¶åŒ¹é…å¤šä¸ªæž„é€ æ–¹æ³•æ‰§è¡Œæœ€åŽçš„æž„é€ æ–¹æ³•ï¼ˆ2ï¼‰é€šè¿‡å®žä¾‹å·¥åŽ‚åˆ›å»ºéœ€è¦å…ˆåˆ›å»ºå·¥åŽ‚,æ‰èƒ½ç”Ÿäº§å¯¹è±¡ã€‚ä½¿ç”¨æ­¥éª¤ï¼šâ‘ ç¼–å†™å®žä¾‹å·¥åŽ‚â‘¡åœ¨applicationContext.xmlä¸­é…ç½®12&lt;bean id="factory" class="com.qcmoke.pojo.PeopleFactory"&gt;&lt;/bean&gt;&lt;bean id="peofactory" factory-bean="factory" factory-method="newInstance"&gt;&lt;/bean&gt;ï¼ˆ3ï¼‰ é€šè¿‡é™æ€å·¥åŽ‚åˆ›å»ºä¸éœ€è¦åˆ›å»ºå·¥åŽ‚,å¿«é€Ÿåˆ›å»ºå¯¹è±¡ä½¿ç”¨æ­¥éª¤ï¼šï¼ˆ1ï¼‰ç¼–å†™ä¸€ä¸ªé™æ€å·¥åŽ‚(åœ¨æ–¹æ³•ä¸Šæ·»åŠ  static)ï¼ˆ2ï¼‰åœ¨applicationContext.xml ä¸­é…ç½®1&lt;bean id="peostatic" class="com.qcmoke.pojo.PeopleStaticFactory" factory-method="newInstance"&gt;&lt;/bean&gt;Â¶2.2 DIä¾èµ–æ³¨å…¥å¯ä»¥ä¸ºBeanæ³¨å…¥æ™®é€šæ•°æ®ç±»åž‹å±žæ€§å€¼ï¼Œè¿˜å¯ä»¥æ³¨å…¥å…¶ä»–Beançš„å¼•ç”¨ã€‚Â¶2.3 æ¡ˆä¾‹â‘ å¯¼åŒ…:å››ä¸ªæ ¸å¿ƒåŒ…ä¸€ä¸ªæ—¥å¿—åŒ…(commons-logging)commons-logging-1.1.3.jarspring-beans-4.1.6.RELEASE.jarspring-context-4.1.6.RELEASE.jarspring-core-4.1.6.RELEASE.jarspring-expression-4.1.6.RELEASE.jarâ‘¡åœ¨ src ä¸‹æ–°å»º applicationContext.xml (æ–‡ä»¶åç§°å’Œè·¯å¾„è‡ªå®šä¹‰)12345678910111213&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;beans xmlns="http://www.springframework.org/schema/beans" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd"&gt; &lt;bean id="peo" class="com.qcmoke.pojo.People"/&gt; &lt;!-- é€šè¿‡&lt;bean/&gt; åˆ›å»ºå¯¹è±¡. id è¡¨ç¤ºèŽ·å–åˆ°å¯¹è±¡æ ‡è¯† class éœ€è¦åˆ›å»ºå®žä¾‹çš„å…¨é™å®šç±»å --&gt;&lt;/beans&gt;é»˜è®¤é…ç½®æ–‡ä»¶è¢«åŠ è½½æ—¶åˆ›å»ºå¯¹è±¡.â‘¢é€šè¿‡ApplicationContextå®¹å™¨è°ƒç”¨applicationContext.xml é‡Œé…ç½®çš„ä¿¡æ¯é€šè¿‡è°ƒç”¨getBean(â€œbeanæ ‡ç­¾ id å€¼â€,è¿”å›žå€¼ç±»åž‹)æ¥èŽ·å–å¯¹è±¡;å¦‚æžœæ²¡æœ‰ç¬¬äºŒä¸ªå‚æ•°,é»˜è®¤æ˜¯ Object12ApplicationContext ac = new ClassPathXmlApplicationContext("applicationContext.xml");People people = ac.getBean("peo",People.class);Â¶2. AOPÂ¶2.1 æ¦‚å¿µAOP(Aspect Oriented Programming é¢å‘åˆ‡é¢ç¼–ç¨‹)ã€‚ åœ¨ç¨‹åºåŽŸæœ‰çºµå‘æ‰§è¡Œæµç¨‹ä¸­,é’ˆå¯¹æŸä¸€ä¸ªæˆ–æŸä¸€äº›æ–¹æ³•æ·»åŠ é€šçŸ¥,å½¢æˆæ¨ªåˆ‡é¢çš„è¿‡ç¨‹å°±å«åšé¢å‘åˆ‡é¢ç¼–ç¨‹ã€‚ä¼ ç»Ÿç¨‹åºæ‰§è¡Œæµç¨‹éƒ½æ˜¯çºµå‘æ‰§è¡Œæµç¨‹ï¼Œåœ¨åŽŸæœ‰çºµå‘æ‰§è¡Œæµç¨‹ä¸­æ·»åŠ æ¨ªåˆ‡é¢ï¼Œä¸éœ€è¦ä¿®æ”¹åŽŸæœ‰çºµå‘ç¨‹åºä»£ç å°±èƒ½å®žçŽ°åŽŸç¨‹åºçš„æ‰©å±•ã€‚åŽŸæœ‰åŠŸèƒ½: åˆ‡ç‚¹, pointcutå‰ç½®é€šçŸ¥: åœ¨åˆ‡ç‚¹ä¹‹å‰æ‰§è¡Œçš„åŠŸèƒ½. before adviceåŽç½®é€šçŸ¥: åœ¨åˆ‡ç‚¹ä¹‹åŽæ‰§è¡Œçš„åŠŸèƒ½,after adviceå¦‚æžœåˆ‡ç‚¹æ‰§è¡Œè¿‡ç¨‹ä¸­å‡ºçŽ°å¼‚å¸¸,ä¼šè§¦å‘å¼‚å¸¸é€šçŸ¥.throws adviceæ‰€æœ‰åŠŸèƒ½æ€»ç§°å«åšåˆ‡é¢.ç»‡å…¥: æŠŠåˆ‡é¢åµŒå…¥åˆ°åŽŸæœ‰åŠŸèƒ½çš„è¿‡ç¨‹å«åšç»‡å…¥ç‰¹ç‚¹ï¼š1.é«˜æ‰©å±•æ€§ 2.é‡Šæ”¾äº†éƒ¨åˆ†é€»è¾‘.è®©èŒè´£æ›´åŠ æ˜Žç¡®Â¶2.3 å®žçŽ°æ–¹å¼æœ‰ä¸¤ç§å®žçŽ°AOPçš„æ–¹å¼Schema-baedAspectJä¾èµ–ï¼šaopalliance.jar aspectjweaver.jarcommons-logging-1.1.3.jarspring-aop-4.1.6.RELEASE.jarspring-aspects-4.1.6.RELEASE.jarspring-beans-4.1.6.RELEASE.jarspring-context-4.1.6.RELEASE.jarspring-core-4.1.6.RELEASE.jarspring-expression-4.1.6.RELEASE.jarspring-tx-4.1.6.RELEASE.jarÂ¶2.3.1 Schema-basedï¼ˆ1ï¼‰é…ç½®applicationContext.xmlå¯¼å…¥xmlçº¦æŸï¼ˆå‘½åç©ºé—´ï¼‰ï¼š12345678910&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;beans xmlns="http://www.springframework.org/schema/beans" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:aop="http://www.springframework.org/schema/aop" xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop.xsd"&gt; &lt;/beans&gt;ï¼ˆ2ï¼‰ç¼–å†™åˆ‡ç‚¹ç±»Demo.java123456789101112131415161718192021222324252627package com.qcmoke.test;/** * åˆ‡ç‚¹ç±» * * @author qcmoke * */public class Demo &#123; public void demo1() &#123; System.out.println("demo1"); &#125; public void demo2() &#123; //åŽŸæœ‰åŠŸèƒ½ï¼ˆåˆ‡ç‚¹ï¼‰ System.out.println("demo2"); &#125; public void demo3() &#123; System.out.println("demo3"); &#125; public void function(Demo demo) &#123; demo.demo1(); demo.demo2(); demo.demo3(); &#125;&#125;ï¼ˆ3ï¼‰ç¼–å†™é€šçŸ¥ç±»MyBeforeAdvice.java1234567891011121314151617181920212223package com.qcmoke.advice;import java.lang.reflect.Method;import org.springframework.aop.MethodBeforeAdvice;/** * å‰ç½®é€šçŸ¥ç±»(éœ€è¦å®žçŽ° MethodBeforeAdviceæŽ¥å£) * * @author qcmoke */public class MyBeforeAdvice implements MethodBeforeAdvice &#123; /* å‰ç½®é€šçŸ¥ * ç¬¬0ä¸ªå‚æ•°ï¼šåˆ‡ç‚¹æ–¹æ³•å¯¹è±¡ * ç¬¬1ä¸ªå‚æ•°ï¼šåˆ‡ç‚¹æ–¹æ³•å‚æ•° * ç¬¬2ä¸ªå‚æ•°ï¼šåˆ‡ç‚¹æ–¹æ³•æ‰€åœ¨çš„å¯¹è±¡ * */ @Override public void before(Method arg0, Object[] arg1, Object arg2) throws Throwable &#123; System.out.println("\næ‰§è¡Œå‰ç½®é€šçŸ¥"); &#125;&#125;MyAfterAdvice.java123456789101112131415161718192021222324package com.qcmoke.advice;import java.lang.reflect.Method;import org.springframework.aop.AfterReturningAdvice;/** * åŽç½®é€šçŸ¥ç±»(éœ€è¦å®žçŽ°AfterReturningAdviceæŽ¥å£) * * @author qcmoke * */public class MyAfterAdvice implements AfterReturningAdvice &#123; /* åŽç½®é€šçŸ¥ * ç¬¬0ä¸ªå‚æ•°ï¼šåˆ‡ç‚¹æ–¹æ³•è¿”å›žå€¼ * ç¬¬1ä¸ªå‚æ•°ï¼šåˆ‡ç‚¹æ–¹æ³•å¯¹è±¡ * ç¬¬2ä¸ªå‚æ•°ï¼šåˆ‡ç‚¹æ–¹æ³•å‚æ•° * ç¬¬3ä¸ªå‚æ•°ï¼šåˆ‡ç‚¹æ–¹æ³•æ‰€åœ¨çš„å¯¹è±¡ * */ @Override public void afterReturning(Object arg0, Method arg1, Object[] arg2, Object arg3) throws Throwable &#123; System.out.println("æ‰§è¡ŒåŽç½®é€šçŸ¥\n"); &#125;&#125;ï¼ˆ4ï¼‰ åœ¨applicationContext.xmlé…ç½®æ–‡ä»¶é‡Œé…ç½®&lt;aop:config&gt;é…ç½®12345678910111213141516171819202122&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;beans xmlns="http://www.springframework.org/schema/beans" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:aop="http://www.springframework.org/schema/aop" xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop.xsd"&gt; &lt;!-- é…ç½® Demo ç±»,æµ‹è¯•ä½¿ç”¨ --&gt; &lt;bean id="demo" class="com.qcmoke.test.Demo"&gt;&lt;/bean&gt; &lt;!-- é…ç½®é€šçŸ¥ç±»å¯¹è±¡,åœ¨åˆ‡é¢ä¸­å¼•å…¥ --&gt; &lt;bean id="mybefore" class="com.qcmoke.advice.MyBeforeAdvice"&gt;&lt;/bean&gt; &lt;bean id="myafter" class="com.qcmoke.advice.MyAfterAdvice"&gt;&lt;/bean&gt; &lt;!-- é…ç½®åˆ‡é¢ --&gt; &lt;aop:config&gt; &lt;!-- é…ç½®åˆ‡ç‚¹ --&gt; &lt;aop:pointcut expression="execution(* com.qcmoke.test.Demo.demo2())" id="mypoint" /&gt;&lt;!-- æ³¨æ„æ˜Ÿå·åŽè¦æœ‰ç©ºæ ¼ --&gt; &lt;!-- é€šçŸ¥ --&gt; &lt;aop:advisor advice-ref="mybefore" pointcut-ref="mypoint" /&gt; &lt;aop:advisor advice-ref="myafter" pointcut-ref="mypoint" /&gt; &lt;/aop:config&gt;&lt;/beans&gt;ï¼ˆ5ï¼‰ç¼–å†™æµ‹è¯•ç±»AopTest.java12345678910111213141516171819202122232425262728package com.qcmoke.test;import org.junit.jupiter.api.Test;import org.springframework.context.ApplicationContext;import org.springframework.context.support.ClassPathXmlApplicationContext;/** * è¦æ±‚ï¼šåœ¨ä¸æ”¹åŠ¨AopDemoç±»çš„æƒ…å†µä¸‹,åœ¨Demo#function()é‡Œæ·»åŠ å…¶ä»–åŠŸèƒ½ã€‚ * æ¯”å¦‚ï¼šAopDemo#demo2()æ–¹æ³•å‰åŽè¾“å‡ºâ€œ\næ‰§è¡Œå‰ç½®é€šçŸ¥â€å’Œâ€œæ‰§è¡ŒåŽç½®é€šçŸ¥\nâ€ * * @author qcmoke * */public class AopTest &#123; @SuppressWarnings("resource") @Test public void testUseAop() &#123; ApplicationContext ac = new ClassPathXmlApplicationContext("applicationContext.xml"); Demo demo = ac.getBean("demo", Demo.class); demo.function(demo); &#125; @Test public void testNoAop() &#123; Demo demo = new Demo(); demo.function(demo); &#125;&#125;Â¶2.3.2 AspectJï¼ˆ1ï¼‰é…ç½®applicationContext.xmléœ€è¦å°†xmlçº¦æŸåŠ å…¥åˆ°applicationContext.xmlæ–‡ä»¶å¼€å¤´ã€‚12345678910&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;beans xmlns="http://www.springframework.org/schema/beans" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:aop="http://www.springframework.org/schema/aop" xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop.xsd"&gt; &lt;/beans&gt;ï¼ˆ2ï¼‰ç¼–å†™åˆ‡ç‚¹ç±»PointObject.java1234567package com.qcmoke.test;public class PointObject &#123; public void function()&#123;// åŽŸæœ‰åŠŸèƒ½ï¼ˆåˆ‡ç‚¹ï¼‰ System.out.println("æ‰§è¡ŒåŽŸæœ‰åŠŸèƒ½ï¼ˆåˆ‡ç‚¹ï¼‰"); &#125;&#125;ï¼ˆ3ï¼‰ç¼–å†™é€šçŸ¥ç±»MyAspectJAdvice.java1234567891011package com.qcmoke.advice;public class MyAspectJAdvice &#123; public void beforefunction() &#123; System.out.println("æ‰§è¡Œå‰ç½®é€šçŸ¥"); &#125; public void afterfunction() &#123; System.out.println("æ‰§è¡ŒåŽç½®é€šçŸ¥"); &#125;&#125;ï¼ˆ4ï¼‰ åœ¨applicationContext.xmlé…ç½®æ–‡ä»¶é‡Œé…ç½®&lt;aop:config&gt;é…ç½®123456789101112131415161718192021222324&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;beans xmlns="http://www.springframework.org/schema/beans" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:aop="http://www.springframework.org/schema/aop" xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop.xsd"&gt; &lt;!-- é…ç½®åˆ‡ç‚¹ç±» --&gt; &lt;bean id="pointObject" class="com.qcmoke.test.PointObject"&gt;&lt;/bean&gt; &lt;!-- é…ç½®é€šçŸ¥ç±» --&gt; &lt;bean id="aspectJAdvice" class="com.qcmoke.advice.MyAspectJAdvice"&gt;&lt;/bean&gt; &lt;!-- é…ç½®é€šçŸ¥å…³è”åˆ‡ç‚¹ --&gt; &lt;aop:config&gt; &lt;aop:aspect ref="aspectJAdvice"&gt; &lt;aop:pointcut expression="execution(* com.qcmoke.test.PointObject.function())" id="mypoint"/&gt; &lt;!-- é…ç½®åˆ‡ç‚¹æ–¹æ³• --&gt; &lt;aop:before method="beforefunction" pointcut-ref="mypoint"/&gt;&lt;!-- é…ç½®å‰ç½®é€šçŸ¥ --&gt; &lt;aop:after method="afterfunction" pointcut-ref="mypoint"/&gt;&lt;!-- é…ç½®åŽç½®é€šçŸ¥ --&gt; &lt;/aop:aspect&gt; &lt;/aop:config&gt;&lt;/beans&gt;ï¼ˆ5ï¼‰ç¼–å†™æµ‹è¯•ç±»AopTest.java12345678910111213package com.qcmoke.test;import org.springframework.context.ApplicationContext;import org.springframework.context.support.ClassPathXmlApplicationContext;public class AopTest &#123; public static void main(String[] args) &#123; ApplicationContext ac = new ClassPathXmlApplicationContext("applicationContext.xml"); PointObject demo = ac.getBean("pointObject", PointObject.class); demo.function(); &#125;&#125;Â¶2.4 æ³¨è§£æ–¹å¼ä½¿ç”¨AOPé€šè¿‡æ³¨è§£å®žçŽ°AOPçš„æ–¹å¼å…¶å®žæ˜¯åŸºäºŽAspectJçš„æ–¹å¼ã€‚å®žçŽ°æ­¥éª¤ï¼šï¼ˆ1ï¼‰å¯¼åŒ…:aopalliance.jaraspectjweaver.jarcommons-logging-1.1.3.jarspring-aop-4.1.6.RELEASE.jarspring-aspects-4.1.6.RELEASE.jarspring-beans-4.1.6.RELEASE.jarspring-context-4.1.6.RELEASE.jarspring-core-4.1.6.RELEASE.jarspring-expression-4.1.6.RELEASE.jarspring-tx-4.1.6.RELEASE.jarï¼ˆ2ï¼‰é…ç½®applicationContext.xml12345678910111213&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;beans xmlns="http://www.springframework.org/schema/beans" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:aop="http://www.springframework.org/schema/aop" xmlns:context="http://www.springframework.org/schema/context" xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop.xsd http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd"&gt; &lt;/beans&gt;ï¼ˆ3ï¼‰ç¼–å†™åˆ‡ç‚¹ç±»å‡è®¾å¦‚ä¸‹ï¼šPointObject.java12345678910111213141516171819202122package com.qcmoke.test;import org.aspectj.lang.annotation.Pointcut;import org.springframework.stereotype.Component;/** * 1. éœ€è¦é€šè¿‡@Componentå£°æ˜Žéœ€è¦è¢«æ‰«æçš„ç±»ç»„ä»¶,ç›¸å½“äºŽ&lt;bean/&gt; * å¦‚æžœæ²¡æœ‰å‚æ•°: @Component é‚£ä¹ˆæ‰«æåŽå½¢æˆçš„Springç®¡ç†å¯¹è±¡åç§°é»˜è®¤æ˜¯é¦–å­—æ¯å°å†™çš„ç±»å * å¦‚æžœæœ‰å‚æ•°: @Component("è‡ªå®šä¹‰çš„åç§°"),ç›¸å½“äºŽ&lt;bean id="è‡ªå®šä¹‰çš„åç§°"/&gt; * * 2. éœ€è¦é€šè¿‡@Pointcut("execution(* åˆ‡ç‚¹åç§°)")æŒ‡å®šåˆ‡ç‚¹æ–¹æ³•,å¹¶ç»™åˆ‡ç‚¹æŒ‡å®šåç§°ï¼Œä¸€èˆ¬å°±æ˜¯æ–¹æ³•çš„å…¨é™å®šè·¯å¾„ * @author qcmoke * */@Componentpublic class PointObject &#123; @Pointcut("execution(* com.qcmoke.test.PointObject.function())") public void function()&#123;// åŽŸæœ‰åŠŸèƒ½ï¼ˆåˆ‡ç‚¹ï¼‰ System.out.println("æ‰§è¡ŒåŽŸæœ‰åŠŸèƒ½ï¼ˆåˆ‡ç‚¹ï¼‰"); &#125;&#125;ï¼ˆ4ï¼‰ç¼–å†™é€šçŸ¥ç±»MyAdvice.java12345678910111213141516171819202122232425262728package com.qcmoke.advice;import org.aspectj.lang.annotation.AfterReturning;import org.aspectj.lang.annotation.Aspect;import org.aspectj.lang.annotation.Before;import org.springframework.stereotype.Component;/** * 1. éœ€è¦é€šè¿‡@Componentå£°æ˜Žéœ€è¦è¢«æ‰«æçš„ç±»ç»„ä»¶,ç›¸å½“äºŽ&lt;bean/&gt; * å¦‚æžœæ²¡æœ‰å‚æ•°: @Component é‚£ä¹ˆæ‰«æåŽå½¢æˆçš„Springç®¡ç†å¯¹è±¡åç§°é»˜è®¤æ˜¯é¦–å­—æ¯å°å†™çš„ç±»å * å¦‚æžœæœ‰å‚æ•°: @Component("è‡ªå®šä¹‰çš„åç§°"),ç›¸å½“äºŽ&lt;bean id="è‡ªå®šä¹‰çš„åç§°"/&gt; * 2. éœ€è¦é€šè¿‡@Aspectã€‚ç›¸å½“äºŽ&lt;aop:aspect/&gt;,è¡¨ç¤ºé€šçŸ¥æ–¹æ³•åœ¨å½“å‰ç±»ä¸­ * 3. é€šè¿‡@Before("åˆ‡ç‚¹åç§°");@AfterReturning("åˆ‡ç‚¹åç§°").....ç­‰æŒ‡å®šé€šçŸ¥æ–¹æ³• * @author qcmoke * */@Component@Aspectpublic class MyAdvice &#123; @Before("com.qcmoke.test.PointObject.function()") public void beforefunction() &#123; System.out.println("æ‰§è¡Œå‰ç½®é€šçŸ¥"); &#125; @AfterReturning("com.qcmoke.test.PointObject.function()") public void afterfunction() &#123; System.out.println("æ‰§è¡ŒåŽç½®é€šçŸ¥"); &#125;&#125;ï¼ˆ5ï¼‰ é…ç½®applicationContext.xml123456789101112131415161718&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;beans xmlns="http://www.springframework.org/schema/beans" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:aop="http://www.springframework.org/schema/aop" xmlns:context="http://www.springframework.org/schema/context" xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop.xsd http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd"&gt; &lt;!-- æ‰«æå«æœ‰æ³¨è§£çš„åŒ…,å°†åŒ…è·¯å¾„æ”¾åˆ°base-packageå±žæ€§å€¼é‡Œï¼Œå¦‚æžœéœ€è¦æ‰«æå¤šä¸ªåŒ…ï¼ŒåŒ…è·¯å¾„ä¹‹é—´å¯ä»¥é€šè¿‡é€—å·åˆ†éš” --&gt; &lt;context:component-scan base-package="com.qcmoke.advice,com.qcmoke.test"&gt;&lt;/context:component-scan&gt; &lt;!--æ³¨è§£éƒ½æ˜¯ä½¿ç”¨cglibåŠ¨æ€ä»£ç†æ–¹å¼ã€‚ proxy-target-classçš„å€¼ä¸ºtrueè¡¨ç¤ºcglibåŠ¨æ€ä»£ç†ï¼›ä¸ºfalseè¡¨ç¤ºjdkåŠ¨æ€ä»£ç† --&gt; &lt;aop:aspectj-autoproxy proxy-target-class="true"&gt;&lt;/aop:aspectj-autoproxy&gt;&lt;/beans&gt;ï¼ˆ6ï¼‰ç¼–å†™æµ‹è¯•ç±»AopTest.java123456789101112131415161718192021222324package com.qcmoke.test;import org.junit.jupiter.api.Test;import org.springframework.context.ApplicationContext;import org.springframework.context.support.ClassPathXmlApplicationContext;public class AopTest &#123; @Test public void viewAllNames() &#123; ApplicationContext ac = new ClassPathXmlApplicationContext("applicationContext.xml"); String[] names = ac.getBeanDefinitionNames(); for (String name : names) &#123; System.out.println(name); &#125; &#125; @Test public void testForAdvice() &#123; ApplicationContext ac = new ClassPathXmlApplicationContext("applicationContext.xml"); PointObject pointObject = (PointObject) ac.getBean("pointObject"); pointObject.function(); &#125;&#125;Â¶3. å£°æ˜Žå¼äº‹åŠ¡ç¼–ç¨‹å¼äº‹åŠ¡å’Œå£°æ˜Žå¼äº‹åŠ¡çš„åŒºåˆ«ï¼šÂ¶3.1 æ¦‚å¿µç¼–ç¨‹å¼äº‹åŠ¡æ˜¯ç”±ç¨‹åºå‘˜ç¼–ç¨‹äº‹åŠ¡æŽ§åˆ¶ä»£ç ï¼Œè€Œå£°æ˜Žå¼äº‹åŠ¡å¾—äº‹åŠ¡æŽ§åˆ¶ä»£ç å·²ç»ç”± spring å†™å¥½ï¼Œç¨‹åºå‘˜åªéœ€è¦ç®€å•å£°æ˜Žå‡ºå“ªäº›æ–¹æ³•éœ€è¦è¿›è¡Œäº‹åŠ¡æŽ§åˆ¶å’Œå¦‚ä½•è¿›è¡Œäº‹åŠ¡æŽ§åˆ¶å³å¯ã€‚å£°æ˜Žå¼äº‹åŠ¡é’ˆå¯¹çš„éƒ½æ˜¯ ServiceImpl ç±»ä¸‹éœ€è¦äº‹åŠ¡å¤„ç†çš„æ–¹æ³•.äº‹åŠ¡ç®¡ç†å™¨åŸºäºŽé€šçŸ¥(advice)çš„ï¼ˆå³AOPï¼‰.Â¶3.2 å®žçŽ°æ­¥éª¤Â¶3.3 å£°æ˜Žå¼äº‹åŠ¡ä¸­å±žæ€§è§£é‡Š**name=â€â€ *å“ªäº›æ–¹æ³•éœ€è¦æœ‰äº‹åŠ¡æŽ§åˆ¶1.1 æ”¯æŒé€šé…ç¬¦**readonly=â€booleanâ€ **æ˜¯å¦æ˜¯åªè¯»äº‹åŠ¡.2.1 å¦‚æžœä¸º true,å‘Šè¯‰æ•°æ®åº“æ­¤äº‹åŠ¡ä¸ºåªè¯»äº‹åŠ¡.æ•°æ®åŒ–ä¼˜åŒ–,ä¼šå¯¹æ€§èƒ½æœ‰ä¸€å®šæå‡,æ‰€ä»¥åªè¦æ˜¯æŸ¥è¯¢çš„æ–¹æ³•,å»ºè®®ä½¿ç”¨æ­¤æ•°æ®.2.2 å¦‚æžœä¸º false(é»˜è®¤å€¼),äº‹åŠ¡éœ€è¦æäº¤çš„äº‹åŠ¡.å»ºè®®æ–°å¢ž,åˆ é™¤,ä¿®æ”¹.propagation æŽ§åˆ¶äº‹åŠ¡ä¼ æ’­è¡Œä¸º.ï¼ˆé’ˆå¯¹å¤šä¸ªå¢žåˆ æ”¹äº’ç›¸è°ƒç”¨çš„æƒ…å†µï¼‰3.1 å½“ä¸€ä¸ªå…·æœ‰äº‹åŠ¡æŽ§åˆ¶çš„æ–¹æ³•è¢«å¦ä¸€ä¸ªæœ‰äº‹åŠ¡æŽ§åˆ¶çš„æ–¹æ³•è°ƒç”¨åŽ,éœ€è¦å¦‚ä½•ç®¡ç†äº‹åŠ¡(æ–°å»ºäº‹åŠ¡?åœ¨äº‹åŠ¡ä¸­æ‰§è¡Œ?æŠŠäº‹åŠ¡æŒ‚èµ·?æŠ¥å¼‚å¸¸?)3.2 REQUIRED (é»˜è®¤å€¼): å¦‚æžœå½“å‰æœ‰äº‹åŠ¡,å°±åœ¨äº‹åŠ¡ä¸­æ‰§è¡Œ,å¦‚æžœå½“å‰æ²¡æœ‰äº‹åŠ¡,æ–°å»ºä¸€ä¸ªäº‹åŠ¡.3.3 SUPPORTS:å¦‚æžœå½“å‰æœ‰äº‹åŠ¡å°±åœ¨äº‹åŠ¡ä¸­æ‰§è¡Œ,å¦‚æžœå½“å‰æ²¡æœ‰äº‹åŠ¡,å°±åœ¨éžäº‹åŠ¡çŠ¶æ€ä¸‹æ‰§è¡Œ.3.4 MANDATORY:å¿…é¡»åœ¨äº‹åŠ¡å†…éƒ¨æ‰§è¡Œ,å¦‚æžœå½“å‰æœ‰äº‹åŠ¡,å°±åœ¨äº‹åŠ¡ä¸­æ‰§è¡Œ,å¦‚æžœæ²¡æœ‰äº‹åŠ¡,æŠ¥é”™.3.5 REQUIRES_NEW:å¿…é¡»åœ¨äº‹åŠ¡ä¸­æ‰§è¡Œ,å¦‚æžœå½“å‰æ²¡æœ‰äº‹åŠ¡,æ–°å»ºäº‹åŠ¡,å¦‚æžœå½“å‰æœ‰äº‹åŠ¡,æŠŠå½“å‰äº‹åŠ¡æŒ‚èµ·.3.6 NOT_SUPPORTED:å¿…é¡»åœ¨éžäº‹åŠ¡ä¸‹æ‰§è¡Œ,å¦‚æžœå½“å‰æ²¡æœ‰äº‹åŠ¡,æ­£å¸¸æ‰§è¡Œ,å¦‚æžœå½“å‰æœ‰äº‹åŠ¡,æŠŠå½“å‰äº‹åŠ¡æŒ‚èµ·.3.7 NEVER:å¿…é¡»åœ¨éžäº‹åŠ¡çŠ¶æ€ä¸‹æ‰§è¡Œ,å¦‚æžœå½“å‰æ²¡æœ‰äº‹åŠ¡,æ­£å¸¸æ‰§è¡Œ,å¦‚æžœå½“å‰æœ‰äº‹åŠ¡,æŠ¥é”™.3.8 NESTED:å¿…é¡»åœ¨äº‹åŠ¡çŠ¶æ€ä¸‹æ‰§è¡Œ.å¦‚æžœæ²¡æœ‰äº‹åŠ¡,æ–°å»ºäº‹åŠ¡,å¦‚æžœå½“å‰æœ‰äº‹åŠ¡,åˆ›å»ºä¸€ä¸ªåµŒå¥—äº‹åŠ¡.isolation=â€â€ äº‹åŠ¡éš”ç¦»çº§åˆ«4.1 åœ¨å¤šçº¿ç¨‹æˆ–å¹¶å‘è®¿é—®ä¸‹å¦‚ä½•ä¿è¯è®¿é—®åˆ°çš„æ•°æ®å…·æœ‰å®Œæ•´æ€§çš„.4.2 è„è¯»:4.2.1 ä¸€ä¸ªäº‹åŠ¡(A)è¯»å–åˆ°å¦ä¸€ä¸ªäº‹åŠ¡(B)ä¸­æœªæäº¤çš„æ•°æ®,å¦ä¸€ä¸ªäº‹åŠ¡ä¸­æ•°æ®å¯èƒ½è¿›è¡Œäº†æ”¹å˜,æ­¤æ—¶Aäº‹åŠ¡è¯»å–çš„æ•°æ®å¯èƒ½å’Œæ•°æ®åº“ä¸­æ•°æ®æ˜¯ä¸ä¸€è‡´çš„,æ­¤æ—¶è®¤ä¸ºæ•°æ®æ˜¯è„æ•°æ®,è¯»å–è„æ•°æ®è¿‡ç¨‹å«åšè„è¯».4.3 ä¸å¯é‡å¤è¯»:4.3.1 ä¸»è¦é’ˆå¯¹çš„æ˜¯æŸè¡Œæ•°æ®.(æˆ–è¡Œä¸­æŸåˆ—)4.3.2 ä¸»è¦é’ˆå¯¹çš„æ“ä½œæ˜¯ä¿®æ”¹æ“ä½œ.4.3.3 ä¸¤æ¬¡è¯»å–åœ¨åŒä¸€ä¸ªäº‹åŠ¡å†…4.3.4 å½“äº‹åŠ¡Aç¬¬ä¸€æ¬¡è¯»å–äº‹åŠ¡åŽ,äº‹åŠ¡Bå¯¹äº‹åŠ¡Aè¯»å–çš„æ·‘å›è¿›è¡Œä¿®æ”¹,äº‹åŠ¡ A ä¸­å†æ¬¡è¯»å–çš„æ•°æ®å’Œä¹‹å‰è¯»å–çš„æ•°æ®ä¸ä¸€è‡´,è¿‡ç¨‹ä¸å¯é‡å¤è¯».4.4 å¹»è¯»:4.4.1 ä¸»è¦é’ˆå¯¹çš„æ“ä½œæ˜¯æ–°å¢žæˆ–åˆ é™¤4.4.2 ä¸¤æ¬¡äº‹åŠ¡çš„ç»“æžœ.4.4.3 äº‹åŠ¡AæŒ‰ç…§ç‰¹å®šæ¡ä»¶æŸ¥è¯¢å‡ºç»“æžœ,äº‹åŠ¡Bæ–°å¢žäº†ä¸€æ¡ç¬¦åˆæ¡ä»¶çš„æ•°æ®.äº‹åŠ¡ A ä¸­æŸ¥è¯¢çš„æ•°æ®å’Œæ•°æ®åº“ä¸­çš„æ•°æ®ä¸ä¸€è‡´çš„,äº‹åŠ¡ A å¥½åƒå‡ºçŽ°äº†å¹»è§‰,è¿™ç§æƒ…å†µç§°ä¸ºå¹»è¯».4.5 DEFAULT: é»˜è®¤å€¼,ç”±åº•å±‚æ•°æ®åº“è‡ªåŠ¨åˆ¤æ–­åº”è¯¥ä½¿ç”¨ä»€ä¹ˆéš”ç¦»ç•Œåˆ«4.6 **READ_UNCOMMITTED: **å¯ä»¥è¯»å–æœªæäº¤æ•°æ®,å¯èƒ½å‡ºçŽ°è„è¯»,ä¸é‡å¤è¯»,å¹»è¯».4.6.1 æ•ˆçŽ‡æœ€é«˜.4.7 **READ_COMMITTED:**åªèƒ½è¯»å–å…¶ä»–äº‹åŠ¡å·²æäº¤æ•°æ®.å¯ä»¥é˜²æ­¢è„è¯»,å¯èƒ½å‡ºçŽ°ä¸å¯é‡å¤è¯»å’Œå¹»è¯».4.8 **REPEATABLE_READ: **è¯»å–çš„æ•°æ®è¢«æ·»åŠ é”,é˜²æ­¢å…¶ä»–äº‹åŠ¡ä¿®æ”¹æ­¤æ•°æ®,å¯ä»¥é˜²æ­¢ä¸å¯é‡å¤è¯».è„è¯»,å¯èƒ½å‡ºçŽ°å¹»è¯».4.9 **SERIALIZABLE: **æŽ’é˜Ÿæ“ä½œ,å¯¹æ•´ä¸ªè¡¨æ·»åŠ é”.ä¸€ä¸ªäº‹åŠ¡åœ¨æ“ä½œæ•°æ®æ—¶,å¦ä¸€ä¸ªäº‹åŠ¡ç­‰å¾…äº‹åŠ¡æ“ä½œå®ŒæˆåŽæ‰èƒ½æ“ä½œè¿™ä¸ªè¡¨.4.9.1 æœ€å®‰å…¨çš„4.9.2 æ•ˆçŽ‡æœ€ä½Žçš„.rollback-for=â€å¼‚å¸¸ç±»åž‹å…¨é™å®šè·¯å¾„â€5.1 å½“å‡ºçŽ°ä»€ä¹ˆå¼‚å¸¸æ—¶éœ€è¦è¿›è¡Œå›žæ»š5.2 å»ºè®®:ç»™å®šè¯¥å±žæ€§å€¼.5.2.1 æ‰‹åŠ¨æŠ›å¼‚å¸¸ä¸€å®šè¦ç»™è¯¥å±žæ€§å€¼.no-rollback-for=â€â€6.1 å½“å‡ºçŽ°ä»€ä¹ˆå¼‚å¸¸æ—¶ä¸æ»šå›žäº‹åŠ¡.Â¶4. å¸¸ç”¨æ³¨è§£æ€»ç»“æ³¨æ„ï¼šä½¿ç”¨æ³¨è§£ä¸€å®šè¦æ·»åŠ æ‰«æçš„ç±»æ‰€åœ¨çš„åŒ…è·¯å¾„å¹¶ä¸”å°½é‡å¼€å¯cglibåŠ¨æ€ä»£ç†ï¼Œï¼ˆåœ¨ä½¿ç”¨AOPæ—¶ï¼Œcglibå…¼å®¹serviceæŽ¥å£æŽ¥æ”¶ä»£ç†å¯¹è±¡ï¼Œä¹Ÿå…¼å®¹ä»¥serviceå®žçŽ°ç±»æŽ¥æ”¶ä»£ç†å¯¹è±¡ï¼›è€ŒjdkåŠ¨æ€ä»£ç†åªå…¼å®¹serviceæŽ¥å£æŽ¥æ”¶ä»£ç†å¯¹è±¡ï¼‰ä½¿ç”¨æ³¨è§£åŽdefault-autowireå…¨å±€è‡ªåŠ¨æ³¨å…¥é…ç½®å°±ä¸ç”Ÿæ•ˆäº†ã€‚123456&lt;!-- æ‰«æå«æœ‰æ³¨è§£çš„åŒ…,å°†åŒ…è·¯å¾„æ”¾åˆ°base-packageå±žæ€§å€¼é‡Œï¼Œå¦‚æžœéœ€è¦æ‰«æå¤šä¸ªåŒ…ï¼ŒåŒ…è·¯å¾„ä¹‹é—´å¯ä»¥é€šè¿‡é€—å·åˆ†éš” --&gt;&lt;context:component-scan base-package="com.qcmoke.advice,com.qcmoke.test"&gt;&lt;/context:component-scan&gt; &lt;!--æ³¨è§£éƒ½æ˜¯ä½¿ç”¨cglibåŠ¨æ€ä»£ç†æ–¹å¼ã€‚ proxy-target-classçš„å€¼ä¸ºtrueè¡¨ç¤ºcglibåŠ¨æ€ä»£ç†ï¼›ä¸ºfalseè¡¨ç¤ºjdkåŠ¨æ€ä»£ç† --&gt;&lt;aop:aspectj-autoproxy proxy-target-class="true"&gt;&lt;/aop:aspectj-autoproxy&gt;&lt;/beans&gt;@Component åˆ›å»ºç±»å¯¹è±¡,ç›¸å½“äºŽé…ç½®&lt;bean/&gt;@Service ä¸Ž@Component åŠŸèƒ½ç›¸åŒ.2.1 @Serviceä¸€èˆ¬å†™åœ¨ ServiceImplç±»ä¸Š.@Repositoryä¸Ž@Component åŠŸèƒ½ç›¸åŒ.3.1 @Repositoryä¸€èˆ¬å†™åœ¨æ•°æ®è®¿é—®å±‚ç±»ä¸Š.@Controller ä¸Ž@Component åŠŸèƒ½ç›¸åŒ.4.1 @Controllerä¸€èˆ¬å†™åœ¨æŽ§åˆ¶å™¨ç±»ä¸Š.@Resource(ä¸éœ€è¦å†™å¯¹è±¡çš„ get/set)5.1 java ä¸­jdkè‡ªå¸¦çš„æ³¨è§£5.2 é»˜è®¤æŒ‰ç…§ byName æ³¨å…¥,å¦‚æžœæ²¡æœ‰åç§°å¯¹è±¡,æŒ‰ç…§ byTypeæ³¨å…¥5.2.1 å»ºè®®æŠŠå¯¹è±¡åç§°å’Œ spring å®¹å™¨ä¸­å¯¹è±¡åç›¸åŒ@Autowired(ä¸éœ€è¦å†™å¯¹è±¡çš„ get/set)6.1 spring è‡ªå¸¦çš„æ³¨è§£6.2 é»˜è®¤æŒ‰ç…§ byType æ³¨å…¥.@Value() èŽ·å– properties æ–‡ä»¶ä¸­å†…å®¹@Pointcut()å®šä¹‰åˆ‡ç‚¹@Aspect() å®šä¹‰åˆ‡é¢ç±»@Before()å‰ç½®é€šçŸ¥@After åŽç½®é€šçŸ¥@AfterReturning åŽç½®é€šçŸ¥,å¿…é¡»åˆ‡ç‚¹æ­£ç¡®æ‰§è¡Œ@AfterThrowing å¼‚å¸¸é€šçŸ¥@Arround çŽ¯ç»•é€šçŸ¥Â¶äºŒã€SpringmvcMVCçš„æ¦‚å¿µï¼šMæŒ‡çš„æ˜¯moduleï¼ˆæ¨¡åž‹ï¼‰VæŒ‡çš„æ˜¯viewï¼ˆè§†å›¾ï¼‰CæŒ‡çš„æ˜¯controllerï¼ˆæŽ§åˆ¶å™¨ï¼‰ä¼ ç»Ÿçš„MVCå¼€å‘æ¨¡å¼ä¸­ï¼šâ€‹ MåŒ…æ‹¬serviceï¼Œdaoï¼Œpojoï¼Œbeanç­‰â€‹ VåŒ…æ‹¬jspï¼Œhtmlç­‰â€‹ CåŒ…æ‹¬servletè€Œspringmvcï¼Œä¸åŒçš„æ˜¯springmvcæ˜¯ä¸åŒ…æ‹¬ä¼ ç»Ÿmvcå¼€å‘æ¨¡åž‹çš„serviceå’Œdaoçš„ã€‚è€Œæ˜¯å¯¹æŽ§åˆ¶å±‚è¿›è¡ŒmvcåŒ–å°è£…ã€‚Â¶1. é‡è¦æ ¸å¿ƒç»„ä»¶DispatcherServlet å‰ç«¯æŽ§åˆ¶å™¨(åˆ†å‘å™¨ã€è¯·æ±‚å…¥å£ï¼Œè´Ÿè´£åˆ†å‘è¯·æ±‚ï¼ŒæŽ¥æ”¶æ‰€æœ‰è¯·æ±‚ï¼Œå¦‚æžœé…ç½®/ä¸åŒ…å« jsp)HandlerMapping å¤„ç†å™¨æ˜ å°„å™¨ï¼ˆè§£æžurlè¯·æ±‚ï¼Œè´Ÿè´£è¯·æ±‚å’ŒæŽ§åˆ¶å™¨å»ºç«‹ä¸€ä¸€å¯¹åº”çš„å…³ç³»ä»¥æ­¤æ¥æŸ¥æ‰¾Controllerï¼‰HandlAdapterï¼šå¤„ç†å™¨é€‚é…å™¨ï¼ˆ è´Ÿè´£è°ƒç”¨å…·ä½“çš„æ³•ï¼ˆHandlerï¼‰.ï¼‰Controllerï¼ˆHandlerï¼‰åŽç«¯æŽ§åˆ¶å™¨ï¼ˆåŽç«¯å¤„ç†å™¨ï¼‰ViewResolver è§†å›¾è§£æžå™¨ï¼ˆå®šä½å’Œè·³è½¬é¡µé¢ï¼Œè§£æžä¸åŒçš„æ–‡ä»¶Â¶2 çŽ¯å¢ƒæ­å»ºÂ¶2.1 çº¯é…ç½®æ–‡ä»¶é…ç½®ï¼ˆ1ï¼‰å¯¼åŒ…commons-logging-1.1.3.jarspring-aop-4.1.6.RELEASE.jarspring-aspects-4.1.6.RELEASE.jarspring-beans-4.1.6.RELEASE.jarspring-context-4.1.6.RELEASE.jarspring-core-4.1.6.RELEASE.jarspring-expression-4.1.6.RELEASE.jarspring-jdbc-4.1.6.RELEASE.jarspring-tx-4.1.6.RELEASE.jarspring-web-4.1.6.RELEASE.jarspring-webmvc-4.1.6.RELEASE.jarï¼ˆ2ï¼‰ é…ç½®å‰ç«¯æŽ§åˆ¶å™¨ (åœ¨web.xmlä¸­)123456789101112131415161718192021222324&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://xmlns.jcp.org/xml/ns/javaee" xsi:schemaLocation="http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/web-app_3_1.xsd" id="WebApp_ID" version="3.1"&gt; &lt;!-- é…ç½®å‰ç«¯æŽ§åˆ¶å™¨ --&gt; &lt;servlet&gt; &lt;!-- ç”±äºŽspringä¸èƒ½æŽ§åˆ¶servletå®¹å™¨ï¼Œæ•…ä¸èƒ½æŽ§åˆ¶ä¼ ç»Ÿçš„servletã€‚ è§£å†³æ–¹å¼ï¼š åªéœ€è¦åœ¨web.xmlä¸­é…ç½®å‰ç«¯æŽ§åˆ¶å™¨DispatcherServleç”Ÿæ•ˆ ,ç„¶åŽåœ¨DispatcherServleä¸­èŽ·å–æ‰€æœ‰å‰ç«¯å‘é€çš„è¯·æ±‚ï¼Œ å†å°†è¯·æ±‚è¿›è¡Œè§£æžåˆ†é…ç»™å¯¹åº”çš„åŽç«¯æŽ§åˆ¶å™¨ï¼Œè¿™äº›åŽç«¯æŽ§åˆ¶å™¨ç”±äºŽä¸æ˜¯ç›´æŽ¥å—åˆ°servletå®¹å™¨çš„æŽ§åˆ¶ï¼Œæ‰€ä»¥è¿™äº›springå®¹å™¨èƒ½å¤Ÿç®¡ç†è¿™äº›åŽç«¯å®¹å™¨ã€‚ --&gt; &lt;servlet-name&gt;springmvc123&lt;/servlet-name&gt; &lt;servlet-class&gt;org.springframework.web.servlet.DispatcherServlet&lt;/servlet-class&gt; &lt;!-- é…ç½®springmvcæ–‡ä»¶è·¯å¾„å’Œåç§°ï¼Œè®©springæ¥ç®¡ç†åŽç«¯æŽ§åˆ¶å™¨ --&gt; &lt;init-param&gt; &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt; &lt;param-value&gt;classpath:springmvc.xml&lt;/param-value&gt; &lt;/init-param&gt; &lt;load-on-startup&gt;1&lt;/load-on-startup&gt;&lt;!-- è®©å‰ç«¯æŽ§åˆ¶å™¨è‡ªå¯åŠ¨ --&gt; &lt;/servlet&gt; &lt;servlet-mapping&gt; &lt;servlet-name&gt;springmvc123&lt;/servlet-name&gt; &lt;url-pattern&gt;/&lt;/url-pattern&gt; &lt;/servlet-mapping&gt;&lt;/web-app&gt;ï¼ˆ3ï¼‰åˆ›å»ºåŽç«¯æŽ§åˆ¶å™¨DemoController.java12345678910111213141516171819202122package com.qcmoke.controller;import javax.servlet.http.HttpServletRequest;import javax.servlet.http.HttpServletResponse;import org.springframework.web.servlet.ModelAndView;import org.springframework.web.servlet.mvc.Controller;public class DemoController implements Controller &#123; /** * http://localhost:8080/springmvc01_çº¯é…ç½®æ–‡ä»¶çŽ¯å¢ƒæ­å»º/demo */ @Override public ModelAndView handleRequest(HttpServletRequest request, HttpServletResponse response) throws Exception &#123; System.out.println("æ‰§è¡Œäº†springmvcçš„æŽ§åˆ¶å™¨"); //æ‰§è¡Œè·³è½¬ï¼Œé»˜è®¤æ˜¯è½¬å‘åˆ°main.jsp ModelAndView mav = new ModelAndView("main"); return mav; &#125;&#125;ï¼ˆ4ï¼‰åœ¨srcä¸‹é…ç½®springmvc.xml12345678910111213141516171819202122232425262728293031323334353637&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;beans xmlns="http://www.springframework.org/schema/beans" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:context="http://www.springframework.org/schema/context" xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd"&gt; &lt;!-- åŽç«¯æŽ§åˆ¶å™¨ --&gt; &lt;bean id="demoController" class="com.qcmoke.controller.DemoController"&gt;&lt;/bean&gt; &lt;!-- å¤„ç†å™¨æ˜ å°„å™¨ï¼ˆè§£æžè¯·æ±‚) --&gt; &lt;bean class="org.springframework.web.servlet.handler.SimpleUrlHandlerMapping"&gt; &lt;property name="urlMap"&gt; &lt;!-- key:æŽ§åˆ¶å™¨é€»è¾‘åï¼Œç›¸å½“äºŽservletç±»çš„@WebServlet("/key") value-ref:æŽ§åˆ¶å™¨å¯¹è±¡,ç›¸å½“äºŽservletå¯¹è±¡ --&gt; &lt;map&gt; &lt;entry key="demo" value-ref="demoController"&gt;&lt;/entry&gt; &lt;/map&gt; &lt;/property&gt; &lt;/bean&gt; &lt;!-- å¤„ç†å™¨é€‚é…å™¨ï¼ˆ è´Ÿè´£è°ƒç”¨å…·ä½“çš„æ–¹æ³•.ï¼‰ï¼Œéœ€è¦åˆ›å»ºControllerï¼ˆHandlerï¼‰åŽç«¯æŽ§åˆ¶å™¨æ¥è®©å¤„ç†å™¨é€‚é…å™¨æ¥æ‰§è¡Œ --&gt; &lt;bean class="org.springframework.web.servlet.mvc.SimpleControllerHandlerAdapter"&gt;&lt;/bean&gt; &lt;!-- è§†å›¾è§£æžå™¨ï¼ˆå®šä½å’Œè·³è½¬é¡µé¢ï¼‰ --&gt; &lt;bean id="viewResolver" class="org.springframework.web.servlet.view.InternalResourceViewResolver"&gt; &lt;property name="prefix" value="/"&gt;&lt;/property&gt; &lt;property name="suffix" value=".jsp"&gt;&lt;/property&gt; &lt;/bean&gt;&lt;/beans&gt;Â¶2.2 æ³¨è§£æ­å»ºçŽ¯å¢ƒï¼ˆ1ï¼‰å¯¼åŒ…commons-logging-1.1.3.jarspring-aop-4.1.6.RELEASE.jarspring-aspects-4.1.6.RELEASE.jarspring-beans-4.1.6.RELEASE.jarspring-context-4.1.6.RELEASE.jarspring-core-4.1.6.RELEASE.jarspring-expression-4.1.6.RELEASE.jarspring-jdbc-4.1.6.RELEASE.jarspring-tx-4.1.6.RELEASE.jarspring-web-4.1.6.RELEASE.jarspring-webmvc-4.1.6.RELEASE.jarï¼ˆ2ï¼‰é…ç½®å‰ç«¯æŽ§åˆ¶å™¨ (åœ¨web.xmlä¸­)12345678910111213141516&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://xmlns.jcp.org/xml/ns/javaee" xsi:schemaLocation="http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/web-app_3_1.xsd" id="WebApp_ID" version="3.1"&gt; &lt;servlet&gt; &lt;servlet-name&gt;myspringmvc&lt;/servlet-name&gt; &lt;servlet-class&gt;org.springframework.web.servlet.DispatcherServlet&lt;/servlet-class&gt; &lt;init-param&gt; &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt; &lt;param-value&gt;classpath:springmvc.xml&lt;/param-value&gt; &lt;/init-param&gt; &lt;load-on-startup&gt;1&lt;/load-on-startup&gt; &lt;/servlet&gt; &lt;servlet-mapping&gt; &lt;servlet-name&gt;myspringmvc&lt;/servlet-name&gt; &lt;url-pattern&gt;/&lt;/url-pattern&gt; &lt;/servlet-mapping&gt;&lt;/web-app&gt;ï¼ˆ3ï¼‰åˆ›å»ºåŽç«¯æŽ§åˆ¶å™¨DemoController.java1234567891011121314151617181920212223package com.qcmoke.controller;import org.springframework.stereotype.Controller;import org.springframework.web.bind.annotation.RequestMapping;@Controllerpublic class DemoController &#123; /* è¿”å›žå€¼è¡¨ç¤ºè·³è½¬åˆ°çš„é¡µé¢ */ @RequestMapping("demo") public String demo() &#123; System.out.println("æ‰§è¡Œäº†demo"); return "/main.jsp"; &#125; @RequestMapping("demo2") public String demo2() &#123; System.out.println("æ‰§è¡Œäº†demo2"); return "/main.jsp"; &#125;&#125;ï¼ˆ4ï¼‰åœ¨srcä¸‹é…ç½®springmvc.xml1234567891011121314151617181920212223242526272829303132333435363738&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;beans xmlns="http://www.springframework.org/schema/beans" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:mvc="http://www.springframework.org/schema/mvc" xmlns:context="http://www.springframework.org/schema/context" xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc.xsd"&gt; &lt;!-- 1. é…ç½®spring-mvc xmlçº¦æŸ 2. æ³¨è§£æ‰«æåŒ…å 3. é…ç½®æ³¨è§£é©±åŠ¨ --&gt; &lt;!-- æ³¨è§£æ‰«æåŒ…å æ‰«æåŽå¯¹è±¡æ”¾ç½®åˆ°springmvcå®¹å™¨ä¸­ã€‚ æ³¨æ„ï¼šspringmvcæ˜¯springå®¹å™¨çš„å­å®¹å™¨ --&gt; &lt;context:component-scan base-package="com.qcmoke.controller"&gt;&lt;/context:component-scan&gt; &lt;!-- æ³¨è§£é©±åŠ¨ --&gt; &lt;mvc:annotation-driven&gt;&lt;/mvc:annotation-driven&gt; &lt;!-- é…ç½®æ³¨è§£é©±åŠ¨ç›¸å½“äºŽé…ç½®ä»¥ä¸‹ï¼š 1.HandlAdapter 2.HandlerMapping --&gt; &lt;!-- æ”¾è¡Œé™æ€èµ„æºï¼Œé˜²æ­¢æŠŠé™æ€æ–‡ä»¶å½“ä½œæŽ§åˆ¶å™¨æ¥å¤„ç† --&gt; &lt;mvc:resources location="/js/" mapping="/js/**"&gt;&lt;/mvc:resources&gt; &lt;mvc:resources location="/css/" mapping="/css/**"&gt;&lt;/mvc:resources&gt; &lt;mvc:resources location="/images/" mapping="/images/**"&gt;&lt;/mvc:resources&gt;&lt;/beans&gt;Â¶3. ä¼ å‚é’ˆå¯¹äºŽåŽç«¯æŽ§åˆ¶å™¨å¤„ç†æ–¹æ³•çš„å‚æ•°é»˜è®¤è¦æ±‚å‰ç«¯ä¼ å…¥çš„nameåç§°è¦å’ŒæŽ§åˆ¶å™¨HandlerMethodçš„å‚æ•°åç§°ç›¸åŒã€‚è¿”å›žå€¼è¡¨ç¤ºè·³è½¬åˆ°çš„é¡µé¢springä¼šè‡ªåŠ¨å°†è¯·æ±‚çš„æ•°æ®å€¼æ³¨å…¥åˆ°æ–¹æ³•çš„å‚æ•°ä¸­ï¼Œå³ä½¿æ˜¯beanå¯¹è±¡ï¼Œä¹ŸåŒæ ·ä¼šæ ¹æ®beanå¯¹è±¡çš„get/set æ–¹æ³•è¿›è¡Œæ³¨å…¥ã€‚å‚æ•°æ˜¯åŸºæœ¬æ•°æ®ç±»åž‹ï¼šé»˜è®¤ä¿è¯å‚æ•°åç§°å’Œè¯·æ±‚ä¸­ä¼ é€’çš„å‚æ•°åç›¸åŒå³å¯æ³¨å…¥å¦‚æžœè¯·æ±‚å‚æ•°åå’Œæ–¹æ³•å‚æ•°åä¸å¯¹åº”ä½¿ç”¨@RequestParam(â€œè¯·æ±‚çš„æ•°æ®åç§°â€)èµ‹å€¼ï¼Œæ­¤å¤–@RequestParam(defaultValue=â€œå€¼â€)å¯ä»¥è®¾ç½®å‚æ•°é»˜è®¤å€¼@RequestParam(required=true)è¦æ±‚è¯·æ±‚å¿…é¡»ä¼ å…¥å€¼ï¼Œå¦åˆ™å‡ºé”™å‚æ•°æ˜¯å¯¹è±¡ç±»åž‹æ ¹æ®è¯·æ±‚å‚æ•°åå’Œå¯¹è±¡ä¸­å±žæ€§åå¯¹åº”(get/set æ–¹æ³•)è¿›è¡Œæ³¨å…¥å‚æ•°æ˜¯é›†åˆç±»åž‹ï¼ˆè¯·æ±‚æ•°æ®ä¸ºå¤šä¸ªåŒåå‚æ•°ï¼Œå¦‚å¤é€‰æ¡†ï¼‰å‚æ•°ä½¿ç”¨é›†åˆå³å¯èŽ·å–æ³¨å…¥çš„è¯·æ±‚æ•°æ®å¿…é¡»ä½¿ç”¨@RequestParam()Â¶4. è®¾ç½®å­—ç¬¦ç¼–ç éœ€è¦åœ¨web.xmlæ–‡ä»¶ä¸­æ·»åŠ ä»¥ä¸‹è¿‡æ»¤å™¨é…ç½®1234567891011121314&lt;!-- é…ç½®å­—ç¬¦ç¼–ç è¿‡æ»¤å™¨ --&gt;&lt;filter&gt; &lt;filter-name&gt;encoding&lt;/filter-name&gt; &lt;filter-class&gt;org.springframework.web.filter.CharacterEncodingFilter &lt;/filter-class&gt; &lt;init-param&gt; &lt;param-name&gt;encoding&lt;/param-name&gt; &lt;param-value&gt;utf-8&lt;/param-value&gt; &lt;/init-param&gt;&lt;/filter&gt;&lt;filter-mapping&gt; &lt;filter-name&gt;encoding&lt;/filter-name&gt; &lt;url-pattern&gt;/*&lt;/url-pattern&gt;&lt;/filter-mapping&gt;Â¶ä¸‰ã€MybatisÂ¶springæ•´åˆmybatisÂ¶1.5.1 çŽ¯å¢ƒæ­å»º:(1) å¯¼åŒ…å¯¼ å…¥ mybatis æ‰€ æœ‰ jar å’Œ spring åŸº æœ¬åŒ…,è¿˜æœ‰spring-jdbcspring-txspring-aopspring-webå¦å¤–è¿˜è¦spring æ•´åˆ mybatis çš„åŒ…mybatis-springç­‰(2)é…ç½® web.xmlç›®çš„æ˜¯è®©tomcatå¯åŠ¨æ—¶åŠ è½½web.xmlåŽè‡ªåŠ¨åŠ è½½applicationContext.xmlæ–‡ä»¶(3)ç¼–å†™ spring é…ç½®æ–‡ä»¶ applicationContext.xmlç›®çš„æ˜¯è®©spring IOC/DIçš„ä½œç”¨æ¥ç®¡ç†mybatiså’ŒserviceÂ¶1.5.2 ç¼–å†™ä»£ç (1)æ­£å¸¸ç¼–å†™ pojo(2)ç¼–å†™ mapper,å¿…é¡»ä½¿ç”¨æŽ¥å£ç»‘å®šæ–¹æ¡ˆæˆ–æ³¨è§£æ–¹æ¡ˆ(å¿…é¡»æœ‰æŽ¥å£)(4)æ­£å¸¸ç¼–å†™ Service æŽ¥å£å’Œ Service å®žçŽ°ç±»(5)éœ€è¦åœ¨ Service å®žçŽ°ç±»ä¸­å£°æ˜Ž Mapper æŽ¥å£å¯¹è±¡,å¹¶ç”Ÿæˆget/set æ–¹æ³•Â¶å››ã€Strutsstrutsæ‰§è¡Œæµç¨‹ç®€å•æè¿°å›¾:æ­å»ºæ­¥éª¤ï¼š1.æ‹·è´Struts2çš„æ ¸å¿ƒJaråŒ…åˆ°WEB-INF/lib/ä¸‹asm-3.3.jarasm-commons-3.3.jarasm-tree-3.3.jarcommons-fileupload-1.3.1.jar ç”¨äºŽå®žçŽ°æ–‡ä»¶ä¸Šä¼ åŠŸèƒ½çš„jaråŒ…ã€‚commons-io-2.2.jarcommons-lang3-3.2.jarfreemarker-2.3.22.jar reemarkeræ˜¯æ¯”jspæ›´ç®€å•å¥½ç”¨ï¼ŒåŠŸèƒ½æ›´åŠ å¼ºå¤§çš„è¡¨çŽ°å±‚æŠ€æœ¯ï¼Œç”¨æ¥æ›¿ä»£jspçš„ã€‚ åœ¨Struts2ä¸­æå€¡ä½¿ç”¨ freemarkeræ¨¡æ¿ï¼Œä½†å®žé™…é¡¹ç›®ä¸­ä½¿ç”¨jspä¹Ÿå¾ˆå¤šã€‚javassist-3.11.0.GA.jarlog4j-api-2.2.jarlog4j-core-2.2.jarognl-3.0.6.jar ç”¨æ¥æ”¯æŒognlè¡¨è¾¾å¼çš„ï¼Œç±»ä¼¼äºŽELè¡¨è¾¾å¼ï¼ŒåŠŸèƒ½æ¯”ELè¡¨è¾¾å¼å¼ºå¤§çš„å¤šã€‚struts2-core-2.3.24.jar æ ¸å¿ƒåŒ…xwork-core-2.3.24.jar Struts2æ ¸å¿ƒåŒ…ï¼Œæ˜¯WebWorkå†…æ ¸ã€‚2.åœ¨web.xmlé…ç½®å‰ç«¯æŽ§åˆ¶å™¨FilterDispatcherå‰ç«¯æŽ§åˆ¶å™¨å®žé™…ä¸Šæ˜¯ä¸€ä¸ªè¿‡æ»¤å™¨ï¼Œæ˜¯æ‰€æœ‰è¯·æ±‚çš„å…¥å£ã€‚123456789101112131415161718192021&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://java.sun.com/xml/ns/javaee" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" version="2.5"&gt; &lt;welcome-file-list&gt; &lt;welcome-file&gt;index.jsp&lt;/welcome-file&gt; &lt;/welcome-file-list&gt; &lt;!-- é…ç½®å‰ç«¯æŽ§åˆ¶å™¨ --&gt; &lt;filter&gt; &lt;filter-name&gt;Struts2&lt;/filter-name&gt; &lt;filter-class&gt; org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter &lt;/filter-class&gt; &lt;/filter&gt; &lt;filter-mapping&gt; &lt;filter-name&gt;Struts2&lt;/filter-name&gt; &lt;url-pattern&gt;/*&lt;/url-pattern&gt; &lt;/filter-mapping&gt;&lt;/web-app&gt;3.åœ¨srcä¸‹é…ç½®åç§°ä¸ºstruts.xmlåç§°ä¸€å®šè¦æ˜¯struts.xmlï¼Œè¿™æ˜¯çº¦æŸæ¡ä»¶ã€‚12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849&lt;?xml version="1.0" encoding="UTF-8" ?&gt;&lt;!DOCTYPE struts PUBLIC "-//Apache Software Foundation//DTD Struts Configuration 2.1.7//EN" "http://struts.apache.org/dtds/struts-2.1.7.dtd"&gt;&lt;struts&gt; &lt;!-- packageï¼šåŒ…ï¼Œç”¨äºŽå¯¹Actionè¿›è¡Œå°è£…ã€‚ 1ã€nameï¼šåŒ…åï¼Œæ ¹å…ƒç´ ä¸‹å¯ä»¥æœ‰å¤šä¸ªåŒ…ï¼Œå½¼æ­¤ä¹‹é—´ä¸èƒ½é‡åã€‚ 2ã€extendsï¼šç»§æ‰¿ï¼Œç”¨äºŽæŒ‡å®šç»§æ‰¿çš„åŒ…ï¼Œç›¸å½“äºŽå°†ç»§æ‰¿åŒ…ä¸‹çš„é…ç½®ä¿¡æ¯å¤åˆ¶åˆ°äº†å½“å‰åŒ…ä¸‹ã€‚ 3ã€namespaceï¼šå‘½åç©ºé—´ï¼Œç”¨äºŽè§„å®šActionçš„è®¿é—®è·¯å¾„ï¼Œå¯ä»¥æ˜¯"/",ä¹Ÿå¯ä»¥æ˜¯"/è·¯å¾„å"å¿…é¡»ä»¥â€œ/â€å¼€å¤´ã€‚ 4ã€è¯·æ±‚Actionæ—¶ï¼ŒæŒ‰ç…§å¦‚ä¸‹æ ¼å¼æ‹¼å†™URLï¼š --&gt; &lt;package name="day01" namespace="/demo" extends="struts-default"&gt; &lt;!-- actionï¼šä¸šåŠ¡æŽ§åˆ¶å™¨ï¼Œç”¨äºŽæ³¨å†Œä¸šåŠ¡æŽ§åˆ¶å™¨ç»„ä»¶ï¼ˆç±»ï¼‰ã€‚ 1ã€nameï¼šactionåç§°ï¼Œç”¨äºŽè§„å®šActionçš„è®¿é—®è·¯å¾„ã€‚ ä¸€ä¸ªåŒ…ä¸‹å¯ä»¥æœ‰å¤šä¸ªactionï¼Œå½¼æ­¤ä¹‹é—´ä¸èƒ½é‡åã€‚ namespaceå±žæ€§å€¼å’Œactionæ ‡ç­¾é‡Œé¢çš„nameå±žæ€§å€¼æž„æˆè®¿é—®è·¯å¾„ å¦‚æžœå‘½åç©ºé—´æ˜¯"/"æ—¶ï¼šhttp://IP:PORT/ProjectName/NAMESPACE/ACTIONNAMEæˆ–è€…http://IP:PORT/ProjectName/NAMESPACE/ACTIONNAME.action å¦‚æžœå‘½åç©ºé—´æ˜¯"/NAMESPACE"æ—¶ï¼šhttp://IP:PORT/ProjectName/NAMESPACE/ACTIONNAMEæˆ–è€…http://IP:PORT/ProjectName/NAMESPACE/ACTIONNAME.action 2ã€classï¼šä¸šåŠ¡æŽ§åˆ¶å™¨ç»„ä»¶ï¼Œç”¨äºŽæŒ‡å®šä¸šåŠ¡æŽ§åˆ¶å™¨å¯¹åº”çš„ç±»ã€‚ 3ã€methodï¼šæ–¹æ³•ï¼Œç”¨äºŽæŒ‡å®šè®¿é—®å½“å‰actionæ—¶è¦è°ƒç”¨çš„æ–¹æ³•ã€‚å¦‚æžœä¸é…ç½®é»˜è®¤æ‰§è¡Œçš„æ–¹æ³•executeæ–¹æ³•--&gt; &lt;action name="hello" class="com.qcmoke.action.HelloAction" method="sayHello"&gt; &lt;!--é…ç½®actionæ–¹æ³•è¿”å›žå€¼å¯¹åº”çš„é¡µé¢ resultï¼šè¾“å‡ºç»„ä»¶ï¼Œç”¨äºŽè½¬å‘ã€é‡å®šå‘ã€ç›´æŽ¥è¾“å‡ºã€‚ 1ã€nameï¼šåç§°ï¼Œä¸€ä¸ªactionä¸‹å¯ä»¥æœ‰å¤šä¸ªresultï¼Œå½¼æ­¤ä¹‹é—´ä¸èƒ½é‡åã€‚ 2ã€é»˜è®¤åšè½¬å‘ï¼Œæ ‡è®°å†…å®¹è®¾ç½®æˆè½¬å‘çš„é¡µé¢ã€‚--&gt; &lt;result name="success" type="dispatcher"&gt; &lt;!-- nameå±žæ€§ï¼šå’Œæ–¹æ³•è¿”å›žå€¼ä¸€æ ·ï¼Œé»˜è®¤å€¼ä¸º success typeå±žæ€§ï¼šæŒ‡å®šè½¬å‘æˆ–è€…é‡å®šå‘ï¼Œé»˜è®¤å€¼åšè½¬å‘æ“ä½œ dispatcherï¼ˆè¯·æ±‚è½¬å‘ï¼‰ redirectï¼ˆé‡å®šå‘åˆ°é¡µé¢ï¼‰ redirectActionï¼ˆé‡å®šå‘åˆ°Actionï¼‰ chainï¼ˆè§£å†³é‡å®šå‘requestä½œç”¨åŸŸå¤±æ•ˆï¼‰ --&gt; /hello.jsp &lt;/result&gt; &lt;/action&gt; &lt;/package&gt; &lt;!-- ç”±äºŽday02çš„åŒ…ç»§æ‰¿è‡ªday01ï¼Œå¹¶ä¸”æ²¡æœ‰æ‰©å±•åŠŸèƒ½ï¼Œæ•…day01å’Œday02æ˜¯ç­‰ä»·çš„ï¼Œå³ä»¥ä¸‹é“¾æŽ¥æ•ˆæžœæ˜¯ä¸€æ ·çš„ http://localhost:8080/struts02/demo/hello.action?realName=zhangsan&amp;age=21&amp;user.userName=zhangsan&amp;user.password=123456 http://localhost:8080/struts02/demo2/hello.action?realName=zhangsan&amp;age=21&amp;user.userName=zhangsan&amp;user.password=123456 --&gt; &lt;package name="day02" namespace="/demo2" extends="day01"&gt;&lt;/package&gt; &lt;/struts&gt;4.åˆ›å»ºaction123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960package com.qcmoke.action;import com.qcmoke.pojo.User;// æ¡ˆä¾‹1 public class HelloAction &#123; // å®šä¹‰å®žä½“å¯¹è±¡å±žæ€§ï¼ŒæŽ¥æ”¶è¡¨å•å‚æ•°ï¼šç”¨æˆ·åã€å¯†ç  private User user; public void setUser(User user) &#123; System.out.println("æ³¨å…¥å¯¹è±¡user..."); this.user = user; &#125; public User getUser() &#123; return this.user; &#125; public HelloAction() &#123; System.out.println("å®žä¾‹åŒ–Action..."); &#125; // å®šä¹‰åŸºæœ¬ç±»åž‹å±žæ€§ï¼ŒæŽ¥æ”¶è¡¨å•å‚æ•°ï¼šå§“å private String realName; private Integer age; public String getRealName() &#123; return realName; &#125; public Integer getAge() &#123; return age; &#125; public void setAge(Integer age) &#123; this.age = age; &#125; public void setRealName(String realName) &#123; System.out.println("æ³¨å…¥å‚æ•°realName..."); this.realName = realName; &#125; /** * åœ¨ä¸šåŠ¡æ–¹æ³•ä¸­è¾“å‡ºâ€œHelloï¼ŒAction.â€ */ public String sayHello() &#123; System.out.println("Hello,Action."); // è¾“å‡ºåŸºæœ¬ç±»åž‹æ•°æ® System.out.println("å§“åï¼š" + realName); // è¾“å‡ºåŸŸæ¨¡åž‹æ–¹å¼æ³¨å…¥çš„å‚æ•° System.out.println("ç”¨æˆ·åï¼š" + user.getUserName()); System.out.println("å¯†ç ï¼š" + user.getPassword()); return "success"; &#125;&#125;ç”¨åˆ°çš„pojoç±»ï¼š12345678910111213141516171819202122package com.qcmoke.pojo;public class User &#123; private String userName;// ç”¨æˆ·å private String password;// å¯†ç  public String getPassword() &#123; return password; &#125; public String getUserName() &#123; return userName; &#125; public void setUserName(String userName) &#123; this.userName = userName; &#125; public void setPassword(String password) &#123; this.password = password; &#125;&#125;è½¬å‘åˆ°çš„é¡µé¢ï¼š1234567891011&lt;%@page pageEncoding="utf-8"%&gt;&lt;html&gt;&lt;head&gt;&lt;/head&gt;&lt;body&gt; &lt;h1&gt;Hello,Struts2.&lt;/h1&gt; &lt;h1&gt;å§“åï¼š$&#123;realName&#125;&lt;/h1&gt; &lt;h1&gt;ç”¨æˆ·åï¼š$&#123;user.userName &#125;&lt;/h1&gt; &lt;h1&gt;å¯†ç ï¼š$&#123;user.password &#125;&lt;/h1&gt;&lt;/body&gt;&lt;/html&gt;Â¶äº”ã€HibernateÂ¶1. å®šä¹‰Hibernateæ˜¯ä¸€ä¸ªå¼€æºï¼Œè½»é‡çº§çš„ORM(å¯¹è±¡å…³ç³»æ˜ å°„)å·¥å…·ï¼ˆæ¡†æž¶ï¼‰å¯¹è±¡å…³ç³»æ˜ å°„æŠ€æœ¯ORMç®€åŒ–äº†æ•°æ®åˆ›å»ºï¼Œæ•°æ®å¤„ç†å’Œæ•°æ®è®¿é—®ã€‚å®ƒæ˜¯å°†å¯¹è±¡æ˜ å°„åˆ°æ•°æ®åº“ä¸­å­˜å‚¨çš„æ•°æ®(è¡¨)çš„ç¼–ç¨‹æŠ€æœ¯ã€‚ ä¸éœ€è¦ç¼–å†™æ•°æ®åº“ç‰¹å®šçš„sqlè¯­å¥å°±èƒ½å®Œæˆå¯¹æ•°æ®åº“æ•°æ®çš„æ“æŽ§ï¼Œä¸€å®šç¨‹åº¦ä¸Šæ‘†è„±äº†ä¸åŒæ•°æ®åº“sqlå·®å¼‚å¸¦æ¥çš„ä¸ä¾¿ã€‚ormæ€æƒ³ï¼ˆ1ï¼‰è®©å®žä½“ç±»å’Œæ•°æ®åº“è¡¨è¿›è¡Œä¸€ä¸€å¯¹åº”å…³ç³»ï¼ˆä½¿ç”¨é…ç½®æ–‡ä»¶å®Œæˆå¯¹åº”è”ç³»ï¼‰è®©å®žä½“ç±»å’Œæ•°æ®åº“è¡¨å¯¹åº”è®©å®žä½“ç±»å±žæ€§å’Œè¡¨å­—æ®µå¯¹åº”ï¼ˆ2ï¼‰ä¸éœ€è¦ç”¨sqlè¯­å¥ç›´æŽ¥æ“ä½œæ•°æ®åº“è¡¨ï¼Œè€Œæ˜¯é€šè¿‡æ“æŽ§å®žä½“ç±»å¯¹è±¡é—´æŽ¥æ“æŽ§æ•°æ®è¡¨ã€‚Â¶2. çŽ¯å¢ƒæ­å»ºä¸‹é¢ä»¥ç”¨æˆ·ç®¡ç†çš„æ¡ˆä¾‹æ­å»ºjavaå·¥ç¨‹é¡¹ç›®çš„æ–¹å¼æ¥è¯´æ˜Žæ­¥éª¤ã€‚é¡¹ç›®ç»“æžœå¦‚ä¸‹ï¼šÂ¶2.1 æ•°æ®åº“å‡†å¤‡è¿™é‡Œä½¿ç”¨çš„æ˜¯mysqlä½œä¸ºæ•°æ®åº“æ¥è¿›è¡Œè®²è§£ã€‚é¦–å…ˆåœ¨æ•°æ®åº“ä¸­åˆ›å»ºä¸€ä¸ªæ•°æ®åº“ç”¨æ¥å­˜Hibernateç”Ÿæˆçš„è¡¨ã€‚sql:1mysql&gt; create database ssh;Â¶2.2 å¯¼åŒ…antlr-2.7.7.jardom4j-1.6.1.jargeronimo-jta_1.1_spec-1.1.1.jarhibernate-commons-annotations-5.0.1.Final.jarhibernate-core-5.0.7.Final.jarhibernate-entitymanager-5.0.7.Final.jarhibernate-jpa-2.1-api-1.0.0.Final.jarjandex-2.0.0.Final.jarjavassist-3.18.1-GA.jarjboss-logging-3.3.0.Final.jarlog4j-1.2.16.jarmysql-connector-java-5.0.4-bin.jarslf4j-api-1.6.1.jarslf4j-log4j12-1.7.2.jarÂ¶2.3 åˆ›å»ºå®žä½“ç±»å’Œå¯¹åº”çš„æ˜ å°„æ–‡ä»¶å®žä½“ç±»src/com/qcmoke/entity/User.java123456789101112131415161718192021222324252627282930313233343536373839404142package com.qcmoke.entity;public class User &#123; /* hibernateè¦æ±‚å®žä½“ç±»æœ‰ä¸€ä¸ªå±žæ€§å”¯ä¸€çš„ */ private int uid; private String username; private String password; private String address; public int getUid() &#123; return uid; &#125; public void setUid(int uid) &#123; this.uid = uid; &#125; public String getUsername() &#123; return username; &#125; public void setUsername(String username) &#123; this.username = username; &#125; public String getPassword() &#123; return password; &#125; public void setPassword(String password) &#123; this.password = password; &#125; public String getAddress() &#123; return address; &#125; public void setAddress(String address) &#123; this.address = address; &#125;&#125;æ˜ å°„é…ç½®æ–‡ä»¶src/com/qcmoke/entity/User.hbm.xml123456789101112131415161718192021222324252627282930313233343536&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;!DOCTYPE hibernate-mapping PUBLIC "-//Hibernate/Hibernate Mapping DTD 3.0//EN" "http://www.hibernate.org/dtd/hibernate-mapping-3.0.dtd"&gt;&lt;hibernate-mapping&gt; &lt;!-- 1 é…ç½®ç±»å’Œè¡¨å¯¹åº” classæ ‡ç­¾ nameå±žæ€§ï¼šå®žä½“ç±»å…¨è·¯å¾„ tableå±žæ€§ï¼šæ•°æ®åº“è¡¨åç§° --&gt; &lt;class name="com.qcmoke.entity.User" table="t_user"&gt; &lt;!-- 2 é…ç½®å®žä½“ç±»idå’Œè¡¨idå¯¹åº” hibernateè¦æ±‚å®žä½“ç±»æœ‰ä¸€ä¸ªå±žæ€§å”¯ä¸€å€¼ hibernateè¦æ±‚è¡¨æœ‰å­—æ®µä½œä¸ºå”¯ä¸€å€¼ --&gt; &lt;!-- idæ ‡ç­¾ nameå±žæ€§ï¼šå®žä½“ç±»é‡Œé¢idå±žæ€§åç§° columnå±žæ€§ï¼šç”Ÿæˆçš„è¡¨å­—æ®µåç§° --&gt; &lt;id name="uid" column="uid"&gt; &lt;!-- generator:è®¾ç½®æ•°æ®åº“è¡¨idå¢žé•¿ç­–ç•¥ native:ç”Ÿæˆè¡¨idå€¼å°±æ˜¯ä¸»é”®è‡ªåŠ¨å¢žé•¿ uuid:ä½¿ç”¨uuidç”Ÿæˆçš„ä¸åŒéšæœºå€¼ä½œä¸ºå¢žé•¿ç­–ç•¥ï¼Œéœ€è¦å®žä½“ç±»idå±žæ€§æ˜¯Stringç±»åž‹--&gt; &lt;generator class="native"&gt;&lt;/generator&gt; &lt;!-- &lt;generator class="uuid"&gt;&lt;/generator&gt; --&gt; &lt;/id&gt; &lt;!-- é…ç½®å…¶ä»–å±žæ€§å’Œè¡¨å­—æ®µå¯¹åº” nameå±žæ€§ï¼šå®žä½“ç±»å±žæ€§åç§° columnå±žæ€§ï¼šç”Ÿæˆè¡¨å­—æ®µåç§°;columnå±žæ€§å¯ä»¥çœç•¥çš„,ä¸å†™é»˜è®¤å’Œnameå±žæ€§å€¼ä¸€æ ·çš„ typeå±žæ€§:è®¾ç½®ç”Ÿæˆè¡¨å­—æ®µçš„ç±»åž‹(Javaç±»åž‹ï¼Œä¹Ÿå¯ä»¥æ˜¯Hibernateé¢„ç½®çš„ç±»åž‹)ï¼Œä¸å†™é»˜è®¤è‡ªåŠ¨å¯¹åº”ç±»åž‹,ä¸€èˆ¬ä¸ä¼šåŽ»é…ç½® --&gt; &lt;property name="username" column="username"&gt;&lt;/property&gt; &lt;property name="password" column="password" type="string"&gt;&lt;/property&gt; &lt;property name="address" column="address"&gt;&lt;/property&gt; &lt;/class&gt;&lt;/hibernate-mapping&gt;Â¶2.4 æ ¸å¿ƒé…ç½®æ–‡src/hibernate.cfg.xml12345678910111213141516171819202122&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;!DOCTYPE hibernate-configuration PUBLIC "-//Hibernate/Hibernate Configuration DTD 3.0//EN" "http://www.hibernate.org/dtd/hibernate-configuration-3.0.dtd"&gt;&lt;hibernate-configuration&gt; &lt;session-factory&gt; &lt;!-- ç¬¬ä¸€éƒ¨åˆ†ï¼š é…ç½®æ•°æ®åº“ä¿¡æ¯ å¿…é¡»çš„ --&gt; &lt;property name="hibernate.connection.driver_class"&gt;com.mysql.jdbc.Driver&lt;/property&gt; &lt;property name="hibernate.connection.url"&gt;jdbc:mysql:///ssh&lt;/property&gt; &lt;property name="hibernate.connection.username"&gt;root&lt;/property&gt; &lt;property name="hibernate.connection.password"&gt;root&lt;/property&gt; &lt;!-- ç¬¬äºŒéƒ¨åˆ†ï¼š é…ç½®hibernateä¿¡æ¯ å¯é€‰çš„--&gt; &lt;property name="hibernate.show_sql"&gt;true&lt;/property&gt; &lt;!-- è¾“å‡ºåº•å±‚sqlè¯­å¥ --&gt; &lt;property name="hibernate.format_sql"&gt;true&lt;/property&gt; &lt;!-- è¾“å‡ºåº•å±‚sqlè¯­å¥æ ¼å¼ --&gt; &lt;property name="hibernate.hbm2ddl.auto"&gt;update&lt;/property&gt;&lt;!-- é…ç½®hibernate.hbm2ddl.autoä¹‹åŽï¼Œhibernateä¼šè‡ªåŠ¨åˆ›å»ºè¡¨ ã€‚update: å¦‚æžœå·²ç»æœ‰è¡¨ï¼Œæ›´æ–°ï¼Œå¦‚æžœæ²¡æœ‰ï¼Œåˆ›å»º--&gt; &lt;property name="hibernate.dialect"&gt;org.hibernate.dialect.MySQLDialect&lt;/property&gt;&lt;!-- é…ç½®æ•°æ®åº“æ–¹è¨€ã€‚è®©hibernateæ¡†æž¶è¯†åˆ«ä¸åŒæ•°æ®åº“çš„è‡ªå·±ç‰¹æœ‰çš„è¯­å¥ï¼Œæ¯”å¦‚åˆ†é¡µè¯­å¥--&gt; &lt;!-- ç¬¬ä¸‰éƒ¨åˆ†ï¼š æŠŠæ˜ å°„æ–‡ä»¶æ”¾åˆ°æ ¸å¿ƒé…ç½®æ–‡ä»¶ä¸­ å¿…é¡»çš„--&gt; &lt;mapping resource="com/qcmoke/entity/User.hbm.xml"/&gt; &lt;/session-factory&gt;&lt;/hibernate-configuration&gt;Â¶2.5 æµ‹è¯•ç±»src/com/qcmoke/hibernatetest/HibernateTest.java12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152package com.qcmoke.hibernatetest;import org.hibernate.Session;import org.hibernate.SessionFactory;import org.hibernate.Transaction;import org.hibernate.cfg.Configuration;import org.junit.Test;import com.qcmoke.entity.User;public class HibernateTest &#123; @Test public void testAddUser() &#123; /** ç¬¬ä¸€æ­¥ åŠ è½½hibernateæ ¸å¿ƒé…ç½®æ–‡ä»¶ */ // åˆ°srcä¸‹é¢æ‰¾åˆ°åç§°hibernate.cfg.xmlé…ç½®æ–‡ä»¶ï¼Œåˆ›å»ºå¯¹è±¡ï¼ŒæŠŠé…ç½®æ–‡ä»¶æ ‡ç­¾æ”¾åˆ°å¯¹è±¡é‡Œé¢ Configuration cfg = new Configuration(); cfg.configure(); /** ç¬¬äºŒæ­¥ åˆ›å»ºSessionFactoryå¯¹è±¡ */ // è¯»å–hibernateæ ¸å¿ƒé…ç½®æ–‡ä»¶å†…å®¹ï¼Œåˆ›å»ºsessionFactory;åœ¨è¿‡ç¨‹ä¸­ï¼Œæ ¹æ®æ˜ å°„å…³ç³»ï¼Œåœ¨é…ç½®æ•°æ®åº“é‡Œé¢æŠŠè¡¨åˆ›å»ºã€‚ä¸€ä¸ªé¡¹ç›®ä¸€èˆ¬åˆ›å»ºä¸€ä¸ªsessionFactoryå¯¹è±¡ SessionFactory sessionFactory = cfg.buildSessionFactory(); /** ç¬¬ä¸‰æ­¥ ä½¿ç”¨SessionFactoryåˆ›å»ºsessionå¯¹è±¡ï¼Œsessionå¯¹è±¡æ˜¯å•çº¿ç¨‹å¯¹è±¡,å¸¸ç”¨æ–¹æ³•æœ‰ï¼ˆ1ï¼‰æ·»åŠ  saveæ–¹æ³•;ï¼ˆ2ï¼‰ä¿®æ”¹ updateæ–¹æ³•ï¼ˆ3ï¼‰åˆ é™¤ deleteæ–¹æ³•ï¼ˆ4ï¼‰æ ¹æ®idæŸ¥è¯¢ getæ–¹æ³• */ Session session = sessionFactory.openSession(); // ç±»ä¼¼äºŽè¿žæŽ¥ /** ç¬¬å››æ­¥ å¼€å¯äº‹åŠ¡ */ Transaction tx = session.beginTransaction(); /** ç¬¬äº”æ­¥ å†™å…·ä½“é€»è¾‘ crudæ“ä½œ */ // æ·»åŠ åŠŸèƒ½ try &#123; User user = new User(); user.setUsername("qcmoke"); user.setPassword("123456"); user.setAddress("è´µå·ž"); // è°ƒç”¨sessionçš„æ–¹æ³•å®žçŽ°æ·»åŠ  session.save(user); /** ç¬¬å…­æ­¥ æäº¤äº‹åŠ¡ */ tx.commit(); &#125; catch (Exception e) &#123; tx.rollback(); // å›žæ»šäº‹åŠ¡ e.printStackTrace(); &#125; finally &#123; /** ç¬¬ä¸ƒæ­¥ å…³é—­èµ„æº */ session.close(); sessionFactory.close(); &#125; &#125;&#125;Â¶3. ä¸‰å¤§æŸ¥è¯¢å¯¹è±¡QueryCriteriaSQLQueryÂ¶3.1 Query1 ä½¿ç”¨queryå¯¹è±¡ï¼Œå¯ä»¥ä¸å†™sqlè¯­å¥ï¼Œä½†æ˜¯å†™hqlè¯­å¥ï¼ˆ1ï¼‰hqlï¼šhibernate query languageï¼Œhibernateæä¾›æŸ¥è¯¢è¯­è¨€ï¼Œè¿™ä¸ªhqlè¯­å¥å’Œæ™®é€šsqlè¯­å¥å¾ˆç›¸ä¼¼ï¼ˆ2ï¼‰hqlå’Œsqlè¯­å¥åŒºåˆ«ï¼šä½¿ç”¨sqlæ“ä½œè¡¨å’Œè¡¨å­—æ®µä½¿ç”¨hqlæ“ä½œå®žä½“ç±»å’Œå±žæ€§2 æŸ¥è¯¢æ‰€æœ‰hqlè¯­å¥ï¼šï¼ˆ1ï¼‰from å®žä½“ç±»åç§°3 Queryå¯¹è±¡ä½¿ç”¨ï¼ˆ1ï¼‰åˆ›å»ºQueryå¯¹è±¡ï¼ˆ2ï¼‰è°ƒç”¨queryå¯¹è±¡é‡Œé¢çš„æ–¹æ³•å¾—åˆ°ç»“æžœ]]></content>
      <categories>
        <category>javaee</category>
      </categories>
      <tags>
        <tag>javaee</tag>
        <tag>é«˜çº§æ¡†æž¶</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[windowsé‚£äº›æ“ä½œçŽ©æ„]]></title>
    <url>%2Fwindows%2Fwin.html</url>
    <content type="text"><![CDATA[Â¶ä¸€ã€è¿›ç¨‹å¤„ç†1234567891011121314#æŸ¥çœ‹æ‰€æœ‰ç«¯å£ï¼šnetstat -ano#åªæŸ¥çœ‹8080 ç«¯å£ï¼šnetstat -aon|findstr "8080"#æ€æ­»è¿›ç¨‹ï¼Œå‡å¦‚å¯¹åº”çš„PIDæ˜¯â€œ11388â€taskkill /F /PID 11388#å½“ç„¶ï¼Œå¦‚æžœå¦‚æžœä¸çŸ¥é“8080 ç«¯å£æ˜¯ä»€ä¹ˆçš„è¿›ç¨‹,æ‹…å¿ƒè¯¯æ“ä½œï¼Œå¯ä»¥å…ˆé€šè¿‡ä»¥ä¸‹å‘½ä»¤æŸ¥ä¸€ä¸‹è¿›ç¨‹çš„åç§°tasklist|findstr "17484"#å¯ä»¥é€šè¿‡è¿›ç¨‹åç§°å…³é”®å­—æŸ¥çœ‹è¿›ç¨‹å·tasklist|findstr "QQPY"Â¶äºŒã€ç³»ç»Ÿå¸¸ç”¨å¿«æ·é”®Â¶1. æ‰¹é‡å¤šé€‰é•¿æŒ‰CtrlåŽæŒ‰é¼ æ ‡å·¦é”®ä»¥é€‰æ‹©æˆ–åé€‰Â¶2. ç¡®å®šé¦–å°¾åŽæ‰¹é‡å¤šé€‰å…ˆå·¦é”®é€‰ä¸­é¦–ä¸ªæ–‡ä»¶ï¼ˆæ–‡ä»¶å¤¹ï¼‰ï¼Œç„¶åŽæŒ‰ä½Shifté”®ä¸æ¾æ‰‹ï¼Œå†ç§»åŠ¨é¼ æ ‡å·¦é”®é€‰ä¸­æœ«å°¾çš„æ–‡ä»¶ï¼ˆæ–‡ä»¶å¤¹ï¼‰ï¼Œé‚£ä¹ˆå°±èƒ½å¤Ÿå®žçŽ°ç¡®å®šé¦–å°¾åŽæ‰¹é‡å¤šé€‰ã€‚Â¶3. æ’¤é”€æˆ–é‡å›žæ’¤é”€å‰æ’¤é”€ä¸Šä¸€æ­¥çš„æ“ä½œ CTRL+Z (é‡å›žä¸Šä¸€æ­¥è¢«æ’¤é”€çš„æ“ä½œ CTRL+Y)Â¶4. å¿«é€Ÿå®šä½åˆ°è¡Œé¦–ï¼ˆå°¾ï¼‰å¿«é€Ÿå®šä½åˆ°è¡Œé¦– Shift+HOME ï¼ˆå¿«é€Ÿå®šä½åˆ°è¡Œå°¾Shift+END)Â¶5. å¿«é€Ÿå®šä½åˆ°è¯é¦–ï¼ˆå°¾ï¼‰å¿«é€Ÿå®šä½åˆ°è¯é¦–CTRL+Left ï¼ˆå¿«é€Ÿå®šä½åˆ°è¯å°¾CTRL+Right)Â¶ä¸‰ã€è§£å†³windows10 æ—¶é—´è½´ç°è‰²çš„æ´»åŠ¨åŽ†å²è®°å½•æ— æ³•åˆ é™¤çš„é—®é¢˜åœ¨Windows10ä¸Šçš„æ—¥å¸¸åŠžå…¬è¿‡ç¨‹ä¸­ç³»ç»Ÿä¼šè®°å½•å¾ˆå¤šæ´»åŠ¨åŽ†å²è®°å½•ä¿¡æ¯ï¼Œä½†å¦‚æžœä½ æ˜¯ä¸€ä¸ªæ³¨é‡éšç§çš„äººï¼Œä½ å¯èƒ½å’Œæˆ‘ä¸€æ ·é€‰æ‹©åˆ é™¤æŽ‰è¿™äº›ä¿¡æ¯ï¼Œå¹¶ä¸”ç¦ç”¨windows10çš„è®°å½•æœåŠ¡ã€‚æ–¹æ³•æ˜¯ï¼šæ‰“å¼€ä»»åŠ¡æ ï¼Œè®¾ç½®â€”&gt;éšç§â€”&gt;æ´»åŠ¨åŽ†å²è®°å½•â€”&gt;å°†â€œå…è®¸Windowsä»Žç”µè„‘ä¸­æ”¶é›†æˆ‘çš„æ´»åŠ¨â€å’Œâ€œå…è®¸Windowså°†æˆ‘çš„æ´»åŠ¨ä»Žæ­¤ç”µè„‘åŒæ­¥åˆ°äº‘â€å…³é—­æŽ‰ï¼Œç„¶åŽç‚¹å‡»ä¸‹æ–¹çš„â€œæ¸…é™¤æ´»åŠ¨åŽ†å²è®°å½•â€ï¼Œå¦‚æ­¤ä¾¿èƒ½ç¦ç”¨windows10çš„æ´»åŠ¨åŽ†å²è®°å½•æœåŠ¡å¹¶ä¸”åˆ é™¤æŽ‰å½“å‰äº§ç”Ÿçš„æ´»åŠ¨åŽ†å²è®°å½•ä¿¡æ¯ã€‚ä½†æœ‰ä¸€äº›å˜æˆäº†ç°è‰²çš„æ´»åŠ¨åŽ†å²è®°å½•å¯èƒ½æ— æ³•åˆ é™¤ï¼Œè¿™é‡Œæˆ‘å°±ç»™å¤§å®¶ä¸€ä¸ªè§£å†³æ–¹æ³•ã€‚Windows+RåŽè¾“å…¥â€œgpedit.mscâ€æ‰“å¼€æœ¬åœ°ç»„ç­–ç•¥ç¼–è¾‘å™¨ï¼Œå®šä½è‡³â€œè®¡ç®—æœºé…ç½® - ç®¡ç†æ¨¡æ¿ - ç³»ç»Ÿ - OSç­–ç•¥â€ã€‚åŒå‡»è¯¥é¡¹æ‰“å¼€â€œå¯ç”¨æ´»åŠ¨æºâ€é…ç½®çª—å£ï¼Œä¿®æ”¹ä¸ºâ€œå·²ç¦ç”¨â€ã€‚æ³¨é”€æˆ–é‡å¯ç³»ç»ŸåŽè®¾ç½®ç”Ÿæ•ˆã€‚ç„¶åŽä½ å†ç‚¹å‡»Win10ä»»åŠ¡æ ä¸­çš„â€œä»»åŠ¡è§†å›¾â€æŒ‰é’®ï¼Œå°±ä¼šå‘çŽ°æ—¶é—´è½´ä¸Šè¿™äº›æ— æ³•åˆ é™¤çš„æ´»åŠ¨åŽ†å²è®°å½•å·²ç»ä¸è§äº†ã€‚ç„¶åŽæˆ‘ä»¬å¯ä»¥é€‰æ‹©å†æ¢å¤æ—¶é—´è½´çš„åŠŸèƒ½ï¼Œåªéœ€æŠŠâ€œå¯ç”¨æ´»åŠ¨æºâ€é…ç½®ä¸ºâ€œæœªé…ç½®â€æˆ–â€œå·²å¯ç”¨â€ï¼Œç„¶åŽå†çœ‹æ—¶é—´è½´ä¸Šç°è‰²çš„æ´»åŠ¨åŽ†å²è®°å½•ä¹Ÿæ²¡æœ‰å†å‡ºçŽ°ï¼Œé—®é¢˜è‡ªç„¶è¿Žåˆƒè€Œè§£ã€‚Â¶å››ã€hiberfil.sysã€pagefile.sysã€swapfile.sysWindowsç³»ç»Ÿä¸­ï¼Œåœ¨Cç›˜æ ¹ç›®å½•æœ‰ä¸‰ä¸ªéšè—çš„å—ä¿æŠ¤çš„æ“ä½œç³»ç»Ÿæ–‡ä»¶ï¼šhiberfil.sysã€pagefile.sysã€swapfile.sys ã€‚è¿™å‡ ä¸ªæ–‡ä»¶é€šå¸¸éƒ½æ— æ³•æ‰‹åŠ¨åˆ é™¤ï¼Œå› ä¸ºä»–ä»¬éƒ½æ˜¯ç³»ç»ŸæŸäº›åŠŸèƒ½ä¸‹ä½¿ç”¨åˆ°çš„æ•°æ®æ–‡ä»¶ï¼Œå¯¹åº”åŠŸèƒ½çš„ç³»ç»Ÿç¨‹åºä¼šåœ¨åŽå°å ç”¨å®ƒä»¬ï¼Œæ‰€ä»¥æ— æ³•æ‰‹åŠ¨åˆ é™¤ã€‚å¹¶ä¸”ä¸ºäº†ç›¸å…³åŠŸèƒ½èƒ½å¤Ÿæ­£å¸¸ä½¿ç”¨éƒ½æ˜¯ä¸å»ºè®®åˆ é™¤çš„ï¼Œä½†å¦‚æžœç”¨æˆ·æ˜Žç¡®çŸ¥é“ä¸éœ€è¦è¿™äº›åŠŸèƒ½ä¹Ÿæ˜¯å¯ä»¥é€šè¿‡ç³»ç»Ÿè®¾ç½®æ¥é—´æŽ¥åˆ é™¤ï¼ŒåŒæ—¶è¿˜èƒ½æ ¹æ®ç”¨æˆ·éœ€æ±‚æ¥ä¿®æ”¹æ–‡ä»¶çš„å­˜æ”¾ä½ç½®æˆ–è€…æ–‡ä»¶çš„å¤§å°ç­‰ã€‚ðŸ’â€â™‚ æç¤ºï¼šé€šå¸¸hiberfil.sysã€pagefile.sysã€swapfile.sysè¿™äº›æ–‡ä»¶æ˜¯æ— æ³•æ‰‹åŠ¨åˆ é™¤ï¼Œå³ä½¿é€šè¿‡PEç³»ç»Ÿç­‰å¸¸è§„æ‰‹æ®µå¼ºåˆ¶åˆ é™¤äº†ä½†æ˜¯é‡å¯ç”µè„‘ï¼Œè¿™äº›æ–‡ä»¶åˆä¼šè‡ªåŠ¨é‡æ–°ç”Ÿæˆï¼Œæ‰€ä»¥åˆ ä¸Žä¸åˆ å¹¶æ²¡æœ‰ä»€ä¹ˆæ„ä¹‰ã€‚Â¶hiberfil.sysç³»ç»Ÿä¼‘çœ æ–‡ä»¶ã€‚å…¶æ˜¯Windowsä¼‘çœ åŠŸèƒ½ä½¿ç”¨çš„æ–‡ä»¶ï¼Œå®ƒä¿å­˜äº†è®¡ç®—æœºçš„å†…å­˜å†…å®¹ä»¥ä¾¿äºŽåœ¨æ¢å¤æ—¶é‡æ–°åŠ è½½ã€‚å…¶å¤§å°æœ€å¤§å€¼ç­‰äºŽè®¡ç®—æœºç‰©ç†å†…å­˜å¤§å°ï¼Œå®žé™…å¤§å°ç­‰äºŽè®¡ç®—æœºç‰©ç†å†…å­˜ä¸­æ´»åŠ¨çš„å†…å­˜çš„å¤§å°ã€‚ç”¨æˆ·å¯ä»¥é€šè¿‡å¼€å…³ç³»ç»Ÿä¼‘çœ åŠŸèƒ½æ¥æ“æŽ§è¯¥æ–‡ä»¶çš„ç”Ÿæˆå’Œåˆ é™¤ã€‚ä»¥ç®¡ç†å‘˜èº«ä»½è¿è¡Œç»ˆç«¯ï¼Œç„¶åŽè¾“å…¥å¦‚ä¸‹å‘½ä»¤ï¼š1234#å¼€å¯powercfg.exe /hibernate on#å…³é—­powercfg.exe /hibernate offÂ¶pagefile.sysè™šæ‹Ÿå†…å­˜åˆ†é¡µæ–‡ä»¶ã€‚å…¶æ˜¯Windowsè™šæ‹Ÿå†…å­˜ä½¿ç”¨çš„æ–‡ä»¶ï¼Œå®ƒå……å½“äº†ç‰©ç†å†…å­˜çš„å¤‡ç”¨å­˜å‚¨å™¨ï¼Œå¹¶ç”¨äºŽç¼“è§£ç³»ç»Ÿå†…å­˜åŽ‹åŠ›ã€‚å…¶å¤§å°æœ€å¤§å€¼é€šå¸¸è®¾ç½®ä¸ºç‰©ç†å†…å­˜å¤§å°çš„1.5å€æˆ–2å€ï¼Œå®žé™…å¤§å°é€šå¸¸ä¼šéšç€è®¡ç®—æœºçš„ä½¿ç”¨æƒ…å†µè€Œå˜åŒ–ã€‚ç”¨æˆ·å¯ä»¥é€šè¿‡æ‰‹åŠ¨é…ç½®è™šæ‹Ÿå†…å­˜æ¥åˆ é™¤åˆ†é¡µæ–‡ä»¶ã€è®¾ç½®åˆ†é¡µæ–‡ä»¶å¤§å°æˆ–å­˜æ”¾ä½ç½®ç­‰ã€‚Â¶è™šæ‹Ÿå†…å­˜é»˜è®¤ç³»ç»Ÿé…ç½®é»˜è®¤ç³»ç»Ÿä½¿ç”¨Cç›˜æ‰˜ç®¡è™šæ‹Ÿå†…å­˜å¹¶å­˜å‚¨åˆ†é¡µæ–‡ä»¶ï¼Œå¹¶ä¸”è‡ªåŠ¨ç®¡ç†è™šæ‹Ÿå†…å­˜å’Œåˆ†é¡µæ–‡ä»¶å¤§å°ã€‚å¦‚ä¸‹å›¾ï¼šÂ¶ç¦ç”¨è™šæ‹Ÿå†…å­˜ç¦ç”¨è™šæ‹Ÿå†…å­˜å³å–æ¶ˆè™šæ‹Ÿå†…å­˜åœ¨ç³»ç»Ÿåˆ†åŒºçš„æ‰˜ç®¡ã€‚ï¼ˆç¦ç”¨å®Œæˆå¹¶é‡å¯ç³»ç»ŸåŽï¼Œç³»ç»Ÿå°†è‡ªåŠ¨åˆ é™¤pagefile.sysåˆ†é¡µæ–‡ä»¶ï¼‰ã€‚Â¶ä¿®æ”¹è™šæ‹Ÿå†…å­˜ä½ç½®é¦–å…ˆå–æ¶ˆè™šæ‹Ÿå†…å­˜åœ¨åŽŸæœ¬åˆ†åŒºï¼ˆå¦‚Cç›˜ï¼‰ä¸Šçš„æ‰˜ç®¡ï¼Œç„¶åŽå†è®¾ç½®æ‰˜ç®¡åˆ°å…¶ä»–ç›˜ç¬¦ï¼ˆæ¯”å¦‚Dç›˜ï¼‰ï¼Œæ“ä½œå¦‚ä¸‹ï¼šÂ¶è‡ªå®šä¹‰è™šæ‹Ÿå†…å­˜å¤§å°å¯ä»¥è‡ªå®šä¹‰è™šæ‹Ÿå†…å­˜åˆå§‹å¤§å°ä»¥åŠæœ€å¤§å€¼ï¼ˆå¯¹åº”çš„åˆ†é¡µæ–‡ä»¶å¾—å¤§å°ä¹Ÿä¼šéšç€è™šæ‹Ÿå†…å­˜å®žé™…æ´»åŠ¨å¤§å°å˜åŒ–è€Œè‡ªåŠ¨å˜åŒ–ï¼‰ã€‚æ“ä½œå¦‚ä¸‹ï¼šä»¥ä¸Šè‡ªå®šä¹‰äº†è™šæ‹Ÿå†…å­˜çš„åˆå§‹å¤§å°ä¸º2048MBï¼ˆ2GBï¼‰ï¼Œæœ€å¤§å€¼ä¸º4096MBï¼ˆå³4GBï¼‰ã€‚è™šæ‹Ÿå†…å­˜çš„å¤§å°åº”è¯¥æ ¹æ®è®¡ç®—æœºçš„ç¡¬ä»¶é…ç½®å’Œå®žé™…éœ€æ±‚è¿›è¡Œé€‚å½“è°ƒæ•´ã€‚å¦‚æžœå°†è™šæ‹Ÿå†…å­˜è®¾ç½®å¾—å¤ªå°ï¼Œåˆ™å¯èƒ½ä¼šå¯¼è‡´ç³»ç»Ÿå´©æºƒæˆ–è€…è¿è¡ŒæŸäº›åº”ç”¨ç¨‹åºæ—¶å‡ºçŽ°é”™è¯¯ã€‚è€Œå¦‚æžœå°†è™šæ‹Ÿå†…å­˜è®¾ç½®å¾—å¤ªå¤§ï¼Œåˆ™å¯èƒ½ä¼šæµªè´¹ç£ç›˜ç©ºé—´å¹¶å½±å“ç³»ç»Ÿæ€§èƒ½ã€‚ä»¥ä¸‹æ˜¯ä¸€äº›å»ºè®®çš„è™šæ‹Ÿå†…å­˜è®¾ç½®å¤§å°ï¼šå¦‚æžœæœ‰4GBæˆ–æ›´å°‘çš„RAMï¼Œé‚£ä¹ˆå»ºè®®å°†è™šæ‹Ÿå†…å­˜è®¾ç½®ä¸ºRAMå¤§å°çš„1.5å€ã€‚å¦‚æžœæœ‰8GBæˆ–æ›´å¤šçš„RAMï¼Œé‚£ä¹ˆå»ºè®®å°†è™šæ‹Ÿå†…å­˜è®¾ç½®ä¸ºRAMå¤§å°çš„1å€ã€‚å¦‚æžœä½¿ç”¨è®¡ç®—æœºä¸Šçš„å¤§åž‹ç¨‹åºæˆ–è¿›è¡Œå¤§é‡æ•°æ®å¤„ç†å·¥ä½œï¼Œé‚£ä¹ˆå»ºè®®å°†è™šæ‹Ÿå†…å­˜è®¾ç½®ä¸ºRAMå¤§å°çš„2è‡³3å€ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè™šæ‹Ÿå†…å­˜è®¾ç½®çš„å¤§å°å¯¹äºŽæ¯ä¸ªè®¡ç®—æœºéƒ½å¯èƒ½ä¸åŒï¼Œå› æ­¤æ‚¨åº”è¯¥æ ¹æ®è‡ªå·±çš„å®žé™…éœ€æ±‚è¿›è¡Œé€‚å½“è°ƒæ•´ã€‚åœ¨è®¾ç½®è™šæ‹Ÿå†…å­˜å¤§å°ä¹‹å‰ï¼Œå»ºè®®å…ˆäº†è§£è‡ªå·±çš„è®¡ç®—æœºç¡¬ä»¶é…ç½®ã€æ­£åœ¨è¿è¡Œçš„åº”ç”¨ç¨‹åºå’Œä»»åŠ¡ä»¥åŠå¯ç”¨ç£ç›˜ç©ºé—´ï¼Œä»Žè€Œç¡®å®šåˆé€‚çš„è™šæ‹Ÿå†…å­˜å¤§å°ã€‚è™šæ‹Ÿå†…å­˜çš„è®¾ç½®ä¹Ÿå¯ä»¥é€šè¿‡è®©Windowsè‡ªåŠ¨ç®¡ç†æ¥é¿å…æ‰‹åŠ¨è®¾ç½®å¤§å°ã€‚Windowsé€šå¸¸ä¼šæ ¹æ®è®¡ç®—æœºçš„ç¡¬ä»¶é…ç½®å’Œä½¿ç”¨æƒ…å†µè‡ªåŠ¨ç®¡ç†è™šæ‹Ÿå†…å­˜ï¼Œä»¥ç¡®ä¿ç³»ç»Ÿçš„ç¨³å®šæ€§å’Œæ€§èƒ½ã€‚Â¶swapfile.sysè™šæ‹Ÿå†…å­˜åŽ‹ç¼©æ–‡ä»¶ï¼ˆè™šæ‹Ÿå†…å­˜äº¤æ¢æ–‡ä»¶ï¼‰ã€‚è¿™ä¸ªæ–‡ä»¶æ˜¯Windows 10ä¹‹åŽå¼•å…¥çš„å¦ä¸€ä¸ªè™šæ‹Ÿå†…å­˜ä½¿ç”¨çš„æ–‡ä»¶ï¼Œå®ƒä¹Ÿå……å½“äº†ç‰©ç†å†…å­˜çš„å¤‡ç”¨å­˜å‚¨å™¨ï¼Œå¹¶ç”¨äºŽç¼“è§£ç³»ç»Ÿå†…å­˜åŽ‹åŠ›ã€‚ç³»ç»Ÿå¯ç”¨â€œåŽ‹ç¼©å†…å­˜â€åŠŸèƒ½åŽä¼šåˆ›å»ºswapfile.sysæ–‡ä»¶æ¥å­˜å‚¨åŽ‹ç¼©çš„å†…å­˜é¡µé¢ã€‚å…¶å¤§å°æœ€å¤§å€¼é€šå¸¸è®¾ç½®ä¸ºç‰©ç†å†…å­˜å¤§å°çš„ä¸€åŠï¼Œå®žé™…å¤§å°é€šå¸¸ä¼šéšç€è®¡ç®—æœºçš„ä½¿ç”¨æƒ…å†µè€Œå˜åŒ–ã€‚ç”±Windowsè‡ªåŠ¨ç®¡ç†ä¸èƒ½æ‰‹åŠ¨é…ç½®ç»´æŠ¤ã€‚swapfile.sysé€šå¸¸æ˜¯æ— æ³•æ‰‹åŠ¨åˆ é™¤çš„ï¼Œå³ä½¿èƒ½å¤Ÿå¼ºåˆ¶åˆ é™¤äº†ä½†æ˜¯é‡å¯ç”µè„‘åˆä¼šè‡ªåŠ¨é‡æ–°ç”Ÿæˆï¼Œæ‰€ä»¥åˆ ä¸Žä¸åˆ å¹¶æ²¡æœ‰ä»€ä¹ˆæ„ä¹‰ã€‚Â¶è¯´æ˜Žï¼ˆ1ï¼‰pagefile.syså’Œswapfile.sysçš„åŒºåˆ«pagefile.sysä¸­å­˜å‚¨çš„æ•°æ®å¹¶æ²¡æœ‰è¢«åŽ‹ç¼©ã€‚è€Œswapfile.syså­˜å‚¨çš„æ•°æ®æ˜¯ç»è¿‡åŽ‹ç¼©äº†çš„ã€‚pagefile.syså¯ä»¥è¢«ç”¨æˆ·æ‰‹åŠ¨é…ç½®ç»´æŠ¤ï¼Œè€Œswapfile.sysåˆ™ç”±Windowsè‡ªåŠ¨ç®¡ç†ä¸èƒ½æ‰‹åŠ¨é…ç½®ç»´æŠ¤ã€‚ï¼ˆ2ï¼‰äº¤æ¢é¡µé¢äº¤æ¢é¡µé¢ï¼ˆpagingï¼‰æ˜¯æŒ‡å°†å†…å­˜ä¸­ä¸æ´»åŠ¨çš„æ•°æ®ç§»åŠ¨åˆ°è®¡ç®—æœºç¡¬ç›˜ç­‰è¾…åŠ©å­˜å‚¨å™¨ä¸­ï¼Œä»Žè€Œé‡Šæ”¾ç‰©ç†å†…å­˜ä»¥ä¾›å…¶ä»–ç¨‹åºä½¿ç”¨çš„è¿‡ç¨‹ã€‚è¿™ä¸ªè¿‡ç¨‹æ˜¯æ“ä½œç³»ç»Ÿçš„ä¸€é¡¹é‡è¦åŠŸèƒ½ï¼Œå®ƒå¯ä»¥å¸®åŠ©æ›´æœ‰æ•ˆåœ°ä½¿ç”¨å¯ç”¨å†…å­˜ï¼Œå¹¶å…è®¸è®¡ç®—æœºåŒæ—¶è¿è¡Œæ›´å¤šçš„ç¨‹åºã€‚åœ¨Windowsæ“ä½œç³»ç»Ÿä¸­ï¼Œå½“ç‰©ç†å†…å­˜ä¸è¶³æ—¶ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨å°†éƒ¨åˆ†å†…å­˜ä¸­ä¸æ´»åŠ¨çš„æ•°æ®è½¬ç§»åˆ°è™šæ‹Ÿå†…å­˜æ–‡ä»¶ï¼ˆå¦‚pagefile.syså’Œswapfile.sysï¼‰ï¼Œä»¥ä¾¿ä¸ºæ­£åœ¨ä½¿ç”¨çš„ç¨‹åºæä¾›æ›´å¤šçš„å†…å­˜ã€‚äº¤æ¢é¡µé¢å¯¹äºŽç³»ç»Ÿæ€§èƒ½å’Œç¨³å®šæ€§éƒ½éžå¸¸é‡è¦ï¼Œå› ä¸ºå®ƒå¯ä»¥é¿å…ç”±äºŽå†…å­˜ä¸è¶³å¯¼è‡´çš„ç³»ç»Ÿå´©æºƒå’Œé”™è¯¯ï¼ŒåŒæ—¶ä¹Ÿå¯ä»¥åŠ é€Ÿç³»ç»Ÿå“åº”æ—¶é—´ã€‚ç„¶è€Œï¼Œå½“äº¤æ¢é¡µé¢é¢‘ç¹å‘ç”Ÿæ—¶ï¼Œå¯èƒ½ä¼šå‡ºçŽ°æ€§èƒ½é—®é¢˜ï¼Œå› ä¸ºç¡¬ç›˜çš„è®¿é—®é€Ÿåº¦è¿œä¸åŠå†…å­˜çš„è®¿é—®é€Ÿåº¦ã€‚å› æ­¤ï¼Œæ›´å¥½çš„æ–¹æ³•æ˜¯å°½å¯èƒ½å¢žåŠ è®¡ç®—æœºçš„ç‰©ç†å†…å­˜ï¼Œè¿™æ ·ç³»ç»Ÿå°±ä¸éœ€è¦é¢‘ç¹åœ°è¿›è¡Œäº¤æ¢é¡µé¢æ“ä½œäº†ã€‚ï¼ˆ3ï¼‰ç¦ç”¨è™šæ‹Ÿå†…å­˜ä¸ºä»€ä¹ˆè¿˜ä¼šæœ‰pagefile.sysæ–‡ä»¶ï¼Ÿå½“æ‚¨ç¦ç”¨è™šæ‹Ÿå†…å­˜æ—¶ï¼Œç³»ç»Ÿä¼šå°½é‡é¿å…å°†æ•°æ®å†™å…¥pagefile.sysæ–‡ä»¶ã€‚ä½†æ˜¯ä¸ä¸€å®šä¼šè‡ªåŠ¨åˆ é™¤è¯¥æ–‡ä»¶ï¼Œè¿™æ˜¯å› ä¸ºè¯¥æ–‡ä»¶ä¸ä»…ç”¨ä½œè™šæ‹Ÿå†…å­˜çš„å¤‡ä»½å­˜å‚¨å™¨ï¼Œè¿˜å¯ä»¥åŒ…å«ä¸€äº›ä¸´æ—¶æ•°æ®å’Œç³»ç»ŸçŠ¶æ€ä¿¡æ¯ï¼Œä¾‹å¦‚å´©æºƒè½¬å‚¨æ–‡ä»¶ã€æ ¸å¿ƒè½¬å‚¨æ–‡ä»¶ç­‰ã€‚åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œä¾‹å¦‚è¿è¡ŒæŸäº›åº”ç”¨ç¨‹åºã€å®‰è£…æ›´æ–°æˆ–è¿›è¡Œç³»ç»Ÿç»´æŠ¤æ“ä½œæ—¶ï¼Œç³»ç»Ÿå¯èƒ½éœ€è¦åœ¨pagefile.sysæ–‡ä»¶ä¸­å†™å…¥æ•°æ®ã€‚æ­¤å¤–ï¼Œå³ä½¿æ‚¨ç¦ç”¨äº†è™šæ‹Ÿå†…å­˜å¹¶åˆ é™¤äº†pagefile.sysæ–‡ä»¶ï¼Œç³»ç»Ÿä¹Ÿå¯ä»¥é‡æ–°åˆ›å»ºè¯¥æ–‡ä»¶ã€‚ä¾‹å¦‚ï¼Œå¦‚æžœæ‚¨å¯ç”¨äº†ç³»ç»Ÿè¿˜åŽŸåŠŸèƒ½ï¼Œåˆ™ç³»ç»Ÿå¯èƒ½ä¼šä½¿ç”¨pagefile.sysæ–‡ä»¶æ¥å­˜å‚¨è¿˜åŽŸç‚¹æ•°æ®ã€‚Â¶å‚è€ƒhttps://www.zhihu.com/tardis/zm/art/87565681?source_id=1003]]></content>
      <categories>
        <category>windows</category>
      </categories>
      <tags>
        <tag>windows</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å¾®ä¿¡å°ç¨‹åºå­¦ä¹ ç¬”è®°]]></title>
    <url>%2Fmobile%2Fwx.html</url>
    <content type="text"><![CDATA[Â¶2. çŽ¯å¢ƒå‡†å¤‡Â¶2.1 æ³¨å†Œè´¦å·å»ºè®®ä½¿ç”¨å…¨æ–°çš„é‚®ç®±ï¼Œæ²¡æœ‰æ³¨å†Œè¿‡å…¶ä»–å°ç¨‹åºæˆ–è€…å…¬ä¼—å·çš„ã€‚è®¿é—®æ³¨å†Œé¡µé¢ï¼Œè€å¿ƒå®Œæˆæ³¨å†Œå³å¯ã€‚Â¶2.2 èŽ·å–APPIDç”±äºŽåŽæœŸè°ƒç”¨å¾®ä¿¡å°ç¨‹åºçš„æŽ¥â¼ç­‰åŠŸèƒ½ï¼Œéœ€è¦ç´¢å–å¼€å‘è€…çš„å°ç¨‹åºä¸­çš„ APPIDï¼Œæ‰€ä»¥åœ¨æ³¨å†ŒæˆåŠŸåŽï¼Œå¯ç™»å½•ï¼Œç„¶åŽèŽ·å–APPIDã€‚ç™»å½•ï¼ŒæˆåŠŸåŽå¯çœ‹åˆ°å¦‚ä¸‹ç•Œâ¾¯ã€‚Â¶2.3 å¼€å‘å·¥å…·ä¸‹è½½åœ°å€å¾®ä¿¡å°ç¨‹åºè‡ªå¸¦å¼€å‘è€…å·¥å…·ï¼Œé›†å¼€å‘ã€é¢„è§ˆã€è°ƒè¯•ã€å‘å¸ƒã€äºŽä¸€èº«çš„å®Œæ•´å¼€å‘çŽ¯å¢ƒã€‚Â¶3. ç¬¬ä¸€ä¸ªå¾®ä¿¡å°ç¨‹åºæ³¨æ„ï¼šæ‰“å¼€å¾®ä¿¡å¼€å‘è€…å·¥å…·ï¼Œç¬¬â¼€æ¬¡ç™»å½•çš„æ—¶å€™æ˜¯éœ€è¦å¾®ä¿¡æ‰«ç ç™»å½•çš„ã€‚Â¶4. å°ç¨‹åºé¡¹ç›®ç»“æž„Â¶4.1 æ–‡ä»¶ç±»åž‹å°ç¨‹åºæ¡†æž¶æä¾›äº†è‡ªå·±çš„è§†å›¾å±‚æè¿°è¯­â¾”WXMLã€WXMLã€ WXSSä»¥åŠJavaScriptï¼Œå¹¶åœ¨è§†å›¾å±‚ä¸Žé€»è¾‘å±‚é—´æä¾›äº†æ•°æ®ä¼ è¾“å’Œäº‹ä»¶ç³»ç»Ÿï¼Œè®©å¼€å‘è€…èƒ½å¤Ÿä¸“æ³¨äºŽæ•°æ®ä¸Žé€»è¾‘ã€‚ç»“æž„ä¼ ç»Ÿwebå¾®ä¿¡å°ç¨‹åºæ ‡ç­¾è¯­è¨€HTMLWXMLæ ·å¼CSSWXSSé€»è¾‘JavascriptJavascripté…ç½®æ— JSONÂ¶4.2 é¡¹ç›®ç›®å½•Â¶4.3 é…ç½®æ–‡ä»¶ä¸€ä¸ªå°ç¨‹åºåº”â½¤ç¨‹åºä¼šåŒ…æ‹¬æœ€åŸºæœ¬çš„ä¸¤ç§é…ç½®â½‚ä»¶ã€‚å…¨å±€é…ç½®æ–‡ä»¶app.jsonå’Œé¡µé¢é…ç½®æ–‡ä»¶page.jsonæ³¨æ„ï¼šé…ç½®æ–‡ä»¶ä¸­ä¸èƒ½å‡ºçŽ°æ³¨é‡ŠÂ¶4.3.1 å…¨å±€é…ç½®å…¨å±€é…ç½®å¯ä»¥å®šä¹‰æ‰€æœ‰é¡µé¢çš„â¼€äº›å…±åŒå±žæ€§ï¼Œå¦‚é¡¶éƒ¨é¢œè‰²ã€æ˜¯å¦å…è®¸ä¸‹æ‹‰åˆ·æ–°ç­‰ç­‰ã€‚app.json1234567891011121314&#123; "pages":[ "pages/index/index", "pages/logs/logs" ], "window":&#123; "backgroundTextStyle":"light", "navigationBarBackgroundColor": "#fff", "navigationBarTitleText": "Weixin", "navigationBarTextStyle":"black" &#125;, "style": "v2", "sitemapLocation": "sitemap.json"&#125;ï¼ˆ1ï¼‰pagesç”¨äºŽæè¿°å½“å‰å°ç¨‹åºæ‰€æœ‰é¡µé¢çš„è·¯å¾„ï¼Œè¿™æ˜¯ä¸ºäº†è®©å¾®ä¿¡å®¢æˆ·ç«¯çŸ¥é“å½“å‰ä½ çš„å°ç¨‹åºé¡µé¢å®šä¹‰åœ¨å“ªä¸ªâ½¬å½•ã€‚ï¼ˆ2ï¼‰windowå®šä¹‰å°ç¨‹åºæ‰€æœ‰é¡µé¢çš„é¡¶éƒ¨èƒŒæ™¯é¢œè‰²ï¼Œæ–‡å­—é¢œè‰²å®šä¹‰ç­‰ã€‚ï¼ˆ3ï¼‰tabBarå¦‚æžœå°ç¨‹åºæ˜¯ä¸€ä¸ªå¤š tab åº”ç”¨ï¼ˆå®¢æˆ·ç«¯çª—å£çš„åº•éƒ¨æˆ–é¡¶éƒ¨æœ‰ tab æ å¯ä»¥åˆ‡æ¢é¡µé¢ï¼‰ï¼Œå¯ä»¥é€šè¿‡ tabBar é…ç½®é¡¹æŒ‡å®š tab æ çš„è¡¨çŽ°ï¼Œä»¥åŠ tab åˆ‡æ¢æ—¶æ˜¾ç¤ºçš„å¯¹åº”é¡µé¢ã€‚å±žæ€§ç±»åž‹å¿…å¡«é»˜è®¤å€¼æè¿°æœ€ä½Žç‰ˆæœ¬colorHexColoræ˜¯tab ä¸Šçš„æ–‡å­—é»˜è®¤é¢œè‰²ï¼Œä»…æ”¯æŒåå…­è¿›åˆ¶é¢œè‰²selectedColorHexColoræ˜¯tab ä¸Šçš„æ–‡å­—é€‰ä¸­æ—¶çš„é¢œè‰²ï¼Œä»…æ”¯æŒåå…­è¿›åˆ¶é¢œè‰²backgroundColorHexColoræ˜¯tab çš„èƒŒæ™¯è‰²ï¼Œä»…æ”¯æŒåå…­è¿›åˆ¶é¢œè‰²borderStylestringå¦blacktabbar ä¸Šè¾¹æ¡†çš„é¢œè‰²ï¼Œ ä»…æ”¯æŒ black / whitelistArrayæ˜¯tab çš„åˆ—è¡¨ï¼Œè¯¦è§ list å±žæ€§è¯´æ˜Žï¼Œæœ€å°‘ 2 ä¸ªã€æœ€å¤š 5 ä¸ª tabpositionstringå¦bottomtabBar çš„ä½ç½®ï¼Œä»…æ”¯æŒ bottom / topcustombooleanå¦falseè‡ªå®šä¹‰ tabBarï¼Œè§è¯¦æƒ…2.5.0å…¶ä¸­ list æŽ¥å—ä¸€ä¸ªæ•°ç»„ï¼Œåªèƒ½é…ç½®æœ€å°‘ 2 ä¸ªã€æœ€å¤š 5 ä¸ª tabã€‚tab æŒ‰æ•°ç»„çš„é¡ºåºæŽ’åºï¼Œæ¯ä¸ªé¡¹éƒ½æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå…¶å±žæ€§å€¼å¦‚ä¸‹ï¼šå±žæ€§ç±»åž‹å¿…å¡«è¯´æ˜ŽpagePathstringæ˜¯é¡µé¢è·¯å¾„ï¼Œå¿…é¡»åœ¨ pages ä¸­å…ˆå®šä¹‰textstringæ˜¯tab ä¸ŠæŒ‰é’®æ–‡å­—iconPathstringå¦å›¾ç‰‡è·¯å¾„ï¼Œicon å¤§å°é™åˆ¶ä¸º 40kbï¼Œå»ºè®®å°ºå¯¸ä¸º 81px * 81pxï¼Œä¸æ”¯æŒç½‘ç»œå›¾ç‰‡ã€‚ å½“ position ä¸º top æ—¶ï¼Œä¸æ˜¾ç¤º iconã€‚selectedIconPathstringå¦é€‰ä¸­æ—¶çš„å›¾ç‰‡è·¯å¾„ï¼Œicon å¤§å°é™åˆ¶ä¸º 40kbï¼Œå»ºè®®å°ºå¯¸ä¸º 81px * 81pxï¼Œä¸æ”¯æŒç½‘ç»œå›¾ç‰‡ã€‚ å½“ position ä¸º top æ—¶ï¼Œä¸æ˜¾ç¤º iconã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªç®€å•çš„tabBaré…ç½®æ¡ˆä¾‹ï¼š123456789101112131415161718192021222324252627282930&#123; "pages":[ "pages/index/index", "pages/logs/logs" ], "window":&#123; "backgroundTextStyle":"light", "navigationBarBackgroundColor": "#fff", "navigationBarTitleText": "Weixin", "navigationBarTextStyle":"black" &#125;, "tabBar": &#123; "list": [&#123; "pagePath": "pages/index/index", "text": "ä¸»é¡µ", "iconPath": "icon/_home.png", "selectedIconPath": "icon/home.png" &#125;, &#123; "pagePath": "pages/logs/logs", "text": "æ—¥å¿—", "iconPath": "icon/_img.png", "selectedIconPath": "icon/img.png" &#125;], "color": "#0094ff", "selectedColor": "#ff9400" &#125;, "style": "v2", "sitemapLocation": "sitemap.json"&#125;Â¶4.3.2 é¡µé¢é…ç½®æ¯ä¸€ä¸ªå°ç¨‹åºé¡µé¢ä¹Ÿå¯ä»¥ä½¿ç”¨ .json æ–‡ä»¶æ¥å¯¹æœ¬é¡µé¢çš„çª—å£è¡¨çŽ°è¿›è¡Œé…ç½®ã€‚é¡µé¢ä¸­é…ç½®é¡¹åœ¨å½“å‰é¡µé¢ä¼šè¦†ç›– app.json çš„ window ä¸­ç›¸åŒçš„é…ç½®é¡¹ã€‚ä¸‹é¢æ˜¯pages/index/index.jsonç®€å•çš„é…ç½®æ¡ˆä¾‹ï¼š123456789&#123; "usingComponents": &#123;&#125;, "navigationBarBackgroundColor": "#0094aa", "navigationBarTextStyle": "black", "navigationBarTitleText": "é¦–é¡µ", "enablePullDownRefresh": true, "backgroundTextStyle": "light", "backgroundColor": "#2894FF"&#125;é¡µé¢é…ç½®ä¸­åªèƒ½è®¾ç½® app.json ä¸­ window å¯¹åº”çš„é…ç½®é¡¹ï¼Œä»¥å†³å®šæœ¬é¡µé¢çš„çª—å£è¡¨çŽ°ï¼Œæ‰€ä»¥æ— éœ€å†™ window è¿™ä¸ªå±žæ€§ã€‚å®Œæ•´é…ç½®ä¿¡æ¯å¯å‚è€ƒå®˜ç½‘page.jsoné…ç½®ã€‚Â¶4.4 sitemapå°ç¨‹åºæ ¹ç›®å½•ä¸‹çš„ sitemap.json æ–‡ä»¶ç”¨äºŽé…ç½®å°ç¨‹åºåŠå…¶é¡µé¢æ˜¯å¦å…è®¸è¢«å¾®ä¿¡ç´¢å¼•ï¼Œæ–‡ä»¶å†…å®¹ä¸ºä¸€ä¸ª JSON å¯¹è±¡ï¼Œå¦‚æžœæ²¡æœ‰ sitemap.json ï¼Œåˆ™é»˜è®¤ä¸ºæ‰€æœ‰é¡µé¢éƒ½å…è®¸è¢«ç´¢å¼•ã€‚è¯¦ç»†ä»‹ç»è§å®˜ç½‘ï¼šsitemap é…ç½®Â¶5. æ¨¡æ¿è¯­æ³•WXMLï¼ˆWeiXin Markup Languageï¼‰æ˜¯æ¡†æž¶è®¾è®¡çš„ä¸€å¥—æ ‡ç­¾è¯­è¨€ï¼Œç»“åˆåŸºç¡€ç»„ä»¶ã€äº‹ä»¶ç³»ç»Ÿï¼Œå¯ä»¥æž„å»ºå‡ºé¡µé¢çš„ç»“æž„ã€‚Â¶5.1 æ•°æ®ç»‘å®šÂ¶5.1.1 ç®€å•ç»‘å®šæ•°æ®ç»‘å®šä½¿ç”¨ Mustache è¯­æ³•ï¼ˆåŒå¤§æ‹¬å·ï¼‰å°†å˜é‡åŒ…èµ·æ¥ï¼Œå¯ä»¥ä½œç”¨äºŽï¼šå†…å®¹1&lt;view&gt; &#123;&#123; message &#125;&#125; &lt;/view&gt;12345Page(&#123; data: &#123; message: 'Hello MINA!' &#125;&#125;)Â¶5.1.2 ç»„ä»¶å±žæ€§(éœ€è¦åœ¨åŒå¼•å·ä¹‹å†…)1&lt;view id="item-&#123;&#123;id&#125;&#125;"&gt; &lt;/view&gt;12345Page(&#123; data: &#123; id: 0 &#125;&#125;)Â¶5.1.3 æŽ§åˆ¶å±žæ€§(éœ€è¦åœ¨åŒå¼•å·ä¹‹å†…)12&lt;view wx:if="&#123;&#123;condition&#125;&#125;"&gt; hi &lt;/view&gt;&lt;checkbox checked="&#123;&#123;condition&#125;&#125;"&gt; &lt;/checkbox&gt;12345Page(&#123; data: &#123; condition: true &#125;&#125;)Â¶5.1.4 ç»¼åˆæ¡ˆä¾‹pages/index/index.js1234567891011Page(&#123; /** * é¡µé¢çš„åˆå§‹æ•°æ® */ data: &#123; message: 'Hello MINA!', id: 0, condition: true &#125;&#125;)pages/index/index.wxml12345&lt;!--index.wxml--&gt;&lt;view&gt; &#123;&#123; message &#125;&#125; &lt;/view&gt;&lt;view id="item-&#123;&#123;id&#125;&#125;"&gt; &lt;/view&gt;&lt;view wx:if="&#123;&#123;condition&#125;&#125;"&gt; hi &lt;/view&gt;&lt;checkbox checked="&#123;&#123;condition&#125;&#125;"&gt; &lt;/checkbox&gt;Â¶5.2 åˆ—è¡¨æ¸²æŸ“Â¶5.3 æ¡ä»¶æ¸²æŸ“]]></content>
      <categories>
        <category>mobile</category>
      </categories>
      <tags>
        <tag>å¾®ä¿¡å°ç¨‹åº</tag>
        <tag>mobile</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[EasyUIå­¦ä¹ ç¬”è®°]]></title>
    <url>%2Ffront%2Flearn_easyui.html</url>
    <content type="text"><![CDATA[Â¶EasyUI ç®€ä»‹easyuiæ˜¯ä¸€ç§åŸºäºŽjQueryã€Angular.ã€Vueå’ŒReactçš„ç”¨æˆ·ç•Œé¢æ’ä»¶é›†åˆï¼ˆæœ¬æ•™ç¨‹åªè®²è§£åŸºäºŽjQueryçš„easyuiï¼‰ã€‚easyuiä¸ºåˆ›å»ºçŽ°ä»£åŒ–ï¼Œäº’åŠ¨ï¼ŒJavaScriptåº”ç”¨ç¨‹åºï¼Œæä¾›å¿…è¦çš„åŠŸèƒ½ã€‚ä½¿ç”¨easyuiä½ ä¸éœ€è¦å†™å¾ˆå¤šä»£ç ï¼Œä½ åªéœ€è¦é€šè¿‡ç¼–å†™ä¸€äº›ç®€å•HTMLæ ‡è®°ï¼Œå°±å¯ä»¥å®šä¹‰ç”¨æˆ·ç•Œé¢ã€‚easyuiæ˜¯ä¸ªå®Œç¾Žæ”¯æŒHTML5ç½‘é¡µçš„å®Œæ•´æ¡†æž¶ã€‚easyuièŠ‚çœæ‚¨ç½‘é¡µå¼€å‘çš„æ—¶é—´å’Œè§„æ¨¡ã€‚easyuiå¾ˆç®€å•ä½†åŠŸèƒ½å¼ºå¤§çš„ã€‚EasyUIå®˜ç½‘ä¸‹è½½åœ°å€:http://www.jeasyui.net/download/jquery.htmlå®˜æ–¹æ–‡æ¡£:http://www.jeasyui.net/pluginså¦‚ä½•åœ¨javawebé¡¹ç›®ä¸­å¯¼å…¥easyuiï¼Ÿä»¥eclipseä¸ºä¾‹ï¼šÂ¶1. å¯¼å…¥easyuiÂ¶2. åœ¨htmlæˆ–è€…jspé¡µé¢ä»£ç ä¸­å¯¼å…¥ç›¸å…³csså’Œjsã€‚åœ¨&lt;head&gt;æ ‡ç­¾é‡Œå¯¼å…¥ä¸€ä¸‹ä»£ç ï¼š12345678910&lt;!-- å¯¼å…¥ä¸»é¢˜æ ·å¼ --&gt;&lt;link rel="stylesheet" type="text/css" href="easyui-1.6.11/themes/default/easyui.css"&gt;&lt;!-- å¯¼å…¥å›¾æ ‡æ ·å¼ --&gt;&lt;link rel="stylesheet" type="text/css" href="easyui-1.6.11/themes/icon.css"&gt;&lt;!-- å¯¼å…¥jqury --&gt;&lt;script type="text/javascript" src="easyui-1.6.11/jquery.min.js"&gt;&lt;/script&gt;&lt;!-- å¯¼å…¥easyui --&gt;&lt;script type="text/javascript" src="easyui-1.6.11/jquery.easyui.min.js"&gt;&lt;/script&gt;&lt;!-- å¯¼å…¥è¯­è¨€è®¾ç½® --&gt;&lt;script type="text/javascript" src="easyui-1.6.11/locale/easyui-lang-zh_CN.js"&gt;&lt;/script&gt;Â¶3. åˆ›å»ºå’Œåˆå§‹åŒ–ç»„ä»¶easyuiæœ‰ä¸¤ç§æ–¹å¼å¯ä»¥å£°æ˜Žå’Œä½¿ç”¨ UI ç»„ä»¶ã€‚Â¶ç¬¬ä¸€ç§åˆ›å»ºç»„ä»¶ï¼š ç»™å…ƒç´ æ ‡ç­¾æ·»åŠ ç±»æ ·å¼å±žæ€§ classï¼ˆç”¨æ¥æŒ‡å®šç»„ä»¶ç±»åž‹ï¼‰åŽŸç†:easyuiä¼šåŽ»é¡µé¢ä¸Šå¯»æ‰¾æ¯ä¸€ä¸ªå…ƒç´ ï¼Œçœ‹æ˜¯å¦å«æœ‰easyuiå¼€å¤´çš„classå±žæ€§ï¼Œå¦‚æžœæœ‰åˆ™å°†è¿™ä¸ªå…ƒç´ å®‰è£…è¯¥classå±žæ€§å°†å…ƒç´ æ¸²æŸ“ä¸ºå¯¹åº”çš„ç»„ä»¶ã€‚æ ¼å¼ï¼š1&lt;div class="easyui-ç»„ä»¶å" &gt;&lt;/div&gt;å¦‚ä¸‹ï¼š1&lt;div class="easyui-window" &gt;&lt;/div&gt;åˆå§‹åŒ–ç»„ä»¶ï¼š ç»™å…ƒç´ æ ‡ç­¾æ·»åŠ æ•°æ®é€‰é¡¹å±žæ€§data-optionsï¼ˆç”¨æ¥åˆå§‹åŒ–ç»„ä»¶ï¼‰æ ¼å¼ï¼š1&lt;div class="easyui-window" data-options="key1:value1,key2:value2"&gt; &lt;/div&gt;å¦‚ä¸‹ï¼š123&lt;div class="easyui-window" data-options="title:'æµ‹è¯•çª—å£',width:500,height:400,iconCls:'icon-save',minimizable:false,left:500"&gt; test EasyUI window&lt;/div&gt;data-optionså±žæ€§å¯ä»¥å®šä¹‰å„ç§ç»„ä»¶çš„æ ·å¼å’Œå†…å®¹åŠäº‹ä»¶,å¯ä»¥é€šè¿‡data-optionsæ¥å®žä¾‹åŒ–ç»„ä»¶Â¶ç¬¬äºŒç§åˆ›å»ºç»„ä»¶ï¼š ç¼–å†™ JS ä»£ç æ¥åˆ›å»ºç»„ä»¶æ ¼å¼ï¼š1$("#mydiv").æ–¹æ³•å();å¦‚ä¸‹ï¼š1234567&lt;div id="mydiv"&gt;&lt;/div&gt;&lt;script type="text/javascript"&gt; $(function() &#123; //é¡µé¢åŠ è½½å®Œ(ä¸åŒ…æ‹¬å›¾ç‰‡åŠ è½½) $("#mydiv").window(); &#125;);&lt;/script&gt;åˆå§‹åŒ–ç»„ä»¶ï¼šæ ¼å¼ï¼š1$("#mydiv").æ–¹æ³•å(&#123;key1:value1,key2:value2&#125;);æ­¤å¤„æ–¹æ³•åä¸€èˆ¬å°±ä¸ºç»„ä»¶åï¼Œæ–¹æ³•ä¼ é€’çš„æ˜¯ä¸€ä¸ªjsonå¯¹è±¡ï¼Œjsonå¯¹è±¡çš„å±žæ€§æ˜¯ä»¥é”®å€¼å¯¹çš„å½¢å¼å­˜åœ¨ï¼Œå¤šä¸ªå±žäºŽä¹‹é—´ç”¨é€—å·éš”å¼€ã€‚å¦‚ä¸‹ï¼š1234567891011121314151617&lt;div id="mydiv"&gt;test EasyUI window&lt;/div&gt;&lt;script type="text/javascript"&gt; $(function() &#123; $("#mydiv").window( //window()æ–¹æ³•å‚æ•°é‡Œå†™jsonæ•°æ®ç±»ä¼¼äºŽæ ‡ç­¾æŒ‡å®šdata-optionså±žæ€§ &#123; title : 'æµ‹è¯•çª—å£', width : 500, height : 400, iconCls : 'icon-save', //çª—å£å›¾æ ‡ minimizable : false, //èƒ½å¦æœ€å°åŒ– left : 500, top : 200, modal : true //æ¨¡å¼çª—å£,trueè¡¨ç¤ºåœ¨å½“å‰çª—å£æ²¡æœ‰å…³é—­å‰ä¸èƒ½æ“ä½œå…¶ä»–çª—å£ &#125;); &#125;);&lt;/script&gt;Â¶4. ç»™ç»„ä»¶åŠ äº‹ä»¶1234$("#mydiv").ç»„ä»¶æ–¹æ³•(&#123; äº‹ä»¶å1:function()&#123;&#125;, äº‹ä»¶å2:function()&#123;&#125;&#125;);1234567891011&lt;div id="mydiv"&gt;test EasyUI window&lt;/div&gt;&lt;script type="text/javascript"&gt; $(function() &#123; $("#mydiv").window(&#123; onOpen : function() &#123;//windowç»§æ‰¿è‡ªPanelï¼Œå¾ˆå¤šäº‹ä»¶ä¹Ÿæ¥è‡ªäºŽPanelã€‚æ¯”å¦‚onOpenäº‹ä»¶ alert("hello"); &#125; &#125;); &#125;);&lt;/script&gt;Â¶5. è°ƒç”¨ç»„ä»¶çš„æ–¹æ³•æ ¼å¼ï¼š1$("#mydiv").ç»„ä»¶æ–¹æ³•("å‡½æ•°å","å‚æ•°å€¼"æˆ–è€…jsonå¯¹è±¡);å¦‚ä¸‹ï¼š1234567891011121314151617181920212223242526272829&lt;body&gt; &lt;div id="mydiv" class="easyui-window" data-options="width:500,height:400"&gt;&lt;/div&gt; &lt;a class="easyui-linkbutton" data-options="iconCls:'icon-tip'" href="javascript:closeWin()"&gt;å…³é—­çª—å£&lt;/a&gt; &lt;a class="easyui-linkbutton" data-options="iconCls:'icon-tip'" href="javascript:setTitleWin()"&gt;ä¿®æ”¹çª—å£æ ‡é¢˜&lt;/a&gt; &lt;a class="easyui-linkbutton" data-options="iconCls:'icon-tip'" href="javascript:resizeWin()"&gt;æ”¹å˜çª—å£å¤§å°&lt;/a&gt;&lt;/body&gt;&lt;script type="text/javascript"&gt; //ç»™windowç»„ä»¶ä¼ å…¥ä¸€ä¸ªcloseçš„æ–¹æ³• function closeWin() &#123; $("#mydiv").window("close"); &#125; //ç»™windowç»„ä»¶ä¼ å…¥ä¸€ä¸ªsetTitleçš„æ–¹æ³•,å¹¶æŒ‡å®šsetTitleæ–¹æ³•çš„å‚æ•°ï¼Œå‚æ•°åªæœ‰ä¸€ä¸ªï¼Œå¯ä»¥ç›´æŽ¥ä»¥å­—ç¬¦ä¸²çš„å½¢å¼ä¼ å…¥ã€‚ function setTitleWin() &#123; $("#mydiv").window("setTitle", "æˆ‘çš„çª—å£"); &#125; //ç»™windowç»„ä»¶ä¼ å…¥ä¸€ä¸ªresizeçš„æ–¹æ³•,å¹¶æŒ‡å®šresizeæ–¹æ³•çš„å‚æ•°ï¼Œå‚æ•°æœ‰å¤šä¸ªçš„æ—¶å€™ï¼Œå¯ä»¥ç”¨jsonå¯¹è±¡çš„å½¢å¼ä¼ å…¥ã€‚ function resizeWin() &#123; $("#mydiv").window("resize", &#123; width : 500, height : 500, top : 0 &#125;); &#125;&lt;/script&gt;]]></content>
      <categories>
        <category>front</category>
      </categories>
      <tags>
        <tag>easyui</tag>
        <tag>javaweb</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ubuntu å®‰è£…vsftpdæœåŠ¡å™¨]]></title>
    <url>%2Fdevops%2Fvsftpd_ubuntu.html</url>
    <content type="text"><![CDATA[Â¶1. å®‰è£…å¹¶å¯åŠ¨ FTP æœåŠ¡å®‰è£… VSFTPDå¯¹äºŽDebianç±»ç³»ç»Ÿ: ä½¿ç”¨apt-get å®‰è£…apt-getå®‰è£…1apt-get install vsftpd -yå¯¹äºŽRedhatç±»ç³»ç»Ÿï¼š1yum install vsftpd -yå¯åŠ¨ VSFTPDå®‰è£…å®ŒæˆåŽï¼Œå¯åŠ¨ FTP æœåŠ¡ï¼š1service vsftpd startå¯åŠ¨åŽï¼Œå¯ä»¥çœ‹åˆ°ç³»ç»Ÿå·²ç»ï¼š1netstat -nltp | grep 21æ­¤æ—¶ï¼Œè®¿é—® ftp://&lt;æ‚¨çš„ CVM IP åœ°å€&gt;å¯æµè§ˆæœºå™¨ä¸Šçš„ /var/ftp ç›®å½•äº†ã€‚FTP åè®®é»˜è®¤ä½¿ç”¨ 21 ç«¯å£ä½œä¸ºæœåŠ¡ç«¯å£Â¶2. é…ç½®è®¿é—®ç›®å½•å’Œæ–°å»ºç”¨æˆ·æ–°å»ºç”¨æˆ·ä¸»ç›®å½•1mkdir /home/uftpæ‰§è¡Œå®ŒåŽï¼Œåœ¨è¿™é‡Œ /home/uftp å°±èƒ½çœ‹åˆ°æ–°å»ºçš„æ–‡ä»¶å¤¹ uftp äº†ã€‚åˆ›å»ºç™»å½•æ¬¢è¿Žæ–‡ä»¶ ï¼š1touch /home/uftp/welcome.txtè®¾ç½®ä¸»ç›®å½•è®¿é—®æƒé™ï¼ˆåªè¯»ï¼‰ï¼š1chmod a-w /home/uftpæ–°å»ºå…¬å…±ç›®å½•ï¼Œå¹¶è®¾ç½®æƒé™ï¼ˆè¯»å†™ï¼‰ï¼š1mkdir /home/uftp/public &amp;&amp; chmod 777 -R /home/uftp/publicæ–°å»ºç”¨æˆ· uftp å¹¶è®¾ç½®å¯†ç åˆ›å»ºä¸€ä¸ªç”¨æˆ· uftp :1useradd -d /home/uftp -s /bin/bash uftpä¸ºç”¨æˆ· uftp è®¾ç½®å¯†ç 1passwd uftpé™åˆ¶ç”¨æˆ· uftp åªèƒ½é€šè¿‡ FTP è®¿é—®æœåŠ¡å™¨ï¼Œè€Œä¸èƒ½ç›´æŽ¥ç™»å½•æœåŠ¡å™¨1usermod -s /sbin/nologin uftpÂ¶3. é…ç½®vsftpdåˆ é™¤æŽ‰ pam.d ä¸­ vsftpdï¼Œå› ä¸ºè¯¥é…ç½®æ–‡ä»¶ä¼šå¯¼è‡´ä½¿ç”¨ç”¨æˆ·åç™»å½• ftp å¤±è´¥ï¼š1rm /etc/pam.d/vsftpdä¿®æ”¹ vsftpd é…ç½®1chmod a+w /etc/vsftpd.confä¿®æ”¹ /etc/vsftpd.conf æ–‡ä»¶ä¸­çš„é…ç½®ä¿®æ”¹:1234# ç¦ç”¨åŒ¿åç”¨æˆ·anonymous_enable=NO# ç¦æ­¢åˆ‡æ¢æ ¹ç›®å½•chroot_local_user=YESå°†å¦‚ä¸‹é…ç½®æ·»åŠ åˆ°é…ç½®æ–‡ä»¶æœ€ä¸‹æ–¹123456789101112131415161718# é™åˆ¶ç”¨æˆ·å¯¹ä¸»ç›®å½•ä»¥å¤–ç›®å½•è®¿é—®chroot_local_user=YES# æŒ‡å®šä¸€ä¸ª userlist å­˜æ”¾å…è®¸è®¿é—® ftp çš„ç”¨æˆ·åˆ—è¡¨userlist_deny=NOuserlist_enable=YES# è®°å½•å…è®¸è®¿é—® ftp ç”¨æˆ·åˆ—è¡¨userlist_file=/etc/vsftpd.user_list# ä¸é…ç½®å¯èƒ½å¯¼è‡´èŽ«åçš„530é—®é¢˜seccomp_sandbox=NO# å…è®¸æ–‡ä»¶ä¸Šä¼ write_enable=YES# ä½¿ç”¨utf8ç¼–ç utf8_filesystem=YESæ–°å»ºæ–‡ä»¶ /etc/vsftpd.user_listï¼Œç”¨äºŽå­˜æ”¾å…è®¸è®¿é—® ftp çš„ç”¨æˆ·ï¼š12touch /etc/vsftpd.user_listchmod a+w /etc/vsftpd.user_listä¿®æ”¹ /etc/vsftpd.user_list ï¼ŒåŠ å…¥åˆšåˆšåˆ›å»ºçš„ç”¨æˆ·ï¼š12vim vsftpd.user_listuftpé‡å¯vsftpd æœåŠ¡ï¼š1service vsftpd restartÂ¶4. è®¿é—® FTP æœåŠ¡FTP æœåŠ¡å·²å®‰è£…å¹¶é…ç½®å®Œæˆï¼Œä¸‹é¢æˆ‘ä»¬æ¥ä½¿ç”¨è¯¥ FTP æœåŠ¡æ ¹æ®æ‚¨ä¸ªäººçš„å·¥ä½œçŽ¯å¢ƒï¼Œé€‰æ‹©ä¸€ç§æ–¹å¼æ¥è®¿é—®å·²ç»æ­å»ºçš„ FTP æœåŠ¡é€šè¿‡ FTP å®¢æˆ·ç«¯å·¥å…·è®¿é—®FTP å®¢æˆ·ç«¯å·¥å…·ä¼—å¤šï¼Œä¸‹é¢æŽ¨èä¸¤ä¸ªå¸¸ç”¨çš„ï¼šFileZilla - è·¨å¹³å°çš„ FTP å®¢æˆ·ç«¯ï¼Œæ”¯æŒ Windows å’Œ MacWinSCP - Windows ä¸‹çš„ FTP å’Œ SFTP è¿žæŽ¥å®¢æˆ·ç«¯ä¸‹è½½å’Œå®‰è£… FTP å®¢æˆ·ç«¯åŽï¼Œä½¿ç”¨ä¸‹é¢çš„å‡­æ®è¿›è¡Œè¿žæŽ¥å³å¯ï¼šä¸»æœºï¼š119.29.174.183 (vpsçš„ip)ç”¨æˆ·ï¼šuftpè¾“å…¥å¯†ç åŽï¼Œå¦‚æžœèƒ½å¤Ÿæ­£å¸¸è¿žæŽ¥ï¼Œé‚£ä¹ˆå¤§åŠŸå‘Šæˆï¼Œæ‚¨å¯ä»¥å¼€å§‹ä½¿ç”¨å±žäºŽæ‚¨è‡ªå·±çš„ FTP æœåŠ¡å™¨äº†ï¼æŽ¥ä¸‹æ¥ï¼Œè¯·ä¸Šä¼ ä»»æ„ä¸€å¼ å›¾ç‰‡åˆ°æ‚¨çš„ FTP æœåŠ¡å™¨ä¸Šçš„ uftp çš„ public ç›®å½•ä¸‹ï¼Œç„¶åŽï¼Œå°±å¯ä»¥åœ¨ /home/uftp/public ä¸­çœ‹åˆ°äº†ã€‚é€šè¿‡ Windows èµ„æºç®¡ç†å™¨è®¿é—®Windows ç”¨æˆ·å¯ä»¥å¤åˆ¶ä¸‹é¢çš„é“¾æŽ¥åˆ°èµ„æºç®¡ç†å™¨çš„åœ°å€æ è®¿é—®ï¼šftp://uftp:ä½ çš„å¯†ç @119.29.174.183å¦‚æžœæ‚¨ç”³è¯·äº†åŸŸåï¼Œå¯ä»¥å°†Ip åœ°å€æ›¿æ¢ä¸ºå¯¹åº”çš„åŸŸåä½œä¸ºè®¿é—®å‡­æ®å¦‚æžœæ‚¨ç”³è¯·äº†åŸŸåï¼Œå¯ä»¥å°†é“¾æŽ¥ä¸­çš„ Ip åœ°å€æ›¿æ¢ä¸ºå¯¹åº”çš„åŸŸåè®¿é—® FTP æœåŠ¡å¤§åŠŸå‘Šæˆæ­å–œï¼æ‚¨å·²ç»æˆåŠŸå®Œæˆäº†æ­å»º FTP æœåŠ¡å™¨çš„å®žéªŒä»»åŠ¡ã€‚]]></content>
      <categories>
        <category>devops</category>
      </categories>
      <tags>
        <tag>ftp</tag>
        <tag>ubuntu</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[apacheé…ç½®sslè¯ä¹¦]]></title>
    <url>%2Fdevops%2Fapache_ssl.html</url>
    <content type="text"><![CDATA[Â¶1. å®‰è£…apacheã€opensslå’Œmod_ssl1$ yum install httpd openssl mod_ssl -yÂ¶2. å¯åŠ¨apacheæœåŠ¡12$ systemctl start httpd # å¯åŠ¨æœåŠ¡$ systemctl enable httpd # è®¾ç½®å¼€æœºå¯åŠ¨Â¶3. æ£€æŸ¥apacheæ˜¯å¦å¯åŠ¨12$ systemctl start httpd # çœ‹åˆ°Active: active (running),è¡¨ç¤ºå¯åŠ¨æˆåŠŸ$ systemctl is-active httpd #è¾“å‡ºactiveè¡¨ç¤ºå¯åŠ¨æˆåŠŸÂ¶4. æŸ¥çœ‹apacheæœåŠ¡å™¨ç½‘ç«™æ ¹ç›®å½•1grep -ri DocumentRoot /etc/httpdæŸ¥çœ‹åˆ°å¦‚ä¸‹æ²¡æœ‰æ‰“#çš„é¡¹å°±æ˜¯ç½‘é¡µ(æ–‡æ¡£)æ ¹ç›®å½•äº†ï¼Œå³/var/www/html/etc/httpd/conf.d/ssl.conf:#DocumentRoot &quot;/var/www/html&quot;/etc/httpd/conf/httpd.conf:# DocumentRoot: The directory out of which you will serve your/etc/httpd/conf/httpd.conf:DocumentRoot &quot;/var/www/html&quot;/etc/httpd/conf/httpd.conf: # access content that does not live under the DocumentRoot.Â¶5. åŸŸåè§£æžè®¾ç½®è§£æžåŸŸå(å¦‚ï¼šexample.com)åˆ°æœåŠ¡å™¨çš„ipåœ°å€ä¸Šï¼Œæ¯”å¦‚æˆ‘è¿™é‡Œæ·»åŠ äº†ä¸¤æ¡è§£æžè®°å½•ã€‚1ã€è§£æžè®°å½•ä¸ºï¼šè®°å½•ç±»åž‹ä¸ºA ï¼Œä¸»æœºè®°å½•ä¸ºä¸º@ ï¼Œè®°å½•å€¼ä¸º144.34.145.102ã€è§£æžè®°å½•ä¸ºï¼šè®°å½•ç±»åž‹ä¸ºA ï¼Œä¸»æœºè®°å½•ä¸ºä¸ºwww ï¼Œè®°å½•å€¼ä¸º144.34.145.10Â¶6. é…ç½® SSL è¯ä¹¦ä»¥ä½¿ç”¨ httpsä¸€èˆ¬åœ°ï¼ŒèŽ·å– SSL è¯ä¹¦æœ‰ä¸¤ç§æ–¹å¼ï¼šè‡ªç­¾åå’Œè´­ä¹° CA é¢å‘çš„ SSL è¯ä¹¦ã€‚è‡ªç­¾åçš„è¯ä¹¦å¯èƒ½ä¼šè¢«æµè§ˆå™¨æ‹¦æˆªå¹¶æç¤ºä¸å—ä¿¡ä»»ï¼Œå› æ­¤å»ºè®®é‡‡ç”¨æ¯”è¾ƒå¯é çš„å•†ä¸šé¢å‘æœºæž„è´­ä¹°ï¼ˆå¦‚ Comodoã€Symantec ç­‰ï¼‰æˆ–è€…å…è´¹çš„ Letâ€™s Encrypt ç­¾å‘çš„è¯ä¹¦ã€‚å¯ä»¥ä½¿ç”¨ certbot å·¥å…·æ¥ç”³è¯·å¾—åˆ°å…è´¹ Letâ€™ s Encrypt SSL è¯ä¹¦ã€‚å…·ä½“æ“ä½œå¯å‚è€ƒã€Šé€šè¿‡certbotå·¥å…·ç”Ÿæˆsslè¯ä¹¦ã€‹ã€‚å‡è®¾è¿™é‡Œå·²ç»ç”³è¯·å¾—åˆ°äº† Letâ€™ s Encrypt SSL è¯ä¹¦ï¼Œä¸‹æ–‡å°†ä»‹ç»å¦‚ä½•åœ¨ apache ä¸­é…ç½® SSL è¯ä¹¦ä»¥ä½¿ç”¨ https ã€‚123456#åˆ›å»ºä¸€ä¸ªç›®å½•æ¥è¡¨ç¤ºç½‘ç«™çš„æ ¹ç›®å½•mkdir -p /var/www/test#åˆ›å»ºä¸€ä¸ªhtmlé™æ€æ–‡ä»¶ä»¥å¾…æµ‹è¯•echo "&lt;h1&gt;Hi, Nginx !&lt;/h1&gt;" &gt;&gt; /var/www/test/index.html#ç¼–è¾‘ apache webè™šæ‹Ÿä¸»æœºé…ç½®æ–‡ä»¶vi /etc/httpd/conf.d/vhost.confæ·»åŠ ä»¥ä¸‹å†…å®¹ï¼š123456789101112131415161718192021222324252627282930&lt;VirtualHost *:80&gt; DocumentRoot "/var/www/test" ServerName example.com ServerAlias www.example.com &lt;Directory "/var/www/test"&gt; Options FollowSymLinks AllowOverride All Require all granted &lt;/Directory&gt;RewriteEngine onRewriteCond %&#123;SERVER_NAME&#125; =example.com [OR]RewriteCond %&#123;SERVER_NAME&#125; =www.example.comRewriteRule ^ https://%&#123;SERVER_NAME&#125;%&#123;REQUEST_URI&#125; [END,NE,R=permanent]&lt;/VirtualHost&gt;&lt;IfModule mod_ssl.c&gt;&lt;VirtualHost *:443&gt; DocumentRoot "/var/www/test" ServerName example.com ServerAlias www.example.com &lt;Directory "/var/www/test"&gt; Options FollowSymLinks AllowOverride All Require all granted &lt;/Directory&gt;SSLCertificateFile /path/cert.pemSSLCertificateKeyFile /path/privkey.pemSSLCertificateChainFile /path/chain.pem&lt;/VirtualHost&gt;&lt;/IfModule&gt;å¦‚æžœæƒ³è¦è®¿é—® example.com åŸŸååœ°å€æ—¶è‡ªåŠ¨é‡å®šå‘åˆ° www.example.com åŸŸååœ°å€ï¼Œåªéœ€è¦ä¿®æ”¹&lt;VirtualHost&gt;ä¸­ç›¸å…³å˜é‡çš„å³å¯ï¼Œä¿®æ”¹å¦‚ä¸‹ï¼š123&gt;RewriteEngine on # urlé‡å®šå‘å¼€å¯&gt;RewriteCond %&#123;SERVER_PORT&#125; !^443$ # æŒ‡å®šè·³è½¬è‡³443ç«¯å£&gt;RewriteRule ^/?(.*)$ https://www.%&#123;SERVER_NAME&#125;/$1 [L,R] # è·³è½¬è‡³https://www.åŸŸå.comçš„urlÂ¶7. é‡å¯apacheæœåŠ¡å™¨1service httpd restart]]></content>
      <categories>
        <category>devops</category>
      </categories>
      <tags>
        <tag>apache</tag>
        <tag>ssl</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[centos7æ­å»ºé‚®ä»¶æœåŠ¡å™¨]]></title>
    <url>%2Fdevops%2Fmail.html</url>
    <content type="text"><![CDATA[æ‹¥æœ‰ä¸€å°æœåŠ¡å™¨ï¼Œç”¨æ¥å¹²å˜›ï¼Ÿæ”¾ç€åƒç°ä¸å°±ç­‰äºŽèŠ±å†¤æž‰é’±å—ï¼Ÿä½•ä¸å……åˆ†å‘æŒ¥å®ƒçš„ä»·å€¼ï¼Œæ¯”å¦‚æ­å»ºä¸€ä¸ªè‡ªå·±çš„é‚®ä»¶æœåŠ¡å™¨ã€‚æ‹¥æœ‰ä¸€ä¸ªè‡ªå·±åŸŸåçš„é‚®ç®±æ˜¯å¯ä»¥è£…Xçš„å“¦ðŸ™…â€â™‚ â€¦Â¶ä¸€ã€é¢„å¤‡çŸ¥è¯†Â¶1. æ¦‚è¿°é‚®ä»¶æ”¶ã€å‘æœåŠ¡å™¨æ˜¯åˆ†å¼€çš„ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬éœ€è¦æ­å»ºä¸€ä¸ªé‚®ä»¶å‘é€æœåŠ¡å™¨å’Œä¸€ä¸ªé‚®ä»¶æ”¶å–æœåŠ¡å™¨ã€‚æœ¬æ–‡ä¼šæ­å»ºæ”¶ã€å‘ä¸¤ä¸ªæœåŠ¡å™¨ï¼Œå¹¶ç”¨é‚®ä»¶å®¢æˆ·ç«¯ï¼ˆFoxmailï¼‰åšæµ‹è¯•ã€‚Â¶2. åè®®åè®®å°±æ˜¯å®šä¹‰è§„åˆ™ï¼Œè¿™é‡Œæ˜¯é‚®ä»¶åè®®ï¼Œå®šä¹‰é‚®ä»¶æ”¶å‘çš„è§„åˆ™ï¼Œäº†è§£è§„åˆ™æœ‰åŠ©äºŽç†è§£è½¯ä»¶çš„é…ç½®æ–‡ä»¶ã€‚é‚®ä»¶å‘é€åè®® SMTPï¼ˆSimple Mail Transfer Protocolï¼‰ï¼Œé»˜è®¤ç«¯å£ä¸º25ã€‚é‚®ä»¶æ”¶å–åè®® POPï¼Œé»˜è®¤ç«¯å£ä¸º110ï¼›è¿˜æœ‰ä¸ªå¸¸ç”¨é‚®ä»¶æ”¶å–åè®® IMOPï¼Œé»˜è®¤ç«¯å£ä¸º143ã€‚Â¶3. æœåŠ¡è½¯ä»¶Â¶PostfixPostfix æ˜¯å®žçŽ° SMTP åè®®çš„è½¯ä»¶ï¼Œä¹Ÿå«åšé‚®ä»¶å‘é€æœåŠ¡å™¨ã€‚ä¸Šé¢è¯´çš„é‚®ä»¶å®¢æˆ·ç«¯å°†é‚®ä»¶æ‰”ç»™å®ƒï¼Œç”±å®ƒå¯¹é‚®ä»¶è¿›è¡Œè½¬å‘ï¼Œè‡³äºŽæ€Žä¹ˆè½¬å‘ï¼ŒSMTP åè®®åˆ¶å®šäº†è§„åˆ™ï¼Œè€Œ Postfix è´Ÿè´£å…·ä½“äº‹æƒ…ï¼Œæˆ‘ä»¬åªéœ€è¦ä¿®æ”¹ Postfix é…ç½®æ–‡ä»¶è¦æ±‚å®ƒæŒ‰ç…§æˆ‘ä»¬çš„æƒ³æ³•åŽ»åšã€‚Â¶DovecotDovecot å®žçŽ°äº† POP å’Œ IMOP åè®®ï¼Œä¹Ÿå«åšé‚®ä»¶æ”¶å–æœåŠ¡å™¨ã€‚å¦‚æžœåªæ­å»ºäº† Postfix è€Œæ²¡æœ‰å®ƒï¼Œä¸å¥½æ„æ€ï¼Œä½ æ˜¯æ”¶ä¸åˆ°é‚®ä»¶çš„ã€‚Â¶SaslSas lç™»é™†éªŒè¯æœåŠ¡ï¼Œåœ¨ä¸‹é¢çš„ä»‹ç»å¯ä»¥çœ‹åˆ° Postfix ä½œä¸ºé‚®ä»¶å‘é€æœåŠ¡å™¨ï¼Œä¸èƒ½æ— é™åˆ¶çš„è½¬å‘ä»»æ„é‚®ä»¶ï¼Œåº”å½“åªè½¬å‘å®ƒä¿¡ä»»çš„å‘ä»¶äººå‘é€çš„é‚®ä»¶ï¼Œè¿™ä¸€ç‚¹ä½“çŽ°åœ¨ Postfix çš„é…ç½®æ–‡ä»¶è¦é…ç½®å®ƒè®¤ä¸ºå®‰å…¨çš„ä¸»æœºï¼ˆmynetworks å‚æ•°ï¼‰ã€‚ä½†è¿™æ ·ä¼šæ˜¾å¾—å¾ˆéº»çƒ¦ï¼ŒSasl é€šè¿‡å…¶å®ƒæ–¹å¼ä¹Ÿå¯ä»¥å¸®åŠ© Postfix å®Œæˆä¿¡ä»»é‚®ä»¶çš„è®¤è¯ã€‚Â¶äºŒã€æ­å»ºåŠæµ‹è¯•Â¶1. è®¾ç½®åŸŸååŸŸåæˆ–è‡ªå»ºDNSç…§ä¸‹é¢æ–¹å¼è®¾ç½®å³å¯DNS è§£æžï¼Œæ–°å¢žä¸¤æ¡è®°å½•ï¼šè®°å½•ç±»åž‹ä¸»æœºè®°å½•è®°å½•å€¼Amail10.10.10.10ï¼ˆä½ çš„æœåŠ¡å™¨ipï¼‰MX@mail.example.comÂ¶2. å®‰è£…è½¯ä»¶postfixã€dovecotã€cyrus-sasl12345yum -y install postfix dovecot cyrus-sasl $ postconf -a #éªŒè¯æ˜¯å¦æ”¯æŒcyrus dovecotåŠŸèƒ½cyrusdovecotpostfixä¸»è¦æ˜¯ä¸ºå‘ä»¶æœåŠ¡ï¼Œç«¯å£:25 ;devocotä¸ºæ”¶ä»¶æœåŠ¡,ç«¯å£ä¸º:110å’Œ145 ; cyrus-saslç™»é™†éªŒè¯æœåŠ¡ã€‚å¦‚æžœä½ çš„æœåŠ¡å™¨æœ‰å¼€å¯é˜²ç«å¢™ï¼Œé‚£ä¹ˆè¿˜éœ€è¦å¼€æ”¾è¿™å‡ ä¸ªå¿…è¦çš„ç«¯å£ã€‚å¦‚æžœä½ åªæ˜¯ä¸ºäº†æµ‹è¯•ï¼Œä½ å¯ä»¥ç›´æŽ¥å…ˆå…³é—­é˜²ç«å¢™ï¼Œæµ‹è¯•æˆåŠŸåŽå†å¯¹é˜²ç«å¢™åšé…ç½®ã€‚æˆ‘ä»¬ä¸‹é¢ä¹Ÿæ˜¯ç”¨å…³é—­é˜²ç«å¢™è¿™ç§æ–¹å¼è®²è§£ã€‚å…³é—­é˜²ç«å¢™1service firewalld stopä¿®æ”¹postfixä¸»é…ç½®æ–‡ä»¶ï¼Œå¯åŠ¨æœåŠ¡1234567891011121314151617181920212223vim /etc/postfix/main.cf#ä¿®æ”¹ä»¥ä¸‹é…ç½®ï¼Œæ³¨æ„ä¸‹é¢çš„å˜é‡ä¸è¦é‡å¤ï¼Œå¦‚æžœå‘çŽ°ä¸ŽåŽŸæ¥çš„å˜é‡é‡åï¼Œé‚£å°±å°†åŽŸæ¥çš„å˜é‡ç»™æ³¨é‡ŠæŽ‰#é‚®ä»¶æœåŠ¡å™¨çš„ä¸»æœºåmyhostname = mail.example.com#é‚®ä»¶åŸŸmydomain = example.com#å¾€å¤–å‘é‚®ä»¶çš„é‚®ä»¶åŸŸmyorigin = $mydomain#ç›‘å¬çš„ç½‘å¡ inet_interfaces = allinet_protocols = all#æœåŠ¡çš„å¯¹è±¡mydestination = $myhostname, $mydomain#é‚®ä»¶å­˜æ”¾çš„ç›®å½•home_mailbox = Maildir/ #æ–°æ·»åŠ ä»¥ä¸‹é…ç½®#--------è‡ªå®šä¹‰ï¼ˆä¸‹é¢å¯ä»¥å¤åˆ¶ç²˜è´´åˆ°æ–‡ä»¶æœ€åŽé¢ï¼Œç”¨äºŽè®¾ç½®æœåŠ¡å™¨éªŒä¸ºä¸»ï¼Œç¬¬ä¸€è¡Œè®¾ç½®å‘é€é™„ä»¶å¤§å°ï¼‰#message_size_limit = 100000smtpd_sasl_auth_enable = yessmtpd_sasl_security_options = noanonymousmynetworks = 127.0.0.0/8smtpd_recipient_restrictions = permit_mynetworks,permit_sasl_authenticated,reject_unauth_destinationé…ç½®è¡¥å……è¯´æ˜Žsmtpd_sasl_auth_enable = yes è¡¨ç¤ºå¼€å¯è®¤è¯smtpd_sasl_security_options = noanonymous è¡¨ç¤ºä¸å…è®¸åŒ¿åå‘ä¿¡mynetworks = 127.0.0.0/8 è¡¨ç¤º//å…è®¸çš„ç½‘æ®µï¼Œå¦‚æžœå¢žåŠ æœ¬æœºæ‰€åœ¨ç½‘æ®µå°±ä¼šå‡ºçŽ°å…è®¸ä¸éªŒè¯ä¹Ÿèƒ½å‘å¤–åŸŸå‘ä¿¡smtpd_recipient_restrictions = permit_mynetworks,permit_sasl_authenticated,reject_unauth_destinationè¡¨ç¤ºå…è®¸æœ¬åœ°åŸŸä»¥åŠè®¤è¯æˆåŠŸçš„å‘ä¿¡ï¼Œæ‹’ç»è®¤è¯å¤±è´¥çš„å‘ä¿¡123postfix check #ä¿®æ”¹ä¿å­˜åŽæ£€æŸ¥é…ç½®æ–‡ä»¶æ˜¯å¦æœ‰é”™systemctl start postfix #å¼€å¯postfixæœåŠ¡systemctl enable postfix #è®¾ç½®postfixæœåŠ¡å¼€æœºå¯åŠ¨ä¿®æ”¹dovecotä¸»é…ç½®æ–‡ä»¶ï¼Œå¯åŠ¨æœåŠ¡123456789101112vim /etc/dovecot/dovecot.conf#ä¿®æ”¹ä»¥ä¸‹é…ç½®protocols = imap pop3 lmtplisten = *, ::#æ–°æ·»åŠ ä»¥ä¸‹é…ç½®#-----------è‡ªå®šä¹‰------------!include conf.d/10-auth.confssl = nodisable_plaintext_auth = nomail_location = maildir:~/Maildir12systemctl start dovecotsystemctl enable dovecotä¿®æ”¹cyrus-saslä¸»é…ç½®æ–‡ä»¶1234vim /etc/sasl2/smtpd.conf #è¿™ä¸ªæ˜¯ç©ºæ–‡ä»¶ï¼Œç›´æŽ¥æ·»åŠ ä¸‹é¢é…ç½®ï¼ˆé…ç½®è®¤è¯æ–¹å¼ï¼‰pwcheck_method: saslauthdmech_list: plain loginlog_level:312vim /etc/sysconfig/saslauthd #ä¿®æ”¹ä¸‹é¢é…ç½®é¡¹ï¼ˆæœ¬åœ°ç”¨æˆ·è®¤è¯ï¼‰MECH=shadow12systemctl start saslauthdsystemctl enable saslauthdÂ¶3. åˆ›å»ºç”¨æˆ·ï¼Œå®‰è£…telnetè¿›è¡Œé‚®ä»¶æ”¶å‘æµ‹è¯•123456yum -y install telnet-server telnetuseradd wen -s /sbin/nologinuseradd qcmoke #æ­¤ç”¨æˆ·ä¸ºæœ¬äººä¸»æœºç”¨æˆ·ï¼Œéœ€è¦ç™»å½•ï¼Œæ•…æ²¡æœ‰ç¦æ­¢ç™»å½•echo '123123' | passwd --stdin qcmokeecho '123123' | passwd --stdin wenÂ¶3.1 å‘é€æœ¬åœ°é‚®ä»¶æµ‹è¯•--------------è¿žæŽ¥æœåŠ¡å™¨çš„25ç«¯å£è¿›è¡Œç®€å•å‘ä¿¡æµ‹è¯•-----------123456789telnet mail.example.com 25//è¿žæŽ¥æˆåŠŸï¼Œå¼€å§‹å†™ä¿¡helo mail.example.com //å£°æ˜Žæœ¬æœºçš„ä¸»æœºmail from:example.com //å£°æ˜Žå‘ä»¶äººåœ°å€rcpt to:wen@example.com //å£°æ˜Žæ”¶ä»¶äººåœ°å€data //å†™æ­£æ–‡HI THis is qcmoke, Good day! . //è®°ä½è¿™é‡Œæ˜¯ä»¥ç‚¹ä½œä¸ºæ­£æ–‡ç»“æŸæ ‡è®°quit // é€€å‡ºåˆ°è¿™é‡Œä¿¡ä»¶å°±å·²ç»å‘é€äº†ï¼ŒæŽ¥ä¸‹æ¥æ˜¯éªŒè¯æ”¶å–é‚®ä»¶äº†ã€‚æ”¶å–é‚®ä»¶éªŒè¯---------------æ”¶ä¿¡éªŒè¯---------------123456telnet mail.example.com 110user wen //æ”¶ä»¶äººç™»å½•pass 123456 //é‚®ç®±å¯†ç list //åˆ—è¡¨æŸ¥çœ‹é‚®ä»¶retr 1 //è¯»å–ç¼–å·ä¸º1çš„é‚®ä»¶quit //é€€å‡ºé‚®ç®±æŸ¥çœ‹åˆ°äº†å‘é€çš„å†…å®¹ï¼Œé‚£è¿™é‡Œå°±ç®—æ˜¯æ”¶ä»¶æˆåŠŸäº†Â¶3.2å‘é€é‚®ä»¶åˆ°å…¶å®ƒé‚®ç®±æœåŠ¡å™¨æµ‹è¯•è¿™é‡Œç”¨mailxè¿™ä¸ªè½¯ä»¶æ¥æµ‹è¯•å‘é€å®‰è£…mailx1yum install mailx -y12su - qcmoke #åˆ‡æ¢ç”¨æˆ·ï¼Œè¦æ±‚æ­¤ç”¨æˆ·å…·æœ‰ç™»å½•æƒé™echo 'è¿™æ˜¯æµ‹è¯•' | mail -s 'ä½ å¥½ï¼Œé»”åŸŽé™Œå®¢' 1667164190@qq.comå†ç™»é™†åˆ°qqé‚®ç®±å‘çŽ°æŽ¥æ”¶æˆåŠŸå³å¯ã€‚åˆ°é‡Œé‚®ç®±çš„æ”¶å‘åŠŸèƒ½å°±éƒ½å…·å¤‡äº†ã€‚Â¶4. å®¢æˆ·ç«¯é‚®ç®±è½¯ä»¶æµ‹è¯•æˆ‘è¿™é‡Œç”¨windowsçš„Foxmailé‚®ä»¶ä»£ç†æŽ¥æ”¶å‘é€å®¢æˆ·ç«¯ä½œæ¼”ç¤ºæˆ‘è¿™æ˜¯ç™»é™†è®¾ç½®å¥½çš„äº†ï¼Œæ”¶ä¿¡å’Œå‘ä¿¡è´¦å·åŠå¯†ç å°±æ˜¯åœ¨linuxç³»ç»Ÿé‚£é‡Œåˆ›å»ºçš„è´¦å·å’Œå¯¹åº”çš„å¯†ç ã€‚è®¾ç½®éªŒè¯æˆåŠŸåŽå°±å¯ä»¥ç•…å‘é‚®ä»¶äº†ã€‚]]></content>
      <categories>
        <category>devops</category>
      </categories>
      <tags>
        <tag>linux</tag>
        <tag>mail</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[centos7å®‰è£…kafka]]></title>
    <url>%2Fdevops%2Fmq.html</url>
    <content type="text"><![CDATA[Kafka æ˜¯ä¸€ä¸ªåˆ†å¸ƒå¼çš„åŸºäºŽå‘å¸ƒ/è®¢é˜…æ¨¡å¼çš„æ¶ˆæ¯é˜Ÿåˆ—ï¼Œå…¶è®¢é˜…è€…çš„æ¶ˆè´¹ç±»åž‹ä¸ºä¸»åŠ¨æ‹‰å–çš„æ¨¡å¼ã€‚æ¦‚å¿µï¼š1ï¼‰Broker ï¼šå³ä¸€ä¸ªæ­£åœ¨è¿è¡Œä¸­çš„kafkaæœåŠ¡è¿›ç¨‹ã€‚ä¸€ä¸ªé›†ç¾¤ç”±å¤šä¸ª broker ç»„æˆã€‚ç”±äºŽbrokeræ˜¯æ— çŠ¶æ€çš„ï¼Œæ‰€ä»¥éœ€è¦é€šè¿‡zookeeperæ¥ç»´æŠ¤é›†ç¾¤çŠ¶æ€ã€‚2ï¼‰Producer ï¼šæ¶ˆæ¯ç”Ÿäº§è€…ï¼Œå°±æ˜¯å‘brokerå‘é€topicçš„å®¢æˆ·ç«¯ï¼›3ï¼‰Consumer ï¼šæ¶ˆæ¯æ¶ˆè´¹è€…ï¼Œå‘brokerçš„topicä¸­æ‹‰å–æ•°æ®çš„å®¢æˆ·ç«¯ï¼›4ï¼‰Consumer Group ï¼ˆCGï¼‰ï¼šæ¶ˆè´¹è€…ç»„ï¼Œç”±å¤šä¸ª consumer ç»„æˆã€‚ç»„å†…çš„æ¶ˆè´¹è€…å…±åŒæ¶ˆè´¹æŸä¸ªä¸»é¢˜é‡Œçš„æ‰€æœ‰åˆ†åŒºæ•°æ®ï¼ˆæ³¨æ„æ˜¯å…±åŒæ¶ˆè´¹è€Œéžç‹¬ç«‹æ¶ˆè´¹ï¼‰ï¼Œç»„å†…æ¯ä¸ªæ¶ˆè´¹è€…è´Ÿè´£æ¶ˆè´¹ä¸åŒåˆ†åŒºçš„æ•°æ®ï¼Œä¸€ä¸ªåˆ†åŒºåªèƒ½ç”±ä¸€ä¸ªç»„å†…çš„å…¶ä¸­ä¸€ä¸ªæ¶ˆè´¹è€…æ¶ˆè´¹ï¼ˆä½†è¯¥åˆ†åŒºå¯ä»¥è¢«å…¶ä»–ç»„çš„æ¶ˆè´¹è€…æ¶ˆè´¹ï¼‰ï¼›æ¶ˆè´¹è€…ç»„ä¹‹é—´äº’ä¸å½±å“ã€‚æ‰€æœ‰çš„æ¶ˆè´¹è€…éƒ½å±žäºŽæŸä¸ªæ¶ˆè´¹è€…ç»„ï¼Œå³æ¶ˆè´¹è€…ç»„æ˜¯é€»è¾‘ä¸Šçš„ä¸€ä¸ªè®¢é˜…è€…ã€‚5ï¼‰Topic ï¼šå¯ä»¥ç†è§£ä¸ºä¸€ä¸ªé˜Ÿåˆ—ï¼Œç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…é¢å‘çš„éƒ½æ˜¯ä¸€ä¸ª topicï¼›6ï¼‰Partitionï¼šä¸ºäº†å®žçŽ°æ‰©å±•æ€§ï¼Œä¸€ä¸ªéžå¸¸å¤§çš„ topic å¯ä»¥åˆ†å¸ƒåˆ°å¤šä¸ª brokerï¼ˆå³æœåŠ¡å™¨ï¼‰ä¸Šï¼Œä¸€ä¸ª topic å¯ä»¥åˆ†ä¸ºå¤šä¸ª partitionï¼Œæ¯ä¸ª partition æ˜¯ä¸€ä¸ªæœ‰åºçš„é˜Ÿåˆ—ï¼›7ï¼‰Replicaï¼šå‰¯æœ¬ï¼Œä¸ºä¿è¯é›†ç¾¤ä¸­çš„æŸä¸ªèŠ‚ç‚¹å‘ç”Ÿæ•…éšœæ—¶ï¼Œè¯¥èŠ‚ç‚¹ä¸Šçš„ partition æ•°æ®ä¸ä¸¢å¤±ï¼Œä¸” kafka ä»ç„¶èƒ½å¤Ÿç»§ç»­å·¥ä½œï¼Œkafka æä¾›äº†å‰¯æœ¬æœºåˆ¶ï¼Œä¸€ä¸ª topic çš„æ¯ä¸ªåˆ†åŒºéƒ½æœ‰è‹¥å¹²ä¸ªå‰¯æœ¬ï¼Œä¸€ä¸ª leader å’Œè‹¥å¹²ä¸ª followerã€‚8ï¼‰leaderï¼šæ¯ä¸ªåˆ†åŒºå¤šä¸ªå‰¯æœ¬çš„â€œä¸»â€ï¼Œç”Ÿäº§è€…å‘é€æ•°æ®çš„å¯¹è±¡ï¼Œä»¥åŠæ¶ˆè´¹è€…æ¶ˆè´¹æ•°æ®çš„å¯¹è±¡éƒ½æ˜¯ leaderã€‚9ï¼‰followerï¼šæ¯ä¸ªåˆ†åŒºå¤šä¸ªå‰¯æœ¬ä¸­çš„â€œä»Žâ€ï¼Œå®žæ—¶ä»Ž leader ä¸­åŒæ­¥æ•°æ®ï¼Œä¿æŒå’Œ leader æ•°æ®çš„åŒæ­¥ã€‚leader å‘ç”Ÿæ•…éšœæ—¶ï¼ŒæŸä¸ª follower ä¼šæˆä¸ºæ–°çš„ followerã€‚Â¶ä¸€ã€å®‰è£…å‰ææ¡ä»¶ï¼šå®‰è£…kafkaä¹‹å‰éœ€è¦æœ‰javaçŽ¯å¢ƒã€‚123456su rootwget https://archive.apache.org/dist/kafka/0.11.0.0/kafka_2.11-0.11.0.0.tgztar -zxvf kafka_2.11-0.11.0.0.tgz -C /usr/local/mv /usr/local/kafka_2.11-0.11.0.0/ /usr/local/kafkacd /usr/local/kafkamkdir logsÂ¶äºŒã€é…ç½®kafka1vim config/server.properties1234567891011121314151617181920212223242526272829#broker çš„å…¨å±€å”¯ä¸€æ•´å½¢idï¼Œé›†ç¾¤ä¸‹è¯¥å€¼æ³¨æ„ä¸èƒ½é‡å¤broker.id=0#åˆ é™¤ topic åŠŸèƒ½ä½¿èƒ½delete.topic.enable=true# å…è®¸å¤–éƒ¨ç«¯å£è¿žæŽ¥listeners=PLAINTEXT://0.0.0.0:9092# å¤–éƒ¨ä»£ç†åœ°å€(æœåŠ¡å™¨ç‰©ç†æœºå¯¹å¤–ip)advertised.listeners=PLAINTEXT://10.223.117.77:9092#å¤„ç†ç½‘ç»œè¯·æ±‚çš„çº¿ç¨‹æ•°é‡num.network.threads=3#ç”¨æ¥å¤„ç†ç£ç›˜ IO çš„çŽ°æˆæ•°é‡num.io.threads=8#å‘é€å¥—æŽ¥å­—çš„ç¼“å†²åŒºå¤§å°socket.send.buffer.bytes=102400#æŽ¥æ”¶å¥—æŽ¥å­—çš„ç¼“å†²åŒºå¤§å°socket.receive.buffer.bytes=102400#è¯·æ±‚å¥—æŽ¥å­—çš„ç¼“å†²åŒºå¤§å°socket.request.max.bytes=104857600#kafka è¿è¡Œæ—¥å¿—å­˜æ”¾çš„è·¯å¾„log.dirs=/usr/local/kafka/logs#topic åœ¨å½“å‰ broker ä¸Šçš„åˆ†åŒºä¸ªæ•°num.partitions=1#ç”¨æ¥æ¢å¤å’Œæ¸…ç† data ä¸‹æ•°æ®çš„çº¿ç¨‹æ•°é‡num.recovery.threads.per.data.dir=1#segment æ–‡ä»¶ä¿ç•™çš„æœ€é•¿æ—¶é—´ï¼Œè¶…æ—¶å°†è¢«åˆ é™¤log.retention.hours=168#é…ç½®è¿žæŽ¥ Zookeeper é›†ç¾¤åœ°å€zookeeper.connect=127.0.0.1:2181#zookeeper.connect=192.168.1.10:2181,192.168.1.11:2181,192.168.1.13:2181Â¶ä¸‰ã€å¸¸ç”¨å‘½ä»¤123456789101112131415161718192021222324252627cd /opt/kafka/kafka_2.11-0.11.0.0#ä»¥å®ˆæŠ¤è¿›ç¨‹å¯åŠ¨bin/kafka-server-start.sh -daemon config/server.properties#å…³é—­bin/kafka-server-stop.sh config/server.properties# æŸ¥çœ‹å½“å‰æœåŠ¡å™¨ä¸­çš„æ‰€æœ‰ topicbin/kafka-topics.sh --zookeeper 127.0.0.1:2181 --list# åˆ›å»º topicï¼ˆtopicé‡Œæœ‰åˆ†åŒºï¼Œæœ‰ä¸»é¢˜ï¼‰# --topic:ä¸»é¢˜çš„åå­—# --zookeeper: æ³¨å†Œä¸­å¿ƒçš„åœ°å€# --replication-factor:å‰¯æœ¬æ•°# --partitions:åˆ†åŒºæ•°bin/kafka-topics.sh --zookeeper 127.0.0.1:2181 --create --topic appServerLoginForced --replication-factor 1 --partitions 1#åˆ é™¤topicbin/kafka-topics.sh --delete --zookeeper 127.0.0.1:2181 --topic appServerLoginForced#æµ‹è¯•bin/kafka-console-consumer.sh --bootstrap-server localhost:9092 --topic appServerLoginForced --from-beginningbin/kafka-console-producer.sh --broker-list localhost:9092 --topic appServerLoginForced]]></content>
      <categories>
        <category>devops</category>
      </categories>
      <tags>
        <tag>linux</tag>
        <tag>kafka</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ä½¿ç”¨denyhostsé˜²æ­¢sshæš´åŠ›ç ´è§£]]></title>
    <url>%2Fdevops%2Fdenyhosts.html</url>
    <content type="text"><![CDATA[å½“ä½ çš„ Linux æœåŠ¡å™¨æš´éœ²åœ¨äº’è”ç½‘ä¹‹ä¸­,è¯¥æœåŠ¡å™¨å°†ä¼šé­åˆ°äº’è”ç½‘ä¸Šçš„æ‰«æè½¯ä»¶è¿›è¡Œæ‰«æ,å¹¶è¯•å›¾çŒœæµ‹SSHç™»å½•å£ä»¤ã€‚ä½ ä¼šå‘çŽ°,æ¯å¤©ä¼šæœ‰å¤šæ¡SSHç™»å½•å¤±è´¥çºªå½•ã€‚é‚£äº›æ‰«æå·¥å…·å°†å¯¹ä½ çš„æœåŠ¡å™¨æž„æˆå¨èƒ,ä½ å¿…é¡»è®¾ç½®å¤æ‚ç™»å½•å£ä»¤,å¹¶å°†å°è¯•å¤šæ¬¡ç™»å½•å¤±è´¥çš„IPç»™é˜»æ­¢æŽ‰,è®©å…¶åœ¨ä¸€æ®µæ—¶é—´å†…ä¸èƒ½è®¿é—®è¯¥æœåŠ¡å™¨ã€‚Â¶1. denyhostsä»‹ç»denyhostsæ˜¯Pythonè¯­è¨€å†™çš„ä¸€ä¸ªç¨‹åºï¼Œå®ƒä¼šåˆ†æžsshdçš„æ—¥å¿—æ–‡ä»¶ï¼ˆ/var/log/secureï¼‰ï¼Œå½“å‘çŽ°é‡ å¤çš„æ”»å‡»æ—¶å°±ä¼šè®°å½•IPåˆ°/etc/hosts.denyæ–‡ä»¶ï¼Œä»Žè€Œè¾¾åˆ°è‡ªåŠ¨å±IPçš„åŠŸèƒ½ã€‚Â¶2. ä¸‹è½½å’Œå®‰è£…123456789$ wget https://nchc.dl.sourceforge.net/project/denyhosts/denyhosts/2.6/DenyHosts-2.6.tar.gz #ä¸‹è½½$ tar -zxvf DenyHosts-2.6.tar.gz #è§£åŽ‹$ cd DenyHosts-2.6 #è¿›å…¥è§£åŽ‹ç›®å½•$ python setup.py install #ç¼–è¯‘å®‰è£…#æ‹·è´å’Œä¿®æ”¹é»˜è®¤é…ç½®æ–‡ä»¶çš„åç§°$ cd /usr/share/denyhosts/ #è¿›å…¥å®‰è£…ç›®å½•$ cp denyhosts.cfg-dist denyhosts.cfg$ cp daemon-control-dist daemon-controlÂ¶3. é…ç½®æ­¤é…ç½®ä¸ºå¯é€‰é¡¹ï¼Œå› ä¸ºåŽŸæœ¬å°±å·²ç»æœ‰é»˜è®¤çš„é…ç½®äº†ã€‚12345678#3.ç¼–è¾‘é…ç½®æ–‡ä»¶denyhosts.cfg$ vim denyhosts.cfg #è¯¥é…ç½®æ–‡ä»¶ç»“æž„æ¯”è¾ƒç®€å•ï¼Œå¦‚æžœä¸æƒ³çžŽæŠ˜è…¾å¯ä»¥å‚ç…§å¦‚ä¸‹é…ç½®å³å¯ï¼šPURGE_DENY = 1d #ipè¢«ç¦æ­¢ä¹‹åŽï¼Œå¤šä¹…å¯ä»¥é‡Šæ”¾(wè¡¨ç¤ºå‘¨ï¼Œdè¡¨ç¤ºå¤©ï¼Œhè¡¨ç¤ºå°æ—¶ï¼Œmè¡¨ç¤ºåˆ†é’Ÿ)DENY_THRESHOLD_INVALID = 5 #æ— æ•ˆç”¨æˆ·åé™åˆ¶ç™»é™†æ¬¡æ•°DENY_THRESHOLD_VALID = 10 #æœ‰æ•ˆç”¨æˆ·åé™åˆ¶ç™»é™†æ¬¡æ•°DENY_THRESHOLD_ROOT = 5 #rooté™åˆ¶ç™»é™†æ¬¡æ•°AGE_RESET_ROOT = 1d #rootç”¨æˆ·ç™»å½•å¤±è´¥è®¡æ•°å½’é›¶çš„æ—¶é—´æ›´å¤šé…ç½®è¯´æ˜Žï¼š123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051############ THESE SETTINGS ARE REQUIRED #############sshdçš„æ—¥å¿—æ–‡ä»¶SECURE_LOG = /var/log/secure #å°†é˜»æ­¢IPå†™å…¥åˆ°hosts.deny,æ‰€ä»¥è¿™ä¸ªå·¥å…·åªæ”¯æŒ æ”¯æŒtcp wrapperçš„åè®® HOSTS_DENY = /etc/hosts.deny #å½“ä¸€ä¸ªIPè¢«é˜»æ­¢ä»¥åŽï¼Œè¿‡å¤šé•¿æ—¶é—´è¢«è‡ªåŠ¨è§£ç¦ã€‚å¯é€‰å¦‚3mï¼ˆä¸‰åˆ†é’Ÿï¼‰ã€5hï¼ˆ5å°æ—¶ï¼‰ã€2dï¼ˆä¸¤å¤©ï¼‰ã€8wï¼ˆ8å‘¨ï¼‰ã€1y(ä¸€å¹´)PURGE_DENY = 1w #é˜»æ­¢æœåŠ¡å BLOCK_SERVICE = sshd#å®šä¹‰äº†æŸä¸€IPæœ€å¤šè¢«è§£å°å¤šå°‘æ¬¡ã€‚å³æŸä¸€IPç”±äºŽæš´åŠ›ç ´è§£SSHå¯†ç è¢«é˜»æ­¢/è§£å°è¾¾åˆ°äº†PURGE_THRESHOLDæ¬¡ï¼Œåˆ™ä¼šè¢«æ°¸ä¹…ç¦æ­¢ï¼›PURGE_THRESHOLD = 20#å…è®¸æ— æ•ˆç”¨æˆ·ç™»å½•å¤±è´¥çš„æ¬¡æ•° DENY_THRESHOLD_INVALID = 5#å…è®¸æ™®é€šæœ‰æ•ˆç”¨æˆ·ç™»å½•å¤±è´¥çš„æ¬¡æ•° DENY_THRESHOLD_VALID = 10 #å…è®¸rootç™»å½•å¤±è´¥çš„æ¬¡æ•° DENY_THRESHOLD_ROOT = 1 #è®¾å®š deny host å†™å…¥åˆ°è¯¥èµ„æ–™å¤¹ DENY_THRESHOLD_RESTRICTED = 1#å°†denyçš„hostæˆ–ipè®°å½•åˆ°work_dirä¸­ WORK_DIR = /var/lib/denyhosts SUSPICIOUS_LOGIN_REPORT_ALLOWED_HOSTS=YES#æ˜¯å¦åšåŸŸååè§£ HOSTNAME_LOOKUP=YES #å°†DenyHostå¯åŠ¨çš„pidè®°å½•åˆ°LOCK_FILEä¸­ï¼Œå·²ç¡®ä¿æœåŠ¡æ­£ç¡®å¯åŠ¨ï¼Œé˜²æ­¢åŒæ—¶å¯åŠ¨å¤šä¸ªæœåŠ¡ LOCK_FILE = /var/lock/subsys/denyhosts ############ THESE SETTINGS ARE OPTIONAL #############è®¾ç½®ç®¡ç†å‘˜é‚®ä»¶åœ°å€ ä¾‹å¦‚****@163.comADMIN_EMAIL = rootSMTP_HOST = localhostSMTP_PORT = 25SMTP_FROM = DenyHosts &lt;nobody@localhost&gt;SMTP_SUBJECT = DenyHosts Report from $[HOSTNAME]# æœ‰æ•ˆç”¨æˆ·ç™»å½•å¤±è´¥è®¡æ•°å½’é›¶çš„æ—¶é—´AGE_RESET_VALID=5d # ROOTç”¨æˆ·ç™»å½•å¤±è´¥è®¡æ•°å½’é›¶çš„æ—¶é—´AGE_RESET_ROOT=25d # ç”¨æˆ·çš„å¤±è´¥ç™»å½•è®¡æ•°é‡ç½®ä¸º0çš„æ—¶é—´(/usr/share/denyhosts/restricted-usernames)AGE_RESET_RESTRICTED=25d # æ— æ•ˆç”¨æˆ·ç™»å½•å¤±è´¥è®¡æ•°å½’é›¶çš„æ—¶é—´AGE_RESET_INVALID=10d######### THESE SETTINGS ARE SPECIFIC TO DAEMON MODE ###########denyhostæœåŠ¡æ—¥å¿—æ–‡ä»¶DAEMON_LOG = /var/log/denyhosts DAEMON_SLEEP = 30s #è¯¥é¡¹ä¸ŽPURGE_DENY è®¾ç½®æˆä¸€æ ·ï¼Œä¹Ÿæ˜¯æ¸…é™¤hosts.deniedssh ç”¨æˆ·çš„æ—¶é—´,åŒºåˆ«æ˜¯ä»¥daemonæ¨¡å¼è¿è¡Œæ—¶è·ŸPURGE_DENYé…åˆä½¿ç”¨ï¼Œè‡ªåŠ¨è§£ç¦æ‰èƒ½ç”Ÿæ•ˆDAEMON_PURGE = 1hÂ¶4.å¯åŠ¨denyhosts1$ ./daemon-control startå¯ä»¥ä½¿ç”¨å‘½ä»¤ps -ef | grep denyhostsæŸ¥çœ‹æ˜¯å¦è¿è¡ŒæˆåŠŸã€‚å¦‚ä¸‹ç»“æžœè¡¨ç¤ºè¿è¡ŒæˆåŠŸã€‚1234[root@host denyhosts]# ps -ef | grep denyhostsroot 17588 1 0 11:57 ? 00:00:00 python /usr/bin/denyhosts.py --daemon --config=/usr/share/denyhosts/denyhosts.cfgroot 17611 24100 0 12:07 pts/1 00:00:00 grep --color=auto denyhosts[root@host denyhosts]#Â¶5.è®¾ç½®å¼€æœºè‡ªåŠ¨å¯åŠ¨è®©denyhostsæ¯æ¬¡é‡å¯åŽè‡ªåŠ¨å¯åŠ¨ã€‚è®¾ç½®è‡ªåŠ¨å¯åŠ¨å¯ä»¥é€šè¿‡ä¸¤ç§æ–¹æ³•è¿›è¡Œã€‚ç¬¬ä¸€ç§æ˜¯å°†denyhostsä½œä¸ºå®ˆæŠ¤è¿›ç¨‹æœåŠ¡è¿è¡Œï¼Œè¿™ç§æ–¹æ³•å¯ä»¥é€šè¿‡/etc/init.d/denyhostså‘½ä»¤æ¥æŽ§åˆ¶å…¶çŠ¶æ€ã€‚æ–¹æ³•å¦‚ä¸‹ï¼š123$ cd /etc/init.d$ ln -s /usr/share/denyhosts/daemon-control denyhosts$ service denyhosts startæˆ–è€…ç”¨ä»¥ä¸‹å‘½ä»¤é€šè¿‡chkconfigå·¥å…·æ¥ç®¡ç†æ›´æ–¹ä¾¿ã€‚123$ cd /etc/init.d$ chkconfig --add denyhosts$ chkconfig --level 2345 denyhosts onç¬¬äºŒç§æ˜¯å°†denyhostsç›´æŽ¥åŠ å…¥rc.localä¸­è‡ªåŠ¨å¯åŠ¨ï¼ˆç±»ä¼¼äºŽWindowsä¸­çš„â€œå¯åŠ¨æ–‡ä»¶å¤¹â€ï¼‰ï¼š1$ echo '/usr/share/denyhosts/daemon-control start' &gt;&gt; /etc/rc.localå¦‚æžœæƒ³æŸ¥çœ‹å·²ç»è¢«é˜»æ­¢çš„IPï¼ŒæŸ¥çœ‹/etc/hosts.deny æ–‡ä»¶å³å¯ã€‚å¦‚ä¸‹ï¼š1234567891011121314151617[root@host ~]# cat /etc/hosts.deny## hosts.deny This file contains access rules which are used to# deny connections to network services that either use# the tcp_wrappers library or that have been# started through a tcp_wrappers-enabled xinetd.## The rules in this file can also be set up in# /etc/hosts.allow with a 'deny' option instead.## See 'man 5 hosts_options' and 'man 5 hosts_access'# for information on rule syntax.# See 'man tcpd' for information on tcp_wrappers## DenyHosts: Sat Jan 12 12:22:17 2019 | sshd: 120.35.33.27sshd: 120.35.33.27[root@host ~]#Â¶6. è§£ç¦ipç¼–è¾‘/etc/hosts.denyã€‚ç„¶åŽåˆ é™¤æˆ–è€…æ³¨é‡ŠæŽ‰å¯¹åº”çš„sshdå³å¯ã€‚å¦‚ä»¥ä¸‹ç”¨æ³¨é‡Šçš„æ–¹å¼è§£ç¦ï¼š12345678910111213141516[root@host ~]# vim /etc/hosts.deny# hosts.deny This file contains access rules which are used to# deny connections to network services that either use# the tcp_wrappers library or that have been# started through a tcp_wrappers-enabled xinetd.## The rules in this file can also be set up in# /etc/hosts.allow with a 'deny' option instead.## See 'man 5 hosts_options' and 'man 5 hosts_access'# for information on rule syntax.# See 'man tcpd' for information on tcp_wrappers## DenyHosts: Sat Jan 12 12:22:17 2019 | sshd: 120.35.33.27#sshd: 120.35.33.27[root@host ~]#å¦‚æžœæƒ³åˆ é™¤ä¸€ä¸ªå·²ç»ç¦æ­¢çš„ä¸»æœºIP,åªåœ¨/etc/hosts.denyåˆ é™¤æ˜¯æ²¡ç”¨çš„ã€‚éœ€è¦è¿›å…¥/usr/share/denyhosts/data/ ç›®å½•å¯¹ä»¥ä¸‹æ–‡ä»¶ä¸€ä¸ªä¸ªåˆ é™¤ä½ æƒ³å–æ¶ˆçš„ä¸»æœºIPæ‰è¡Œã€‚/usr/share/denyhosts/data/hosts/usr/share/denyhosts/data/hosts-restricted/usr/share/denyhosts/data/hosts-root/usr/share/denyhosts/data/hosts-valid/usr/share/denyhosts/data/users-hostsä½ å¯ä»¥æ‰§è¡Œå‘½ä»¤sudo grep 120.35.33.27 /usr/share/denyhosts/data/*æŸ¥çœ‹å…·ä½“æ–‡ä»¶ipä¸ºâ€œ120.35.33.27â€çš„å…·ä½“ä½ç½®ä½†å¦‚æžœè¿™æ ·ä¸€ä¸ªæœ‰ä¸ªæ“ä½œç¡®å®žå¾ˆéº»çƒ¦ï¼Œä¸è¿‡æœºæ™ºçš„æˆ‘åœ¨ç½‘ä¸Šæ‰¾äº†ä¸€ä¸ªè„šæœ¬(denyhosts_removeip.sh)ï¼Œè¿™ä¸ªè„šæœ¬å¯ä»¥å¿«é€Ÿçš„è§£å†³è¿™ä¸ªé—®é¢˜ã€‚å…¶å†…å®¹å¦‚ä¸‹ï¼š1234567891011121314151617181920212223#!/bin/bash# Author:licess# Website:https://www.vpser.net &amp; https://lnmp.orgHOST=$1if [ -z "$&#123;HOST&#125;" ]; then echo "Usage:$0 IP" exit 1fi echo "Remove IP:$&#123;HOST&#125; from denyhosts..."/etc/init.d/denyhosts stopecho '/etc/hosts.deny/usr/share/denyhosts/data/hosts/usr/share/denyhosts/data/hosts-restricted/usr/share/denyhosts/data/hosts-root/usr/share/denyhosts/data/hosts-valid/usr/share/denyhosts/data/users-hosts' | grep -v "^$" | xargs sed -i "/$&#123;HOST&#125;/d" #iptables -D INPUT -s $&#123;HOST&#125; -p tcp -m tcp --dport 22 -j DROPecho " done"/etc/init.d/denyhosts startæ‰§è¡Œè„šæœ¬æ¸…é™¤denyhostsæŸä¸ªIPçš„å‘½ä»¤å¦‚ä¸‹ï¼š1bash denyhosts_removeip.sh 10.10.10.10å‚è€ƒæ•™ç¨‹ï¼šhttp://coolnull.com/2068.htmlhttps://www.spamcage.com/denyhosts.html]]></content>
      <categories>
        <category>devops</category>
      </categories>
      <tags>
        <tag>linux</tag>
        <tag>ssh</tag>
        <tag>denyhosts</tag>
        <tag>ç½‘ç»œå®‰å…¨</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[centos7æ­å»ºnextcloudç§æœ‰äº‘ç›˜]]></title>
    <url>%2Ftools%2Fnextcload.html</url>
    <content type="text"><![CDATA[æ­å»ºä¸€å¥—è‡ªå·±çš„ç§æœ‰äº‘ç›˜ï¼Œè®©æ•°æ®å­˜å‚¨æ›´åŠ æ–¹ä¾¿ã€å¯é ã€‚Nextcloudæ˜¯ä¸€ä¸ªå¼€æºçš„äº‘å­˜å‚¨ç½‘ç›˜ï¼Œå†…ç½®äº†Officeæ–‡æ¡£ã€è§†é¢‘æ’­æ”¾å™¨ã€å›¾ç‰‡ç›¸å†Œã€æ—¥åŽ†è”ç³»äººã€ä¸¤æ­¥éªŒè¯ã€æ–‡ä»¶ç®¡ç†ã€RSSé˜…è¯»ç­‰ä¸°å¯Œçš„åº”ç”¨ï¼ŒNextcloudå·²ç»ä»…ä»…å¯ä»¥ç”¨ä½œä¸ªäººæˆ–è€…å›¢é˜Ÿå­˜å‚¨ä¸Žå…±äº«ï¼Œè¿˜å¯ä»¥æ‰“é€ æˆä¸ºä¸€ä¸ªä¸ªäººåŠžå…¬å¹³å°ã€‚Â¶0. å‰ç½®çŽ¯å¢ƒCentOS 7PHP 7.2MariaDB 5.5.60nextcloud 15é¦–å…ˆå®‰è£…åœ¨å®‰è£…è¿‡ç¨‹ä¸­éœ€è¦çš„ä¸€äº›ä¾èµ–é¡¹ï¼Œä½†è¿™äº›ä¾èµ–é¡¹åœ¨æ¯å¤©ä½¿ç”¨æƒ…å†µä¸‹ä¹Ÿå¾ˆæœ‰ç”¨ï¼š12yum install -y epel-release yum-utils unzip curl wget \bash-completion policycoreutils-python mlocate bzip2çŽ°åœ¨ç¡®ä¿æ‚¨çš„ç³»ç»Ÿæ˜¯æœ€æ–°çš„ï¼š1# yum update -yÂ¶1. å®‰è£…Apache1# yum install -y httpdç¡®ä¿å¯ç”¨å¹¶å¯åŠ¨äº†apache WebæœåŠ¡ï¼š12# systemctl enable httpd.service# systemctl start httpd.serviceÂ¶2. å®‰è£… MariaDB1# yum install mariadb-server -y12345# systemctl start mariadb # å¯åŠ¨æœåŠ¡# systemctl enable mariadb # è®¾ç½®å¼€æœºå¯åŠ¨è®¾ç½® MySQL è´¦æˆ· root å¯†ç ï¼šmysqladmin -u root password '******'Â¶3. å®‰è£…phpå¦‚æžœphpä½¿ç”¨çš„æ˜¯php7.2ä»¥å‰çš„è€ç‰ˆæœ¬ï¼Œéœ€è¦å¸è½½è€ç‰ˆæœ¬è€Œè£…æ–°ç‰ˆæœ¬ã€‚1# yum remove php* php-common #å¸è½½php123456# rpm -Uvh https://mirror.webtatic.com/yum/el7/webtatic-release.rpm# yum install -y php72w php72w-cli php72w-common php72w-curl php72w-gd \php72w-mbstring php72w-mysqlnd php72w-process php72w-xml php72w-zip \php72w-opcache php72w-pecl-apcu php72w-intl php72w-pecl-redis# systemctl restart httpdå¦‚æžœphp7è§£æžphpæ–‡ä»¶å¤±è´¥ï¼Œå¯ä»¥æ‰§è¡Œyum -y install php* --skip-brokenåŽå†æ‰§è¡Œä»¥ä¸Šphp7å®‰è£…å‘½ä»¤Â¶4. å®‰è£…nextcloud1234# cd var/www/html/# wget https://download.nextcloud.com/server/releases/nextcloud-15.0.0.zip# yum -y install wget unzip# unzip nextcloud-15.0.0.zip12[root@host html]# chown -R apache:apache /var/www/html/nextcloud[root@host html]# chmod -R 775 /var/www/html/nextcloudÂ¶5. é…ç½®apacheè™šæ‹Ÿç›®å½•1[root@host html]# vim /etc/httpd/conf.d/vhost.conf12345678910&lt;VirtualHost *:80&gt; DocumentRoot "/var/www/html" ServerName example.com ServerAlias www.example.com &lt;Directory "/var/www/html/"&gt; Options FollowSymLinks AllowOverride All Require all granted &lt;/Directory&gt;&lt;/VirtualHost&gt;1[root@host html]# systemctl restart httpd #é‡å¯apacheÂ¶6. é…ç½®nextcloudç”¨æˆ·åå’Œå¯†ç ä¸€å®šè¦è®°ä½ï¼Œæ•°æ®ç›®å½•é»˜è®¤å³å¯ï¼Œæ•°æ®åº“çš„ç”¨æˆ·åå’Œå¯†ç æ ¹æ®è‡ªèº«æƒ…å†µè€Œå®š;æ•°æ®åº“åä»»æ„ï¼Œnextcloudä¼šè‡ªåŠ¨åˆ›å»ºè¿™ä¸ªæ•°æ®åº“ï¼Œä¸å¿…è¦äººä¸ºåˆ›å»ºï¼›æ•°æ®åº“å¦‚æžœæ˜¯åœ¨æ“ä½œçš„vpsä¸Šï¼Œurlå¯å†™æˆlocalhost:3306ä½ å¯ä»¥æ·»åŠ å¤–éƒ¨å­˜å‚¨åˆ°nextcloudä¸­ï¼Œä¾‹å¦‚è°·æ­Œäº‘ï¼Œè¿™æ ·çš„è¯ä½ å°±å¯ä»¥è½»æ¾åœ°åŒæ­¥nextcloudå’Œè°·æ­Œäº‘äº†ï¼Œæƒ³è¦å®Œæˆè¿™ä¸ªæŒ‚è½½çš„è¿‡ç¨‹ï¼Œå…ˆå†³æ¡ä»¶æ˜¯å…ˆå°†è°·æ­Œäº‘æŒ‚è½½åˆ°vpsä¸­ï¼Œè®©nextcloudå¯ä»¥è®¿é—®è°·æ­Œäº‘ã€‚å…·ä½“æ•™ç¨‹å¯å‚è€ƒä¹‹å‰å†™è¿‡çš„ä¸€ç¯‡æ–‡ç« ã€Šé€šè¿‡RcloneæŒ‚è½½Google Driveåˆ°VPSã€‹ã€‚æŒ‚è½½å®ŒæˆåŽå°±å¯ä»¥æ·»åŠ å¤–éƒ¨å­˜å‚¨åˆ°nextcloudäº†ï¼Œå…·ä½“æ­¥éª¤å¦‚ä¸‹ï¼š1.å¼€å¯å¤–éƒ¨å­˜å‚¨åŠŸèƒ½ï¼Œ2.é…ç½®å¤–éƒ¨å­˜å‚¨ç›®å½•ã€‚å¦‚ä¸‹å›¾ :æ›´å¤šå†…å®¹è¯·æŸ¥çœ‹https://docs.nextcloud.com/server/15/admin_manual/installation/source_installation.html#example-installation-on-centos-7-server]]></content>
      <categories>
        <category>tools</category>
      </categories>
      <tags>
        <tag>rclone</tag>
        <tag>nextcloud</tag>
        <tag>centos7</tag>
        <tag>ç§æœ‰äº‘ç›˜</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[é€šè¿‡RcloneæŒ‚è½½Google Driveåˆ°VPS]]></title>
    <url>%2Ftools%2Frclone.html</url>
    <content type="text"><![CDATA[Rclone æ˜¯ä¸€æ¬¾çš„å‘½ä»¤è¡Œå·¥å…·ï¼Œæ”¯æŒåœ¨ä¸åŒå¯¹è±¡å­˜å‚¨ã€ç½‘ç›˜é—´åŒæ­¥ã€ä¸Šä¼ ã€ä¸‹è½½æ•°æ®ã€‚ä¾‹å¦‚å®ƒå¯ä»¥è½»æ¾æŒ‚è½½Google Driveåˆ°ä½ çš„VPSï¼ˆå½“ç„¶ï¼Œä»–è¿˜èƒ½å¤ŸæŒ‚è½½å…¶ä»–æœåŠ¡å•†çš„ç½‘ç›˜ï¼Œå…·ä½“æŸ¥çœ‹å®˜ç½‘æ–‡æ¡£ï¼‰ï¼Œè®©ä½ å¯ä»¥æ–¹ä¾¿çš„ä½¿ç”¨äº‘ç›˜é‡Œçš„èµ„æºã€‚Â¶1. å®‰è£… Rclone12[root@host ~]# yum -y install unzip[root@host ~]# curl https://rclone.org/install.sh | sudo bashÂ¶2. é…ç½®Rclone123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117[root@host ~]# rclone config #è¾“å…¥rclone configå‘½ä»¤è¿›è¡Œé…ç½®2019/01/02 22:07:50 NOTICE: Config file "/root/.config/rclone/rclone.conf" not found - using defaultsNo remotes found - make a new onen) New remotes) Set configuration passwordq) Quit confign/s/q&gt; n #é€‰æ‹©nåˆ›å»ºæ–°çš„è¿œç«¯name&gt; mydriver #ç»™åˆ›å»ºçš„è¿œç«¯å‘½åï¼Œæ¯”å¦‚mydriverType of storage to configure.Enter a string value. Press Enter for the default ("").Choose a number from below, or type in your own value 1 / A stackable unification remote, which can appear to merge the contents of several remotes \ "union" 2 / Alias for a existing remote \ "alias" 3 / Amazon Drive \ "amazon cloud drive" 4 / Amazon S3 Compliant Storage Providers (AWS, Ceph, Dreamhost, IBM COS, Minio) \ "s3" 5 / Backblaze B2 \ "b2" 6 / Box \ "box" 7 / Cache a remote \ "cache" 8 / Dropbox \ "dropbox" 9 / Encrypt/Decrypt a remote \ "crypt"10 / FTP Connection \ "ftp"11 / Google Cloud Storage (this is not Google Drive) \ "google cloud storage"12 / Google Drive \ "drive"13 / Hubic \ "hubic"14 / JottaCloud \ "jottacloud"15 / Local Disk \ "local"16 / Mega \ "mega"17 / Microsoft Azure Blob Storage \ "azureblob"18 / Microsoft OneDrive \ "onedrive"19 / OpenDrive \ "opendrive"20 / Openstack Swift (Rackspace Cloud Files, Memset Memstore, OVH) \ "swift"21 / Pcloud \ "pcloud"22 / QingCloud Object Storage \ "qingstor"23 / SSH/SFTP Connection \ "sftp"24 / Webdav \ "webdav"25 / Yandex Disk \ "yandex"26 / http Connection \ "http"Storage&gt; 12 #é€‰æ‹©è¦æŒ‚è½½åˆ°vpsä¸Šçš„ç¬¬ä¸‰æ–¹äº‘ç›˜ï¼Œç”±äºŽè¿™é‡ŒæŒ‚è½½çš„æ˜¯è°·æ­Œäº‘ç›˜ï¼Œæ•…é€‰æ‹©12** See help for drive backend at: https://rclone.org/drive/ **Google Application Client IdLeave blank normally.Enter a string value. Press Enter for the default ("").client_id&gt; #å›žè½¦Google Application Client SecretLeave blank normally.Enter a string value. Press Enter for the default ("").client_secret&gt; #å›žè½¦Scope that rclone should use when requesting access from drive.Enter a string value. Press Enter for the default ("").Choose a number from below, or type in your own value 1 / Full access all files, excluding Application Data Folder. \ "drive" 2 / Read-only access to file metadata and file contents. \ "drive.readonly" / Access to files created by rclone only. 3 | These are visible in the drive website. | File authorization is revoked when the user deauthorizes the app. \ "drive.file" / Allows read and write access to the Application Data folder. 4 | This is not visible in the drive website. \ "drive.appfolder" / Allows read-only access to file metadata but 5 | does not allow any access to read or download file content. \ "drive.metadata.readonly"scope&gt; 1 #é€‰æ‹©1ï¼Œèµ‹äºˆrcloneæ“ä½œäº‘ç›˜å¯è¯»å¯å†™çš„æƒé™ID of the root folderLeave blank normally.Fill in to access "Computers" folders. (see docs).Enter a string value. Press Enter for the default ("").root_folder_id&gt; #å›žè½¦Service Account Credentials JSON file path Leave blank normally.Needed only if you want use SA instead of interactive login.Enter a string value. Press Enter for the default ("").service_account_file&gt; #å›žè½¦Edit advanced config? (y/n)y) Yesn) Noy/n&gt; n #æ˜¯å¦é«˜çº§é…ç½®ï¼Œé€‰nä¸é…ç½®Remote configUse auto config? * Say Y if not sure * Say N if you are working on a remote or headless machine or Y didn't worky) Yesn) Noy/n&gt; n #æ˜¯å¦ä½¿ç”¨è‡ªåŠ¨é…ç½®ï¼Œé€‰nä¸é…ç½®If your browser doesn't open automatically go to the following link: https://accounts.google.com/o/oauth2/auth?access_type=offline&amp;client_id=202264815644.apps.googleusercontent.com&amp;redirect_uri=urn%3Aietf%3Awg%3Aoauth%3A2.0%3Aoob&amp;response_type=code&amp;scope=https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fdrive&amp;state=8b3264ffe950d2e850968a091bffd93e#æ‰“å¼€æµè§ˆå™¨è¾“å…¥ä»¥ä¸Šhttps://....é“¾æŽ¥å¹¶ä»¥æŒ‚è½½çš„è°·æ­Œäº‘ç›˜å¯¹åº”çš„è´¦å·ç™»é™†éªŒè¯ï¼Œå¦‚ä¸‹å›¾ï¼š1234567891011121314151617181920212223242526272829303132Log in and authorize rclone for accessEnter verification code&gt; 4/xw**************************nyI #å¤åˆ¶ä»¥ä¸ŠèŽ·å¾—çš„éªŒè¯ç åˆ°æ­¤å¤„Configure this as a team drive?y) Yesn) Noy/n&gt; y #è¾“å…¥yç¡®è®¤Fetching team drive list...No team drives found in your account--------------------[mydriver]type = drivescope = drivetoken = &#123;"access_token":"ya29.GluGBpBlg_NP0xWOUyj75-nT0LH2-kEuVlMtGESyZSxWbMqELF3uB5dAVfl9L8voIaMT2bRBYS2x15mG175TIb5yk08wWqH2DCwLBmhy_podqrtfl5q6TNoIRKRB","token_type":"Bearer","refresh_token":"1/0jso0O697nu0nBYKZZXRwCD50b6o97uCbeB_Sbt2E8aj3ZKDkik9OlzKe-0GvLGh","expiry":"2019-01-02T23:11:47.082006585-05:00"&#125;--------------------y) Yes this is OKe) Edit this remoted) Delete this remotey/e/d&gt; y #è¾“å…¥yç¡®è®¤Current remotes:#æ·»åŠ åç§°ä¸ºmydriverçš„è°·æ­Œäº‘ç›˜åˆ°vpsæˆåŠŸName Type==== ====mydriver drivee) Edit existing remoten) New remoted) Delete remoter) Rename remotec) Copy remotes) Set configuration passwordq) Quit confige/n/d/r/c/s/q&gt; q #è¾“å…¥qé€€å‡ºÂ¶3. vpsæŒ‚è½½è°·æ­Œäº‘ç›˜123456789101112131415161718192021[root@host ~]# mkdir -p /data/GoogleDrive #å…ˆåˆ›å»ºä¸€ä¸ªç›®å½•ä½œä¸ºäº‘ç›˜çš„æŒ‚è½½ç‚¹[root@host ~]# rclone mount mydriver:share /data/GoogleDrive --allow-other --allow-non-empty --vfs-cache-mode writes &amp; #æ‰§è¡ŒæŒ‚è½½å‘½ä»¤ï¼Œå…¶ä¸­mydriveræ˜¯é…ç½®Rcloneæ—¶è®¾ç½®çš„è¿œç«¯äº‘ç›˜åç§°ï¼›shareæ˜¯è°·æ­Œäº‘ï¼ˆmydriverï¼‰ä¸Šçš„ä¸€ä¸ªç›®å½•(ç¡®ä¿å…ˆåˆ›å»ºä¸€ä¸ªè¿™æ ·ç±»ä¼¼çš„ç›®å½•)ï¼›/data/GoogleDriveæ˜¯vpsä¸Šçš„æŒ‚è½½ç‚¹ï¼Œæˆ–è€…è¯´æ˜¯å…±äº«æ–‡ä»¶å¤¹[1] 8327[root@host ~]# 2019/01/02 22:14:30 Fatal error: failed to mount FUSE fs: fusermount: exec: "fusermount": executable file not found in $PATH#é‡åˆ°ä»¥ä¸Šé”™è¯¯æ‰§è¡Œæ­¤å‘½ä»¤å®‰è£…fuse[root@host ~]# yum -y install fuse[root@host ~]# rclone mount mydriver:share /data/GoogleDrive --allow-other --allow-non-empty --vfs-cache-mode writes &amp; #å†æ¬¡æ‰§è¡ŒæŒ‚è½½å‘½ä»¤[1] 8337[root@host ~]# df -h #æŸ¥çœ‹æ˜¯å¦æŒ‚è½½æˆåŠŸFilesystem Size Used Avail Use% Mounted ondevtmpfs 238M 0 238M 0% /dev......mydriver:share 1.0P 33G 1.0P 1% /data/GoogleDrive #è¡¨ç¤ºæŒ‚è½½æˆåŠŸðŸ“š æ›´å¤šæŒ‚è½½å‘½ä»¤è¯·æŸ¥çœ‹å®˜æ–¹æ–‡æ¡£Â¶4. è®¾ç½®å¼€æœºè‡ªåŠ¨æŒ‚è½½æ‰§è¡Œå®Œä»¥ä¸Šæ“ä½œè™½ç„¶å·²ç»æŒ‚è½½æˆåŠŸï¼Œä½†æ˜¯åªæ˜¯ä¸´æ—¶æŒ‚è½½ï¼Œå¦‚æžœé‡å¯æœåŠ¡å™¨æˆ–è€…å…³æœºå°±å¤±æ•ˆäº†ï¼Œæ‰€ä»¥è¿˜æœ‰è¦å®Œæˆä»¥ä¸‹ä»»åŠ¡ã€‚å¦‚æžœrcloneä¸åœ¨/usr/bin/ç›®å½•çš„è¯ï¼ˆå¯ä»¥é€šè¿‡which rcloneå‘½ä»¤æŸ¥è¯¢æ˜¯å¦åœ¨è¿™ä¸ªç›®å½•ï¼‰ï¼Œéœ€è¦å…ˆæŠŠrcloneçš„å¯æ‰§è¡Œæ–‡ä»¶å¤åˆ¶åˆ°/usr/binã€‚æ–°å»ºä¸€ä¸ªrclone.serviceæ–‡ä»¶ï¼š1vi /usr/lib/systemd/system/rclone.serviceå†™å…¥ï¼š12345678910[Unit]Description = rclone[Service]User = rootExecStart = /usr/bin/rclone mount mydriver:share /data/GoogleDrive --copy-links --no-gzip-encoding --no-check-certificate --allow-other --allow-non-empty --umask 000Restart = on-abort[Install]WantedBy = multi-user.targetæ³¨æ„ï¼šä»¥ä¸ŠExecStartçš„å†…å®¹&quot;mydriver:share /data/GoogleDrive&quot;è¦ç»“åˆä½ æŒ‚è½½çš„æƒ…å†µæ¥å®šã€‚123456#é‡è½½daemonï¼Œè®©æ–°çš„æœåŠ¡æ–‡ä»¶ç”Ÿæ•ˆsystemctl daemon-reload#å¯åŠ¨rclonesystemctl start rclone#è®¾ç½®å¼€æœºå¯åŠ¨ï¼šsystemctl enable rcloneé‡å¯ä½ çš„VPSï¼Œç„¶åŽæŸ¥çœ‹ä¸€ä¸‹rcloneçš„æœåŠ¡èµ·æ¥æ²¡ï¼ŒæŽ¥ç€æŸ¥çœ‹ä¸€ä¸‹ç›˜å­æŒ‚ä¸ŠåŽ»æ²¡ï¼š123456789#é‡å¯reboot#æŸ¥çœ‹çŠ¶æ€systemctl status rclone#æŸ¥çœ‹ç£ç›˜æŒ‚è½½æƒ…å†µdf -h#å¦‚æžœéœ€è¦å¯ä»¥é€šè¿‡ä¸‹é¢çš„å‘½ä»¤å…³é—­rclone#systemctl stop rcloneÂ¶5. æµ‹è¯•1234[root@host ~]# echo "hello world" &gt; /data/GoogleDrive/hello.txt[root@host ~]# ls /data/GoogleDrive/hello.txt/data/GoogleDrive/hello.txt[root@host ~]#åœ¨ Google Drive åˆ·æ–°çœ‹çœ‹]]></content>
      <categories>
        <category>tools</category>
      </categories>
      <tags>
        <tag>rclone</tag>
        <tag>nextcloud</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[linuxå­¦ä¹ ç¬”è®°]]></title>
    <url>%2Flinux%2Fto_learn_linux.html</url>
    <content type="text"><![CDATA[è¿™ä¸ªç¬”è®°æ¯”è¾ƒå…¨é¢çš„è®°å½•äº†æœ¬äººå­¦ä¹ Linuxçš„è¿‡ç¨‹ï¼Œå†…å®¹è¿˜æ˜¯æ¯”è¾ƒç³»ç»Ÿã€å…¨é¢çš„ã€‚å­¦ä¹ å‚è€ƒçš„æ–‡æ¡£ä»¥åŠæ•™ç¨‹æ¥æºç¹å¤šï¼Œä½†éƒ½å¸å–äº†å…¶ä¸­æ¯”è¾ƒå¥½çš„ç²¾åŽï¼Œå¹¶åœ¨æ­¤åŸºç¡€ä¸Šæœ‰æ‰€æ‹“å±•æ·±å…¥ã€‚æœ¬æ¬¡ç¬”è®°æ›´å¤šè¿˜æ˜¯åœ¨äºŽLinuxå‘½ä»¤ä½¿ç”¨ä¸Šçš„æ€»ç»“ï¼Œå¯¹äºŽæ—¥åŽçš„è¿ç»´å­¦ä¹ å¿…å®šæœ‰æ‰€å¸®åŠ©â€¦Â¶ä¸€ã€æ¦‚å¿µLinux æ˜¯ä¸€å¥—å…è´¹ä½¿ç”¨å’Œè‡ªç”±ä¼ æ’­çš„ç±» Unix æ“ä½œç³»ç»Ÿï¼Œæ˜¯ä¸€ä¸ªåŸºäºŽ POSIX å’Œ UNIX çš„å¤šç”¨æˆ·ã€å¤šä»»åŠ¡ã€æ”¯æŒå¤šçº¿ç¨‹å’Œå¤š CPU çš„æ“ä½œç³»ç»Ÿã€‚ç›®å‰å¸‚é¢ä¸Šè¾ƒçŸ¥åçš„å‘è¡Œç‰ˆæœ‰ï¼šUbuntuã€RedHatã€CentOSã€Debianã€Fedoraã€SuSEã€OpenSUSEã€Arch Linuxã€SolusOS ç­‰ã€‚ä½†å¤§ä½“ä¸Šåˆ†ç±»ä¸ºRedHatç³»åˆ—å’ŒDebianç³»åˆ—ã€‚æ‰€ä»¥æœ¬æ–‡æ¡£ä¸»è¦æ˜¯ä½¿ç”¨CentOSå¹¶è¾…åŠ©æ€§åœ°æŽºæ‚Ubuntuä¸€èµ·è¿›è¡Œè®²è¿°çš„ã€‚Â¶1. ç»ˆç«¯å‘½ä»¤æ ¼å¼Linux åˆšé¢ä¸–æ—¶å¹¶æ²¡æœ‰å›¾å½¢ç•Œé¢ï¼Œæ‰€æœ‰çš„æ“ä½œå…¨é å‘½ä»¤å®Œæˆã€‚å¯¹äºŽå‘½ä»¤çš„ä½¿ç”¨éœ€è¦æ³¨æ„å…¶æ ¼å¼ã€‚1command [-options] [parameter]è¯´æ˜Žï¼šcommandï¼šå‘½ä»¤åï¼Œç›¸åº”åŠŸèƒ½çš„è‹±æ–‡å•è¯æˆ–å•è¯çš„ç¼©å†™[-options]ï¼šé€‰é¡¹ï¼Œå¯ç”¨æ¥å¯¹å‘½ä»¤è¿›è¡ŒæŽ§åˆ¶ï¼Œä¹Ÿå¯ä»¥çœç•¥parameterï¼šä¼ ç»™å‘½ä»¤çš„å‚æ•°ï¼Œå¯ä»¥æ˜¯ é›¶ä¸ªã€ä¸€ä¸ª æˆ–è€… å¤šä¸ª[] ä»£è¡¨å¯é€‰Â¶2. æŸ¥é˜…å‘½ä»¤çš„å¸®åŠ©æ–‡æ¡£ä¿¡æ¯å¯é€šè¿‡åœ¨å‘½ä»¤åŽåŠ --helpé€‰é¡¹æˆ–è€…åœ¨å‘½ä»¤çš„å‰é¢æ·»åŠ manå‘½ä»¤æ¥æŸ¥çœ‹ç›¸å…³å‘½ä»¤çš„å¸®åŠ©æ–‡æ¡£ä¿¡æ¯ã€‚Â¶2.1 --help1234#æ˜¾ç¤ºcommandå‘½ä»¤çš„å¸®åŠ©ä¿¡æ¯command --help#--helpå¯ç®€å†™ä¸º-hcommand -hÂ¶2.2 man12#æŸ¥é˜…commandå‘½ä»¤çš„ä½¿ç”¨æ‰‹å†Œman commandman æ˜¯ manual çš„ç¼©å†™ï¼Œæ˜¯ Linux æä¾›çš„ä¸€ä¸ª æ‰‹å†Œï¼ŒåŒ…å«äº†ç»å¤§éƒ¨åˆ†çš„å‘½ä»¤ã€å‡½æ•°çš„è¯¦ç»†ä½¿ç”¨è¯´æ˜Žä½¿ç”¨ man æ—¶çš„æ“ä½œé”®ï¼šæ“ä½œé”®åŠŸèƒ½ç©ºæ ¼é”®æ˜¾ç¤ºæ‰‹å†Œé¡µçš„ä¸‹ä¸€å±Enter é”®ä¸€æ¬¡æ»šåŠ¨æ‰‹å†Œé¡µçš„ä¸€è¡Œbå›žæ»šä¸€å±få‰æ»šä¸€å±qé€€å‡º/wordæœç´¢ word å­—ç¬¦ä¸²ðŸ’¡ æç¤ºï¼šåˆçº§é˜¶æ®µåªéœ€è¦ çŸ¥é“ é€šè¿‡ä»¥ä¸‹ä¸¤ç§æ–¹å¼å¯ä»¥æŸ¥è¯¢å‘½ä»¤çš„å¸®åŠ©ä¿¡æ¯å…ˆå­¦ä¹ å¸¸ç”¨å‘½ä»¤åŠå¸¸ç”¨é€‰é¡¹çš„ä½¿ç”¨å³å¯ï¼Œå·¥ä½œä¸­å¦‚æžœé‡åˆ°é—®é¢˜å¯ä»¥å€ŸåŠ© ç½‘ç»œæœç´¢Â¶äºŒã€åŸºç¡€å‘½ä»¤ç”±äºŽLinuxå‘½ä»¤å®žåœ¨å¤ªå¤šï¼Œä¸‹é¢å…ˆä»‹ç»æœ€æœ€å¸¸ç”¨çš„é€šç”¨åŸºæœ¬æ“ä½œå‘½ä»¤ã€‚åŽé¢ç« èŠ‚ä¼šæ‰©å±•æ€§åœ°è®²è¿°å…¶ä»–å‘½ä»¤ã€‚1234567891011121314151617181920#æŸ¥çœ‹å½“å‰æ–‡ä»¶å¤¹ä¸‹çš„å†…å®¹,listls#æŸ¥çœ‹å½“å‰æ‰€åœ¨æ–‡ä»¶å¤¹,print wrok directorypwd#åˆ‡æ¢æ–‡ä»¶å¤¹,change directorycd [ç›®å½•å]#å¦‚æžœæ–‡ä»¶ä¸å­˜åœ¨ï¼Œæ–°å»ºæ–‡ä»¶,touchtouch [æ–‡ä»¶å]#åˆ›å»ºç›®å½•,make directorymkdir [ç›®å½•å]#åˆ é™¤æŒ‡å®šçš„æ–‡ä»¶å,removerm [æ–‡ä»¶å]#æ¸…å±,clearclearÂ¶ä¸‰ã€å‘½ä»¤æ“ä½œæŠ€å·§åœ¨ä½¿ç”¨ç»ˆç«¯å‘½ä»¤çš„è¿‡ç¨‹ä¸­ï¼Œä½¿ç”¨ä¸€äº›æ“ä½œæŠ€å·§å¯ä»¥è¾…åŠ©æˆ‘ä»¬æ›´æœ‰æ•ˆçŽ‡åœ°å®Œæˆå·¥ä½œã€‚Â¶1. æ”¾å¤§ç»ˆç«¯çª—å£çš„å­—ä½“æ˜¾ç¤ºctrl + shift + =Â¶2. ç¼©å°ç»ˆç«¯çª—å£çš„å­—ä½“æ˜¾ç¤ºctrl + -Â¶3. è‡ªåŠ¨è¡¥å…¨åœ¨æ•²å‡º æ–‡ä»¶ï¼ç›®å½•ï¼å‘½ä»¤ çš„å‰å‡ ä¸ªå­—æ¯ä¹‹åŽï¼ŒæŒ‰ä¸‹ tab é”®ã€‚å¦‚æžœè¾“å…¥çš„æ²¡æœ‰æ­§ä¹‰ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨è¡¥å…¨ï¼Œå¦‚æžœè¿˜å­˜åœ¨å…¶ä»– æ–‡ä»¶ï¼ç›®å½•ï¼å‘½ä»¤ï¼Œå†æŒ‰ä¸€ä¸‹ tabé”®ï¼Œç³»ç»Ÿä¼šæç¤ºå¯èƒ½å­˜åœ¨çš„å‘½ä»¤ã€‚Â¶4. ç»ˆç«¯åŽ†å²å‘½ä»¤åˆ‡æ¢æŒ‰ ä¸Šï¼ä¸‹ å…‰æ ‡é”®å¯ä»¥åœ¨æ›¾ç»ä½¿ç”¨è¿‡çš„å‘½ä»¤ä¹‹é—´æ¥å›žåˆ‡æ¢Â¶5. é€€å‡ºæ‰§è¡Œä¸­çš„å‘½ä»¤å¦‚æžœæƒ³è¦é€€å‡ºé€‰æ‹©ï¼Œå¹¶ä¸”ä¸æƒ³æ‰§è¡Œå½“å‰é€‰ä¸­çš„å‘½ä»¤ï¼Œå¯ä»¥æŒ‰ ctrl + cÂ¶å››ã€æ–‡ä»¶ç®¡ç†Â¶1. æ–‡ä»¶ç³»ç»ŸÂ¶Windows æ–‡ä»¶ç³»ç»Ÿåœ¨ Windows ä¸‹ï¼Œæ‰“å¼€ â€œè®¡ç®—æœºâ€ï¼Œæˆ‘ä»¬çœ‹åˆ°çš„æ˜¯ä¸€ä¸ªä¸ªçš„é©±åŠ¨å™¨ç›˜ç¬¦ï¼šæ¯ä¸ªé©±åŠ¨å™¨éƒ½æœ‰è‡ªå·±çš„æ ¹ç›®å½•ç»“æž„ï¼Œè¿™æ ·å½¢æˆäº†å¤šä¸ªæ ‘å¹¶åˆ—çš„æƒ…å½¢ï¼Œå¦‚å›¾æ‰€ç¤ºï¼šÂ¶Linux æ–‡ä»¶ç³»ç»ŸÂ¶Linuxç›®å½•ç»“æž„åœ¨ Linux ä¸‹ï¼Œæˆ‘ä»¬æ˜¯çœ‹ä¸åˆ°è¿™äº›é©±åŠ¨å™¨ç›˜ç¬¦ï¼Œæˆ‘ä»¬çœ‹åˆ°çš„æ˜¯æ–‡ä»¶å¤¹ï¼ˆç›®å½•ï¼‰ï¼šUbuntu æ²¡æœ‰ç›˜ç¬¦è¿™ä¸ªæ¦‚å¿µï¼Œåªæœ‰ä¸€ä¸ªæ ¹ç›®å½• /ï¼Œæ‰€æœ‰å­ç›®å½•å’Œæ–‡ä»¶éƒ½åœ¨å®ƒä¸‹é¢Â¶Linuxä¸»è¦ç›®å½•ä»‹ç»/ï¼šæ ¹ç›®å½•ï¼Œåœ¨ linux ä¸‹æœ‰ä¸”åªæœ‰ä¸€ä¸ªæ ¹ç›®å½•ï¼Œæ‰€æœ‰çš„ä¸œè¥¿éƒ½æ˜¯ä»Žè¿™é‡Œå¼€å§‹ï¼Œå½“åœ¨ç»ˆç«¯é‡Œè¾“å…¥ /homeï¼Œå…¶å®žæ˜¯åœ¨å‘Šè¯‰ç”µè„‘ï¼Œå…ˆä»Ž /ï¼ˆæ ¹ç›®å½•ï¼‰å¼€å§‹ï¼Œå†è¿›å…¥åˆ° home ç›®å½•ã€‚/binã€/usr/binï¼šå¯æ‰§è¡ŒäºŒè¿›åˆ¶æ–‡ä»¶çš„ç›®å½•ï¼Œå¦‚å¸¸ç”¨çš„å‘½ä»¤lsã€tarã€mvã€catç­‰ã€‚/bootï¼šæ”¾ç½® linux ç³»ç»Ÿå¯åŠ¨æ—¶ç”¨åˆ°çš„ä¸€äº›æ–‡ä»¶ï¼Œå¦‚ linux çš„å†…æ ¸æ–‡ä»¶ï¼š/boot/vmlinuzï¼Œç³»ç»Ÿå¼•å¯¼ç®¡ç†å™¨ï¼š/boot/grubã€‚/devï¼šå­˜æ”¾linuxç³»ç»Ÿä¸‹çš„è®¾å¤‡æ–‡ä»¶ï¼Œè®¿é—®è¯¥ç›®å½•ä¸‹æŸä¸ªæ–‡ä»¶ï¼Œç›¸å½“äºŽè®¿é—®æŸä¸ªè®¾å¤‡ï¼Œå¸¸ç”¨çš„æ˜¯æŒ‚è½½å…‰é©±ã€‚/etcï¼šç³»ç»Ÿé…ç½®æ–‡ä»¶å­˜æ”¾çš„ç›®å½•ï¼Œä¸å»ºè®®åœ¨æ­¤ç›®å½•ä¸‹å­˜æ”¾å¯æ‰§è¡Œæ–‡ä»¶ï¼Œé‡è¦çš„é…ç½®æ–‡ä»¶æœ‰ï¼š/etc/inittab/etc/fstab/etc/init.d/etc/X11/etc/sysconfig/etc/xinetd.d/homeï¼šå­˜æ”¾ç³»ç»Ÿä¸­ç”¨æˆ·çš„ä¸»ç›®å½•ã€‚æ–°å¢žç”¨æˆ·è´¦å·æ—¶ï¼Œç”¨æˆ·çš„ä¸»ç›®å½•é»˜è®¤ä¸º/homeç›®å½•ä¸‹çš„ä¸€ä¸ªç”¨æˆ·åŒåçš„å­ç›®å½•ä¸­ã€‚å¦‚Linuxç³»ç»Ÿå­˜åœ¨ç”¨æˆ·testï¼Œåˆ™testç”¨æˆ·çš„ä¸»ç›®å½•ä¸ºï¼š /home/test~ ç¬¦å·è¡¨ç¤ºå½“å‰ç”¨æˆ·çš„ä¸»ç›®å½•è·¯å¾„ã€‚/libã€/usr/libã€/usr/local/libï¼šç³»ç»Ÿä½¿ç”¨çš„å‡½æ•°åº“çš„ç›®å½•ï¼Œç¨‹åºåœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œéœ€è¦è°ƒç”¨ä¸€äº›é¢å¤–çš„å‚æ•°æ—¶éœ€è¦å‡½æ•°åº“çš„ååŠ©ã€‚/lost+fountï¼šç³»ç»Ÿå¼‚å¸¸äº§ç”Ÿé”™è¯¯æ—¶ï¼Œä¼šå°†ä¸€äº›é—å¤±çš„ç‰‡æ®µæ”¾ç½®äºŽæ­¤ç›®å½•ä¸‹ã€‚/mnt ã€/mediaï¼šå…‰ç›˜é»˜è®¤æŒ‚è½½ç‚¹ï¼Œé€šå¸¸å…‰ç›˜æŒ‚è½½äºŽ /mnt/cdromä¸‹ï¼Œä½†ä¹Ÿä¸ä¸€å®šï¼Œå¯ä»¥é€‰æ‹©ä»»æ„ä½ç½®è¿›è¡ŒæŒ‚è½½ã€‚/optï¼šç»™ä¸»æœºé¢å¤–å®‰è£…è½¯ä»¶æ‰€æ‘†æ”¾çš„ç›®å½•/procï¼šæ­¤ç›®å½•çš„æ•°æ®éƒ½åœ¨å†…å­˜ä¸­ï¼Œå¦‚ç³»ç»Ÿæ ¸å¿ƒï¼Œå¤–éƒ¨è®¾å¤‡ï¼Œç½‘ç»œçŠ¶æ€ï¼Œç”±äºŽæ•°æ®éƒ½å­˜æ”¾äºŽå†…å­˜ä¸­ï¼Œæ‰€ä»¥ä¸å ç”¨ç£ç›˜ç©ºé—´ï¼Œæ¯”è¾ƒé‡è¦çš„æ–‡ä»¶æœ‰ï¼š/proc/cpuinfo/proc/interrupts/proc/dma/proc/ioports/proc/net//rootï¼šç³»ç»Ÿç®¡ç†å‘˜rootçš„ä¸»è¦ç›®å½•ã€‚/sbinã€/usr/sbinã€/usr/local/sbinï¼šæ”¾ç½®ç³»ç»Ÿç®¡ç†å‘˜ä½¿ç”¨çš„å¯æ‰§è¡Œå‘½ä»¤ï¼Œå¦‚ fdiskã€shutdownã€mountç­‰ã€‚ä¸Ž/bin ä¸åŒçš„æ˜¯ï¼Œè¿™å‡ ä¸ªç›®å½•æ˜¯ç»™ç³»ç»Ÿç®¡ç†å‘˜ root ä½¿ç”¨çš„å‘½ä»¤ï¼Œä¸€èˆ¬ç”¨æˆ·åªèƒ½&quot;æŸ¥çœ‹&quot;è€Œä¸èƒ½è®¾ç½®å’Œä½¿ç”¨ã€‚/tmpï¼šä¸€èˆ¬ç”¨æˆ·æˆ–æ­£åœ¨æ‰§è¡Œçš„ç¨‹åºä¸´æ—¶å­˜æ”¾æ–‡ä»¶çš„ç›®å½•ï¼Œä»»ä½•äººéƒ½å¯ä»¥è®¿é—®ï¼Œé‡è¦æ•°æ®ä¸å¯æ”¾ç½®åœ¨æ­¤ç›®å½•ä¸‹ã€‚/srvï¼šæœåŠ¡å¯åŠ¨ä¹‹åŽéœ€è¦è®¿é—®çš„æ•°æ®ç›®å½•ï¼Œå¦‚ www æœåŠ¡éœ€è¦è®¿é—®çš„ç½‘é¡µæ•°æ®å­˜æ”¾åœ¨ /srv/www å†…ã€‚/usrï¼šåº”ç”¨ç¨‹åºå­˜æ”¾ç›®å½•ï¼š/usr/binï¼šå­˜æ”¾åº”ç”¨ç¨‹åº/usr/shareï¼šå­˜æ”¾å…±äº«æ•°æ®/usr/libï¼šå­˜æ”¾ä¸èƒ½ç›´æŽ¥è¿è¡Œçš„ï¼Œå´æ˜¯è®¸å¤šç¨‹åºè¿è¡Œæ‰€å¿…éœ€çš„ä¸€äº›å‡½æ•°åº“æ–‡ä»¶/usr/localï¼šå­˜æ”¾è½¯ä»¶å‡çº§åŒ…/usr/share/docï¼šç³»ç»Ÿè¯´æ˜Žæ–‡ä»¶å­˜æ”¾ç›®å½•/usr/share/manï¼šç¨‹åºè¯´æ˜Žæ–‡ä»¶å­˜æ”¾ç›®å½•/varï¼šæ”¾ç½®ç³»ç»Ÿæ‰§è¡Œè¿‡ç¨‹ä¸­ç»å¸¸å˜åŒ–çš„æ–‡ä»¶ï¼š/var/logï¼šéšæ—¶æ›´æ”¹çš„æ—¥å¿—æ–‡ä»¶/var/spool/mailï¼šé‚®ä»¶å­˜æ”¾çš„ç›®å½•/var/runï¼šç¨‹åºæˆ–æœåŠ¡å¯åŠ¨åŽï¼Œå…¶ PID å­˜æ”¾åœ¨è¯¥ç›®å½•ä¸‹Â¶2. å¸¸ç”¨å‘½ä»¤Â¶1ï¼‰åˆ—å‡ºç›®å½•æ–‡ä»¶ï¼ˆlsã€treeï¼‰123456#åˆ—å‡ºç›®å½•æ–‡ä»¶ls#æ ‘çŠ¶å½¢å¼åˆ—å‡ºç›®å½•æ–‡ä»¶#é€‰æ‹©-dï¼šåªæ˜¾ç¤ºç›®å½•treels æ˜¯è‹±æ–‡å•è¯ list çš„ç®€å†™ï¼Œå…¶åŠŸèƒ½ä¸ºåˆ—å‡ºç›®å½•çš„å†…å®¹ï¼Œæ˜¯ç”¨æˆ·æœ€å¸¸ç”¨çš„å‘½ä»¤ä¹‹ä¸€ï¼Œç±»ä¼¼äºŽ DOSä¸‹çš„ dir å‘½ä»¤å¸¸ç”¨é€‰é¡¹ï¼š-aï¼šæ˜¾ç¤ºæŒ‡å®šç›®å½•ä¸‹æ‰€æœ‰å­ç›®å½•ä¸Žæ–‡ä»¶ï¼ŒåŒ…æ‹¬éšè—æ–‡ä»¶-lï¼šä»¥åˆ—è¡¨æ–¹å¼æ˜¾ç¤ºæ–‡ä»¶çš„è¯¦ç»†ä¿¡æ¯-hï¼šé…åˆ -l ä»¥äººæ€§åŒ–çš„æ–¹å¼æ˜¾ç¤ºæ–‡ä»¶å¤§å°é€šé…ç¬¦çš„ä½¿ç”¨ï¼š*ï¼šä»£è¡¨ä»»æ„ä¸ªæ•°ä¸ªå­—ç¬¦?ï¼šä»£è¡¨ä»»æ„ä¸€ä¸ªå­—ç¬¦ï¼Œè‡³å°‘ 1 ä¸ª[abc]ï¼šåŒ¹é… aã€bã€c ä¸­çš„ä»»æ„ä¸€ä¸ª[a-f]ï¼šåŒ¹é…ä»Ž a åˆ° f èŒƒå›´å†…çš„çš„ä»»æ„ä¸€ä¸ªå­—ç¬¦Linux ä¸‹æ–‡ä»¶å’Œç›®å½•çš„ç‰¹ç‚¹ï¼šLinux æ–‡ä»¶ æˆ–è€… ç›®å½• åç§°æœ€é•¿å¯ä»¥æœ‰ 256 ä¸ªå­—ç¬¦ä»¥ . å¼€å¤´çš„æ–‡ä»¶ä¸ºéšè—æ–‡ä»¶ï¼Œéœ€è¦ç”¨ -aå‚æ•°æ‰èƒ½æ˜¾ç¤º.ä»£è¡¨å½“å‰ç›®å½•.. ä»£è¡¨ä¸Šä¸€çº§ç›®å½•è®¡ç®—æœºä¸­æ–‡ä»¶å¤§å°çš„è¡¨ç¤ºæ–¹å¼å•ä½è‹±æ–‡å«ä¹‰å­—èŠ‚Bï¼ˆByteï¼‰åœ¨è®¡ç®—æœºä¸­ä½œä¸ºä¸€ä¸ªæ•°å­—å•å…ƒï¼Œä¸€èˆ¬ä¸º 8 ä½äºŒè¿›åˆ¶æ•°åƒKï¼ˆKibibyteï¼‰1 KB = 1024 Bï¼Œåƒå­—èŠ‚ ï¼ˆ1024 = 2 ** 10ï¼‰å…†Mï¼ˆMebibyteï¼‰1 MB = 1024 KBï¼Œç™¾ä¸‡å­—èŠ‚åƒå…†Gï¼ˆGigabyteï¼‰1 GB = 1024 MBï¼Œåäº¿å­—èŠ‚ï¼Œåƒå…†å­—èŠ‚å¤ªTï¼ˆTerabyteï¼‰1 TB = 1024 GBï¼Œä¸‡äº¿å­—èŠ‚ï¼Œå¤ªå­—èŠ‚æ‹Pï¼ˆPetabyteï¼‰1 PB = 1024 TBï¼Œåƒä¸‡äº¿å­—èŠ‚ï¼Œæ‹å­—èŠ‚è‰¾Eï¼ˆExabyteï¼‰1 EB = 1024 PBï¼Œç™¾äº¿äº¿å­—èŠ‚ï¼Œè‰¾å­—èŠ‚æ³½Zï¼ˆZettabyteï¼‰1 ZB = 1024 EBï¼Œåä¸‡äº¿äº¿å­—èŠ‚ï¼Œæ³½å­—èŠ‚å°§Yï¼ˆYottabyteï¼‰1 YB = 1024 ZBï¼Œä¸€äº¿äº¿äº¿å­—èŠ‚ï¼Œå°§å­—èŠ‚Â¶2ï¼‰åˆ‡æ¢ç›®å½•ï¼ˆ cd ï¼‰12345678910#åˆ‡æ¢åˆ°/usr/local/shareç›®å½•é‡Œcd /usr/local/share#åˆ‡æ¢åˆ°å½“å‰ç”¨æˆ·çš„ä¸»ç›®å½•(/home/ç”¨æˆ·ç›®å½•)cd ~ #æˆ–ï¼šcd#ä¿æŒåœ¨å½“å‰ç›®å½•ä¸å˜cd .#åˆ‡æ¢åˆ°ä¸Šçº§ç›®å½•cd ..#åœ¨æœ€è¿‘ä¸¤æ¬¡å·¥ä½œç›®å½•ä¹‹é—´æ¥å›žåˆ‡æ¢cd -cd æ˜¯è‹±æ–‡å•è¯ change directory çš„ç®€å†™ï¼Œå…¶åŠŸèƒ½ä¸ºæ›´æ”¹å½“å‰çš„å·¥ä½œç›®å½•ï¼Œä¹Ÿæ˜¯ç”¨æˆ·æœ€å¸¸ç”¨çš„å‘½ä»¤ä¹‹ä¸€ã€‚æ³¨æ„ï¼šLinux æ‰€æœ‰çš„ ç›®å½• å’Œ æ–‡ä»¶å éƒ½æ˜¯å¤§å°å†™æ•æ„Ÿçš„ã€‚å…³äºŽç›¸å¯¹è·¯å¾„å’Œç»å¯¹è·¯å¾„çš„è¯´æ˜Žï¼šç›¸å¯¹è·¯å¾„ åœ¨è¾“å…¥è·¯å¾„æ—¶ï¼Œæœ€å‰é¢ä¸æ˜¯ / æˆ–è€…**~**ï¼Œè¡¨ç¤ºç›¸å¯¹ å½“å‰ç›®å½• æ‰€åœ¨çš„ç›®å½•ä½ç½®ç»å¯¹è·¯å¾„ åœ¨è¾“å…¥è·¯å¾„æ—¶ï¼Œæœ€å‰é¢æ˜¯ /æˆ–è€…~ï¼Œè¡¨ç¤ºä»Ž æ ¹ç›®å½•/å®¶ç›®å½• å¼€å§‹çš„å…·ä½“ç›®å½•ä½ç½®Â¶3ï¼‰åˆ›å»ºå’Œåˆ é™¤æ“ä½œï¼ˆtouchã€mkdirã€rmï¼‰1234567891011#åˆ›å»ºæ–‡ä»¶touch filename.txt#åˆ›å»ºç›®å½•mkdir test-dir#åˆ é™¤æ–‡ä»¶æˆ–ç›®å½•#-fï¼šå¼ºåˆ¶åˆ é™¤ï¼Œå¿½ç•¥ä¸å­˜åœ¨çš„æ–‡ä»¶ï¼Œæ— éœ€æç¤º#-rï¼šé€’å½’åœ°åˆ é™¤ç›®å½•ä¸‹çš„å†…å®¹ï¼Œåˆ é™¤æ–‡ä»¶å¤¹æ—¶å¿…é¡»åŠ æ­¤é€‰é¡¹rm -f filename.txt #å¼ºåˆ¶åˆ é™¤filename.txtæ–‡ä»¶rm -rf test-dir #å¼ºåˆ¶åˆ é™¤ç›®å½•ä»¥åŠå…¶å†…å®¹Â¶4ï¼‰æ‹·è´å’Œç§»åŠ¨æ–‡ä»¶ï¼ˆcpã€mvï¼‰1234567891011121314151617##å¤åˆ¶æ–‡ä»¶æˆ–è€…ç›®å½•#-iï¼šè¦†ç›–æ–‡ä»¶å‰æç¤º#-rï¼šè‹¥ç»™å‡ºçš„æºæ–‡ä»¶æ˜¯ç›®å½•æ–‡ä»¶ï¼Œåˆ™ cp å°†é€’å½’å¤åˆ¶è¯¥ç›®å½•ä¸‹çš„æ‰€æœ‰å­ç›®å½•å’Œæ–‡ä»¶ï¼Œç›®æ ‡æ–‡ä»¶å¿…é¡»ä¸ºä¸€ä¸ªç›®å½•åcp æºæ–‡ä»¶ ç›®æ ‡æ–‡ä»¶##ç§»åŠ¨æ–‡ä»¶æˆ–è€…ç›®å½• æˆ– é‡å‘½å# mvå‘½ä»¤ï¼ˆmvè‹±æ–‡ï¼šmoveï¼‰å¯ä»¥ç”¨æ¥ç§»åŠ¨æ–‡ä»¶æˆ–ç›®å½•ï¼Œä¹Ÿå¯ä»¥ç»™æ–‡ä»¶æˆ–ç›®å½•é‡å‘½å#-iï¼šè¦†ç›–æ–‡ä»¶å‰æç¤ºmv æºæ–‡ä»¶ ç›®æ ‡æ–‡ä»¶#ç¤ºä¾‹ 1ï¼šå°†ä¸€ä¸ªç›®å½•ç§»åŠ¨ä¸ºå¦ä¸€ä¸ªç›®å½• #å¦‚æžœç›®æ ‡ç›®å½•å·²ç»å­˜åœ¨ï¼Œåˆ™å°†åŽŸç›®å½•ç§»åŠ¨åˆ°å·²å­˜åœ¨çš„ç›®æ ‡ç›®å½•é‡Œé¢ #å¦‚æžœç›®æ ‡ç›®å½•ä¸å­˜åœ¨ï¼Œåˆ™å°†åŽŸç›®å½•ç§»åŠ¨ä¸ºä¸€ä¸ªæ–°çš„ç›®æ ‡ç›®å½•ï¼ˆå³ç›®å½•é‡å‘½åï¼‰mv source_dir dest_dir #ç§»åŠ¨è¿‡ç¨‹åŒ…æ‹¬æ‰€æœ‰æ–‡ä»¶ï¼ˆå«éšè—æ–‡ä»¶ï¼‰#ç¤ºä¾‹ 2ï¼šå°†ä¸€ä¸ªç›®å½•ä¸­çš„æ‰€æœ‰æ–‡ä»¶ï¼ˆåŒ…æ‹¬éšè—æ–‡ä»¶ï¼‰ç§»åŠ¨åˆ°å¦ä¸€ä¸ªç›®å½•mv source_dir/* dest_dir/ #ç§»åŠ¨è¿‡ç¨‹åŒ…æ‹¬ä»…åŒ…æ‹¬æ‰€æœ‰éžéšè—æ–‡ä»¶mv source_dir/.* dest_dir/ #ç§»åŠ¨è¿‡ç¨‹åŒ…æ‹¬ä»…åŒ…æ‹¬æ‰€æœ‰éšè—æ–‡ä»¶Â¶5ï¼‰æŸ¥çœ‹æ–‡ä»¶å†…å®¹ï¼ˆcatã€more ã€grepã€tailï¼‰Â¶ï¼ˆ1ï¼‰cat æŸ¥çœ‹æ–‡ä»¶çš„æ‰€æœ‰å†…å®¹cat ï¼ˆconcatenateï¼‰å‘½ä»¤å¯ä»¥ç”¨æ¥ æŸ¥çœ‹æ–‡ä»¶å†…å®¹ã€åˆ›å»ºæ–‡ä»¶ã€æ–‡ä»¶åˆå¹¶ã€è¿½åŠ æ–‡ä»¶å†…å®¹ ç­‰åŠŸèƒ½ã€‚cat ä¼šä¸€æ¬¡æ˜¾ç¤ºæ‰€æœ‰çš„å†…å®¹ï¼Œé€‚åˆ æŸ¥çœ‹å†…å®¹è¾ƒå°‘ çš„æ–‡æœ¬æ–‡ä»¶ã€‚12#æŸ¥çœ‹hello.txtæ–‡ä»¶çš„æ‰€æœ‰å†…å®¹cat hello.txtå¸¸ç”¨é€‰é¡¹ï¼š-bï¼šè¦†å¯¹éžç©ºè¾“å‡ºè¡Œç¼–å·-nï¼šå¯¹è¾“å‡ºçš„æ‰€æœ‰è¡Œç¼–å·Linux ä¸­è¿˜æœ‰ä¸€ä¸ª nl çš„å‘½ä»¤å’Œ cat -b çš„æ•ˆæžœç­‰ä»·Â¶ï¼ˆ2ï¼‰more åˆ†å±æ˜¾ç¤ºæ–‡ä»¶å†…å®¹more å‘½ä»¤å¯ä»¥ç”¨äºŽåˆ†å±æ˜¾ç¤ºæ–‡ä»¶å†…å®¹ï¼Œæ¯æ¬¡åªæ˜¾ç¤ºä¸€é¡µå†…å®¹é€‚åˆäºŽ æŸ¥çœ‹å†…å®¹è¾ƒå¤šçš„æ–‡æœ¬æ–‡ä»¶12#åˆ†å±æ˜¾ç¤ºhello.txtæ–‡ä»¶å†…å®¹more hello.txtä½¿ç”¨ more çš„æ“ä½œé”®ï¼šæ“ä½œé”®åŠŸèƒ½ç©ºæ ¼é”®æ˜¾ç¤ºæ‰‹å†Œé¡µçš„ä¸‹ä¸€å±Enter é”®ä¸€æ¬¡æ»šåŠ¨æ‰‹å†Œé¡µçš„ä¸€è¡Œbå›žæ»šä¸€å±få‰æ»šä¸€å±qé€€å‡º/wordæœç´¢ word å­—ç¬¦ä¸²Â¶ï¼ˆ3ï¼‰grep æœç´¢æ–‡æœ¬æ–‡ä»¶å†…å®¹Linux ç³»ç»Ÿä¸­ grep å‘½ä»¤æ˜¯ä¸€ç§å¼ºå¤§çš„æ–‡æœ¬æœç´¢å·¥å…·ã€‚grepå…è®¸å¯¹æ–‡æœ¬æ–‡ä»¶è¿›è¡Œ æ¨¡å¼æŸ¥æ‰¾ï¼Œæ‰€è°“æ¨¡å¼æŸ¥æ‰¾ï¼Œåˆè¢«ç§°ä¸ºæ­£åˆ™è¡¨è¾¾å¼ã€‚12#æ˜¾ç¤ºåŒ¹é…åŒ…å«qcmokeå­—ç¬¦ä¸²çš„è¡ŒåŠè¡Œå·grep -n qcmoke hello.txtå‘½ä»¤é€‰é¡¹ï¼š-nï¼šæ˜¾ç¤ºåŒ¹é…è¡ŒåŠè¡Œå·-vï¼šæ˜¾ç¤ºä¸åŒ…å«åŒ¹é…æ–‡æœ¬çš„æ‰€æœ‰è¡Œï¼ˆç›¸å½“äºŽæ±‚åï¼‰-iï¼šå¿½ç•¥å¤§å°å†™å¸¸ç”¨çš„ä¸¤ç§æ¨¡å¼æŸ¥æ‰¾ï¼š^aï¼š è¡Œé¦–ï¼Œæœå¯»ä»¥ a å¼€å¤´çš„è¡Œke$ï¼šè¡Œå°¾ï¼Œæœå¯»ä»¥ ke ç»“æŸçš„è¡ŒÂ¶ï¼ˆ4ï¼‰tail å–å‡ºæ–‡ä»¶åŽé¢å‡ è¡Œ12345678#å–å‡ºæ–‡ä»¶åŽé¢10è¡Œtail hello.txt# é»˜è®¤çš„æƒ…å†µä¸­ï¼Œæ˜¾ç¤ºæœ€åŽçš„åè¡Œï¼è‹¥è¦æ˜¾ç¤ºæœ€åŽçš„ 20 è¡Œï¼Œå°±å¾—è¦è¿™æ ·ï¼štail -n 20 /etc/nginx/nginx.conf#ä¾¦æµ‹æ–‡ä»¶å°¾éƒ¨10è¡Œtail -n 10 -f ~/logs/web2019-10-10.logå‘½ä»¤é€‰é¡¹ï¼š-nï¼šåŽé¢æŽ¥æ•°å­—ï¼Œä»£è¡¨æ˜¾ç¤ºå‡ è¡Œçš„æ„æ€-fï¼šä¾¦æµ‹æ–‡ä»¶å°¾éƒ¨ï¼Œè¦ç­‰åˆ°æŒ‰ä¸‹[ctrl]-cæ‰ä¼šç»“æŸtailçš„ä¾¦æµ‹å³ï¼Œå¦‚æžœæ–‡ä»¶å°¾éƒ¨å†…å®¹è¢«æ›´æ”¹ï¼Œä¹Ÿä¼šéšç€æ˜¾ç¤ºæœ€æ–°å°¾éƒ¨å†…å®¹ï¼Œå¸¸ç”¨äºŽæŸ¥çœ‹æ—¥å¿—ã€‚Â¶6ï¼‰æŸ¥æ‰¾æ–‡ä»¶ï¼ˆ find ï¼‰find å‘½ä»¤åŠŸèƒ½éžå¸¸å¼ºå¤§ï¼Œé€šå¸¸ç”¨æ¥åœ¨ ç‰¹å®šçš„ç›®å½•ä¸‹ æœç´¢ ç¬¦åˆæ¡ä»¶çš„æ–‡ä»¶1234567891011121314151617181920#æœç´¢ä¸»ç›®å½•ä¸‹ï¼Œæ–‡ä»¶ååŒ…å«helloçš„æ–‡ä»¶find ~ -name "hello*"#æœç´¢/etcç›®å½•ä¸‹ï¼Œæ‰€æœ‰ä»¥.confä¸ºæ‰©å±•åçš„æ–‡ä»¶find /etc -name "*.conf"#æœç´¢/homeç›®å½•ä¸‹ï¼Œä»¥æ•°å­—1å¼€å¤´çš„æ–‡ä»¶find /home ~ -name "1*"#-type f: åªæŸ¥æ‰¾æ™®é€šæ–‡ä»¶ï¼›-not -name æŽ’é™¤æ–‡ä»¶ååŒ…å« â€œtestâ€ å­—ç¬¦ä¸²çš„æ–‡ä»¶find /path/to/dir -type f -name "*.txt" -not -name "*test*"#ä½¿ç”¨ -not -path å‚æ•°æŽ’é™¤ä¸ç¬¦åˆæ¡ä»¶çš„ç›®å½•find . -name "node_modules" -not -path "./test/*"#æŸ¥æ‰¾å‡ºå½“å‰ç›®å½•åŠæ‰€æœ‰å­ç›®å½•ä¸‹çš„æ–‡ä»¶å¤§å°å¤§äºŽ1Gä¸”å°äºŽ3Gçš„æ‰€æœ‰æ–‡ä»¶ï¼Œå¹¶æ˜¾ç¤ºå‡ºå…¶æ–‡ä»¶å¤§å° # -type d è¡¨ç¤ºæŸ¥æ‰¾çš„å¯¹è±¡æ˜¯ç›®å½• # -exec du -h &#123;&#125; \; è¡¨ç¤ºå¯¹æ‰¾åˆ°çš„æ¯ä¸ªç›®å½•æ‰§è¡Œ du -h å‘½ä»¤ï¼Œ&#123;&#125; ä¼šè¢«æ›¿æ¢ä¸ºæ‰¾åˆ°çš„ç›®å½•è·¯å¾„ã€‚find . -type f -size +1G -size -3G -exec du -h &#123;&#125; \;è¯´æ˜Žï¼š-name pattern: #æŒ‰ç…§æ–‡ä»¶ååŒ¹é…æ¨¡å¼æŸ¥æ‰¾æ–‡ä»¶ã€‚ä¾‹å¦‚ -name â€œ*.txtâ€ æŸ¥æ‰¾æ‰©å±•åä¸º .txt çš„æ–‡ä»¶ã€‚-iname pattern: #ç±»ä¼¼ -nameï¼Œä½†æ˜¯ä¸åŒºåˆ†å¤§å°å†™ã€‚-type type: #æ ¹æ®æ–‡ä»¶ç±»åž‹æŸ¥æ‰¾æ–‡ä»¶ï¼Œtype å¯ä»¥ä¸º f (æ™®é€šæ–‡ä»¶)ã€d (ç›®å½•)ã€l (ç¬¦å·é“¾æŽ¥) ç­‰ã€‚-mtime n: #æŸ¥æ‰¾åœ¨ n å¤©å‰è¢«ä¿®æ”¹è¿‡çš„æ–‡ä»¶ï¼Œn ä¸ºè´Ÿæ•°è¡¨ç¤ºæŸ¥æ‰¾ n å¤©å†…è¢«ä¿®æ”¹è¿‡çš„æ–‡ä»¶ã€‚-size n[bck]: #æŸ¥æ‰¾æ–‡ä»¶å¤§å°ä¸º n çš„æ–‡ä»¶ï¼Œå•ä½ä¸ºå­—èŠ‚ï¼ˆé»˜è®¤ï¼‰ã€å—æˆ–åƒå­—èŠ‚ã€‚b è¡¨ç¤ºå—ï¼Œc è¡¨ç¤ºåƒå­—èŠ‚ã€‚-user name: #æŸ¥æ‰¾å±žäºŽæŒ‡å®šç”¨æˆ·åçš„æ–‡ä»¶ã€‚-group name: #æŸ¥æ‰¾å±žäºŽæŒ‡å®šç”¨æˆ·ç»„çš„æ–‡ä»¶ã€‚-perm mode: #æŸ¥æ‰¾æƒé™ä¸ŽæŒ‡å®šå‚æ•° mode åŒ¹é…çš„æ–‡ä»¶ã€‚mode å¯ä»¥ä¸ºç±»ä¼¼ 644 è¿™æ ·çš„å…«è¿›åˆ¶æ•°ï¼Œä¹Ÿå¯ä»¥ä¸ºç±»ä¼¼ u=rw,g=r,o=r è¿™æ ·çš„ç¬¦å·è¡¨ç¤ºæ³•ã€‚-exec command {} \;: #å¯¹æ¯ä¸ªæ‰¾åˆ°çš„æ–‡ä»¶æ‰§è¡Œ command å‘½ä»¤ã€‚å…¶ä¸­ {} è¡¨ç¤ºå½“å‰åŒ¹é…åˆ°çš„æ–‡ä»¶åï¼Œ; è¡¨ç¤ºå‘½ä»¤ç»“æŸã€‚-not expr: #å¯¹è¡¨è¾¾å¼ expr æ±‚åï¼Œå³æŽ’é™¤æ»¡è¶³æ¡ä»¶çš„æ–‡ä»¶ã€‚-path pattern: #æŸ¥æ‰¾è·¯å¾„ååŒ¹é…æ¨¡å¼çš„æ–‡ä»¶ã€‚ä¾‹å¦‚ -path â€œ/home/user/*.txtâ€ æŸ¥æ‰¾ /home/user/ ç›®å½•ä¸‹æ‰€æœ‰æ‰©å±•åä¸º .txt çš„æ–‡ä»¶ã€‚å¦‚æžœçœç•¥è·¯å¾„ï¼Œè¡¨ç¤ºåœ¨å½“å‰æ–‡ä»¶å¤¹ä¸‹æŸ¥æ‰¾Â¶7ï¼‰æŸ¥çœ‹ç›®å½•æˆ–æ–‡ä»¶å ç”¨å¤§å°ï¼ˆ du ï¼‰12345678910#é€’å½’æŸ¥çœ‹ç›®å½•åŠå…¶å­ç›®å½•çš„å¤§å°ï¼ˆä¸å«éžç›®å½•çš„æ–‡ä»¶å¤§å°ï¼‰du -h [ç›®å½•å]#æŸ¥çœ‹æŒ‡å®šç›®å½•çš„æ€»å¤§å°ï¼ˆä¸å«å­ç›®å½•å’Œæ–‡ä»¶å¤§å°ï¼‰du -sh [ç›®å½•å]#æŸ¥çœ‹ç›®å½•ã€å­ç›®å½•ã€æ–‡ä»¶çš„å¤§å°du -ah [ç›®å½•å]#æŸ¥çœ‹ç›®å½•ä¸‹æ‰€æœ‰ä¸€çº§å­ç›®å½•ã€æ–‡ä»¶çš„å¤§å°du -ah --max-depth=1 [ç›®å½•å]#æŸ¥çœ‹ç›®å½•ä¸‹æ‰€æœ‰ä¸€çº§å­ç›®å½•ã€æ–‡ä»¶çš„å¤§å°ï¼Œå¹¶è¿›è¡Œå€’åºæŽ’åºdu -ah --max-depth=1|sort -nr [ç›®å½•å]è¯´æ˜Žï¼š-sï¼šåªæ˜¾ç›®å½•çš„æ€»å¤§å°ï¼Œä¸æ˜¾ç¤ºæ¯ä¸ªå­ç›®å½•å’Œæ–‡ä»¶çš„å¤§å°ã€‚-aï¼šåˆ—å‡ºæ‰€æœ‰æ–‡ä»¶å’Œå­ç›®å½•çš„å¤§å°ï¼Œè€Œä¸ä»…ä»…æ˜¯ç›®å½•ã€‚-hï¼šä»¥äººç±»å¯è¯»çš„æ–¹å¼æ˜¾ç¤ºæ–‡ä»¶å¤§å°ï¼Œä¾‹å¦‚ï¼š1Kã€4.5Mã€2G ç­‰ã€‚-bï¼šä»¥å­—èŠ‚ä¸ºå•ä½æ˜¾ç¤ºæ–‡ä»¶å¤§å°ã€‚-cï¼šåŒæ—¶æ˜¾ç¤ºå¤šä¸ªæ–‡ä»¶æˆ–ç›®å½•çš„æ€»å¤§å°ã€‚-xï¼šä¸é€’å½’å¤„ç†æŒ‡å®šç›®å½•ä¸‹çš„å­ç›®å½•ã€‚Â¶8ï¼‰é“¾æŽ¥ï¼ˆ ln ï¼‰Â¶ç®€è¦æ¦‚è¿°Â¶è½¯é“¾æŽ¥123#åˆ›å»ºæ–‡ä»¶çš„è½¯é“¾æŽ¥ï¼Œç”¨é€šä¿—çš„æ–¹å¼è®²ç±»ä¼¼äºŽWindowsä¸‹çš„å¿«æ·æ–¹å¼ã€‚#åˆ é™¤è½¯é“¾æŽ¥ä¸ä¼šå½±å“æºæ–‡ä»¶ï¼Œä½†æºæ–‡ä»¶è¢«åˆ é™¤äº†ï¼Œé‚£ä¹ˆè½¯è¿žæŽ¥å°±ä¸å¯ç”¨äº†ln -s &lt;è¢«é“¾æŽ¥çš„æºæ–‡ä»¶ç»å¯¹è·¯å¾„&gt; &lt;é“¾æŽ¥æ–‡ä»¶è·¯å¾„&gt;è½¯é“¾æŽ¥çš„ç‰¹ç‚¹ï¼šï¼ˆ1ï¼‰è½¯é“¾æŽ¥ï¼Œä»¥è·¯å¾„çš„å½¢å¼å­˜åœ¨ã€‚ç±»ä¼¼äºŽWindowsæ“ä½œç³»ç»Ÿä¸­çš„å¿«æ·æ–¹å¼ï¼ˆ2ï¼‰è½¯é“¾æŽ¥å¯ä»¥ è·¨æ–‡ä»¶ç³»ç»Ÿ ï¼Œç¡¬é“¾æŽ¥ä¸å¯ä»¥ï¼ˆ3ï¼‰è½¯é“¾æŽ¥å¯ä»¥å¯¹ä¸€ä¸ªä¸å­˜åœ¨çš„æ–‡ä»¶åè¿›è¡Œé“¾æŽ¥ï¼ˆ4ï¼‰è½¯é“¾æŽ¥å¯ä»¥å¯¹ç›®å½•è¿›è¡Œé“¾æŽ¥æ³¨æ„ï¼šï¼ˆ1ï¼‰æ²¡æœ‰ -s é€‰é¡¹å»ºç«‹çš„æ˜¯ä¸€ä¸ª ç¡¬é“¾æŽ¥æ–‡ä»¶ï¼ˆå¯¹äºŽç¡¬é“¾æŽ¥æ–‡ä»¶ï¼Œä¸¤ä¸ªæ–‡ä»¶å ç”¨ç›¸åŒå¤§å°çš„ç¡¬ç›˜ç©ºé—´ï¼Œå·¥ä½œä¸­å‡ ä¹Žä¸ä¼šå»ºç«‹æ–‡ä»¶çš„ç¡¬é“¾æŽ¥ï¼‰ï¼ˆ2ï¼‰è¢«é“¾æŽ¥çš„æºæ–‡ä»¶è¦ä½¿ç”¨ç»å¯¹è·¯å¾„ï¼Œä¸èƒ½ä½¿ç”¨ç›¸å¯¹è·¯å¾„ï¼Œè¿™æ ·å¯ä»¥æ–¹ä¾¿ç§»åŠ¨é“¾æŽ¥æ–‡ä»¶åŽï¼Œä»ç„¶èƒ½å¤Ÿæ­£å¸¸ä½¿ç”¨Â¶ç¡¬é“¾æŽ¥12#åˆ é™¤ç¡¬é“¾æŽ¥ï¼Œä¸ä¼šå½±å“æºæ–‡ä»¶,åŒæ ·çš„åˆ é™¤æºæ–‡ä»¶ä¹Ÿä¸ä¼šå½±å“ç¡¬é“¾æŽ¥,åªåˆ é™¤ä¸€ä¸ªè¿žæŽ¥å¹¶ä¸å½±å“ç´¢å¼•èŠ‚ç‚¹æœ¬èº«å’Œå…¶å®ƒçš„è¿žæŽ¥ï¼Œåªæœ‰å½“æœ€åŽä¸€ä¸ªè¿žæŽ¥è¢«åˆ é™¤åŽï¼Œæ–‡ä»¶çš„æ•°æ®å—åŠç›®å½•çš„è¿žæŽ¥æ‰ä¼šè¢«é‡Šæ”¾ln è¢«é“¾æŽ¥çš„æºæ–‡ä»¶ é“¾æŽ¥æ–‡ä»¶ç¡¬é“¾æŽ¥çš„ç‰¹ç‚¹ï¼šï¼ˆ1ï¼‰ç¡¬é“¾æŽ¥ï¼Œä»¥æ–‡ä»¶å‰¯æœ¬çš„å½¢å¼å­˜åœ¨ã€‚ä½†ä¸å ç”¨å®žé™…ç©ºé—´ã€‚ï¼ˆ2ï¼‰ä¸å…è®¸ç»™ç›®å½•åˆ›å»ºç¡¬é“¾æŽ¥ï¼ˆ3ï¼‰ç¡¬é“¾æŽ¥åªæœ‰åœ¨åŒä¸€ä¸ªæ–‡ä»¶ç³»ç»Ÿä¸­æ‰èƒ½åˆ›å»ºè¯´æ˜Žï¼šåœ¨ Linux ä¸­ï¼Œæ–‡ä»¶å å’Œ æ–‡ä»¶çš„æ•°æ® æ˜¯åˆ†å¼€å­˜å‚¨çš„åœ¨ Linux ä¸­ï¼Œåªæœ‰æ–‡ä»¶çš„ ç¡¬é“¾æŽ¥æ•° == 0 æ‰ä¼šè¢«åˆ é™¤ä½¿ç”¨ ls -l å¯ä»¥æŸ¥çœ‹ä¸€ä¸ªæ–‡ä»¶çš„ç¡¬é“¾æŽ¥çš„æ•°é‡åœ¨æ—¥å¸¸å·¥ä½œä¸­ï¼Œå‡ ä¹Žä¸ä¼šå»ºç«‹æ–‡ä»¶çš„ç¡¬é“¾æŽ¥ï¼ŒçŸ¥é“å³å¯Â¶9ï¼‰æ‰“åŒ… å’Œ è§£åŒ…ï¼ˆ tar ï¼‰tar æ˜¯ Linux ä¸­æœ€å¸¸ç”¨çš„ å¤‡ä»½å·¥å…·ï¼Œæ­¤å‘½ä»¤å¯ä»¥ æŠŠä¸€ç³»åˆ—æ–‡ä»¶ æ‰“åŒ…åˆ° ä¸€ä¸ªå¤§æ–‡ä»¶ä¸­ï¼Œä¹Ÿå¯ä»¥æŠŠä¸€ä¸ª æ‰“åŒ…çš„å¤§æ–‡ä»¶æ¢å¤æˆä¸€ç³»åˆ—æ–‡ä»¶12345# æ‰“åŒ…æ–‡ä»¶ï¼ˆä¸åŽ‹ç¼©ï¼‰tar -cvf æ‰“åŒ…æ–‡ä»¶.tar è¢«æ‰“åŒ…çš„æ–‡ä»¶ï¼è·¯å¾„...# è§£åŒ…æ–‡ä»¶tar -xvf æ‰“åŒ…æ–‡ä»¶.taré€‰é¡¹è¯´æ˜Žcï¼šç”Ÿæˆæ¡£æ¡ˆæ–‡ä»¶ï¼Œåˆ›å»ºæ‰“åŒ…æ–‡ä»¶xï¼šè§£å¼€æ¡£æ¡ˆæ–‡ä»¶vï¼šåˆ—å‡ºå½’æ¡£è§£æ¡£çš„è¯¦ç»†è¿‡ç¨‹ï¼Œæ˜¾ç¤ºè¿›åº¦fï¼šæŒ‡å®šæ¡£æ¡ˆæ–‡ä»¶åç§°ï¼Œf åŽé¢ä¸€å®šæ˜¯ .tar æ–‡ä»¶ï¼Œæ‰€ä»¥å¿…é¡»æ”¾é€‰é¡¹æœ€åŽæ³¨æ„ï¼šf é€‰é¡¹å¿…é¡»æ”¾åœ¨æœ€åŽï¼Œå…¶ä»–é€‰é¡¹é¡ºåºå¯ä»¥éšæ„Â¶10ï¼‰åŽ‹ç¼© å’Œ è§£åŽ‹ç¼©Â¶ï¼ˆ1ï¼‰gzipgzip æ˜¯linuxä¸­å¸¸è§çš„åŽ‹ç¼©/è§£åŽ‹å·¥å…·ï¼Œæœ€å¸¸è§çš„ä½¿ç”¨å¯¹è±¡æ˜¯*.gzæ ¼å¼çš„æ–‡ä»¶ã€‚OPTIONS-c --stdout --to-stdout ç»“æžœå†™åˆ°æ ‡å‡†è¾“å‡ºï¼ŒåŽŸæ–‡ä»¶ä¿æŒä¸å˜-d --decompress --uncompress è§£åŽ‹-k --keep åŽ‹ç¼©æˆ–è€…è§£åŽ‹è¿‡ç¨‹ä¸­ï¼Œä¿ç•™åŽŸæ–‡ä»¶-r --recursive-t --test æ£€æŸ¥åŽ‹ç¼©æ–‡ä»¶çš„å®Œæ•´æ€§-v --verbose æ˜¾ç¤ºæ¯ä¸ªæ–‡ä»¶çš„åå­å’ŒåŽ‹ç¼©çŽ‡-&lt;åŽ‹ç¼©æ•ˆçŽ‡&gt; åŽ‹ç¼©æ•ˆçŽ‡æ˜¯ä¸€ä¸ªä»‹äºŽ1ï¼9çš„æ•°å€¼ï¼Œé¢„è®¾å€¼ä¸º&quot;6&quot;ï¼ŒæŒ‡å®šæ„ˆå¤§çš„æ•°å€¼ï¼ŒåŽ‹ç¼©æ•ˆçŽ‡å°±ä¼šæ„ˆé«˜ã€‚â€“best æ­¤å‚æ•°çš„æ•ˆæžœå’ŒæŒ‡å®š&quot;-9&quot;å‚æ•°ç›¸åŒã€‚â€“fast æ­¤å‚æ•°çš„æ•ˆæžœå’ŒæŒ‡å®š&quot;-1&quot;å‚æ•°ç›¸åŒã€‚ç¤ºä¾‹1ï¼ŒåŽ‹ç¼©æ–‡ä»¶åŽŸæ–‡ä»¶åä¸ºfile1.txtï¼ŒåŽ‹ç¼©åŽåŽŸæ–‡ä»¶æ¶ˆå¤±ï¼ŒåŽ‹ç¼©åŽæ–‡ä»¶åä¸ºfile1.txt.gz12345root@ubuntu:/tmp# ls -l file1.*-rw-r--r-- 1 root root 12383865 Aug 21 08:08 file1.txtroot@ubuntu:/tmp# gzip file1.txtroot@ubuntu:/tmp# ls -l file1.*-rw-r--r-- 1 root root 134416 Aug 21 08:08 file1.txt.gzç¤ºä¾‹2ï¼Œè§£åŽ‹æ–‡ä»¶123root@ubuntu:/tmp# gzip -d file1.txt.gzroot@ubuntu:/tmp# ls -lh file1.*-rw-r--r-- 1 root root 12M Aug 21 08:08 file1.txtç¤ºä¾‹3ï¼ŒåŽ‹ç¼©çš„æ—¶å€™ï¼Œæ˜¾ç¤ºåŽ‹ç¼©çŽ‡12root@ubuntu:/tmp# gzip -v file1.txtfile1.txt: 98.9% -- replaced with file1.txt.gzç¤ºä¾‹4ï¼Œä¸€æ¡å‘½ä»¤åŽ‹ç¼©å¤šä¸ªæ–‡ä»¶ï¼ŒåŽ‹ç¼©ä¹‹åŽï¼Œæ˜¯å„è‡ªåˆ†å¼€çš„ï¼š12345root@ubuntu:/tmp# gzip file1.txt file2.txtroot@ubuntu:/tmp# ls -ltotal 1348-rw-r--r-- 1 root root 134416 Aug 21 08:08 file1.txt.gz-rw-r--r-- 1 root root 392 Aug 21 08:15 file2.txt.gzç¤ºä¾‹5ï¼ŒåŽ‹ç¼©è¿‡ç¨‹ä¸­ï¼Œä¿ç•™åŽŸæ–‡ä»¶123root@ubuntu:/tmp# gzip -k file1.txtroot@ubuntu:/tmp# ls file1.*file1.txt file1.txt.gzç¤ºä¾‹6ï¼ŒåŽ‹ç¼©åˆ°æ ‡å‡†è¾“å‡ºä¸­å¯ä»¥è¿žæŽ¥ä¸¤ä¸ªæ–‡ä»¶123root@ubuntu:/tmp# cat file1.txt file2.txt | gzip &gt; foo.gzæˆ–è€…root@ubuntu:/tmp# gzip -c file1.txt file2.txt &gt; foo.gzÂ¶ï¼ˆ2ï¼‰gunzipè§£åŽ‹gzæ ¼å¼æ–‡ä»¶ï¼ˆä¸ä¿ç•™åŽ‹ç¼©æ–‡ä»¶ï¼‰12345[root@localhost test]# lstest1.txt.gz test2.txt.gz[root@localhost test]# gunzip test1.txt.gz test2.txt.gz [root@localhost test]# lstest1.txt test2.txtÂ¶ï¼ˆ3ï¼‰tar å’Œ gzipå‘½ä»¤ç»“åˆå¯ä»¥ä½¿ç”¨å®žçŽ°æ–‡ä»¶æ‰“åŒ…å’ŒåŽ‹ç¼©tar åªè´Ÿè´£æ‰“åŒ…æ–‡ä»¶ï¼Œä½†ä¸åŽ‹ç¼©ç”¨ gzip åŽ‹ç¼© tar åŒ…åŽï¼Œå…¶æ‰©å±•åä¸€èˆ¬ç”¨ xxx.tar.gzåœ¨ Linux ä¸­ï¼Œæœ€å¸¸è§çš„åŽ‹ç¼©æ–‡ä»¶æ ¼å¼å°±æ˜¯ xxx.tar.gzåœ¨ tar å‘½ä»¤ä¸­æœ‰ä¸€ä¸ªé€‰é¡¹ -z å¯ä»¥è°ƒç”¨ gzipï¼Œä»Žè€Œå¯ä»¥æ–¹ä¾¿çš„å®žçŽ°åŽ‹ç¼©å’Œè§£åŽ‹ç¼©çš„åŠŸèƒ½å‘½ä»¤æ ¼å¼å¦‚ä¸‹ï¼š1234567891011121314151617#åŽ‹ç¼©æ–‡ä»¶gzip test1.txt test2.txt #ä¼šç”Ÿæˆ test1.txt.gz test2.txt.gz#åŽ‹ç¼©taråŒ…gzip æ‰“åŒ…æ–‡ä»¶å.tar #ä»ŽtaråŒ…å˜æˆtar.gzåŽ‹ç¼©åŒ…ï¼Œè¿™ä¸ªè¿‡ç¨‹ä¸ä¼šä¿ç•™åŽŸæ¥æ”¾å…¥taråŒ…# æ‰“åŒ…å¹¶åŽ‹ç¼©æ–‡ä»¶tar -zcvf æ‰“åŒ…æ–‡ä»¶å.tar.gz è¢«åŽ‹ç¼©çš„æ–‡ä»¶ï¼è·¯å¾„... #è‡ªåŠ¨å…ˆå®Œæˆå°†å„ä¸ªæ–‡ä»¶æ‰“åŒ…ç”Ÿæˆxxx.tarï¼ŒåŽåŽ‹ç¼©ç”Ÿæˆxxx.tar.gz# è§£åŽ‹ç¼©å¹¶è§£åŒ…tar -zxvf æ‰“åŒ…æ–‡ä»¶å.tar.gz #è‡ªåŠ¨å…ˆå®Œæˆå°†xxx.tar.gzè§£åŽ‹ç¼©ç”Ÿæˆxxx.tarï¼ŒåŽå®Œæˆè§£åŒ…ç”Ÿæˆå„ä¸ªæ–‡ä»¶# è§£åŽ‹ç¼©å¹¶è§£åŒ…ï¼Œè§£åŽ‹æ—¶åŽ»é™¤ä¸€ä¸ªé¡¶çº§ç›®å½•å±‚æ¬¡tar -zxvf æ‰“åŒ…æ–‡ä»¶å.tar.gz --strip-components=1# è§£åŽ‹ç¼©å¹¶è§£åŒ…åˆ°æŒ‡å®šè·¯å¾„tar -zxvf æ‰“åŒ…æ–‡ä»¶å.tar.gz -C ç›®æ ‡è·¯å¾„å¸¸ç”¨é€‰é¡¹ï¼š-Cï¼šè§£åŽ‹ç¼©åˆ°æŒ‡å®šç›®å½•ï¼Œæ³¨æ„ï¼šè¦è§£åŽ‹ç¼©çš„ç›®å½•å¿…é¡»å­˜åœ¨--strip-components=1ï¼šè§£åŽ‹æ—¶åŽ»é™¤ä¸€ä¸ªé¡¶çº§ç›®å½•å±‚æ¬¡Â¶ï¼ˆ4ï¼‰bzip2tar ä¸Ž bzip2 å‘½ä»¤ç»“åˆå¯ä»¥ä½¿ç”¨å®žçŽ°æ–‡ä»¶ æ‰“åŒ…å’ŒåŽ‹ç¼©ï¼ˆç”¨æ³•å’Œ gzip ç±»ä¼¼ï¼‰tar åªè´Ÿè´£æ‰“åŒ…æ–‡ä»¶ï¼Œä½†ä¸åŽ‹ç¼©ï¼Œç”¨ bzip2 åŽ‹ç¼© tar æ‰“åŒ…åŽçš„æ–‡ä»¶ï¼Œå…¶æ‰©å±•åä¸€èˆ¬ç”¨ xxx.tar.bz2åœ¨ tar å‘½ä»¤ä¸­æœ‰ä¸€ä¸ªé€‰é¡¹ -j å¯ä»¥è°ƒç”¨ bzip2ï¼Œä»Žè€Œå¯ä»¥æ–¹ä¾¿çš„å®žçŽ°åŽ‹ç¼©å’Œè§£åŽ‹ç¼©çš„åŠŸèƒ½å‘½ä»¤æ ¼å¼å¦‚ä¸‹ï¼š12345# åŽ‹ç¼©æ–‡ä»¶tar -jcvf æ‰“åŒ…æ–‡ä»¶.tar.bz2 è¢«åŽ‹ç¼©çš„æ–‡ä»¶ï¼è·¯å¾„...# è§£åŽ‹ç¼©æ–‡ä»¶tar -jxvf æ‰“åŒ…æ–‡ä»¶.tar.bz2Â¶ï¼ˆ5ï¼‰zip å’Œ unzipzip æ˜¯ä¸€ä¸ªå¸¸ç”¨çš„å‘½ä»¤è¡Œå·¥å…·ï¼Œç”¨äºŽåœ¨ Linux å’Œç±»Unixç³»ç»Ÿä¸Šåˆ›å»ºå’Œç®¡ç†ZIPåŽ‹ç¼©æ–‡ä»¶ã€‚å‘½ä»¤å¸¸ç”¨é€‰é¡¹-rï¼šé€’å½’åŽ‹ç¼©ï¼Œå³åŽ‹ç¼©ç›®å½•-jï¼šä»…å­˜å‚¨æ–‡ä»¶ï¼Œä¸åŒ…å«ç›®å½•è·¯å¾„ã€‚åœ¨åŽ‹ç¼©åŒ…ä¸­åªä¿ç•™æ–‡ä»¶åã€‚-uï¼šä»…æ›´æ–°åŽ‹ç¼©åŒ…ä¸­çš„æ–°æ–‡ä»¶å’Œä¿®æ”¹è¿‡çš„æ–‡ä»¶ã€‚-dï¼šä»ŽåŽ‹ç¼©åŒ…ä¸­åˆ é™¤æŒ‡å®šçš„æ–‡ä»¶æˆ–ç›®å½•ã€‚-lï¼šæ˜¾ç¤ºåŽ‹ç¼©åŒ…ä¸­çš„æ–‡ä»¶åˆ—è¡¨ï¼Œä¸è§£åŽ‹ç¼©ã€‚-qï¼šå®‰é™æ¨¡å¼ï¼Œä¸æ˜¾ç¤ºä»»ä½•è¾“å‡ºã€‚-vï¼šæ˜¾ç¤ºè¯¦ç»†çš„åŽ‹ç¼©è¿‡ç¨‹ä¿¡æ¯ã€‚-C &lt;ç›®å½•&gt;ï¼šåœ¨åˆ›å»ºåŽ‹ç¼©åŒ…ä¹‹å‰åˆ‡æ¢åˆ°æŒ‡å®šç›®å½•ã€‚-x &lt;æ¨¡å¼&gt;ï¼šæŽ’é™¤åŒ¹é…æ¨¡å¼çš„æ–‡ä»¶æˆ–ç›®å½•ã€‚-zï¼šåŽ‹ç¼©æ—¶æ˜¾ç¤ºè¿›åº¦ç™¾åˆ†æ¯”ã€‚-eï¼šåŠ å¯†åŽ‹ç¼©åŒ…ã€‚-P &lt;å¯†ç &gt;ï¼šè®¾ç½®åŽ‹ç¼©åŒ…çš„å¯†ç ã€‚-Tï¼šæµ‹è¯•åŽ‹ç¼©åŒ…çš„å®Œæ•´æ€§ã€‚123456789101112131415161718192021#åŽ‹ç¼©æ–‡ä»¶zip test.zip test1.txt test2.txt#é€’å½’åŽ‹ç¼©ç›®å½•zip -r test.zip /opt/test/#æ³¨æ„åŽ‹ç¼©ç›®å½•ï¼ŒåŽ‹ç¼©åŒ…é‡Œçš„ç›®å½•ç»“æž„ä¼šé»˜è®¤ä¿ç•™ç›®æ ‡ç›®å½•çš„å®Œæ•´è·¯å¾„ï¼Œå¦‚æžœå¸Œæœ›ä½¿ç”¨æƒ³å¯¹è·¯å¾„ï¼Œé‚£ä¹ˆåº”è¯¥cdåˆ°ç›®æ ‡ç›®å½•åŽå†é€šè¿‡ç›¸å¯¹è·¯å¾„æ¥åŽ‹ç¼©cd /opt &amp;&amp; zip -r test.zip test/#åŠ å¯†åŽ‹ç¼©zip -r -e -P 123456 my_archive.zip my_directory#å®žæˆ˜ç¤ºä¾‹cd /optrm -f backup-*zip -r -e -P 123456 "backup-$(date +'%Y%m%d%H%M%S').zip" \./* \-x "./containerd/*" \-x "./blog/*" \-x "./temp/*" \-x "*/logs/*" \-x "*/log/*"unzip æ˜¯ä¸€ä¸ªå¸¸ç”¨çš„å‘½ä»¤è¡Œå·¥å…·ï¼Œç”¨äºŽè§£åŽ‹ç¼© ZIP åŽ‹ç¼©åŒ…å¸¸ç”¨é€‰é¡¹ï¼š-d &lt;ç›®æ ‡ç›®å½•&gt;ï¼šæŒ‡å®šè§£åŽ‹ç¼©çš„ç›®æ ‡ç›®å½•ï¼Œå°†åŽ‹ç¼©åŒ…ä¸­çš„æ–‡ä»¶æå–åˆ°æŒ‡å®šç›®å½•ã€‚-lï¼šæ˜¾ç¤ºåŽ‹ç¼©åŒ…ä¸­çš„æ–‡ä»¶åˆ—è¡¨ï¼Œä¸è§£åŽ‹ç¼©ã€‚-oï¼šè¦†ç›–ç›®æ ‡ç›®å½•ä¸­å·²å­˜åœ¨çš„æ–‡ä»¶ï¼Œè€Œä¸è¿›è¡Œç¡®è®¤æç¤ºã€‚-qï¼šå®‰é™æ¨¡å¼ï¼Œå‡å°‘è¾“å‡ºä¿¡æ¯ã€‚-vï¼šæ˜¾ç¤ºè¯¦ç»†çš„è§£åŽ‹ç¼©è¿‡ç¨‹ä¿¡æ¯ã€‚-x &lt;æ¨¡å¼&gt;ï¼šæŽ’é™¤åŒ¹é…æ¨¡å¼çš„æ–‡ä»¶ï¼Œä¸è¿›è¡Œè§£åŽ‹ç¼©ã€‚-P &lt;å¯†ç &gt;ï¼šæŒ‡å®šå¯†ç æ¥è§£åŽ‹ç¼©ã€‚-jï¼šè§£åŽ‹ç¼©æ—¶è·³è¿‡ç›®å½•è·¯å¾„ï¼Œå°†æ–‡ä»¶ç›´æŽ¥æå–åˆ°å½“å‰ç›®å½•ã€‚1234567#é»˜è®¤è§£åŽ‹åˆ°å½“å‰ç›®å½•unzip test.zip#è§£åŽ‹åˆ°æŒ‡å®šç›®å½•unzip test.zip -d path#è§£å¯†å¹¶è§£åŽ‹ç¼©unzip -P 123456 my_archive.zipÂ¶11ï¼‰é‡å®šå‘ï¼ˆ &gt; å’Œ &gt;&gt; ï¼‰Linux å…è®¸å°†å‘½ä»¤æ‰§è¡Œç»“æžœé‡å®šå‘åˆ°ä¸€ä¸ªæ–‡ä»¶ï¼Œå°†æœ¬åº”æ˜¾ç¤ºåœ¨ç»ˆç«¯ä¸Šçš„å†…å®¹è¾“å‡ºæˆ–è€…è¿½åŠ åˆ°æŒ‡å®šæ–‡ä»¶ä¸­ã€‚1234#è¦†ç›–è¾“å‡ºå†…å®¹åˆ°æ–‡ä»¶ä¸­echo "hello" &gt; test.txt#è¿½åŠ å†…å®¹åˆ°æ–‡ä»¶ä¸­echo "hello" &gt;&gt; test.txt&gt; è¡¨ç¤ºè¾“å‡ºï¼Œä¼šè¦†ç›–æ–‡ä»¶åŽŸæœ‰çš„å†…å®¹&gt;&gt; è¡¨ç¤ºè¿½åŠ ï¼Œä¼šå°†å†…å®¹è¿½åŠ åˆ°å·²æœ‰æ–‡ä»¶çš„æœ«å°¾Â¶12ï¼‰ç®¡é“ï¼ˆ | ï¼‰Linux å…è®¸å°† ä¸€ä¸ªå‘½ä»¤çš„è¾“å‡ºå¯ä»¥é€šè¿‡ç®¡é“åšä¸ºå¦ä¸€ä¸ªå‘½ä»¤çš„è¾“å…¥ã€‚ä½¿ç”¨æ“ä½œå¦‚ä¸‹ï¼š12ps -ef | grep nginxmore test.txt | grep helloå¯ä»¥ç†è§£çŽ°å®žç”Ÿæ´»ä¸­çš„ç®¡å­ï¼Œç®¡å­çš„ä¸€å¤´å¡žä¸œè¥¿è¿›åŽ»ï¼Œå¦ä¸€å¤´å–å‡ºæ¥ï¼Œè¿™é‡Œ | çš„å·¦å³åˆ†ä¸ºä¸¤ç«¯ï¼Œå·¦ç«¯å¡žä¸œè¥¿ï¼ˆå†™ï¼‰ï¼Œå³ç«¯å–ä¸œè¥¿ï¼ˆè¯»ï¼‰Â¶13ï¼‰ç»Ÿè®¡ï¼ˆ wc ï¼‰wcï¼ˆWord Countï¼‰å‘½ä»¤ç”¨äºŽç»Ÿè®¡æ–‡ä»¶çš„è¡Œæ•°ã€å•è¯æ•°å’Œå­—èŠ‚æ•°ç­‰ä¿¡æ¯12345678910111213141516wc [é€‰é¡¹] æ–‡ä»¶åˆ—è¡¨##ç¤ºä¾‹1ï¼šwc example.txt#è¾“å‡ºå¦‚ä¸‹ï¼š# 2 5 28 example.txt#åˆ†åˆ«è¡¨ç¤º 2 è¡Œã€5 ä¸ªå•è¯ã€28 ä¸ªå­—èŠ‚ã€‚#å¦‚æžœæ‰§è¡Œ wc -l example.txtï¼Œåˆ™åªè¾“å‡ºè¡Œæ•°ï¼Œå¦‚ä¸‹ï¼š# 2 example.txt##ç¤ºä¾‹2ï¼š#ç»Ÿè®¡æŸä¸ªç›®å½•ä¸‹çš„æ‰€æœ‰ä»¥ .mp4 ç»“å°¾çš„æ–‡ä»¶æ•°é‡ls -l /path/to/dir | grep '\.mp4$' | wc -l#é€’å½’åœ°ç»Ÿè®¡æŸä¸ªç›®å½•ä¸‹çš„æ‰€æœ‰ä»¥ .mp4 ç»“å°¾çš„æ–‡ä»¶æ•°é‡find /path/to/dir -type f -name "*.mp4" | wc -lå¸¸ç”¨é€‰é¡¹ï¼š-lï¼šåªæ˜¾ç¤ºè¡Œæ•°ã€‚-wï¼šåªæ˜¾ç¤ºå•è¯æ•°ã€‚-cï¼šåªæ˜¾ç¤ºå­—èŠ‚æ•°ã€‚Â¶3. æ–‡ä»¶æƒé™ç®¡ç†åœ¨ Linux ç³»ç»Ÿä¸­ï¼Œä¸åŒçš„ç”¨æˆ·å¯¹äºŽä¸åŒçš„ç³»ç»Ÿèµ„æºæ‹¥æœ‰ä¸åŒçš„ä½¿ç”¨æƒé™ã€‚åœ¨ Linux ä¸­ï¼Œå¯ä»¥æŒ‡å®šæ¯ä¸€ä¸ªç”¨æˆ·é’ˆå¯¹ä¸åŒçš„æ–‡ä»¶æˆ–è€…ç›®å½•çš„ä¸åŒæƒé™ã€‚æ–‡ä»¶(ç›®å½•)çš„æƒé™åŒ…æ‹¬å¦‚ä¸‹ï¼šåºå·æƒé™è‹±æ–‡ç¼©å†™æ•°å­—ä»£å·01è¯»readr402å†™writew203æ‰§è¡Œexcutex1Â¶1. æ–‡ä»¶çš„è¯¦ç»†ä¿¡æ¯12#æŸ¥çœ‹æ–‡ä»¶å¤¹ä¸‹æ–‡ä»¶çš„è¯¦ç»†ä¿¡æ¯ï¼ˆç›®å½•ä¹Ÿæ˜¯ä¸€ç§æ–‡ä»¶ï¼‰ls -læ‰“å°ç»“æžœä»Žå·¦åˆ°å³ä¾æ¬¡æ˜¯ï¼šæƒé™ï¼Œç¬¬ 1 ä¸ªå­—ç¬¦å¦‚æžœæ˜¯ d è¡¨ç¤ºç›®å½•ç¡¬é“¾æŽ¥æ•°ï¼Œé€šä¿—åœ°è®²ï¼Œå°±æ˜¯æœ‰å¤šå°‘ç§æ–¹å¼ï¼Œå¯ä»¥è®¿é—®åˆ°å½“å‰ç›®å½•ï¼æ–‡ä»¶æ‹¥æœ‰è€…ï¼Œå®¶ç›®å½•ä¸‹ æ–‡ä»¶ï¼ç›®å½• çš„æ‹¥æœ‰è€…é€šå¸¸éƒ½æ˜¯å½“å‰ç”¨æˆ·ç»„ï¼Œåœ¨ Linux ä¸­ï¼Œå¾ˆå¤šæ—¶å€™ï¼Œä¼šå‡ºçŽ°ç»„åå’Œç”¨æˆ·åç›¸åŒçš„æƒ…å†µï¼ŒåŽç»­ä¼šè®²å¤§å°æœ€åŽä¿®æ”¹æ—¶é—´åç§°Â¶2. è®¾ç½®æ–‡ä»¶æƒé™12345678# è®¾ç½®æ–‡ä»¶æˆ–ç›®å½•çš„æ‰€å±žç”¨æˆ·å’Œç”¨æˆ·ç»„chown user:group file# é€’å½’ä¿®æ”¹æ–‡ä»¶|ç›®å½•æ‰€å±žçš„ç”¨æˆ·ç»„chgrp -R group file# é€’å½’ä¿®æ”¹æ–‡ä»¶æˆ–ç›®å½•çš„æ“ä½œæƒé™chmod -R 755 filechmod åœ¨è®¾ç½®æ“ä½œæƒé™æ—¶ï¼Œå¯ä»¥ç®€å•åœ°ä½¿ç”¨ä¸‰ä¸ªæ•°å­—åˆ†åˆ«å¯¹åº”ï¼šæ‰€å±žç”¨æˆ·ã€æ‰€å±žç”¨æˆ·ç»„ã€ å’Œå…¶ä»–ç”¨æˆ·çš„æƒé™12# ç›´æŽ¥ä¿®æ”¹æ–‡ä»¶|ç›®å½•çš„ è¯»|å†™|æ‰§è¡Œ æƒé™ï¼Œä½†æ˜¯ä¸èƒ½ç²¾ç¡®åˆ° æ‹¥æœ‰è€…|ç»„|å…¶ä»–chmod +/-rwx fileå¸¸è§æ•°å­—ç»„åˆæœ‰ï¼ˆuè¡¨ç¤ºç”¨æˆ·ï¼gè¡¨ç¤ºç»„ï¼oè¡¨ç¤ºå…¶ä»–ï¼‰ï¼š777 ===&gt; u=rwx,g=rwx,o=rwx755 ===&gt; u=rwx,g=rx,o=rx644 ===&gt; u=rw,g=r,o=rÂ¶3. æ–‡ä»¶å±žæ€§æ¨¡å¼Â¶lsattrlsattr å‘½ä»¤ç”¨äºŽæ˜¾ç¤ºæ–‡ä»¶çš„å±žæ€§ï¼Œä½¿ç”¨æ–¹å¼å¦‚ä¸‹1234# æŸ¥çœ‹file.sh æ–‡ä»¶çš„å±žæ€§lsattr file.sh# æŸ¥çœ‹å½“å‰ç›®å½•ä¸‹æ‰€æœ‰æ–‡ä»¶ä»¥åŠæ–‡ä»¶å¤¹çš„å±žæ€§lsattrè¯¦ç»†è¯´æ˜Žè¯·å‚è€ƒï¼šðŸ“šhttps://www.runoob.com/linux/linux-comm-lsattr.htmlÂ¶chattrchattr ç”¨äºŽä¿®æ”¹æ–‡ä»¶å±žæ€§ã€‚1chattr [-RV][-v&lt;ç‰ˆæœ¬ç¼–å·&gt;][+&#x2F;-&#x2F;&#x3D;&lt;å±žæ€§&gt;][æ–‡ä»¶æˆ–ç›®å½•...]é€‰é¡¹ï¼š-R é€’å½’å¤„ç†ï¼Œå°†æŒ‡å®šç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶åŠå­ç›®å½•ä¸€å¹¶å¤„ç†ã€‚-v &lt;ç‰ˆæœ¬ç¼–å·&gt; è®¾ç½®æ–‡ä»¶æˆ–ç›®å½•ç‰ˆæœ¬ã€‚-V æ˜¾ç¤ºæŒ‡ä»¤æ‰§è¡Œè¿‡ç¨‹ã€‚+&lt;å±žæ€§&gt; å¼€å¯æ–‡ä»¶æˆ–ç›®å½•çš„è¯¥é¡¹å±žæ€§ã€‚-&lt;å±žæ€§&gt; å…³é—­æ–‡ä»¶æˆ–ç›®å½•çš„è¯¥é¡¹å±žæ€§ã€‚=&lt;å±žæ€§&gt; æŒ‡å®šæ–‡ä»¶æˆ–ç›®å½•çš„è¯¥é¡¹å±žæ€§ã€‚è¿™é¡¹æŒ‡ä»¤å¯æ”¹å˜å­˜æ”¾åœ¨ext2æ–‡ä»¶ç³»ç»Ÿä¸Šçš„æ–‡ä»¶æˆ–ç›®å½•å±žæ€§ï¼Œè¿™äº›å±žæ€§å…±æœ‰ä»¥ä¸‹å‡ ç§æ¨¡å¼ï¼šaï¼šè®©æ–‡ä»¶æˆ–ç›®å½•ä»…ä¾›é™„åŠ ç”¨é€”ã€‚bï¼šä¸æ›´æ–°æ–‡ä»¶æˆ–ç›®å½•çš„æœ€åŽå­˜å–æ—¶é—´ã€‚cï¼šå°†æ–‡ä»¶æˆ–ç›®å½•åŽ‹ç¼©åŽå­˜æ”¾ã€‚dï¼šå°†æ–‡ä»¶æˆ–ç›®å½•æŽ’é™¤åœ¨å€¾å€’æ“ä½œä¹‹å¤–ã€‚iï¼šä¸å¾—ä»»æ„æ›´åŠ¨æ–‡ä»¶æˆ–ç›®å½•ã€‚sï¼šä¿å¯†æ€§åˆ é™¤æ–‡ä»¶æˆ–ç›®å½•ã€‚Sï¼šå³æ—¶æ›´æ–°æ–‡ä»¶æˆ–ç›®å½•ã€‚uï¼šé¢„é˜²æ„å¤–åˆ é™¤ã€‚è¯¥å‘½ä»¤è¯·åˆ‡æ¢è‡³ root ç”¨æˆ·ä¸‹ä½¿ç”¨ã€‚12345678# ä¸º file.sh æ–‡ä»¶å¢žåŠ  i æ ‡è¯†chattr +i file.sh# ä¸º file.sh æ–‡ä»¶åŽ»é™¤ i æ ‡è¯†chattr -i file.sh# ä¸º file.sh å¢žåŠ  i, a ä¸¤ä¸ªæ ‡è¯†chattr +ia file.sh# ä¸º file.sh æ–‡ä»¶ç§»é™¤ i, a ä¸¤ä¸ªæ ‡è¯†chattr -ia file.shè¯¦ç»†è¯´æ˜Žè¯·å‚è€ƒï¼šðŸ“šhttps://baike.baidu.com/item/chattr/9841067?fr=aladdinðŸ“šhttps://www.runoob.com/linux/linux-comm-chattr.htmlÂ¶æ–‡ä»¶å±žæ€§æ¨¡å¼ç›¸å…³é—®é¢˜Linux æ–‡ä»¶/æ–‡ä»¶å¤¹æ— æ³•åˆ é™¤é—®é¢˜è§£å†³æ–¹æ¡ˆæœåŠ¡å™¨é»‘å®¢æ”»å‡»åŽï¼Œå¦‚æžœä»–ä»¬å¯¹æŸäº›æ–‡ä»¶ï¼ˆä¾‹å¦‚ç—…æ¯’æ–‡ä»¶ï¼‰çš„å±žæ€§æ¨¡å¼è¿›è¡Œä¿®æ”¹ï¼Œå¯¼è‡´æˆ‘ä»¬æ— æ³•è½»æ˜“åˆ é™¤è¿™äº›æ–‡ä»¶ï¼ŒåŒæ—¶é‡‡ç”¨ root ç”¨æˆ·ä¹Ÿå¯èƒ½æ— æ³•ä½¿ç”¨rmå‘½ä»¤åˆ é™¤ï¼Œé‚£ä¹ˆè¿™å°±ä¼šå¸¦æ¥å·¨å¤§çš„éšæ‚£é—®é¢˜ã€‚æ¡ˆä¾‹ï¼šå‡è®¾é»‘å®¢ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤å¯¹æ–‡ä»¶çš„å±žæ€§æ¨¡å¼è¿›è¡Œäº†ä¿®æ”¹ã€‚1chattr +ia file.shé‚£ä¹ˆä½¿ç”¨å¦‚ä¸‹rmå‘½ä»¤æ˜¯æ²¡æœ‰æƒé™åˆ é™¤çš„ã€‚å³ä½¿æ˜¯ root ç”¨æˆ·ä¹Ÿæ— æ³•åˆ é™¤ã€‚1rm -rf file.shè¿™ç§æƒ…å†µå°±æ¶‰åŠåˆ°chattrå‘½ä»¤ç›¸å…³çš„æ–‡ä»¶å±žæ€§æ¨¡å¼äº†ã€‚ç”±ä¸Šæ–‡ä¸­å¾—çŸ¥å½“æ–‡ä»¶è®¾ç½® i å’Œ a ä»»æ„ä¸€ä¸ªå±žæ€§æˆ‘ä»¬å°±æ— æ³•å¯¹æ–‡ä»¶è¿›è¡Œåˆ é™¤æ“ä½œï¼Œé‚£ä¹ˆåªè¦æˆ‘ä»¬ç§»é™¤æŽ‰ i, a å±žæ€§ï¼Œç„¶åŽæ‰§è¡Œrmå‘½ä»¤åˆ é™¤å°±å¯ä»¥äº†ã€‚123456# ç§»é™¤ i, a å±žæ€§chattr -ia file.sh# æŸ¥çœ‹æ˜¯å¦ç§»é™¤æˆåŠŸlsattr file.sh# åˆ é™¤æ–‡ä»¶rm -rf file.shå¦‚æžœæ–‡ä»¶è¿˜æœªåˆ é™¤æˆåŠŸï¼Œåˆ™æˆ‘ä»¬éœ€è¦è€ƒè™‘æ–‡ä»¶æ‰€å±žçš„æ–‡ä»¶å¤¹æ˜¯å¦è®¾ç½®äº† i æˆ– a å±žæ€§ï¼ˆè¿™ä¸€ç‚¹ç¡®å®žå¾ˆéš¾å‘çŽ°ï¼‰12345# é€€å›žä¸Šä¸€çº§cd ..# ç›´æŽ¥ä½¿ç”¨ lsattr å‘½ä»¤ï¼Œè¿™æ ·å¯ä»¥åˆ—å‡ºå½“å‰æ–‡ä»¶å¤¹ä¸‹æ‰€æœ‰æ–‡ä»¶å’Œæ–‡ä»¶å¤¹çš„å±žæ€§# ä¸è¦ä½¿ç”¨ lsattr æ–‡ä»¶å¤¹ è¿™æ ·çš„è¯­æ³•ï¼Œè¿™æ ·æ˜¯åˆ—å‡ºè¯¥æ–‡ä»¶å¤¹ä¸‹çš„æ–‡ä»¶çš„å±žæ€§lsattrå¦‚æžœæ–‡ä»¶å¤¹è¢«è®¾ç½®åˆ™å¯¹æ–‡ä»¶å¤¹çš„å±žæ€§æ‰§è¡Œç§»é™¤æ“ä½œï¼Œç„¶åŽå†åˆ é™¤æ–‡ä»¶å¤¹é‡Œé¢çš„æ–‡ä»¶Â¶äº”ã€ç”¨æˆ·ç®¡ç†Â¶1. åŸºæœ¬æ¦‚å¿µåœ¨ Linux ç³»ç»Ÿä¸­ï¼Œä¸è®ºæ˜¯æœ¬æœºæˆ–æ˜¯è¿œç¨‹ç™»å½•ç³»ç»Ÿï¼Œæ¯ä¸ªç³»ç»Ÿéƒ½å¿…é¡»æ‹¥æœ‰è‡³å°‘ä¸€ä¸ªç”¨æˆ·ã€‚ç”¨æˆ·æ˜¯ Linux ç³»ç»Ÿå·¥ä½œä¸­é‡è¦çš„ä¸€çŽ¯ï¼Œç”¨æˆ·ç®¡ç†åŒ…æ‹¬ç”¨æˆ·ä¸Žç»„ç®¡ç†ã€‚ä¸ºäº†æ–¹ä¾¿ç”¨æˆ·ç®¡ç†ï¼ŒLinuxæœ‰ç»„çš„æ¦‚å¿µï¼Œç»„çš„æ„ä¹‰åœ¨å®žé™…åº”ç”¨ä¸­ï¼Œå¯ä»¥é¢„å…ˆé’ˆå¯¹ç»„è®¾ç½®å¥½æƒé™ï¼Œç„¶åŽå°†ä¸åŒçš„ç”¨æˆ·æ·»åŠ åˆ°å¯¹åº”çš„ç»„ä¸­ï¼Œä»Žè€Œä¸ç”¨ä¾æ¬¡ä¸ºæ¯ä¸€ä¸ªç”¨æˆ·è®¾ç½®æƒé™ã€‚Â¶2. ç”¨æˆ·ç»„ç»´æŠ¤12345678#æ·»åŠ ç»„groupadd ç»„å#åˆ é™¤ç»„groupdel ç»„å#æŸ¥çœ‹ç»„ä¿¡æ¯cat /etc/groupæç¤ºï¼šç”¨æˆ·ç»„ä¿¡æ¯ä¿å­˜åœ¨ /etc/group æ–‡ä»¶ä¸­ã€‚åœ¨å®žé™…åº”ç”¨ä¸­ï¼Œå¯ä»¥é¢„å…ˆé’ˆå¯¹ç»„è®¾ç½®å¥½æƒé™ï¼Œç„¶åŽå°†ä¸åŒçš„ç”¨æˆ·æ·»åŠ åˆ°å¯¹åº”çš„ç»„ä¸­ï¼Œä»Žè€Œä¸ç”¨ä¾æ¬¡ä¸ºæ¯ä¸€ä¸ªç”¨æˆ·è®¾ç½®æƒé™ã€‚Â¶3. ç”¨æˆ·ç»´æŠ¤Â¶1ï¼‰åˆ›å»ºç”¨æˆ·1234567891011121314151617181920212223242526272829303132333435#åˆ›å»ºç”¨æˆ·useradd ç”¨æˆ·å#æ˜¾å¼åˆ›å»ºç”¨æˆ·æ—¶è‡ªåŠ¨åˆ›å»ºç”¨æˆ·åŒåçš„ç”¨æˆ·ç»„å¹¶æ·»åŠ ç”¨æˆ·åˆ°è¯¥ç»„ä¸­useradd -U ç”¨æˆ·å#åˆ›å»ºç”¨æˆ·æ—¶ä¸è‡ªåŠ¨åˆ›å»ºç”¨æˆ·åŒåçš„ç”¨æˆ·ç»„ï¼Œåˆ™ç³»ç»Ÿä¼šé»˜è®¤æ·»åŠ ç”¨æˆ·åˆ°ç³»ç»Ÿé»˜è®¤çš„ç»„ä¸­useradd -N ç”¨æˆ·å#ç³»ç»Ÿé»˜è®¤çš„ç»„é…ç½®åœ¨/etc/default/useraddé‡Œï¼Œå¯é€šè¿‡å¦‚ä¸‹å‘½ä»¤æŸ¥çœ‹ï¼šcat /etc/group | grep ":$(grep .*GROUP /etc/default/useradd | sed 's/.*GROUP=//'):"#åˆ›å»ºç”¨æˆ·æ—¶æŒ‡å®šç”¨æˆ·ç»„ #-g: æŒ‡å®šå°†ç”¨æˆ·æ·»åŠ åˆ°çš„ç»„ï¼ˆé»˜è®¤ä¸ºç”¨æˆ·åŒåçš„ç”¨æˆ·ç»„ï¼‰ #-G: æŒ‡å®šå°†ç”¨æˆ·æ·»åŠ åˆ°çš„å¤šä¸ªç»„useradd -g ç»„ ç”¨æˆ·åuseradd -G ç»„1,ç»„2 ç”¨æˆ·å#åˆ›å»ºç”¨æˆ·æ—¶è‡ªåŠ¨åˆ›å»ºç”¨æˆ·ä¸»ç›®å½•useradd -m ç”¨æˆ·å#åˆ›å»ºç”¨æˆ·æ—¶ä¸è‡ªåŠ¨åˆ›å»ºç”¨æˆ·ä¸»ç›®å½•useradd -M ç”¨æˆ·å#åˆ›å»ºç”¨æˆ·æ—¶é…ç½®ç™»å½•çš„Shellè·¯å¾„useradd -s /bin/bash ç”¨æˆ·å#åˆ›å»ºç”¨æˆ·æ—¶è¿›è¡Œå¯†ç è®¾ç½®useradd -p å¯†ç #åˆ›å»ºç”¨æˆ·æ—¶æŒ‡å®šç”¨æˆ·çš„ä¸»ç›®å½•ï¼Œå¯ä»¥ä½¿ç”¨-dæˆ–--homeå‚æ•°ï¼ŒåŽé¢è·Ÿä¸Šæƒ³è®¾å®šçš„ä¸»ç›®å½•è·¯å¾„ï¼Œå¦‚ä¸‹ï¼šuseradd -m -d /ä½ çš„è·¯å¾„/ç”¨æˆ·å ç”¨æˆ·å#åˆ›å»ºç”¨æˆ·å’ŒåŒåç”¨æˆ·ç»„ï¼Œä¸è‡ªåŠ¨åˆ›å»ºç”¨æˆ·ä¸»ç›®å½•ï¼Œç¦æ­¢è¯¥ç”¨æˆ·ç™»å½•ç³»ç»Ÿuseradd -U -M -s /usr/sbin/nologin ç”¨æˆ·åå…³äºŽuseraddå‘½ä»¤è¯´æ˜Žï¼šè‡ªåŠ¨åˆ›å»ºç”¨æˆ·åŒåçš„ç”¨æˆ·ç»„ï¼šåœ¨Redhatç±»ç³»ç»Ÿå’ŒDebainç±»ç³»ç»Ÿä¸­ï¼Œéƒ½é»˜è®¤ä¼šè‡ªåŠ¨åˆ›å»ºç”¨æˆ·åŒåçš„ç”¨æˆ·ç»„å¹¶æ·»åŠ ç”¨æˆ·åˆ°è¯¥ç»„ä¸­ï¼ˆå¦‚æžœä¸éœ€è¦è‡ªåŠ¨åˆ›å»ºåˆ™éœ€åŠ é€‰é¡¹ï¼š-Nï¼Œåˆ™ç³»ç»Ÿä¼šé»˜è®¤æ·»åŠ ç”¨æˆ·åˆ°ç³»ç»Ÿé»˜è®¤çš„ç»„ä¸­ï¼‰ã€‚è‡ªåŠ¨åˆ›å»ºç”¨æˆ·ä¸»ç›®å½•ï¼šåœ¨Redhatç±»ç³»ç»Ÿä¸­ï¼Œé»˜è®¤ä¼šè‡ªåŠ¨åˆ›å»ºç”¨æˆ·ä¸»ç›®å½•ï¼ˆå¦‚æžœä¸éœ€è¦åˆ›å»ºåˆ™åŠ é€‰é¡¹ï¼š-Mï¼‰ï¼Œè€ŒDebainç±»ç³»ç»Ÿä¸­ä¸ä¼šè‡ªåŠ¨åˆ›å»ºï¼ˆå¦‚æžœéœ€è¦è‡ªåŠ¨åˆ›å»ºåˆ™éœ€åŠ é€‰é¡¹ï¼š-mï¼‰ã€‚è‡ªåŠ¨é…ç½®ç™»å½•çš„ Shell è·¯å¾„ï¼šåœ¨Redhatç±»ç³»ç»Ÿå’ŒDebainç±»ç³»ç»Ÿä¸­ï¼Œéƒ½é»˜è®¤ä¼šè‡ªåŠ¨é…ç½®ç™»å½•çš„ Shell è·¯å¾„ï¼ˆé»˜è®¤ä¸ºï¼š/bin/bashï¼Œè‡ªå®šä¹‰ç™»å½•çš„ Shell è·¯å¾„å¯åŠ é€‰é¡¹åŠå‚æ•°ï¼š-s &lt;path&gt;ï¼‰å¯†ç è®¾ç½®ï¼šåœ¨Redhatç±»ç³»ç»Ÿå’ŒDebainç±»ç³»ç»Ÿä¸­ï¼Œéƒ½é»˜è®¤ä¸ä¼šè¿›è¡Œå¯†ç è®¾ç½®ï¼ˆå¦‚æžœéœ€è¦è®¾ç½®å¯åŠ é€‰é¡¹åŠå‚æ•°ï¼š-p &lt;password&gt;ï¼‰ã€‚å…³äºŽadduserå‘½ä»¤çš„è¯´æ˜Žï¼šåœ¨Redhatç±»ç³»ç»Ÿä¸­ï¼Œadduserä¸Žuseraddä¸¤ä¸ªå‘½ä»¤æ˜¯ç›¸åŒçš„ã€‚åœ¨Debainç±»ç³»ç»Ÿä¸­ï¼Œadduserä¸Žuseraddæœ‰æ‰€ä¸åŒï¼Œadduseræ˜¯åŸºäºŽuseraddçš„ä¸Šå±‚å‘½ä»¤ï¼Œä¸»è¦è¡¨çŽ°åœ¨adduseré»˜è®¤ä¼šè‡ªåŠ¨åˆ›å»ºç”¨æˆ·ä¸»ç›®å½•ï¼Œé»˜è®¤ä¼šæç¤ºå¯†ç è®¾ç½®ã€‚Â¶2ï¼‰è®¾ç½®ç”¨æˆ·å¯†ç 12#è®¾ç½®ç”¨æˆ·å¯†ç ï¼Œå¦‚æžœæ˜¯æ™®é€šç”¨æˆ·ï¼Œç›´æŽ¥ç”¨ passwd å¯ä»¥ä¿®æ”¹è‡ªå·±çš„è´¦æˆ·å¯†ç passwd ç”¨æˆ·åÂ¶3ï¼‰æŸ¥çœ‹ç³»ç»Ÿçš„ç”¨æˆ·ä¿¡æ¯12345#æŸ¥çœ‹ç³»ç»Ÿä¸­çš„æ‰€æœ‰ç”¨æˆ·ä¿¡æ¯cat /etc/passwd #æ–°å»ºç”¨æˆ·åŽï¼Œç”¨æˆ·ä¿¡æ¯ä¼šä¿å­˜åœ¨ /etc/passwd æ–‡ä»¶ä¸­cat /etc/passwd | grep ç”¨æˆ·åæç¤ºï¼š/etc/passwd æ˜¯ç”¨äºŽä¿å­˜ç”¨æˆ·ä¿¡æ¯çš„æ–‡ä»¶ï¼›è€Œ/usr/bin/passwd æ˜¯ç”¨äºŽä¿®æ”¹ç”¨æˆ·å¯†ç çš„ç¨‹åºã€‚/etc/passwd æ–‡ä»¶å­˜æ”¾çš„æ˜¯ç”¨æˆ·çš„ä¿¡æ¯ï¼Œç”± 6 ä¸ªåˆ†å·ç»„æˆçš„ 7 ä¸ªä¿¡æ¯ï¼Œåˆ†åˆ«æ˜¯ç”¨æˆ·åå¯†ç ï¼ˆxï¼Œè¡¨ç¤ºåŠ å¯†çš„å¯†ç ï¼‰UIDï¼ˆç”¨æˆ·æ ‡è¯†ï¼‰GIDï¼ˆç»„æ ‡è¯†ï¼‰ç”¨æˆ·å…¨åæˆ–æœ¬åœ°å¸å·å®¶ç›®å½•ç™»å½•ä½¿ç”¨çš„ Shellï¼Œå°±æ˜¯ç™»å½•ä¹‹åŽï¼Œä½¿ç”¨çš„ç»ˆç«¯å‘½ä»¤ï¼Œubuntu é»˜è®¤æ˜¯ dashÂ¶4ï¼‰åˆ é™¤ç”¨æˆ·12345#åˆ é™¤ç”¨æˆ·æ—¶ï¼ˆé»˜è®¤ä¸ä¼šè‡ªåŠ¨åˆ é™¤ç”¨æˆ·çš„ä¸»ç›®å½•ï¼Œé»˜è®¤ä¼šåˆ é™¤ç”¨æˆ·çš„åŒåç”¨æˆ·ç»„ï¼‰userdel ç”¨æˆ·å#åˆ é™¤ç”¨æˆ·æ—¶è‡ªåŠ¨åˆ é™¤ç”¨æˆ·çš„ä¸»ç›®å½•userdel -r ç”¨æˆ·åÂ¶5ï¼‰æŸ¥çœ‹ç³»ç»Ÿç”¨æˆ·ä¿¡æ¯12345678#æŸ¥çœ‹ç”¨æˆ· UID å’Œ GID ä¿¡æ¯,é»˜è®¤å½“å‰ç”¨æˆ·id [ç”¨æˆ·å]#æŸ¥çœ‹å½“å‰æ‰€æœ‰ç™»å½•çš„ç”¨æˆ·åˆ—è¡¨who#æŸ¥çœ‹å½“å‰ç™»å½•ç”¨æˆ·çš„è´¦æˆ·åwhoamiÂ¶6ï¼‰ä¿®æ”¹ç”¨æˆ·ç»„å’Œç™»å½•çš„Shellusermodå‘½ä»¤å¯ä»¥ç”¨æ¥è®¾ç½® ç”¨æˆ·çš„ä¸»ç»„ã€é™„åŠ ç»„å’Œç™»å½•çš„Shellï¼Œå‘½ä»¤æ ¼å¼å¦‚ä¸‹ï¼š12345678# ä¿®æ”¹ç”¨æˆ·çš„ä¸»ç»„,é€šå¸¸åœ¨æ–°å»ºç”¨æˆ·æ—¶æŒ‡å®šï¼Œåœ¨/etc/passwdçš„ç¬¬4åˆ—GIDå¯¹åº”çš„ç»„usermod -g ç»„ ç”¨æˆ·å# ä¿®æ”¹ç”¨æˆ·çš„é™„åŠ ç»„,åœ¨/etc/groupä¸­æœ€åŽä¸€åˆ—è¡¨ç¤ºè¯¥ç»„çš„ç”¨æˆ·åˆ—è¡¨ï¼Œç”¨äºŽæŒ‡å®šç”¨æˆ·çš„é™„åŠ æƒé™usermod -G ç»„ ç”¨æˆ·å# ä¿®æ”¹ç”¨æˆ·ç™»å½• Shellusermod -s /bin/bash ç”¨æˆ·åæç¤ºï¼šè®¾ç½®äº†ç”¨æˆ·çš„é™„åŠ ç»„ä¹‹åŽï¼Œéœ€è¦é‡æ–°ç™»å½•æ‰èƒ½ç”Ÿæ•ˆï¼Â¶7ï¼‰åˆ‡æ¢ç”¨æˆ·12345678## 1ã€åˆ‡æ¢ç”¨æˆ·ï¼ˆsuï¼‰ #su æ˜¯ substitute user çš„ç¼©å†™ï¼Œè¡¨ç¤ºåˆ‡æ¢ç”¨æˆ·ï¼Œé»˜è®¤ä¸º root #åˆ‡æ¢ç”¨æˆ·åŽï¼Œå°†å¯åŠ¨æ–°çš„ shell ä¼šè¯ï¼Œå¯é€šè¿‡å‘½ä»¤ echo $$ æŸ¥çœ‹â€œå½“å‰ä¼šè¯ IDâ€çš„æ–¹å¼æ¥éªŒè¯ #å¯æŒ‡å®š -, -l, --login è¡¨ç¤ºä½¿ç”¨ç™»å½•æ–¹å¼å¯åŠ¨ä¸€ä¸ªæ–°çš„ shell ä¼šè¯æ¥æ¥åˆ‡æ¢ç”¨æˆ·ã€‚ #ç¤ºä¾‹ï¼šsu - æˆ– su - test1 #å¦‚æžœä¸æŒ‡å®šï¼Œåˆ™åˆ‡æ¢ç”¨æˆ·åŽæ–°çš„ shell ä¼šè¯ä»ç„¶å±žäºŽå‰ä¸€ä¸ªç”¨æˆ·ï¼Œå¯é€šè¿‡å‘½ä»¤ echo $USER æ¥æŸ¥çœ‹â€œå½“å‰ç”¨æˆ·â€çš„æ–¹å¼éªŒè¯su [username]#å¦‚ï¼šsu test1 æˆ– su - test1su åˆ‡æ¢ç”¨æˆ·ç¤ºæ„å›¾å¦‚ä¸‹ï¼šÂ¶4. è¶…çº§ç”¨æˆ·æƒé™ç»´æŠ¤Linux ç³»ç»Ÿä¸­çš„ root ç”¨æˆ·æ˜¯è¶…çº§ç”¨æˆ·ï¼Œé€šå¸¸ç”¨äºŽç³»ç»Ÿçš„ç»´æŠ¤å’Œç®¡ç†ï¼Œå¯¹æ“ä½œç³»ç»Ÿçš„æ‰€æœ‰èµ„æºå…·æœ‰æ‰€æœ‰è®¿é—®æƒé™ï¼Œåœ¨å¤§å¤šæ•°ç‰ˆæœ¬çš„ Linux ä¸­ï¼Œéƒ½ä¸æŽ¨èç›´æŽ¥ä½¿ç”¨ root è´¦å·ç™»å½•ç³»ç»Ÿï¼Œåœ¨ Linux å®‰è£…çš„è¿‡ç¨‹ä¸­ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨åˆ›å»ºä¸€ä¸ªç”¨æˆ·è´¦å·ï¼Œè€Œè¿™ä¸ªé»˜è®¤çš„ç”¨æˆ·ç§°ä¸º â€œæ ‡å‡†ç”¨æˆ·â€ã€‚1234567891011121314151617181920## 1ã€ä»¥è¶…çº§ç”¨æˆ·æƒé™æ‰§è¡Œï¼ˆsudoï¼‰ #sudo è¡¨ç¤ºä»¥è¶…çº§ç”¨æˆ·æƒé™æ‰§è¡Œï¼Œå³å…è®¸æ™®é€šç”¨æˆ·åœ¨ä¸åˆ‡æ¢åˆ°è¶…çº§ç”¨æˆ·ï¼ˆrootï¼‰çš„æƒ…å†µä¸‹ä»¥ root ç”¨æˆ·æƒé™æ‰§è¡Œå‘½ä»¤ #æ‰§è¡Œ sudo å‘½ä»¤æ—¶ï¼Œè¦æ±‚å½“å‰ç”¨æˆ·å¿…é¡»ä¸º sudo ç”¨æˆ·ç»„ #ä½¿ç”¨ sudo å‘½ä»¤æ—¶ï¼Œå¿…é¡»å…ˆè¾“å…¥ root ç”¨æˆ·çš„å¯†ç  #ä½¿ç”¨ sudo åŽæœ‰ 5 åˆ†é’Ÿçš„æœ‰æ•ˆæœŸé™ï¼Œè¶…è¿‡æœŸé™åˆ™å¿…é¡»é‡æ–°è¾“å…¥å¯†ç sudo &lt;command&gt;#å¦‚ï¼šsudo ls /root## 2ã€æ·»åŠ æŸç”¨æˆ·åˆ° sudo ç”¨æˆ·ç»„ #åœ¨ Debian ç³»åˆ—ç³»ç»Ÿä¸­ï¼Œé»˜è®¤ä½¿ç”¨åä¸º sudo çš„ç”¨æˆ·ç»„æ¥ç®¡ç† sudo è®¿é—®æƒé™ï¼›åœ¨ Red Hat ç³»åˆ—ç³»ç»Ÿä¸­ï¼Œé»˜è®¤ä½¿ç”¨åä¸º wheel çš„ç”¨æˆ·ç»„æ¥ç®¡ç† sudo è®¿é—®æƒé™ #å…·ä½“ç®¡ç† sudo è®¿é—®æƒé™çš„ç”¨æˆ·ç»„åç§°å¯åœ¨ /etc/sudoers æ–‡ä»¶ä¸­ç¡®å®šï¼ˆå¯é€šè¿‡ visudo å‘½ä»¤ç›´æŽ¥æ‰“å¼€è¯¥æ–‡ä»¶) #ç”±äºŽ Debian ç³»åˆ—ç³»ç»Ÿå’Œ Red Hat ç³»åˆ—ç³»ç»Ÿç®¡ç† sudo è®¿é—®æƒé™çš„ç”¨æˆ·ç»„åç§°ä¸åŒï¼Œæ‰€ä»¥å¯¹äºŽä¸åŒå‘è¡Œç‰ˆç³»ç»Ÿæ“ä½œç±»ä¼¼ä½†ä¸ä¸€å®šç›¸åŒï¼Œå…·ä½“å¦‚ä¸‹ï¼š#ï¼ˆ1ï¼‰å…ˆåˆ‡æ¢åˆ° root ç”¨æˆ·su#ï¼ˆ2ï¼‰å¯¹äºŽ Debian ç³»åˆ—ç³»ç»Ÿ apt install -y sudo #å¦‚æžœæ²¡æœ‰ sudo å‘½ä»¤ï¼Œåˆ™éœ€è¦å…ˆå®‰è£…usermod -a -G sudo &lt;username&gt; #æ·»åŠ æŸç”¨æˆ·åˆ° sudo ç”¨æˆ·ç»„ï¼Œå¦‚ï¼šusermod -a -G sudo test1#ï¼ˆ3ï¼‰å¯¹äºŽ Redhat ç³»åˆ—ç³»ç»Ÿ yum install -y sudo #å¦‚æžœæ²¡æœ‰ sudo å‘½ä»¤ï¼Œåˆ™éœ€è¦å…ˆå®‰è£…usermod -a -G wheel &lt;username&gt; #æ·»åŠ æŸç”¨æˆ·åˆ° sudo ç”¨æˆ·ç»„ï¼Œå¦‚ï¼šusermod -a -G wheel test1Â¶5. ç”¨æˆ·ç™»å½•ç»´æŠ¤Â¶1ï¼‰æŸ¥çœ‹å½“å‰ç™»å½•åˆ°ç³»ç»Ÿä¸Šçš„ç”¨æˆ·ä¿¡æ¯12#æŸ¥çœ‹å½“å‰ç™»å½•åˆ°ç³»ç»Ÿä¸Šçš„ç”¨æˆ·ä¿¡æ¯whoç¤ºä¾‹ï¼š1234[root@vm35218 ~]# whoroot pts/0 2023-06-17 09:45 (183.11.72.163)root pts/1 2023-06-17 09:45 (183.11.72.163)qcmoke pts/2 2023-06-17 10:00 (183.11.72.163)Â¶2ï¼‰æŸ¥çœ‹ç³»ç»Ÿä¸­æ‰€æœ‰ç”¨æˆ·çš„æœ€è¿‘ç™»å½•ä¿¡æ¯lastlogå‘½ä»¤å¯ç”¨äºŽæ˜¾ç¤ºæ¯ä¸ªç”¨æˆ·æœ€åŽä¸€æ¬¡ç™»å½•çš„æ—¥æœŸã€æ—¶é—´ã€ç»ˆç«¯ä½ç½®å’ŒIPåœ°å€ç­‰ä¿¡æ¯ã€‚1234567#æŸ¥çœ‹ç³»ç»Ÿä¸­æ‰€æœ‰ç”¨æˆ·çš„æœ€è¿‘ç™»å½•ä¿¡æ¯lastlog#å¦‚æžœæ‰§è¡Œå‘½ä»¤å¤±è´¥ï¼Œæç¤ºï¼š/var/log/lastlog: æ²¡æœ‰é‚£ä¸ªæ–‡ä»¶æˆ–ç›®å½•ã€‚åˆ™å¦‚ä¸‹è§£å†³ï¼štouch /var/log/lastlogchgrp utmp /var/log/lastlogchmod 664 /var/log/lastlogç¤ºä¾‹ï¼š1234567891011121314151617181920212223242526[root@vm35218 ~]# lastlogç”¨æˆ·å ç«¯å£ æ¥è‡ª æœ€åŽç™»é™†æ—¶é—´root pts/1 183.11.72.163 å…­ 6æœˆ 17 09:45:58 +0800 2023bin **ä»Žæœªç™»å½•è¿‡**daemon **ä»Žæœªç™»å½•è¿‡**adm **ä»Žæœªç™»å½•è¿‡**lp **ä»Žæœªç™»å½•è¿‡**sync **ä»Žæœªç™»å½•è¿‡**shutdown **ä»Žæœªç™»å½•è¿‡**halt **ä»Žæœªç™»å½•è¿‡**mail **ä»Žæœªç™»å½•è¿‡**operator **ä»Žæœªç™»å½•è¿‡**games **ä»Žæœªç™»å½•è¿‡**ftp **ä»Žæœªç™»å½•è¿‡**nobody **ä»Žæœªç™»å½•è¿‡**systemd-network **ä»Žæœªç™»å½•è¿‡**dbus **ä»Žæœªç™»å½•è¿‡**polkitd **ä»Žæœªç™»å½•è¿‡**sshd **ä»Žæœªç™»å½•è¿‡**postfix **ä»Žæœªç™»å½•è¿‡**chrony **ä»Žæœªç™»å½•è¿‡**gluster **ä»Žæœªç™»å½•è¿‡**git **ä»Žæœªç™»å½•è¿‡**qcmoke pts/2 183.11.72.163 å…­ 6æœˆ 17 10:00:40 +0800 2023dockremap **ä»Žæœªç™»å½•è¿‡**nginx **ä»Žæœªç™»å½•è¿‡**Â¶3ï¼‰æŸ¥çœ‹ç³»ç»Ÿä¸­ç”¨æˆ·çš„å®Œæ•´ç™»å½•åŽ†å²è®°å½•lastå‘½ä»¤å¯ç”¨äºŽæ˜¾ç¤ºæ¯ä¸ªç”¨æˆ·æœ€åŽä¸€æ¬¡ç™»å½•çš„æ—¥æœŸã€æ—¶é—´ã€ç»ˆç«¯ä½ç½®å’ŒIPåœ°å€ç­‰ä¿¡æ¯ã€‚12345#æŸ¥çœ‹ç³»ç»Ÿä¸­æ‰€æœ‰ç”¨æˆ·çš„å®Œæ•´ç™»å½•åŽ†å²è®°å½•last#æŸ¥çœ‹ç³»ç»Ÿä¸­æŒ‡å®šç”¨æˆ·çš„å®Œæ•´ç™»å½•åŽ†å²è®°å½•last rootç¤ºä¾‹ï¼š123456789101112131415161718192021222324252627282930313233343536[root@vm35218 ~]# lastqcmoke pts/2 183.11.72.163 Sat Jun 17 10:00 still logged in root pts/1 183.11.72.163 Sat Jun 17 09:45 still logged in root pts/0 183.11.72.163 Sat Jun 17 09:45 still logged in root pts/1 183.11.73.129 Thu Jun 15 23:39 - 00:22 (00:43) root pts/0 183.11.73.129 Thu Jun 15 23:39 - 00:22 (00:43) root pts/1 183.11.72.5 Mon Jun 12 21:54 - 21:54 (00:00) root pts/0 183.11.72.5 Mon Jun 12 21:54 - 21:54 (00:00) root pts/1 183.11.72.5 Mon Jun 12 21:32 - 21:32 (00:00) root pts/0 183.11.72.5 Mon Jun 12 21:32 - 21:32 (00:00) root pts/1 183.11.72.5 Mon Jun 12 12:45 - 15:02 (02:16) root pts/0 183.11.72.5 Mon Jun 12 12:45 - 15:02 (02:16) root pts/1 183.11.72.5 Mon Jun 12 02:38 - 06:33 (03:54) root pts/0 183.11.72.5 Mon Jun 12 02:38 - 06:33 (03:54) root pts/1 183.11.75.79 Sun Jun 11 19:03 - 19:03 (00:00) root pts/0 183.11.75.79 Sun Jun 11 19:03 - 19:03 (00:00) root pts/1 183.11.75.79 Sun Jun 11 18:43 - 18:43 (00:00) root pts/0 183.11.75.79 Sun Jun 11 18:43 - 18:43 (00:00) qcmoke pts/2 183.11.75.79 Sun Jun 11 03:49 - 03:49 (00:00) root pts/1 183.11.75.79 Sun Jun 11 02:12 - 04:32 (02:19) root pts/0 183.11.75.79 Sun Jun 11 02:12 - 04:32 (02:19) root pts/1 183.11.75.79 Sun Jun 11 00:18 - 02:12 (01:53) root pts/0 183.11.75.79 Sun Jun 11 00:18 - 02:12 (01:53) reboot system boot 5.13.5-1.el7.elr Sun Jun 11 00:18 - 10:17 (6+09:59) root pts/2 183.11.75.79 Sun Jun 11 00:01 - down (00:16) root pts/0 183.11.75.79 Sun Jun 11 00:01 - down (00:16) root pts/2 183.11.75.79 Sat Jun 10 19:31 - 00:01 (04:30) root pts/0 183.11.75.79 Sat Jun 10 19:31 - 00:01 (04:30) root pts/2 183.11.75.79 Sat Jun 10 16:08 - 19:31 (03:22) root pts/0 183.11.75.79 Sat Jun 10 16:08 - 19:31 (03:22) root pts/2 183.11.75.79 Sat Jun 10 15:53 - 16:06 (00:12) root pts/0 183.11.75.79 Sat Jun 10 15:53 - 16:06 (00:12) root pts/2 183.11.75.79 Sat Jun 10 14:25 - 15:48 (01:23) root pts/0 183.11.75.79 Sat Jun 10 14:25 - 15:48 (01:23) root pts/2 183.11.75.79 Sat Jun 10 11:01 - 12:37 (01:36) root pts/0 183.11.75.79 Sat Jun 10 11:01 - 12:37 (01:36)Â¶4ï¼‰ è¸¢å‡ºç™»å½•ç”¨æˆ·12345#é€‰æ‹©ç™»å½•ç»ˆç«¯å¹¶å¼ºåˆ¶è¸¢å‡ºï¼Œä¾‹å¦‚é€‰æ‹©è¸¢å‡ºä½¿ç”¨ç»ˆç«¯pts/1ç™»å½•çš„ç”¨æˆ·ã€‚#æ–¹æ³•ä¸€ï¼špkill -kill -t pts/1#æ–¹æ³•äºŒï¼šfuser -k /dev/pts/1æ¡ˆä¾‹1234567#å…ˆåˆ—ä¸¾å½“å‰ç™»å½•çš„ç³»ç»Ÿç”¨æˆ·[root@VM_0_6_centos ~]# whoroot pts/0 2020-02-28 10:50 (163.125.117.95)root pts/1 2020-02-28 10:49 (163.125.117.95)#é€‰æ‹©ç™»å½•ç»ˆç«¯å¹¶å¼ºåˆ¶è¸¢å‡º,å¯ä»¥ç»™ä»–å‘é€åŽå†è¸¢å‡º[root@VM_0_6_centos ~]# echo "ä½ è¢«ç®¡ç†å‘˜è¸¢å‡ºäº†" &gt; /dev/pts/1 &amp;&amp; fuser -k /dev/pts/1/dev/pts/1: 23381Â¶å…­ã€è½¯ä»¶ç®¡ç†Â¶1. è½¯ä»¶ç®¡ç†ç®€ä»‹Â¶1.1 åŒ…å…¨åä¸ŽåŒ…ååŒ…å…¨åï¼šæ“ä½œçš„åŒ…æ˜¯æ²¡æœ‰å®‰è£…çš„è½¯ä»¶åŒ…æ—¶ï¼Œä½¿ç”¨åŒ…å…¨åã€‚åŒ…åï¼šæ“ä½œå·²ç»å®‰è£…çš„è½¯ä»¶åŒ…æ—¶ä½¿ç”¨çš„åŒ…åã€‚linuxå®‰è£…åŽåŒ…åéƒ½å­˜åœ¨/var/lib/rpm/ä¸­çš„æ•°æ®åº“Â¶1.2 LinuxåŒ…ä¾èµ–æ€§æ ‘å½¢ä¾èµ–ï¼ša&gt;b&gt;cçŽ¯å½¢ä¾èµ–ï¼ša&gt;b&gt;c&gt;aæ¨¡å—ä¾èµ–ï¼šæ¨¡å—ä¾èµ–è½¯ä»¶å®‰è£…çš„è¿‡ç¨‹ï¼šï¼ˆ1ï¼‰cpç±»åº“åˆ°ç³»ç»Ÿç›®å½•ä¸­ï¼ˆ2ï¼‰cpå¯æ‰§è¡Œç¨‹åºå’Œé…ç½®æ–‡ä»¶åˆ°ç³»ç»Ÿç›®å½•ä¸­ï¼ˆ3ï¼‰æ ¹æ®éœ€è¦é€‰æ‹©æ€§é…ç½®å’Œå¯åŠ¨æœåŠ¡ï¼ˆç¨‹åºï¼‰å¯¹äºŽwindowsç³»ç»Ÿè¿˜ä¼šå¤šå‡ºä¸€ä¸ªæ­¥éª¤ï¼Œé‚£å°±æ˜¯åˆ°æŠŠå¯åŠ¨é…ç½®æˆ–è€…ç¨‹åºä¾èµ–çš„é…ç½®æ”¾åˆ°æ³¨å†Œè¡¨ä¸­ã€‚Â¶1.3 å¸¸è§è½¯ä»¶åŒ…å‘½ååŽŸåˆ™ï¼ˆ1ï¼‰Debian è½¯ä»¶åŒ…æ ¼å¼ï¼šapache2_2.4.18-2ubuntu3_amd64.debapache2ï¼šè½¯ä»¶åŒ…å2.4.18 ï¼šè½¯ä»¶ç‰ˆæœ¬2ï¼šè½¯ä»¶å‘å¸ƒçš„æ¬¡æ•°ubuntu3ï¼šé€‚åˆçš„ç³»ç»Ÿç‰ˆæœ¬amd64ï¼šé€‚åˆçš„ç¡¬ä»¶å¹³å°debï¼šDebian è½¯ä»¶åŒ…æ‰©å±•åï¼ˆ2ï¼‰RPM è½¯ä»¶åŒ…æ ¼å¼ï¼šhttpd-2.2.15-15.el6.centos.1.i686.rpmhttpdï¼šè½¯ä»¶åŒ…å2.2.15ï¼šè½¯ä»¶ç‰ˆæœ¬15ï¼šè½¯ä»¶å‘å¸ƒçš„æ¬¡æ•°el6.centosï¼šé€‚åˆçš„ç³»ç»Ÿç‰ˆæœ¬i686ï¼šé€‚åˆçš„ç¡¬ä»¶å¹³å°.rpmï¼šRPM è½¯ä»¶åŒ…æ‰©å±•åÂ¶1.4 linuxè½¯ä»¶åŒ…ä¼˜å…ˆçº§Requiredè¯¥çº§åˆ«è½¯ä»¶åŒ…æ˜¯ä¿è¯ç³»ç»Ÿæ­£å¸¸è¿è¡Œæ‰€å¿…é¡»çš„ï¼Œå¦‚æžœç¼ºå¤±ï¼Œç³»ç»Ÿå°†æ¯åç³»ç»Ÿå·¥å…·ï¼Œæ¯”å¦‚bashï¼Œmountâ€¦Importantè‹¥ç¼ºå°‘è¯¥è½¯ä»¶åŒ…ï¼Œç³»ç»Ÿè®²è¿è¡Œå›°éš¾å®žçŽ°ç³»ç»Ÿåº•å±‚åŠŸèƒ½çš„ä¸€äº›ç¨‹åºï¼Œæ¯”å¦‚aptitude,apt-getStandardlinuxç³»ç»Ÿçš„æ ‡å‡†ä»¶å¸¸è§„å®‰è£…è½¯ä»¶ï¼Œå¦‚telnet.tpOptionalè¯¥è½¯ä»¶åŒ…æ˜¯å¦å®‰è£…ä¸å½±å“linuxè¿è¡Œç”¨äºŽç”¨æˆ·ç‰¹å®šçš„éœ€æ±‚ï¼Œæ¯”å¦‚Ã—11ï¼Œmysqlï¼Œopenoficeï¼Œè‡ªå¼€å‘è½¯ä»¶ç­‰Extraè¯¥çº§åˆ«å¯èƒ½ä¸Žé«˜çº§è½¯ä»¶åŒ…å­˜å†²çªÂ¶2. Debain ç³»åˆ—ç³»ç»Ÿçš„è½¯ä»¶ç®¡ç†Â¶1ï¼‰dpkg æœ¬åœ°åŒ…ç®¡ç†å™¨Â¶ï¼ˆ1ï¼‰å®‰è£…12#iè¡¨ç¤ºinstalldpkg -i è½¯ä»¶åŒ…å…¨åÂ¶ï¼ˆ2ï¼‰å¸è½½12#rè¡¨ç¤ºremovedpkg -r è½¯ä»¶åŒ…å #ç§»é™¤åŒ…ä¸ç§»é™¤é…ç½®æ–‡ä»¶12#-Pç­‰ä»·äºŽ--purgï¼Œè¡¨ç¤ºç§»é™¤åŒ…å’Œé…ç½®æ–‡ä»¶dpkg -P è½¯ä»¶åŒ…å #ç§»é™¤åŒ…å’Œé…ç½®æ–‡ä»¶Â¶ï¼ˆ3ï¼‰æŸ¥è¯¢12345dpkg -l è½¯ä»¶åŒ…å #åˆ—å‡ºå½“å‰ç³»ç»Ÿä¸­å·²ç»å®‰è£…çš„åŒ…ï¼ŒåŒ…æ‹¬è½¯ä»¶çš„ç‰ˆæœ¬ï¼Œå¯ä»¥ä½¿ç”¨dpkg -l | grep å…³é”®å­—æ¥æŸ¥è¯¢dpkg -L è½¯ä»¶åŒ…å #åˆ—å‡ºå·²å®‰è£…çš„åŒ…çš„å†…å®¹ï¼Œæˆ–è€…å®‰è£…ä½ç½®dpkg -c è½¯ä»¶åŒ…å…¨å #åˆ—å‡ºdebåŒ…çš„å†…å®¹dpkg -s è½¯ä»¶åŒ…å #æŸ¥çœ‹ç³»ç»Ÿä¸­è½¯ä»¶çš„è¯¦ç»†ä¿¡æ¯ ï¼ˆåŒ…å«ä¾èµ–ä¿¡æ¯ï¼‰dpkg --info è½¯ä»¶åŒ…å…¨å #æŸ¥çœ‹æœªå®‰è£…çš„åŒ…çš„ä¿¡æ¯ï¼ˆåŒ…å«ä¾èµ–ä¿¡æ¯ï¼‰Â¶2ï¼‰apt åœ¨çº¿åŒ…ç®¡ç†å™¨APTï¼ˆAdvanced Package Toolï¼‰æ˜¯åŸºäºŽ dpkg çš„åœ¨çº¿åŒ…ç®¡ç†å·¥å…·ï¼Œå®ƒæä¾›äº†é«˜çº§çš„è½¯ä»¶åŒ…ç®¡ç†åŠŸèƒ½ï¼ŒåŒ…æ‹¬åŒ…çš„å®‰è£…ã€å‡çº§ã€åˆ é™¤å’Œä¾èµ–è§£å†³ç­‰ã€‚APT é€šè¿‡ä¸Žè½¯ä»¶åŒ…ä»“åº“è¿›è¡Œäº¤äº’ï¼Œä»Žè¿œç¨‹ä»“åº“èŽ·å–è½¯ä»¶åŒ…ä¿¡æ¯å¹¶ç®¡ç†è½¯ä»¶åŒ…çš„å®‰è£…å’Œæ›´æ–°ã€‚APT æä¾›äº†ä¸€äº›å¸¸ç”¨çš„å‘½ä»¤è¡Œå·¥å…·ï¼šapt-getï¼šç”¨äºŽå®‰è£…ã€å‡çº§ã€å¸è½½è½¯ä»¶åŒ…ï¼Œä»¥åŠå¤„ç†ä¾èµ–å…³ç³»å’Œè½¯ä»¶åŒ…çš„ä¸‹è½½ç­‰ã€‚apt-cacheï¼šç”¨äºŽæŸ¥è¯¢è½¯ä»¶åŒ…çš„ä¿¡æ¯ï¼Œå¦‚ç‰ˆæœ¬ã€ä¾èµ–å…³ç³»ã€æä¾›çš„æ–‡ä»¶ç­‰ã€‚apt-configï¼šç”¨äºŽç®¡ç† APT çš„é…ç½®æ–‡ä»¶ã€‚apt-keyï¼šç”¨äºŽç®¡ç†è½¯ä»¶åŒ…çš„æ•°å­—ç­¾åå’Œå¯†é’¥ã€‚apt-fileï¼šç”¨äºŽæŸ¥è¯¢è½¯ä»¶åŒ…ä¸­çš„æ–‡ä»¶åˆ—è¡¨ã€‚aptitudeï¼šä¸€ä¸ªåŠŸèƒ½æ›´å¼ºå¤§çš„ç»ˆç«¯ç•Œé¢çš„åŒ…ç®¡ç†å·¥å…·ï¼Œæä¾›äº¤äº’å¼çš„è½¯ä»¶åŒ…ç®¡ç†åŠŸèƒ½ã€‚ç”±äºŽ APT æä¾›çš„å·¥å…·é›†å¤ªå¤šï¼Œä½¿ç”¨å¤ªç¹æ‚ï¼Œæ•…è€Œæ–°ç‰ˆ Debian ç³»åˆ—ç³»ç»Ÿä½¿ç”¨ apt å‘½ä»¤æ¥åŒ…å«å›Šæ‹¬apt-get ã€apt-cache å‘½ä»¤ï¼Œæ•…è€ŒçŽ°åœ¨æŽ¨èä½¿ç”¨aptå‘½ä»¤æ¥æ›¿ä»£apt-getç­‰å‘½ä»¤ã€‚Â¶ï¼ˆ1ï¼‰ apt è½¯ä»¶æºÂ¶ï¼ˆ1.1ï¼‰ä¿®æ”¹ Ubuntu è½¯ä»¶æºä¸ºå›½å†…æº123456789101112131415161718192021222324252627282930##åˆ‡æ¢åˆ°rootç”¨æˆ·sudo -i##å®‰è£…ç›¸å…³ä¾èµ–ï¼ˆå¦‚ç³»ç»Ÿæœªå®‰è£…ï¼‰apt updateapt install -y ca-certificates##å¤‡ä»½cp /etc/apt/sources.list /etc/apt/sources.list_backup##æ›¿æ¢è½¯ä»¶æºï¼ˆæ”¯æŒæ‰€æœ‰ubuntu18.04æˆ–æ›´é«˜çš„ç³»ç»Ÿç‰ˆæœ¬ï¼‰MIRRORS_URL=https://mirrors.aliyun.com #é˜¿é‡Œæºï¼ˆæŽ¨èï¼‰#MIRRORS_URL=https://mirrors.163.com #ç½‘æ˜“æºVERSION_CODENAME=$(cat /etc/os-release | grep VERSION_CODENAME | sed 's/.*=//') #ç³»ç»Ÿç‰ˆæœ¬ä»£å·cat &gt; /etc/apt/sources.list &lt;&lt; EOFdeb $MIRRORS_URL/ubuntu/ $VERSION_CODENAME main restricted universe multiversedeb-src $MIRRORS_URL/ubuntu/ $VERSION_CODENAME main restricted universe multiversedeb $MIRRORS_URL/ubuntu/ $VERSION_CODENAME-security main restricted universe multiversedeb-src $MIRRORS_URL/ubuntu/ $VERSION_CODENAME-security main restricted universe multiversedeb $MIRRORS_URL/ubuntu/ $VERSION_CODENAME-updates main restricted universe multiversedeb-src $MIRRORS_URL/ubuntu/ $VERSION_CODENAME-updates main restricted universe multiverse# deb $MIRRORS_URL/ubuntu/ $VERSION_CODENAME-proposed main restricted universe multiverse# deb-src $MIRRORS_URL/ubuntu/ $VERSION_CODENAME-proposed main restricted universe multiversedeb $MIRRORS_URL/ubuntu/ $VERSION_CODENAME-backports main restricted universe multiversedeb-src $MIRRORS_URL/ubuntu/ $VERSION_CODENAME-backports main restricted universe multiverseEOF##æ›´æ–°è½¯ä»¶æºapt updateå‚è€ƒï¼šhttps://developer.aliyun.com/mirror/ubuntu?spm=a2c6h.13651102.0.0.1ecc1b11jbngYSé€šè¿‡apt updateæ›´æ–°è½¯ä»¶æºåˆ°æœ¬åœ°å¹¶åœ¨æœ¬åœ°å»ºç«‹æ–°è¿œç¨‹è½¯ä»¶åº“æ‰€æœ‰è½¯ä»¶åŒ…å¯¹åº”çš„ç´¢å¼•è¡¨(æ•°æ®åº“å½¢å¼)ï¼Œæ‰€æœ‰å­˜æ”¾åœ¨/var/lib/apt/lists/*Â¶ï¼ˆ1.2ï¼‰ä¿®æ”¹ Debian è½¯ä»¶æºä¸ºå›½å†…æº1234567891011121314151617181920212223242526272829##åˆ‡æ¢åˆ°rootç”¨æˆ·#å¦‚æžœsudoå‘½ä»¤æ²¡æœ‰ï¼Œåˆ™é€šè¿‡rootç”¨æˆ·å®‰è£…sudoï¼Œå¦‚ï¼šapt install sudosudo -i##å®‰è£…ç›¸å…³ä¾èµ–ï¼ˆå¦‚ç³»ç»Ÿæœªå®‰è£…ï¼‰apt updateapt install -y ca-certificates##å¤‡ä»½cp /etc/apt/sources.list /etc/apt/sources.list_backup##æ›¿æ¢è½¯ä»¶æºï¼ˆæ”¯æŒæ‰€æœ‰debianç³»ç»Ÿç‰ˆæœ¬ï¼‰MIRRORS_URL=https://mirrors.aliyun.com #é˜¿é‡Œæºï¼ˆæŽ¨èï¼‰#MIRRORS_URL=https://mirrors.163.com #ç½‘æ˜“æº#MIRRORS_URL=http://deb.debian.org #å®˜æ–¹æºVERSION_CODENAME=$(cat /etc/os-release | grep VERSION_CODENAME | sed 's/.*=//') #ç³»ç»Ÿç‰ˆæœ¬ä»£å·cat &gt; /etc/apt/sources.list &lt;&lt; EOFdeb $MIRRORS_URL/debian/ $VERSION_CODENAME main non-free contribdeb-src $MIRRORS_URL/debian/ $VERSION_CODENAME main non-free contribdeb $MIRRORS_URL/debian-security/ $VERSION_CODENAME-security maindeb-src $MIRRORS_URL/debian-security/ $VERSION_CODENAME-security maindeb $MIRRORS_URL/debian/ $VERSION_CODENAME-updates main non-free contribdeb-src $MIRRORS_URL/debian/ $VERSION_CODENAME-updates main non-free contribdeb $MIRRORS_URL/debian/ $VERSION_CODENAME-backports main non-free contribdeb-src $MIRRORS_URL/debian/ $VERSION_CODENAME-backports main non-free contribEOF##æ›´æ–°è½¯ä»¶æºapt updateå‚è€ƒï¼šhttps://www.cnblogs.com/liuguanglin/p/debian11_repo.htmlhttps://developer.aliyun.com/article/765348https://developer.aliyun.com/mirror/debian?spm=a2c6h.13651102.0.0.7fb11b11YdBUCMhttps://mirrors.ustc.edu.cn/repogen/Â¶ï¼ˆ2ï¼‰æŸ¥è¯¢1234567891011121314151617181920212223242526272829#æ ¹æ®å…³é”®å­—æœç´¢å¯ç”¨è½¯ä»¶åŒ…ï¼ˆç­‰ä»·ï¼šapt-cache search è½¯ä»¶åŒ…å…³é”®å­—ï¼‰apt search è½¯ä»¶åŒ…å…³é”®å­—#æŸ¥è¯¢æŸä¸ªå‘½ä»¤æ‰€å±žçš„å®‰è£…åŒ…ï¼ˆå‘½ä»¤æ‰€å±žçš„è½¯ä»¶åŒ…å®‰è£…æˆ–æœªå®‰è£…éƒ½å¯ä»¥æŸ¥è¯¢ï¼‰apt install apt-fileapt-file updateapt-file search å‘½ä»¤è·¯å¾„ #å¦‚ï¼šapt-file search /sbin/ifconfigï¼ˆæ³¨æ„ï¼šapt-file search ä¸æ”¯æŒä½¿ç”¨é€šé…ç¬¦æŸ¥è¯¢ï¼‰#åˆ—å‡ºæ‰€æœ‰å¯ç”¨è½¯ä»¶åŒ…apt list#åˆ—å‡ºå·²ç»å®‰è£…çš„æ‰€æœ‰è½¯ä»¶åŒ…apt list --installed#åˆ—å‡ºå·²ç»å®‰è£…çš„æŒ‡å®šè½¯ä»¶åŒ…apt list --installed &lt;package-name&gt; #æˆ–è€…apt list --installed | grep å…³é”®å­—#åˆ—å‡ºå¯æ›´æ–°çš„æ‰€æœ‰è½¯ä»¶åŒ…apt list --upgradable##æŸ¥çœ‹å®‰è£…åŒ…çš„ä¿¡æ¯ï¼ˆåŒ…æ‹¬ï¼šåç§°ã€ç‰ˆæœ¬ã€å®‰è£…æºã€åŒ…å¤§å°ã€ä¾èµ–å…³ç³»ã€æè¿°ç­‰ï¼‰apt show &lt;package-name&gt;##æŸ¥çœ‹è½¯ä»¶åŒ…æ”¿ç­–ï¼ˆåŒ…æ‹¬ç‰ˆæœ¬ä¿¡æ¯ã€æºä¿¡æ¯ç­‰ï¼‰apt policy &lt;package-name&gt;#æ£€æŸ¥å½“å‰aptçš„ä¾èµ–æƒ…å†µapt check#æŸ¥çœ‹ç³»ç»Ÿä¸­è½¯ä»¶çš„ä¾èµ–ï¼ˆæ­£å‘ä¾èµ–ï¼‰apt depends &lt;package-name&gt;#æŸ¥çœ‹ç³»ç»Ÿä¸­è½¯ä»¶çš„ä¾èµ–ï¼ˆåå‘ä¾èµ–ï¼‰apt rdepends &lt;package-name&gt;å¯ä½¿ç”¨apt-cacheå­å‘½ä»¤æ¥å®žçŽ°æŸ¥è¯¢åŠŸèƒ½ï¼ŒæŽ¨èä½¿ç”¨aptå‘½ä»¤æ¥æŸ¥è¯¢ï¼Œå…¶å…¼å®¹apt-cacheã€‚Â¶ï¼ˆ3ï¼‰ å®‰è£…12345678910#å®‰è£…æŒ‡å®šçš„è½¯ä»¶åŒ…ï¼ˆé€‰é¡¹ï¼š-y è‡ªåŠ¨å›žç­”yesï¼‰ #è¯¥å‘½ä»¤å®‰è£…åŒ…å‰ä¸ä¼šè‡ªåŠ¨æ£€æµ‹è½¯ä»¶æºçš„æœ¬åœ°ç¼“å­˜ï¼Œæ•…å®‰è£…å‰æœ€å¥½æ‰‹åŠ¨æ‰§è¡Œapt updateå‘½ä»¤apt install &lt;package-name&gt;#ä¿®å¤ç³»ç»Ÿä¸­å­˜åœ¨çš„ä¾èµ–å…³ç³»é—®é¢˜ï¼ˆå°è¯•å®‰è£…ç¼ºå¤±çš„ä¾èµ–åŒ…ã€åˆ é™¤ä¸å†éœ€è¦çš„ä¾èµ–åŒ…ã€ä¿®å¤å·²æŸåçš„ä¾èµ–å…³ç³»ç­‰ï¼‰apt -f install#èŽ·å¾—åŒ…çš„æºç apt source &lt;package-name&gt;apt installå·¥ä½œæ­¥éª¤æ‰«ææœ¬åœ°è½¯ä»¶åˆ—è¡¨è½¯ä»¶åŒ…ä¾èµ–æ£€æŸ¥ä»Žè½¯ä»¶åŒ…æŒ‡å®šçš„ apt æºä¸­ä¸‹è½½è½¯ä»¶åŒ…è§£åŽ‹è½¯ä»¶åŒ…å¹¶å®Œæˆé…ç½®é»˜è®¤æƒ…å†µä¸‹ï¼Œapt install åœ¨æˆåŠŸå®‰è£…è½¯ä»¶åŒ…åŽä¼šè‡ªåŠ¨åˆ é™¤ä¸‹è½½çš„è½¯ä»¶åŒ…æ–‡ä»¶ã€‚å¦‚æžœéœ€è¦èŽ·å–è½¯ä»¶åŒ…æ–‡ä»¶å¯å¦‚ä¸‹æ“ä½œï¼š1234567891011121314151617#æ–¹å¼1ï¼šä¸‹è½½è½¯ä»¶åŒ… #ä¸‹è½½è·¯å¾„ä¸ºï¼š/var/cache/apt/archives/ ï¼ˆä¸èƒ½ä¿®æ”¹ï¼‰ #è¯¥å‘½ä»¤ä¸‹è½½è½¯ä»¶åŒ…ä¼šå¼ºåˆ¶åŒ…æ‹¬ä¾èµ–åŒ… #è¯¥å‘½ä»¤åªä¸‹è½½ä¸å®‰è£… #åªæœ‰åœ¨ç³»ç»Ÿæœªå®‰è£…æœ‰è½¯ä»¶åŒ…æ—¶æ‰èƒ½ä¸‹è½½ï¼Œå¦‚æžœå·²ç»å®‰è£…äº†ï¼Œåˆ™æ— æ³•ä¸‹è½½ã€‚å¦‚æžœéžè¦ä¸‹è½½åˆ™åªèƒ½æ”¹ç”¨apt downloadå‘½ä»¤ï¼Œæˆ–è€…å¸è½½åŒ…åŽå†ä¸‹è½½ã€‚apt install -d &lt;package-name&gt;#ç­‰åŒï¼šapt install --download-only &lt;package-name&gt;#æ–¹å¼2ï¼šä¸‹è½½è½¯ä»¶åŒ… #ä¸‹è½½è·¯å¾„ä¸ºï¼šå½“å‰ç›®å½•ï¼ˆä¸èƒ½ä¿®æ”¹ï¼‰ #è¯¥å‘½ä»¤ä¸‹è½½è½¯ä»¶åŒ…ä¸ä¼šåŒ…æ‹¬ä¾èµ–åŒ…ï¼Œå¦‚éœ€ä¸‹è½½ä¾èµ–åŒ…è¯·é€‰ç”¨apt install -d &lt;package-name&gt; #æ— è®ºç³»ç»Ÿæ˜¯å¦å·²ç»å®‰è£…æœ‰è½¯ä»¶åŒ…éƒ½èƒ½ä¸‹è½½apt download &lt;package-name&gt;#ç¤ºä¾‹ï¼šapt install -d nginxapt download nginxÂ¶ï¼ˆ4ï¼‰ æ›´æ–°12345678#æ›´æ–°è½¯ä»¶æºçš„æœ¬åœ°ç¼“å­˜ï¼ˆæœ¬åœ°ç¼“å­˜ï¼šæºçš„è½¯ä»¶åˆ—è¡¨å’ŒåŒ…çš„å…ƒæ•°æ®ï¼Œå…ƒæ•°æ®ï¼šåŒ…çš„ä¿¡æ¯å’ŒåŒ…çš„ä¾èµ–å…³ç³»ï¼ŒåŒ…çš„ä¿¡æ¯ï¼šç‰ˆæœ¬å·ã€æ›´æ–°æ—¥æœŸã€ä½œè€…ã€æè¿°ç­‰ï¼‰apt update#å‡çº§æ›´æ–°æŒ‡å®šè½¯ä»¶åŒ…apt upgrade &lt;package-name&gt;#å‡çº§æ›´æ–°ç³»ç»Ÿæ‰€æœ‰è½¯ä»¶åŒ…ï¼ˆå‡çº§å·²å®‰è£…çš„è½¯ä»¶åŒ…ï¼Œä½†ä¸ä¼šåˆ é™¤æˆ–å®‰è£…å…¶ä»–ä¾èµ–åŒ…ï¼‰apt upgrade#å‡çº§æ›´æ–°ç³»ç»Ÿæ‰€æœ‰è½¯ä»¶åŒ…ï¼ˆé™¤äº†å‡çº§å·²å®‰è£…çš„è½¯ä»¶åŒ…ï¼Œä¼šåˆ é™¤æˆ–å®‰è£…å…¶ä»–ä¾èµ–åŒ…ï¼‰apt dist-upgradeðŸ’â€â™‚ æç¤ºï¼šä»¥ä¸Šæ›´æ–°å‡çº§æ“ä½œåªæ˜¯å‡çº§å½“å‰ç³»ç»Ÿç‰ˆæœ¬çš„è½¯ä»¶åŒ…ï¼ˆåŒ…æ‹¬å†…æ ¸ç‰ˆæœ¬ï¼Œé€šå¸¸å‡çº§çš„é»˜è®¤å†…æ ¸ç‰ˆæœ¬ä¸€èˆ¬éƒ½è¾ƒä½Žï¼Œå¦‚éœ€å‡çº§æ›´é«˜ç‰ˆæœ¬çš„å†…æ ¸åˆ™éœ€è¦æ‰‹åŠ¨å®‰è£…ï¼‰ã€‚éœ€è¦è¯´æ˜Žçš„æ˜¯ä¸ä¼šå‡çº§ç³»ç»Ÿçš„ç‰ˆæœ¬ï¼Œå¦‚æžœè¦å‡çº§ç³»ç»Ÿç‰ˆæœ¬åˆ™éœ€è¦ä½¿ç”¨æ–°ç‰ˆæœ¬çš„ç³»ç»Ÿé•œåƒé‡è£…ç³»ç»Ÿã€‚Â¶ï¼ˆ5ï¼‰ å¸è½½12345678910111213#å¸è½½è½¯ä»¶åŒ…ï¼ˆä¸å«é…ç½®æ–‡ä»¶ï¼‰apt remove &lt;package-name&gt;#å¸è½½è½¯ä»¶åŒ…ï¼ˆå«é…ç½®æ–‡ä»¶ï¼‰,å‘½ä»¤ç­‰ä»·ï¼šapt remove --purge &lt;package-name&gt;apt purge &lt;package-name&gt;#å¸è½½æŒ‡å®šçš„è½¯ä»¶åŒ…ï¼Œå¹¶è‡ªåŠ¨åˆ é™¤å…¶ä¾èµ–åŒ…ä¸­ä¸å†éœ€è¦çš„ä¾èµ–åŒ…apt remove --auto-remove &lt;package-name&gt;#å¸è½½ç³»ç»Ÿä¸­æ‰€æœ‰ä¸å†éœ€è¦çš„ä¾èµ–åŒ…apt auto-remove#æ¸…é™¤å·²ä¸‹è½½çš„è½¯ä»¶åŒ…æ–‡ä»¶çš„ç¼“å­˜ #è¿™äº›åŒ…æ–‡ä»¶é€šå¸¸è¢«å­˜å‚¨åœ¨ /var/cache/apt/archives ç›®å½•ä¸‹ã€‚æ‰§è¡Œ apt clean ä¼šåˆ é™¤è¯¥ç›®å½•ä¸­çš„æ‰€æœ‰ .deb æ–‡ä»¶ #åœ¨Debianç³»åˆ—ç³»ç»Ÿä¸­ï¼Œé€šè¿‡aptå®‰è£…æˆ–æ›´æ–°çš„è½¯ä»¶ï¼Œé»˜è®¤ä¼šè‡ªåŠ¨ä¿ç•™.debåŒ…ç¼“å­˜æ–‡ä»¶åœ¨ç¼“å­˜ç›®å½•ä¸­ã€‚å¦‚æžœå¸Œæœ›è‡ªå®šä¹‰æ˜¯å¦é»˜è®¤ä¿ç•™åŒ…ç¼“å­˜æ–‡ä»¶å¯å‚è€ƒï¼šhttps://blog.csdn.net/FoxBryant/article/details/123226245apt cleanðŸ’â€â™‚ æç¤ºï¼šä¸å†éœ€è¦çš„ä¾èµ–åŒ…æ˜¯æŒ‡ä¸å†è¢«å…¶ä»–è½¯ä»¶åŒ…æ‰€ä¾èµ–çš„åŒ…ã€‚Â¶3. Redhat ç³»åˆ—ç³»ç»Ÿçš„è½¯ä»¶ç®¡ç†Â¶1ï¼‰rpm æœ¬åœ°åŒ…ç®¡ç†å™¨Â¶ï¼ˆ1ï¼‰å®‰è£…12#-iï¼ˆinstallï¼‰å®‰è£…; -vï¼ˆverboseï¼‰æ˜¾ç¤ºè¯¦ç»†ä¿¡æ¯; -hï¼ˆhashï¼‰æ˜¾ç¤ºè¿›åº¦; -nodeps ä¸æ£€æµ‹ä¾èµ–æ€§rpm -ivh &lt;package-name&gt;Â¶ï¼ˆ2ï¼‰å‡çº§12#-Uï¼ˆupgradeï¼‰å‡çº§(æ›´æ–°çš„æ˜¯å·²å®‰è£…ç‰ˆæœ¬çš„åŒ…)rpm -Uvh &lt;package-name&gt;Â¶ï¼ˆ3ï¼‰å¸è½½12#-eï¼ˆeraseï¼‰å¸è½½; -nodeps ä¸æ£€æŸ¥ä¾èµ–æ€§rpm -e &lt;package-name&gt;Â¶ï¼ˆ4ï¼‰æŸ¥è¯¢åŒ…æ˜¯å¦å®‰è£…123#-q æŸ¥è¯¢ï¼ˆqueryï¼‰; -a æ‰€æœ‰ï¼ˆallï¼‰rpm -q &lt;package-name&gt; #æŸ¥è¯¢å·²ç»å®‰è£…çš„å…·ä½“åŒ…ï¼ˆä¸èƒ½ä½¿ç”¨é€šé…ç¬¦ï¼‰rpm -qa #æŸ¥è¯¢æ‰€æœ‰å·²ç»å®‰è£…çš„åŒ…ï¼ˆå¯ä½¿ç”¨é€šé…ç¬¦ç­›é€‰æŸ¥è¯¢ï¼Œå¦‚ï¼šrpm -qa kernel* æˆ– rpm -qa kernel kernel-*ï¼‰Â¶ï¼ˆ5ï¼‰ æŸ¥è¯¢è½¯ä»¶åŒ…è¯¦ç»†ä¿¡æ¯123456#-q æŸ¥è¯¢ï¼ˆqueryï¼‰; -i æŸ¥è¯¢è½¯ä»¶ä¿¡æ¯ï¼ˆinformationï¼‰; -p æŸ¥è¯¢æœªå®‰è£…åŒ…ä¿¡æ¯ï¼ˆpackageï¼‰rpm -qi &lt;package-name&gt; #ä¾‹å¦‚ï¼šrpm -qi zip #æŸ¥çœ‹ç³»ç»Ÿä¸­å·²ç»å®‰è£…å­˜åœ¨çš„åŒ…ä¿¡æ¯rpm -qip zip-3.0-23.fc29.x86_64.rpm #æŸ¥çœ‹æœªå®‰è£…åŒ…ä¿¡æ¯Â¶ï¼ˆ6ï¼‰æŸ¥è¯¢è½¯ä»¶åŒ…å®‰è£…ä½ç½®123#-q æŸ¥è¯¢ï¼ˆqueryï¼‰-l åˆ—è¡¨ï¼ˆlistï¼‰; -p æŸ¥è¯¢æœªå®‰è£…åŒ…ä¿¡æ¯ï¼Œç”¨æ¥æŸ¥çœ‹æœªå®‰è£…çš„è½¯ä»¶åŒ…æ‰“ç®—å®‰è£…åˆ°å“ªäº›ç›®å½•é‡Œrpm -ql &lt;package-name&gt; #æŸ¥è¯¢å·²å®‰è£…çš„è½¯ä»¶å®‰è£…åˆ°äº†å“ªäº›ç›®å½•é‡Œrpm -qlp &lt;package-name&gt; #æŸ¥è¯¢æœªå®‰è£…çš„è½¯ä»¶åŒ…æ‰“ç®—å®‰è£…åˆ°å“ªäº›ç›®å½•é‡Œå¦‚æžœå¿˜è®°åŒ…åï¼Œå¯ä»¥é€šè¿‡rpm -qa | grep åŒ…åå…³é”®å­—å…ˆæŸ¥çœ‹ç³»ç»Ÿä¸­å·²ç»å®‰è£…çš„ç›¸å…³è½¯ä»¶ï¼Œç„¶åŽå†æ‰§è¡Œrpm -ql åŒ…åæ¥æŸ¥çœ‹å…·ä½“è·¯å¾„Â¶ï¼ˆ7ï¼‰æŸ¥è¯¢ç³»ç»Ÿæ–‡ä»¶æ‰€å±žçš„è½¯ä»¶åŒ…123456#-f æŸ¥è¯¢ç³»ç»Ÿæ–‡ä»¶å±žäºŽå“ªä¸ªè½¯ä»¶åŒ…ï¼ˆfileï¼‰rpm -qf ç³»ç»Ÿæ–‡ä»¶å#ç¤ºä¾‹ï¼šrpm -qf /usr/bin/bashrpm -qf /etc/yum.confÂ¶ï¼ˆ8ï¼‰ æŸ¥è¯¢è½¯ä»¶åŒ…çš„ä¾èµ–æ€§123#-R æŸ¥è¯¢è½¯ä»¶åŒ…çš„ä¾èµ–æ€§ï¼ˆrequiresï¼‰;-p æŸ¥è¯¢æœªå®‰è£…åŒ…ä¿¡æ¯ï¼ˆpackageï¼‰rpm -qR &lt;package-name&gt; #æŸ¥è¯¢å·²å®‰è£…åŒ…ä¿¡æ¯rpm -qRp &lt;package-name&gt; #æŸ¥è¯¢æœªå®‰è£…åŒ…ä¿¡æ¯Â¶ï¼ˆ9ï¼‰ è½¯ä»¶åŒ…å®Œæ•´æ€§æ ¡éªŒ123456789#æ¯”è¾ƒå·²å®‰è£…è½¯ä»¶åŒ…çš„æ–‡ä»¶ä¸ŽåŽŸå§‹è½¯ä»¶åŒ…ä¸­çš„æ–‡ä»¶å±žæ€§ï¼ˆä¾‹å¦‚æ–‡ä»¶å¤§å°ã€æƒé™ã€MD5 æ ¡éªŒå’Œç­‰ï¼‰å·®å¼‚ï¼Œå¦‚æžœæœ‰ä»»ä½•æ–‡ä»¶è¢«ä¿®æ”¹ã€åˆ é™¤æˆ–è€…æƒé™è¢«æ›´æ”¹ï¼Œå‘½ä»¤ä¼šæ˜¾ç¤ºå‡ºè¿™äº›å˜åŒ–ã€‚#é€‰é¡¹ï¼š-V æ ¡éªŒæŒ‡å®šè½¯ä»¶åŒ…ä¸­çš„æ–‡ä»¶ï¼ˆverifyï¼‰rpm -V &lt;package-name&gt;# ç¤ºä¾‹ï¼šä¿®æ”¹httpdçš„é…ç½®æ–‡ä»¶åŽï¼ŒæŸ¥çœ‹æ˜¯å¦è¢«ä¿®æ”¹$ yum install -y httpd$ echo "" &gt;&gt; /etc/httpd/conf/httpd.conf$ rpm -V httpdS.5....T. c /etc/httpd/conf/httpd.conféªŒè¯å†…å®¹ä¸­çš„8ä¸ªä¿¡æ¯çš„å…·ä½“å†…å®¹å¦‚ä¸‹ï¼šSï¼šæ–‡ä»¶å¤§å°æ˜¯å¦æ”¹å˜Mï¼šæ–‡ä»¶çš„ç±»åž‹æˆ–æ–‡ä»¶çš„æƒé™ï¼ˆrwxï¼‰æ˜¯å¦è¢«æ”¹å˜5ï¼šæ–‡ä»¶MD5æ ¡éªŒå’Œæ˜¯å¦æ”¹å˜ï¼ˆå¯ä»¥çœ‹æˆæ–‡ä»¶å†…å®¹æ˜¯å¦æ”¹å˜ï¼‰Dï¼šè®¾å¤‡çš„ä¸­ï¼Œä»Žä»£ç æ˜¯å¦æ”¹å˜Lï¼šæ–‡ä»¶è·¯å¾„æ˜¯å¦æ”¹å˜Uï¼šæ–‡ä»¶çš„å±žä¸»ï¼ˆæ‰€æœ‰è€…ï¼‰æ˜¯å¦æ”¹å˜Gï¼šæ–‡ä»¶çš„å±žç»„æ˜¯å¦æ”¹å˜Tï¼šæ–‡ä»¶çš„ä¿®æ”¹æ—¶é—´æ˜¯å¦æ”¹å˜æ–‡ä»¶ç±»åž‹cï¼šé…ç½®æ–‡ä»¶ï¼ˆconfig fileï¼‰dï¼šæ™®é€šæ–‡æ¡£ï¼ˆdocumentationï¼‰gï¼šå¹½çµæ–‡ä»¶ï¼ˆghost fileï¼‰ï¼Œå¹½çµæ–‡ä»¶æ˜¯æŒ‡åœ¨ RPM æ•°æ®åº“ä¸­å­˜åœ¨è®°å½•ä½†åœ¨å®žé™…æ–‡ä»¶ç³»ç»Ÿä¸­ä¸å­˜åœ¨çš„æ–‡ä»¶lï¼šæŽˆæƒæ–‡ä»¶ï¼ˆlicense fileï¼‰rï¼šæè¿°æ–‡ä»¶ï¼ˆread meï¼‰è½¯ä»¶åŒ…æ–‡ä»¶çš„å®Œæ•´æ€§éªŒè¯ï¼ˆæ³¨æ„å’Œè½¯ä»¶åŒ…å®Œæ•´æ€§æ ¡éªŒçš„åŒºåˆ«ï¼‰ï¼š12#éªŒè¯è½¯ä»¶åŒ…æ–‡ä»¶çš„å®Œæ•´æ€§ï¼ˆæ³¨æ„æ˜¯è½¯ä»¶åŒ…æ–‡ä»¶ï¼Œå³ï¼šâ€œ.rpmæ–‡ä»¶â€ï¼Œä¸»è¦æ£€æŸ¥è½¯ä»¶åŒ…çš„ç­¾åï¼‰rpm --checksig &lt;package_file.rpm&gt;Â¶ï¼ˆ10ï¼‰ä»ŽRPMåŒ…ä¸­æå–æ–‡ä»¶12#æå–è½¯ä»¶åŒ…ä¸­çš„æŒ‡å®šæ–‡ä»¶åˆ°å½“å‰ç›®å½•rpm2cpio .rpmåŒ…æ–‡ä»¶çš„æ–‡ä»¶è·¯å¾„ | cpio -idv .rpmåŒ…æ–‡ä»¶ä¸­æ‰€éœ€æå–çš„æ–‡ä»¶çš„è·¯å¾„ï¼ˆå¯è§£åŽ‹æŸ¥çœ‹ï¼‰rpm2cpio æ˜¯å°†rpmåŒ…è½¬æ¢ä¸ºcpioæ ¼å¼çš„å‘½ä»¤ï¼Œcpio æ˜¯ä¸€ä¸ªæ ‡å‡†å·¥å…·ï¼Œå®ƒç”¨äºŽåˆ›å»ºè½¯ä»¶æ¡£æ¡ˆæ–‡ä»¶å’Œä»Žæ¡£æ¡ˆæ–‡ä»¶ä¸­æå–æ–‡ä»¶ä»ŽRPMåŒ…ä¸­æå–æ–‡ä»¶å¯ä»¥ç”¨æ¥è§£å†³è¯¯åˆ é™¤ç³»ç»Ÿæ–‡ä»¶åŽçš„è¡¥æ•‘æ–¹æ³•ï¼Œå¦‚ä¸‹ç¤ºä¾‹ï¼š123456789101112131415#æŸ¥çœ‹lså‘½ä»¤æ–‡ä»¶æ‰€å±žçš„è½¯ä»¶åŒ…ï¼ˆå¦‚ï¼šcoreutils-8.22-24.el7_9.2.x86_64ï¼‰rpm -qf /bin/ls#å°†lså‘½ä»¤åˆ°ä¸´æ—¶ç›®å½•é‡Œï¼Œé€ æˆè¯¯åˆ å‡è±¡mv /bin/ls /tmp/#ä¸‹è½½æŒ‡å®šç‰ˆæœ¬çš„è½¯ä»¶åŒ…åˆ°å½“å‰ç›®å½•yumdownloader coreutils-8.22-24.el7_9.2.x86_64# å¯é€šè¿‡ yumdownloader -q --urls coreutils-8.22-24.el7_9.2.x86_64 èŽ·å¾—è½¯ä»¶åŒ…URLåœ°å€ã€‚#æå–lså‘½ä»¤æ–‡ä»¶åˆ°å½“å‰ç›®å½•ä¸‹ï¼ˆ-idv åŽæŽ¥çš„è·¯å¾„å¿…é¡»ä¸ŽrpmåŒ…ä¸­çš„è·¯å¾„ç›¸å¯¹åº”ï¼‰rpm2cpio ./coreutils-8.22-24.el7_9.2.x86_64.rpm | cpio -idv ./usr/bin/ls#æŠŠlså‘½ä»¤å¤åˆ¶/bin/ç›®å½•ï¼Œæ¢å¤ä¸¢å¤±çš„æ–‡ä»¶cp ./usr/bin/ls /bin/Â¶2ï¼‰yum çº¿åŒ…ç®¡ç†å™¨yum æ˜¯åŸºäºŽ rpm çš„åœ¨çº¿åŒ…ç®¡ç†å·¥å…·ï¼Œå®ƒæä¾›äº†é«˜çº§çš„è½¯ä»¶åŒ…ç®¡ç†åŠŸèƒ½ï¼ŒåŒ…æ‹¬åŒ…çš„å®‰è£…ã€å‡çº§ã€åˆ é™¤å’Œä¾èµ–è§£å†³ç­‰ã€‚yum é€šè¿‡ä¸Žè½¯ä»¶åŒ…ä»“åº“è¿›è¡Œäº¤äº’ï¼Œä»Žè¿œç¨‹ä»“åº“èŽ·å–è½¯ä»¶åŒ…ä¿¡æ¯å¹¶ç®¡ç†è½¯ä»¶åŒ…çš„å®‰è£…å’Œæ›´æ–°ã€‚Â¶ï¼ˆ1ï¼‰yumè½¯ä»¶æºcentos é»˜è®¤è½¯ä»¶æºæ”¹ä¸ºé˜¿é‡Œæºï¼ˆä»¥ centos7 ä¸ºä¾‹ï¼‰123456789101112131415#å…ˆç¡®ä¿å®‰è£…wgetç”¨äºŽä¸‹è½½yumæºæ–‡ä»¶yum install -y wget#å¤‡ä»½æ—§çš„é…ç½®æ–‡ä»¶mv /etc/yum.repos.d/CentOS-Base.repo /etc/yum.repos.d/CentOS-Base.repo.bak#ä¸‹è½½é˜¿é‡Œæºçš„æ–‡ä»¶#centos7wget -O /etc/yum.repos.d/CentOS-Base.repo http://mirrors.aliyun.com/repo/Centos-7.repo#æˆ–è€… curl -o /etc/yum.repos.d/CentOS-Base.repo https://mirrors.aliyun.com/repo/Centos-7.reposed -i -e '/mirrors.cloud.aliyuncs.com/d' -e '/mirrors.aliyuncs.com/d' /etc/yum.repos.d/CentOS-Base.repo#æ¸…ç†æœ¬åœ°ç¼“å­˜ï¼ˆå¯é€‰ï¼‰#yum clean all#æ›´æ–°è½¯ä»¶æºçš„æœ¬åœ°ç¼“å­˜ï¼ˆæœ¬åœ°ç¼“å­˜ï¼šæºçš„è½¯ä»¶åˆ—è¡¨å’ŒåŒ…çš„å…ƒæ•°æ®ï¼Œå…ƒæ•°æ®ï¼šåŒ…çš„ä¿¡æ¯å’ŒåŒ…çš„ä¾èµ–å…³ç³»ï¼ŒåŒ…çš„ä¿¡æ¯ï¼šç‰ˆæœ¬å·ã€æ›´æ–°æ—¥æœŸã€ä½œè€…ã€æè¿°ç­‰ï¼‰yum makecacheå‚è€ƒï¼šhttps://developer.aliyun.com/mirror/centos?spm=a2c6h.13651102.0.0.534d1b11Q4rbUOyum æºé…ç½®è¯´æ˜Žï¼š[base] å®¹å™¨åç§°ï¼Œä¸€å®šè¦æ”¾åœ¨[ ]ä¸­,ä»Žä»¥ä¸Šæ–‡ä»¶å¯ä»¥çœ‹å‡ºcentos7é»˜è®¤é…ç½®æœ‰4ä¸ªå®¹å™¨ï¼Œä¸€èˆ¬æ˜¯ç¬¬ä¸€ä¸ªèµ·ä½œç”¨name å®¹å™¨è¯´æ˜Žï¼Œå¯ä»¥è‡ªå·±éšä¾¿å†™mirrorlist é•œåƒç«™ç‚¹ï¼Œè¿™ä¸ªå¯ä»¥æ³¨é‡ŠæŽ‰baseurl æˆ‘ä»¬çš„yumæºæœåŠ¡å™¨çš„åœ°å€ã€‚é»˜è®¤æ˜¯CentOSå®˜æ–¹çš„yumæºæœåŠ¡å™¨ï¼Œæ˜¯å¯ä»¥ä½¿ç”¨çš„ï¼Œå¦‚æžœä½ è§‰å¾—æ…¢å¯ä»¥æ”¹æˆä½ å–œæ¬¢çš„yumæºåœ°å€enabled æ­¤å®¹å™¨æ˜¯å¦ç”Ÿæ•ˆï¼Œå¦‚æžœä¸å†™æˆ–å†™æˆenable=1éƒ½æ˜¯ç”Ÿæ•ˆï¼Œå†™æˆenable=0å°±æ˜¯ä¸ç”Ÿæ•ˆgpgcheck å¦‚æžœæ˜¯1æ˜¯æŒ‡RPMçš„æ•°å­—è¯ä¹¦ç”Ÿæ•ˆï¼Œå¦‚æžœæ˜¯0åˆ™ä¸ç”Ÿæ•ˆgpgkey æ•°å­—è¯ä¹¦çš„å…¬é’¥æ–‡ä»¶ä¿å­˜ä½ç½®ã€‚ä¸ç”¨ä¿®æ”¹å®‰è£… epel æº123456789yum install -y epel-releaseyum makecache#ä»¥ä¸Šé»˜è®¤å®‰è£…çš„ epel æºæ˜¯å›½å¤–çš„ï¼Œé€Ÿåº¦æ¯”è¾ƒæ…¢ï¼ŒæŽ¨èæ”¹ç”¨å›½å†…çš„ epel æºï¼ˆå¯é€‰ï¼ŒæŽ¨èï¼‰cd /etc/yum.repos.d/mkdir backupmv epel*.repo backupwget -O epel.repo http://mirrors.aliyun.com/repo/epel-7.repoyum makecacheå‚è€ƒï¼šhttps://developer.aliyun.com/mirror/centos?spm=a2c6h.13651102.0.0.3e221b11oOAPGqhttps://developer.aliyun.com/mirror/epel?spm=a2c6h.13651102.0.0.1d2e1b11NAraP4Â¶ï¼ˆ2ï¼‰æŸ¥è¯¢123456789101112131415161718#æ ¹æ®å…³é”®å­—æœç´¢å¯ç”¨è½¯ä»¶åŒ…yum search å…³é”®å­—#æŸ¥è¯¢æŸä¸ªå‘½ä»¤æ‰€å±žçš„å®‰è£…åŒ…ï¼ˆå‘½ä»¤æ‰€å±žçš„è½¯ä»¶åŒ…å®‰è£…æˆ–æœªå®‰è£…éƒ½å¯ä»¥æŸ¥è¯¢ï¼‰yum provides å‘½ä»¤è·¯å¾„ #å¦‚ï¼šyum provides */ifconfig#åˆ—å‡ºæ‰€æœ‰å¯ç”¨è½¯ä»¶åŒ…yum list#åˆ—å‡ºå·²å®‰è£…çš„æ‰€æœ‰è½¯ä»¶åŒ…yum list installed#åˆ—å‡ºå·²å®‰è£…çš„æŒ‡å®šè½¯ä»¶åŒ…ï¼ˆå¯ç”¨äºŽæŸ¥çœ‹è½¯ä»¶åŒ…æ˜¯å¦å·²å®‰è£…ï¼‰yum list installed &lt;package-name&gt; #æˆ–è€… yum list | grep å…³é”®å­—##åˆ—å‡ºå¯æ›´æ–°çš„æ‰€æœ‰è½¯ä»¶åŒ…yum list updates#æŸ¥çœ‹å®‰è£…åŒ…çš„ä¿¡æ¯ï¼ˆåŒ…æ‹¬ï¼šåç§°ã€æž¶æž„ã€ç‰ˆæœ¬ã€å®‰è£…æºã€åŒ…å¤§å°ã€ç®€ä»‹ã€æè¿°ç­‰ï¼‰yum info &lt;package-name&gt;Â¶ï¼ˆ3ï¼‰å®‰è£…123#å®‰è£…æŒ‡å®šçš„è½¯ä»¶åŒ…ï¼ˆé€‰é¡¹ï¼š-y è‡ªåŠ¨å›žç­”yesï¼‰ #è¯¥å‘½ä»¤å®‰è£…åŒ…å‰ä¼šè‡ªåŠ¨æ£€æµ‹è½¯ä»¶æºçš„æœ¬åœ°ç¼“å­˜ï¼Œå¦‚æžœè¿‡æœŸåˆ™ä¼šè‡ªåŠ¨æ›´æ–°è½¯ä»¶æºçš„æœ¬åœ°ç¼“å­˜ï¼Œæ•…è€Œä¸éœ€è¦å†æ‰‹åŠ¨æ‰§è¡Œyum makecacheå‘½ä»¤yum install &lt;package-name&gt;é»˜è®¤æƒ…å†µä¸‹ï¼Œyum install åœ¨æˆåŠŸå®‰è£…è½¯ä»¶åŒ…åŽä¼šè‡ªåŠ¨åˆ é™¤ä¸‹è½½çš„ rpm è½¯ä»¶åŒ…æ–‡ä»¶ã€‚å¦‚æžœéœ€è¦èŽ·å– rpm è½¯ä»¶åŒ…æ–‡ä»¶å¯å¦‚ä¸‹æ“ä½œï¼š12345678910111213#æ–¹å¼1ï¼šä¸‹è½½è½¯ä»¶åŒ… #å¦‚ä¸æŒ‡å®šä¸‹è½½è·¯å¾„ï¼Œåˆ™é»˜è®¤ä¸‹è½½è·¯å¾„ä¸ºå½“å‰ç›®å½• #è¯¥å‘½ä»¤ä¸‹è½½è½¯ä»¶åŒ…é»˜è®¤ä¸ä¼šåŒ…æ‹¬ä¾èµ–åŒ…ï¼Œå¦‚éœ€ä¾èµ–åŒ…åˆ™åŠ é€‰é¡¹ï¼š--resolveyumdownloader --destdir=/path/to/directory &lt;package-name&gt;yumdownloader --destdir=/path/to/directory --resolve &lt;package-name&gt;#èŽ·å¾—è½¯ä»¶åŒ…URLåœ°å€yumdownloader -q --urls &lt;package-name&gt;#æ–¹å¼2ï¼šä¸‹è½½è½¯ä»¶åŒ… #å¦‚ä¸æŒ‡å®šä¸‹è½½è·¯å¾„ï¼Œåˆ™é»˜è®¤ä¸‹è½½è·¯å¾„ä¸ºï¼š/var/cache/yum/çš„å­ç›®å½•ä¸­ï¼Œå¦‚centos764ä½ç³»ç»Ÿä¸ºï¼š/var/cache/yum/x86_64/7/updates/packages/ #è¯¥å‘½ä»¤ä¸‹è½½è½¯ä»¶åŒ…ä¼šå¼ºåˆ¶åŒ…æ‹¬ä¾èµ–åŒ… #è¯¥å‘½ä»¤åªä¸‹è½½ä¸å®‰è£…yum install --downloadonly --downloaddir=/path/to/directory &lt;package-name&gt;Â¶ï¼ˆ4ï¼‰æ›´æ–°12345678910111213141516#å‡çº§æ›´æ–°æŒ‡å®šçš„è½¯ä»¶åŒ…ï¼ˆé€‰é¡¹ï¼š-y è‡ªåŠ¨å›žç­”yesï¼‰yum update &lt;package-name&gt;#å‡çº§æ›´æ–°ç³»ç»Ÿæ‰€æœ‰è½¯ä»¶åŒ…ï¼ˆé»˜è®¤è‡ªåŠ¨åˆ é™¤æ—§ç‰ˆåŒ…ï¼‰ #æ˜¯å¦è‡ªåŠ¨åˆ é™¤æ—§ç‰ˆåŒ…ç”±/etc/yum.confé…ç½®æ–‡ä»¶çš„obsoleteså†³å®šï¼Œ1è¡¨ç¤ºæ›´æ–°æ—§çš„rpmåŒ…çš„åŒæ—¶ä¼šåˆ é™¤æ—§åŒ…ï¼Œ0è¡¨ç¤ºæ›´æ–°çš„æ—¶å€™ä¸ä¼šåˆ é™¤æ—§åŒ…ï¼Œyum update#å‡çº§æ›´æ–°ç³»ç»Ÿæ‰€æœ‰è½¯ä»¶åŒ…ï¼ˆè‡ªåŠ¨åˆ é™¤æ—§ç‰ˆåŒ…ï¼‰ #yum upgradeç­‰ä»·äºŽæ‰“å¼€obsoletesé…ç½®çš„yum updateyum upgrade#å‡çº§æ›´æ–°ç³»ç»Ÿæ‰€æœ‰è½¯ä»¶åŒ…å¹¶æŽ’é™¤æŸäº›åŒ…çš„æ›´æ–°#ä»¥ä¸‹æ˜¯å•æ¬¡æ›´æ–°æ—¶æŽ’é™¤æ›´æ–°åŒ…ï¼Œå¦‚æžœéœ€è¦ä¸åŠ å‚æ•°è‡ªåŠ¨æŽ’é™¤çš„è¯éœ€è¦ç¼–è¾‘/etc/yum.confé…ç½®æ–‡ä»¶ã€‚åœ¨[main]çš„ä½œç”¨åŸŸå†…é‡ŒåŠ ä¸Šè¿™æ ·ä¸€å¥è¯exclude=*NetworkManager*yum --exclude=exclude=*NetworkManager*,*firewalld* updateðŸ’â€â™‚ æç¤ºï¼šä»¥ä¸Šæ›´æ–°å‡çº§æ“ä½œåªæ˜¯å‡çº§å½“å‰ç³»ç»Ÿç‰ˆæœ¬çš„è½¯ä»¶åŒ…ï¼ˆåŒ…æ‹¬å†…æ ¸ç‰ˆæœ¬ï¼Œé€šå¸¸å‡çº§çš„é»˜è®¤å†…æ ¸ç‰ˆæœ¬ä¸€èˆ¬éƒ½è¾ƒä½Žï¼Œå¦‚éœ€å‡çº§æ›´é«˜ç‰ˆæœ¬çš„å†…æ ¸åˆ™éœ€è¦æ‰‹åŠ¨å®‰è£…ï¼‰ã€‚éœ€è¦è¯´æ˜Žçš„æ˜¯ä¸ä¼šå‡çº§ç³»ç»Ÿçš„ç‰ˆæœ¬ï¼Œå¦‚æžœè¦å‡çº§ç³»ç»Ÿç‰ˆæœ¬åˆ™éœ€è¦ä½¿ç”¨æ–°ç‰ˆæœ¬çš„ç³»ç»Ÿé•œåƒé‡è£…ç³»ç»Ÿã€‚ðŸ’â€â™‚ æç¤ºï¼šæ›´æ–°å‡çº§å¸¸è§å¤±è´¥é—®é¢˜ï¼šå¦‚ï¼šyum update å‡ºçŽ° Multilib version problems é—®é¢˜çš„è§£å†³æ–¹æ³•123456789101112131415161718192021222324252627282930313233343536373839&gt;# 1ã€å®‰è£…yum-complete-transaction&gt;yum install yum-utils&gt;# 2ã€è¿è¡Œyum-complete-transaction&gt;yum-complete-transaction â€“cleanup-only&gt;# 3ã€æ¸…é™¤é‡å¤çš„åŒ…&gt;package-cleanup --dupes&gt;#æ¸…é™¤é‡å¤åŒ…çš„è€ç‰ˆæœ¬ï¼š&gt;package-cleanup --cleandupes&gt;# 4ã€æ¸…é™¤æŸåçš„åŒ…&gt;package-cleanup --problems&gt;#5ã€è§£å†³ä¾èµ–å†²çªï¼šå¦‚å‡ºçŽ°ï¼šfirewalld-filesystem-0.6.3-13.el7_9.noarch æœ‰å·²å®‰è£…å†²çª firewalld &lt; ('0', '0.3.13', None): firewalld-0.3.9-7.el7.noarch&gt;# æŸ¥è¯¢å‡ºé‡å¤çš„è½¯ä»¶åŒ…,ä¼šæŸ¥å‡ºæ¥ä¸¤ä¸ªåŒ…å«ç‰ˆæœ¬çš„å®Œæ•´åŒ…å&gt;rpm -q å†²çªçš„åŒ…åç§°&gt;# åˆ é™¤å†²çªåŒ…ï¼ˆä¸€èˆ¬æ˜¯æ—§ç‰ˆæœ¬ï¼‰&gt;rpm -e åŒ…å«ç‰ˆæœ¬çš„å®Œæ•´åŒ…å&gt;## ä»¥ä¸‹æ˜¯ç¤ºä¾‹ï¼š&gt;# æŸ¥è¯¢é‡å¤çš„è½¯ä»¶åŒ…(å‡è®¾systemd-libså‡ºçŽ°äº†å†²çª)&gt;$ rpm -q systemd-libs&gt;systemd-libs-219-30.el7.x86_64&gt;systemd-libs-219-42.el7_4.1.x86_64&gt;# åˆ é™¤æ—§ç‰ˆ&gt;$ rpm -e systemd-libs-219-30.el7.x86_64&gt;error: Failed dependencies:systemd-libs = 219-30.el7 is needed by (installed) libgudev1-219-30.el7.x86_64&gt;# ä»ç„¶å‡ºçŽ°ä¾èµ–é—®é¢˜ï¼Œç»§ç»­æŸ¥è¯¢libgudev1çš„ç‰ˆæœ¬ä¿¡æ¯&gt;$ rpm -q libgudev1&gt;libgudev1-219-30.el7.x86_64&gt;# å‘çŽ°åªæœ‰ä¸€ä¸ªç‰ˆæœ¬ï¼Œå‡çº§è¯•ä¸€ä¸‹&gt;$ yum update libgudev1&gt;......&gt;Updated:libgudev1.x86_64 0:219-42.el7_4.1 &gt;Complete!&gt;$ rpm -q libgudev1&gt;libgudev1-219-42.el7_4.1.x86_64&gt;# å‡çº§å®ŒæˆåŽï¼Œåˆ é™¤æ—§ç‰ˆæœ¬çš„systemd-libs&gt;$ rpm -e systemd-libs-219-30.el7.x86_64&gt;$ rpm -q systemd-libsÂ¶ï¼ˆ5ï¼‰ å¸è½½12345678#å¸è½½æŒ‡å®šçš„è½¯ä»¶åŒ… #æç¤ºï¼š #è¯¥å‘½ä»¤ä¼šè‡ªåŠ¨åˆ é™¤å…¶ä¾èµ–åŒ…ä¸­ä¸å†éœ€è¦çš„ä¾èµ–åŒ…ï¼ˆç±»ä¼¼äºŽï¼šapt remove --auto-remove &lt;package-name&gt; ï¼‰ #è¯¥å‘½ä»¤é»˜è®¤æƒ…å†µä¸‹ä¸ä¼šè‡ªåŠ¨åˆ é™¤è½¯ä»¶åŒ…çš„é…ç½®æ–‡ä»¶ã€‚å¦‚æžœå¸Œæœ›åˆ é™¤åˆ™åªèƒ½è¿›è¡Œæ‰‹åŠ¨åˆ é™¤æ“ä½œï¼ˆé…ç½®æ–‡ä»¶é€šå¸¸ä½äºŽ/etcç›®å½•ä¸‹ï¼‰yum remove -y &lt;package-name&gt;#å¸è½½ç³»ç»Ÿä¸­æ‰€æœ‰ä¸å†éœ€è¦çš„ä¾èµ–åŒ…yum autoremoveðŸ’â€â™‚ æç¤ºï¼šä¸å†éœ€è¦çš„ä¾èµ–åŒ…æ˜¯æŒ‡ä¸å†è¢«å…¶ä»–è½¯ä»¶åŒ…æ‰€ä¾èµ–çš„åŒ…ã€‚Â¶ï¼ˆ6ï¼‰è½¯ä»¶ç»„å®‰è£…å¸è½½ç»„åå¯ä»¥ç”±grouplistæŸ¥è¯¢å‡ºæ¥1234567891011121314#åˆ—å‡ºæ‰€æœ‰å¯ç”¨çš„è½¯ä»¶ç»„yum grouplist#å®‰è£…æŒ‡å®šè½¯ä»¶ç»„yum groupinstall è½¯ä»¶ç»„å#å¦‚ï¼šyum groupinstall "Development tools"#å¸è½½æŒ‡å®šè½¯ä»¶ç»„yum groupremove è½¯ä»¶ç»„å#æ¸…é™¤å·²ä¸‹è½½çš„è½¯ä»¶åŒ…æ–‡ä»¶çš„ç¼“å­˜ï¼ˆå¯é€‰ï¼‰ #åˆ é™¤/var/cache/yumç›®å½•é‡Œæ‰€æœ‰è½¯ä»¶æºå¯¹åº”packagesç›®å½•é‡Œçš„RPMåŒ…æ–‡ä»¶ #æç¤ºï¼šä¸ŽDebianç³»åˆ—ç³»ç»Ÿä¸åŒï¼Œåœ¨Redhatç³»åˆ—ç³»ç»Ÿä¸­ï¼Œé€šè¿‡yumå®‰è£…æˆ–æ›´æ–°çš„è½¯ä»¶ï¼Œé»˜è®¤ä¼šè‡ªåŠ¨åˆ é™¤æŽ‰RPMåŒ…ç¼“å­˜æ–‡ä»¶ï¼Œè€Œä¸ä¼šä¿ç•™åœ¨ç¼“å­˜ç›®å½•é‡Œã€‚æ˜¯å¦ä¿ç•™ç”±/etc/yum.confé…ç½®æ–‡ä»¶é‡Œçš„keepcacheå­—æ®µå†³å®šï¼ˆ1ï¼šä¿ç•™ï¼Œ0ï¼šä¸ä¿ç•™ï¼Œé»˜è®¤ï¼‰#yum clean packagesÂ¶4. Snap åœ¨çº¿åŒ…ç®¡ç†å™¨Â¶1ï¼‰å®‰è£… Snap12345678910111213141516171819202122232425##ï¼ˆ1ï¼‰å®‰è£…snapd# aptå®‰è£…ï¼ˆæç¤ºï¼šubuntu16.04ä¹‹åŽçš„ç‰ˆæœ¬å·²ç»å†…ç½®äº†snapï¼Œåœ¨debianç³»ç»Ÿä¸Šåˆ™éœ€è¦æ‰‹åŠ¨å®‰è£…ï¼‰apt updateapt install -y snapd# yumå®‰è£…ï¼ˆæ“ä½œå‘½ä»¤ç›¸å¯¹ä¼šå¤šä¸€äº›ï¼‰yum install -y epel-releaseyum install -y snapd##ï¼ˆ2ï¼‰å¯åŠ¨snadçš„å¥—æŽ¥å­—å•å…ƒ# å¯åŠ¨snapdå¥—æŽ¥å­—å•å…ƒï¼ˆæ³¨æ„å¥—æŽ¥å­—å•å…ƒæ˜¯snapd.socketï¼Œè€Œä¸æ˜¯snapd.serviceï¼Œå…¶ä¸­snapd.serviceå¯ç®€å†™ä¸ºsnapdï¼‰systemctl enable --now snapd.socket #ç­‰åŒäºŽ systemctl enable snapd.socket &amp;&amp; systemctl start snapd.socket# æŸ¥çœ‹æ˜¯å¦æˆåŠŸå¯åŠ¨snapdsystemctl status snapd.socket##ï¼ˆ3ï¼‰éœ€è¦æ³¨é”€å¹¶é‡æ–°ç™»å½•ï¼ˆé‡æ–°æ‰“å¼€ç»ˆç«¯å³å¯ï¼‰æˆ–é‡æ–°å¯åŠ¨ç³»ç»Ÿä»¥ç¡®ä¿æ­£ç¡®æ›´æ–°snapçš„è·¯å¾„##ï¼ˆ4ï¼‰å®‰è£…snapæ ¸å¿ƒåŒ…# å®‰è£…snapæ ¸å¿ƒåŒ…snap install coresnap refresh core##ï¼ˆ5ï¼‰é…ç½®æ”¯æŒsnapç»å…¸æ¨¡å¼å®‰è£…ï¼ˆä»…yumå®‰è£…snapæ—¶éœ€è¦ï¼‰# è¯´æ˜Žï¼šç”±äºŽsnapç»å…¸æ¨¡å¼å®‰è£…éœ€è¦æ“ä½œ/snapç›®å½•ã€‚é€šè¿‡yumå®‰è£…snapdæ—¶ï¼Œsnapæ‰€å®‰è£…çš„ç»å…¸åŒ…å­˜æ”¾åœ¨/var/lib/snapd/snapç›®å½•ä¸­è€Œéž/snapç›®å½•ï¼Œæ‰€ä»¥éœ€è¦åˆ›å»ºä¸€ä¸ªç¬¦å·é“¾æŽ¥/snapæŒ‡å‘åˆ°/var/lib/snapd/snapï¼Œå¦åˆ™snapåªèƒ½å®‰è£…æ ‡å‡†åŒ…è€Œæ— æ³•å®‰è£…ç»å…¸åŒ…ã€‚è€Œä½¿ç”¨aptå®‰è£…snapdæ—¶ï¼Œsnapæ‰€å®‰è£…çš„ç»å…¸åŒ…å°±å­˜æ”¾åœ¨/snapç›®å½•ä¸­ï¼Œæ•…è€Œä¸éœ€è¦åˆ›å»ºç¬¦å·é“¾æŽ¥ã€‚ln -s /var/lib/snapd/snap /snapSnap å®‰è£…å‚è€ƒï¼šhttps://snapcraft.io/docs/installing-snapdÂ¶2ï¼‰Snap å¸¸ç”¨å‘½ä»¤1234567891011121314151617181920212223242526272829303132333435#æœç´¢ Snap è½¯ä»¶åŒ…snap find package-name##å®‰è£…æ ‡å‡†çš„ Snap è½¯ä»¶åŒ…#Snap è½¯ä»¶åŒ…é€šå¸¸æ˜¯ä»¥æ²™ç®±æ–¹å¼è¿è¡Œçš„ï¼Œè¿™æ„å‘³ç€å®ƒä»¬å—åˆ°ä¸¥æ ¼çš„é™åˆ¶ä»¥å¢žå¼ºå®‰å…¨æ€§å’Œéš”ç¦»æ€§ã€‚ä½¿ç”¨æ­¤å‘½ä»¤å®‰è£…çš„è½¯ä»¶åŒ…å°†æŒ‰ç…§ Snap çš„é»˜è®¤ç­–ç•¥è¿›è¡Œæ²™ç®±åŒ–ã€‚snap install package-name##å®‰è£…ç»å…¸ Snap è½¯ä»¶åŒ…#ç»å…¸ Snap è½¯ä»¶åŒ…æ˜¯ä¸€ç§ç‰¹æ®Šç±»åž‹çš„ Snap è½¯ä»¶åŒ…ï¼Œå®ƒä»¬ä¸ä¼šå—åˆ°ä¸¥æ ¼çš„æ²™ç®±é™åˆ¶ã€‚å®ƒä»¬å¯ä»¥è®¿é—®ç³»ç»Ÿä¸Šçš„æ›´å¤šèµ„æºå’Œæ–‡ä»¶ï¼Œå› æ­¤æ›´æŽ¥è¿‘ä¼ ç»Ÿçš„éž Snap è½¯ä»¶åŒ…ã€‚è¿™ç§ç±»åž‹çš„ Snap è½¯ä»¶åŒ…é€šå¸¸ç”¨äºŽéœ€è¦æ›´å¤šç³»ç»Ÿçº§è®¿é—®æƒé™çš„åº”ç”¨ç¨‹åºï¼Œæ¯”å¦‚å¼€å‘å·¥å…·æˆ–æœåŠ¡å™¨è½¯ä»¶ã€‚snap install --classic package-name#å¸è½½ Snap è½¯ä»¶åŒ…snap remove package-name#åˆ—å‡ºå·²å®‰è£…çš„ Snap è½¯ä»¶åŒ…snap list#æ›´æ–°æ‰€æœ‰å·²å®‰è£…çš„ Snap è½¯ä»¶åŒ…snap refresh#æŸ¥çœ‹ Snap ç‰ˆæœ¬ä¿¡æ¯snap version#æŸ¥çœ‹ Snap è½¯ä»¶åŒ…ä¿¡æ¯snap info package-name#ç®¡ç† Snap æœåŠ¡snap enable service-name #å¯ç”¨ Snap æœåŠ¡snap disable service-name #ç¦ç”¨ Snap æœåŠ¡snap services #æŸ¥çœ‹ Snap æœåŠ¡#ç®¡ç† Snap ç”¨æˆ·æƒé™snap connections package-name # æŸ¥çœ‹ Snap è½¯ä»¶åŒ…çš„è¿žæŽ¥ä¿¡æ¯snap connect package-name:interface-name # å…è®¸ Snap è½¯ä»¶åŒ…è®¿é—®ç‰¹å®šæŽ¥å£snap disconnect package-name:interface-name # ç¦æ­¢ Snap è½¯ä»¶åŒ…è®¿é—®ç‰¹å®šæŽ¥å£Â¶3ï¼‰å¸è½½ Snap12345678910111213#å…³é—­snapdå¥—æŽ¥å­—å•å…ƒï¼ˆå¸è½½å‰å…ˆåœæŽ‰snapdå¥—æŽ¥å­—å•å…ƒï¼Œå¦åˆ™å¸è½½å¤±è´¥ï¼‰systemctl stop snapd.socket##å¸è½½snap#1ã€yumå¸è½½yum remove -y snapd#åˆ é™¤æ®‹ä½™ç›®å½•æˆ–æ–‡ä»¶rm -rf /var/lib/snapd /snap ~/snap#2ã€aptå¸è½½apt remove --purge -y snapd #å¦‚æžœä¸åŠ --purgeåˆ™éœ€è¦æ‰‹åŠ¨åˆ é™¤/var/lib/snapdå’Œ/snap#åˆ é™¤æ®‹ä½™ç›®å½•æˆ–æ–‡ä»¶rm -rf ~/snapÂ¶5. æºç åŒ…å®‰è£…å¸è½½ï¼ˆå¾…ç»­Â·Â·Â·ï¼‰Â¶6. é€šç”¨æ›´æ¢ç³»ç»Ÿè½¯ä»¶æºè„šæœ¬ï¼ˆæ”¯æŒå¤§éƒ¨åˆ† Linux ç³»ç»Ÿï¼‰1234567891011121314151617181920212223# ä¸­å›½å¤§é™†ï¼ˆé»˜è®¤ï¼‰# æ‰§è¡Œå‘½ä»¤åŽä¼šäº¤äº’å¼åœ°æç¤ºé€‰æ‹©è½¯ä»¶æºï¼ˆå¯é€‰æºï¼šé˜¿é‡Œäº‘ã€ç½‘æ˜“ã€æ¸…åŽå¤§å­¦æºç­‰ï¼‰bash &lt;(curl -sSL https://linuxmirrors.cn/main.sh)#æˆ–è€…ï¼š#bash &lt;(curl -sSL https://raw.githubusercontent.com/SuperManito/LinuxMirrors/main/ChangeMirrors.sh)# ä¸­å›½å¤§é™†æ•™è‚²ç½‘ï¼ˆå¯é€‰æºï¼šæ¸…åŽå¤§å­¦ã€åŒ—äº¬å¤§å­¦ã€å—äº¬å¤§å­¦ç­‰ï¼‰bash &lt;(curl -sSL https://linuxmirrors.cn/main.sh) --edu# æµ·å¤–åœ°åŒºï¼ˆå¯é€‰æºï¼šäºšæ´²|é¦™æ¸¯|xTomã€åŒ—ç¾Ž|ç¾Žå›½|Linux Kernelã€æ¬§æ´²|è‹±å›½|Vorboss Ltd ç­‰ï¼‰bash &lt;(curl -sSL https://linuxmirrors.cn/main.sh) --abroad##å¸¸è§é€‰é¡¹è¯´æ˜Žï¼š--abroad #ä½¿ç”¨æµ·å¤–è½¯ä»¶æºï¼ˆé€‰é¡¹å€¼ï¼šæ— ï¼‰--edu #ä½¿ç”¨ä¸­å›½å¤§é™†æ•™è‚²ç½‘è½¯ä»¶æºï¼ˆé€‰é¡¹å€¼ï¼šæ— ï¼‰--abroad #ä½¿ç”¨æµ·å¤–è½¯ä»¶æºï¼ˆé€‰é¡¹å€¼ï¼šæ— ï¼‰--use-official-source #ä½¿ç”¨æ“ä½œç³»ç»Ÿå®˜æ–¹è½¯ä»¶æºï¼ˆé€‰é¡¹å€¼ï¼šæ— ï¼‰--install-epel #å®‰è£… EPEL é™„åŠ è½¯ä»¶åŒ…ï¼ˆé€‰é¡¹å€¼ï¼štrue æˆ– falseï¼‰--only-epel #ä»…æ›´æ¢ EPEL è½¯ä»¶æºæ¨¡å¼ï¼ˆé€‰é¡¹å€¼ï¼šæ— ï¼‰--clean-cache #æ¸…ç†ä¸‹è½½ç¼“å­˜ï¼ˆé€‰é¡¹å€¼ï¼štrue æˆ– falseï¼‰#æ›´å¤šé€‰é¡¹å‚è€ƒï¼šhttps://linuxmirrors.cn/use/command-options/é€‚é… Linux ç³»ç»Ÿï¼šDebianï¼ˆ8.0 ~ 13ï¼‰ã€Ubuntuï¼ˆ14.04 ~ 24ï¼‰ã€CentOSï¼ˆ7.0 ~ 8.5 / Stream 8 ~ 9ï¼‰ã€ Rocky Linuxï¼ˆ8 ~ 9ï¼‰ã€Deepinï¼ˆallï¼‰ç­‰å‚è€ƒï¼šé¡¹ç›®åœ°å€ï¼šhttps://github.com/SuperManito/LinuxMirrorså®˜æ–¹æ–‡æ¡£ï¼šhttps://linuxmirrors.cnÂ¶ä¸ƒã€è¿›ç¨‹ç®¡ç†æ‰€è°“ è¿›ç¨‹ï¼Œé€šä¿—åœ°è¯´å°±æ˜¯å½“å‰æ­£åœ¨æ‰§è¡Œçš„ä¸€ä¸ªç¨‹åºã€‚Â¶1. åˆ—å‡ºå½“å‰è¿›ç¨‹ä¿¡æ¯ ps123456789101112#åˆ—å‡ºå½“å‰è¿›ç¨‹ä¿¡æ¯#-aæˆ–è€…-e:æ˜¾ç¤ºç»ˆç«¯ä¸Šçš„æ‰€æœ‰è¿›ç¨‹ï¼ŒåŒ…æ‹¬å…¶ä»–ç”¨æˆ·çš„è¿›ç¨‹ï¼›-u:æ˜¾ç¤ºè¿›ç¨‹çš„è¯¦ç»†çŠ¶æ€ï¼›-x:æ˜¾ç¤ºæ²¡æœ‰æŽ§åˆ¶ç»ˆç«¯çš„è¿›ç¨‹ï¼›-f:æ˜¾ç¤ºç¨‹åºé—´çš„å…³ç³»ps -auxps -ef#æ ¹æ®è¿›ç¨‹å·æŸ¥çœ‹è¿›ç¨‹çš„æ–‡ä»¶è·¯å¾„ã€å¯åŠ¨å‘½ä»¤çš„å®Œæ•´è·¯å¾„ç­‰ç­‰ä¿¡æ¯ï¼ˆæ¯”å¦‚nginxï¼‰ps -ef | grep nginxls -l /proc/10383#æœ‰å‡ ä¸ªä¸»è¦çš„æ–‡ä»¶æˆ‘ä»¬å¯ä»¥å…³æ³¨ä¸‹ï¼š#cwdï¼šæ–‡ä»¶æ‰€åœ¨ç›®å½•#exeï¼šæ‰§è¡Œå‘½ä»¤çš„å®Œæ•´è·¯å¾„#environï¼šæ‰§è¡Œå‘½ä»¤æ—¶çš„çŽ¯å¢ƒå˜é‡æç¤ºï¼šps é»˜è®¤åªä¼šæ˜¾ç¤ºå½“å‰ç”¨æˆ·é€šè¿‡ç»ˆç«¯å¯åŠ¨çš„åº”ç”¨ç¨‹åºã€‚ps å‘½ä»¤ä¸»è¦æ˜¾ç¤ºçš„ä¿¡æ¯ï¼šPIDï¼šè¿›ç¨‹ IDï¼Œæ¯ä¸ªè¿›ç¨‹éƒ½æœ‰ä¸€ä¸ªå”¯ä¸€çš„ PIDã€‚TTYï¼šä¸Žè¿›ç¨‹å…³è”çš„ç»ˆç«¯è®¾å¤‡æˆ–ä¼ªç»ˆç«¯ã€‚TIMEï¼šå·²ç»ä½¿ç”¨çš„ CPU æ—¶é—´ï¼ˆæˆ–è€…å¯åŠ¨æ—¶é—´ï¼‰ï¼Œæ˜¾ç¤ºè¯¥è¿›ç¨‹å ç”¨ CPU çš„æ—¶é—´é‡ã€‚CMDï¼šå‘½ä»¤åç§°æˆ–å®Œæ•´çš„å‘½ä»¤è¡Œã€‚é€‰é¡¹è¯´æ˜Žï¼š-aï¼šæ˜¾ç¤ºæ‰€æœ‰ç”¨æˆ·çš„è¿›ç¨‹ã€‚è¿™åŒ…æ‹¬ä¸Žç»ˆç«¯å…³è”çš„è¿›ç¨‹ä»¥åŠä¸Žå…¶ä»–ç”¨æˆ·å…³è”çš„è¿›ç¨‹ã€‚-xï¼šæ˜¾ç¤ºæ²¡æœ‰æŽ§åˆ¶ç»ˆç«¯çš„è¿›ç¨‹ã€‚-uï¼šæ˜¾ç¤ºæŒ‡å®šç”¨æˆ·çš„è¿›ç¨‹ä¿¡æ¯-eï¼šæ˜¾ç¤ºç³»ç»Ÿä¸­æ‰€æœ‰çš„è¿›ç¨‹-fï¼šæ˜¾ç¤ºå®Œæ•´çš„æ ¼å¼ï¼ŒåŒ…æ‹¬å‘½ä»¤è¡Œ-lï¼šä½¿ç”¨é•¿æ ¼å¼æ˜¾ç¤ºè¿›ç¨‹ä¿¡æ¯auxï¼šæ˜¾ç¤ºç³»ç»Ÿä¸­æ‰€æœ‰ç”¨æˆ·çš„æ‰€æœ‰è¿›ç¨‹Â¶2. æŸ¥çœ‹ç³»ç»Ÿå†…å­˜ä½¿ç”¨æƒ…å†µ free123#æ˜¾ç¤ºç³»ç»Ÿçš„å†…å­˜ä½¿ç”¨æƒ…å†µ #ä»¥æ›´æ˜“è¯»çš„æ–¹å¼å±•ç¤ºå‡ºæ¥ã€‚å‚æ•° -h ç”¨äºŽä»¥äººç±»å¯è¯»çš„æ ¼å¼æ˜¾ç¤ºè¾“å‡ºï¼Œä¾‹å¦‚ä»¥ GBã€MB ç­‰ä¸ºå•ä½ã€‚free -hÂ¶3. ç³»ç»Ÿè´Ÿè½½ç›‘æŽ§ topå¯å®žæ—¶æŸ¥çœ‹ç³»ç»Ÿçš„ CPU ä½¿ç”¨çŽ‡ã€å†…å­˜ä½¿ç”¨é‡ï¼ˆå« Swap è™šæ‹Ÿå†…å­˜ä½¿ç”¨é‡ï¼‰ã€è¿›ç¨‹åˆ—è¡¨ï¼ˆç¨‹åºå…è®¸å‘½ä»¤ï¼‰ç­‰ï¼Œ12345#top ä¸Ž ps å‘½ä»¤å¾ˆç›¸ä¼¼ã€‚å®ƒä»¬éƒ½ç”¨æ¥æ˜¾ç¤ºæ­£åœ¨æ‰§è¡Œçš„è¿›ç¨‹ã€‚Top ä¸Ž ps æœ€å¤§çš„ä¸åŒä¹‹å¤„ï¼Œåœ¨äºŽtop åœ¨æ‰§è¡Œä¸€æ®µæ—¶é—´å¯ä»¥æ›´æ–°æ­£åœ¨è¿è¡Œçš„çš„è¿›ç¨‹ã€‚#è¦é€€å‡ºå¯ä»¥ç›´æŽ¥è¾“å…¥qtop#æ¯éš”10ç§’è‡ªåŠ¨æ›´æ–°top -d 10å¸¸ç”¨çš„ top å¿«æ·é”®ï¼šåˆ‡æ¢æŽ’åºï¼šPï¼ˆå³ï¼šShift + pï¼‰ï¼šæŒ‰ CPU ä½¿ç”¨çŽ‡è¿›è¡ŒæŽ’åºMï¼ˆå³ï¼šShift + mï¼‰ï¼šæŒ‰å†…å­˜ä½¿ç”¨é‡è¿›è¡ŒæŽ’åºï¼ˆæŒ‰ e é”®å¯ä»¥è°ƒæ•´å†…å­˜å ç”¨å•ä½ï¼Œæ¯”å¦‚ä»¥ MB æˆ– GB ä¸ºå•ä½å±•ç¤ºä¼šæ›´äººæ€§åŒ– ï¼‰è¿›ç¨‹æ“ä½œï¼škï¼šæ€æ­»ä¸€ä¸ªè¿›ç¨‹ï¼ˆéœ€è¦è¾“å…¥ç›¸åº”çš„ PIDï¼‰rï¼šæ›´æ”¹è¿›ç¨‹çš„ä¼˜å…ˆçº§å¸ƒå±€å’Œæ˜¾ç¤ºï¼šfï¼šæ‰“å¼€å­—æ®µç®¡ç†å™¨ï¼Œå¯ä»¥é€‰æ‹©è¦æ˜¾ç¤ºçš„å­—æ®µoï¼šæ›´æ”¹æŽ’åºå­—æ®µbï¼šåˆ‡æ¢æ˜¯å¦æ˜¾ç¤ºåº•éƒ¨æ‘˜è¦ä¿¡æ¯å…¨å±€æ“ä½œï¼šqï¼šé€€å‡º top å‘½ä»¤Â¶4. é€šè¿‡ç›‘å¬ç«¯å£æŸ¥è¯¢å¯¹åº”è¿›ç¨‹ä¿¡æ¯12345678##ä½¿ç”¨ netstat å‘½ä»¤æ¥æŸ¥çœ‹ç«¯å£çš„å¯¹åº”è¿›ç¨‹ä¿¡æ¯ï¼ˆå¦‚ï¼šåç§°ã€PID ç­‰ï¼‰ #-tuln é€‰é¡¹ç”¨äºŽæ˜¾ç¤º TCP å’Œ UDP ç›‘å¬çŠ¶æ€çš„ç«¯å£netstat -tuln | grep &lt;port&gt;##ä½¿ç”¨ lsof å‘½ä»¤æ¥æŸ¥çœ‹ç«¯å£çš„å ç”¨æƒ…å†µapt install lsof # Debian/Ubuntuyum install lsof # Red Hat/CentOSlsof -i :&lt;port&gt;Â¶5. ç»ˆæ­¢è¿›ç¨‹ kill12#-9è¡¨ç¤ºå¼ºè¡Œç»ˆæ­¢kill [-9] è¿›ç¨‹ä»£å·æç¤ºï¼šä½¿ç”¨ kill å‘½ä»¤æ—¶ï¼Œæœ€å¥½åªç»ˆæ­¢ç”±å½“å‰ç”¨æˆ·å¼€å¯çš„è¿›ç¨‹ï¼Œè€Œä¸è¦ç»ˆæ­¢ root èº«ä»½å¼€å¯çš„è¿›ç¨‹ï¼Œå¦åˆ™å¯èƒ½å¯¼è‡´ç³»ç»Ÿå´©æºƒã€‚Â¶6. é€šè¿‡ PID æ‰¾å‡ºè¿›ç¨‹çš„å¯¹åº”æ–‡ä»¶è·¯å¾„12345678ls -l /proc/&lt;port&gt;/exe#ç¤ºä¾‹ï¼ˆæŸ¥è¯¢ sshd æœåŠ¡çš„ PIDï¼Œç„¶åŽé€šè¿‡ PID æŸ¥è¯¢å‡º sshd çš„å®Œæ•´æ–‡ä»¶è·¯å¾„ï¼‰ï¼š$ ps -ef | grep sshd#root 14368 1 0 08:21 ? 00:00:00 sshd: /usr/sbin/sshd -D [listener] 0 of 10-100 startups$ ls -l /proc/14368/exe#lrwxrwxrwx 1 root root 0 Jan 19 03:45 /proc/14368/exe -&gt; /usr/sbin/sshdÂ¶7. æŸ¥çœ‹å‘½ä»¤è·¯å¾„ which12345which å‘½ä»¤åç§°#ä¾‹å¦‚ï¼š$ which useradd/usr/sbin/useraddåœ¨ Linux ä¸­ï¼Œç»å¤§å¤šæ•°å¯æ‰§è¡Œæ–‡ä»¶éƒ½æ˜¯ä¿å­˜åœ¨ /binã€/sbinã€/usr/binã€/usr/sbin/binï¼ˆbinaryï¼‰æ˜¯äºŒè¿›åˆ¶æ‰§è¡Œæ–‡ä»¶ç›®å½•ï¼Œä¸»è¦ç”¨äºŽå…·ä½“åº”ç”¨/sbinï¼ˆsystem binaryï¼‰æ˜¯ç³»ç»Ÿç®¡ç†å‘˜ä¸“ç”¨çš„äºŒè¿›åˆ¶ä»£ç å­˜æ”¾ç›®å½•ï¼Œä¸»è¦ç”¨äºŽç³»ç»Ÿç®¡ç†/usr/binï¼ˆuser commands for applicationsï¼‰åŽæœŸå®‰è£…çš„ä¸€äº›è½¯ä»¶/usr/sbinï¼ˆsuper user commands for applicationsï¼‰è¶…çº§ç”¨æˆ·çš„ä¸€äº›ç®¡ç†ç¨‹åºæç¤ºï¼šcd è¿™ä¸ªç»ˆç«¯å‘½ä»¤æ˜¯å†…ç½®åœ¨ç³»ç»Ÿå†…æ ¸ä¸­çš„ï¼Œæ²¡æœ‰ç‹¬ç«‹çš„æ–‡ä»¶ï¼Œå› æ­¤ç”¨ which æ— æ³•æ‰¾åˆ° cd å‘½ä»¤çš„ä½ç½®Â¶8. æŸ¥çœ‹è¿›ç¨‹æ ‘ pstree12345678#å®‰è£…pstreeå®‰è£…åŒ…apt install psmisc#yum install psmisc#-p :æ˜¾ç¤ºè¿›ç¨‹çš„PID -u :æ˜¾ç¤ºè¿›ç¨‹çš„æ‰€å±žç”¨æˆ·#æ ‘çŠ¶çš„å½¢å¼æ˜¾ç¤ºè¿›ç¨‹å’Œpidpstree -p#æ ‘çŠ¶çš„å½¢å¼è¿›ç¨‹å’Œå¯¹åº”æ“ä½œç”¨æˆ·Â¶9. ç³»ç»Ÿç›‘æŽ§å®žç”¨å·¥å…·Â¶1ï¼‰iftopiftopå¯æµ‹é‡é€šè¿‡æ¯ä¸€ä¸ªå¥—æŽ¥å­—è¿žæŽ¥ä¼ è¾“çš„æ•°æ®ã€‚iftopä½¿ç”¨pcapåº“æ¥æ•èŽ·è¿›å‡ºç½‘ç»œé€‚é…å™¨çš„æ•°æ®åŒ…ï¼Œç„¶åŽæ±‡æ€»æ•°æ®åŒ…å¤§å°å’Œæ•°é‡ï¼Œæžæ¸…æ¥šæ€»çš„å¸¦å®½ä½¿ç”¨æƒ…å†µã€‚è™½ç„¶iftopæŠ¥å‘Šæ¯ä¸ªè¿žæŽ¥æ‰€ä½¿ç”¨çš„å¸¦å®½ï¼Œä½†å®ƒæ— æ³•æŠ¥å‘Šå‚ä¸ŽæŸä¸ªå¥—æŒ‰å­—è¿žæŽ¥çš„è¿›ç¨‹åç§°/ç¼–å·ï¼ˆIDï¼‰ã€‚ä¸è¿‡ç”±äºŽåŸºäºŽpcapåº“ï¼Œiftopèƒ½å¤Ÿè¿‡æ»¤æµé‡ï¼Œå¹¶æŠ¥å‘Šç”±è¿‡æ»¤å™¨æŒ‡å®šçš„æ‰€é€‰å®šä¸»æœºè¿žæŽ¥çš„å¸¦å®½ä½¿ç”¨æƒ…å†µã€‚12345#å®‰è£…apt install iftop#yum install iftop#ä½¿ç”¨iftop -nné€‰é¡¹å¯ä»¥é˜²æ­¢iftopå°†IPåœ°å€è§£æžæˆä¸»æœºåï¼Œè§£æžæœ¬èº«å°±ä¼šå¸¦æ¥é¢å¤–çš„ç½‘ç»œæµé‡ã€‚Â¶2ï¼‰nloadnloadæ˜¯ä¸€ä¸ªå‘½ä»¤è¡Œå·¥å…·ï¼Œè®©ç”¨æˆ·å¯ä»¥åˆ†å¼€æ¥ç›‘æŽ§å…¥ç«™æµé‡å’Œå‡ºç«™æµé‡ã€‚å®ƒè¿˜å¯ä»¥ç»˜åˆ¶å›¾è¡¨ä»¥æ˜¾ç¤ºå…¥ç«™æµé‡å’Œå‡ºç«™æµé‡ï¼Œè§†å›¾æ¯”ä¾‹å¯ä»¥è°ƒæ•´ã€‚ç”¨èµ·æ¥å¾ˆç®€å•ã€‚12345#å®‰è£…apt install nload#yum install nload#ä½¿ç”¨nloadÂ¶3ï¼‰htophtopæ˜¯topçš„æ‰©å±•ç‰ˆæœ¬ï¼Œæœ‰æ›´ä¸°å¯Œçš„æ¦‚è²Œï¼ˆä¾‹å¦‚å…¨å‘½ä»¤ã€å¯è§†åŒ–ã€å›¾å½¢ç”¨æˆ·ç•Œé¢guiå’Œç”¨æˆ·ç•Œé¢uiï¼‰ï¼Œæœ‰é¼ æ ‡ç‚¹å‡»äº¤äº’ï¼ˆè¯‘è€…æ³¨ï¼šçœ‹ä¸‹é¢çš„æˆªå›¾ï¼ŒæŒ‡çš„æ˜¯æœ€ä¸Šé¢çš„åˆ—æ ‡é¢˜å¦‚CPU%ã€MEM%ç­‰å¯ä»¥é€šè¿‡é¼ æ ‡ç‚¹å‡»åˆ‡æ¢ä»¥æ˜¾ç¤ºä¸åŒçš„åŠŸèƒ½ï¼‰ï¼Œä¹Ÿæœ‰è®¸å¤šçš„æŒ‡å¯¼æ•™ä½ å¦‚ä½•åšè¿›ç¨‹ç®¡ç†ã€‚12345#å®‰è£…apt install htop#yum install htop#è¿è¡ŒhtopÂ¶4ï¼‰iotopiotop â€“ ç®€å•çš„ç±»ä¼¼topçš„I/Oç›‘æŽ§å™¨ã€‚iotopæ˜¯IOå®žæ—¶ç›‘æŽ§å™¨ã€‚ä½¿ç”¨å®ƒä»¬é™„å±žçš„è¯¦ç»†è¾“å…¥è¾“å‡ºï¼ˆIOï¼‰ä½¿ç”¨æ–¹æ³•å¯ä»¥å±•ç¤ºå‡ºä½ ç³»ç»Ÿä¸­æ¯ä¸ªè¿›ç¨‹çº¿ç¨‹çš„ä¿¡æ¯ã€‚è¯¥å‘½ä»¤å¯ä»¥ä¸Ž$ tcpdumpï¼ˆå“åº”ç½‘ç»œæµé‡çš„å‘½ä»¤ï¼‰ä¸€èµ·ä½¿ç”¨ã€‚å¦‚æžœä½ å‘çŽ°ä½ çš„webæœåŠ¡å™¨ä¸Šæœ‰ç¨‹åºåœ¨è¿è¡Œï¼Œä½ å¯ä»¥ï¼Œæ¯”å¦‚è¿è¡Œ$ tcpdump port 80æ£€æŸ¥ç«¯å£80ï¼ˆæ ‡å‡†çš„httpç«¯å£ï¼‰çš„ç½‘ç»œæµé‡æ¥è§‚å¯Ÿç»†èŠ‚ã€‚æœ€æœ‰ç”¨çš„ä¿¡æ¯å¯èƒ½æ˜¯DISK WRITEè¿™ä¸€åˆ—ï¼Œä»Žè¯¥åˆ—ä½ å¯ä»¥å‡†ç¡®çš„çœ‹åˆ°æ¯ä¸ªIOä½¿ç”¨äº†å¤šå°‘ä¸ªè¿›ç¨‹ï¼Œå•ä½ä¸ºK/sã€‚12345#å®‰è£…apt install iotop#yum install iotop#è¿è¡Œ iotopÂ¶5ï¼‰glancesglancesæ˜¯ä¸€æ¬¾ç”±pythonå¼€å‘çš„ç³»ç»Ÿç›‘æŽ§å·¥å…·ï¼Œå¯ä»¥å®žæ—¶æŸ¥çœ‹CPUã€å†…å­˜ã€ç½‘ç»œã€IOã€è¿›ç¨‹ã€ç£ç›˜ç©ºé—´ä½¿ç”¨çŽ‡çš„ä½¿ç”¨æƒ…å†µï¼Œå¹¶ä¸”æ”¯æŒä¸‰ç§è¿è¡Œæ¨¡å¼ï¼Œä¸ªäººæ„Ÿè§‰æ¯”topå‘½ä»¤ä½¿ç”¨æ›´ä¾¿æ·ï¼Œæœ‰ä¸‰ç§è¿è¡Œæ¨¡å¼ï¼šStandaloneã€Client/Serverã€Web serverã€‚Â¶å®‰è£…å¤šç§å®‰è£…æ–¹å¼å¯é€‰ï¼Œå¦‚ä¸‹ï¼š12345678#yum å®‰è£…yum -y install glances#apt å®‰è£…apt install glances #æç¤ºï¼šå¦‚æžœ Debain æ— æ³•æ‰¾åˆ°è½¯ä»¶åŒ…ï¼Œéœ€æ·»åŠ  bullseye-backports æº#pip å®‰è£…pip install --user 'glances[all]'#ä¸€é”®è„šæœ¬å®‰è£…curl -L https://bit.ly/glances | /bin/bashå‚è€ƒï¼šhttps://github.com/nicolargo/glancesÂ¶Standalone æ¨¡å¼å¯ä»¥æŸ¥çœ‹ç³»ç»Ÿè¿è¡Œè¯¦ç»†æƒ…å†µã€‚åœ¨è¿è¡Œglancesæ—¶å¯ä»¥ä½¿ç”¨hé”®æ¥æŸ¥çœ‹glanceså¿«æ·é”®ä½¿ç”¨æ–¹æ³•ã€‚è¿è¡Œè¿‡ç¨‹ä¸­ï¼Œç›´æŽ¥æŒ‰å›žè½¦é”®å¯ä»¥å¯¹è¿›ç¨‹è¿›è¡Œè¿‡æ»¤ï¼ŒæŸ¥çœ‹æŒ‡å®šè¿›ç¨‹ã€‚Â¶Client / Server æ¨¡å¼Serverç«¯ï¼šglances -s -B 192.168.1.1Clientç«¯ï¼šglances -c 192.168.1.1æ— é¡»åŽ»æŒ‡å®šæœåŠ¡å™¨ä¸Šè¿è¡Œï¼Œé€šè¿‡Client/Serverç«¯æ¨¡å¼å¿«é€ŸæŸ¥çœ‹ã€‚-Bï¼šæŒ‡å®šç»‘å®šçš„IPåœ°å€ï¼Œå¦‚æžœä¸æŒ‡å®šServerç«¯è¿è¡Œç«¯å£é»˜è®¤ç«¯å£ä¸ºï¼š61209ï¼Œå¦‚æžœä½¿ç”¨é»˜è®¤ç«¯å£åˆ™ç”¨-cæŒ‡å®šå®¢æˆ·ç«¯æ—¶ä¸éœ€è¦é¢å¤–ä½¿ç”¨-På‚æ•°æ¥æŒ‡å®šServerç«¯çš„ç«¯å£å·ã€‚éœ€è¦æ³¨æ„çš„æ˜¯é˜²ç«å¢™è®¾ç½®ï¼Œç¡®è®¤ä¸¤å°ä¸»æœºä¹‹é—´ç«¯å£å¯é€šã€‚Â¶Web server æ¨¡å¼glances -wè¿™ä¸ªåŠŸèƒ½å°±å¾ˆè´´å¿ƒäº†ï¼Œæˆ‘å¯ä»¥å°†é›†ç¾¤ä¸­æ‰€æœ‰æœåŠ¡å™¨ä¸ŠåŽå°è¿è¡ŒWeb Serverç«¯ï¼ŒåŽç»­é˜²ç«å¢™å¼€æ”¾æŒ‡å®šIPæŸ¥çœ‹é›†ç¾¤ä¸­æœåŠ¡å™¨çš„è¿è¡ŒçŠ¶æ€ï¼Œç¾Žæ»‹æ»‹ã€‚å¦‚æžœå¯åŠ¨Web Serverç«¯æ—¶å‡ºçŽ°**â€œBottle module not found. Glances cannot start in web server mode.â€**æŠ¥é”™ï¼Œæ‰§è¡Œå®‰è£…bottleå³å¯è§£å†³ã€‚1pip install bottleÂ¶é…ç½®æ–‡ä»¶glancesæ˜¯æ”¯æŒè®¾ç½®é…ç½®æ–‡ä»¶çš„ï¼Œä½†æ˜¯ä¸ä¸€å®šè¦æœ‰é…ç½®æ–‡ä»¶æ‰èƒ½ä½¿ç”¨glancesï¼ŒLinuxä¸­é…ç½®æ–‡ä»¶å¯ä»¥æ–°å»ºä½ç½®åˆ°/etc/glances/glances.confï¼Œçª—å£ä¸­çš„ä¸åŒé¢œè‰²æ˜¯ç”±é˜ˆå€¼æ¥è®¾å®šçš„ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨é…ç½®æ–‡ä»¶ä¸­ä¿®æ”¹å„ç›‘æŽ§é¡¹çš„é˜ˆå€¼æ¥å®žçŽ°ä¸åŒçº§åˆ«ä¸åŒé¢œè‰²çš„å±•ç¤ºæƒ…å†µã€‚Â¶é¢œè‰²çº§åˆ«å®šä¹‰ç»¿è‰²ï¼šæ­£å¸¸(OK)è“è‰²ï¼šå°å¿ƒ(CAREFUL)ï¼Œéœ€è¦æ³¨æ„ç´«è‰²ï¼šè­¦å‘Šï¼ˆWARNINGï¼‰çº¢è‰²ï¼šé—®é¢˜ä¸¥é‡ï¼ˆCRITICALï¼‰Â¶é…ç½®æ–‡ä»¶ç¤ºä¾‹1234567891011vim /etc/glances/glances.conf[quicklook]cpu_careful=50cpu_warning=70cpu_critical=1mem_careful=50mem_warning=1mem_critical=90swap_careful=1swap_warning=70swap_critical=90è¿™é‡Œæˆ‘ä»¬ä¸ºäº†å±•ç¤ºå‡ºé¢œè‰²çš„å·®å¼‚ï¼Œç‰¹åˆ«ä¿®æ”¹äº†å‡ ä¸ªä¸º1çš„å€¼ï¼Œå®žé™…ä½¿ç”¨ä¸­ä¿®æ”¹åˆ°éœ€è¦çš„å€¼å³å¯ã€‚æœ€ç»ˆå±•ç¤ºç•Œé¢å¦‚ä¸Šå›¾æ‰€ç¤ºã€‚Â¶å…«ã€ç³»ç»Ÿç®¡ç†Â¶1. å…³æœºå’Œé‡å¯123456789101112131415161718# shutdownå‘½ä»¤å¯ç”¨äºŽå…³é—­æˆ–é‡å¯ç³»ç»Ÿï¼ˆ-rè¡¨ç¤ºé‡å¯ï¼Œä¸æŒ‡å®šåˆ™è¡¨ç¤º1åˆ†é’ŸåŽè‡ªåŠ¨å…³é—­ç³»ç»Ÿï¼‰shutdown [-r] [æ—¶é—´]# ä¾‹å¦‚ï¼š#ä¸æŒ‡å®š-råˆ™è¡¨ç¤º1åˆ†é’ŸåŽè‡ªåŠ¨å…³é—­ç³»ç»Ÿshutdown# é‡æ–°å¯åŠ¨æ“ä½œç³»ç»Ÿï¼Œå…¶ä¸­ now è¡¨ç¤ºçŽ°åœ¨shutdown -r now# ç«‹åˆ»å…³æœºï¼Œå…¶ä¸­ now è¡¨ç¤ºçŽ°åœ¨shutdown now# ç³»ç»Ÿåœ¨ä»Šå¤©çš„ 20:25 ä¼šå…³æœºshutdown 20:25# ç³»ç»Ÿå†è¿‡ååˆ†é’ŸåŽè‡ªåŠ¨å…³æœºshutdown +10# å–æ¶ˆä¹‹å‰æŒ‡å®šçš„å…³æœºè®¡åˆ’shutdown -c# rebootå‘½ä»¤å¯ç”¨äºŽé‡å¯ç³»ç»Ÿreboot #ç­‰æ•ˆäºŽshutdown -r nowÂ¶2. æŸ¥çœ‹ç³»ç»Ÿé…ç½®æŸ¥çœ‹CPUä¿¡æ¯ï¼šä½¿ç”¨lscpuå‘½ä»¤å¯ä»¥æ˜¾ç¤ºæœ‰å…³CPUæž¶æž„å’Œç›¸å…³ä¿¡æ¯ã€‚ä½¿ç”¨cat /proc/cpuinfoå‘½ä»¤å¯ä»¥æŸ¥çœ‹æ›´è¯¦ç»†çš„CPUä¿¡æ¯ã€‚æŸ¥çœ‹å†…å­˜ä¿¡æ¯ï¼šä½¿ç”¨free -hå‘½ä»¤å¯ä»¥æŸ¥çœ‹ç³»ç»Ÿä¸­çš„å†…å­˜ä½¿ç”¨æƒ…å†µã€‚ä½¿ç”¨cat /proc/meminfoå‘½ä»¤å¯ä»¥èŽ·å–æ›´å¤šçš„å†…å­˜è¯¦ç»†ä¿¡æ¯ã€‚æŸ¥çœ‹ç£ç›˜ä¿¡æ¯ï¼šä½¿ç”¨df -hå‘½ä»¤å¯ä»¥æŸ¥çœ‹ç³»ç»Ÿä¸­å„ä¸ªç£ç›˜åˆ†åŒºçš„ä½¿ç”¨æƒ…å†µã€‚ä½¿ç”¨lsblkå‘½ä»¤å¯ä»¥æ˜¾ç¤ºç£ç›˜å’Œåˆ†åŒºçš„è¯¦ç»†ä¿¡æ¯ã€‚Â¶3. çŽ¯å¢ƒå˜é‡Â¶ç®€è¦æ¦‚è¿°åœ¨ Linux æ“ä½œç³»ç»Ÿä¸­è®¾ç½®çŽ¯å¢ƒå˜é‡ï¼Œé€šå¸¸ä½¿ç”¨export å‘½ä»¤æ¥å®žçŽ°ã€‚å®ƒå¯ä»¥å°†ä¸€ä¸ªæˆ–å¤šä¸ªå˜é‡ä»Žæœ¬åœ° shell ï¼ˆå‘½ä»¤è¡Œè§£é‡Šå™¨ï¼‰çš„çŽ¯å¢ƒä¼ é€’åˆ°å­è¿›ç¨‹çš„çŽ¯å¢ƒä¸­ï¼Œä»¥ä¾¿è®©è¿™äº›å­è¿›ç¨‹ä¹Ÿå¯ä»¥ä½¿ç”¨è¿™äº›å˜é‡ã€‚åœ¨ Linux ä¸­ï¼Œæ¯ä¸ªè¿›ç¨‹éƒ½æœ‰ä¸€ç»„çŽ¯å¢ƒå˜é‡ã€‚è¿™äº›å˜é‡å­˜å‚¨åœ¨è¿›ç¨‹ç©ºé—´ä¸­ï¼Œå¹¶ä¸”å¯ä»¥åœ¨è¿è¡Œæ—¶ç”±è¿›ç¨‹è¯»å–å’Œä¿®æ”¹ã€‚å½“æ‚¨å¯åŠ¨ä¸€ä¸ªæ–°çš„ shell ä¼šè¯æˆ–è€…åœ¨å½“å‰ shell ä¼šè¯ä¸­è¿è¡Œä¸€ä¸ªæ–°çš„è„šæœ¬æ—¶ï¼Œè¯¥ä¼šè¯ä¼šç»§æ‰¿çˆ¶ shell çš„çŽ¯å¢ƒå˜é‡ã€‚ç„¶è€Œï¼Œå¦‚æžœæ‚¨å¸Œæœ›å°†å˜é‡ä¼ é€’ç»™å­è¿›ç¨‹ï¼Œé‚£ä¹ˆæ‚¨éœ€è¦å°†å…¶æ ‡è®°ä¸ºâ€œå¯¼å‡ºâ€ã€‚ðŸ’â€â™‚ å˜é‡å’ŒçŽ¯å¢ƒå˜é‡çš„åŒºåˆ«ï¼šå˜é‡æ˜¯ Shell ç¼–ç¨‹ä¸­æœ€åŸºæœ¬çš„å…ƒç´ ä¹‹ä¸€ã€‚å®ƒä»¬æ˜¯ç”¨æˆ·å®šä¹‰çš„åç§°ï¼Œç”¨äºŽä¿å­˜ä¸€ä¸ªæˆ–å¤šä¸ªå€¼æˆ–å­—ç¬¦ä¸²ï¼Œå¹¶åœ¨ Shell è„šæœ¬æˆ–å‘½ä»¤ä¸­è¿›è¡Œå¼•ç”¨ã€‚å˜é‡çš„å€¼å¯ä»¥æ˜¯æ•°å­—ã€å­—ç¬¦ä¸²ã€æ–‡ä»¶åã€è·¯å¾„åç­‰ã€‚ä¾‹å¦‚ï¼Œåœ¨ Bash shell ä¸­ï¼Œæ‚¨å¯ä»¥é€šè¿‡ä»¥ä¸‹è¯­æ³•æ¥å®šä¹‰å˜é‡ï¼š1name="Alice"è¿™å°†åˆ›å»ºä¸€ä¸ªåä¸º name çš„å˜é‡ï¼Œå¹¶å°†å…¶è®¾ç½®ä¸º â€œAliceâ€ã€‚çŽ¯å¢ƒå˜é‡æ˜¯ Shell çŽ¯å¢ƒä¸­çš„ç‰¹æ®Šç±»åž‹çš„å˜é‡ï¼Œå®ƒä»¬å…·æœ‰å…¨å±€èŒƒå›´å¹¶å¯ä»¥è¢«æ‰€æœ‰å­è¿›ç¨‹è®¿é—®ã€‚çŽ¯å¢ƒå˜é‡é€šå¸¸ç”¨äºŽå­˜å‚¨ Shell å’Œå…¶ä»–ç¨‹åºæ‰€éœ€çš„å…±äº«ä¿¡æ¯ï¼Œä¾‹å¦‚è·¯å¾„ã€è¯­è¨€è®¾ç½®ã€ç”¨æˆ·ä¿¡æ¯ç­‰ã€‚ä¾‹å¦‚ï¼Œåœ¨ Bash shell ä¸­ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ä»¥ä¸‹è¯­æ³•æ¥è®¾ç½®çŽ¯å¢ƒå˜é‡ï¼š1export PATH=$PATH:/usr/local/binè¿™ä¼šå°† /usr/local/bin ç›®å½•æ·»åŠ åˆ°ç³»ç»Ÿçš„ PATH çŽ¯å¢ƒå˜é‡ä¸­ï¼Œä»¥ä¾¿ Shell å¯ä»¥æœç´¢è¯¥ç›®å½•ä¸­çš„å¯æ‰§è¡Œæ–‡ä»¶ã€‚å› æ­¤ï¼Œå˜é‡å’ŒçŽ¯å¢ƒå˜é‡å…·æœ‰ä¸åŒçš„ä½œç”¨å’ŒèŒƒå›´ï¼Œå¹¶ä¸”é€šå¸¸ç”¨äºŽä¸åŒçš„ç›®çš„ã€‚åœ¨ Linux ä¸­è®¾ç½®çŽ¯å¢ƒå˜é‡çš„æ–¹æ³•æœ‰å¤šç§ï¼Œä¸‹é¢å°†ä¸»è¦è®²å…¶ä¸­ä¸¤ç§å¸¸è§çš„æ–¹æ³•ã€‚Â¶ä¸´æ—¶è®¾ç½®çŽ¯å¢ƒå˜é‡è¦åœ¨å½“å‰ shell ä¼šè¯ä¸­è®¾ç½®ä¸€ä¸ªä¸´æ—¶çŽ¯å¢ƒå˜é‡ï¼Œå¯ä»¥ä½¿ç”¨ export å‘½ä»¤ã€‚ä¾‹å¦‚ï¼Œè¦å°† MY_VAR çš„å€¼è®¾ç½®ä¸º my_valueï¼Œå¯ä»¥æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š1export MY_VAR=my_valueè¿™å°†åœ¨å½“å‰ shell ä¼šè¯ä¸­è®¾ç½®ä¸€ä¸ªåä¸º MY_VAR çš„çŽ¯å¢ƒå˜é‡ï¼Œå¹¶å°†å…¶å€¼è®¾ç½®ä¸º my_valueã€‚è¯¥å˜é‡åªåœ¨å½“å‰ä¼šè¯ä¸­æœ‰æ•ˆï¼Œå…³é—­ç»ˆç«¯çª—å£æˆ–é‡å¯ç³»ç»ŸåŽå°±ä¼šè‡ªåŠ¨æ¸…é™¤ã€‚Â¶æ°¸ä¹…è®¾ç½®çŽ¯å¢ƒå˜é‡è¦åœ¨ç³»ç»Ÿä¸­æ°¸ä¹…è®¾ç½®ä¸€ä¸ªçŽ¯å¢ƒå˜é‡ï¼Œå¯ä»¥å°†å…¶æ·»åŠ åˆ° ~/.bashrc ã€ ~/.bash_profileã€/etc/profile ç­‰è„šæœ¬æ–‡ä»¶ä¸­ï¼Œè¿™æ ·ç³»ç»Ÿåœ¨æŸä¸ªç‰¹å®šæƒ…å†µä¸‹å°†ä¼šè‡ªåŠ¨æ‰§è¡Œè¿™äº›è„šæœ¬ä»¥è®©è„šæœ¬é‡Œè®¾ç½®çš„çŽ¯å¢ƒå˜é‡ç”Ÿæ•ˆã€‚ä¸‹é¢ä»¥æ·»åŠ çŽ¯å¢ƒå˜é‡åˆ°~/.bashrcè„šæœ¬æ–‡ä»¶ä¸ºä¾‹è®²è§£é…ç½®è¿‡ç¨‹ï¼š12345678910#åœ¨æ–‡ä»¶æœ€åŽåŠ å…¥å˜é‡cat &gt;&gt; ~/.bashrc &lt;&lt; 'EOF'export MY_VAR=my_valueEOF#ä½¿é…ç½®æ–‡ä»¶ä¿®æ”¹ç”Ÿæ•ˆsource ~/.bashrc#æµ‹è¯•echo $MY_VARðŸ’â€â™‚ /etc/profile ç­‰è„šæœ¬æ–‡ä»¶è¯´æ˜Žï¼š~/.bashrcï¼šæ‰“å¼€æ–°çš„ Bash shell ä¼šè¯æ—¶è‡ªåŠ¨æ‰§è¡Œè¯¥è„šæœ¬ã€‚è¯¥æ–‡ä»¶åªé€‚ç”¨äºŽå½“å‰ç”¨æˆ·çš„ Bash shellï¼Œé€šå¸¸ç”¨äºŽè®¾ç½®ç”¨æˆ·çŽ¯å¢ƒå˜é‡ç­‰é…ç½®ã€‚~/.bash_profileï¼šå¦‚æžœç³»ç»Ÿé»˜è®¤shellæ˜¯bashï¼Œç”¨æˆ·ç™»å½•æ—¶å°†è‡ªåŠ¨æ‰§è¡Œè¯¥è„šæœ¬ã€‚è¯¥æ–‡ä»¶åªé€‚ç”¨äºŽå½“å‰ç”¨æˆ·çš„ Bash shellï¼Œé€šå¸¸ç”¨äºŽè®¾ç½®ç”¨æˆ·çŽ¯å¢ƒå˜é‡ç­‰é…ç½®ã€‚/etc/profileï¼šåœ¨ç³»ç»Ÿå¼•å¯¼æ—¶è‡ªåŠ¨æ‰§è¡Œè¯¥è„šæœ¬ã€‚è¯¥æ–‡ä»¶é€‚ç”¨äºŽæ‰€æœ‰ç”¨æˆ·å’Œæ‰€æœ‰ Bash shellï¼Œé€šå¸¸ç”¨äºŽè®¾ç½®å…¨å±€çŽ¯å¢ƒå˜é‡ç­‰é…ç½®ã€‚ðŸ’â€â™‚ æ³¨æ„ï¼šåªè¦æ‰§è¡Œbashå‘½ä»¤å°±ä¼šæ‰“å¼€æ–°çš„ Bash shell ä¼šè¯ã€‚ðŸ’â€â™‚ æ€»ç»“ï¼šå¼€æœºå¯åŠ¨ç³»ç»Ÿï¼Œåœ¨ç³»ç»Ÿå¼•å¯¼æ—¶å°†è‡ªåŠ¨æ‰§è¡Œ/etc/profileè„šæœ¬æ–‡ä»¶ã€‚ç­‰ç³»ç»Ÿå¯åŠ¨å®ŒæˆåŽç”¨æˆ·å°±å¯ä»¥è¿›è¡Œç™»å½•æ“ä½œäº†ï¼Œå¦‚æžœç³»ç»Ÿé»˜è®¤shellæ˜¯bashï¼Œé‚£ä¹ˆåœ¨ç”¨æˆ·ç™»å½•æ—¶ç³»ç»Ÿä¼šè‡ªåŠ¨æ‰§è¡Œbashå‘½ä»¤æ¥æ‰“å¼€æ–°çš„ Bash shell ä¼šè¯ï¼Œæ•…è€Œä¼šè‡ªåŠ¨æ‰§è¡Œ~/.bash_profileå’Œ~/.bashrcè„šæœ¬æ–‡ä»¶ã€‚ä½†å¦‚æžœç³»ç»Ÿé»˜è®¤shellæ˜¯shã€zshç­‰å…¶ä»–ç±»åž‹çš„shellï¼Œé‚£ä¹ˆç™»å½•æ—¶å°†ä¸ä¼šè‡ªåŠ¨æ‰§è¡Œ~/.bash_profileè„šæœ¬ï¼Œä½†å½“ç”¨æˆ·æ‰‹åŠ¨æ‰§è¡Œbashå‘½ä»¤æ—¶æ˜¯ä¼šè‡ªåŠ¨æ‰§è¡Œ~/.bashrcè„šæœ¬æ–‡ä»¶çš„ã€‚ðŸ’â€â™‚ å»ºè®®ï¼šåœ¨ Linux ä¸­ï¼Œè™½ç„¶~/.bashrc ã€ ~/.bash_profileã€/etc/profile ç­‰è„šæœ¬æ–‡ä»¶éƒ½èƒ½é…ç½®çŽ¯å¢ƒå˜é‡ï¼Œä½†é€šå¸¸ä½¿ç”¨çš„è¯å»ºè®®å°†çŽ¯å¢ƒå˜é‡é…ç½®åˆ° ~/.bashrc æ–‡ä»¶ä¸­ã€‚Â¶4. ç³»ç»Ÿç‰ˆæœ¬å’Œå†…æ ¸ç‰ˆæœ¬Â¶1ï¼‰æŸ¥çœ‹ç³»ç»Ÿç‰ˆæœ¬1234567891011121314151617181920212223##ï¼ˆ1ï¼‰é€šè¿‡ lsb_release å‘½ä»¤æŸ¥çœ‹æ–¹å¼#å®‰è£…ä¾èµ–apt install lsb-release #Debian ç³»åˆ—ç³»ç»Ÿï¼ˆå¦‚ï¼šDebianã€Ubuntu ç­‰ï¼‰yum install redhat-lsb-core #Red Hat ç³»åˆ—ç³»ç»Ÿï¼ˆå¦‚ï¼šCentOSã€Fedora ç­‰ï¼‰#æŸ¥çœ‹ç³»ç»Ÿç‰ˆæœ¬ï¼ˆé€šç”¨ï¼Œå«ç³»ç»Ÿåç§°ã€ç³»ç»Ÿç‰ˆæœ¬å·ã€ç‰ˆæœ¬ä»£å·ã€æè¿°ç­‰ï¼‰lsb_release -a##ï¼ˆ2ï¼‰é€šè¿‡ç³»ç»Ÿé…ç½®æ–‡ä»¶æŸ¥çœ‹æ–¹å¼#æŸ¥çœ‹ç³»ç»Ÿç‰ˆæœ¬ï¼ˆé€šç”¨ï¼Œå«ç³»ç»Ÿåç§°ï¼ˆIDï¼‰ã€ç³»ç»Ÿç‰ˆæœ¬å·ã€ç‰ˆæœ¬ä»£å·ã€æè¿°ç­‰ï¼‰cat /etc/os-release#ä»…æŸ¥çœ‹ç³»ç»Ÿåç§°ï¼ˆIDï¼‰cat /etc/os-release | grep -oP '^ID=\K\S+'#ä»…æŸ¥çœ‹ç³»ç»Ÿç‰ˆæœ¬å·cat /etc/os-release | grep VERSION_ID | cut -d '=' -f 2 | sed 's/"//g'#ä»…æŸ¥çœ‹ç³»ç»Ÿç‰ˆæœ¬ä»£å·cat /etc/os-release | grep VERSION_CODENAME | cut -d '=' -f 2#cat /etc/os-release | grep VERSION_CODENAME | awk -F '=' '&#123;print $2&#125;'#cat /etc/os-release | grep VERSION_CODENAME | sed 's/.*=//'Â¶2ï¼‰æŸ¥çœ‹å†…æ ¸ç‰ˆæœ¬1uname -rÂ¶3ï¼‰å‡çº§å†…æ ¸ç‰ˆæœ¬Â¶ç®€è¦è¯´æ˜Žé€šè¿‡ç³»ç»Ÿé»˜è®¤å®˜æ–¹æºåœ¨çº¿å‡çº§çš„å†…æ ¸ç‰ˆæœ¬ä¸€èˆ¬éƒ½ä¸ä¼šå¤ªæ–°ï¼Œç‰¹åˆ«æ˜¯ä¸€äº›è€ç‰ˆæœ¬çš„ç³»ç»Ÿï¼ˆå¦‚ï¼šCentOS 7ã€Ubuntu 18.04 ç­‰ï¼‰ã€‚ç”±äºŽä¸ºäº†è®©ç³»ç»Ÿç¨³å®šï¼Œé€šå¸¸ Linux å‘è¡Œå•†å®˜æ–¹éƒ½ä¼šé€‰æ‹©ä¸€äº›ç»è¿‡é•¿æœŸæµ‹è¯•å’Œä½¿ç”¨çš„è€ç‰ˆæœ¬å†…æ ¸ï¼Œæ‰€ä»¥å®˜æ–¹çš„è½¯ä»¶æºéƒ½ä¸ä¼šæä¾›å¤ªæ–°çš„å†…æ ¸ç‰ˆæœ¬ï¼Œå¦‚æžœéžè¦ä½¿ç”¨æ›´é«˜ç‰ˆæœ¬çš„å†…æ ¸åˆ™åº”è¯¥é€šè¿‡å…¶ä»–æ–¹å¼å®‰è£…å‡çº§ï¼Œä¸»è¦ä¸ºå¦‚ä¸‹å‡ ç§æ–¹å¼ï¼šä¸‹è½½ Linux æ–°ç‰ˆå†…æ ¸è¿›è¡Œç¼–è¯‘å®‰è£…ä½¿ç”¨ç¬¬ä¸‰æ–¹æºè¿›è¡Œåœ¨çº¿å®‰è£…ï¼ˆå¦‚ï¼šelrepo æºã€XanMod æºç­‰ï¼‰ä½¿ç”¨å·²ç¼–è¯‘å¥½çš„äºŒè¿›åˆ¶åŒ…è¿›è¡Œå®‰è£…ï¼ˆå»ºè®®é€šè¿‡ä¸€é”®è„šæœ¬å®‰è£…ï¼‰æ¸©é¦¨æç¤ºï¼šä½¿ç”¨éžå®˜æ–¹æºå®‰è£…çš„å†…æ ¸å¯èƒ½ä¼šå¯¼è‡´ç³»ç»Ÿä¸ç¨³å®šï¼Œéžå¿…è¦æƒ…å†µå½“ç„¶æ›´æŽ¨èä½¿ç”¨å®˜æ–¹æºæ”¯æŒçš„å†…æ ¸ç‰ˆæœ¬ï¼Œé€šå¸¸æ›´é«˜ç‰ˆæœ¬å†…æ ¸åœ¨å¯¹åº” LInux æ–°ç‰ˆæœ¬ä¸­ä¼šå¾—åˆ°æ›´æ–°çš„æ”¯æŒï¼ˆå¦‚ Ubuntu 22.04 çš„å®˜æ–¹æºå†…æ ¸ç‰ˆæœ¬ä¼šæ¯” Ubuntu 18.04 æ›´æ–°ï¼Œå¦‚éœ€æ›´æ–°å†…æ ¸ç‰ˆæœ¬åº”è¯¥è€ƒè™‘å‡çº§ç³»ç»Ÿç‰ˆæœ¬ï¼‰ã€‚å‚è€ƒï¼šLinux å†…æ ¸åœ¨çº¿å‡çº§ã€ç¦»çº¿å‡çº§ã€å®šåˆ¶å‡çº§https://zhuanlan.zhihu.com/p/75669680Â¶æ–¹å¼ä¸€ï¼šé€šè¿‡ç³»ç»Ÿé»˜è®¤å®˜æ–¹æºåœ¨çº¿å‡çº§çš„å†…æ ¸ç‰ˆæœ¬è¿™ç§æ–¹å¼å‡çº§çš„ç‰ˆæœ¬ä¸ºç³»ç»Ÿå‘è¡Œæ–¹ç»´æŠ¤çš„ç‰ˆæœ¬ï¼Œé€šå¸¸ç‰ˆæœ¬è¾ƒä½Ž12345678910111213141516171819202122232425262728293031323334353637383940414243##ï¼ˆ1ï¼‰CentOS/RedHat#æ›´æ–°å†…æ ¸ç‰ˆæœ¬yum update kernel#æ›´æ–°å¼•å¯¼åŠ è½½ç¨‹åºï¼ˆå¿…é€‰ï¼Œå³è®¾ç½®ä½¿ç”¨æ–°ç‰ˆå†…æ ¸å¯åŠ¨ï¼ŒCentOS/RedHat å®‰è£…æ–°ç‰ˆå†…æ ¸ä¸ä¼šè‡ªåŠ¨æ›´æ–°å¼•å¯¼åŠ è½½ç¨‹åºä¸ºæœ€æ–°å†…æ ¸ï¼‰ #å¦‚æžœéœ€è¦ä½¿ç”¨å…¶ä»–ç‰ˆæœ¬å†…æ ¸å¯é€šè¿‡æ‰§è¡Œï¼šegrep ^menuentry /etc/grub2.cfg | cut -f 2 -d \' å‘½ä»¤æŸ¥çœ‹å·²å®‰è£…æ‰€æœ‰ç‰ˆæœ¬å†…æ ¸é¡ºåºï¼ˆä»Ž0å¼€å§‹ï¼Œé»˜è®¤æœ€é«˜ç‰ˆæœ¬åœ¨æœ€å‰é¢ï¼‰grub2-set-default 0grub2-mkconfig -o /boot/grub2/grub.cfg #ç”¨äºŽä¼ ç»Ÿçš„BIOSå¼•å¯¼#grub2-mkconfig -o /boot/efi/EFI/centos/grub.cfg #ç”¨äºŽUEFIå¼•å¯¼ï¼ˆå¦‚æžœä½¿ç”¨çš„æ˜¯ UEFI å¼•å¯¼ï¼Œåˆ™åº”è¯¥æ›´æ–°çš„æ˜¯ UEFI GRUB é…ç½®ï¼‰#é‡å¯æœåŠ¡å™¨ä»¥ä½¿æ–°ç‰ˆå†…æ ¸ç”Ÿæ•ˆï¼ˆå¿…é€‰ï¼‰reboot##åˆ é™¤æ— ç”¨çš„æ—§å†…æ ¸ç‰ˆæœ¬ï¼ˆå¯é€‰ï¼Œä¸ºäº†èŠ‚çœç£ç›˜ç©ºé—´å»ºè®®åˆ é™¤ï¼‰#æŸ¥çœ‹å·²å®‰è£…çš„æ‰€æœ‰å†…æ ¸ç‰ˆæœ¬rpm -qa kernel kernel-*#ç¡®è®¤å½“å‰æ­£åœ¨ä½¿ç”¨çš„å†…æ ¸uname -r#åˆ é™¤ä¸éœ€è¦çš„å†…æ ¸ç‰ˆæœ¬ï¼ˆå°† &lt;kernel-package&gt; æ›¿æ¢ä¸ºè¦åˆ é™¤çš„åŒ…åï¼‰yum remove &lt;kernel-package&gt;#æ›´æ–°å¼•å¯¼åŠ è½½ç¨‹åºé…ç½®ï¼ˆå¦‚æžœä½¿ç”¨ GRUB å¼•å¯¼ï¼‰grub2-mkconfig -o /boot/grub2/grub.cfg##ï¼ˆ2ï¼‰Ubuntu/Debian#åˆ—å‡ºå¯å‡çº§å†…æ ¸ç‰ˆæœ¬apt list --upgradable | grep linux-image#å®‰è£…æ”¯æŒçš„æ–°ç‰ˆå†…æ ¸apt install linux-image-generic#apt install linux-generic-hwe-18.04-edge #å¯¹äºŽUbuntuï¼Œåœ¨ç‰ˆæœ¬ç³»ç»Ÿä¸­å¯ä»¥å®‰è£…æŒ‡å®šç³»ç»Ÿç‰ˆæœ¬ï¼ˆå¦‚Ubuntu 18.04ï¼‰çš„hweå†…æ ¸åŒ…ï¼Œå…¶ç‰ˆæœ¬é€šå¸¸æ¯”é»˜è®¤å†…æ ¸åŒ…ç‰ˆæœ¬é«˜ï¼Œä½†å¯èƒ½ä¸ç¨³å®š#æ›´æ–°å¼•å¯¼åŠ è½½ç¨‹åºï¼ˆå¯é€‰ï¼Œå³è®¾ç½®ä½¿ç”¨æ–°ç‰ˆå†…æ ¸å¯åŠ¨ï¼ŒUbuntu/Debian å®‰è£…æ–°ç‰ˆå†…æ ¸ä¼šè‡ªåŠ¨æ›´æ–°å¼•å¯¼åŠ è½½ç¨‹åºä¸ºæœ€æ–°å†…æ ¸ï¼‰ #é€šå¸¸æƒ…å†µä¸‹ï¼Œæ–°å†…æ ¸çš„ GRUB å¼•å¯¼é¡¹ä¼šè‡ªåŠ¨æˆä¸ºé»˜è®¤çš„å¼•å¯¼é¡¹ã€‚ #å¦‚æžœéœ€è¦ä½¿ç”¨å…¶ä»–ç‰ˆæœ¬å†…æ ¸å¯é€šè¿‡æ‰§è¡Œï¼šgrep 'menuentry' /boot/grub/grub.cfg å‘½ä»¤æŸ¥çœ‹å·²å®‰è£…æ‰€æœ‰ç‰ˆæœ¬å†…æ ¸é¡ºåºï¼ˆä»Ž0å¼€å§‹ï¼Œé»˜è®¤æœ€é«˜ç‰ˆæœ¬åœ¨æœ€å‰é¢ï¼‰ï¼Œç„¶åŽä¿®æ”¹ /etc/default/grub ä¸­çš„ GRUB_DEFAULT å€¼ï¼ˆè®¾è¦ä¿®æ”¹çš„å†…æ ¸ç´¢å¼•é¡ºåºä¸º 2ï¼Œåˆ™ä¿®æ”¹ä¸ºï¼šGRUB_DEFAULT="1&gt; 2"ï¼‰ï¼Œæœ€åŽæ‰§è¡Œ update-grub å¹¶ reboot é‡å¯ç³»ç»Ÿå³å¯ã€‚å‚è€ƒï¼šhttps://www.cnblogs.com/zzugyl/p/14588114.html #å…³æœºé‡å¯æ—¶ä¸€èˆ¬ä¼šè¿›å…¥grubèœå•ï¼Œåœ¨èœå•ä¸­å¯ä»¥é€‰æ‹©æŒ‡å®šç‰ˆæœ¬çš„å†…æ ¸å¯åŠ¨ï¼Œå¦‚æžœå¯åŠ¨æ—¶è·³è¿‡ä¸å±•ç¤ºgrubèœå•ï¼Œåˆ™å¯ä»¥åœ¨å¯åŠ¨æ—¶æŒ‰ä½Shifté”®æˆ–Escé”®ï¼Œç›´åˆ°å‡ºçŽ°GRUBèœå•ã€‚update-grub#é‡å¯æœåŠ¡å™¨ä»¥ä½¿æ–°ç‰ˆå†…æ ¸ç”Ÿæ•ˆï¼ˆå¿…é€‰ï¼‰reboot##åˆ é™¤æ— ç”¨çš„æ—§å†…æ ¸ç‰ˆæœ¬ï¼ˆå¯é€‰ï¼Œä¸ºäº†èŠ‚çœç£ç›˜ç©ºé—´å»ºè®®åˆ é™¤ï¼‰#æŸ¥çœ‹å·²å®‰è£…çš„æ‰€æœ‰å†…æ ¸ç‰ˆæœ¬dpkg --list | grep linux-image#ç¡®è®¤å½“å‰æ­£åœ¨ä½¿ç”¨çš„å†…æ ¸uname -r#åˆ é™¤ä¸éœ€è¦çš„å†…æ ¸ç‰ˆæœ¬ï¼ˆå°† &lt;kernel-package&gt; æ›¿æ¢ä¸ºè¦åˆ é™¤çš„åŒ…åï¼‰apt purge &lt;kernel-package&gt;#æ›´æ–°å¼•å¯¼åŠ è½½ç¨‹åºé…ç½®update-grubÂ¶æ–¹å¼äºŒï¼šä½¿ç”¨ç¬¬ä¸‰æ–¹æºåœ¨çº¿å®‰è£…è¾ƒæ–°ç‰ˆæœ¬çš„å†…æ ¸12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152##ï¼ˆ1ï¼‰CentOS/RedHat #å‚è€ƒï¼šhttp://elrepo.org/tiki/HomePageã€https://www.cccitu.com/oos583vx2.html#å®‰è£… elrepo ç¬¬ä¸‰æ–¹è½¯ä»¶æºyum install -y elrepo-release#rpm --import https://www.elrepo.org/RPM-GPG-KEY-elrepo.org #å¯¼å…¥å…¬é’¥#yum install https://www.elrepo.org/elrepo-release-7.el7.elrepo.noarch.rpm #å®‰è£… CentOS7/RedHat7 çš„ elrepo æº#yum install https://www.elrepo.org/elrepo-release-8.el8.elrepo.noarch.rpm #å®‰è£… CentOS8/RedHat8 çš„ elrepo æº#æŸ¥çœ‹å¯æ›´æ–°å†…æ ¸ç‰ˆæœ¬yum --disablerepo="*" --enablerepo="elrepo-kernel" list available#å®‰è£…æœ€æ–°ç‰ˆæœ¬å†…æ ¸ï¼ˆelrepoæºæœ‰mlã€ltä¸¤ç§å†…æ ¸ã€‚ml(mainline)ä¸ºæœ€æ–°ç‰ˆæœ¬çš„å†…æ ¸ï¼Œltä¸ºé•¿æœŸæ”¯æŒçš„å†…æ ¸ã€‚ï¼‰yum --enablerepo=elrepo-kernel install -y kernel-lt#æ›´æ–°å¼•å¯¼åŠ è½½ç¨‹åºï¼ˆå¿…é€‰ï¼Œå³è®¾ç½®ä½¿ç”¨æ–°ç‰ˆå†…æ ¸å¯åŠ¨ï¼ŒCentOS/RedHat å®‰è£…æ–°ç‰ˆå†…æ ¸ä¸ä¼šè‡ªåŠ¨æ›´æ–°å¼•å¯¼åŠ è½½ç¨‹åºä¸ºæœ€æ–°å†…æ ¸ï¼‰ #å¦‚æžœéœ€è¦ä½¿ç”¨å…¶ä»–ç‰ˆæœ¬å†…æ ¸å¯é€šè¿‡æ‰§è¡Œï¼šegrep ^menuentry /etc/grub2.cfg | cut -f 2 -d \' å‘½ä»¤æŸ¥çœ‹å·²å®‰è£…æ‰€æœ‰ç‰ˆæœ¬å†…æ ¸é¡ºåºï¼ˆä»Ž0å¼€å§‹ï¼Œé»˜è®¤æœ€é«˜ç‰ˆæœ¬åœ¨æœ€å‰é¢ï¼‰grub2-set-default 0grub2-mkconfig -o /boot/grub2/grub.cfg #ç”¨äºŽä¼ ç»Ÿçš„BIOSå¼•å¯¼#grub2-mkconfig -o /boot/efi/EFI/centos/grub.cfg #ç”¨äºŽUEFIå¼•å¯¼ï¼ˆå¦‚æžœä½¿ç”¨çš„æ˜¯ UEFI å¼•å¯¼ï¼Œåˆ™åº”è¯¥æ›´æ–°çš„æ˜¯ UEFI GRUB é…ç½®ï¼‰#é‡å¯æœåŠ¡å™¨ä»¥ä½¿æ–°ç‰ˆå†…æ ¸ç”Ÿæ•ˆï¼ˆå¿…é€‰ï¼‰reboot##åˆ é™¤æ— ç”¨çš„æ—§å†…æ ¸ç‰ˆæœ¬ï¼ˆå¯é€‰ï¼Œä¸ºäº†èŠ‚çœç£ç›˜ç©ºé—´å»ºè®®åˆ é™¤ï¼‰#æŸ¥çœ‹å·²å®‰è£…çš„æ‰€æœ‰å†…æ ¸ç‰ˆæœ¬ï¼ˆä»…å«yumæˆ–rpmç®¡ç†å™¨å®‰è£…çš„åŒ…ï¼Œä¸å«æ‰‹åŠ¨ç¼–è¯‘å®‰è£…çš„åŒ…ï¼‰rpm -qa kernel kernel-*#ç¡®è®¤å½“å‰æ­£åœ¨ä½¿ç”¨çš„å†…æ ¸uname -r#åˆ é™¤ä¸éœ€è¦çš„å†…æ ¸ç‰ˆæœ¬ï¼ˆå°† &lt;kernel-package&gt; æ›¿æ¢ä¸ºè¦åˆ é™¤çš„åŒ…åï¼‰yum remove &lt;kernel-package&gt;#æ›´æ–°å¼•å¯¼åŠ è½½ç¨‹åºé…ç½®ï¼ˆå¦‚æžœä½¿ç”¨ GRUB å¼•å¯¼ï¼‰grub2-mkconfig -o /boot/grub2/grub.cfg##ï¼ˆ2ï¼‰Ubuntu/Debian #å‚è€ƒï¼šhttps://xanmod.org#å®‰è£… XanMod æºwget -qO - https://dl.xanmod.org/archive.key | gpg --dearmor -o /usr/share/keyrings/xanmod-archive-keyring.gpgecho 'deb [signed-by=/usr/share/keyrings/xanmod-archive-keyring.gpg] http://deb.xanmod.org releases main' | tee /etc/apt/sources.list.d/xanmod-release.list#å®‰è£…æœ€æ–°ç‰ˆæœ¬å†…æ ¸apt updateapt install linux-xanmod-x64v3#æ›´æ–°å¼•å¯¼åŠ è½½ç¨‹åºï¼ˆå¯é€‰ï¼Œå³è®¾ç½®ä½¿ç”¨æ–°ç‰ˆå†…æ ¸å¯åŠ¨ï¼ŒUbuntu/Debian å®‰è£…æ–°ç‰ˆå†…æ ¸ä¼šè‡ªåŠ¨æ›´æ–°å¼•å¯¼åŠ è½½ç¨‹åºä¸ºæœ€æ–°å†…æ ¸ï¼‰ #é€šå¸¸æƒ…å†µä¸‹ï¼Œæ–°å†…æ ¸çš„ GRUB å¼•å¯¼é¡¹ä¼šè‡ªåŠ¨æˆä¸ºé»˜è®¤çš„å¼•å¯¼é¡¹ã€‚ #å¦‚æžœéœ€è¦ä½¿ç”¨å…¶ä»–ç‰ˆæœ¬å†…æ ¸å¯é€šè¿‡æ‰§è¡Œï¼šgrep 'menuentry' /boot/grub/grub.cfg å‘½ä»¤æŸ¥çœ‹å·²å®‰è£…æ‰€æœ‰ç‰ˆæœ¬å†…æ ¸é¡ºåºï¼ˆä»Ž0å¼€å§‹ï¼Œé»˜è®¤æœ€é«˜ç‰ˆæœ¬åœ¨æœ€å‰é¢ï¼‰ï¼Œç„¶åŽä¿®æ”¹ /etc/default/grub ä¸­çš„ GRUB_DEFAULT å€¼ï¼ˆè®¾è¦ä¿®æ”¹çš„å†…æ ¸ç´¢å¼•é¡ºåºä¸º 2ï¼Œåˆ™ä¿®æ”¹ä¸ºï¼šGRUB_DEFAULT="1&gt; 2"ï¼‰ï¼Œæœ€åŽæ‰§è¡Œ update-grub å¹¶ reboot é‡å¯ç³»ç»Ÿå³å¯ã€‚å‚è€ƒï¼šhttps://www.cnblogs.com/zzugyl/p/14588114.html #å…³æœºé‡å¯æ—¶ä¸€èˆ¬ä¼šè¿›å…¥grubèœå•ï¼Œåœ¨èœå•ä¸­å¯ä»¥é€‰æ‹©æŒ‡å®šç‰ˆæœ¬çš„å†…æ ¸å¯åŠ¨ï¼Œå¦‚æžœå¯åŠ¨æ—¶è·³è¿‡ä¸å±•ç¤ºgrubèœå•ï¼Œåˆ™å¯ä»¥åœ¨å¯åŠ¨æ—¶æŒ‰ä½Shifté”®æˆ–Escé”®ï¼Œç›´åˆ°å‡ºçŽ°GRUBèœå•ã€‚update-grub#é‡å¯æœåŠ¡å™¨ä»¥ä½¿æ–°ç‰ˆå†…æ ¸ç”Ÿæ•ˆï¼ˆå¿…é€‰ï¼‰reboot##åˆ é™¤æ— ç”¨çš„æ—§å†…æ ¸ç‰ˆæœ¬ï¼ˆå¯é€‰ï¼Œä¸ºäº†èŠ‚çœç£ç›˜ç©ºé—´å»ºè®®åˆ é™¤ï¼‰#æŸ¥çœ‹å·²å®‰è£…çš„æ‰€æœ‰å†…æ ¸ç‰ˆæœ¬dpkg --list | grep linux-image#ç¡®è®¤å½“å‰æ­£åœ¨ä½¿ç”¨çš„å†…æ ¸uname -r#åˆ é™¤ä¸éœ€è¦çš„å†…æ ¸ç‰ˆæœ¬ï¼ˆå°† &lt;kernel-package&gt; æ›¿æ¢ä¸ºè¦åˆ é™¤çš„åŒ…åï¼‰apt purge &lt;kernel-package&gt;#æ›´æ–°å¼•å¯¼åŠ è½½ç¨‹åºé…ç½®update-grubÂ¶æ–¹å¼ä¸‰ï¼šä½¿ç”¨å·²ç¼–è¯‘å¥½çš„äºŒè¿›åˆ¶åŒ…è¿›è¡Œå®‰è£…123456789101112131415#è¿™é‡Œä½¿ç”¨ä¸€é”®è„šæœ¬å®‰è£…æ–¹å¼ #è„šæœ¬é¡¹ç›®åœ°å€ï¼šhttps://github.com/ylx2016/Linux-NetSpeed #åŽŸåŠŸèƒ½æ˜¯ä¸€é”®å®‰è£… BBR/BBRplus/é”é€Ÿï¼Œå¯ç”¨äºŽå‡çº§ç³»ç»Ÿå†…æ ¸ #æ”¯æŒ CentOS 7/8ï¼ŒDebian/Ubuntuï¼ŒOracleLinux #åœ¨å›½å†…æ‰§è¡Œè„šæœ¬æ—¶å¯èƒ½æ— æ³•æ­£å¸¸ä¸‹è½½æ–°ç‰ˆå†…æ ¸ç­‰æ–‡ä»¶ï¼Œæ•…éœ€è¦æŒ‚ä»£ç†ï¼Œå¹¶æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ï¼š # export http_proxy=http://192.168.31.74:1081 # export https_proxy=http://192.168.31.74:1081 #å®‰è£…æ–°ç‰ˆå†…æ ¸åªéœ€è¦é€‰æ‹© 1. å®‰è£… BBRåŽŸç‰ˆå†…æ ¸ï¼Œè„šæœ¬ä¼šè‡ªåŠ¨å¸è½½æ—§ç‰ˆå†…æ ¸å¹¶å®‰è£…æœ€æ–°ç‰ˆå†…æ ¸#ä¸‹è½½è„šæœ¬wget -O tcp.sh "https://github.com/ylx2016/Linux-NetSpeed/raw/master/tcp.sh"#æ‰§è¡Œè„šæœ¬chmod +x tcp.sh./tcp.sh#åˆ é™¤è„šæœ¬ï¼ˆå‡çº§å®Œæˆå†…æ ¸åŽå¯é€‰æ‹©åˆ é™¤è„šæœ¬ï¼‰rm -f ./tcp.shÂ¶æ–¹å¼å››ï¼šä¸‹è½½å†…æ ¸æºç æ‰‹åŠ¨ç¼–è¯‘å®‰è£…è¿™ç§æ–¹å¼å¯å®‰è£…æœ€æ–°ç‰ˆæˆ–ä»»æ„ç‰ˆæœ¬å†…æ ¸ã€‚1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980818283#1ã€å®‰è£…ä¾èµ–#Debian ç³»åˆ—ç³»ç»Ÿå®‰è£…æ‰€éœ€ä¾èµ–apt updateapt install build-essential #åŒ…å« makeã€gccã€g++ ç­‰åŸºç¡€ç¼–è¯‘å·¥å…·apt install libncurses-dev bison flex libssl-dev libelf-dev dwarves bc#RedHat ç³»åˆ—ç³»ç»Ÿå®‰è£…æ‰€éœ€ä¾èµ–yum groupinstall "Development Tools" #åŒ…å« makeã€gccã€g++ ç­‰åŸºç¡€ç¼–è¯‘å·¥å…·yum install ncurses-devel flex bison openssl openssl-devel elfutils-libelf-devel bc#2ã€ä¸‹è½½æŒ‡å®šç‰ˆæœ¬çš„å†…æ ¸æºç å¹¶è§£åŽ‹ #åˆ° Linux å†…æ ¸å®˜ç½‘ https://www.kernel.org ä¸‹è½½æŒ‡å®šç‰ˆæœ¬çš„å†…æ ¸æºç åŒ…ï¼Œå»ºè®®ä¸‹è½½ stableï¼ˆç¨³å®šç‰ˆï¼‰æˆ–è€… longtermï¼ˆé•¿æœŸç»´æŠ¤ç‰ˆï¼‰ #å¯ä½¿ç”¨ä»£ç†ä¸‹è½½ï¼šwget -e "https_proxy=http://192.168.31.74:1081" https://cdn.kernel.org/pub/linux/kernel/v6.x/linux-6.5.8.tar.xzwget https://cdn.kernel.org/pub/linux/kernel/v6.x/linux-6.5.8.tar.xz tar xvf linux-6.5.8.tar.xzcd linux-6.5.8#3ã€é…ç½®æ‰€ç¼–è¯‘çš„å†…æ ¸ï¼ˆäº¤äº’å¼æ“ä½œç”Ÿæˆç¼–è¯‘é…ç½®æ–‡ä»¶.configï¼‰ #centos7 ç­‰ yum é»˜è®¤å®‰è£…çš„ gcc ç‰ˆæœ¬å¤ªä½Žå¯èƒ½æ— æ³•ç¼–è¯‘æ–°å†…æ ¸ï¼Œåˆ™éœ€è¦æ‰‹åŠ¨å®‰è£…æ›´æ–° gcc ç‰ˆæœ¬ï¼Œå»ºè®®ä½¿ç”¨ scl å·¥å…·ç®¡ç†å¤šç‰ˆæœ¬ gccï¼Œå‚è€ƒï¼šhttps://cloud.tencent.com/developer/article/1626791 #åŒ…æ‹¬é©±åŠ¨ã€ç½‘ç»œã€æ–‡ä»¶ç³»ç»Ÿç­‰ç­‰ #å‹¾é€‰è¯´æ˜Žï¼š* è¡¨ç¤ºä¸ºç¼–è¯‘åˆ°å†…æ ¸é•œåƒï¼ˆä¸»è¦ç”Ÿæˆçš„æ–‡ä»¶å¦‚ï¼šarch/x86/boot/bzImageã€vmlinux ç­‰ï¼‰ï¼ŒM è¡¨ç¤ºç¼–è¯‘åˆ°å†…æ ¸æ¨¡å—ï¼Œç©ºè¡¨ç¤ºä¸ç¼–è¯‘ã€‚ï¼ˆå†…æ ¸æ¨¡å—çš„ä½œç”¨æ˜¯å¯åŠ¨å†…æ ¸é•œåƒæ—¶æŒ‰éœ€ä»Žé•œåƒæ–‡ä»¶å¤–éƒ¨åŠ è½½å†…æ ¸æ¨¡å—ï¼Œè¿™æ ·å¯ä»¥æœ‰æ•ˆå‡å°å†…æ ¸é•œåƒçš„å¤§å°å’Œå¯åŠ¨æ—¶é—´ï¼‰ #é€šå¸¸æ‰§è¡Œè¯¥å‘½ä»¤æ—¶ä¼šè‡ªåŠ¨å‚è€ƒå½“å‰ç³»ç»Ÿå†…æ ¸ï¼ˆå³åŽŸç‰ˆæœ¬å†…æ ¸ï¼Œå½“å‰ç³»ç»Ÿå†…æ ¸é…ç½®ï¼š/boot/config-&lt;å½“å‰ç³»ç»Ÿå†…æ ¸&gt;ï¼‰è‡ªåŠ¨å‹¾é€‰é…ç½®ï¼Œä¹Ÿå°±æ˜¯è¯´åŽŸç‰ˆæœ¬å†…æ ¸æœ‰çš„åŠŸèƒ½æˆ–æ¨¡å—åœ¨ç¼–è¯‘é€‰é¡¹é‡Œå°†ä¼šè¢«å‹¾é€‰ï¼Œè€Œå¦‚æžœåŽŸæœ¬æ²¡æœ‰åˆ™ä¸ä¼šè‡ªåŠ¨å‹¾é€‰ã€‚æ•…è€Œå³ä½¿æ˜¯åŒä¸€ä¸ªç‰ˆæœ¬çš„å†…æ ¸æºç åœ¨ä¸åŒå†…æ ¸çš„ Linux ç³»ç»Ÿä¸­æ‰€å±•ç¤ºçš„é»˜è®¤é…ç½®å‹¾é€‰ä¹Ÿå¯èƒ½ä¸åŒã€‚ # 1ï¼‰é€šå¸¸ä½¿ç”¨åŽŸç‰ˆæœ¬å†…æ ¸é»˜è®¤å‹¾é€‰çš„åŠŸèƒ½é…ç½®å³å¯ã€‚ # 2ï¼‰ç¼–è¯‘çš„å†…æ ¸é€šå¸¸éƒ½é»˜è®¤å¸¦æœ‰è°ƒè¯•ä¿¡æ¯ï¼Œé‚£ä¹ˆå†…æ ¸å’Œæ¨¡å—çš„æ–‡ä»¶å°†ä¼šå¾ˆå¤§ï¼Œå ç”¨å¾ˆå¤šç£ç›˜ç©ºé—´ã€‚å»ºè®®åŽ»é™¤è¿™äº›å†…æ ¸è°ƒè¯•ä¿¡æ¯ï¼Œå¯æœ‰æ•ˆå‡å°å†…æ ¸æ¨¡å—å’Œå†…æ ¸å¤§å°ï¼ŒèŠ‚çœå­˜å‚¨ç©ºé—´ã€‚èœå•å¯¼èˆªï¼šKernel hacking -&gt; Compile-time checks and compiler options -&gt; Debug information (Disable debug information) -&gt; Disable debug information inkingï¼ŒæŒ‰ç©ºæ ¼é€‰æ‹©è®¾ç½®ä¸º X è¡¨ç¤ºå…³é—­è°ƒè¯•ä¿¡æ¯ï¼Œç„¶åŽé€‰æ‹© Save -&gt; OK # 3ï¼‰å¦‚æžœåŽŸæœ¬çš„ç³»ç»Ÿå†…æ ¸åŠŸèƒ½ä¸æ»¡è¶³éœ€æ±‚åˆ™éœ€è¦é¢å¤–å‹¾é€‰é…ç½®ï¼Œå¸¸è§åŠŸèƒ½å¦‚ä¸‹ï¼š #ï¼ˆ1ï¼‰TCP BBRï¼šéœ€è¦å†…æ ¸ä¸º 4.9+ï¼Œèœå•å¯¼èˆªï¼šNetworking support -&gt; Networking options -&gt; TCP: advanced congestion control -&gt; BBR TCPï¼ŒæŒ‰ç©ºæ ¼é€‰æ‹©è®¾ç½®ä¸º M è¡¨ç¤ºç¼–è¯‘åˆ°å†…æ ¸æ¨¡å—ï¼Œç„¶åŽé€‰æ‹© Save -&gt; OK #ï¼ˆ2ï¼‰WireGuardï¼šéœ€è¦å†…æ ¸ç‰ˆæœ¬ä¸º 5.6+ï¼Œèœå•å¯¼èˆªï¼šDevice Drivers -&gt; Network device support -&gt; Network core driver support -&gt; WireGuard secure network tunnelï¼ŒæŒ‰ç©ºæ ¼é€‰æ‹©è®¾ç½®ä¸º M è¡¨ç¤ºç¼–è¯‘åˆ°å†…æ ¸æ¨¡å—ï¼Œç„¶åŽé€‰æ‹© Save -&gt; OK #è‡ªå®šä¹‰å†…æ ¸ç‰ˆæœ¬åç§°ï¼ˆå¯é€‰ï¼Œå¦‚ï¼šlinux-6.5.8-testï¼Œé»˜è®¤ä¸ºå†…æ ¸åŽŸå§‹ç‰ˆæœ¬å·ï¼Œå¦‚ï¼š6.5.8ï¼‰ï¼Œèœå•å¯¼èˆªï¼šGeneral setup -&gt; Local version - append to kernel releaseï¼Œè¾“å…¥è‡ªå®šä¹‰çš„å†…æ ¸ç‰ˆæœ¬åç§°å¹¶ä¿å­˜å³å¯ # 4ï¼‰èœå•å‹¾é€‰ç¡®å®šåŽï¼Œé€‰æ‹© Exit é€€å‡ºï¼Œé€‰æ‹© YES ä¿å­˜é…ç½®åˆ°å½“æœŸç›®å½•çš„ .config æ–‡ä»¶é‡Œã€‚make menuconfig#4ã€ç¼–è¯‘å†…æ ¸ #æ ¹æ® .config é…ç½®æ–‡ä»¶é€‰æ‹©æ€§è¿›è¡Œç¼–è¯‘ #å¯ä½¿ç”¨ -j æŒ‡å®šçº¿ç¨‹æ•°åŠ å¿«ç¼–è¯‘ï¼Œæˆ–è€…é€šè¿‡å¤„ç†å™¨æ ¸å¿ƒæ•°æŒ‡å®šçº¿ç¨‹æ•°ï¼šmake -j$(nproc) #å¦‚æžœä¹‹å‰ç¼–è¯‘è¿‡ï¼Œå†ç¼–è¯‘åˆ™ä¼šå¾ˆå¿« #å¯ä»¥é€šè¿‡ make clean æ¸…ç†ç¼–è¯‘ç”Ÿæˆçš„ä¸´æ—¶æ–‡ä»¶ï¼ˆæˆ–è€…ä½¿ç”¨ make mrproperï¼ŒåŒºåˆ«æ˜¯ make mrproper ä¼šåˆ é™¤ .config æ–‡ä»¶ï¼Œè€Œ make clean ä¸ä¼šï¼‰ #å†…æ ¸ç¼–è¯‘æ—¶é—´é€šå¸¸éƒ½ä¼šæ¯”è¾ƒä¹…ï¼ˆé€šå¸¸éœ€è¦å‡ ä¸ªå°æ—¶ï¼Œå·®ä¸å¤š2-3å°æ—¶å·¦å³ï¼Œè®¡ç®—æœºé…ç½®è¶Šé«˜ç¼–è¯‘ä¼šè¶Šå¿«ï¼Œä¸»è¦æ˜¯CPUï¼Œå¦‚æžœä½¿ç”¨è™šæ‹Ÿæœºï¼Œæœ€å¥½åˆ†é…å¤šç‚¹æ ¸å¿ƒæ•°ï¼Œå¦‚4ä¸ªï¼‰ #æ³¨æ„é€šå¸¸è¦æ±‚ç³»ç»Ÿçš„ç£ç›˜å‰©ä½™ç©ºé—´ä¸ä½ŽäºŽ 25Gï¼Œå¦åˆ™ç¼–è¯‘äº§ç”Ÿçš„ä¸´æ—¶æ–‡ä»¶å¯èƒ½å¤ªå¤šå¯¼è‡´ç£ç›˜ä¸å¤Ÿç”¨è€Œç¼–è¯‘å¤±è´¥ï¼Œå»ºè®®æ€»ç£ç›˜å¤§å° 40G ä»¥ä¸Šï¼Œå½“ç„¶ï¼Œå¯¹äºŽç²¾ç®€é…ç½®æˆ–è€…åŽ»é™¤è°ƒè¯•ä¿¡æ¯çš„æƒ…å†µå¯¹ç£ç›˜ç©ºé—´è¦æ±‚æ›´ä½Žï¼ˆå¦‚é™¤è°ƒè¯•ä¿¡æ¯çš„æƒ…å†µå°±åªéœ€è¦ 10G å·¦å³å¤§å°çš„ç£ç›˜å‰©ä½™ç©ºé—´å³å¯ï¼‰ã€‚å‚è€ƒï¼šhttps://forums.debiancn.org/t/topic/3120make -j4#5ã€å®‰è£…å†…æ ¸make modules_install #å®‰è£…å†…æ ¸æ¨¡å—ï¼ˆå°†ç›¸åº”çš„å†…æ ¸æ¨¡å—å¤åˆ¶åˆ°ç³»ç»Ÿ/lib/modules/&lt;version&gt;ç›®å½•é‡Œï¼‰make install #å®‰è£…å†…æ ¸é•œåƒï¼ˆå°†.configï¼Œvmlinuzï¼Œinitrd.imgï¼ˆmake installæ—¶ä¼šè‡ªåŠ¨ç”¨mkinitramfsç”Ÿæˆï¼‰ï¼ŒSystem.mapå¤åˆ¶åˆ°ç³»ç»Ÿ/bootç›®å½•é‡Œï¼Œå¾—åˆ°vmlinuz-&lt;version&gt;ã€initrd.img-&lt;version&gt;ã€System.map-&lt;version&gt;ã€config-&lt;version&gt;ï¼‰#6ã€æ›´æ–°å¼•å¯¼åŠ è½½ç¨‹åºé…ç½®#ï¼ˆ1ï¼‰Ubuntu/Debian#æ›´æ–°å¼•å¯¼åŠ è½½ç¨‹åºï¼ˆå¯é€‰ï¼Œå³è®¾ç½®ä½¿ç”¨æ–°ç‰ˆå†…æ ¸å¯åŠ¨ï¼ŒUbuntu/Debian å®‰è£…æ–°ç‰ˆå†…æ ¸ä¼šè‡ªåŠ¨æ›´æ–°å¼•å¯¼åŠ è½½ç¨‹åºä¸ºæœ€æ–°å†…æ ¸ï¼‰ #é€šå¸¸æƒ…å†µä¸‹ï¼Œæ–°å†…æ ¸çš„ GRUB å¼•å¯¼é¡¹ä¼šè‡ªåŠ¨æˆä¸ºé»˜è®¤çš„å¼•å¯¼é¡¹ã€‚ #å¦‚æžœéœ€è¦ä½¿ç”¨å…¶ä»–ç‰ˆæœ¬å†…æ ¸å¯é€šè¿‡æ‰§è¡Œï¼šgrep 'menuentry' /boot/grub/grub.cfg å‘½ä»¤æŸ¥çœ‹å·²å®‰è£…æ‰€æœ‰ç‰ˆæœ¬å†…æ ¸é¡ºåºï¼ˆä»Ž0å¼€å§‹ï¼Œé»˜è®¤æœ€é«˜ç‰ˆæœ¬åœ¨æœ€å‰é¢ï¼‰ï¼Œç„¶åŽä¿®æ”¹ /etc/default/grub ä¸­çš„ GRUB_DEFAULT å€¼ï¼ˆè®¾è¦ä¿®æ”¹çš„å†…æ ¸ç´¢å¼•é¡ºåºä¸º 2ï¼Œåˆ™ä¿®æ”¹ä¸ºï¼šGRUB_DEFAULT="1&gt; 2"ï¼‰ï¼Œæœ€åŽæ‰§è¡Œ update-grub å¹¶ reboot é‡å¯ç³»ç»Ÿå³å¯ã€‚å‚è€ƒï¼šhttps://www.cnblogs.com/zzugyl/p/14588114.html #å…³æœºé‡å¯æ—¶ä¸€èˆ¬ä¼šè¿›å…¥grubèœå•ï¼Œåœ¨èœå•ä¸­å¯ä»¥é€‰æ‹©æŒ‡å®šç‰ˆæœ¬çš„å†…æ ¸å¯åŠ¨ï¼Œå¦‚æžœå¯åŠ¨æ—¶è·³è¿‡ä¸å±•ç¤ºgrubèœå•ï¼Œåˆ™å¯ä»¥åœ¨å¯åŠ¨æ—¶æŒ‰ä½Shifté”®æˆ–Escé”®ï¼Œç›´åˆ°å‡ºçŽ°GRUBèœå•ã€‚update-grub#ï¼ˆ2ï¼‰CentOS/RedHat#æ›´æ–°å¼•å¯¼åŠ è½½ç¨‹åºï¼ˆå¿…é€‰ï¼Œå³è®¾ç½®ä½¿ç”¨æ–°ç‰ˆå†…æ ¸å¯åŠ¨ï¼ŒCentOS/RedHat å®‰è£…æ–°ç‰ˆå†…æ ¸ä¸ä¼šè‡ªåŠ¨æ›´æ–°å¼•å¯¼åŠ è½½ç¨‹åºä¸ºæœ€æ–°å†…æ ¸ï¼‰ #å¦‚æžœéœ€è¦ä½¿ç”¨å…¶ä»–ç‰ˆæœ¬å†…æ ¸å¯é€šè¿‡æ‰§è¡Œï¼šegrep ^menuentry /etc/grub2.cfg | cut -f 2 -d \' å‘½ä»¤æŸ¥çœ‹å·²å®‰è£…æ‰€æœ‰ç‰ˆæœ¬å†…æ ¸é¡ºåºï¼ˆä»Ž0å¼€å§‹ï¼Œé»˜è®¤æœ€é«˜ç‰ˆæœ¬åœ¨æœ€å‰é¢ï¼‰grub2-set-default 0grub2-mkconfig -o /boot/grub2/grub.cfg #ç”¨äºŽä¼ ç»Ÿçš„BIOSå¼•å¯¼#grub2-mkconfig -o /boot/efi/EFI/centos/grub.cfg #ç”¨äºŽUEFIå¼•å¯¼#7ã€å¯æœåŠ¡å™¨ä»¥ä½¿æ–°ç‰ˆå†…æ ¸ç”Ÿæ•ˆï¼ˆå¿…é€‰ï¼‰reboot#8ã€å¸è½½ç¼–è¯‘å®‰è£…çš„å†…æ ¸ï¼ˆå¦‚éœ€è¦ï¼‰ #å°† &lt;version&gt; æ›¿æ¢ä¸ºå¯¹åº”å†…æ ¸ç‰ˆæœ¬å·#åˆ é™¤å†…æ ¸æ˜ åƒæ–‡ä»¶rm /boot/vmlinuz-&lt;version&gt;rm /boot/initrd.img-&lt;version&gt;rm /boot/System.map-&lt;version&gt;rm /boot/config-&lt;version&gt;#åˆ é™¤æ¨¡å—æ–‡ä»¶ #æç¤ºï¼šå®žé™…æ¨¡å—æ–‡ä»¶åœ¨ /usr/lib/modules ç›®å½•é‡Œï¼Œç”±äºŽ /lib ç›®å½•æ˜¯ /usr/lib ç›®å½•çš„ç¬¦å·é“¾æŽ¥ï¼Œæ•…å¯ä»¥é€šè¿‡åˆ é™¤ /lib é‡Œçš„å†…å®¹ä»Žè€Œå®žçŽ°åˆ é™¤ /usr/lib é‡Œçš„å†…å®¹rm -r /lib/modules/&lt;version&gt;##æ›´æ–°å¼•å¯¼åŠ è½½ç¨‹åºé…ç½®#Debian ç³»åˆ—ç³»ç»Ÿæ›´æ–°å¼•å¯¼åŠ è½½ç¨‹åºé…ç½®ï¼ˆå¯é€‰ï¼‰update-grub#RedHat ç³»åˆ—ç³»ç»Ÿæ›´æ–°å¼•å¯¼åŠ è½½ç¨‹åºé…ç½®ï¼ˆå¿…é€‰ï¼‰grub2-set-default 0grub2-mkconfig -o /boot/grub2/grub.cfg #ç”¨äºŽä¼ ç»Ÿçš„BIOSå¼•å¯¼#grub2-mkconfig -o /boot/efi/EFI/centos/grub.cfg #ç”¨äºŽUEFIå¼•å¯¼#é‡å¯rebootæç¤ºï¼šï¼ˆ1ï¼‰Ubuntu ç¼–è¯‘æŠ¥é”™æç¤ºï¼šmake[2]: *** No rule to make target 'debian/canonical-certs.pem', needed by 'certs/x509_certificate_list'ï¼ˆæ³¨æ„è¿™ä¸ªæŠ¥é”™æç¤ºå¯èƒ½æ˜¯å‡ºçŽ°åœ¨ä¸Šæ–‡ï¼Œåº”è¯¥ç»ˆç«¯ä¸­æœç´¢æŸ¥è¯¢ä¸€ä¸‹ï¼‰ï¼Œè§£å†³åŠžæ³•å¦‚ä¸‹ï¼š1234&gt;scripts/config --set-str SYSTEM_TRUSTED_KEYS ""&gt;scripts/config --set-str SYSTEM_REVOCATION_KEYS ""&gt;##å¯¹äºŽUbuntuï¼Œæœ€å¥½åœ¨ make menuconfig æ‰§è¡Œå®ŒæˆåŽè¿›è¡Œå¦‚ä¸Šæ“ä½œï¼Œé˜²æ­¢ç¼–è¯‘æŠ¥é”™ä»¥ä¸Šå‘½ä»¤æ‰§è¡ŒåŽï¼Œç„¶åŽé‡æ–°ç¼–è¯‘ã€‚å‚è€ƒï¼šhttps://askubuntu.com/questions/1329538/compiling-the-kernel-5-11-11ã€‚ï¼ˆ2ï¼‰Ubuntu ç¼–è¯‘å®‰è£…å†…æ ¸å®Œæˆå¹¶é‡å¯åŽï¼Œå‡ºçŽ°é”™è¯¯ï¼šend Kernel panic - not syncing: System is deadlocked on memoryï¼Œè¿™ä¸ªåŽŸå› é€šå¸¸æ˜¯å› ä¸ºç¼–è¯‘çš„å†…æ ¸è¿‡å¤§ï¼Œéœ€è¦æ›´å¤šçš„å†…å­˜åŠ è½½ã€‚ä¸´æ—¶è§£å†³æ–¹æ³•ï¼šåœ¨è™šæ‹Ÿæœºé€‰é¡¹ä¸­å°†å†…å­˜æ”¹å¤§ä¸€äº›ï¼Œæˆ‘æ”¹æˆ 4GB å†é‡å¯å°±å¯ä»¥äº†ã€‚å½»åº•è§£å†³åŠžæ³•ï¼šå‡å°å†…æ ¸å¤§å°ï¼Œé€šå¸¸æ˜¯åŽ»é™¤å†…æ ¸çš„è°ƒè¯•ä¿¡æ¯å³å¯ã€‚ï¼ˆ3ï¼‰ç¼–è¯‘çš„å†…æ ¸é€šå¸¸éƒ½é»˜è®¤å¸¦æœ‰è°ƒè¯•ä¿¡æ¯ï¼Œé‚£ä¹ˆå†…æ ¸å’Œæ¨¡å—çš„æ–‡ä»¶å°†ä¼šå¾ˆå¤§ï¼Œå ç”¨å¾ˆå¤šç£ç›˜ç©ºé—´ã€‚åŽ»é™¤è¿™äº›å†…æ ¸è°ƒè¯•ä¿¡æ¯ï¼Œå¯æœ‰æ•ˆå‡å°å†…æ ¸æ¨¡å—å’Œå†…æ ¸å¤§å°ï¼ŒèŠ‚çœå­˜å‚¨ç©ºé—´ã€‚å®žçŽ°æ–¹å¼å¦‚ä¸‹ï¼šæ–¹å¼1ï¼šå¦‚æžœå°šæœªç¼–è¯‘ï¼Œåˆ™å¯ä»¥åœ¨ make menuconfig æ—¶ï¼Œåœ¨äº¤äº’èœå•ç•Œé¢ä¸­é€‰æ‹©å…³é—­è°ƒè¯•ä¿¡æ¯ï¼Œèœå•å¯¼èˆªï¼šKernel hacking -&gt; Compile-time checks and compiler options -&gt; Debug information (Disable debug information) -&gt; Disable debug information inkingï¼ŒæŒ‰ç©ºæ ¼é€‰æ‹©è®¾ç½®ä¸º X è¡¨ç¤ºå…³é—­è°ƒè¯•ä¿¡æ¯ï¼Œç„¶åŽé€‰æ‹© Save -&gt; OKã€‚æ–¹å¼2ï¼šå¦‚æžœå°šæœªç¼–è¯‘ï¼Œåˆ™å¯ä»¥åœ¨ make menuconfig ç”Ÿæˆ.config æ–‡ä»¶åŽï¼Œä¿®æ”¹å…¶è°ƒè¯•å‚æ•°æ¥åŽ»é™¤è°ƒè¯•ä¿¡æ¯ï¼Œç„¶åŽå†ç¼–è¯‘ã€‚ï¼ˆè¿™ç§æ–¹å¼ç¼–è¯‘å‡ºæ¥çš„å†…æ ¸å’Œæ¨¡å—éƒ½ä¼šå ç”¨æ›´å°çš„ç©ºé—´ï¼‰12345678&gt;scripts/config --undefine GDB_SCRIPTS&gt;scripts/config --undefine DEBUG_INFO&gt;scripts/config --undefine DEBUG_INFO_SPLIT&gt;scripts/config --undefine DEBUG_INFO_REDUCED&gt;scripts/config --undefine DEBUG_INFO_COMPRESSED&gt;scripts/config --set-val DEBUG_INFO_NONE y&gt;scripts/config --set-val DEBUG_INFO_DWARF5 n&gt;scripts/config --disable DEBUG_INFO_DWARF_TOOLCHAIN_DEFAULTå‚è€ƒï¼šhttps://superuser.com/questions/925079/compile-linux-kernel-deb-pkg-target-without-generating-dbg-packageæ–¹å¼3ï¼šå¦‚æžœå·²ç»ç¼–è¯‘å¾—åˆ°å¸¦æœ‰è°ƒè¯•ä¿¡æ¯çš„å†…æ ¸å’Œæ¨¡å—äº†ï¼Œé‚£ä¹ˆå¯ä»¥åœ¨å®‰è£…å†…æ ¸å’Œå†…æ ¸æ¨¡å—æ—¶åŠ ä¸Š INSTALL_MOD_STRIP=1 å‚æ•°æ¥å‰¥ç¦»è°ƒè¯•ä¿¡æ¯ï¼Œå‡å°å†…æ ¸æ¨¡å—å’Œå†…æ ¸å¤§å°ï¼ŒèŠ‚çœå­˜å‚¨ç©ºé—´ã€‚123&gt;#å®‰è£…æ—¶æŒ‡å®š INSTALL_MOD_STRIP=1 å¯å‰¥ç¦»è°ƒè¯•ä¿¡æ¯ï¼Œå‡å°å†…æ ¸æ¨¡å—å’Œå†…æ ¸å¤§å°ï¼ŒèŠ‚çœå­˜å‚¨ç©ºé—´&gt;make INSTALL_MOD_STRIP=1 modules_install&gt;make INSTALL_MOD_STRIP=1 installï¼ˆ4ï¼‰æ›´å¤šé—®é¢˜å’Œè§£å†³åŠžæ³•ï¼šhttps://blog.51cto.com/u_15127511/4320481Â¶å‚è€ƒUbuntu22.04 ç¼–è¯‘å†…æ ¸Ubuntu18.04 ç¼–è¯‘å†…æ ¸5.4.0ç¼–è¯‘Ubuntu 20.04å†…æ ¸ä»£ç https://www.youtube.com/watch?v=uJ4HFAmOQCM ï¼ˆUbuntu æ›´æ–°å†…æ ¸ï¼‰https://www.youtube.com/watch?v=TVmQhwSWuiM ï¼ˆCentOS æ›´æ–°å†…æ ¸ï¼Œå« NTFS æ”¯æŒï¼‰Â¶5. æœåŠ¡ç®¡ç†Â¶1ï¼‰æœåŠ¡ç›¸å…³æ¦‚å¿µæœåŠ¡(service) æ˜¯ä¸€ç§å¼€æœºè‡ªå¯åŠ¨çš„åŽå°è¿è¡Œç¨‹åºï¼Œä¹Ÿç§°ä¸ºå®ˆæŠ¤è¿›ç¨‹ï¼ˆè¿è¡Œä¸­çš„ç¨‹åºå°±å«è¿›ç¨‹ï¼‰ã€‚é€šå¸¸ä¼šåœ¨ç³»ç»Ÿå¯åŠ¨æ—¶è‡ªåŠ¨è¿è¡Œï¼Œå¹¶ä¸€ç›´ä¿æŒè¿è¡ŒçŠ¶æ€ï¼Œä»¥ä¾¿ç”¨æˆ·å’Œå…¶ä»–ç¨‹åºå¯ä»¥éšæ—¶ä½¿ç”¨ã€‚å¸¸è§çš„æœåŠ¡ç¨‹åºæœ‰ sshdã€mysqldã€httpd ç­‰ã€‚ðŸ’â€â™‚ ç¨‹åºçš„è¿è¡Œæ¨¡å¼ï¼šè®¡ç®—æœºç¨‹åºçš„è¿è¡Œæ¨¡å¼æ˜¯æŒ‡ç¨‹åºåœ¨è®¡ç®—æœºç³»ç»Ÿä¸­çš„è¿è¡Œæ–¹å¼å’ŒçŠ¶æ€ã€‚æ ¹æ®ç¨‹åºçš„è¿è¡Œæ¨¡å¼ä¸åŒï¼Œå¯ä»¥åˆ†ä¸ºä»¥ä¸‹å‡ ç§ï¼šå‰å°æ¨¡å¼å‰å°æ¨¡å¼ï¼ˆForeground Modeï¼‰æ˜¯æŒ‡ç¨‹åºéœ€è¦åœ¨ç”¨æˆ·ç•Œé¢ä¸Šæ˜¾ç¤ºè¾“å‡ºä¿¡æ¯ï¼Œç­‰å¾…ç”¨æˆ·è¾“å…¥æˆ–å“åº”æ“ä½œçš„æ¨¡å¼ã€‚è¿™äº›ç¨‹åºè¿è¡Œæ—¶ä¼šå ç”¨å½“å‰ç»ˆç«¯æˆ–å›¾å½¢ç•Œé¢çš„å±å¹•ç©ºé—´ï¼Œå¹¶ä¸”éšç€ç”¨æˆ·çš„æ³¨é”€æˆ–å…³é—­ç»ˆç«¯è€Œç»“æŸã€‚ä¾‹å¦‚ï¼Œæ–‡æœ¬ç¼–è¾‘å™¨ã€Web æµè§ˆå™¨ã€éŸ³ä¹æ’­æ”¾å™¨ç­‰éƒ½æ˜¯å‰å°æ¨¡å¼ä¸‹è¿è¡Œçš„ç¨‹åºã€‚åŽå°æ¨¡å¼åŽå°æ¨¡å¼ï¼ˆBackground Modeï¼‰æ˜¯æŒ‡ç¨‹åºä¸éœ€è¦åœ¨ç”¨æˆ·ç•Œé¢ä¸Šæ˜¾ç¤ºè¾“å‡ºä¿¡æ¯ï¼Œå®ƒä»¬ä¼šåœ¨ç³»ç»ŸåŽå°é»˜é»˜åœ°æ‰§è¡Œä»»åŠ¡ï¼Œä¸ä¼šå ç”¨å½“å‰ç»ˆç«¯æˆ–å›¾å½¢ç•Œé¢çš„å±å¹•ç©ºé—´ï¼Œå¹¶ä¸”åœ¨ç”¨æˆ·æ³¨é”€æˆ–å…³é—­ç»ˆç«¯æ—¶ä»ç„¶å¯ä»¥ç»§ç»­è¿è¡Œã€‚ä¾‹å¦‚ï¼ŒæœåŠ¡ç¨‹åºã€å®ˆæŠ¤è¿›ç¨‹ã€å®šæ—¶ä»»åŠ¡ç­‰éƒ½æ˜¯åŽå°æ¨¡å¼ä¸‹è¿è¡Œçš„ç¨‹åºã€‚å®ˆæŠ¤è¿›ç¨‹æ¨¡å¼å®ˆæŠ¤è¿›ç¨‹æ¨¡å¼ï¼ˆDaemon Modeï¼‰ï¼Œä¹Ÿç§°ä¸ºæœåŠ¡æ¨¡å¼ï¼ˆService Modeï¼‰ï¼Œæ˜¯ä¸€ç§ç‰¹æ®Šçš„åŽå°æ¨¡å¼ï¼Œåœ¨ç³»ç»Ÿå¯åŠ¨æ—¶è‡ªåŠ¨å¯åŠ¨å¹¶ä¸€ç›´ä¿æŒè¿è¡ŒçŠ¶æ€ï¼Œä»¥æä¾›æŸç§ç‰¹å®šçš„æœåŠ¡æˆ–åŠŸèƒ½ã€‚å®ˆæŠ¤è¿›ç¨‹é€šå¸¸ä¼šç›‘å¬æŸä¸ªç½‘ç»œç«¯å£æˆ– Unix å¥—æŽ¥å­—ï¼Œç­‰å¾…å®¢æˆ·ç«¯è¿žæŽ¥å¹¶å¤„ç†è¯·æ±‚ã€‚ä¾‹å¦‚ï¼ŒWeb æœåŠ¡å™¨ã€æ•°æ®åº“æœåŠ¡å™¨ã€é‚®ä»¶æœåŠ¡å™¨ç­‰éƒ½æ˜¯å®ˆæŠ¤è¿›ç¨‹æ¨¡å¼ä¸‹è¿è¡Œçš„ç¨‹åºã€‚åµŒå…¥å¼æ¨¡å¼åµŒå…¥å¼æ¨¡å¼ï¼ˆEmbedded Modeï¼‰æ˜¯æŒ‡ç¨‹åºè¢«åµŒå…¥åˆ°å…¶ä»–ç¨‹åºæˆ–ç³»ç»Ÿä¸­æ‰§è¡Œï¼Œä»¥å®Œæˆç‰¹å®šçš„ä»»åŠ¡æˆ–æä¾›æœåŠ¡ã€‚åµŒå…¥å¼æ¨¡å¼ä¸‹è¿è¡Œçš„ç¨‹åºé€šå¸¸å…·æœ‰è½»é‡åŒ–ã€é«˜æ•ˆæ€§å’Œå®žæ—¶æ€§ç­‰ç‰¹ç‚¹ï¼Œä¾‹å¦‚ï¼Œæ“ä½œç³»ç»Ÿå†…æ ¸ã€é©±åŠ¨ç¨‹åºã€åµŒå…¥å¼åº”ç”¨ç¨‹åºç­‰éƒ½æ˜¯åµŒå…¥å¼æ¨¡å¼ä¸‹è¿è¡Œçš„ç¨‹åºã€‚æ€»ä¹‹ï¼Œè®¡ç®—æœºç¨‹åºçš„è¿è¡Œæ¨¡å¼ä¸Žç¨‹åºæœ¬èº«çš„åŠŸèƒ½ã€ç‰¹ç‚¹å’Œç”¨é€”å¯†åˆ‡ç›¸å…³ã€‚ä¸åŒçš„è¿è¡Œæ¨¡å¼å¯ä»¥æ»¡è¶³ä¸åŒçš„éœ€æ±‚å’Œåœºæ™¯ï¼Œç†è§£è¿™äº›è¿è¡Œæ¨¡å¼å¯¹äºŽç¨‹åºè®¾è®¡ã€å¼€å‘å’Œç®¡ç†éƒ½æœ‰é‡è¦ä½œç”¨ã€‚ðŸ’â€â™‚ å…³äºŽæœåŠ¡ç¨‹åºçš„è¡¥å……è¯´æ˜Žï¼šåº”ç”¨ç¨‹åºæ˜¯å¦ä¸ºæœåŠ¡ç¨‹åºï¼Œå–å†³äºŽå…¶åœ¨ç³»ç»Ÿä¸­çš„è¿è¡Œæ¨¡å¼æ˜¯å¦æ˜¯å®ˆæŠ¤è¿›ç¨‹æ¨¡å¼ã€‚ä¹Ÿå°±æ˜¯è¯´åªéœ€è®¾ç½®ä¸ºå®ˆæŠ¤è¿›ç¨‹æ¨¡å¼çš„åº”ç”¨ç¨‹åºæ‰æ˜¯æœåŠ¡ç¨‹åºã€‚æœ‰äº›åº”ç”¨ç¨‹åºåœ¨å®‰è£…æ—¶ä¼šè‡ªåŠ¨è®¾ç½®ä¸ºå®ˆæŠ¤è¿›ç¨‹æ¨¡å¼ä»¥å®žçŽ°å¼€æœºç¨‹åºè‡ªå¯åŠ¨ï¼Œå¹¶ç›‘å¬æŸäº›ç«¯å£ä»¥ä¾›ç”¨æˆ·è¯·æ±‚å¤„ç†ã€‚ä¾‹å¦‚é€šè¿‡åŒ…ç®¡ç†å™¨é»˜è®¤å®‰è£…æ–¹å¼å®‰è£…sshdæ—¶ï¼ˆsshdå±žäºŽopenssh-serverè½¯ä»¶åŒ…çš„ç»„ä»¶ï¼‰ï¼Œä¼šè‡ªåŠ¨è®¾ç½®ä¸ºå®ˆæŠ¤è¿›ç¨‹æ¨¡å¼ä»¥å®žçŽ°å¼€æœºç¨‹åºè‡ªå¯åŠ¨ï¼Œå¹¶ç›‘å¬é»˜è®¤çš„22ç«¯å£ä»¥ä¾›ç”¨æˆ·é€šè¿‡sshè¿œç¨‹ç™»å½•ã€‚Â¶2ï¼‰å¯åŠ¨æ¡†æž¶ç›¸å…³æ¦‚å¿µå¯åŠ¨æ¡†æž¶ï¼ˆBoot frameworkï¼‰æ˜¯è®¡ç®—æœºæ“ä½œç³»ç»Ÿå¯åŠ¨æ—¶ç”¨äºŽç®¡ç†å’ŒæŽ§åˆ¶æœåŠ¡ã€ç¨‹åºå’Œè¿›ç¨‹çš„ä¸€ç»„å·¥å…·å’Œæœºåˆ¶ã€‚ç®€å•çš„è¯´ï¼šå¯åŠ¨æ¡†æž¶å°±æ˜¯ä¸€ç»„æœåŠ¡ç®¡ç†å·¥å…·ã€‚å®ƒèƒ½å¤Ÿå¸®åŠ©ç”¨æˆ·åœ¨ç³»ç»Ÿå¯åŠ¨è¿‡ç¨‹ä¸­åŠ è½½å’Œå¯åŠ¨å¿…è¦çš„æœåŠ¡å’Œç¨‹åºï¼Œå¹¶ç¡®ä¿è¿™äº›æœåŠ¡å’Œç¨‹åºèƒ½å¤Ÿä»¥æ­£ç¡®çš„é¡ºåºå’Œæ–¹å¼è¿è¡Œã€‚å¯åŠ¨æ¡†æž¶åŒ…å«æœ‰ä¸€äº›ç®¡ç†å·¥å…·ç”¨äºŽå®žçŽ°ï¼šæŸ¥çœ‹æœåŠ¡è¿è¡ŒçŠ¶æ€ã€æŸ¥çœ‹æœåŠ¡è‡ªå¯åŠ¨çŠ¶æ€ã€å¯åŠ¨æœåŠ¡ã€å…³é—­æœåŠ¡ã€å¼€å¯æœåŠ¡è‡ªå¯åŠ¨ï¼ˆå³æ‰€è°“çš„è®¾ç½®å¼€æœºè‡ªå¯åŠ¨ï¼‰ã€å…³é—­æœåŠ¡è‡ªå¯åŠ¨ ç­‰åŠŸèƒ½ã€‚åœ¨ Linux æ“ä½œç³»ç»Ÿä¸­ï¼Œå¯åŠ¨æ¡†æž¶é€šå¸¸è¢«ç§°ä¸ºå¼•å¯¼æ¡†æž¶ï¼ˆboot loaderï¼‰ï¼Œå…¶ä½œç”¨ç±»ä¼¼äºŽ Windows ç³»ç»Ÿä¸­çš„ BOOTMGR æˆ– NTLDRã€‚å¯åŠ¨æ¡†æž¶é€šå¸¸ä¼šåœ¨æ“ä½œç³»ç»Ÿå†…æ ¸åˆå§‹åŒ–ä¹‹åŽè‡ªåŠ¨å¯åŠ¨ï¼Œå¹¶è´Ÿè´£åŠ è½½å’Œç®¡ç†å…¶ä»–æœåŠ¡å’Œç¨‹åºã€‚å®ƒä»¬è¿˜ä¼šæ ¹æ®é¢„å®šä¹‰çš„è¿è¡Œçº§åˆ«æˆ–ç”¨æˆ·è‡ªå®šä¹‰çš„é…ç½®æ¥æŽ§åˆ¶æœ‰å“ªäº›æœåŠ¡ã€ç¨‹åºå’Œè¿›ç¨‹éœ€è¦åœ¨ç³»ç»Ÿå¯åŠ¨æ—¶è‡ªåŠ¨è¿è¡Œã€‚å¸¸è§çš„å¯åŠ¨æ¡†æž¶åŒ…æ‹¬ï¼šSysVinitã€Upstartã€Systemd å’Œ OpenRC ç­‰ã€‚SysVinitï¼šSysVinit æ˜¯ä¸€ç§è¾ƒæ—©çš„ Linux å¯åŠ¨æ¡†æž¶ï¼Œå®ƒä½¿ç”¨ /etc/init.d/ ç›®å½•ä¸‹çš„è„šæœ¬æ–‡ä»¶æ¥æŽ§åˆ¶ç³»ç»ŸæœåŠ¡çš„å¯åŠ¨å’Œåœæ­¢ã€‚åœ¨ SysVinit ä¸­ï¼ŒæœåŠ¡çš„è¿è¡ŒçŠ¶æ€ä¸Žç³»ç»Ÿè¿è¡Œçº§åˆ«ï¼ˆrunlevelï¼‰ç›´æŽ¥å…³è”ï¼Œç”¨æˆ·å¯ä»¥ä½¿ç”¨ service å’Œ chkconfig ç­‰å‘½ä»¤æ¥ç®¡ç†æœåŠ¡ã€‚Upstartï¼šUpstart æ˜¯ Canonical å…¬å¸å¼€å‘çš„ä¸€ç§ Linux å¯åŠ¨æ¡†æž¶ï¼Œå…¶è®¾è®¡ç›®æ ‡æ˜¯æé«˜å¯åŠ¨é€Ÿåº¦å¹¶æ”¹å–„ç³»ç»Ÿäº‹ä»¶å¤„ç†ã€‚Upstart ä½¿ç”¨åŸºäºŽäº‹ä»¶çš„æ¨¡åž‹ä»£æ›¿äº†ä¼ ç»Ÿçš„ SysVinit æ¨¡åž‹ï¼Œå¹¶æ”¯æŒè‡ªåŠ¨é‡å¯ã€æ•…éšœæ¢å¤å’Œè¿›ç¨‹ç›‘æŽ§ç­‰åŠŸèƒ½ã€‚Systemdï¼šSystemd æ˜¯ä¸€ç§ç”± Lennart Poettering å¼€å‘çš„ Linux å¯åŠ¨æ¡†æž¶ï¼Œå·²ç»æˆä¸ºè®¸å¤šä¸»æµ Linux å‘è¡Œç‰ˆçš„é»˜è®¤å¯åŠ¨æ¡†æž¶ã€‚ä¸Ž SysVinit ä¸åŒï¼ŒSystemd ä½¿ç”¨å•ä¸€çš„ .service æ–‡ä»¶æ¥æè¿°æœåŠ¡ï¼Œå¹¶æ”¯æŒä¾èµ–å…³ç³»ã€å¹¶è¡Œå¯åŠ¨ã€å»¶è¿Ÿå¯åŠ¨å’Œæ—¥å¿—è®°å½•ç­‰åŠŸèƒ½ã€‚ç”¨æˆ·å¯ä»¥ä½¿ç”¨ systemctl å‘½ä»¤æ¥ç®¡ç†æœåŠ¡å’ŒæŽ§åˆ¶ç³»ç»ŸçŠ¶æ€ã€‚OpenRCï¼šOpenRC æ˜¯ Gentoo Linux å‘å¸ƒç‰ˆä½¿ç”¨çš„ä¸€ç§ Linux å¯åŠ¨æ¡†æž¶ï¼Œä¹Ÿå¯ä»¥åœ¨å…¶ä»– Linux å‘è¡Œç‰ˆä¸­ä½¿ç”¨ã€‚OpenRC ä½¿ç”¨ /etc/init.d/ ç›®å½•ä¸‹çš„è„šæœ¬æ–‡ä»¶æ¥æŽ§åˆ¶æœåŠ¡çš„å¯åŠ¨å’Œåœæ­¢ï¼Œå¹¶æ”¯æŒå¹¶è¡Œå¯åŠ¨ã€ä¾èµ–å…³ç³»å’Œè‡ªå®šä¹‰è¿è¡Œçº§åˆ«ç­‰åŠŸèƒ½ã€‚æç¤ºï¼šåœ¨ CentOS7.0 åŽ å¾ˆå¤šåº”ç”¨ç¨‹åºä¸å†ä½¿ç”¨ SysVinit è€Œæ˜¯ä½¿ç”¨ Systemd æ¥ç®¡ç†æœåŠ¡ã€‚Â¶3ï¼‰SysVinit æœåŠ¡ç®¡ç†Â¶ç®€è¦æ¦‚è¿°SysVinit æ˜¯ä¸€ç§è¾ƒæ—©çš„ Linux å¯åŠ¨æ¡†æž¶ï¼Œå®ƒä½¿ç”¨ /etc/init.d/ ç›®å½•ä¸‹çš„è„šæœ¬æ–‡ä»¶æ¥æŽ§åˆ¶ç³»ç»ŸæœåŠ¡çš„å¯åŠ¨å’Œåœæ­¢ã€‚åœ¨ SysVinit ä¸­ï¼ŒæœåŠ¡çš„è¿è¡ŒçŠ¶æ€ä¸Žç³»ç»Ÿè¿è¡Œçº§åˆ«ï¼ˆrunlevelï¼‰ç›´æŽ¥å…³è”ï¼Œç”¨æˆ·å¯ä»¥ä½¿ç”¨ service å’Œ chkconfig ç­‰å‘½ä»¤æ¥ç®¡ç†æœåŠ¡ã€‚Â¶Linuxç³»ç»Ÿè¿è¡Œçº§åˆ«çš„æ¦‚å¿µåœ¨SysVinitä¸­æœ‰Linuxç³»ç»Ÿè¿è¡Œçº§åˆ«çš„æ¦‚å¿µï¼ŒLinuxç³»ç»Ÿè¿è¡Œçº§åˆ«æŒ‡çš„æ˜¯ç³»ç»Ÿå¯åŠ¨æ—¶æ‰€å¤„çš„è¿è¡ŒçŠ¶æ€ï¼Œå®ƒå†³å®šäº†å“ªäº›æœåŠ¡ã€è¿›ç¨‹å’Œèµ„æºä¼šè¢«å¯åŠ¨æˆ–å…³é—­ã€‚åœ¨ Linux ä¸­ï¼Œé€šå¸¸ä½¿ç”¨ SysV åˆå§‹åŒ–ç³»ç»Ÿæ¥ç®¡ç†è¿è¡Œçº§åˆ«ã€‚SysV åˆå§‹åŒ–ç³»ç»Ÿå…¶æä¾›äº† 7 ä¸ªè¿è¡Œçº§åˆ«ï¼Œå¦‚ä¸‹ï¼šè¿è¡Œçº§åˆ« 0ï¼šç³»ç»ŸåœæœºçŠ¶æ€ï¼Œå³å…³æœºã€‚è¿è¡Œçº§åˆ« 1ï¼šå•ç”¨æˆ·æ¨¡å¼ï¼Œåªæœ‰ root ç”¨æˆ·å¯ä»¥ç™»å½•ç»ˆç«¯ï¼Œé€šå¸¸ç”¨äºŽç³»ç»Ÿä¿®å¤æˆ–æ¢å¤ã€‚è¿è¡Œçº§åˆ« 2ï¼šå¤šç”¨æˆ·æ¨¡å¼ï¼Œä½†ä¸å¸¦ NFS åŠŸèƒ½ã€‚è¿è¡Œçº§åˆ« 3ï¼šå®Œå…¨çš„å¤šç”¨æˆ·æ¨¡å¼ï¼Œé€šå¸¸æ˜¯æ”¯æŒç½‘ç»œè¿žæŽ¥çš„æœåŠ¡å™¨æ¨¡å¼ã€‚è¿è¡Œçº§åˆ« 4ï¼šä¿ç•™ï¼Œæœªä½¿ç”¨ã€‚è¿è¡Œçº§åˆ« 5ï¼šå®Œå…¨çš„å¤šç”¨æˆ·å›¾å½¢åŒ–æ¨¡å¼ï¼Œé€šå¸¸æ˜¯æ¡Œé¢åº”ç”¨ç¨‹åºè¿è¡Œçš„æ¨¡å¼ã€‚è¿è¡Œçº§åˆ« 6ï¼šç³»ç»Ÿé‡å¯ï¼Œå³é‡æ–°å¯åŠ¨æ“ä½œç³»ç»Ÿã€‚åœ¨ Linux ä¸­ï¼ŒLinux ç³»ç»Ÿçš„é»˜è®¤è¿è¡Œçº§åˆ«é€šå¸¸æ˜¯ 3 æˆ– 5ï¼Œå…·ä½“å–å†³äºŽ Linux å‘è¡Œç‰ˆå’Œç³»ç»Ÿé…ç½®ã€‚å¦‚æžœç”¨æˆ·éœ€è¦ä¿®æ”¹ç³»ç»Ÿå¯åŠ¨æ—¶é»˜è®¤çš„è¿è¡Œçº§åˆ«ï¼Œå¯å¯¹ /etc/inittab æ–‡ä»¶ä¸­çš„ initdefault å‚æ•°è¿›è¡Œé…ç½®ã€‚1234#ä¿®æ”¹ç³»ç»Ÿå¯åŠ¨æ—¶é»˜è®¤çš„è¿è¡Œçº§åˆ«ã€‚é…ç½®initdefaultå‚æ•°vi /etc/inittab#æŸ¥çœ‹å½“å‰ç³»ç»Ÿçš„è¿è¡Œçº§åˆ«runlevelÂ¶å¸¸ç”¨å‘½ä»¤ï¼ˆservice å’Œ chkconfigã€update-rc.dï¼‰æç¤ºï¼šservice å‘½ä»¤åŽŸæœ¬æ˜¯ç”¨äºŽç®¡ç† SysVinit åˆå§‹åŒ–ç®¡ç†çš„æœåŠ¡ï¼Œä½†çŽ°åœ¨å¾ˆå¤šæ–°ç³»ç»Ÿæ”¹ç”¨ Systemd åˆå§‹åŒ–ç®¡ç†æœåŠ¡åŽï¼Œä¸ºäº†å…¼é¡¾ service çš„ä½¿ç”¨ä¹ æƒ¯ï¼Œä¹ŸåŒæ ·æ”¯æŒç”¨äºŽç®¡ç† Systemd å¯åŠ¨çš„æœåŠ¡ã€‚12345678910111213141516171819202122232425262728#æŸ¥çœ‹SysVinitç®¡ç†çš„æœåŠ¡service --status-all #æˆ–è€…ï¼šls -l /etc/init.d#å¯åŠ¨æœåŠ¡service æœåŠ¡å start#å…³é—­æœåŠ¡service æœåŠ¡å stop#é‡å¯æœåŠ¡service æœåŠ¡å restart#é‡è½½æœåŠ¡é…ç½®service æœåŠ¡å reload#æŸ¥çœ‹æœåŠ¡è¿è¡ŒçŠ¶æ€service æœåŠ¡å status#Debianç³»åˆ—ç³»ç»Ÿ#å¼€å¯æœåŠ¡è‡ªå¯åŠ¨ï¼ˆå³æ‰€è°“çš„è®¾ç½®å¼€æœºè‡ªå¯åŠ¨ï¼‰update-rc.d æœåŠ¡å defaults#å…³é—­æœåŠ¡è‡ªå¯åŠ¨ï¼ˆ-f: forceï¼‰update-rc.d -f æœåŠ¡å remove#Redhatç³»åˆ—ç³»ç»Ÿ#è®¾ç½®æœåŠ¡çš„è‡ªå¯åŠ¨çŠ¶æ€ï¼ˆå¯é€šè¿‡--levelæŒ‡å®šæŸè¿è¡Œçº§åˆ«ä¸‹æœåŠ¡çš„è‡ªå¯åŠ¨çŠ¶æ€ï¼Œä¸æŒ‡å®š--levelé€‰é¡¹åˆ™é»˜è®¤ä½œç”¨äºŽæ‰€æœ‰è¿è¡Œçº§åˆ«ï¼‰chkconfig --level &lt;level&gt; &lt;service_name&gt; &lt;on|off&gt; #å¦‚ï¼šchkconfig --level 3 httpd on#å¼€å¯æœåŠ¡è‡ªå¯åŠ¨ï¼ˆå³æ‰€è°“çš„è®¾ç½®å¼€æœºè‡ªå¯åŠ¨ï¼‰chkconfig æœåŠ¡å on#å…³é—­æœåŠ¡è‡ªå¯åŠ¨chkconfig æœåŠ¡å offserviceå‘½ä»¤è¯¦è§£service å‘½ä»¤æ˜¯ä¸€ç§ç”¨äºŽç®¡ç†ç³»ç»ŸæœåŠ¡çš„å·¥å…·ã€‚å®ƒå¯ä»¥å¯åŠ¨ã€åœæ­¢ã€é‡å¯ä»¥åŠæŸ¥è¯¢ç³»ç»ŸæœåŠ¡çš„çŠ¶æ€ï¼Œä½œç”¨äºŽ /etc/init.d ç›®å½•ä¸‹çš„æœåŠ¡è„šæœ¬ã€‚æ˜¯ä¸€ç§ç”¨äºŽç®¡ç†ç³»ç»ŸæœåŠ¡çš„å·¥å…·ã€‚å®ƒå¯ä»¥å¯åŠ¨ã€åœæ­¢ã€é‡å¯ä»¥åŠæŸ¥è¯¢ç³»ç»ŸæœåŠ¡çš„çŠ¶æ€ï¼Œä½œç”¨äºŽ /etc/init.d ç›®å½•ä¸‹çš„æœåŠ¡è„šæœ¬ã€‚åŸºæœ¬è¯­æ³•å¦‚ä¸‹ï¼š1&gt;service &lt;service_name&gt; &lt;action&gt;å…¶ä¸­ï¼Œ&lt;service_name&gt; è¡¨ç¤ºè¦æ“ä½œçš„æœåŠ¡åç§°ï¼Œä¾‹å¦‚ httpdã€sshd ç­‰ï¼›&lt;action&gt; è¡¨ç¤ºè¦æ‰§è¡Œçš„æ“ä½œï¼Œä¾‹å¦‚ startã€stopã€restartã€status ç­‰ã€‚chkconfigå‘½ä»¤è¯¦è§£chkconfig å‘½ä»¤æ˜¯ Linux ç³»ç»Ÿä¸­ç”¨äºŽç®¡ç† SysV åˆå§‹åŒ–è„šæœ¬çš„å‘½ä»¤ä¹‹ä¸€ã€‚å®ƒå¯ä»¥è®©ç”¨æˆ·æ–¹ä¾¿åœ°è®¾ç½®æŸä¸ªæœåŠ¡åœ¨ä¸åŒè¿è¡Œçº§åˆ«ä¸‹çš„å¯åŠ¨çŠ¶æ€ã€‚åŸºæœ¬è¯­æ³•å¦‚ä¸‹ï¼š1&gt;chkconfig --level &lt;level&gt; &lt;service_name&gt; &lt;on|off&gt;å…¶ä¸­ï¼Œ--level é€‰é¡¹è¡¨ç¤ºè¦è®¾ç½®çš„è¿è¡Œçº§åˆ«ï¼Œä¾‹å¦‚ 3 è¡¨ç¤ºå®Œå…¨çš„å¤šç”¨æˆ·æ¨¡å¼ï¼Œä¸æŒ‡å®š--levelé€‰é¡¹åˆ™é»˜è®¤ä½œç”¨äºŽæ‰€æœ‰è¿è¡Œçº§åˆ«ï¼›&lt;service_name&gt; è¡¨ç¤ºè¦æ“ä½œçš„æœåŠ¡åç§°ï¼›&lt;on|off&gt; è¡¨ç¤ºè¦æ‰§è¡Œçš„æ“ä½œï¼Œå³å°†æœåŠ¡è®¾ç½®ä¸ºå¯åŠ¨æˆ–åœæ­¢çŠ¶æ€ã€‚å®žçŽ°åŽŸç†ï¼šæ ¹æ®/etc/init.dç›®å½•çš„æœåŠ¡è„šæœ¬åˆ›å»ºç›¸åº”çš„ç¬¦å·é“¾æŽ¥ï¼ˆè½¯é“¾æŽ¥ï¼‰ï¼Œç„¶åŽæŠŠè¿™ä¸ªç¬¦å·é“¾æŽ¥æ”¾åˆ°è¡¨ç¤ºä¸åŒè¿è¡Œçº§åˆ«çš„ç›®å½•é‡Œï¼Œç³»ç»Ÿå¯åŠ¨æ—¶ SysV æ ¹æ®å½“å‰è¿è¡Œçº§åˆ«æƒ…å†µè¿è¡Œå¯¹åº”ç›®å½•é‡Œçš„æœåŠ¡è„šæœ¬ã€‚å¸¸è§„Linux å‘è¡Œç‰ˆä¼šæŠŠç¬¦å·é“¾æŽ¥ä¼šè¢«å­˜æ”¾åœ¨/etc/rcN.d ç›®å½•é‡Œï¼ŒRHEL ç­‰ä¸€äº›ç‰¹å®šçš„ Linux å‘è¡Œç‰ˆä¼šæŠŠç¬¦å·é“¾æŽ¥ä¼šè¢«å­˜æ”¾åœ¨/etc/rc.d/rcN.d ç›®å½•é‡Œã€‚å…¶ä¸­Nè¡¨ç¤ºè¿è¡Œçº§åˆ«ã€‚è¿™äº›é“¾æŽ¥æ–‡ä»¶é€šå¸¸ä»¥ K æˆ– S å­—æ¯å¼€å¤´ï¼ŒåŽé¢è·Ÿç€æœåŠ¡åç§°å’Œæ•°å­—åºåˆ—å·ï¼Œä¾‹å¦‚ K01httpd æˆ– S99sshdã€‚å…¶ä¸­ï¼ŒK è¡¨ç¤ºåœæ­¢æœåŠ¡ï¼ŒS è¡¨ç¤ºå¯åŠ¨æœåŠ¡ï¼Œæ•°å­—åºåˆ—å·è¡¨ç¤ºå¯åŠ¨æˆ–åœæ­¢çš„å…ˆåŽé¡ºåºã€‚ä¾‹å¦‚ï¼šå¦‚æžœæƒ³è¦åœ¨è¿è¡Œçº§åˆ« 3 ä¸­å¯åŠ¨ Apache æœåŠ¡ï¼Œå¯ä»¥å°† /etc/init.d/httpd å¤åˆ¶åˆ° /etc/rc3.d ç›®å½•ï¼Œå¹¶å°†å…¶é‡å‘½åä¸º S80httpdï¼Œå‘½ä»¤æ“ä½œå¦‚ï¼šcp /etc/init.d/httpd /etc/rc3.d/S80httpdã€‚è¿™æ ·ï¼Œåœ¨ç³»ç»Ÿè¿›å…¥è¿è¡Œçº§åˆ« 3 æ—¶ï¼Œå°±ä¼šè‡ªåŠ¨å¯åŠ¨ Apache æœåŠ¡ã€‚ðŸ’â€â™‚ æ³¨æ„ï¼šrestartå’Œreloadçš„åŒºåˆ«ï¼šrestart = stop + startï¼Œè€Œ reload = é‡æ–°è¯»å–é…ç½®æ–‡ä»¶Â¶è‡ªå®šä¹‰æœåŠ¡åœ¨ SysVinit å¯åŠ¨æ¡†æž¶ä¸‹è‡ªå®šä¹‰æœåŠ¡ï¼Œå¯ä»¥æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤è¿›è¡Œï¼šç¼–å†™æœåŠ¡è„šæœ¬ï¼ˆå¯åŠ¨è„šæœ¬ï¼‰åœ¨ /etc/init.d ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªæœåŠ¡è„šæœ¬æ–‡ä»¶ï¼Œæ–‡ä»¶åä¸ºè‡ªå®šä¹‰çš„æœåŠ¡åç§°ã€‚å¦‚ï¼š/etc/init.d/my_custom_service1234567891011121314151617181920212223#!/bin/bash# chkconfig: 345 99 10# description: My Custom Servicecase "$1" in start) /usr/bin/my_custom_service &amp; ;; stop) pkill my_custom_service ;; restart) $0 stop sleep 5 $0 start ;; *) echo "Usage: $0 &#123;start|stop|restart&#125;" exit 1 ;;esacexit 0å…¶ä¸­ï¼Œchkconfig: 345 99 10 æŒ‡å®šäº†è¿è¡Œçº§åˆ«å’Œå¯åŠ¨é¡ºåºã€‚345 è¡¨ç¤ºæœåŠ¡å°†åœ¨è¿è¡Œçº§åˆ« 3ã€4 å’Œ 5 ä¸­å¯åŠ¨ï¼›99 è¡¨ç¤ºå¯åŠ¨é¡ºåºï¼ˆæ•°å­—è¶Šå°è¶Šå…ˆå¯åŠ¨ï¼‰ï¼›10 è¡¨ç¤ºåœæ­¢é¡ºåºï¼ˆæ•°å­—è¶Šå¤§è¶ŠåŽåœæ­¢ï¼‰ã€‚å¯ç”¨æœåŠ¡ä½¿ç”¨ chkconfig å‘½ä»¤å°†æœåŠ¡æ·»åŠ åˆ°ç³»ç»Ÿå¯åŠ¨é¡¹ï¼Œå¹¶å°†å…¶è®¾ç½®ä¸ºå¼€æœºè‡ªåŠ¨å¯åŠ¨ã€‚123chmod +x /etc/init.d/my_custom_servicechkconfig --add my_custom_servicechkconfig my_custom_service onå¯åŠ¨æœåŠ¡ä½¿ç”¨ service å‘½ä»¤å¯åŠ¨æœåŠ¡ã€‚1service my_custom_service startÂ¶4ï¼‰Systemd æœåŠ¡ç®¡ç†Â¶ç®€è¦æ¦‚è¿°Systemd æ˜¯ä¸€ç§ç”± Lennart Poettering å¼€å‘çš„ Linux å¯åŠ¨æ¡†æž¶ï¼Œå·²ç»æˆä¸ºè®¸å¤šä¸»æµ Linux å‘è¡Œç‰ˆçš„é»˜è®¤å¯åŠ¨æ¡†æž¶ã€‚ä¸Ž SysVinit ä¸åŒï¼ŒSystemd ä½¿ç”¨å•ä¸€çš„ .service æ–‡ä»¶æ¥æè¿°æœåŠ¡ï¼Œå¹¶æ”¯æŒä¾èµ–å…³ç³»ã€å¹¶è¡Œå¯åŠ¨ã€å»¶è¿Ÿå¯åŠ¨å’Œæ—¥å¿—è®°å½•ç­‰åŠŸèƒ½ã€‚ç”¨æˆ·å¯ä»¥ä½¿ç”¨ systemctl å‘½ä»¤æ¥ç®¡ç†æœåŠ¡å’ŒæŽ§åˆ¶ç³»ç»ŸçŠ¶æ€ã€‚Â¶å¸¸ç”¨å‘½ä»¤ï¼ˆsystemctlï¼‰æç¤ºï¼šsystemctl å‘½ä»¤ä¸å¯ä»¥ç”¨äºŽç®¡ç† SysVinit å¯åŠ¨çš„æœåŠ¡ã€‚1234567891011121314151617181920212223242526#æŸ¥çœ‹Systemdç®¡ç†çš„æœåŠ¡ï¼ˆSystemdä¼šä»Žä»¥ä¸‹ç›®å½•ä¸­åŠ è½½Systemdå•å…ƒæ–‡ä»¶ï¼Œå¦‚æžœå­˜åœ¨åŒåæ–‡ä»¶ï¼ŒSystemdå°†ä½¿ç”¨è¾ƒé«˜ä¼˜å…ˆçº§è·¯å¾„é‡Œçš„å•å…ƒæ–‡ä»¶é…ç½®ï¼‰ls /etc/systemd/system #ä¼˜å…ˆçº§æœ€é«˜ï¼ˆåŒ…å«ç”¨æˆ·è‡ªå®šä¹‰çš„å•å…ƒæ–‡ï¼‰ls /run/systemd/system #æ¯”ä»¥ä¸Šä¼˜å…ˆçº§ä½Žï¼ˆåŒ…å«è¿è¡Œæ—¶ç”Ÿæˆçš„å•å…ƒæ–‡ä»¶ï¼‰ls /lib/systemd/system #æ¯”ä»¥ä¸Šä¼˜å…ˆçº§ä½Žï¼ˆåŒ…å«Linuxç³»ç»Ÿè‡ªå¸¦çš„å•å…ƒæ–‡ä»¶å’Œç¬¬ä¸‰æ–¹æœåŠ¡å®‰è£…çš„å•å…ƒæ–‡ä»¶ï¼‰ls /usr/lib/systemd/system #æ¯”ä»¥ä¸Šä¼˜å…ˆçº§ä½Žï¼ˆé»˜è®¤å’Œ/lib/systemd/systemæ–‡ä»¶å†…å®¹ä¸€è‡´ï¼‰#å¯åŠ¨æœåŠ¡systemctl start æœåŠ¡å#å…³é—­æœåŠ¡systemctl stop æœåŠ¡å#é‡å¯æœåŠ¡systemctl restart æœåŠ¡å#æŸ¥çœ‹æœåŠ¡è¿è¡ŒçŠ¶æ€systemctl status æœåŠ¡å#æŸ¥çœ‹æ‰€æœ‰æœåŠ¡è‡ªå¯åŠ¨çŠ¶æ€systemctl list-unit-files #systemctl list-unit-files | grep æœåŠ¡å#å¼€å¯æœåŠ¡è‡ªå¯åŠ¨ï¼ˆå³æ‰€è°“çš„è®¾ç½®å¼€æœºè‡ªå¯åŠ¨ï¼‰systemctl enable æœåŠ¡å#å…³é—­æœåŠ¡è‡ªå¯åŠ¨systemctl disable æœåŠ¡å#æŸ¥è¯¢æŸä¸ªæœåŠ¡æ˜¯å¦æ˜¯è‡ªå¯åŠ¨çš„systemctl is-enabled æœåŠ¡å#æŸ¥çœ‹æœåŠ¡æ—¥å¿—journalctl -u æœåŠ¡åðŸ’â€â™‚ è¯´æ˜Žï¼šsystemctlå‘½ä»¤è‡ªå¸¦æœ‰æœåŠ¡è‡ªå¯åŠ¨ç®¡ç†åŠŸèƒ½ï¼Œå¯ç›´æŽ¥ä½¿ç”¨è¯¥å‘½ä»¤æ¥ç»´æŠ¤æœåŠ¡çš„è‡ªå¯åŠ¨çŠ¶æ€ã€‚ðŸ’â€â™‚ å…³äºŽ/lib/systemd/system ç›®å½•å’Œ /usr/lib/systemd/system ç›®å½•é»˜è®¤æ–‡ä»¶ç›¸åŒçš„è¯´æ˜Žï¼šåœ¨ Linux æ“ä½œç³»ç»Ÿä¸­ï¼Œ/usr/lib ç›®å½•å’Œ /lib ç›®å½•éƒ½æ˜¯ç”¨äºŽå­˜å‚¨å…±äº«åº“æ–‡ä»¶çš„ç›®å½•ã€‚äº‹å®žä¸Šï¼Œ/usr/lib ç›®å½•ä¸­çš„å¤§éƒ¨åˆ†å†…å®¹éƒ½å¯ä»¥åœ¨ /lib ç›®å½•ä¸­æ‰¾åˆ°ç›¸åº”çš„æ–‡ä»¶ã€‚è¿™æ˜¯å› ä¸ºï¼Œæ—©æœŸç‰ˆæœ¬çš„ Linux å‘è¡Œç‰ˆå°†æ‰€æœ‰çš„ç”¨æˆ·ç©ºé—´ç¨‹åºå’Œåº“æ–‡ä»¶éƒ½å®‰è£…åœ¨ /usr ç›®å½•ä¸­ï¼Œè€Œ /lib ç›®å½•åªåŒ…å«å†…æ ¸å’Œé©±åŠ¨ç¨‹åºæ‰€éœ€çš„åº“æ–‡ä»¶ã€‚éšç€ Linux å‘è¡Œç‰ˆçš„ä¸æ–­å‘å±•å’Œæ¼”å˜ï¼Œä¸ºäº†æé«˜å…¼å®¹æ€§å’Œå¯ç§»æ¤æ€§ï¼Œä¸€äº› Linux å‘è¡Œç‰ˆå¼€å§‹å°†æŸäº›åº“æ–‡ä»¶å®‰è£…åœ¨ /lib ç›®å½•ä¸­ï¼Œä»¥é¿å…æŸäº›åº”ç”¨ç¨‹åºæ— æ³•æ­£å¸¸å·¥ä½œã€‚ä½†æ˜¯ï¼Œå‡ºäºŽå‘åŽå…¼å®¹çš„è€ƒè™‘ï¼Œåˆä¸èƒ½å°†æ‰€æœ‰çš„åº“æ–‡ä»¶éƒ½ç›´æŽ¥ç§»åˆ° /lib ç›®å½•ä¸‹ã€‚è¿™å°±å¯¼è‡´äº† /usr/lib å’Œ /lib ç›®å½•ä¸­çš„å†…å®¹å­˜åœ¨å¤§é‡é‡å¤çš„æƒ…å†µã€‚æ€»ä¹‹ï¼Œåœ¨çŽ°ä»£ Linux ç³»ç»Ÿä¸­ï¼Œ/usr/lib ç›®å½•ä¸­çš„å¤§éƒ¨åˆ†å†…å®¹éƒ½å¯ä»¥åœ¨ /lib ç›®å½•ä¸­æ‰¾åˆ°ç›¸åº”çš„æ–‡ä»¶ã€‚è¿™æ˜¯ç”±äºŽåŽ†å²åŽŸå› å’Œå…¼å®¹æ€§è€ƒè™‘æ‰€å¯¼è‡´çš„ï¼Œç”¨æˆ·ä¸éœ€è¦è¿‡å¤šå…³æ³¨è¿™ä¸ªé—®é¢˜ï¼Œåªéœ€è¦æ ¹æ®éœ€è¦ä½¿ç”¨ç›¸åº”çš„åº“æ–‡ä»¶å³å¯ã€‚Â¶è‡ªå®šä¹‰æœåŠ¡åœ¨ Systemd ä¸­ç®¡ç†è‡ªå®šä¹‰æœåŠ¡çš„æ­¥éª¤å¦‚ä¸‹ï¼šç¼–å†™æœåŠ¡æ–‡ä»¶åˆ›å»ºä¸€ä¸ªæè¿°æœåŠ¡çš„é…ç½®æ–‡ä»¶ï¼Œå¹¶å°†å…¶ä¿å­˜åˆ° /etc/systemd/system ç›®å½•ä¸­ï¼Œæ–‡ä»¶åä»¥ .service ç»“å°¾ã€‚å¦‚ï¼šmy_custom_service.service12345678910[Unit]Description=My Custom ServiceAfter=network.target[Service]ExecStart=/usr/bin/my_custom_serviceRestart=always[Install]WantedBy=multi-user.targetSystemd æœåŠ¡å•å…ƒæ–‡ä»¶çš„ä¸€äº›å¸¸è§é…ç½®é€‰é¡¹åŠå…¶è¯¦ç»†è¯´æ˜Žï¼š[Unit] éƒ¨åˆ†ï¼šDescriptionï¼šæè¿°è¯¥æœåŠ¡çš„æ–‡å­—è¯´æ˜Žã€‚Documentationï¼šæä¾›æœ‰å…³è¯¥æœåŠ¡çš„æ–‡æ¡£é“¾æŽ¥æˆ–è·¯å¾„ã€‚Requires å’Œ Wantsï¼šæŒ‡å®šè¯¥æœåŠ¡æ‰€ä¾èµ–çš„å…¶ä»–å•å…ƒï¼Œè¦æ±‚å®ƒä»¬åœ¨è¯¥æœåŠ¡ä¹‹å‰å¯åŠ¨ã€‚Afterï¼šæŒ‡å®šè¯¥æœåŠ¡åº”è¯¥åœ¨å“ªäº›å…¶ä»–å•å…ƒä¹‹åŽå¯åŠ¨ã€‚[Service] éƒ¨åˆ†ï¼šTypeï¼šæŒ‡å®šæœåŠ¡çš„ç±»åž‹ï¼Œå¦‚ simpleã€forkingã€oneshotã€dbus ç­‰ã€‚ExecStartï¼šæŒ‡å®šå¯åŠ¨è¯¥æœåŠ¡æ—¶è¦æ‰§è¡Œçš„å‘½ä»¤æˆ–è„šæœ¬ã€‚ExecStopï¼šæŒ‡å®šåœæ­¢è¯¥æœåŠ¡æ—¶è¦æ‰§è¡Œçš„å‘½ä»¤æˆ–è„šæœ¬ã€‚WorkingDirectoryï¼šæŒ‡å®šæœåŠ¡çš„å·¥ä½œç›®å½•ã€‚User å’Œ Groupï¼šæŒ‡å®šæœåŠ¡è¿è¡Œçš„ç”¨æˆ·å’Œç»„ã€‚Environmentï¼šè®¾ç½®æœåŠ¡è¿è¡Œæ—¶çš„çŽ¯å¢ƒå˜é‡ã€‚Restartï¼šæŒ‡å®šæœåŠ¡åœ¨å¼‚å¸¸é€€å‡ºæ—¶çš„é‡å¯ç­–ç•¥ã€‚noï¼šè¡¨ç¤ºä¸è¿›è¡Œé‡å¯ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œå½“æœåŠ¡åœæ­¢æˆ–é€€å‡ºæ—¶ä¸ä¼šè‡ªåŠ¨é‡å¯ã€‚on-failureï¼šè¡¨ç¤ºä»…åœ¨æœåŠ¡å‘ç”Ÿéžæ­£å¸¸çš„é€€å‡ºï¼ˆå³é€€å‡ºçŠ¶æ€ä¸ä¸ºé›¶ï¼‰æ—¶æ‰é‡å¯ã€‚è¿™æ˜¯é»˜è®¤çš„é‡å¯ç­–ç•¥ã€‚alwaysï¼šè¡¨ç¤ºæ— è®ºæœåŠ¡é€€å‡ºçš„çŠ¶æ€å¦‚ä½•ï¼ˆæ— è®ºæ˜¯æ­£å¸¸è¿˜æ˜¯éžæ­£å¸¸ï¼‰ï¼Œéƒ½è¿›è¡Œé‡å¯ã€‚on-abnormalï¼šè¡¨ç¤ºä»…åœ¨æœåŠ¡å‘ç”Ÿå¼‚å¸¸é€€å‡ºæ—¶æ‰é‡å¯ï¼Œä¾‹å¦‚ç”±äºŽæ”¶åˆ°æœªæ•èŽ·çš„ä¿¡å·å¯¼è‡´æœåŠ¡ç»ˆæ­¢ã€‚on-successï¼šè¡¨ç¤ºä»…åœ¨æœåŠ¡æ­£å¸¸é€€å‡ºï¼ˆå³é€€å‡ºçŠ¶æ€ä¸ºé›¶ï¼‰æ—¶æ‰é‡å¯ã€‚on-watchdogï¼šè¡¨ç¤ºä»…åœ¨ç”± Systemd ç›‘æŽ§çš„ watchdog å®šæ—¶å™¨è§¦å‘æ—¶æ‰é‡å¯ã€‚on-abortï¼šè¡¨ç¤ºä»…åœ¨æœåŠ¡å¯åŠ¨è¿‡ç¨‹ä¸­é‡åˆ°è‡´å‘½é”™è¯¯æ—¶æ‰é‡å¯ã€‚RestartSecï¼šæŒ‡å®šåœ¨é‡å¯æœåŠ¡ä¹‹å‰ç­‰å¾…çš„æ—¶é—´é—´éš”ã€‚ExecReloadï¼šæŒ‡å®šé‡æ–°åŠ è½½æœåŠ¡æ—¶è¦æ‰§è¡Œçš„å‘½ä»¤æˆ–è„šæœ¬ã€‚[Install] éƒ¨åˆ†ï¼šWantedByï¼šæŒ‡å®šè¯¥æœåŠ¡åº”è¯¥åœ¨å“ªäº›ç›®æ ‡ï¼ˆtargetï¼‰ä¸­å¯ç”¨ã€‚é€šå¸¸ä¸º multi-user.target æˆ–ç±»ä¼¼çš„ç›®æ ‡ã€‚é‡æ–°åŠ è½½ Systemd é…ç½®ä½¿ç”¨ systemctl å‘½ä»¤é‡æ–°åŠ è½½ Systemd é…ç½®ï¼Œä½¿ä¹‹ç”Ÿæ•ˆã€‚1systemctl daemon-reloadå¯ç”¨å¼€æœºè‡ªå¯åŠ¨ä½¿ç”¨ systemctl å‘½ä»¤å°†æœåŠ¡æ·»åŠ åˆ°å¼€æœºè‡ªå¯åŠ¨é¡¹ï¼Œå¹¶è®¾ç½®ä¸ºå¼€æœºè‡ªåŠ¨å¯åŠ¨ã€‚1systemctl enable my_custom_service.serviceå¯åŠ¨æœåŠ¡ä½¿ç”¨ systemctl å‘½ä»¤å¯åŠ¨æœåŠ¡ã€‚1systemctl start my_custom_service.serviceè‡³æ­¤ï¼Œè‡ªå®šä¹‰æœåŠ¡å·²ç»æˆåŠŸåœ°æ·»åŠ åˆ° Linux ç³»ç»Ÿä¸­ï¼Œå¹¶ä¸”å¯ä»¥é€šè¿‡ systemctl å‘½ä»¤æ¥ç®¡ç†å®ƒã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œåœ¨ç¼–å†™æœåŠ¡æ–‡ä»¶æ—¶ï¼Œè¦éµå¾ªè§„èŒƒï¼Œç¡®ä¿æœåŠ¡èƒ½å¤Ÿæ­£ç¡®åœ°å¯åŠ¨ã€åœæ­¢å’Œé‡å¯ã€‚åœ¨ä½¿ç”¨ Systemd è¿›è¡ŒæœåŠ¡ç®¡ç†æ—¶ï¼Œè¿˜å¯ä»¥ä½¿ç”¨å…¶ä»–ä¸€äº›å‘½ä»¤æ¥ç®¡ç†æœåŠ¡ï¼Œä¾‹å¦‚ systemctl stopã€systemctl restartã€systemctl status å’Œ journalctl ç­‰ã€‚Â¶6. åˆ†é… swap ç©ºé—´Â¶ç®€è¦æ¦‚è¿°åœ¨å®‰è£… Linux ç³»ç»Ÿæ—¶åœ¨åˆ†åŒºæ—¶å¯ä»¥åˆ†é… swap ç©ºé—´ï¼ˆäº¤æ¢ç©ºé—´ï¼Œå³è™šæ‹Ÿå†…å­˜ï¼‰ï¼Œè€Œç³»ç»Ÿå®‰è£…åŽï¼ˆåœ¨è¿è¡Œä¸­ï¼‰å¦‚ä½•åˆ›å»ºæˆ–è°ƒæ•´ swap ç©ºé—´å‘¢ï¼Ÿåœ¨è£…å®Œ Linux ç³»ç»Ÿä¹‹åŽï¼Œåˆ†é… swap ç©ºé—´æœ‰ä¸¤ç§æ–¹å¼ã€‚æç¤ºï¼šå¯é€šè¿‡å‘½ä»¤ free -h æŸ¥çœ‹å½“å‰ç³»ç»Ÿçš„ swap ç©ºé—´å¤§å°ã€‚Â¶æ–¹å¼1ï¼šæ–°å»ºç£ç›˜åˆ†åŒºä½œä¸º swap åˆ†åŒº123456789101112#åœæ­¢æ‰€æœ‰çš„ swap åˆ†åŒºswapoff -a# ç”¨ fdisk å‘½ä»¤å¯¹æŸä¸ªç£ç›˜è¿›è¡Œåˆ†åŒºï¼Œæ·»åŠ  swap åˆ†åŒºï¼Œæ–°å»ºåˆ†åŒºï¼Œåœ¨ fdisk ä¸­ç”¨ t å‘½ä»¤å°†æ–°æ·»çš„åˆ†åŒº id æ”¹ä¸º 82ï¼ˆLinux swap ç±»åž‹ï¼‰ï¼Œæœ€åŽç”¨ w å°†æ“ä½œå®žé™…å†™å…¥ç¡¬ç›˜ï¼ˆæ²¡ç”¨ w ä¹‹å‰çš„æ“ä½œæ˜¯æ— æ•ˆçš„ï¼‰ã€‚å¦‚ä¸‹ï¼šfdisk /dev/sdb#æ ¼å¼åŒ– swap åˆ†åŒºï¼Œè¿™é‡Œçš„ sdb2 è¦çœ‹åŠ å®ŒåŽ p å‘½ä»¤æ˜¾ç¤ºçš„å®žé™…åˆ†åŒºè®¾å¤‡åmkswap /dev/sdb2#æ¿€æ´»å¯ç”¨æ–°çš„ swap åˆ†åŒºswapon /dev/sdb2#ä¸ºäº†è®©ç³»ç»Ÿå¯åŠ¨æ—¶èƒ½è‡ªåŠ¨å¯ç”¨è¿™ä¸ªäº¤æ¢åˆ†åŒºï¼Œå¯ä»¥ç¼–è¾‘ /etc/fstab åŠ å…¥ä¸‹é¢ä¸€è¡Œ/dev/sdb2 swap swap defaults 0 0# å¯ç”¨ /etc/fstab é‡Œçš„æ‰€æœ‰ swap åˆ†åŒºï¼ˆå¯é€‰ï¼‰# swapon -aåœç”¨ swap åˆ†åŒºï¼Œæ“ä½œå¦‚ä¸‹ï¼š1234#åœç”¨æŒ‡å®š swap åˆ†åŒºswapoff /dev/sdb2#åˆ é™¤æˆ–æ³¨é‡Š /etc/fstab ä¸­ä¹‹å‰æ·»åŠ çš„ç›¸å…³æŒ‚è½½ swap åˆ†åŒºçš„å¼€æœºè‡ªå¯åŠ¨å†…å®¹#/dev/sdb2 swap swap defaults 0 0Â¶æ–¹å¼2ï¼šç”¨è™šæ‹Ÿç£ç›˜åˆ†åŒºä½œä¸º swap åˆ†åŒºï¼ˆæŽ¨èï¼‰1234567891011#åˆ›å»ºä¸€ä¸ªæ–°çš„è™šæ‹Ÿç£ç›˜åˆ†åŒºï¼ˆå³æ–‡ä»¶ï¼‰mkdir /swapdd if=/dev/zero of=/swap/swapfile bs=1M count=1024 #å¤§å°å¯è‡ªå·±è°ƒæ•´ï¼ˆæ–‡ä»¶å¤§å° = bs * countï¼‰#æ ¼å¼åŒ–ä¸ºäº¤æ¢åˆ†åŒºæ–‡ä»¶mkswap /swap/swapfile #è®¾ç½®æ‹Ÿç£ç›˜åˆ†åŒºçš„æ–‡ä»¶ç³»ç»Ÿ#è®¾ç½®æ–‡ä»¶æƒé™ï¼ˆå¯é€‰ï¼‰chmod 600 /swap/swapfile#æ¿€æ´»å¯ç”¨æ–°çš„ swap åˆ†åŒºswapon /swap/swapfile#ä½¿ç³»ç»Ÿå¼€æœºæ—¶è‡ªå¯ç”¨ï¼Œå¯ä»¥ç¼–è¾‘ /etc/fstab åŠ å…¥ä¸‹é¢ä¸€è¡Œ/swap/swapfile swap swap defaults 0 0æç¤ºï¼šç³»ç»Ÿçš„ swap ç©ºé—´æ€»å®¹é‡ç”±ä¸€ä¸ªæˆ–å¤šä¸ª swap åˆ†åŒºæ¥å…±åŒç»„æˆï¼ŒåœæŽ‰æŸäº› swap åˆ†åŒºï¼Œç³»ç»Ÿçš„ swap ç©ºé—´æ€»å®¹é‡ä¹Ÿä¼šéšç€å‡å°‘æŽ‰ç›¸åº”çš„å¤§å°ã€‚æ‰€ä»¥æƒ³è¦å¢žåŠ  swap ç©ºé—´æ€»å®¹é‡ï¼Œåªéœ€è¦åˆ›å»ºæ¿€æ´» swap åˆ†åŒºå³å¯ï¼Œå‡å°‘å®¹é‡åˆ™å…³åœå¹¶åˆ é™¤æŸäº› swap åˆ†åŒºå³å¯åœç”¨ swap åˆ†åŒºï¼Œæ“ä½œå¦‚ä¸‹ï¼š123456#åœç”¨æŒ‡å®š swap åˆ†åŒºswapoff /swap/swapfile#åˆ é™¤ swap åˆ†åŒºæ–‡ä»¶rm /swap/swapfile#åˆ é™¤æˆ–æ³¨é‡Š /etc/fstab ä¸­ä¹‹å‰æ·»åŠ çš„ç›¸å…³æŒ‚è½½ swap åˆ†åŒºçš„å¼€æœºè‡ªå¯åŠ¨å†…å®¹#/swap/swapfile swap swap defaults 0 0Â¶å‚è€ƒhttps://blog.csdn.net/lovemysea/article/details/78306558https://www.jianshu.com/p/30cd53ed056cÂ¶ä¹ã€ç½‘ç»œç®¡ç†Â¶1. æŸ¥çœ‹ç½‘å¡é…ç½®ä¿¡æ¯ ifconfigifconfig å¯ä»¥æŸ¥çœ‹å½“å‰çš„ç½‘å¡é…ç½®ä¿¡æ¯ï¼ˆä¸»è¦å«ç½‘å¡åç§°ã€IP ä¿¡æ¯ç­‰ï¼‰12345# æŸ¥çœ‹ç½‘å¡é…ç½®ä¿¡æ¯ifconfig# æŸ¥çœ‹ç½‘å¡å¯¹åº”çš„ IP åœ°å€ifconfig | grep inetæç¤ºï¼šä¸€å°è®¡ç®—æœºä¸­æœ‰å¯èƒ½ä¼šæœ‰ä¸€ä¸ª ç‰©ç†ç½‘å¡ å’Œ å¤šä¸ªè™šæ‹Ÿç½‘å¡ï¼Œåœ¨ Linux ä¸­ç‰©ç†ç½‘å¡çš„åå­—é€šå¸¸ä»¥ ensXX è¡¨ç¤ºç½‘å¡æ˜¯ä¸€ä¸ªä¸“é—¨è´Ÿè´£ç½‘ç»œé€šè®¯çš„ç¡¬ä»¶è®¾å¤‡ã€‚IP åœ°å€æ˜¯è®¾ç½®åœ¨ç½‘å¡ä¸Šçš„åœ°å€ä¿¡æ¯ã€‚æ¯å°è”ç½‘çš„ç”µè„‘ä¸Šéƒ½æœ‰ P åœ°å€ï¼Œæ˜¯ä¿è¯ç”µè„‘ä¹‹é—´æ­£å¸¸é€šè®¯çš„é‡è¦è®¾ç½®ã€‚æˆ‘ä»¬å¯ä»¥æŠŠ ç”µè„‘ æ¯”ä½œ ç”µè¯ï¼Œç½‘å¡ ç›¸å½“äºŽ SIM å¡ï¼ŒIP åœ°å€ ç›¸å½“äºŽ ç”µè¯å·ç æ³¨æ„ï¼šæ¯å°ç”µè„‘çš„ IP åœ°å€ä¸èƒ½ç›¸åŒï¼Œå¦åˆ™ä¼šå‡ºçŽ° IP åœ°å€å†²çªï¼Œå¹¶ä¸”æ²¡æœ‰åŠžæ³•æ­£å¸¸é€šè®¯127.0.0.1 è¢«ç§°ä¸º æœ¬åœ°å›žçŽ¯/çŽ¯å›žåœ°å€ï¼Œä¸€èˆ¬ç”¨æ¥æµ‹è¯•æœ¬æœºç½‘å¡æ˜¯å¦æ­£å¸¸Â¶2. æ£€æµ‹ç½‘ç»œè¿žé€šæ€§ ping å’Œ telnetping ä¸€èˆ¬ç”¨äºŽæ£€æµ‹å½“å‰è®¡ç®—æœºåˆ°ç›®æ ‡è®¡ç®—æœºä¹‹é—´çš„ç½‘ç»œæ˜¯å¦è¿žé€šï¼Œtimeæ•°å€¼è¶Šå¤§ï¼Œé€Ÿåº¦è¶Šæ…¢123456789101112## æµ‹è¯• IP è¿žé€šæ€§# æ£€æµ‹åˆ°ç›®æ ‡ä¸»æœºæ˜¯å¦è¿žæŽ¥æ­£å¸¸ping IPåœ°å€# ping æœ¬æœº IPping baidu.comping 127.0.0.1 #ç­‰åŒï¼šping localhost## æµ‹è¯•ç«¯å£è¿žé€šæ€§ #åœ¨ telnet ä¼šè¯è¿žé€šåŽï¼Œå¦‚æžœä¸è‡ªåŠ¨é€€å‡ºï¼Œéœ€è¾“å…¥ Ctrl+] ç»„åˆé”®ï¼Œåœ¨å‡ºçŽ°çš„æç¤ºç¬¦ä¸‹è¾“å…¥ quitï¼Œç„¶åŽæŒ‰ Enter é”®å³å¯é€€å‡ºã€‚telnet IPåœ°å€ ç«¯å£telnet baidu.com 443ping çš„å·¥ä½œåŽŸç†ä¸Žæ½œæ°´è‰‡çš„å£°çº³ç›¸ä¼¼ï¼Œping è¿™ä¸ªå‘½ä»¤å°±æ˜¯å–è‡ª å£°çº³çš„å£°éŸ³ç½‘ç»œç®¡ç†å‘˜ä¹‹é—´ä¹Ÿå¸¸å°† ping ç”¨ä½œåŠ¨è¯ â€”â€” ping ä¸€ä¸‹è®¡ç®—æœºXï¼Œçœ‹ä»–æ˜¯å¦å¼€ç€åŽŸç†ï¼šç½‘ç»œä¸Šçš„æœºå™¨éƒ½æœ‰ å”¯ä¸€ç¡®å®šçš„ IP åœ°å€ï¼Œæˆ‘ä»¬ç»™ç›®æ ‡ IP åœ°å€å‘é€ä¸€ä¸ªæ•°æ®åŒ…ï¼Œå¯¹æ–¹å°±è¦è¿”å›žä¸€ä¸ªæ•°æ®åŒ…ï¼Œæ ¹æ®è¿”å›žçš„æ•°æ®åŒ…ä»¥åŠæ—¶é—´ï¼Œæˆ‘ä»¬å¯ä»¥ç¡®å®šç›®æ ‡ä¸»æœºçš„å­˜åœ¨æç¤ºï¼šåœ¨ Linux ä¸­ï¼Œæƒ³è¦ç»ˆæ­¢ä¸€ä¸ªç»ˆç«¯ç¨‹åºçš„æ‰§è¡Œï¼Œç»å¤§å¤šæ•°éƒ½å¯ä»¥ä½¿ç”¨ CTRL + CÂ¶3. é…ç½®ä¸»æœºå123456789101112#æŸ¥çœ‹ä¸»æœºåhostname##æŒä¹…åŒ–ä¿®æ”¹ä¸»æœºå#æ–¹å¼1ï¼ˆæŽ¨èï¼‰ï¼šhostnamectl set-hostname "ä¸»æœºåç§°"#å¦‚ï¼šhostnamectl set-hostname "centos7-test"#æ–¹å¼2ï¼šecho "ä¸»æœºåç§°" &gt; /etc/hostname#å¦‚ï¼šecho "centos7-test" &gt; /etc/hostnamereboot #æ³¨æ„ï¼Œå¦‚æžœä¿®æ”¹é…ç½®æ–‡ä»¶çš„æ–¹å¼è®¾ç½®ä¸»æœºåï¼Œåˆ™éœ€è¦é‡å¯ç³»ç»ŸÂ¶4. é…ç½® hosts æ˜ å°„12#ç¼–è¾‘/etc/hostsç„¶åŽé…ç½®ipå’Œå¯¹åº”åŸŸåå³å¯vim /etc/hostsÂ¶5. é…ç½®ä¸»æœº IPÂ¶1ï¼‰é…ç½®ä¸´æ—¶ IP1234567891011121314151617181920##è®¾ç½®ä¸´æ—¶IPï¼ˆifconfig å‘½ä»¤ï¼‰ #ifconfig å‘½ä»¤è®¾ç½®IPï¼Œä¼šæŠŠæ›¿æ¢æŽ‰åŽŸç½‘ç»œæŽ¥å£çš„IP #&lt;interface_name&gt; ä¸ºç½‘ç»œæŽ¥å£åç§°ï¼ˆå¦‚ï¼šeth0 æˆ– ens33 ç­‰ï¼Œå¯é€šè¿‡æ‰§è¡Œ ip addr å‘½ä»¤æŸ¥çœ‹ï¼‰ #æ ¼å¼ï¼šifconfig &lt;interface_name&gt; &lt;IP&gt;/&lt;å­ç½‘æŽ©ç &gt; æˆ–è€… ifconfig &lt;interface_name&gt; &lt;IP&gt; netmask &lt;å­ç½‘æŽ©ç &gt;#ç¤ºä¾‹ï¼š# é¦–å…ˆï¼Œç¦ç”¨ç½‘ç»œæŽ¥å£ï¼ˆå¦‚æžœå·²ç»å¯ç”¨ï¼‰ifconfig ens33 down# é…ç½®IPåœ°å€å’Œå­ç½‘æŽ©ç ifconfig ens33 192.168.60.100/24# å¯ç”¨ç½‘ç»œæŽ¥å£ifconfig ens33 up#ä¸´æ—¶è®¾ç½®ç½‘å…³IP #æ ¼å¼ï¼šip route add default via &lt;gateway_ip&gt; #æˆ–è€…ï¼šroute add default gw &lt;gateway_ip&gt;ï¼ˆä¸€äº›æ—§ç‰ˆçš„Linuxç³»ç»Ÿä»…æ”¯æŒroute add default gw &lt;gateway_ip&gt;ï¼‰ip route add default via 192.168.60.2#ä¸´æ—¶è®¾ç½®DNSæœåŠ¡å™¨ #æ ¼å¼ï¼šecho "nameserver &lt;dns-ip&gt;" &gt;&gt; /etc/resolv.confecho "nameserver 8.8.8.8" &gt;&gt; /etc/resolv.confå…¶ä»–ç›¸å…³å‘½ä»¤123456789101112131415161718192021222324##æ·»åŠ ä¸´æ—¶IPï¼ˆip addr add å‘½ä»¤ï¼‰ #ip addr add å‘½ä»¤ç”¨äºŽæ·»åŠ IPï¼ˆå³å¦‚æžœä¹‹å‰ç½‘ç»œæŽ¥å£å·²ç»å­˜åœ¨é»˜è®¤IPï¼Œåˆ™è¯¥å‘½ä»¤ä¼šåœ¨ä¿ç•™åŽŸIPçš„æƒ…å†µä¸‹æ·»åŠ ä¸€ä¸ªæ–°çš„IPï¼Œä½¿å¾—å¤šä¸ªIPå¯ç”¨ï¼‰ #&lt;interface_name&gt; ä¸ºç½‘ç»œæŽ¥å£åç§°ï¼ˆå¦‚ï¼šeth0 æˆ– ens33 ç­‰ï¼Œå¯é€šè¿‡æ‰§è¡Œ ip addr å‘½ä»¤æŸ¥çœ‹ï¼‰ #æ ¼å¼ï¼šip addr add &lt;IP&gt;/&lt;å­ç½‘æŽ©ç &gt; dev &lt;interface_name&gt;#ç¤ºä¾‹ï¼šip addr add 192.168.60.100/24 dev ens33##ç§»é™¤ä¸´æ—¶IPï¼ˆip addr del å‘½ä»¤ï¼‰ #&lt;interface_name&gt; ä¸ºç½‘ç»œæŽ¥å£åç§°ï¼ˆå¦‚ï¼šeth0 æˆ– ens33 ç­‰ï¼Œå¯é€šè¿‡æ‰§è¡Œ ip addr å‘½ä»¤æŸ¥çœ‹ï¼‰ #æ ¼å¼ï¼šip addr del &lt;IP&gt;/&lt;å­ç½‘æŽ©ç &gt; dev &lt;interface_name&gt;#ç¤ºä¾‹ï¼šip addr del 192.168.60.100/24 dev ens33#è¿˜åŽŸIPï¼ˆé‡å¯ç½‘ç»œæŽ¥å£æ–¹å¼ï¼‰ #&lt;interface_name&gt; ä¸ºç½‘ç»œæŽ¥å£åç§°ï¼ˆå¦‚ï¼šeth0 æˆ– ens33 ç­‰ï¼Œå¯é€šè¿‡æ‰§è¡Œ ip addr å‘½ä»¤æŸ¥çœ‹ï¼‰ifconfig &lt;interface_name&gt; downifconfig &lt;interface_name&gt; up#æˆ–#ip link set &lt;interface_name&gt; down#ip link set &lt;interface_name&gt; up#è¿˜åŽŸIPï¼ˆé‡å¯ç½‘ç»œæœåŠ¡æ–¹å¼ï¼‰service network restartÂ¶2ï¼‰é…ç½®é™æ€ IPè¯´æ˜Žï¼šé™æ€ IP å³é‡å¯ç³»ç»Ÿæˆ–è€…ç½‘ç»œåŽä¸ä¼šæ”¹å˜çš„ IPã€‚Â¶ï¼ˆä¸€ï¼‰çŽ¯å¢ƒå‡†å¤‡å¦‚æžœ Linux ç³»ç»Ÿè®¾ç½®è‡ªåŠ¨é…ç½®ç½‘ç»œ IP ï¼ˆå³ DHCPï¼‰ï¼Œé‚£ä¹ˆè™šæ‹Ÿæœºç³»ç»Ÿçš„ IP å°†ä¼šé»˜è®¤ç”±ç½‘å…³åŠ¨æ€éšæœºåˆ†é…ï¼Œæ‰€ä»¥é‡å¯ç³»ç»Ÿæˆ–è€…ç½‘ç»œçš„æƒ…å†µï¼Œè¿™ä¸ª IP å¯èƒ½ä¼šå‘ç”Ÿæ”¹å˜ã€‚å¦‚æžœå¸Œæœ›é‡å¯ç³»ç»Ÿæˆ–è€…ç½‘ç»œåŽ IP å›ºå®šä¸å˜çš„è¯ï¼Œåˆ™éœ€è¦æ‰‹åŠ¨å¯¹ç½‘å¡é…ç½®å›ºå®šçš„é™æ€ IPã€‚ï¼ˆ1ï¼‰ç¡®å®šè¦é…ç½®é™æ€ IP çš„å­ç½‘ã€å­ç½‘æŽ©ç ã€ç½‘å…³ IPè¦é…ç½®é™æ€ IP å°±è¦æå‰å…ˆç¡®å®šé™æ€ IP çš„å­ç½‘ã€å­ç½‘æŽ©ç ã€ç½‘å…³ IPã€‚è¿™é‡Œä»¥ VMware çš„ Linux è™šæ‹Ÿæœºåœ¨ NAT æ¨¡å¼ä¸‹é…ç½®é™æ€ IP ä¸ºä¾‹è¿›è¡Œè®²è§£ï¼Œæ“ä½œå¦‚ä¸‹ï¼šç¡®å®šå­ç½‘ï¼šå¯¹äºŽ NAT æ¨¡å¼ï¼ŒVMware ä½¿ç”¨ VMnet8 è¿™ä¸ªå®¿ä¸»æœºè™šæ‹Ÿç½‘å¡æ¥ç®¡ç† IP çš„ï¼Œå…¶é»˜è®¤å­ç½‘åœ¨å®‰è£… VMware æ—¶åˆå§‹åŒ–ä¸ºä¸€ä¸ªé»˜è®¤å€¼ï¼Œé€šå¸¸ä¸º 192.168.x.0ï¼ˆå¦‚ï¼š192.168.60.0ï¼‰ï¼Œä¸åŒè®¾å¤‡è¯¥å€¼å¯èƒ½ä¸åŒï¼Œå…·ä½“å¯ä»¥é€šè¿‡æŸ¥çœ‹å®¿ä¸»æœºçš„ VMnet8 ç½‘å¡é…ç½®æ¥ç¡®å®šï¼Œæˆ–è€…åœ¨ VMware çš„ â€œè™šæ‹Ÿç½‘ç»œç¼–è¾‘å™¨â€ ä¸­æŸ¥çœ‹ï¼Œæ“ä½œå¦‚ä¸‹ï¼šæç¤ºï¼šå¦‚å¯¹é»˜è®¤è®¾ç½®çš„å­ç½‘ä¸æ»¡æ„ï¼Œåˆ™å¯ä»¥ç‚¹å‡» â€œæ›´æ”¹è®¾ç½®â€ æ¥è¿›è¡Œä¿®æ”¹ï¼Œä¿®æ”¹å­ç½‘åŽï¼Œç½‘å…³ IP ä¹Ÿä¼šè‡ªåŠ¨è·Ÿç€æ”¹å˜ã€‚å¦‚æžœå‘çŽ°è™šæ‹Ÿç½‘ç»œé…ç½®çš„å­ç½‘æ®µå’Œå®¿ä¸»æœºçš„ VMnet8 ç½‘å¡çš„é…ç½®ä¸ä¸€è‡´ï¼Œéœ€è¦ç‚¹å‡» â€œæ›´æ”¹è®¾ç½®â€ ä»¥ä¿®æ”¹ä¸ºåŒç½‘æ®µã€‚ç¡®å®šå­ç½‘æŽ©ç ï¼šå­ç½‘æŽ©ç é»˜è®¤éƒ½ä¸º 255.255.255.0ç¡®å®šç½‘å…³ IPï¼šé»˜è®¤ VMnet8 çš„ç½‘å…³ IP ä¸ºå­ç½‘çš„ä¸€ä¸ª IPï¼Œé€šå¸¸ä¸º x.x.x.2ï¼ˆå¦‚ï¼š192.168.60.2ï¼‰ï¼ˆ2ï¼‰é…ç½®è™šæ‹Ÿæœºçš„ç½‘ç»œè¿žæŽ¥æ–¹å¼ä¸º&quot; NAT æ¨¡å¼&quot;ã€‚ï¼ˆ3ï¼‰è¿›å…¥ Linux è™šæ‹Ÿæœºç»ˆç«¯ï¼Œç¼–è¾‘ Linux ç½‘å¡é…ç½®æ–‡ä»¶ï¼Œå¯¹äºŽä¸åŒå‘è¡Œç‰ˆ Linux çš„ç½‘å¡é…ç½®æ–‡ä»¶è·¯å¾„å’Œåç§°å¯èƒ½ä¸åŒï¼Œå¯é€šè¿‡ifconfigå‘½ä»¤æ¥æŸ¥çœ‹ç½‘å¡åç§°ã€‚12345678910111213141516171819[root@localhost ~]# ifconfig# ens33 å³ç½‘å¡åç§°ens33: flags=4163&lt;UP,BROADCAST,RUNNING,MULTICAST&gt; mtu 1500 inet 192.168.60.112 netmask 255.255.255.0 broadcast 192.168.60.255 inet6 fe80::20c:29ff:fe09:6067 prefixlen 64 scopeid 0x20&lt;link&gt; ether 00:0c:29:09:60:67 txqueuelen 1000 (Ethernet) RX packets 256 bytes 39985 (39.0 KiB) RX errors 0 dropped 0 overruns 0 frame 0 TX packets 151 bytes 19628 (19.1 KiB) TX errors 0 dropped 0 overruns 0 carrier 0 collisions 0lo: flags=73&lt;UP,LOOPBACK,RUNNING&gt; mtu 65536 inet 127.0.0.1 netmask 255.0.0.0 inet6 ::1 prefixlen 128 scopeid 0x10&lt;host&gt; loop txqueuelen 0 (Local Loopback) RX packets 0 bytes 0 (0.0 B) RX errors 0 dropped 0 overruns 0 frame 0 TX packets 0 bytes 0 (0.0 B) TX errors 0 dropped 0 overruns 0 carrier 0 collisions 0ç„¶åŽç¼–è¾‘ç½‘å¡é…ç½®æ–‡ä»¶Red Hat ç³»åˆ—ç³»ç»Ÿçš„é…ç½®æ–‡ä»¶è·¯å¾„ä¸ºï¼š/etc/sysconfig/network-scripts/ifcfg-&lt;ç½‘ç»œæŽ¥å£åç§°&gt;ï¼ˆå¦‚ï¼š/etc/sysconfig/network-scripts/ifcfg-ens33ï¼‰Debian ç³»ç»Ÿçš„é…ç½®æ–‡ä»¶è·¯å¾„ä¸ºï¼š/etc/network/interfacesUbuntu ç³»ç»Ÿçš„é…ç½®æ–‡ä»¶è·¯å¾„ä¸ºï¼š/etc/netplan/&lt;xxx&gt;-config.yamlï¼ˆå¦‚ï¼š/etc/netplan/00-installer-config.yamlï¼‰Â¶ï¼ˆäºŒï¼‰Red Hat / CentOS ç³»ç»Ÿé…ç½®é™æ€ IP12vi /etc/sysconfig/network-scripts/ifcfg-&lt;ç½‘ç»œæŽ¥å£åç§°&gt;#å¦‚ï¼švi /etc/sysconfig/network-scripts/ifcfg-ens33ä¿®æ”¹å¦‚ä¸‹:12345678910111213141516171819202122TYPE="Ethernet"PROXY_METHOD="none"BROWSER_ONLY="no"-BOOTPROTO="dhcp"+BOOTPROTO="static"DEFROUTE="yes"IPV4_FAILURE_FATAL="no"IPV6INIT="yes"IPV6_AUTOCONF="yes"IPV6_DEFROUTE="yes"IPV6_FAILURE_FATAL="no"IPV6_ADDR_GEN_MODE="stable-privacy"NAME="ens33"UUID="4f676de2-5673-431b-b8fc-2dc4ad9accfc"DEVICE="ens33"-ONBOOT="no"+ONBOOT="yes"+IPADDR="192.168.60.100"+GATEWAY="192.168.60.2"+NETMASK="255.255.255.0"+DNS1="223.5.5.5"+DNS2="8.8.8.8"ðŸ’¡ æç¤ºï¼šç½‘å¡é…ç½®æ–‡ä»¶é‡Œçš„å˜é‡å¯èƒ½ä¸åŒç³»ç»Ÿçš„ä¹Ÿä¸åŒã€‚ä½†æ˜¯ä»¥ä¸Šä¿®æ”¹çš„éƒ¨åˆ†æ˜¯å¿…é¡»çš„ã€‚ðŸ“š ä¸»è¦å˜é‡è¯´æ˜Žï¼šHWADDRï¼šè¡¨ç¤ºmacåœ°å€TYPEï¼šç½‘ç»œç±»åž‹BOOTPROTOï¼šè¡¨ç¤ºä¸ºç½‘å¡é…ç½®é™æ€è¿˜æ˜¯åŠ¨æ€IPåœ°å€(none:è¡¨ç¤ºæ— é¡»å¯åŠ¨åè®®ï¼›bootp:è¡¨ç¤ºä½¿ç”¨BOOTPåè®®ï¼›dhcp ï¼šä½¿ç”¨dhcpåè®®åŠ¨æ€èŽ·å–ipåœ°å€ï¼› staticï¼šè¡¨ç¤ºæ‰‹å·¥è®¾ç½®é™æ€IPåœ°å€)ONBOOTï¼šè¡¨ç¤ºå¯åŠ¨ç³»ç»Ÿæ—¶æ˜¯å¦æ¿€æ´»ç½‘å¡ï¼Œyesä¸ºæ¿€æ´»ï¼Œnoä¸æ¿€æ´»ï¼ˆå¦‚æžœé»˜è®¤ä¸ºnoéœ€è¦æ”¹æˆyesï¼‰HWADDRï¼šè¡¨ç¤ºç½‘å¡çš„MACåœ°å€GATEWAYï¼šè¡¨ç¤ºè¯¥ç½‘å…³åœ°å€ã€‚å¡«è™šæ‹Ÿè™šæ‹Ÿæœºç½‘å¡VMnet8å¯¹åº”çš„ç½‘å…³ipã€‚NETMASKï¼šè¡¨ç¤ºå­ç½‘æŽ©ç ã€‚å¡«å¡«å’ŒVMnet8å¯¹äºŽçš„å­ç½‘æŽ©ç IPADDRï¼šè¡¨ç¤ºç½‘å¡çš„é™æ€IPåœ°å€ã€‚æ¯”å¦‚ä¸Šé¢çš„ç½‘å…³æ˜¯192.168.60.2å¹¶ä¸”å­ç½‘æŽ©ç æ˜¯255.255.255.0ï¼Œé‚£ä¹ˆè¡¨ç¤ºå›ºå®šipçš„å€¼éœ€è¦æ˜¯192.168.60.xï¼ˆè¿™ä¸ªxæ˜¯é™¤äº†ç½‘å…³å¤–3~254çš„ä»»æ„æ•°å¡«ï¼Œå…¶ä¸­0è¡¨ç¤ºç½‘ç»œï¼Œ255ä¸€èˆ¬ç”¨æ¥åšæŽ©ç ï¼Œè€Œ1å’Œ2å·²ç»è¢«VMnet8ä½¿ç”¨ï¼Œæ‰€ä»¥0ã€1ã€2å’Œ255ä¸ç”¨ï¼‰DNS1ï¼ˆå¯é€‰ï¼‰ï¼šè¡¨ç¤ºç¬¬ä¸€ä¸ªDNSæœåŠ¡å™¨çš„åœ°å€ã€‚å€¼å¯ä»¥æ˜¯ä»»æ„èƒ½ä½¿ç”¨çš„dns ipåœ°å€ï¼ˆç”¨äºŽè§£æžåŸŸåï¼‰ã€‚è¿™é‡Œä½¿ç”¨googleé€šè¿‡çš„dns ip8.8.8.8å³å¯ã€‚ï¼ˆæ³¨æ„ï¼šå¦‚æžœ Vmware è™šæ‹Ÿæœºä½¿ç”¨â€œä»…ä¸»æœºæ¨¡å¼â€çš„è¯ï¼Œä¸è¦è®¾ç½® DNS ï¼Œå¦åˆ™å¯èƒ½ä¼šå‡ºçŽ° SSH ç™»å½•è¶…æ—¶çš„é—®é¢˜ã€‚ï¼‰DNS2ï¼ˆå¯é€‰ï¼‰ï¼šè¡¨ç¤ºç¬¬äºŒä¸ªDNSæœåŠ¡å™¨çš„åœ°å€ã€‚é‡å¯ç½‘ç»œæœåŠ¡ä»¥ç”Ÿæ•ˆ1234#é‡å¯ç½‘ç»œæœåŠ¡service network restart#å¦‚æžœä¸Šé¢å‘½ä»¤é‡å¯ ip æ²¡å˜ï¼Œå¯ä»¥å°è¯•é‡å¯ç³»ç»Ÿè¯•è¯•rebootæ‰§è¡ŒåŽå¦‚æžœæŠ¥å¦‚ä¸‹é”™è¯¯ï¼šRestarting network (via systemctl): Job for network.service failed because the control process exited with error code. See â€œsystemctl status network.serviceâ€ and â€œjournalctl -xeâ€ for details.ðŸ’â€â™‚ å‡ºçŽ°ä¸Šé¢é”™è¯¯çš„å¤§æ¦‚çŽ‡æ˜¯macåœ°å€å’Œvmwareé…ç½®çš„ä¸ä¸€è‡´ã€‚å¦‚ä¸‹ä¸€å®šè¦ä¸€è‡´ï¼šÂ¶ï¼ˆä¸‰ï¼‰Debian ç³»ç»Ÿé…ç½®é™æ€ IP1vi /etc/network/interfacesé…ç½®å†…å®¹å¦‚ä¸‹:123456789101112131415161718192021222324252627282930# This file describes the network interfaces available on your system# and how to activate them. For more information, see interfaces(5).source /etc/network/interfaces.d/*# The loopback network interfaceauto loiface lo inet loopback# The primary network interface#allow-hotplug ens33#iface ens33 inet dhcp#å…è®¸ç½‘å¡æŽ¥å£çƒ­æ’æ‹”allow-hotplug ens33#å¼€æœºå¯åŠ¨æ—¶è‡ªåŠ¨æ¿€æ´»ç½‘å¡æŽ¥å£auto ens33#staticè¡¨ç¤ºä½¿ç”¨å›ºå®šIPï¼Œdhcpè¡¨è¿°ä½¿ç”¨åŠ¨æ€IP#iface ens33 inet dhcpiface ens33 inet static#è®¾ç½®é™æ€IPåœ°å€address 192.168.60.201#è®¾ç½®å­ç½‘æŽ©ç netmask 255.255.255.0#è®¾ç½®ç½‘å…³gateway 192.168.60.2#è®¾ç½®DNSæœåŠ¡å™¨ï¼ˆå¯é€‰ï¼‰dns-nameservers 223.5.5.5 8.8.8.8é‡å¯ç½‘ç»œæœåŠ¡ä»¥ç”Ÿæ•ˆ12345#é‡å¯ç½‘ç»œæœåŠ¡service networking restart#å¦‚æžœä¸Šé¢å‘½ä»¤é‡å¯ ip æ²¡å˜ï¼Œå¯ä»¥å°è¯•é‡å¯ç³»ç»Ÿè¯•è¯•rebootÂ¶ï¼ˆå››ï¼‰Ubuntu ç³»ç»Ÿé…ç½®é™æ€ IP12vi /etc/netplan/&lt;xxx&gt;-config.yaml#å¦‚ï¼švi /etc/netplan/00-installer-config.yamlé…ç½®å†…å®¹å¦‚ä¸‹ï¼š123456789101112131415network: version: 2 renderer: networkd #æŒ‡å®šåŽç«¯é‡‡ç”¨systemd-networkdæˆ–è€…Network Managerï¼Œå¯ä¸å¡«å†™åˆ™é»˜è®¤ä½¿ç”¨systemd-workd ethernets: ens33: #é…ç½®çš„ç½‘å¡çš„åç§° dhcp4: no #å…³é—­DHCPï¼Œå¦‚æžœéœ€è¦æ‰“å¼€DHCPåˆ™å†™yes #dhcp6: no addresses: - 192.168.60.130/24 #é…ç½®çš„é™æ€ipåœ°å€å’ŒæŽ©ç  #- å¯é…ç½® IPV6 åœ°å€ routes: - to: default via: 192.168.60.2 #ç½‘å…³åœ°å€ nameservers: addresses: [223.5.5.5, 8.8.8.8] #DNSæœåŠ¡å™¨åœ°å€ï¼Œå¤šä¸ªDNSæœåŠ¡å™¨åœ°å€éœ€è¦ç”¨è‹±æ–‡é€—å·åˆ†éš”å¼€é‡æ–°åŠ è½½é…ç½®ä»¥ç”Ÿæ•ˆ1netplan applyå‚è€ƒï¼šhttps://www.cnblogs.com/liujiaxin2018/p/16287463.htmlhttps://code84.com/810353.htmlhttps://www.myfreax.com/how-to-configure-static-ip-address-on-ubuntu-20-04/https://ld246.com/article/1593929878472Â¶ï¼ˆäº”ï¼‰Rocky Linux ç³»ç»Ÿé…ç½®é™æ€ IPå‚è€ƒï¼šç½‘å¡é…ç½®æ–‡ä»¶ä¿®æ”¹æ³•ï¼šhttps://www.cnblogs.com/liujiaxin2018/p/17379440.htmlhttps://docs.rockylinux.org/zh/gemstones/network/RL9_network_manager/#_2äº¤äº’å¼é…ç½®æ³•ï¼šhttps://docs.rockylinux.org/zh/guides/network/basic_network_configuration/Â¶6. é…ç½® DNS æœåŠ¡å™¨Â¶1ï¼‰å…¬å…± DNS æœåŠ¡å™¨ä»‹ç»å›½å†…çš„å¸¸ç”¨ DNS æœåŠ¡é˜¿é‡Œäº‘å…¬å…± DNSï¼šIPv4ï¼š223.5.5.5ã€ 223.6.6.6IPv6ï¼š2400:3200::1ã€2400:3200:baba::1è…¾è®¯äº‘å…¬å…± DNSï¼šIPv4ï¼š119.29.29.29ã€119.28.28.28IPv6ï¼š2402:4e00::ã€2402:4e00:1:: ï¼ˆå‚è€ƒï¼‰å—äº¬ä¿¡é£Žå…¬å…± DNS | 114DNSï¼šIPv4ï¼š114.114.114.114ã€114.114.115.115IPv6ï¼šæš‚æ— ç™¾åº¦å…¬å…± DNSï¼šIPv4ï¼š180.76.76.76IPv6ï¼š2400:da00::6666æ¸…åŽå¤§å­¦ TUNA åä¼šå…¬å…± DNS | DNS666ï¼šIPv4ï¼š101.6.6.6IPv6ï¼š2001:da8::666å›½å¤–å¸¸ç”¨ DNS æœåŠ¡Google Public DNSï¼šIPv4ï¼š8.8.8.8ã€8.8.4.4IPv6ï¼š2001:4860:4860::8888ã€2001:4860:4860::8844Cloudflare DNSï¼šIPv4ï¼š1.0.0.1ã€1.1.1.1IPv6ï¼š2606:4700:4700::1111ã€2606:4700:4700::1001OpenDNSï¼šIPv4ï¼š208.67.222.222ã€208.67.220.220IPv6ï¼š2620:119:35::35ã€2620:119:53::53 ï¼ˆå‚è€ƒï¼‰æœ€ä½³å®žè·µæŽ¨èï¼šè§£æžå›½å†…ç«™ç‚¹æŽ¨èä½¿ç”¨é˜¿é‡Œ DNS å’Œè…¾è®¯ DNSPodï¼ˆæ³¨é‡ç¨³å®šè¯·ç”¨å‰è€…ã€æ³¨é‡å‡†ç¡®è¯·ç”¨åŽè€…ï¼‰ï¼›è§£æžæµ·å¤–ç½‘ç«™æŽ¨èä¸» DNS 1.0.0.1 æˆ– 208.67.222.222ï¼Œå¤‡ DNS 8.8.8.8 æˆ– 8.8.4.4å‚è€ƒï¼šhttps://www.51cto.com/article/715641.htmlhttps://www.bilibili.com/read/cv24699923/Â¶2ï¼‰æŸ¥çœ‹å½“å‰ä½¿ç”¨çš„ DNS æœåŠ¡å™¨123456789##æŸ¥çœ‹å½“å‰ä½¿ç”¨çš„ DNS æœåŠ¡å™¨ï¼ˆé€šç”¨å‘½ä»¤ï¼‰cat /etc/resolv.conf##æŸ¥çœ‹å½“å‰ä½¿ç”¨çš„ DNS æœåŠ¡å™¨ï¼ˆç³»ç»Ÿä½¿ç”¨ systemd-resolved ç»´æŠ¤ DNS çš„æƒ…å†µï¼‰ #åœ¨ Ubuntu 16.10 æˆ–æ›´æ–°çš„ç‰ˆæœ¬ä¸­ï¼Œ/etc/resolv.conf æ–‡ä»¶é€šå¸¸ç”± systemd-resolved æœåŠ¡åŠ¨æ€ç”Ÿæˆå’Œç®¡ç†ã€‚å› æ­¤ï¼Œç›´æŽ¥æŸ¥çœ‹ /etc/resolv.conf æ–‡ä»¶å¯èƒ½ä¸ä¼šæ˜¾ç¤º DNS æœåŠ¡å™¨çš„é…ç½®ï¼Œéœ€è¦é€šè¿‡ resolvectl status å‘½ä»¤è¿›è¡ŒæŸ¥çœ‹resolvectl status##æŸ¥çœ‹å½“å‰ä½¿ç”¨çš„ DNS æœåŠ¡å™¨ï¼ˆç³»ç»Ÿä½¿ç”¨ resolvconf ç»´æŠ¤ DNS çš„æƒ…å†µï¼‰resolvconf -lå°†çœ‹åˆ°ä¸€ä¸ªæˆ–å¤šä¸ª nameserver è¡Œï¼Œæ¯è¡ŒåŽé¢è·Ÿç€ DNS æœåŠ¡å™¨çš„ IP åœ°å€Â¶3ï¼‰Linux ç³»ç»Ÿé…ç½® DNS æœåŠ¡å™¨Â¶ï¼ˆ1ï¼‰ä¸´æ—¶é…ç½®ç³»ç»Ÿ DNS æœåŠ¡å™¨Linux ç³»ç»Ÿçš„ DNS é…ç½®ç”± /etc/resolv.conf é…ç½®æ–‡ä»¶çš„ DNS é…ç½®å†…å®¹å†³å®šçš„ï¼Œä¸´æ—¶æƒ…å†µåªéœ€è¦åœ¨è¯¥æ–‡ä»¶é‡Œé…ç½®ä¸€ä¸ªæˆ–å¤šä¸ª nameserver å³å¯ä½¿ç”¨è‡ªå®šä¹‰çš„ DNS æœåŠ¡å™¨ï¼ˆæ²¡æœ‰ nameserver åˆ™è¡¨ç¤ºä¸ä½¿ç”¨ DNS æœåŠ¡å™¨ï¼‰ï¼Œä¿®æ”¹è¯¥æ–‡ä»¶åŽä¼šç«‹å³ç”Ÿæ•ˆï¼ˆä¸éœ€è¦é‡å¯ç½‘ç»œç­‰æ“ä½œï¼‰ï¼Œé…ç½®å¦‚ä¸‹ï¼š1234567#æ·»åŠ æˆ–ä¿®æ”¹ nameserver è¡Œä»¥æŒ‡å®š DNS æœåŠ¡å™¨çš„ IP åœ°å€#å¯é…ç½®ä¸€ä¸ªæˆ–å¤šä¸ª nameserver è¡Œï¼Œæ¯è¡ŒåŽé¢è·Ÿç€ DNS æœåŠ¡å™¨çš„ IP åœ°å€vi /etc/resolv.conf#é…ç½®å†…å®¹å¦‚ä¸‹ï¼šsearch localdomainnameserver 223.5.5.5nameserver 8.8.8.8Â¶ï¼ˆ3ï¼‰æ°¸ä¹…é…ç½® DNS æœåŠ¡å™¨Â¶æ–¹å¼ 1ã€ç»´æŠ¤ç½‘ç»œæŽ¥å£é…ç½®æ–‡ä»¶çš„ DNS é…ç½®ï¼ˆæŽ¨èï¼‰æç¤ºï¼šåœ¨ç½‘ç»œæŽ¥å£é…ç½®æ–‡ä»¶ä¸­ï¼Œå¦‚æžœèŽ·å– IP çš„æ–¹å¼ä¸ºé™æ€çš„ï¼Œåˆ™éœ€è¦æ‰‹åŠ¨é…ç½® DNS æœåŠ¡å™¨ï¼Œè¿™äº›é…ç½®ä¼šè‡ªåŠ¨æ›´æ–°åˆ° /etc/resolv.conf æ–‡ä»¶ä¸­ã€‚å¦‚æžœèŽ·å– IP çš„æ–¹å¼ä¸º DHCPï¼Œåˆ™å¯ä»¥ä¸ç”¨æ‰‹åŠ¨è®¾ç½® DNS æœåŠ¡å™¨ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨ä½¿ç”¨ DHCP åˆ†é…çš„ DNS æœåŠ¡å™¨å¹¶æ›´æ–°åˆ° /etc/resolv.conf æ–‡ä»¶ä¸­ï¼Œè€Œåœ¨ DHCP çš„æƒ…å†µä¸‹åˆæ‰‹åŠ¨è‡ªå®šä¹‰äº† DNS æœåŠ¡å™¨ï¼Œé‚£ä¹ˆè‡ªå®šä¹‰çš„ DNS æœåŠ¡å™¨å’Œ DHCP åˆ†é…çš„ DNS æœåŠ¡å™¨éƒ½ä¼šåŒæ—¶æ›´æ–°åˆ° /etc/resolv.conf æ–‡ä»¶ä¸­ã€‚å¯¹äºŽ Redhat ç³»åˆ—ç³»ç»Ÿï¼Œæ“ä½œå¦‚ä¸‹ï¼š12345678910111213#ï¼ˆ1ï¼‰ç¼–è¾‘ç½‘ç»œæŽ¥å£é…ç½®æ–‡ä»¶vi /etc/sysconfig/network-scripts/ifcfg-&lt;ç½‘ç»œæŽ¥å£åç§°&gt;#å¦‚ï¼švi /etc/sysconfig/network-scripts/ifcfg-ens33#æ·»åŠ æˆ–ä¿®æ”¹å¦‚ä¸‹ DNS é…ç½®DNS1="223.5.5.5"DNS2="8.8.8.8"#ï¼ˆ2ï¼‰é‡å¯ç½‘ç»œæœåŠ¡ä»¥ç”Ÿæ•ˆservice network restart#ï¼ˆ3ï¼‰æŸ¥çœ‹å½“å‰ä½¿ç”¨çš„ DNS æœåŠ¡å™¨ï¼ˆç¼–è¾‘ç½‘ç»œæŽ¥å£çš„ DNS é…ç½®ä¼šè‡ªåŠ¨æ›´æ–°åˆ° /etc/resolv.conf æ–‡ä»¶ä¸­ï¼‰cat /etc/resolv.confå¯¹äºŽ Debain ç³»ç»Ÿï¼Œæ“ä½œå¦‚ä¸‹ï¼š123456789101112131415161718#ï¼ˆ1ï¼‰ç¼–è¾‘ç½‘ç»œæŽ¥å£é…ç½®æ–‡ä»¶vi /etc/network/interfaces#æ·»åŠ æˆ–ä¿®æ”¹å¦‚ä¸‹ DNS é…ç½®dns-nameservers 223.5.5.5 8.8.8.8#ï¼ˆ2ï¼‰å®‰è£… resolvconf æœåŠ¡ #ä»¥ä¸Š dns-nameservers é…ç½®åœ¨æœ€å°åŒ–å®‰è£…çš„ Debian ç³»ç»Ÿä¸­å¯èƒ½ä¸ä¼šç”Ÿæ•ˆï¼ˆå³ä¸ä¼šè‡ªåŠ¨æ›´æ–°åˆ° /etc/resolv.conf ä¸­ï¼‰ï¼Œå¦‚éœ€ä½¿å…¶ç”Ÿæ•ˆï¼Œå¯å¦‚ä¸‹æ“ä½œï¼š#å®‰è£… resolvconfapt install -y resolvconf#å¯ç”¨ resolvconf æœåŠ¡è‡ªå¯åŠ¨å¹¶ç«‹å³å…è®¸æœåŠ¡systemctl enable --now resolvconf.service#ï¼ˆ3ï¼‰é‡å¯ç½‘ç»œæœåŠ¡ä»¥ç”Ÿæ•ˆservice networking restart#ï¼ˆ4ï¼‰æŸ¥çœ‹å½“å‰ä½¿ç”¨çš„ DNS æœåŠ¡å™¨ï¼ˆç¼–è¾‘ç½‘ç»œæŽ¥å£çš„ DNS é…ç½®ä¼šè‡ªåŠ¨æ›´æ–°åˆ° /etc/resolv.conf æ–‡ä»¶ä¸­ï¼‰cat /etc/resolv.confå¯¹äºŽ Ubuntu ç³»åˆ—ç³»ç»Ÿï¼Œæ“ä½œå¦‚ä¸‹ï¼š1234567891011121314151617181920#ï¼ˆ1ï¼‰ç¼–è¾‘ç½‘ç»œæŽ¥å£é…ç½®æ–‡ä»¶vi /etc/netplan/&lt;xxx&gt;-config.yaml#å¦‚ï¼švi /etc/netplan/00-installer-config.yaml#æ·»åŠ æˆ–ä¿®æ”¹å¦‚ä¸‹ DNS é…ç½®ï¼ˆå…³æ³¨ï¼šnameserversï¼‰network: #å…¶ä»–é…ç½® ethernets: #å…¶ä»–é…ç½® ens33: #é…ç½®çš„ç½‘å¡çš„åç§° #å…¶ä»–é…ç½® nameservers: addresses: [223.5.5.5, 8.8.8.8] #DNSæœåŠ¡å™¨åœ°å€ï¼Œå¤šä¸ªDNSæœåŠ¡å™¨åœ°å€éœ€è¦ç”¨è‹±æ–‡é€—å·åˆ†éš”å¼€#ï¼ˆ2ï¼‰é‡æ–°åŠ è½½é…ç½®ä»¥ç”Ÿæ•ˆnetplan apply#ï¼ˆ3ï¼‰æŸ¥çœ‹å½“å‰ä½¿ç”¨çš„ DNS æœåŠ¡å™¨ï¼ˆç¼–è¾‘ç½‘ç»œæŽ¥å£çš„ DNS é…ç½®ä¼šè‡ªåŠ¨æ›´æ–°åˆ° /etc/resolv.conf æ–‡ä»¶ä¸­ï¼‰cat /etc/resolv.confÂ¶æ–¹å¼ 2ã€ç¦æ­¢å…¶ä»–ç½‘ç»œé…ç½®å·¥å…·è‡ªåŠ¨æ›´æ–° DNSç”±äºŽè¿™ç§æ–¹å¼ä¿®æ”¹çš„å†…å®¹è¾ƒå¤šï¼Œæ‰€ä»¥ä¸æŽ¨èæ‰‹åŠ¨ä¿®æ”¹ /etc/resolv.conf é…ç½®æ–‡ä»¶é»˜è®¤åªèƒ½ä¸´æ—¶ç”Ÿæ•ˆï¼Œé€šå¸¸é‡å¯ç½‘ç»œæˆ–é‡å¯ç³»ç»ŸåŽï¼Œè‡ªå®šä¹‰çš„é…ç½®å†…å®¹å°†ä¼šè¢«é‡ç½®ï¼Œè¿™æ˜¯å› ä¸ºè¯¥æ–‡ä»¶çš„é…ç½®å†…å®¹ä¼šè¢«ç³»ç»Ÿçš„ä¸€äº›å…¶ä»–ç½‘ç»œé…ç½®å·¥å…·ï¼ˆå¦‚ï¼šdhclient-scriptã€NetworkManager æœåŠ¡ç­‰ï¼‰æ‰€é»˜è®¤ç»´æŠ¤ï¼Œä¾‹å¦‚ï¼šdhclient-scriptã€systemd-resolvedã€NetworkManager ç­‰é»˜è®¤éƒ½ä¼šèŽ·å– DHCP æœåŠ¡å™¨çš„ IP å¹¶è‡ªåŠ¨è¿½åŠ åˆ° /etc/resolv.conf é‡Œï¼Œå¦‚æžœç½‘ç»œæŽ¥å£é…ç½®æ–‡ä»¶ä¸­è¿˜å®šä¹‰äº†å…¶ä»–çš„ DNS é…ç½®ï¼Œé‚£ä¹ˆè¿™äº› DNS é…ç½®ä¹Ÿä¼šè¢«è¿½åŠ åˆ° /etc/resolv.conf ä¸­ã€‚å¦‚æžœä¸å¸Œæœ› /etc/resolv.conf æ–‡ä»¶æ‰€æ‰‹åŠ¨è‡ªå®šä¹‰çš„å†…å®¹è¢«å…¶ä»–ç½‘ç»œé…ç½®å·¥å…·æ‰€å½±å“ï¼Œé€šå¸¸åªéœ€å¦‚ä¸‹æ“ä½œï¼šå¯¹äºŽ Redhat ç³»åˆ—ç³»ç»Ÿï¼Œæ“ä½œå¦‚ä¸‹ï¼š123456789101112131415161718192021222324252627282930313233#1ã€ç¦æ­¢ NetworkManager æœåŠ¡è‡ªåŠ¨æ›´æ–° DNSecho -e "[main]\ndns=none" &gt; /etc/NetworkManager/conf.d/no-dns.confsystemctl restart NetworkManager.service#2ã€ç¦æ­¢ç½‘ç»œæŽ¥å£è‡ªåŠ¨æ›´æ–° DNS #åœ¨ç½‘ç»œæŽ¥å£é…ç½®æ–‡ä»¶ä¸­æ·»åŠ ï¼šPEERDNS="no"ï¼Œå…¶è¡¨ç¤ºç¦æ­¢ç½‘ç»œæŽ¥å£è‡ªåŠ¨æ›´æ–° /etc/resolv.conf æ–‡ä»¶ä¸­çš„ DNS æœåŠ¡å™¨ï¼Œé»˜è®¤ PEERDNS çš„å€¼ä¸º truevi /etc/sysconfig/network-scripts/ifcfg-&lt;ç½‘ç»œæŽ¥å£åç§°&gt; #å¦‚ï¼švi /etc/sysconfig/network-scripts/ifcfg-ens33#3ã€æ¸…ç©º /etc/resolv.conf æ–‡ä»¶çš„é…ç½®å†…å®¹echo "" &gt; /etc/resolv.conf#4ã€é‡å¯ç½‘ç»œæœåŠ¡ä»¥ç”Ÿæ•ˆsystemctl restart network#5ã€è‡ªå®šä¹‰ DNS æœåŠ¡å™¨ï¼Œä¹‹åŽé…ç½®å°†ä¼šæ°¸ä¹…æœ‰æ•ˆï¼ˆä¸ä¼šè¢«å…¶ä»–ç½‘ç»œé…ç½®å·¥å…·æ‰€é‡ç½®ï¼‰cat &gt; /etc/resolv.conf &lt;&lt; EOFsearch localdomainnameserver 223.5.5.5nameserver 8.8.8.8EOF##å¦‚éœ€æ¢å¤ NetworkManager å’Œç½‘ç»œæŽ¥å£æ¥ç»´æŠ¤ /etc/resolv.confï¼Œåˆ™å¦‚ä¸‹æ“ä½œï¼š#1ã€å…è®¸ NetworkManager æœåŠ¡è‡ªåŠ¨æ›´æ–° DNSrm -f /etc/NetworkManager/conf.d/no-dns.confsystemctl restart NetworkManager.service#2ã€å…è®¸ç½‘ç»œæŽ¥å£è‡ªåŠ¨æ›´æ–° DNS #åˆ é™¤æˆ–æ³¨é‡ŠæŽ‰ PEERDNS="no"ç›¸å…³çš„è¡Œvi /etc/sysconfig/network-scripts/ifcfg-&lt;ç½‘ç»œæŽ¥å£åç§°&gt; #å¦‚ï¼švi /etc/sysconfig/network-scripts/ifcfg-ens33#3ã€é‡å¯ç½‘ç»œæœåŠ¡ä»¥ç”Ÿæ•ˆ #é‡å¯ç½‘ç»œåŽ /etc/resolv.conf çš„å†…å®¹å°†ä¼šè‡ªåŠ¨è¢« NetworkManager å’Œç½‘ç»œæŽ¥å£é‡ç½®systemctl restart networkå¯¹äºŽ Debain ç³»ç»Ÿï¼Œæ“ä½œå¦‚ä¸‹ï¼š123456789101112131415161718#1ã€ç¦ç”¨å¹¶ç«‹å³åœæ­¢ resolvconf æœåŠ¡systemctl disable --now resolvconf.service#2ã€é‡å¯ç½‘ç»œæœåŠ¡ä»¥ç”Ÿæ•ˆservice networking restart#3ã€æ¸…ç©º /etc/resolv.conf æ–‡ä»¶çš„é…ç½®å†…å®¹echo "" &gt; /etc/resolv.conf#4ã€è‡ªå®šä¹‰ DNS æœåŠ¡å™¨ï¼Œä¹‹åŽé…ç½®å°†ä¼šæ°¸ä¹…æœ‰æ•ˆï¼ˆä¸ä¼šè¢«å…¶ä»–ç½‘ç»œé…ç½®å·¥å…·æ‰€é‡ç½®ï¼‰cat &gt; /etc/resolv.conf &lt;&lt; EOFsearch localdomainnameserver 223.5.5.5nameserver 8.8.8.8EOF#å¦‚éœ€æ¢å¤ resolvconf æ¥ç»´æŠ¤ /etc/resolv.confï¼Œåˆ™å¦‚ä¸‹æ“ä½œï¼šsystemctl enable --now resolvconf.service#é‡å¯ç½‘ç»œæœåŠ¡ä»¥ç”Ÿæ•ˆservice networking restartå¯¹äºŽ Ubuntu ç³»ç»Ÿï¼Œæ“ä½œå¦‚ä¸‹ï¼š1234567891011121314#1ã€ç¦ç”¨å¹¶ç«‹å³åœæ­¢ systemd-resolved æœåŠ¡systemctl disable --now systemd-resolved.service#2ã€æ¸…ç©º /etc/resolv.conf æ–‡ä»¶çš„é…ç½®å†…å®¹echo "" &gt; /etc/resolv.conf#3ã€è‡ªå®šä¹‰ DNS æœåŠ¡å™¨ï¼Œä¹‹åŽé…ç½®å°†ä¼šæ°¸ä¹…æœ‰æ•ˆï¼ˆä¸ä¼šè¢«å…¶ä»–ç½‘ç»œé…ç½®å·¥å…·æ‰€é‡ç½®ï¼‰cat &gt; /etc/resolv.conf &lt;&lt; EOFsearch localdomainnameserver 223.5.5.5nameserver 8.8.8.8EOF#å¦‚éœ€æ¢å¤ systemd-resolved æ¥ç»´æŠ¤ /etc/resolv.confï¼Œåˆ™å¦‚ä¸‹æ“ä½œï¼šsystemctl enable --now systemd-resolved.serviceå‚è€ƒï¼šhttps://cloud.tencent.com/developer/article/1710514Â¶4ï¼‰Windows ç³»ç»Ÿé…ç½® DNS æœåŠ¡å™¨å…·ä½“æ“ä½œå¯å‚è€ƒï¼šhttps://developer.aliyun.com/article/872704è¡¥å……è¯´æ˜Žï¼šå¤§éƒ¨åˆ†æƒ…å†µä¸‹æ˜¯ç›´æŽ¥ç”Ÿæ•ˆï¼Œå¦‚æœªç”Ÿæ•ˆå¯å°è¯•ä¸‹é¢çš„åŠžæ³•ï¼Œå¯é€šè¿‡å¦‚ä¸‹å‘½ä»¤åˆ·æ–° DNS1ipconfig /flushdnsÂ¶7. DNS åŸŸåè§£æžæŸ¥è¯¢1234567891011121314#ä½¿ç”¨ nslookup å‘½ä»¤æŸ¥è¯¢ #æŸ¥è¯¢ç»“æžœå«å¦‚ä¸‹å†…å®¹ï¼š #ï¼ˆ1ï¼‰æŸ¥è¯¢åˆ°çš„ IP è§£æžç»“æžœ #ï¼ˆ2ï¼‰æŸ¥è¯¢åŸŸåæ—¶ä½¿ç”¨çš„ DNS æœåŠ¡å™¨ï¼ˆé»˜è®¤ä¸ºç³»ç»Ÿé…ç½®çš„ DNS æœåŠ¡å™¨ï¼‰ï¼Œå¯åœ¨ä½¿ç”¨æ—¶æŒ‡å®š DNS æœåŠ¡å™¨ï¼Œå¦‚ï¼šnslookup example.com 8.8.8.8 #è¯¥å‘½ä»¤å¯é€‚ç”¨äºŽ Windows ç³»ç»Ÿnslookup example.com#ä½¿ç”¨ dig å‘½ä»¤æŸ¥è¯¢ #æŸ¥è¯¢ç»“æžœå«å¦‚ä¸‹å†…å®¹ï¼š #ï¼ˆ1ï¼‰æŸ¥è¯¢åˆ°çš„ IP è§£æžç»“æžœ #ï¼ˆ2ï¼‰æŸ¥è¯¢åŸŸåæ—¶ä½¿ç”¨çš„ DNS æœåŠ¡å™¨ï¼ˆé»˜è®¤ä¸ºç³»ç»Ÿé…ç½®çš„ DNS æœåŠ¡å™¨ï¼‰ï¼Œå¯åœ¨ä½¿ç”¨æ—¶æŒ‡å®š DNS æœåŠ¡å™¨ï¼Œå¦‚ï¼šdig example.com @8.8.8.8 #ï¼ˆ3ï¼‰åŸŸåçš„ DNS è®°å½•ç±»åž‹dig example.comÂ¶8. é…ç½®é˜²ç«å¢™Â¶1ï¼‰ç®€è¦æ¦‚è¿°Linux ä¸­å¸¸è§çš„é˜²ç«å¢™è½¯ä»¶æœ‰ IPtablesã€UFWã€FirewallDï¼Œé€šè¿‡è¿™äº›å·¥å…·å¯ä»¥å¯¹ç½‘ç»œæµé‡è¿›è¡Œç®¡ç†å’ŒæŽ§åˆ¶ï¼Œä¿éšœç³»ç»Ÿçš„å®‰å…¨æ€§å’Œç¨³å®šæ€§ã€‚æ³¨æ„ï¼šIPtablesã€UFWã€FirewallD è¿™ä¸‰ç§é˜²ç«å¢™è½¯ä»¶å¹¶ä¸æ˜¯ç‹¬ç«‹çš„ï¼Œè€Œæ˜¯å­˜åœ¨è”ç³»å’Œä¾èµ–å…³ç³»ã€‚FirewallD å’Œ UFW éƒ½æ˜¯åŸºäºŽ IPtables çš„å‰ç«¯å·¥å…·ï¼Œå¯ä»¥å¸®åŠ©ç”¨æˆ·æ›´æ–¹ä¾¿åœ°é…ç½®å’Œç®¡ç† iptables è§„åˆ™ã€‚åŒæ—¶ï¼ŒIPtables ä»ç„¶æ˜¯ Linux ç³»ç»Ÿä¸­é»˜è®¤çš„é˜²ç«å¢™è½¯ä»¶ä¹‹ä¸€ï¼Œä¸ºå…¶ä»–é˜²ç«å¢™è½¯ä»¶æä¾›äº†åº•å±‚æ”¯æŒå’ŒåŠŸèƒ½ã€‚ç”¨æˆ·å¯ä»¥æ ¹æ®å®žé™…éœ€æ±‚å’ŒçŽ¯å¢ƒé€‰æ‹©åˆé€‚çš„é˜²ç«å¢™è½¯ä»¶ï¼Œå¹¶è¿›è¡Œé€‚å½“çš„é…ç½®å’Œç®¡ç†ï¼Œä»¥ç¡®ä¿ç³»ç»Ÿçš„å®‰å…¨æ€§å’Œé«˜å¯ç”¨æ€§ã€‚Â¶2ï¼‰IPtables é˜²ç«å¢™IPtables æ˜¯ Linux å‘è¡Œç‰ˆä¸­å†…ç½®çš„åŸºäºŽ Netfilter å†…æ ¸æ¨¡å—çš„é˜²ç«å¢™è½¯ä»¶ï¼Œå¯ç”¨äºŽæŽ§åˆ¶å’Œè¿‡æ»¤ç½‘ç»œæµé‡ã€‚åœ¨ iptables ä¸­ï¼Œæœ‰å››ä¸ªä¸»è¦çš„è¡¨ï¼ˆtableï¼‰å’Œäº”ä¸ªé¢„å®šä¹‰çš„é“¾ï¼ˆchainï¼‰ï¼Œåˆ†åˆ«æ˜¯ï¼šfilter è¡¨ï¼šè¿™æ˜¯é»˜è®¤æƒ…å†µä¸‹ä½¿ç”¨çš„è¡¨ï¼Œç”¨äºŽè¿›è¡Œæœ€å¸¸è§çš„é˜²ç«å¢™æ“ä½œï¼Œä¾‹å¦‚è¿‡æ»¤æ•°æ®åŒ…ã€ç¦æ­¢æˆ–å…è®¸ç‰¹å®šç«¯å£æˆ– IP åœ°å€ç­‰ã€‚å®ƒåŒ…å«äº†ä¸‰ä¸ªä¸»è¦çš„é“¾ï¼šINPUTã€OUTPUT å’Œ FORWARD é“¾ã€‚nat è¡¨ï¼šè¿™ä¸ªè¡¨ç”¨äºŽè¿›è¡Œç½‘ç»œåœ°å€è½¬æ¢ï¼ˆNATï¼‰æ“ä½œï¼Œä¾‹å¦‚å°†ç§æœ‰ IP åœ°å€æ˜ å°„åˆ°å…¬å…± IP åœ°å€ã€ä¿®æ”¹æºæˆ–ç›®æ ‡ IP åœ°å€ç­‰ã€‚å®ƒåŒ…å«äº†ä¸‰ä¸ªä¸»è¦çš„é“¾ï¼šPREROUTINGã€POSTROUTING å’Œ OUTPUT é“¾ã€‚mangle è¡¨ï¼šè¿™ä¸ªè¡¨ç”¨äºŽä¿®æ”¹æ•°æ®åŒ…çš„å¤´éƒ¨ä¿¡æ¯ï¼Œä¾‹å¦‚ä¿®æ”¹ TTL å€¼ã€æ ‡è®°æ•°æ®åŒ…ã€æ›´æ”¹ QoS ä¿¡æ¯ç­‰ã€‚å®ƒåŒ…å«äº†äº”ä¸ªä¸»è¦çš„é“¾ï¼šPREROUTINGã€OUTPUTã€INPUTã€FORWARD å’Œ POSTROUTING é“¾ã€‚raw è¡¨ï¼šè¿™ä¸ªè¡¨ç”¨äºŽå¤„ç†æ•°æ®åŒ…ä¹‹å‰çš„è¿žæŽ¥è¿½è¸ªï¼ˆconnection trackingï¼‰æ“ä½œï¼Œä¾‹å¦‚ç¦æ­¢æˆ–å…è®¸ç‰¹å®šåè®®ã€é…ç½® ICMP å‚æ•°ç­‰ã€‚å®ƒåŒ…å«äº†ä¸¤ä¸ªä¸»è¦çš„é“¾ï¼šPREROUTING å’Œ OUTPUT é“¾ã€‚å…¶ä¸­ï¼Œäº”ä¸ªé¢„å®šä¹‰çš„é“¾æ˜¯ï¼šINPUT é“¾ï¼šè¿™ä¸ªé“¾ç”¨äºŽå¯¹ä¼ å…¥åˆ°æœ¬æœºçš„å…¥ç«™æ•°æ®åŒ…è¿›è¡Œå¤„ç†ã€‚OUTPUT é“¾ï¼šè¿™ä¸ªé“¾ç”¨äºŽå¯¹æœ¬æœºå‘èµ·çš„å‡ºç«™æ•°æ®åŒ…è¿›è¡Œå¤„ç†ã€‚FORWARD é“¾ï¼šè¿™ä¸ªé“¾ç”¨äºŽå¯¹é€šè¿‡æœ¬æœºè¿›è¡Œè½¬å‘çš„æ•°æ®åŒ…è¿›è¡Œå¤„ç†ã€‚PREROUTING é“¾ï¼šè¿™ä¸ªé“¾ç”¨äºŽå¯¹é€šè¿‡ç½‘ç»œæŽ¥å£çš„å…¥ç«™æ•°æ®åŒ…è¿›è¡Œå¤„ç†ã€‚POSTROUTING é“¾ï¼šè¿™ä¸ªé“¾ç”¨äºŽå¯¹é€šè¿‡ç½‘ç»œæŽ¥å£çš„å‡ºç«™æ•°æ®åŒ…è¿›è¡Œå¤„ç†ã€‚æç¤ºï¼šDebain ç­‰ç³»ç»Ÿä»¥åŠä¸€äº›è¾ƒæ—§ç‰ˆæœ¬çš„ Linux å‘è¡Œç‰ˆç³»ç»Ÿï¼ˆä¾‹å¦‚ï¼šCentOS 6ã€Red Hat Enterprise Linux (RHEL) 6ã€Ubuntu 14.04 LTS ç­‰ï¼‰é»˜è®¤åªå®‰è£…æœ‰ iptables é˜²ç«å¢™è½¯ä»¶ï¼Œè€Œæœªå®‰è£… UFWã€FirewallD ç­‰ã€‚å¦‚æžœç³»ç»Ÿä¸­å®‰è£…æœ‰è¿™äº›ä¸Šå±‚çš„é˜²ç«å¢™è½¯ä»¶ï¼Œä½†åˆå¸Œæœ›åªä½¿ç”¨ iptables æ¥ç®¡ç†é˜²ç«å¢™ï¼Œåˆ™ä¸€å®šè¦å¸è½½æŽ‰è¿™äº›ä¸Šå±‚çš„é˜²ç«å¢™è½¯ä»¶ã€‚Â¶ï¼ˆ1ï¼‰è¯­æ³•æ ¼å¼1iptables [-t è¡¨å] å‘½ä»¤é€‰é¡¹ [é“¾å] [å‚æ•°é€‰é¡¹] [-j åŠ¨ä½œ][-t è¡¨å]ï¼šå¯é€‰å‚æ•°ï¼Œç”¨äºŽæŒ‡å®šè¦æ“ä½œçš„è¡¨åç§°ã€‚è¡¨å®šä¹‰äº†ç‰¹å®šç±»åž‹çš„è§„åˆ™é›†åˆã€‚å¸¸è§çš„è¡¨æœ‰filterã€natå’Œmangleã€‚å¦‚æžœä¸æŒ‡å®šè¡¨åï¼Œåˆ™é»˜è®¤ä¸ºfilterè¡¨ã€‚å‘½ä»¤é€‰é¡¹ï¼šæŒ‡å®šè¦æ‰§è¡Œçš„æ“ä½œå‘½ä»¤ã€‚é€šå¸¸å•å­—æ¯å‘½ä»¤é€‰é¡¹ä¸ºå¤§å†™å­—æ¯è¡¨ç¤ºï¼Œå¸¸è§çš„å‘½ä»¤åŒ…æ‹¬ï¼š-Aï¼ˆ--appendï¼‰ï¼šåœ¨æŒ‡å®šé“¾çš„æœ«å°¾æ·»åŠ ä¸€æ¡æ–°è§„åˆ™ã€‚ï¼ˆå¦‚ ï¼š-A &lt;chain&gt;ï¼‰-Dï¼ˆ--deleteï¼‰ï¼šåˆ é™¤æŒ‡å®šé“¾ä¸­çš„ä¸€æ¡è§„åˆ™ã€‚-Iï¼ˆ--insertï¼‰ï¼šåœ¨æŒ‡å®šé“¾çš„å¼€å¤´æˆ–æŒ‡å®šä½ç½®æ’å…¥ä¸€æ¡æ–°è§„åˆ™ã€‚ï¼ˆå¦‚ï¼š-I &lt;chain&gt; [num] ï¼Œnum è¡¨ç¤ºé“¾çš„è¡Œå·ï¼ˆç¼–å·ï¼‰ä½ç½®ï¼Œå¦‚æžœä¸æŒ‡å®šåˆ™ä¸ºé“¾çš„å¼€å¤´ï¼‰-Rï¼ˆ--replaceï¼‰ï¼šæ›¿æ¢æŒ‡å®šé“¾ä¸­çš„ä¸€æ¡è§„åˆ™ã€‚-Lï¼ˆ--listï¼‰ï¼šåˆ—å‡ºæŒ‡å®šé“¾æˆ–è¡¨ä¸­çš„è§„åˆ™ã€‚-Fï¼ˆ--flushï¼‰ï¼šæ¸…é™¤æŒ‡å®šé“¾ä¸­çš„æ‰€æœ‰è§„åˆ™ã€‚-Zï¼ˆ--zeroï¼‰ï¼šå°†æŒ‡å®šé“¾ä¸­çš„æ•°æ®åŒ…å’Œå­—èŠ‚è®¡æ•°å™¨å½’é›¶ã€‚[é“¾å]ï¼šå¯é€‰å‚æ•°ï¼Œç”¨äºŽæŒ‡å®šè¦æ“ä½œçš„é“¾åç§°ã€‚é“¾æ˜¯è§„åˆ™çš„é›†åˆï¼Œå®ƒä»¬å†³å®šäº†æ•°æ®åŒ…çš„æµå‘å’Œå¤„ç†æ–¹å¼ã€‚æ ¹æ®å…·ä½“çš„è¡¨å’Œå‘½ä»¤ï¼Œå¯èƒ½éœ€è¦æŒ‡å®šé“¾åã€‚[å‚æ•°é€‰é¡¹]ï¼šç”¨äºŽæŒ‡å®šè§„åˆ™çš„åŒ¹é…æ¡ä»¶å’Œå…¶ä»–å‚æ•°ã€‚é€šå¸¸å•å­—æ¯å‚æ•°é€‰é¡¹ä¸ºå°å†™å­—æ¯è¡¨ç¤ºï¼Œå¸¸è§çš„å‚æ•°é€‰é¡¹åŒ…æ‹¬ï¼š[!] -sï¼šæŒ‡å®šåŒ¹é…æ•°æ®åŒ…çš„æºåœ°å€æˆ–åœ°å€èŒƒå›´ã€‚è¡¨ç¤ºæ–¹å¼ï¼šå•ä¸ª IP åœ°å€ï¼ˆå¦‚ï¼š-s 192.168.0.1ï¼‰ã€CIDR è¡¨ç¤ºæ³•ï¼ˆ-s 192.168.0.0/24ï¼‰ã€ä¸»æœºåï¼ˆå¦‚ï¼š-s host1ï¼‰ã€ç½‘ç»œæŽ¥å£ï¼ˆå¦‚ï¼š-s eth0ï¼‰[!] -dï¼šæŒ‡å®šåŒ¹é…æ•°æ®åŒ…çš„ç›®æ ‡åœ°å€æˆ–åœ°å€èŒƒå›´ã€‚åœ°å€è¡¨ç¤ºæ–¹å¼ç±»æ¯” -sã€‚[!] -pï¼šæŒ‡å®šè¦åŒ¹é…çš„åè®®ç±»åž‹ï¼Œå¦‚ï¼štcpã€udpã€icmpã€allï¼ˆé»˜è®¤å€¼ï¼Œè¡¨ç¤ºåŒ¹é…æ‰€æœ‰åè®®ï¼‰ç­‰ã€‚[!] -iï¼ˆ--in-interfaceï¼‰ï¼šæŒ‡å®šæ•°æ®åŒ…è¿›å…¥é˜²ç«å¢™çš„ç½‘ç»œæŽ¥å£ï¼Œç”¨äºŽåŒ¹é…æ•°æ®åŒ…çš„è¾“å…¥æŽ¥å£ã€‚[!] -oï¼ˆ--out-interfaceï¼‰ï¼šæŒ‡å®šæ•°æ®åŒ…ç¦»å¼€é˜²ç«å¢™çš„ç½‘ç»œæŽ¥å£ï¼Œç”¨äºŽåŒ¹é…æ•°æ®åŒ…çš„è¾“å‡ºæŽ¥å£ã€‚[!] --sportï¼šæŒ‡å®šè¦åŒ¹é…çš„å•ä¸ªæºç«¯å£å·ã€‚è¡¨ç¤ºæ–¹å¼ï¼šå•ä¸ªç«¯å£ï¼ˆå¦‚ï¼š--sport 80ï¼‰[!] --dportï¼šæŒ‡å®šè¦åŒ¹é…çš„å•ä¸ªç›®æ ‡ç«¯å£å·ã€‚è¡¨ç¤ºæ–¹å¼ç±»æ¯” --sportã€‚[!] --sportsï¼šæŒ‡å®šè¦åŒ¹é…çš„å¤šä¸ªæºç«¯å£å·ã€‚è¡¨ç¤ºæ–¹å¼ï¼šå•ä¸ªç«¯å£ï¼ˆå¦‚ï¼š--sports 80ï¼‰ã€é€—å·åˆ†éš”çš„å¤šä¸ªç«¯å£åˆ—è¡¨ï¼ˆå¦‚ï¼š--sports 80,443ï¼‰ã€ç«¯å£èŒƒå›´ï¼ˆå¦‚ï¼š--sports 8000:9000 ï¼Œè¡¨ç¤ºåŒ¹é…ç«¯å£åœ¨ 8000 åˆ° 9000 èŒƒå›´å†…çš„ï¼‰[!] --dports:æŒ‡å®šè¦åŒ¹é…çš„å¤šä¸ªç›®æ ‡ç«¯å£å·ã€‚è¡¨ç¤ºæ–¹å¼ç±»æ¯” --sportsã€‚[!] -m state --state è¿žæŽ¥çŠ¶æ€ï¼šåŒ¹é…è¿žæŽ¥çŠ¶æ€ã€‚NEWï¼ˆæ–°å»ºçš„è¿žæŽ¥ï¼‰ã€ESTABLISHEDï¼ˆå·²å»ºç«‹çš„è¿žæŽ¥ï¼‰ã€RELATEDï¼ˆå·²å…³è”è¿žæŽ¥ï¼Œå³å·²å»ºç«‹çš„è¿žæŽ¥ï¼‰ã€INVALIDï¼ˆæ— æ•ˆçš„è¿žæŽ¥ï¼‰è¯´æ˜Žï¼š!ï¼ˆå–åæ“ä½œç¬¦ï¼‰ç”¨äºŽå¯¹åŒ¹é…æ¡ä»¶è¿›è¡Œå–åæ“ä½œã€‚å®ƒå¯ä»¥åœ¨è§„åˆ™ä¸­ç”¨äºŽå¦å®šæŸä¸ªæ¡ä»¶ï¼Œä»Žè€Œé€‰æ‹©ä¸Žè¯¥æ¡ä»¶ä¸åŒ¹é…çš„æ•°æ®åŒ…ã€‚-j åŠ¨ä½œï¼šç”¨äºŽæŒ‡å®šè§„åˆ™åŒ¹é…åŽè¦æ‰§è¡Œçš„åŠ¨ä½œã€‚åŠ¨ä½œå¯ä»¥æ˜¯æŽ¥å—ã€ä¸¢å¼ƒã€æ‹’ç»ã€è½¬å‘ç­‰ã€‚å¸¸è§çš„åŠ¨ä½œåŒ…æ‹¬ï¼šACCEPTï¼šæŽ¥å—ï¼ˆå…è®¸ï¼‰æ”¾è¡Œæ•°æ®åŒ…ï¼Œå…è®¸æ•°æ®åŒ…é€šè¿‡é˜²ç«å¢™ã€‚DROPï¼šä¸¢å¼ƒï¼ˆæ‹’ç»ï¼‰æ•°æ®åŒ…ï¼Œç›´æŽ¥ä¸¢å¼ƒåŒ¹é…åˆ°çš„æ•°æ®åŒ…ï¼Œä¸ç»™äºˆä»»ä½•å“åº”ã€‚REJECTï¼šæ‹’ç»ï¼ˆæ‹’ç»è®¿é—®ï¼‰æ•°æ®åŒ…ï¼Œå‘é€ä¸€ä¸ªæ‹’ç»çš„å“åº”ç»™æºä¸»æœºï¼Œé€šçŸ¥å…¶è®¿é—®è¢«æ‹’ç»ã€‚LOGï¼šè®°å½•æ•°æ®åŒ…ä¿¡æ¯ï¼Œå°†åŒ¹é…åˆ°çš„æ•°æ®åŒ…çš„ç›¸å…³ä¿¡æ¯è®°å½•åˆ°ç³»ç»Ÿæ—¥å¿—ä¸­ï¼Œä»¥ä¾¿åŽç»­åˆ†æžã€‚DNATï¼šç›®æ ‡ç½‘ç»œåœ°å€è½¬æ¢ï¼Œç”¨äºŽç›®æ ‡åœ°å€çš„ä¿®æ”¹ï¼Œé€šå¸¸ä¸Žç½‘ç»œåœ°å€è½¬æ¢ï¼ˆNATï¼‰ä¸€èµ·ä½¿ç”¨ã€‚SNATï¼šæºç½‘ç»œåœ°å€è½¬æ¢ï¼Œç”¨äºŽæºåœ°å€çš„ä¿®æ”¹ï¼Œé€šå¸¸ä¸Žç½‘ç»œåœ°å€è½¬æ¢ï¼ˆNATï¼‰ä¸€èµ·ä½¿ç”¨ã€‚MASQUERADEï¼šç½‘ç»œåœ°å€è½¬æ¢ï¼ˆNATï¼‰çš„ä¸€ç§ç‰¹æ®Šå½¢å¼ï¼Œå°†å†…éƒ¨ç½‘ç»œçš„æ•°æ®åŒ…æºåœ°å€ä¿®æ”¹ä¸ºé˜²ç«å¢™çš„å¤–éƒ¨æŽ¥å£åœ°å€ã€‚REDIRECTï¼šé‡å®šå‘æ•°æ®åŒ…ï¼Œå°†åŒ¹é…åˆ°çš„æ•°æ®åŒ…é‡å®šå‘åˆ°æŒ‡å®šçš„ç›®æ ‡åœ°å€å’Œç«¯å£ã€‚MARKï¼šæ ‡è®°æ•°æ®åŒ…ï¼Œå¯ä»¥åœ¨åŒ¹é…åˆ°çš„æ•°æ®åŒ…ä¸Šè®¾ç½®ä¸€ä¸ªç‰¹å®šçš„æ ‡è®°ï¼Œä»¥ä¾›åŽç»­å¤„ç†ä½¿ç”¨ã€‚Â¶ï¼ˆ2ï¼‰æ·»åŠ è§„åˆ™12345678910111213141516#ç¤ºä¾‹1ï¼šæ”¾è¡ŒæŒ‡å®šç«¯å£ # -t filterå¯çœç•¥ # æ·»åŠ  â€œç›®æ ‡ç«¯å£ä¸º80çš„TCPæ•°æ®åŒ…å…è®¸ä¼ å…¥â€ çš„è§„åˆ™iptables -t filter -A INPUT -p tcp --dport 80 -j ACCEPT#ç¤ºä¾‹2ï¼šæ‹’ç»æŸIPè®¿é—®#æ·»åŠ  â€œæ‹’ç»å¹¶ä¸¢å¼ƒæºIPä¸º192.168.100.10çš„ä¼ å…¥æ•°æ®åŒ…â€ çš„è§„åˆ™iptables -A INPUT -s 192.168.100.10 -j DROP#è®¾ç½®å¸¸è§„å®‰å…¨çš„é˜²ç«å¢™é»˜è®¤è§„åˆ™ï¼ˆå³å…è®¸æ‰€æœ‰è¾“å‡ºæµé‡ï¼Œä½†é˜»æ­¢æ‰€æœ‰è¾“å…¥å’Œè½¬å‘æµé‡ï¼Œå¦å¤–å…è®¸sshé»˜è®¤22ç«¯å£çš„è¾“å…¥æµé‡ï¼‰ #iptablesé»˜è®¤æƒ…å†µä¸‹æ²¡æœ‰è®¾ç½®ä»»ä½•è§„åˆ™ï¼Œä»¥ç¡®ä¿ç½‘ç»œå®‰å…¨æŽ¨èè®¾ç½®é»˜è®¤è§„åˆ™ï¼Œç„¶åŽå†æ ¹æ®éœ€è¦æ·»åŠ å…¶ä»–è§„åˆ™iptables -t filter -A INPUT -p tcp --dport 22 -j ACCEPTiptables --policy INPUT DROPiptables --policy FORWARD DROPiptables --policy OUTPUT ACCEPTÂ¶ï¼ˆ3ï¼‰åˆ é™¤è§„åˆ™123##ç¤ºä¾‹1ï¼šåˆ é™¤æ”¾è¡ŒæŒ‡å®šç«¯å£è§„åˆ™#åˆ é™¤ â€œç›®æ ‡ç«¯å£ä¸º80çš„TCPæ•°æ®åŒ…å…è®¸ä¼ å…¥â€ çš„è§„åˆ™iptables -t filter -D INPUT -p tcp --dport 80 -j ACCEPTè¯¥å‘½ä»¤ä¼šåˆ é™¤æŒ‡å®šç«¯å£çš„ iptables è§„åˆ™ã€‚å…¶ä¸­ -D è¡¨ç¤ºä»Žé“¾ä¸­åˆ é™¤è§„åˆ™ã€‚Â¶ï¼ˆ4ï¼‰ä¿®æ”¹è§„åˆ™12#ç¤ºä¾‹1ï¼šä¿®æ”¹æŒ‡å®šç«¯å£è§„åˆ™iptables -t filter -R INPUT &lt;num&gt; -p tcp --dport &lt;port&gt; -j DROPè¯¥å‘½ä»¤ä¼šç”¨æ–°è§„åˆ™æ›¿æ¢æŒ‡å®šç¼–å·çš„æ—§è§„åˆ™ï¼Œå¹¶æ‹’ç»ä¼ å…¥ TCP æµé‡åˆ°æŒ‡å®šç«¯å£ã€‚å…¶ä¸­ -R è¡¨ç¤ºæ›¿æ¢æŒ‡å®šè§„åˆ™ç¼–å·çš„è§„åˆ™ã€‚Â¶ï¼ˆ5ï¼‰æŸ¥çœ‹é˜²ç«å¢™è§„åˆ™123456789#åˆ—å‡ºé»˜è®¤çš„filterè¡¨ä¸­æ‰€æœ‰é“¾çš„æ‰€æœ‰è§„åˆ™iptables -Liptables -nvLiptables -nvL --line-numbers#åˆ—å‡ºfilterè¡¨ä¸­INPUTé“¾çš„æ‰€æœ‰è§„åˆ™ï¼ˆé€šå¸¸ç”¨äºŽæŸ¥çœ‹æµé‡è¿›å…¥æœåŠ¡å™¨æ—¶çš„ç«¯å£æ”¾è¡Œè§„åˆ™å’ŒIPæ”¾è¡Œè§„åˆ™ï¼‰iptables -t filter -L INPUT -nv#åˆ—å‡ºnatè¡¨ä¸­POSTROUTINGé“¾çš„æ‰€æœ‰è§„åˆ™ï¼ˆé€šå¸¸ç”¨äºŽæŸ¥çœ‹NATåœ°å€è½¬æ¢è§„åˆ™ï¼‰iptables -t nat -L POSTROUTING -nvå‚æ•°è¯´æ˜Žï¼š-nï¼šç¦æ­¢å°† IP åœ°å€å’Œç«¯å£å·è§£æžä¸ºä¸»æœºåå’ŒæœåŠ¡åç§°ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œiptablesä¼šå°è¯•è§£æž IP åœ°å€å’Œç«¯å£å·ä¸ºå¯è¯»çš„ä¸»æœºåå’ŒæœåŠ¡åç§°ï¼Œä½†ä½¿ç”¨-nå‚æ•°å¯ä»¥é¿å…æ­¤è§£æžè¿‡ç¨‹ï¼Œä»¥æé«˜æ˜¾ç¤ºé€Ÿåº¦ä¸Žå¯è¯»æ€§ã€‚-Lï¼šåˆ—å‡ºè§„åˆ™ã€‚[chain]ï¼šæŒ‡å®šè¦æ“ä½œçš„é“¾åç§°ï¼ˆå¯é€‰ï¼Œé»˜è®¤ä¸º filter é“¾ï¼‰--line-numbersï¼šåœ¨æ¯ä¸ªè§„åˆ™å‰é¢æ˜¾ç¤ºè§„åˆ™çš„è¡Œå·ï¼ˆç¼–å·ï¼‰ã€‚-vï¼šä»¥è¯¦ç»†æ¨¡å¼æ˜¾ç¤ºã€‚è¯¥å‚æ•°ä¼šåœ¨è¾“å‡ºç»“æžœä¸­æ˜¾ç¤ºè§„åˆ™çš„æ•°æ®åŒ…å’Œå­—èŠ‚æ•°ç»Ÿè®¡ä¿¡æ¯ã€‚è¯¥å‘½ä»¤å¯ä»¥åˆ—å‡ºå½“å‰ iptables çš„æ‰€æœ‰è§„åˆ™ï¼ŒåŒ…æ‹¬é“¾ï¼ˆchainï¼‰ã€ç­–ç•¥ï¼ˆpolicyï¼‰å’Œè§„åˆ™ï¼ˆruleï¼‰ç­‰ä¿¡æ¯ã€‚Â¶ï¼ˆ6ï¼‰é‡ç½® iptables è§„åˆ™1234567891011iptables --policy INPUT ACCEPT # å°†è¾“å…¥é“¾è®¾ç½®ä¸ºé»˜è®¤æŽ¥å—æ‰€æœ‰æ•°æ®åŒ…iptables --policy FORWARD DROP # å°†è½¬å‘é“¾è®¾ç½®ä¸ºé»˜è®¤æ‹’ç»æ‰€æœ‰æ•°æ®åŒ…iptables --policy OUTPUT ACCEPT # å°†è¾“å‡ºé“¾è®¾ç½®ä¸ºé»˜è®¤æŽ¥å—æ‰€æœ‰æ•°æ®åŒ…iptables -F # æ¸…é™¤æ‰€æœ‰é˜²ç«å¢™è§„åˆ™iptables -X # åˆ é™¤æ‰€æœ‰ç”¨æˆ·å®šä¹‰çš„é“¾iptables -Z # æ¸…é™¤æ‰€æœ‰è®¡æ•°å™¨å’Œæ•°æ®åŒ…è®¡æ•°å™¨#æ³¨æ„ï¼Œä»¥ä¸Šå°†ä¼šé‡ç½®æ‰€æœ‰iptablesè§„åˆ™ï¼Œå¦‚æžœç³»ç»Ÿå®‰è£…æœ‰Dockerï¼Œåˆ™Dockerç›¸å…³çš„iptablesè§„åˆ™ä¹Ÿä¼šè¢«æ¸…ç©ºï¼Œä¸ºäº†ä¿ç•™Dockerç›¸å…³çš„iptablesè§„åˆ™ï¼Œå¯ä»¥é€šè¿‡é‡å¯DockeræœåŠ¡æ¥è‡ªåŠ¨æ·»åŠ å›žDockerç›¸å…³çš„iptablesè§„åˆ™ï¼Œå¦‚ä¸‹ï¼šsystemctl restart docker#æŸ¥çœ‹æ˜¯å¦åŒ…å«Dockerç›¸å…³çš„iptablesè§„åˆ™iptables -nvLÂ¶ï¼ˆ7ï¼‰é˜²ç«å¢™è§„åˆ™æŒä¹…åŒ–é»˜è®¤é€šè¿‡ iptables å‘½ä»¤æ“ä½œé˜²ç«å¢™è§„åˆ™ä¼šç«‹åˆ»ç”Ÿæ•ˆï¼Œä½†è¿™äº›iptablesè§„åˆ™è¿˜åœ¨æœ¬æ¬¡ç³»ç»Ÿè¿è¡Œæ—¶æœ‰æ•ˆï¼Œä¸€æ—¦ç³»ç»Ÿé‡å¯ï¼Œiptablesè§„åˆ™å°†ä¼šé‡ç½®ä¸ºé»˜è®¤è®¾ç½®ï¼Œä¸ºäº†ä½¿iptablesè§„åˆ™åœ¨ç³»ç»Ÿé‡æ–°å¯åŠ¨åŽä»ç„¶æœ‰æ•ˆï¼Œç”¨æˆ·éœ€è¦å°†è§„åˆ™ä¿å­˜åˆ°æŸä¸ªæ–‡ä»¶ä¸­ï¼Œå¹¶åœ¨å¯åŠ¨æ—¶åŠ è½½è¿™äº›è§„åˆ™ã€‚æ“ä½œå¦‚ä¸‹ï¼š1234567891011121314151617181920#å¯¼å‡ºå½“å‰çš„iptablesè§„åˆ™å¹¶ä¿å­˜ï¼ˆå¯é€‰æ‹©ä¿å­˜ä¸ºä»»ä½•æ–‡ä»¶è·¯å¾„ï¼‰mkdir -p /etc/sysconfigiptables-save &gt; /etc/sysconfig/iptables#ç³»ç»Ÿé‡å¯åŽï¼Œéœ€è¦æ‰‹åŠ¨æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ä»¥é‡æ–°å¯¼å…¥é…ç½®æ–‡ä»¶ä¸­çš„iptablesè§„åˆ™ï¼ˆå¯¼å…¥åŽï¼Œè§„åˆ™ä¼šç«‹åˆ»ç”Ÿæ•ˆï¼‰iptables-restore &lt; /etc/sysconfig/iptables#å¦‚æžœä¸å¸Œæœ›æ¯æ¬¡é‡å¯éƒ½æ‰‹åŠ¨å¯¼å…¥ï¼Œåˆ™å¯ä»¥å°†å¯¼å…¥å‘½ä»¤é…ç½®åˆ°ç³»ç»Ÿå¯åŠ¨åŠ è½½é…ç½®æ–‡ä»¶ä¸­ï¼ˆä½¿å…¶èƒ½å¤Ÿå¼€æœºè‡ªå¯åŠ¨å¹¶è‡ªåŠ¨å¯¼å…¥ iptables è§„åˆ™ï¼‰ï¼Œå¦‚ä¸‹ï¼š#æç¤ºï¼š/etc/network/if-pre-up.dç›®å½•ä¸‹çš„è„šæœ¬å°†ä¼šåœ¨ç³»ç»Ÿé‡å¯è¿‡ç¨‹ç½‘ç»œæŽ¥å£å¯åŠ¨ä¹‹å‰è‡ªåŠ¨æ‰§è¡Œã€‚ï¼ˆé‡å¯ç½‘ç»œæœåŠ¡ä¹Ÿä¼šè‡ªåŠ¨æ‰§è¡Œï¼‰cat &gt; /etc/network/if-pre-up.d/iptablesload &lt;&lt; EOF#!/bin/bashiptables-restore &lt; /etc/sysconfig/iptablesEOF#èµ‹äºˆæ‰§è¡Œæƒé™chmod +x /etc/network/if-pre-up.d/iptablesload#é‡å¯æµ‹è¯•rebootä»¥ä¸Šæ˜¯æ‰‹åŠ¨ç»´æŠ¤é…ç½®æ–‡ä»¶å’Œ iptables æŒä¹…åŒ–è§„åˆ™æ–‡ä»¶ï¼Œæ“ä½œæ¯”è¾ƒéº»çƒ¦ï¼Œç”±æ­¤å¯ä»¥ä½¿ç”¨ä¸€äº›é€šç”¨çš„å·¥å…·ç®€åŒ–å®žçŽ°ï¼Œå¦‚ä¸‹ï¼š1234567891011121314151617181920212223##å¯¹äºŽDebian/Ubuntuç±»ç³»ç»Ÿï¼Œå¯ä»¥å®‰è£… iptables-persistent å·¥å…·åŒ…ï¼Œä½¿å…¶ä»¥å®ˆæŠ¤è¿›ç¨‹çš„æ–¹å¼æ¥è¿è¡Œï¼Œè¿™æ ·ç³»ç»Ÿé‡å¯åŽå¯ä»¥è‡ªåŠ¨å°†ä¿å­˜çš„å†…å®¹åŠ è½½åˆ° iptables ä¸­ï¼Œå¦‚ä¸‹ï¼šapt install -y iptables-persistent#ä¿å­˜è§„åˆ™service iptables-persistent save#é‡å¯æµ‹è¯•reboot##å¯¹äºŽRHEL/CentOSç±»ç³»ç»Ÿï¼Œå¯ä»¥å®‰è£… iptables-service å·¥å…·åŒ…,ä½¿å…¶ä»¥å®ˆæŠ¤è¿›ç¨‹çš„æ–¹å¼æ¥è¿è¡Œï¼Œè¿™æ ·ç³»ç»Ÿé‡å¯åŽå¯ä»¥è‡ªåŠ¨å°†ä¿å­˜çš„å†…å®¹åŠ è½½åˆ° iptables ä¸­ï¼Œå¦‚ä¸‹ï¼š#åœ¨ centos6 ä¸­é»˜è®¤æœ‰è¯¥å·¥å…·åŒ…äº†ï¼Œä½†åœ¨ centos7 ä¸­å·²ç»ä¸èƒ½å†ä½¿ç”¨ç±»ä¼¼ service iptables start è¿™æ ·çš„å‘½ä»¤äº†ï¼Œæ‰€ä»¥ service iptables save ä¹Ÿæ— æ³•æ‰§è¡Œï¼ŒåŒæ—¶ï¼Œåœ¨ centos7ä¸­ï¼Œä½¿ç”¨ firewall æ›¿ä»£äº†åŽŸæ¥çš„ iptables serviceï¼Œä¸è¿‡ä¸ç”¨æ‹…å¿ƒï¼Œæˆ‘ä»¬åªè¦é€šè¿‡ yum æºå®‰è£… iptablesä¸Žiptables-services å³å¯ï¼ˆiptables ä¸€èˆ¬ä¼šè¢«é»˜è®¤å®‰è£…ï¼Œä½†æ˜¯iptables-services åœ¨ centos7 ä¸­ä¸€èˆ¬ä¸ä¼šè¢«é»˜è®¤å®‰è£…ï¼‰ï¼Œåœ¨centos7 ä¸­å®‰è£…å®Œ iptables-services åŽï¼Œå³å¯åƒ centos6 ä¸­ä¸€æ ·ï¼Œé€šè¿‡ service iptables save å‘½ä»¤ä¿å­˜è§„åˆ™äº†ï¼Œè§„åˆ™åŒæ ·ä¿å­˜åœ¨ /etc/sysconfig/iptables æ–‡ä»¶ä¸­#é…ç½®å¥½yumæºä»¥åŽå®‰è£…iptables-serviceyum install -y iptables-services#åœæ­¢firewalldsystemctl stop firewalld#ç¦æ­¢firewalldè‡ªåŠ¨å¯åŠ¨systemctl disable firewalld#å¯åŠ¨iptablessystemctl start iptables#å°†iptablesè®¾ç½®ä¸ºå¼€æœºè‡ªåŠ¨å¯åŠ¨ï¼Œä»¥åŽå³å¯é€šè¿‡iptables-serviceæŽ§åˆ¶iptablesæœåŠ¡systemctl enable iptables#ä¿å­˜è§„åˆ™service iptables save#é‡å¯æµ‹è¯•rebootå‚è€ƒï¼šhttps://www.cnblogs.com/big-cousin/p/17007533.htmlhttps://salogs.com/news/2015/08/20/iptables-save/Â¶ï¼ˆ8ï¼‰ä½¿ç”¨ IPtables å®žçŽ° TCP/UDP ç«¯å£è½¬å‘å‚è€ƒï¼šhttps://www.cnblogs.com/paul8339/p/14688156.htmlhttps://www.youtube.com/watch?v=qQej5kv868gÂ¶ï¼ˆ9ï¼‰å‚è€ƒhttps://blog.csdn.net/lvoelife/article/details/129101416Â¶3ï¼‰UFW é˜²ç«å¢™UFW æ˜¯ Debian ç³»åˆ— Linux ç³»ç»Ÿä¸­ IPtables é˜²ç«å¢™çš„å‰ç«¯å·¥å…·ã€‚æ—¨åœ¨ç®€åŒ– iptables çš„é…ç½®ã€‚å¦‚æžœç³»ç»Ÿé»˜è®¤æ²¡æœ‰å®‰è£… UFWï¼Œåˆ™å¯æ‰§è¡Œå‘½ä»¤å®‰è£…ï¼šapt install ufwÂ¶ï¼ˆ1ï¼‰æŸ¥çœ‹ ufw æœåŠ¡çŠ¶æ€1systemctl status ufwÂ¶ï¼ˆ2ï¼‰æŸ¥çœ‹ ufw çš„çŠ¶æ€12#è¯¥å‘½ä»¤å¯ä»¥çœ‹åˆ°ufwçš„çŠ¶æ€ï¼ˆinactiveæ˜¯å…³é—­ï¼Œactiveæ˜¯å¼€å¯ï¼‰ï¼Œufwå¼€å¯æ—¶è¿˜ä¼šåˆ—å‡ºå½“å‰é…ç½®çš„ç­–ç•¥ã€‚ufw statusæ³¨æ„ï¼šæ–°å®‰è£… Ubuntu ç³»ç»Ÿï¼ŒUFW é˜²ç«å¢™é»˜è®¤æ˜¯ä¸å¼€å¯çš„ã€‚Â¶ï¼ˆ3ï¼‰å¼€å¯ã€é‡å¯ã€å…³é—­ã€ufw æœåŠ¡123456789101112131415# å¯ç”¨æœåŠ¡ï¼ˆå¼€æœºå¯åŠ¨ï¼‰ufw enable# å¼€å¯æœåŠ¡systemctl start ufw# é‡å¯æœåŠ¡systemctl restart ufw# é‡æ–°åŠ è½½UFWçš„é…ç½®æ–‡ä»¶ï¼ˆå³ /etc/ufw/*.rulesï¼‰ufw reload# ç¦ç”¨æœåŠ¡ï¼ˆå¼€æœºç¦ç”¨ï¼‰ufw disable# å…³é—­æœåŠ¡systemctl stop ufwÂ¶ï¼ˆ4ï¼‰æŸ¥çœ‹é˜²ç«å¢™è§„åˆ™1ufw statusÂ¶ï¼ˆ5ï¼‰é˜²ç«å¢™ç«¯å£è§„åˆ™ç»´æŠ¤123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354## æ”¾è¡Œè®¿é—®è§„åˆ™#æ”¾è¡ŒæŒ‡å®šç«¯å£å·è®¿é—®ï¼ˆå¦‚æžœä¸å¸¦æœ‰TCPæˆ–è€…UDPï¼Œåˆ™é»˜è®¤ä¸¤ç§éƒ½å¯ä»¥ï¼‰ufw allow ç«¯å£å·ufw allow ç«¯å£å·/tcpufw allow ç«¯å£å·/udp#å…è®¸2200åˆ°2222ç«¯å£çš„TCPæµé‡å…è®¸è®¿é—®ufw allow 2200:2222/tcp#è®¾ç½®ç‰¹å®šçš„IPå…è®¸è®¿é—®ufw allow from xx.xx.xx.xx#æŒ‡å®šç‰¹å®šIPè¿žæŽ¥åˆ°ç‰¹å®šç«¯å£å…è®¸è®¿é—®ufw allow from xx.xx.xx.xx to any poart ç«¯å£å·#è®¾ç½®ç‰¹å®šçš„å­ç½‘xx.xx.xxç½‘æ®µipå…è®¸è®¿é—®ufw allow from xx.xx.xx.0/24## é˜»æ­¢è®¿é—®è§„åˆ™#é˜»æ­¢æŒ‡å®šç«¯å£å·è®¿é—®ï¼ˆå¦‚æžœä¸å¸¦æœ‰TCPæˆ–è€…UDPï¼Œåˆ™é»˜è®¤ä¸¤ç§éƒ½å¯ä»¥ï¼‰ï¼Œæ³¨æ„å¦‚æžœä¹‹å‰æœ‰è¯¥ç«¯å£çš„allowè§„åˆ™ï¼Œé‚£ä¹ˆåªæ˜¯æ”¹è§„åˆ™ä¸ºdenyï¼Œè€Œä¸ä¼šåˆ é™¤è§„åˆ™ufw deny ç«¯å£å·ufw deny ç«¯å£å·/tcpufw deny ç«¯å£å·/udp#é˜»æ­¢2200åˆ°2222ç«¯å£çš„tcpufw deny 2200:2222/tcp#é˜»æ­¢ç‰¹å®šIPè®¿é—®ufw deny from xx.xx.xx.xx#é˜»æ­¢ç‰¹å®šIPé€šè¿‡ç«¯å£ufw deny from xx.xx.xx.xx to any poart ç«¯å£å·#é˜»æ­¢ç‰¹å®šå­ç½‘xx.xx.xxç½‘æ®µipå…è®¸è®¿é—®ufw deny from xx.xx.xx.0/24#ç¦æ­¢å¤–éƒ¨è®¿é—®smtpæœåŠ¡ï¼Œ#ä»¥æœåŠ¡åä»£è¡¨ç«¯å£ï¼Œå¯ä»¥ä½¿ç”¨less /etc/servicesåˆ—å‡ºæ‰€æœ‰æœåŠ¡ä¿¡æ¯, å…¶ä¸­åŒ…æ‹¬è¯¥æœåŠ¡ä½¿ç”¨äº†å“ªä¸ªç«¯å£å’Œå“ªç§åè®®ufw deny smtp#åˆ é™¤ä¸Šé¢å»ºç«‹çš„æŸæ¡è§„åˆ™ï¼Œæˆ–è€…ufw delete allow 80/tcpï¼Œå¦‚æžœå‡ºçŽ°æ— æ³•åˆ é™¤ï¼Œå¯ä»¥ç”¨åºå·ï¼šufw status numberedï¼Œç„¶åŽé€šè¿‡åºå·åˆ é™¤ufw delete 1ufw delete allow smtp#è¦æ‹’ç»æ‰€æœ‰çš„TCPæµé‡ä»Ž10.0.0.0/8 åˆ°192.168.0.1åœ°å€çš„22ç«¯å£ufw deny proto tcp from 10.0.0.0/8 to 192.168.0.1 port 22## é…ç½®å‡ºå…¥ï¼ˆé»˜è®¤çš„è§„åˆ™éƒ½æ˜¯è¿›æ¥çš„ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡inå’Œouté…ç½®ï¼‰ufw allow in 2222 #å…è®¸2222ç«¯å£çš„æµé‡è¿›æ¥ufw denty in 2222 #é˜»æ­¢2222ç«¯å£çš„æµé‡è¿›æ¥ufw allow out 2222 #å…è®¸2222ç«¯å£çš„æµé‡å‡ºåŽ»ufw denty out 2222 #é˜»æ­¢2222ç«¯å£çš„æµé‡å‡ºåŽ»## åˆ é™¤è§„åˆ™ï¼ˆä¸¤ç§æ–¹å¼ï¼‰#æ–¹å¼1ï¼šé€šè¿‡åœ¨è§„åˆ™å‰é¢åŠ ä¸Šdeleteåˆ é™¤è§„åˆ™#åˆ é™¤æ”¾è¡Œçš„æŸç«¯å£è§„åˆ™ufw delete allow ç«¯å£å·#æ–¹å¼2ï¼šé€šè¿‡æŸ¥çœ‹è§„åˆ™åºåˆ—å·æ¥åˆ é™¤#æŸ¥çœ‹è§„åˆ™åºåˆ—å·ufw status numbered#åˆ é™¤ç¬¬3æ¡è§„åˆ™ufw delete 3## é‡ç½®è§„åˆ™ï¼ˆæ¢å¤åˆå§‹è§„åˆ™é…ç½®ï¼‰ufw resetðŸ’â€â™‚ è¯´æ˜Žï¼šä¸€æ—¦å¯ç”¨ UFW ä¹‹åŽï¼Œé»˜è®¤æƒ…å†µé˜²ç«å¢™å°†ä¸å…è®¸æ‰€æœ‰å…¥æ ˆè¿žæŽ¥è®¿é—®ï¼ŒåŒ…æ‹¬ SSH è¿žæŽ¥ï¼Œæ‰€ä»¥åœ¨å¼€å¯é˜²ç«å¢™ä¹‹åŽï¼Œå»ºè®®å°† SSH çš„ç›‘å¬ç«¯å£è®¾ç½®ä¸ºå…è®¸è®¿é—®ï¼Œæ“ä½œå¦‚ï¼šufw allow ssh ï¼ˆç­‰ä»·äºŽï¼šufw allow 22ï¼‰åœ¨ UFW ä¸­çš„æ‰€æœ‰ä¿®æ”¹éƒ½ä¼šç«‹åˆ»ç”Ÿæ•ˆï¼Œä¸éœ€è¦é‡æ–°åŠ è½½é…ç½®ä»¥æ¥ç”Ÿæ•ˆã€‚ðŸ“– å‚è€ƒï¼šhttps://wiki.ubuntu.org.cn/Ufwä½¿ç”¨æŒ‡å—https://zhuanlan.zhihu.com/p/571124400Â¶4ï¼‰FirewallD é˜²ç«å¢™FirewallD æ˜¯ Red Hat ç³»åˆ— Linux ç³»ç»Ÿä¸­ IPtables é˜²ç«å¢™çš„å‰ç«¯å·¥å…·ã€‚æ—¨åœ¨ç®€åŒ– iptables çš„é…ç½®ã€‚Â¶ï¼ˆ1ï¼‰æŸ¥çœ‹ firewall æœåŠ¡çŠ¶æ€1systemctl status firewalldÂ¶ï¼ˆ2ï¼‰æŸ¥çœ‹ firewall çš„çŠ¶æ€1firewall-cmd --stateÂ¶ï¼ˆ3ï¼‰å¼€å¯ã€é‡å¯ã€å…³é—­ã€firewalld.service æœåŠ¡123456789101112# å¼€å¯æœåŠ¡systemctl start firewalld# å¼€æœºè‡ªå¯åŠ¨æœåŠ¡systemctl enable firewalld# é‡å¯systemctl restart firewalld# å…³é—­systemctl stop firewalld# ç¦æ­¢å¼€æœºè‡ªå¯åŠ¨æœåŠ¡systemctl disable firewalldÂ¶ï¼ˆ4ï¼‰æŸ¥çœ‹é˜²ç«å¢™è§„åˆ™1firewall-cmd --list-allÂ¶ï¼ˆ5ï¼‰é˜²ç«å¢™ç«¯å£è§„åˆ™ç»´æŠ¤1234567891011121314151617#æŸ¥è¯¢ç«¯å£æ˜¯å¦æ”¾è¡Œfirewall-cmd --query-port=8080/tcp#æ”¾è¡Œ80ç«¯å£firewall-cmd --permanent --add-port=80/tcp#åˆ é™¤æ”¾è¡Œçš„80è§„åˆ™firewall-cmd --permanent --remove-port=80/tcp#æ”¾è¡Œç«¯å£åŒºé—´firewall-cmd --zone=public --add-port=4400-4600/tcp --permanentfirewall-cmd --zone=public --add-port=4400-4600/udp --permanent#åˆ é™¤æ”¾è¡Œçš„ç«¯å£åŒºé—´è§„åˆ™firewall-cmd --zone=public --remove-port=4400-4600/tcp --permanentfirewall-cmd --zone=public --remove-port=4400-4600/udp --permanent#é‡æ–°åŠ è½½é…ç½®ä»¥ä½¿ä¿®æ”¹ç”Ÿæ•ˆfirewall-cmd --reloadå‚æ•°è§£é‡Šï¼š--permanentï¼šè¡¨ç¤ºè®¾ç½®ä¸ºæŒä¹…--add-portï¼šæ ‡è¯†æ·»åŠ çš„ç«¯å£æç¤ºï¼šFirewallD æ²¡æœ‰ç±»ä¼¼ ufw reset é‡ç½®è§„åˆ™çš„å‘½ä»¤ï¼Œå¦‚éœ€æ¢å¤åˆå§‹è§„åˆ™é…ç½®åªèƒ½æ‰‹åŠ¨ç»´æŠ¤ã€‚Â¶9. æŸ¥çœ‹ç³»ç»Ÿç¨‹åºå¯¹åº”ç½‘ç»œä¿¡æ¯ netstatèˆ¬ç”¨äºŽæ£€éªŒæœ¬æœºå„ç«¯å£çš„ç½‘ç»œè¿žæŽ¥æƒ…å†µ12345678#å®‰è£…net-toolsï¼ˆåŒ…å«ifconfigã€netstatç­‰ç½‘ç»œå‘½ä»¤çš„å·¥å…·åŒ…ï¼‰yum install -y net-toolsapt install -y net-toolsnetstat #å‘½ä»¤ç”¨äºŽæ˜¾ç¤ºå„ç§ç½‘ç»œç›¸å…³ä¿¡æ¯ï¼Œå¦‚ç½‘ç»œè¿žæŽ¥, è·¯ç”±è¡¨, æŽ¥å£çŠ¶æ€ç­‰ç­‰netstat -lt #åˆ—å‡ºæ‰€æœ‰å¤„äºŽç›‘å¬çŠ¶æ€çš„tcpç«¯å£netstat -tunlp #æŸ¥çœ‹æ‰€æœ‰çš„ç›‘å¬ç«¯å£(åŒ…æ‹¬tcpå’Œudp)ä¿¡æ¯, åŒæ—¶å« PID å’Œè¿›ç¨‹åç§°netstat -tunlp|grep ç«¯å£å· #ç”¨äºŽæŸ¥çœ‹æŒ‡å®šç›‘å¬ç«¯å£å·çš„è¿›ç¨‹æƒ…å†µ-aï¼šæ˜¾ç¤ºæ‰€æœ‰è¿žæŽ¥å’Œç›‘å¬ç«¯å£-tï¼šä»…æ˜¾ç¤º TCP è¿žæŽ¥-uï¼šä»…æ˜¾ç¤º UDP è¿žæŽ¥-nï¼šä»¥æ•°å­—å½¢å¼æ˜¾ç¤º IP åœ°å€å’Œç«¯å£å·ï¼Œè€Œä¸è¿›è¡Œåå‘åŸŸåè§£æž-lï¼šä»…æ˜¾ç¤ºç›‘å¬çŠ¶æ€çš„è¿žæŽ¥-pï¼šæ˜¾ç¤ºå»ºç«‹ç›¸å…³è¿žæŽ¥çš„è¿›ç¨‹ IDÂ¶10. ç½‘ç»œæµ‹è¯•å·¥å…· nc12345678910111213141516171819202122232425262728293031##å®‰è£…ncyum install -y nc # CentOS/RedHatapt install -y netcat # Ubuntuapt install -y netcat-openbsd # Debian##æ£€æŸ¥æœåŠ¡å™¨ç«¯å£æ˜¯å¦é€šnc -zv ip ç«¯å£#å¦‚ä¸‹ï¼š$ root@ubuntu18:~# nc -zv 192.168.30.100 80Connection to 192.168.30.100 80 port [tcp/http] succeeded!##å¯åŠ¨ä¸€ä¸ªtcpç«¯å£ï¼ˆé»˜è®¤ä»…æ”¯æŒ IPv4ï¼Œå¯æ·»åŠ  -4 -6 æ¥åŒæ—¶æ”¯æŒ IPv4 å’Œ IPv6ï¼‰nc -l -p ç«¯å£#å¦‚ä¸‹ï¼š$ nc -l -p 8989 #æœåŠ¡ç«¯å¼€å¯ä¸€ä¸ª8989ç«¯å£tcpè¿›ç¨‹$ telnet 192.168.60.149 8989 #å®¢æˆ·ç«¯é€šè¿‡telnetè¿žæŽ¥æµ‹è¯•ç«¯å£##æ‰«æç«¯å£(æ‰«ææŒ‡å®šipæŸèŒƒå›´ä¸‹å¯åŠ¨çš„ç«¯å£)nc -v -w 1 ip -z æ‰«æèµ·å§‹çš„ç«¯å£-æ‰«æç»ˆæ­¢çš„ç«¯å£#å¦‚ä¸‹ï¼š$ nc -v -w 1 example.com -z 80-443Connection to example.com 80 port [tcp/http] succeeded!nc: connect to example.com port 81 (tcp) timed out: Operation now in progressConnection to example.com 82 port [tcp/*] succeeded!nc: connect to example.com port 83 (tcp) timed out: Operation now in progressnc: connect to example.com port 84 (tcp) timed out: Operation now in progress##éªŒè¯UDPç«¯å£è¿žé€šæ€§nc -l -u 8989 #æœåŠ¡ç«¯å¼€å¯ä¸€ä¸ª82ç«¯å£udpè¿›ç¨‹nc -uvz example.com 8989 #å®¢æˆ·ç«¯è¿žæŽ¥æœåŠ¡ç«¯éªŒè¯udpç«¯å£æ˜¯å¦å¯ç”¨#echo "hello" | nc -u -w1 example.com 8989 #å®¢æˆ·ç«¯è¿žæŽ¥æœåŠ¡ç«¯udpç«¯å£å¹¶å‘ç”Ÿæ¶ˆæ¯æŠ¥æ–‡Â¶11. è·¯ç”±è¿½è¸ª tracerouteçŽ°å®žä¸–ç•Œä¸­çš„ç½‘ç»œæ˜¯ç”±æ— æ•°çš„è®¡ç®—æœºå’Œè·¯ç”±å™¨ç»„æˆçš„ä¸€å¼ çš„å¤§ç½‘ï¼Œåº”ç”¨çš„æ•°æ®åŒ…åœ¨å‘é€åˆ°æœåŠ¡å™¨ä¹‹å‰éƒ½è¦ç»è¿‡å±‚å±‚çš„è·¯ç”±è½¬å‘ã€‚è€ŒTracerouteæ˜¯ä¸€ç§å¸¸è§„çš„ç½‘ç»œåˆ†æžå·¥å…·ï¼Œç”¨æ¥å®šä½åˆ°ç›®æ ‡ä¸»æœºä¹‹é—´çš„æ‰€æœ‰è·¯ç”±å™¨1234567891011121314151617181920212223242526#-U ä½¿ç”¨UDPåè®®ï¼ˆé»˜è®¤ï¼‰å‘é€æ•°æ®åŒ…æµ‹è¯•è·¯ç”±è¿½è¸ªï¼ˆå› ä¸ºå¤§éƒ¨åˆ†çš„åº”ç”¨æœåŠ¡å™¨éƒ½ä¸æä¾›UDPæœåŠ¡ï¼ˆæˆ–è€…è¢«é˜²ç«å¢™æŒ¡æŽ‰ï¼‰ï¼Œæ‰€ä»¥ä¼šæ‹¿ä¸åˆ°æœåŠ¡å™¨çš„ä»»ä½•è¿”å›žï¼Œæ‰€ä»¥ä¸å»ºè®®ä½¿ç”¨UDPæµ‹è¯•ï¼‰#-T ä½¿ç”¨TCPåè®®çš„SYNå‘é€æ•°æ®åŒ…æµ‹è¯•è·¯ç”±è¿½è¸ª#-I ä½¿ç”¨icmpåè®®å‘é€æ•°æ®åŒ…æµ‹è¯•è·¯ç”±è¿½è¸ªï¼ˆICMPå³InternetæŽ§åˆ¶æŠ¥æ–‡åè®®ï¼Œç”¨äºŽåœ¨IPä¸»æœºã€è·¯ç”±å™¨ä¹‹é—´ä¼ é€’æŽ§åˆ¶æ¶ˆæ¯çš„ä¸€ç§ç½‘ç»œå±‚åè®®ï¼ŒICMPæ˜¯IPåè®®çš„ä¸€éƒ¨åˆ†ï¼Œå› æ­¤ï¼ŒICMPåè®®çš„æŠ¥æ–‡åŒ…å«åœ¨IPæ•°æ®æŠ¥çš„æ•°æ®éƒ¨åˆ†ã€‚ICMPä¸åƒTCPæˆ–UDPæœ‰ç«¯å£ï¼Œåªè¦æœåŠ¡å™¨ä¸ç¦æ­¢icmpæ¶ˆæ¯ï¼Œéƒ½æ˜¯å¯ä»¥æ‹¿åˆ°è·¯ç”±åº”ç­”çš„ï¼‰#-p æŒ‡å®šUDPç«¯å£ã€‚ç¼ºçœå€¼ä¸º 33434ã€‚å¦‚æžœ UDP ç«¯å£ä¸å¯ç”¨ï¼Œé‚£ä¹ˆè¯¥é€‰é¡¹å¯ä»¥ç”¨äºŽé€‰æ‹©ä¸€ä¸ªæœªæ›¾ä½¿ç”¨çš„ç«¯å£èŒƒå›´ã€‚#-m æŒ‡å®šæœ€å¤§ttlï¼Œé»˜è®¤30ï¼Œå³æœ€å¤§è·³æ•°traceroute [å‚æ•°] ip# æµ‹è¯•ï¼ˆå‘baidu.comå‘é€icmpæ•°æ®åŒ…å¹¶è¿½è¸ªè·¯ç”±ï¼‰$ traceroute -I -m 100 baidu.comtraceroute to baidu.com (110.242.68.66), 30 hops max, 60 byte packets 1 _gateway (192.168.60.2) 0.075 ms 0.040 ms 0.037 ms 2 * * * 3 * * * 4 * * * 5 * * * 6 * * * 7 * * * 8 * * * 9 * * *10 * * *11 * * *12 * * *13 * * *14 * * *15 * * * #***çš„è·¯ç”±è¡¨ç¤ºè¯¥è·¯ç”±æœåŠ¡å±è”½äº†ICMPæ¶ˆæ¯16 110.242.68.66 (110.242.68.66) 42.452 ms 42.450 ms 42.423 ms #å…±ç»åŽ†16è·³åŽåˆ°è¾¾æœåŠ¡å™¨Windowsç³»ç»Ÿä¸­ä¹Ÿæœ‰è·¯ç”±è¿½è¸ªå·¥å…·ï¼Œé‚£å°±æ˜¯tracertï¼Œtracerté‡‡ç”¨çš„æ˜¯icmpåè®®å®žçŽ°çš„ï¼Œæ•…ä¸éœ€è¦æŒ‡å®šæ¶ˆæ¯çš„åè®®ã€‚12#-h æŒ‡å®šæœ€å¤§ttlï¼Œé»˜è®¤30ï¼Œå³æœ€å¤§è·³æ•°tracert ipå‚è€ƒï¼šã€ŠTracerouteï¼ˆè·¯ç”±è¿½è¸ªï¼‰çš„åŽŸç†åŠå®žçŽ°ã€‹ã€ŠICMPåè®® è¯¦è§£ï¼ŒICMPåè®®çš„åŠŸèƒ½åŠå®žçŽ°åŽŸç†ï¼ŒICMPåè®®æŠ¥æ–‡ç±»åž‹ã€‹Â¶åã€è¿œç¨‹æ“ä½œÂ¶1. è¿œç¨‹æ“ä½œç½‘ç»œåŸºç¡€åŸŸåï¼šç”±ä¸€ä¸²â€œâ€ç”¨ç‚¹åˆ†éš”â€œâ€çš„åå­—ç»„æˆï¼Œä¾‹å¦‚ï¼šwww.baidu.comï¼›æ˜¯IP åœ°å€çš„åˆ«åï¼Œæ–¹ä¾¿ç”¨æˆ·è®°å¿†ã€‚IPåœ°å€ï¼šIP åœ°å€æ˜¯ç½‘ç»œä¸­è®¡ç®—æœºçš„å”¯ä¸€ç½‘ç»œæ ‡è¯†ã€‚ç«¯å£å·ï¼šæ˜¯æŸå°è®¡ç®—æœºä¸Šè¿è¡Œçš„åº”ç”¨ç¨‹åºçš„å”¯ä¸€ç½‘ç»œæ ‡è¯†ã€‚å¸¸è§æœåŠ¡ç«¯å£å·åˆ—è¡¨ï¼šåºå·æœåŠ¡ç«¯å£å·01SSH æœåŠ¡å™¨2202Web æœåŠ¡å™¨8003HTTPS44304FTP æœåŠ¡å™¨21windowsç³»ç»Ÿå¯ä»¥æ‰“å¼€cmdè¾“å…¥ä»¥ä¸‹å‘½ä»¤æ£€æµ‹ç½‘ç»œäº’è¿žçš„å…¶ä»–ä¸»æœºçš„ç«¯å£å·æ˜¯å¦æ”¾è¡Œã€‚1telnet ip ç«¯å£æç¤ºï¼šæœ‰å…³ ç«¯å£å·çš„è¯¦ç»†å†…å®¹ï¼Œå¾…ç»­è¡¥å……Â·Â·Â·Â·Â·Â·sshåè®®ï¼š SSHæ˜¯ç›®å‰è¾ƒå¯é ï¼Œä¸“ä¸ºè¿œç¨‹ç™»å½•ä¼šè¯å’Œå…¶ä»–ç½‘ç»œæœåŠ¡æä¾›å®‰å…¨æ€§çš„åè®®ã€‚ç‰¹ç‚¹ï¼šåˆ©ç”¨SSHåè®®å¯ä»¥æœ‰æ•ˆé˜²æ­¢è¿œç¨‹ç®¡ç†è¿‡ç¨‹ä¸­çš„ä¿¡æ¯æ³„éœ²ï¼›é€šè¿‡SSH åè®®å¯ä»¥å¯¹æ‰€æœ‰ä¼ è¾“çš„æ•°æ®è¿›è¡ŒåŠ å¯†ï¼Œä¹Ÿèƒ½å¤Ÿé˜²æ­¢ DNS æ¬ºéª—å’Œ IP æ¬ºéª—ï¼›æ­¤å¤–å®ƒè¿˜å…·æœ‰ä¸€ä¸ªä¼˜ç‚¹ï¼Œå°±æ˜¯æ˜¯ä¼ è¾“çš„æ•°æ®å¯ä»¥æ˜¯ç»è¿‡åŽ‹ç¼©çš„ï¼Œæ‰€ä»¥å¯ä»¥åŠ å¿«ä¼ è¾“çš„é€Ÿåº¦ã€‚è¦æ­å»ºsshçŽ¯å¢ƒï¼Œéœ€è¦åˆ†åˆ«å®‰è£…æœåŠ¡ç«¯å’Œå®¢æˆ·ç«¯ç¨‹åºã€‚SSHæœåŠ¡ç«¯æ˜¯å®‰è£…åœ¨æœåŠ¡å™¨ä¸­æä¾›sshåè®®è¿œç¨‹æ“æŽ§çš„æœåŠ¡è½¯ä»¶ã€‚åªæœ‰sshæœåŠ¡ç«¯è¿è¡Œäº†æ‰èƒ½é€šè¿‡sshå®¢æˆ·ç«¯è¿žæŽ¥æœåŠ¡å™¨ã€‚Â¶2. è¿œç¨‹ç™»å½•Â¶2.1 sshæœåŠ¡ç«¯å®‰è£…å’Œé…ç½®123456789101112131415161718192021222324252627282930313233343536373839404142##åˆ‡æ¢åˆ°rootç”¨æˆ·sudo -i##å®‰è£…sshæœåŠ¡ï¼ˆå¦‚æ²¡æœ‰å®‰è£…ï¼‰#Debianç³»åˆ—ç³»ç»Ÿå®‰è£…sshæœåŠ¡apt install openssh-server#Redhatç³»åˆ—ç³»ç»Ÿå®‰è£…sshæœåŠ¡yum install openssh openssh-clients openssh-server -y#ç¼–è¾‘ sshd_config é…ç½®æ–‡ä»¶ #å°† PermitRootLogin çš„å€¼è®¾ç½®ä¸º yesï¼Œè¡¨ç¤ºå…è®¸ root ç”¨æˆ·ç™»å½•ã€‚ #å°† PasswordAuthentication çš„å€¼è®¾ç½®ä¸º yesï¼Œè¡¨ç¤ºå…è®¸ä½¿ç”¨å¯†ç è®¤è¯ï¼Œå¦‚æžœä¸º noï¼Œåˆ™è¡¨ç¤ºä¸å…è®¸ä½¿ç”¨å¯†ç è®¤è¯ï¼Œåªèƒ½ä½¿ç”¨å…¬é’¥è®¤è¯ã€‚ #æ³¨æ„ï¼šå¦‚æžœåœ¨ sshd_config é…ç½®æ–‡ä»¶ä¸­æœ‰å¯¼å…¥å…¶ä»–é…ç½®æ–‡ä»¶ï¼Œåˆ™éœ€è¦æ³¨æ„å¯¼å…¥çš„é…ç½®æ–‡ä»¶æ˜¯å¦ä¼šè¦†ç›–é…ç½®å†…å®¹ï¼Œä¾‹å¦‚ï¼šUbuntu22.04 ä¸­å°±ä¼šå¯¼å…¥ /etc/ssh/sshd_config.d/50-cloud-init.conf é…ç½®å†…å®¹vi /etc/ssh/sshd_config##sshdæœåŠ¡ç®¡ç†å‘½ä»¤ #systemctl start|stop|restart|enable|status &lt;service&gt; #Redhatç³»åˆ—ç³»ç»Ÿå¯åŠ¨sshdæœåŠ¡ï¼Œå¹¶è®¾ç½®å¼€æœºè‡ªå¯åŠ¨systemctl start sshd #å¯åŠ¨æœåŠ¡ï¼ˆé€šå¸¸å®‰è£…åŽé»˜è®¤éƒ½å·²å¯åŠ¨ï¼‰#æˆ–ï¼šservice sshd startsystemctl enable sshd #å¼€æœºè‡ªå¯åŠ¨æœåŠ¡#æˆ–ï¼šchkconfig --level 3 sshd onsystemctl restart sshd #é‡å¯æœåŠ¡ï¼ˆå¯é€‰ï¼Œå¦‚ä¿®æ”¹sshd_configé…ç½®ï¼Œåˆ™éœ€è¦é‡å¯æœåŠ¡ï¼‰#æˆ–ï¼šservice sshd restart#Redhatç³»åˆ—ç³»ç»Ÿå¯åŠ¨sshæœåŠ¡ï¼Œå¹¶è®¾ç½®å¼€æœºè‡ªå¯åŠ¨systemctl start ssh #å¯åŠ¨æœåŠ¡#æˆ–ï¼šservice ssh startsystemctl enable ssh #å¼€æœºè‡ªå¯åŠ¨æœåŠ¡#æˆ–ï¼šchkconfig --level 3 ssh onsystemctl restart ssh #é‡å¯æœåŠ¡ï¼ˆå¯é€‰ï¼Œå¦‚ä¿®æ”¹sshd_configé…ç½®ï¼Œåˆ™éœ€è¦é‡å¯æœåŠ¡ï¼‰#æˆ–ï¼šservice ssh restart##é…ç½®rootç”¨æˆ·å¯†ç è®¤è¯ï¼ˆåªéœ€è®¾ç½®rootç”¨æˆ·å¯†ç å³å¯ï¼‰passwd root##é…ç½®rootç”¨æˆ·å…¬é’¥è®¤è¯ï¼ˆåªéœ€å°†å®¢æˆ·ç«¯çš„sshå…¬é’¥å†…å®¹å¯¼å…¥åˆ°rootç”¨æˆ·çš„sshé…ç½®å³å¯ï¼‰#æ¸…é™¤rootç”¨æˆ·çš„é»˜è®¤sshé…ç½®ï¼ˆé˜²æ­¢ä¸€äº›é»˜è®¤è„šæœ¬å½±å“ä½¿ç”¨ï¼Œå¦‚authorized_keysæ–‡ä»¶åŽŸæœ¬å°±æ²¡æœ‰è„šæœ¬å†…å®¹åˆ™æ— éœ€æ“ä½œï¼‰echo "" &gt; /root/.ssh/authorized_keys#å°†å®¢æˆ·ç«¯çš„sshå…¬é’¥å†…å®¹å¯¼å…¥åˆ°rootç”¨æˆ·çš„sshé…ç½®ä¸­ï¼ˆå®¢æˆ·ç«¯å¯é€šè¿‡ cat ~/.ssh/id_rsa.pub å‘½ä»¤èŽ·å–sshå…¬é’¥å†…å®¹ï¼‰echo "sshå…¬é’¥å†…å®¹" &gt;&gt; /root/.ssh/authorized_keysÂ¶2.2 sshå®¢æˆ·ç«¯å®‰è£…å’Œä½¿ç”¨SSH å®¢æˆ·ç«¯æ˜¯ä¸€ç§ä½¿ç”¨SSHåè®®è¿žæŽ¥åˆ°è¿œç¨‹è®¡ç®—æœºçš„è½¯ä»¶ç¨‹åºï¼Œé€šè¿‡SSH å®¢æˆ·ç«¯æˆ‘ä»¬å¯ä»¥è¿žæŽ¥åˆ°è¿è¡Œäº† SSH æœåŠ¡å™¨çš„è¿œç¨‹æœºå™¨ä¸Šã€‚12#é»˜è®¤ç³»ç»Ÿå·²ç»å®‰è£…ï¼Œå¦‚æžœæ²¡æœ‰å¯é€šè¿‡å‘½ä»¤æ¥å®‰è£…apt install openssh-client(1) Linuxä¸‹SSH å®¢æˆ·ç«¯çš„ç®€å•ä½¿ç”¨12345##sshè¿œç¨‹è¿žæŽ¥æœåŠ¡å™¨#useræ˜¯åœ¨è¿œç¨‹æœºå™¨ä¸Šçš„ç”¨æˆ·åï¼Œå¦‚æžœä¸æŒ‡å®šçš„è¯é»˜è®¤ä¸ºå½“å‰ç”¨æˆ·#remoteæ˜¯è¿œç¨‹æœºå™¨çš„åœ°å€ï¼Œå¯ä»¥æ˜¯IPæˆ–è€…åŸŸå#portæ˜¯SSH Serveç›‘å¬çš„ç«¯å£ï¼Œå¦‚æžœä¸æŒ‡å®šï¼Œå°±ä¸ºé»˜è®¤å€¼22ssh [-p port] user@remoteæ³¨æ„ï¼šå¦‚æžœåœ¨ Windows ç³»ç»Ÿä¸­ï¼Œå¯ä»¥å®‰è£… PuTTY æˆ–è€… XShell å®¢æˆ·ç«¯è½¯ä»¶å³å¯ã€‚æç¤ºï¼šä½¿ç”¨ exit é€€å‡ºå½“å‰ç”¨æˆ·çš„ç™»å½•(2) Windows ä¸‹ SSH å®¢æˆ·ç«¯çš„å®‰è£…Putty http://www.chiark.greenend.org.uk/~sgtatham/putty/latest.htmlXShell http://xshellcn.comå»ºè®®ä»Žå®˜æ–¹ç½‘ç«™ä¸‹è½½æ­£å¼çš„å®‰è£…ç¨‹åºÂ¶1ï¼‰sshå…å¯†ç ç™»å½•å®žçŽ°æ–¹å¼ï¼šä½¿ç”¨å…¬é’¥è®¤è¯è¿›è¡Œç™»å½•ã€‚åŽŸç†ï¼šä½¿ç”¨éžå¯¹ç§°åŠ å¯†åŽŸç†è¿›è¡Œç™»å½•è®¤è¯ã€‚é¦–å…ˆç”±sshå®¢æˆ·ç«¯ç”Ÿæˆå¯†é’¥å¯¹ï¼Œç„¶åŽç”¨æˆ·å°†å…¬é’¥æ·»åŠ åˆ°æœåŠ¡ç«¯çš„æŸè®¤è¯é…ç½®æ–‡ä»¶é‡Œã€‚å½“ç”¨æˆ·ç™»é™†æ—¶ï¼Œä¼šé€šè¿‡ç§é’¥å¯¹è¯·æ±‚æ•°æ®è¿›è¡Œç­¾åï¼Œå¹¶å°†å·²ç»ç­¾åçš„æ•°æ®å‘é€ç»™sshæœåŠ¡ç«¯ï¼ŒsshæœåŠ¡ç«¯ä¼šåŽ»è®¤è¯é…ç½®æ–‡ä»¶æ‹¿åˆ°å…¬é’¥å¹¶è¿›è¡ŒéªŒç­¾,å¦‚æžœéªŒç­¾æˆåŠŸåˆ™å…è®¸ç™»å…¥ï¼Œå¦åˆ™æ‹’ç»ã€‚ç”±äºŽç§é’¥åªæœ‰ä¿å­˜åœ¨ç”¨æˆ·è‡ªå·±çš„å®¢æˆ·ç«¯ä¸­ï¼Œå› æ­¤å…¥ä¾µè€…å°±ç®—å¾—åˆ°ç”¨æˆ·å…¬é’¥ï¼Œä¹Ÿä¸èƒ½ç™»é™†åˆ°æœåŠ¡å™¨ã€‚éžå¯¹ç§°åŠ å¯†ç®—æ³•ï¼šä½¿ç”¨ å…¬é’¥ åŠ å¯†çš„æ•°æ®ï¼Œåªèƒ½ä½¿ç”¨ ç§é’¥ è§£å¯†ä½¿ç”¨ ç§é’¥ åŠ å¯†çš„æ•°æ®ï¼Œåªèƒ½ä½¿ç”¨ å…¬é’¥ è§£å¯†å®žçŽ°æ­¥éª¤ï¼ˆ1ï¼‰SSHå®¢æˆ·ç«¯ç”Ÿæˆå¯†é’¥å¯¹12345# ç”Ÿæˆå¯†é’¥å¯¹ï¼Œä¸€è·¯å›žè½¦å³å¯ã€‚ä¼šåœ¨~/.sshä¸‹ç”Ÿæˆä¸€ä¸ªç§é’¥æ–‡ä»¶ï¼ˆid_rsaï¼‰å’Œä¸€ä¸ªå…¬é’¥æ–‡ä»¶ï¼ˆid_rsa.pubï¼‰ssh-keygen# é»˜è®¤ ssh ç§˜é’¥æ ‡è¯†ä¸º â€œroot@ä¸»æœºåâ€ï¼Œå¦‚æžœå¸Œæœ›è‡ªå®šä¹‰æ ‡è¯†å¯å¦‚ä¸‹å®žçŽ°ï¼šssh-keygen -t rsa -C "youremail@example.com"ç»ˆç«¯ä¼šæç¤ºä¸€äº›é—®é¢˜ï¼šç¬¬ä¸€ä¸ªé—®é¢˜æ˜¯è®¾ç½®ç§é’¥å’Œå…¬é’¥çš„æ–‡ä»¶åï¼Œå¦‚æžœä¸è®¾ç½®é»˜è®¤æ˜¯id_rsaå’Œid_rsa.pubç¬¬äºŒä¸ªé—®é¢˜æ˜¯è¦ä¸è¦å¯¹ç§é’¥è®¾ç½®å£ä»¤ï¼ˆpassphraseï¼‰ï¼Œå¦‚æžœæ‹…å¿ƒç§é’¥çš„å®‰å…¨åˆ™å¯ä»¥è®¾ç½®ã€‚å…³äºŽå¤šä¸ªå®¢æˆ·ç«¯ä½¿ç”¨åŒä¸€ä¸ª ssh key çš„å®žçŽ°æ–¹å¼ï¼šæ¯ä¸ªå®¢æˆ·ç«¯è¿žæŽ¥æœåŠ¡å™¨éƒ½éœ€è¦é…ç½®è¯¥å®¢æˆ·ç«¯è‡ªå·±çš„ ssh key åˆ°æœåŠ¡å™¨ä¸­ã€‚é€šå¸¸æƒ…å†µä¸‹ï¼Œä¸åŒçš„å®¢æˆ·ç«¯ä¼šä½¿ç”¨ä¸åŒçš„ ssh keyï¼Œè¿™æ ·è™½ç„¶æ›´èƒ½ä¿æŠ¤ç§é’¥çš„å®‰å…¨ï¼Œä½†ä¹Ÿä¼šå¯¼è‡´å¤šå¯†ç ç®¡ç†éº»çƒ¦ã€‚å¦‚æžœç”¨æˆ·èƒ½ç¡®ä¿å¤šä¸ªå®¢æˆ·ç«¯éƒ½æ˜¯è‡ªå·±çš„ï¼Œé‚£ä¹ˆå¯ä»¥è®©è¿™äº›å®¢æˆ·ç«¯ä½¿ç”¨åŒä¸€ä¸ª ssh keyï¼Œè¿™æ ·å°±åªéœ€è¦è®¾ç½®ä¸€ä¸ª ssh key åˆ°æœåŠ¡å™¨ï¼Œå¤šä¸ªå®¢æˆ·ç«¯å°±èƒ½å…å¯†è¿žæŽ¥æœåŠ¡å™¨äº†ã€‚è™½ç„¶å¯ä»¥ç›´æŽ¥å¤åˆ¶ ssh key åˆ°å…¶ä»–çš„å®¢æˆ·ç«¯ä¸­ï¼Œä½†åœ¨ Linux å®¢æˆ·ç«¯ä¸­ä½¿ç”¨æ—¶å¯èƒ½ä¼šæç¤ºå¤±è´¥ï¼šWARNING: UNPROTECTED PRIVATE KEY FILE!ï¼Œè§£å†³åŠžæ³•æ˜¯ï¼šå¯¹å¤åˆ¶çš„æ–‡ä»¶é‡æ–°è®¾ç½®æ“ä½œæƒé™ï¼Œå‘½ä»¤å¦‚ä¸‹ï¼š12chmod 600 ~/.ssh/id_rsachmod 644 ~/.ssh/id_rsa.pubï¼ˆ2ï¼‰ä¸Šä¼ å…¬é’¥åˆ°æœåŠ¡å™¨æ–¹å¼1ï¼šç›´æŽ¥copyå®¢æˆ·ç«¯çš„~/.ssh/id_rsa.pubå†…å®¹ç›´æŽ¥è¿½åŠ åˆ°æœåŠ¡ç«¯çš„~/.ssh/authorized_keysé‡Œã€‚æ–¹å¼2ï¼šSSHå®¢æˆ·ç«¯æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ä¸Šä¼  åˆ°æœåŠ¡ç«¯ï¼š12#æ‰§è¡Œå®Œå‘½ä»¤å³å¯ä¸Šä¼ å®¢æˆ·ç«¯å…¬é’¥åˆ°æŒ‡å®šçš„æœåŠ¡å™¨çš„~/.ssh/authorized_keysé‡Œï¼ˆå…¶å®žå°±æ˜¯è¿½åŠ äº†id_rsa.pubçš„å†…å®¹ï¼‰ssh-copy-id -p port user@remoteæ‰§è¡Œå®Œä»¥ä¸Šæ“ä½œåŽï¼Œè¿œç¨‹æœåŠ¡å™¨å³å¯è®¤è¯å®¢æˆ·ç«¯ï¼Œå®¢æˆ·ç«¯ä¹Ÿæœ‰äº†sshå…å¯†ç™»å½•çš„æƒé™ã€‚ç¤ºæ„å›¾:Â¶3ï¼‰é…ç½®sshæœåŠ¡åˆ«åå®¢æˆ·ç«¯æ¯æ¬¡éƒ½è¾“å…¥ ssh -p port user@remoteï¼Œæ—¶é—´ä¹…äº†ä¼šè§‰å¾—å¾ˆéº»çƒ¦ï¼Œç‰¹åˆ«æ˜¯å½“ user, remote å’Œ port éƒ½å¾—è¾“å…¥ï¼Œè€Œä¸”è¿˜ä¸å¥½è®°å¿†ã€‚è€Œç»™å®¢æˆ·ç«¯é…ç½®åˆ«åå¯ä»¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œè­¬å¦‚ç”¨ï¼šssh myserver æ¥æ›¿ä»£ä¸Šé¢è¿™ä¹ˆä¸€é•¿ä¸²ã€‚è¦å®žçŽ°è¿™ä¸ªåŠŸèƒ½éœ€è¦åœ¨å®¢æˆ·ç«¯çš„ ~/.ssh/config ï¼ˆæ²¡æœ‰è¿™ä¸ªæ–‡ä»¶åˆ™æ‰‹åŠ¨åˆ›å»ºï¼‰é‡Œé¢è¿½åŠ ä»¥ä¸‹å†…å®¹ï¼š1234Host myserver HostName æœåŠ¡å™¨ipåœ°å€ User æœåŠ¡å™¨ç”¨æˆ·å Port 22ä¾‹å¦‚ï¼š1234Host myserver HostName 192.168.1.130 User qcmoke Port 22ä¿å­˜ä¹‹åŽï¼Œå³å¯ç”¨ ä»¥ä¸‹å‘½ä»¤å®žçŽ°å¿«é€Ÿè¿œç¨‹ç™»å½•äº†1234$ ssh myserver#æ­¤å¤–å¯¹äºŽscpå‘½ä»¤åŒæ ·å¯ä»¥ä½¿ç”¨myserveræ›¿ä»£-P port user@remoteäº†$ scp -r demo myserver:/homeæ³¨æ„ï¼šsshå®¢æˆ·ç«¯ä¼šæŠŠä½ æ¯æ¬¡ç™»é™†è¿‡çš„è®¡ç®—æœºçš„å…¬é’¥(public key)éƒ½è®°å½•åœ¨~/.ssh/known_hostsä¸­ã€‚å½“ä¸‹æ¬¡ç™»é™†ç›¸åŒè®¡ç®—æœºæ—¶ï¼ŒsshæœåŠ¡ç«¯ä¼šæ ¸å¯¹å…¬é’¥ã€‚å¦‚æžœå…¬é’¥ä¸åŒï¼ŒsshæœåŠ¡ç«¯ä¼šå‘å‡ºè­¦å‘Šç»™å®¢æˆ·ç«¯ã€‚ä¸€å°å®¢æˆ·ç«¯è¿žæŽ¥å¤šä¸ªLinuxç³»ç»Ÿï¼Œä¼šç»å¸¸åˆ‡æ¢ï¼Œä½†å®¢æˆ·ç«¯ä½¿ç”¨åŒä¸€ä¸ªipï¼Œå®¢æˆ·ç«¯ç™»å½•è¿‡ä¸€æ¬¡åŽå°±ä¼šæŠŠsshä¿¡æ¯è®°å½•åœ¨å®¢æˆ·ç«¯æœ¬åœ°çš„~/.ssh/known_hsotsæ–‡ä»¶ä¸­ï¼Œå®¢æˆ·ç«¯åˆ‡æ¢å…¶ä»–ç³»ç»ŸåŽå†ç”¨sshè®¿é—®åŽŸæ¥ç™»é™†çš„ç³»ç»Ÿå°±ä¼šå‡ºçŽ°å†²çªè­¦å‘Šã€‚è§£å†³åŠžæ³•ï¼š å®¢æˆ·ç«¯ç›´æŽ¥æŠŠ~/.ssh/known_hostsæ–‡ä»¶åˆ é™¤å³å¯ã€‚Â¶3. è¿œç¨‹æ–‡ä»¶ä¼ è¾“é€šè¿‡ä½¿ç”¨sshå®¢æˆ·ç«¯å¯ä»¥ç™»å½•æŽ§åˆ¶æœåŠ¡å™¨äº†ï¼Œä½†æ˜¯æƒ³è¦åœ¨å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¹‹é—´è¿›è¡Œæ–‡ä»¶ä¼ è¾“è¿˜å¾—éœ€è¦å…¶ä»–çš„ä¼ è¾“å·¥å…·ã€‚æœ‰çš„æ˜¯åŸºäºŽsshåè®®çš„ï¼Œæœ‰çš„åŸºäºŽftpåè®®çš„ï¼Œè¿˜æœ‰çš„æ˜¯åŸºäºŽsftpåè®®ç­‰çš„ï¼Œå„æœ‰åƒç§‹ã€‚ä¸‹é¢ä»‹ç»ä¸‰ç§å·¥å…·ï¼šå³SCPã€FileZillaã€Xftp ã€‚Â¶3.1 scpscp å°±æ˜¯ secure copyï¼Œæ˜¯åŸºäºŽsshç™»é™†è¿›è¡Œå®‰å…¨çš„è¿œç¨‹æ–‡ä»¶æ‹·è´å‘½ä»¤ã€‚åªè¦æœåŠ¡å™¨å®‰è£…æœ‰sshæœåŠ¡è½¯ä»¶ï¼Œå®¢æˆ·ç«¯å®‰è£…æœ‰sshå®¢æˆ·ç«¯è½¯ä»¶ï¼Œå¹¶å»ºç«‹èµ·äº†è¿žæŽ¥ï¼Œåˆ™å¯ä»¥ç›´æŽ¥ä½¿ç”¨ã€‚å®ƒçš„åœ°å€æ ¼å¼ä¸Ž ssh åŸºæœ¬ç›¸åŒï¼Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œåœ¨æŒ‡å®šç«¯å£æ—¶ç”¨çš„æ˜¯å¤§å†™çš„ -P è€Œä¸æ˜¯å°å†™çš„ã€‚12345678910111213# æŠŠæœ¬åœ°å½“å‰ç›®å½•ä¸‹çš„ 01.py æ–‡ä»¶ å¤åˆ¶åˆ° è¿œç¨‹ å®¶ç›®å½•ä¸‹çš„ Desktop/01.py# æ³¨æ„ï¼š`:` åŽé¢çš„è·¯å¾„å¦‚æžœä¸æ˜¯ç»å¯¹è·¯å¾„ï¼Œåˆ™ä»¥ç”¨æˆ·çš„å®¶ç›®å½•ä½œä¸ºå‚ç…§è·¯å¾„scp -P port 01.py user@remote:Desktop/01.py# æŠŠè¿œç¨‹ å®¶ç›®å½•ä¸‹çš„ Desktop/01.py æ–‡ä»¶ å¤åˆ¶åˆ° æœ¬åœ°å½“å‰ç›®å½•ä¸‹çš„ 01.pyscp -P port user@remote:Desktop/01.py 01.py# åŠ ä¸Š -r é€‰é¡¹å¯ä»¥ä¼ é€æ–‡ä»¶å¤¹# æŠŠå½“å‰ç›®å½•ä¸‹çš„ demo æ–‡ä»¶å¤¹ å¤åˆ¶åˆ° è¿œç¨‹ å®¶ç›®å½•ä¸‹çš„ Desktopscp -r demo user@remote:Desktop# æŠŠè¿œç¨‹ å®¶ç›®å½•ä¸‹çš„ Desktop å¤åˆ¶åˆ° å½“å‰ç›®å½•ä¸‹çš„ demo æ–‡ä»¶å¤¹scp -r user@remote:Desktop demoé€‰é¡¹å«ä¹‰-rè‹¥ç»™å‡ºçš„æºæ–‡ä»¶æ˜¯ç›®å½•æ–‡ä»¶ï¼Œåˆ™ scp å°†é€’å½’å¤åˆ¶è¯¥ç›®å½•ä¸‹çš„æ‰€æœ‰å­ç›®å½•å’Œæ–‡ä»¶ï¼Œç›®æ ‡æ–‡ä»¶å¿…é¡»ä¸ºä¸€ä¸ªç›®å½•å-Pè‹¥è¿œç¨‹ SSH æœåŠ¡å™¨çš„ç«¯å£ä¸æ˜¯ 22ï¼Œéœ€è¦ä½¿ç”¨å¤§å†™å­—æ¯ -P é€‰é¡¹æŒ‡å®šç«¯å£æ³¨æ„ï¼šscp è¿™ä¸ªç»ˆç«¯å‘½ä»¤åªèƒ½åœ¨ Linux æˆ–è€… UNIX ç³»ç»Ÿä¸‹ä½¿ç”¨å¦‚æžœåœ¨ Windows ç³»ç»Ÿä¸­ï¼Œå¯ä»¥å®‰è£… PuTTYï¼Œä½¿ç”¨ pscp å‘½ä»¤è¡Œå·¥å…·æˆ–è€…å®‰è£… FileZilla ä½¿ç”¨ FTP è¿›è¡Œæ–‡ä»¶ä¼ è¾“Â¶3.2 FileZillaå®˜æ–¹ç½‘ç«™ï¼šhttps://www.filezilla.cn/download/clientFileZilla åœ¨ä¼ è¾“æ–‡ä»¶æ—¶ï¼Œä½¿ç”¨çš„æ˜¯ FTP æœåŠ¡ è€Œä¸æ˜¯ SSH æœåŠ¡ï¼Œå› æ­¤ç«¯å£å·åº”è¯¥è®¾ç½®ä¸º 21ã€‚ä½¿ç”¨FTPæœåŠ¡çš„æ—¶å€™ï¼Œæˆ‘ä»¬éƒ½çŸ¥é“é»˜è®¤æ˜¯21å·ç«¯å£ï¼Œå…¶å®žè¿˜æœ‰ä¸€ä¸ª20å·ç«¯å£ã€‚FTPä½¿ç”¨ä¸¤ä¸ªTCPè¿žæŽ¥ï¼Œ21å·ç«¯å£è´Ÿè´£æŽ§åˆ¶è¿žæŽ¥ï¼Œ20å·ç«¯å£è´Ÿè´£æ•°æ®è¿žæŽ¥ã€‚Â¶3.3 Xftpå®˜æ–¹ç½‘ç«™ï¼šhttps://www.netsarang.com/products/xfp_overview.htmlXftpé™¤äº†ä½¿ç”¨FTPæœåŠ¡è¿˜ä½¿ç”¨äº†SFTPæœåŠ¡ï¼Œé€šè¿‡ä½¿ç”¨SFTPåè®®è¿žæŽ¥æœåŠ¡å™¨ä¼ è¾“æ–‡ä»¶ä¼šæ›´å®‰å…¨ã€‚SFTPæ˜¯SSHçš„ä¸€éƒ¨åˆ†ï¼Œåœ¨SSHè½¯ä»¶åŒ…ä¸­ï¼Œå·²ç»åŒ…å«äº†ä¸€ä¸ªSFTP(Secure File Transfer Protocol)çš„å®‰å…¨æ–‡ä»¶ä¼ è¾“å­ç³»ç»Ÿï¼ŒSFTPæœ¬èº«æ²¡æœ‰å•ç‹¬çš„å®ˆæŠ¤è¿›ç¨‹ï¼Œå®ƒå¿…é¡»ä½¿ç”¨sshdå®ˆæŠ¤è¿›ç¨‹ï¼ˆç«¯å£å·é»˜è®¤æ˜¯22ï¼‰æ¥å®Œæˆç›¸åº”çš„è¿žæŽ¥æ“ä½œã€‚ç”±äºŽè¿™ç§ä¼ è¾“æ–¹å¼ä½¿ç”¨äº†åŠ å¯†/è§£å¯†æŠ€æœ¯ï¼Œæ–‡ä»¶ä¼ é€ç›¸å¯¹æ¥è¯´æ˜¯å¾ˆå®‰å…¨çš„ï¼Œä½†æ˜¯æ˜¯æœ‰ä»£ä»·çš„ï¼Œå®ƒçš„ä¼ è¾“æ•ˆçŽ‡æ¯”FTPè¦ä½Žå¾—å¤šã€‚Â¶3.4 lrzszåŸºäºŽå‘½ä»¤æ“ä½œçš„ä¸Šä¼ ä¸‹è½½çš„å·¥å…· lrzszï¼Œç›®å‰ä¸»æµçš„SSHè¿žæŽ¥å·¥å…· ( SecureCRTã€XShell ç­‰ ) éƒ½æ”¯æŒè¿™äº›åè®®ã€‚1234567#æœåŠ¡å™¨å®‰è£…yum install -y lrzsz #centosapt install lrzsz #ubuntu#åœ¨å®¢æˆ·ç«¯æ‰§è¡Œå¼¹çª—é€‰æ‹©æ–‡ä»¶ä¸Šä¼ rz#åœ¨æœåŠ¡ç«¯æ‰§è¡Œé€‰æ‹©æ–‡ä»¶ä¸‹è½½ï¼ˆå¤šæ–‡ä»¶sz 1.txt 2.txtï¼‰sz a.txtÂ¶åä¸€ã€ç£ç›˜ç®¡ç†Â¶1. ç›¸å…³åŸºç¡€å‘½ä»¤123456#æ˜¾ç¤ºç£ç›˜åˆ†åŒºä½¿ç”¨æƒ…å†µ -hï¼šä½¿ç”¨äººç±»å¯è¯»çš„æ ¼å¼ -Tï¼šæ˜¾ç¤ºç£ç›˜åˆ†åŒºæ–‡ä»¶ç³»ç»Ÿç±»åž‹df -h#æŸ¥çœ‹å¯ç”¨è®¾å¤‡ï¼ˆåŒ…æ‹¬ç£ç›˜ç­‰ï¼‰-f æŸ¥çœ‹æ–‡ä»¶ç³»ç»Ÿç›¸å…³è®¾å¤‡ -S æŸ¥çœ‹scsiè®¾å¤‡ç›¸å…³è®¾å¤‡lsblklsblk -f1234567891011121314151617181920[root@localhost ~]# lsblk #TYPEï¼šdiskè¡¨ç¤ºç£ç›˜ï¼Œpartè¡¨ç¤ºæ ‡å‡†åˆ†åŒºï¼Œlvmé€»è¾‘å·åˆ†åŒº#MOUNTPOINTï¼šæŒ‚è½½ç‚¹NAME MAJ:MIN RM SIZE RO TYPE MOUNTPOINTsda #ç¬¬ä¸€ä¸ªç£ç›˜ 8:0 0 20G 0 disk â”œâ”€sda1 #ç¬¬ä¸€ä¸ªç£ç›˜ä¸‹çš„ç¬¬ä¸€ä¸ªåˆ†åŒº 8:1 0 500M 0 part &#x2F;bootâ””â”€sda2 #ç¬¬ä¸€ä¸ªç£ç›˜ä¸‹çš„ç¬¬äºŒä¸ªåˆ†åŒº 8:2 0 19.5G 0 part â”œâ”€centos-swap 253:0 0 2G 0 lvm [SWAP] â””â”€centos-root 253:1 0 17.5G 0 lvm &#x2F;sdb #ç¬¬äºŒä¸ªç£ç›˜ï¼ˆæ²¡æœ‰åˆ†åŒºï¼‰ 8:16 0 10G 0 disk#ç£ç›˜æ ¼å¼åŒ–åŽå°±ä¼šæœ‰æ–‡ä»¶ç³»ç»Ÿç±»åž‹å’Œuuid [root@localhost ~]# lsblk -fNAME FSTYPEï¼ˆæ–‡ä»¶ç³»ç»Ÿç±»åž‹ï¼‰LABEL UUID MOUNTPOINTsda â”œâ”€sda1 xfs be642956-78fe-4538-a3ab-840d6de853b7 &#x2F;bootâ””â”€sda2 LVM2_member dCCxeE-hgqX-XBLU-6AXZ-ikIJ-va94-Q5IF2D â”œâ”€centos-swap swap 653b8409-ce8f-4f98-904a-a1745d6568cc [SWAP] â””â”€centos-root xfs c6387d81-0587-4548-9a06-6c406ad9034a &#x2F;sdbÂ¶2. æ ‡å‡†åˆ†åŒºç®¡ç†å½“æ·»åŠ äº†ä¸€å—æ–°ç£ç›˜åŽï¼Œç³»ç»Ÿæ˜¯ä¸èƒ½ç›´æŽ¥ä½¿ç”¨çš„ï¼Œéœ€è¦å¯¹ç£ç›˜è¿›è¡Œåˆ›å»ºåˆ†åŒºã€æ ¼å¼åŒ–åˆ†åŒºã€æŒ‚è½½åˆ†åŒºä¸‰ä¸ªæ­¥éª¤åŽæ‰èƒ½æ­£å¸¸ä½¿ç”¨ã€‚Â¶1ï¼‰åˆ›å»ºåˆ†åŒº1234#å¯é€šè¿‡å¦‚ä¸‹å‘½ä»¤æŸ¥çœ‹æ–°åŠ çš„ç£ç›˜å…¶æ‰€åœ¨linuxç³»ç»Ÿä¸­çš„åç§°ï¼Œå‡è®¾ä¸º/dev/sdbfdisk -l#åˆ›å»ºåˆ†åŒºï¼Œå¯¹æ–°ç£ç›˜è¿›è¡Œåˆ†åŒºï¼ˆæ‰§è¡Œå‘½ä»¤ä¹‹åŽå°†ä¼šè¿›è¡Œæ‰‹å·¥å‘½ä»¤äº¤äº’è¿‡ç¨‹ï¼‰fdisk /dev/sdbåˆ›å»ºåˆ†åŒºç¤ºä¾‹123456789101112131415161718192021222324252627282930313233343536373839404142434445[root@localhost ~]# fdisk /dev/sdb Welcome to fdisk (util-linux 2.23.2).Changes will remain in memory only, until you decide to write them.Be careful before using the write command.Device does not contain a recognized partition tableBuilding a new DOS disklabel with disk identifier 0x5a23d71f.Command (m for help): m #æŸ¥çœ‹è¾“å…¥é€‰é¡¹èœå•Command action a toggle a bootable flag b edit bsd disklabel c toggle the dos compatibility flag d delete a partition g create a new empty GPT partition table G create an IRIX (SGI) partition table l list known partition types m print this menu n add a new partition o create a new empty DOS partition table p print the partition table q quit without saving changes s create a new empty Sun disklabel t change a partition's system id u change display/entry units v verify the partition table w write table to disk and exit x extra functionality (experts only)Command (m for help): n #åˆ›å»ºæ–°åˆ†åŒºPartition type: p primary (0 primary, 0 extended, 4 free) e extendedSelect (default p): p #åˆ†åŒºç±»åž‹é€‰æ‹©ä¸ºä¸»åˆ†åŒºPartition number (1-4, default 1): 1 #æŒ‡å®šåˆ†åŒºå·ï¼Œå¦‚æžœè¾“å…¥1ï¼Œé‚£ä¹ˆåˆ†åŒºä¸º/dev/sdb2ï¼Œ2åˆ™ä¸º/dev/sdb2First sector (2048-20971519, default 2048): 2048 #æŒ‡å®šç¬¬ä¸€ä¸ªæ‰‡åŒºåœ°å€ï¼ˆ2048é»˜è®¤å€¼ï¼Œè¡¨ç¤ºä»Žç£ç›˜çš„ç¬¬ä¸€ä¸ªæ‰‡åŒºï¼Œå¯ç›´æŽ¥å›žè½¦é€‰é»˜è®¤ï¼‰Last sector, +sectors or +size&#123;K,M,G&#125; (2048-20971519, default 20971519): 20971519 #æœ€åŽä¸€ä¸ªæ‰‡åŒºåœ°å€ï¼ˆé»˜è®¤ç£ç›˜çš„æœ€å¤§å¯å­˜å‚¨åœ°å€ï¼Œå¯ç›´æŽ¥å›žè½¦é€‰é»˜è®¤ï¼Œå¦‚æžœè¯¥ç£ç›˜éœ€è¦åˆ›å»ºå¤šä¸ªåˆ†åŒºçš„è¯å¯ä»¥æŒ‰ç…§éœ€æ±‚ä¿®æ”¹ï¼‰Partition 1 of type Linux and of size 10 GiB is setCommand (m for help): w #å†™å…¥åˆ†åŒºå¹¶é€€å‡ºThe partition table has been altered!Calling ioctl() to re-read partition table.Syncing disks.é»˜è®¤ä½¿ç”¨DOSï¼ˆå³MBRï¼‰ä½œä¸ºç£ç›˜åˆ†åŒºæ–¹æ¡ˆï¼Œå¦‚æžœéœ€è¦ä½¿ç”¨GPTï¼Œé‚£ä¹ˆéœ€è¦åœ¨è¾“å…¥â€œnâ€åˆ›å»ºåˆ†åŒºä¹‹å‰å…ˆè¾“å…¥â€œgâ€æŒ‡å®šä¸ºGPTåˆ†åŒºæ–¹æ¡ˆï¼Œå¦‚éœ€æ”¹å›žMBRæ–¹æ¡ˆï¼Œåªéœ€åˆ›å»ºåˆ†åŒºä¹‹å‰å…ˆè¾“å…¥â€œoâ€æŒ‡å®šä¸ºMBRåˆ†åŒºæ–¹æ¡ˆã€‚MBRåªèƒ½æ”¯æŒæœ€å¤š4ä¸ªä¸»åˆ†åŒºæˆ–3ä¸ªä¸»åˆ†åŒºå’Œ1ä¸ªæ‰©å±•åˆ†åŒºã€‚æ¯ä¸ªä¸»åˆ†åŒºæœ€å¤šå¯ä»¥æœ‰ä¸€ä¸ªé€»è¾‘åˆ†åŒºï¼Œè€Œä¸€ä¸ªæ‰©å±•åˆ†åŒºå¯ä»¥åˆ›å»ºå¤šä¸ªé€»è¾‘åˆ†åŒºã€‚å®ƒä½¿ç”¨äº†ä¸€ä¸ª512å­—èŠ‚çš„æ‰‡åŒºæ¥å­˜å‚¨åˆ†åŒºè¡¨ä¿¡æ¯ï¼Œç”±äºŽåˆ†åŒºè¡¨å¤§å°çš„é™åˆ¶æ‰€ä»¥åªèƒ½æ”¯æŒåˆ°æœ€å¤š4ä¸ªä¸»åˆ†åŒºã€‚GPTèƒ½å¤Ÿæ”¯æŒæ›´å¤šçš„åˆ†åŒºï¼ˆç†è®ºæ— é™ï¼‰ã€‚GPTæ²¡æœ‰ä¸»åˆ†åŒºå’Œæ‰©å±•åˆ†åŒºçš„æ¦‚å¿µï¼Œæ‰€æœ‰åˆ†åŒºéƒ½æ˜¯ç›¸ç­‰çš„ï¼Œå¯ä»¥ç†è§£ä¸ºæ‰€æœ‰çš„åˆ†åŒºéƒ½æ˜¯ä¸»åˆ†åŒºã€‚å®ƒä½¿ç”¨64ä¸ªæ‰‡åŒºï¼ˆ32KBï¼‰æ¥å­˜å‚¨åˆ†åŒºä¿¡æ¯ï¼Œç›¸æ¯”ä¹‹ä¸‹ï¼ŒMBRåˆ†åŒºè¡¨åªæœ‰512å­—èŠ‚ã€‚è¿™ä½¿å¾—GPTåˆ†åŒºè¡¨èƒ½å¤Ÿå­˜å‚¨æ›´å¤šçš„åˆ†åŒºä¿¡æ¯ã€‚Â¶2ï¼‰æ ¼å¼åŒ–åˆ†åŒº123#æ ¼å¼åŒ–åˆ†åŒºmkfs -t ext4 /dev/sdb1#æˆ–è€…mkfs.ext4 -F /dev/sdb1Â¶3ï¼‰æŒ‚è½½åˆ†åŒºæŒ‚è½½å³å°†ä¸€ä¸ªåˆ†åŒºä¸Žä¸€ä¸ªç›®å½•è¿›è¡Œå…³è”ï¼Œä½¿æ“ä½œè¯¥ç›®å½•æ–‡ä»¶å³æ“ä½œå¯¹åº”çš„ç£ç›˜åˆ†åŒºã€‚123456789101112131415161718#å…ˆåˆ›å»ºéœ€è¦æŒ‚è½½çš„ç›®å½•mkdir /data#å°†åˆ†åŒºæŒ‚è½½åˆ°å¯¹åº”ç›®å½•ï¼ˆä¸´æ—¶æŒ‚è½½ï¼‰mount /dev/sdb1 /data#æœ€åŽæŸ¥çœ‹æŒ‚è½½æ˜¯å¦æˆåŠŸdf -h#è®¾ç½®å¼€æœºè‡ªåŠ¨æŒ‚è½½echo "/dev/sdb1 /data ext4 defaults 1 1" &gt;&gt; /etc/fstab#æˆ–è€…é€šè¿‡åˆ†åŒºçš„uuidè¿›è¡ŒæŒ‚è½½ï¼ˆæŸ¥çœ‹æ‰€æœ‰åˆ†åŒºçš„å¯¹åº”UUIDï¼Œå¯é€šè¿‡å‘½ä»¤blkidæŸ¥çœ‹ï¼‰ï¼Œå¦‚ä¸‹ï¼šecho "UUID=6f74be84-76e7-4177-a387-e2e711329c33 /data ext4 defaults 1 1" &gt;&gt; /etc/fstab#æŒ‚è½½ /etc/fstab é…ç½®æ–‡ä»¶é‡Œçš„æ‰€æœ‰æ–‡ä»¶ç³»ç»Ÿä»¥ç«‹å³ç”Ÿæ•ˆmount -a#æˆ–è€…é€šè¿‡é‡å¯ä»¥ç”Ÿæ•ˆï¼šreboot#æŸ¥çœ‹ç³»ç»Ÿç£ç›˜æŒ‚è½½æƒ…å†µdf -hæ³¨æ„ï¼šå¦‚æžœéœ€æŒ‚è½½çš„ç›®å½•åœ¨æŒ‚è½½å‰å­˜åœ¨æ–‡ä»¶ï¼Œé‚£ä¹ˆæŒ‚è½½åŽè¿™äº›æ–‡ä»¶å°†ä¼š&quot;æ¶ˆå¤±&quot;ï¼Œä½†å¸è½½åŽè¿™äº›æ–‡ä»¶å°±åˆä¼šæ˜¾çŽ°ï¼ŒåŽŸå› æ˜¯æŒ‚è½½å‰æ–‡ä»¶æ˜¯å­˜åœ¨äºŽåŽŸæ¥çš„ç£ç›˜åˆ†åŒºä¸Šçš„ï¼Œå¦‚æžœåŒä¸€ç›®å½•æŒ‚è½½äº†æ–°çš„ç£ç›˜åˆ†åŒºï¼Œé‚£ä¹ˆè¯¥ç›®å½•æ˜¾ç¤ºçš„æ˜¯æ–°ç£ç›˜åˆ†åŒºçš„å†…å®¹ï¼Œè€Œæ–°åˆ†åŒºå¹¶æ²¡æœ‰è¿™äº›æ–‡ä»¶æ‰€ä»¥æ–‡ä»¶ä¼š&quot;æ¶ˆå¤±&quot;ã€‚å½“å¸è½½åŽï¼ŒæŒ‚è½½ç›®å½•åˆä¼šå›žåˆ°åŽŸç£ç›˜åˆ†åŒºä¸Šï¼Œè‡ªç„¶å°±ä¼šæŠŠåŽŸæœ¬çš„æ–‡ä»¶æ˜¾çŽ°å‡ºæ¥ã€‚Â¶4ï¼‰å¸è½½åŠåˆ é™¤åˆ†åŒº12345678910111213##å¸è½½umount /dev/sdb1 #æˆ–è€… umount /data#å¦‚æžœæ˜¯å¼€æœºè‡ªåŠ¨æŒ‚è½½çš„è¯è¿˜éœ€è¦åˆ é™¤/etc/fstabæ–‡ä»¶å¯¹åº”çš„æŒ‚è½½é…ç½®##åˆ é™¤åˆ†åŒºfdisk /dev/sdbmd1 d #åˆ é™¤w #è¾“å…¥ w ä¿å­˜ï¼Œè¿™ä¸ªæ—¶å€™åˆ†åŒºä»¥åŠåˆ é™¤äº†ï¼Œå¯ä»¥é‡æ–°åˆ›å»ºäº†Â¶å‚è€ƒï¼šhttps://www.cnblogs.com/zishengY/p/7137671.htmlhttps://www.iplayio.cn/post/80157Â¶3. LVMåˆ†åŒºç®¡ç†Â¶1ï¼‰ç›¸å…³æ¦‚å¿µæ ‡å‡†åˆ†åŒºæ˜¯æŒ‡å°†ç£ç›˜åˆ†å‰²æˆè‹¥å¹²ä¸ªåŒºåŸŸï¼Œæ¯ä¸ªåŒºåŸŸè¢«ç§°ä¸ºåˆ†åŒºã€‚æ¯ä¸ªåˆ†åŒºéƒ½è¢«è§†ä¸ºä¸€ä¸ªç‹¬ç«‹çš„é€»è¾‘å•å…ƒï¼Œå¹¶ä¸”å¯ä»¥æ ¼å¼åŒ–ä¸ºä¸åŒçš„æ–‡ä»¶ç³»ç»Ÿç±»åž‹ã€‚æ ‡å‡†åˆ†åŒºæ–¹æ¡ˆçš„ä¼˜ç‚¹æ˜¯ç®€å•ã€ç›´è§‚ï¼Œæ˜“äºŽç®¡ç†å’Œç»´æŠ¤ã€‚ä½†æ˜¯ï¼Œå¦‚æžœéœ€è¦è°ƒæ•´åˆ†åŒºå¤§å°æˆ–æ·»åŠ æ–°çš„åˆ†åŒºï¼Œåˆ™éœ€è¦é‡æ–°åˆ†åŒºï¼Œå¹¶ä¸”å¯èƒ½éœ€è¦é‡è£…æ“ä½œç³»ç»Ÿï¼Œè¿™ä¼šå¯¼è‡´æ•°æ®ä¸¢å¤±å’Œç³»ç»Ÿåœæœºæ—¶é—´è¾ƒé•¿ç­‰é—®é¢˜ã€‚LVMæ˜¯ä¸€ç§æ›´åŠ çµæ´»çš„ç£ç›˜åˆ†åŒºæ–¹æ¡ˆï¼Œå®ƒå…è®¸å°†å¤šä¸ªç‰©ç†ç£ç›˜æˆ–åˆ†åŒºè®¾ç½®ä¸ºç‰©ç†å·ï¼ˆPVï¼‰ï¼Œ ç„¶åŽå°†å®ƒä»¬ç»„åˆæˆä¸€ä¸ªæˆ–å¤šä¸ªé€»è¾‘å·ç»„ï¼ˆVGï¼‰ï¼Œç„¶åŽå°†é€»è¾‘å·ç»„åˆ’åˆ†ä¸ºä¸€ä¸ªæˆ–å¤šä¸ªé€»è¾‘å·ï¼ˆLVï¼‰ã€‚é€»è¾‘å·æ˜¯ä¸€ä¸ªè™šæ‹Ÿçš„ç£ç›˜åˆ†åŒºï¼Œå®ƒå¯ä»¥åŠ¨æ€åœ°è°ƒæ•´å¤§å°å’Œç§»åŠ¨ï¼Œè€Œä¸éœ€è¦é‡æ–°åˆ†åŒºæˆ–é‡è£…æ“ä½œç³»ç»Ÿã€‚æ­¤å¤–ï¼ŒLVMè¿˜æ”¯æŒåœ¨çº¿æ‰©å®¹å’Œå¿«ç…§ç­‰é«˜çº§ç‰¹æ€§ã€‚ä¸Žæ ‡å‡†åˆ†åŒºç›¸æ¯”ï¼ŒLVMçš„ä¼˜ç‚¹åœ¨äºŽå®ƒæä¾›äº†æ›´é«˜çš„çµæ´»æ€§å’Œå¯æ‰©å±•æ€§ï¼Œå¯ä»¥åŠ¨æ€åœ°åˆ†é…å’Œç®¡ç†å­˜å‚¨ç©ºé—´ï¼Œé¿å…äº†é‡æ–°åˆ†åŒºå’Œé‡è£…æ“ä½œç³»ç»Ÿçš„ç¹çè¿‡ç¨‹ã€‚ä½†æ˜¯ï¼ŒLVMä¹Ÿå­˜åœ¨ä¸€äº›ç¼ºç‚¹ï¼Œæ¯”å¦‚å®ƒå¯èƒ½ä¼šé™ä½Žç£ç›˜æ€§èƒ½ï¼Œå¢žåŠ ç³»ç»Ÿå¤æ‚åº¦å’Œå­¦ä¹ æˆæœ¬ç­‰ã€‚å› æ­¤ï¼Œåœ¨é€‰æ‹©åˆ†åŒºæ–¹æ¡ˆæ—¶ï¼Œéœ€è¦æ ¹æ®å®žé™…éœ€æ±‚å’ŒçŽ¯å¢ƒæ¥è¿›è¡Œæƒè¡¡å’Œé€‰æ‹©ã€‚è¯´æ˜Žï¼šç‰©ç†å·é€»è¾‘ä¸Šå¯åˆ’åˆ†ä¸ºå¤šä¸ªå¤§å°ç›¸åŒçš„ç‰©ç†æ‹“å±•PEï¼ŒPEæ˜¯LVMä¸­çš„æœ€å°åˆ†é…å•å…ƒï¼Œæ¯ä¸ª PE çš„å¤§å°é€šå¸¸ä¸º 4MBï¼Œå¯ä»¥åœ¨åˆ›å»ºpvçš„æ—¶å€™æŒ‡å®šå…¶å¤§å°ï¼Œå¦‚åˆ›å»ºä¸€ä¸ªPEå¤§å°ä¸º8MBçš„ç‰©ç†å·/dev/sdb1ï¼špvcreate -s 8M /dev/sdb1LVå¤§å°ä¸ºPEçš„æ•´æ•°å€ï¼Œç»„æˆLVçš„PEå¯èƒ½æ¥è‡ªä¸åŒçš„ç‰©ç†ç£ç›˜ã€‚åœ¨LVMä¸­ï¼Œç‰©ç†å·ï¼ˆPVï¼‰çš„å¯ç”¨å¤§å°å¯èƒ½å°äºŽå…¶åº•å±‚è®¾å¤‡çš„å¤§å°ï¼Œå…¶ä¸­ä¸€äº›åŽŸå› åŒ…æ‹¬ï¼šLVMä¼šåœ¨ç‰©ç†å·ä¸Šä¿ç•™ä¸€éƒ¨åˆ†ç©ºé—´ä½œä¸ºå…ƒæ•°æ®åŒºåŸŸï¼Œç”¨äºŽå­˜å‚¨é€»è¾‘å·ç»„ï¼ˆVGï¼‰å’Œé€»è¾‘å·ï¼ˆLVï¼‰çš„å…ƒæ•°æ®ä¿¡æ¯ã€‚è¿™äº›å…ƒæ•°æ®å ç”¨äº†ä¸€å®šçš„ç©ºé—´ï¼Œä»Žè€Œå‡å°‘äº†ç‰©ç†å·çš„å¯ç”¨ç©ºé—´ã€‚ç‰©ç†å·ä½¿ç”¨çš„æ–‡ä»¶ç³»ç»Ÿå¯èƒ½ä¹Ÿä¼šåœ¨è®¾å¤‡ä¸Šåˆ†é…ä¸€äº›ç©ºé—´ï¼Œä¾‹å¦‚ext4æ–‡ä»¶ç³»ç»Ÿä¼šåœ¨ç‰©ç†å·ä¸Šä¿ç•™ä¸€éƒ¨åˆ†ç©ºé—´ç”¨äºŽå­˜å‚¨æ–‡ä»¶ç³»ç»Ÿå…ƒæ•°æ®å’Œç¢Žç‰‡ä¿¡æ¯ã€‚è¿™äº›ç©ºé—´ä¹Ÿä¼šä½¿å¾—ç‰©ç†å·çš„å¯ç”¨ç©ºé—´å‡å°‘ã€‚å¦‚æžœç‰©ç†å·ä¸Šè¿˜æœ‰å…¶ä»–åˆ†åŒºæˆ–æ–‡ä»¶ç³»ç»Ÿï¼Œåˆ™å®ƒä»¬ä¹Ÿä¼šå ç”¨ä¸€äº›ç©ºé—´ï¼Œä»Žè€Œå‡å°‘äº†ç‰©ç†å·çš„å¯ç”¨ç©ºé—´ã€‚å› æ­¤ï¼Œå½“åˆ›å»ºç‰©ç†å·æ—¶ï¼Œåº”è¯¥è€ƒè™‘åˆ°è¿™äº›å› ç´ ï¼Œå¹¶ä¸ºç‰©ç†å·é¢„ç•™è¶³å¤Ÿçš„ç©ºé—´ä»¥ä¾›å…ƒæ•°æ®å’Œå…¶ä»–ç”¨é€”ä½¿ç”¨ã€‚Â¶2ï¼‰æŸ¥çœ‹12345678#æŸ¥çœ‹ç‰©ç†å·pvsã€pvdisplayã€pvscan#æŸ¥çœ‹å·ç»„vgsã€vgdisplayã€vgscan#æŸ¥çœ‹é€»è¾‘å·lvsã€lvdisplayã€lvscan#æŸ¥çœ‹ç£ç›˜åˆ†åŒºfdisk -LÂ¶3ï¼‰åˆ›å»º pvã€vgã€lv123456789101112#åˆ›å»ºpvç‰©ç†å·(è®¾å¤‡è·¯å¾„å¯ä»¥æ˜¯ç£ç›˜è®¾å¤‡è·¯å¾„ï¼ˆ/dev/sdbï¼‰æˆ–è€…åˆ†åŒºè®¾å¤‡è·¯å¾„ï¼ˆ/dev/sdb1ï¼‰)pvcreate è®¾å¤‡è·¯å¾„#å¦‚ï¼špvcreate /dev/sdb#è¿˜å¯ä»¥åŒæ—¶åˆ›å»ºå¤šä¸ªpvï¼Œå¦‚ï¼špvcreate vgå pv1è·¯å¾„ pv2è·¯å¾„ pv3è·¯å¾„#åˆ›å»ºvgå·ç»„vgcreate vgå pvè·¯å¾„#å¦‚ï¼švgcreate myvg /dev/sdb#åˆ›å»ºlvé€»è¾‘å·ï¼ˆå¤§å°å¯ä»¥ç”¨è®¡é‡å•ä½ï¼Œæ¯”å¦‚5Gï¼Œ2048Mç­‰ï¼Œå¦‚æžœè®¾ç½®çš„å¤§å°ä¸æ»¡è¶³peå¤§å°çš„æ•´æ•°å€å°†è‡ªåŠ¨è¿›è¡Œå››èˆäº”å…¥å¤„ç†ï¼‰lvcreate -n lvå -L å¤§å° vgå#å¦‚ï¼šlvcreate -n mylv -L 5G myvgÂ¶4ï¼‰æ ¼å¼åŒ–å’ŒæŒ‚è½½ lv1234567891011#æ ¼å¼åŒ–lvï¼ˆlvå®Œæ•´è·¯å¾„å¯ä»¥é€šè¿‡å‘½ä»¤lvdisplayæŸ¥çœ‹ï¼‰mkfs.ext4 lvå®Œæ•´è·¯å¾„#å¦‚ï¼šmkfs.ext4 /dev/myvg/mylv#æŒ‚è½½ï¼ˆæŒ‚è½½ç‚¹å³éœ€è¦æŒ‚è½½çš„ç›®å½•ï¼Œéœ€è¦æå‰åˆ›å»ºï¼‰mount lvå®Œæ•´è·¯å¾„ æŒ‚è½½ç‚¹ç›®å½•è·¯å¾„#å¦‚ï¼šmount /dev/myvg/mylv /mnt/mylv#å¼€æœºè‡ªåŠ¨æŒ‚è½½echo "lvå®Œæ•´è·¯å¾„ æŒ‚è½½ç‚¹ç›®å½•è·¯å¾„ ext4 defaults 1 1" &gt;&gt; /etc/fstab#å¦‚ï¼šecho "/dev/myvg/mylv /mnt/mylv ext4 defaults 1 1" &gt;&gt; /etc/fstabÂ¶5ï¼‰å¸è½½ lv123#ï¼ˆå¦‚æžœæœ‰å¼€æœºè‡ªåŠ¨æŒ‚è½½é…ç½®è¿˜éœ€è¦åˆ é™¤/etc/fstabæ–‡ä»¶å¯¹åº”çš„æŒ‚è½½é…ç½®ï¼‰umount lvå®Œæ•´è·¯å¾„#å¦‚ï¼šumount /mnt/mylvÂ¶6ï¼‰åˆ é™¤ lvã€vgã€pv1234567891011#åˆ lvï¼ˆæ³¨æ„ï¼šåˆ é™¤lvå‰è¦å…ˆå°†å…¶å¸è½½ï¼‰lvremove lvå®Œæ•´è·¯å¾„ #å¦‚ï¼šlvremove /dev/myvg/mylv#åˆ vgvgremove vgå#å¦‚ï¼švgremove myvg#åˆ PVpvremove è®¾å¤‡å®Œæ•´è·¯å¾„ åŽ»ç¡¬ç›˜#å¦‚ï¼špvremove /dev/sdbÂ¶7ï¼‰æ‰©å®¹æ‰©å®¹ l vçš„æ—¶å¦‚æžœ vg å®¹é‡ä¸å¤Ÿï¼Œéœ€è¦æ·»åŠ  pv å¹¶åŠ åˆ° vg ä¸­ç„¶åŽå†ç»™ lv æ‰©å®¹ï¼Œå¦åˆ™ä¸éœ€è¦è¿™ä¸ªæ­¥éª¤ã€‚1234567#æ·»åŠ æ–°çš„pvpvcreate è®¾å¤‡è·¯å¾„#å¦‚ï¼špvcreate /dev/sdc#æ‰©å±•vgvgextend vgå æ–°å¢žpvè·¯å¾„#å¦‚ï¼švgextend myvg /dev/sdc123#æ‰©å®¹lvï¼ˆæ‰©å±•é‡å¯ä»¥ç”¨è®¡é‡å•ä½ï¼Œæ¯”å¦‚3Gï¼Œé€šè¿‡+è¡¨ç¤ºæ‰©å±•å¤šå°‘ï¼Œè€Œå¦‚æžœä¸ç”¨+åˆ™è¡¨ç¤ºæ‰©å±•åˆ°å¤šå°‘ï¼‰lvextend -L +æ‰©å±•é‡ lvå®Œæ•´è·¯å¾„#å¦‚ï¼šlvextend -L +3G /dev/myvg/mylvä»¥ä¸Šåªæ˜¯å¯¹lvè¿›è¡Œæ‰©å®¹ï¼Œä½†æ–‡ä»¶ç³»ç»Ÿæ˜¯æ— æ³•è¯†åˆ«çš„ï¼Œæ•…éœ€è¦è°ƒæ•´æ–‡ä»¶ç³»ç»Ÿå®¹é‡123#è°ƒæ•´æ–‡ä»¶ç³»ç»Ÿå®¹é‡ï¼ˆå°†æ–‡ä»¶ç³»ç»Ÿæ‰©å±•åˆ°é€»è¾‘å·çš„æ•´ä¸ªå¤§å°ï¼‰resize2fs lvå®Œæ•´è·¯å¾„ #å¦‚ï¼šresize2fs /dev/myvg/mylvÂ¶8ï¼‰ç¼©å®¹12345678910111213141516171819#é¦–å…ˆè¿›è¡Œå¸è½½umount lvå®Œæ•´è·¯å¾„#å¦‚ï¼šumount /dev/myvg/mylv#æ£€æŸ¥æ–‡ä»¶ç³»ç»Ÿe2fsck -f lvå®Œæ•´è·¯å¾„#å¦‚ï¼še2fsck -f /dev/myvg/mylv#å‡å°‘æ–‡ä»¶ç³»ç»Ÿresize2fs lvå®Œæ•´è·¯å¾„ å‡å°‘åˆ°çš„å¤§å°#å¦‚ï¼šresize2fs /dev/myvg/mylv 2G#å‡å°‘lvå·å¤§å°ï¼ˆæ³¨æ„:æ–‡ä»¶ç³»ç»Ÿçš„å‡å°åŽå¤§å°ä¸€å®šè¦å’Œlvå·æœ€ç»ˆå¤§å°ç›¸ç­‰ï¼‰lvreduce -L å‡å°‘åˆ°çš„å¤§å° lvçš„å®Œæ•´è·¯å¾„#å¦‚ï¼šlvreduce -L 2G /dev/myvg/mylv#é‡æ–°æŒ‚è½½ä½¿ç”¨mount lvå®Œæ•´è·¯å¾„ æŒ‚è½½ç‚¹#å¦‚ï¼šmount /dev/myvg/mylv /mnt/mylvÂ¶9ï¼‰æ›¿æ¢ç£ç›˜åœ¨ LVS ä¸­ï¼Œæ›¿æ¢ç£ç›˜å³æ›¿æ¢ PVï¼Œæ³¨æ„æ–° PV å®¹é‡è¦å¤§äºŽç­‰äºŽåŽŸ PVã€‚1234567891011#è®¾å°†åŽŸsdaç£ç›˜æ›¿æ¢ä¸ºæ–°çš„sdbç£ç›˜ï¼Œå¹¶ç§»é™¤åŽŸsdaç£ç›˜ï¼Œæ“ä½œå¦‚ä¸‹ï¼š#å…ˆå‡†å¤‡ä¸€ä¸ªæ–°çš„ç£ç›˜ pv åŠ å…¥æ­é… vg ä¸­pvcreate /dev/sdbgextend myvg /dev/sdb#é€šè¿‡pvmoveå‘½ä»¤ç§»åŠ¨åŽŸpvçš„æ•°æ®åˆ°æ–°çš„pvä¸­pvmove /dev/sda /dev/sdb#ä»Žvgä¸­ç§»é™¤åŽŸpvvgreduce myvg /dev/sda#åˆ é™¤åŽŸpvpvremove /dev/sda#å¦‚æžœæ–°pvå®¹é‡æ¯”åŽŸpvå¤§ï¼Œåˆ™è¿˜å¯ä»¥é€šè¿‡lvextendå’Œresize2fså‘½ä»¤è¿›è¡Œæ‰©å®¹Â¶å‚è€ƒï¼šhttps://www.cnblogs.com/linuxprobe/p/5381538.htmlÂ¶åäºŒã€æ—¶é—´ç®¡ç†Â¶1. æŸ¥çœ‹æ—¶é—´1234567#æŸ¥çœ‹å½“å‰ç³»ç»Ÿæ—¶é—´date#æŒ‡å®šæ ¼å¼æŸ¥çœ‹å½“å‰ç³»ç»Ÿæ—¶é—´date +"%Y-%m-%d %H:%M:%S"#æŸ¥çœ‹æ—¥åŽ†ï¼Œ-yé€‰é¡¹å¯ä»¥æŸ¥çœ‹ä¸€å¹´çš„æ—¥åŽ†calcal 2022Â¶2. ä¿®æ”¹æ—¶é—´1234567891011121314#ä¿®æ”¹æ—¶åˆ†ç§’date -s 11:11:11#ä¿®æ”¹å¹´æœˆæ—¥date -s 2019-11-11#ä¿®æ”¹å¹´æœˆæ—¥æ—¶åˆ†ç§’date -s "2019-11-11 11:11:11"#ä¿å­˜ä¸ºbiosæ—¶é—´(RTC)ï¼ˆåŒæ­¥BIOSæ—¶é’Ÿï¼Œå¼ºåˆ¶å°†ç³»ç»Ÿæ—¶é—´å†™å…¥CMOSï¼Œä½¿ä¹‹æ°¸ä¹…ç”Ÿæ•ˆï¼Œé¿å…ç³»ç»Ÿé‡å¯åŽæ¢å¤æˆåŽŸæ—¶é—´ã€‚ï¼‰hwclock -w#æˆ–è€…clock -w#æŸ¥çœ‹biosæ—¶é—´hwclock -rÂ¶3.è®¾ç½®æ—¶åŒº1234567#æŸ¥çœ‹å½“å‰ç³»ç»Ÿé…ç½®çš„æ—¶åŒºtimedatectl | grep "Time zone" #æˆ–è€…ï¼šcat /etc/timezone#æ˜¾ç¤ºç³»ç»Ÿä¸­æ”¯æŒçš„æ‰€æœ‰æ—¶åŒºåˆ—è¡¨timedatectl list-timezones#è®¾ç½®å½“å‰ç³»ç»Ÿä¸ºAsia/Shanghaiä¸Šæµ·æ—¶åŒºtimedatectl set-timezone Asia/ShanghaiÂ¶4. æ—¶é—´åŒæ­¥Â¶4.1 å•æœºç‰ˆ123456#å®‰è£…ntpdateyum install ntpdate -y#åŒæ­¥ç½‘ç»œæ—¶é—´ï¼ˆè¦æ±‚æœåŠ¡å™¨å¯è®¿é—®å¤–ç½‘ï¼‰ntpdate ntp1.aliyun.com#ä¿å­˜ä¸ºbiosæ—¶é—´(RTC)hwclock -wÂ¶4.2 é›†ç¾¤ç‰ˆæ–¹æ¡ˆï¼šé›†ç¾¤ä¸­ï¼Œè¦æ±‚æœ‰ä¸€å°èƒ½è®¿é—®å¤–ç½‘çš„æœåŠ¡å™¨ä½œä¸ºæ—¶é—´æœåŠ¡å™¨ï¼Œå…¶ä½™å†…ç½‘æœåŠ¡å™¨é€šè¿‡è¿™å°æ—¶é—´æœåŠ¡å™¨æ¥å®žçŽ°æ—¶é—´åŒæ­¥ã€‚æœ‰ä¸¤ç§å¸¸ç”¨çš„æœåŠ¡å·¥å…·å®žçŽ°ï¼šntpå’Œchronyæ³¨æ„ï¼šè¿™é‡Œntpå’Œchronyç›¸æ¯”äºŽntpdateçš„åŒºåˆ«åœ¨äºŽï¼Œntpdateåªèƒ½æ‰‹åŠ¨å•æ¬¡åŒæ­¥æ—¶é—´ï¼ˆé™¤éžç¼–å†™cronpé…ç½®ï¼‰ï¼Œå…¶åŒæ­¥æ—¶é—´çš„é€Ÿåº¦æ˜¯å¾ˆå¿«çš„ã€‚è€Œntpå’Œchronyæœ¬èº«å°±å¯ä»¥è‡ªå·±å®šæ—¶åŒæ­¥æ—¶é—´ï¼Œå…¶åŒæ­¥æ—¶é—´çš„é€Ÿåº¦å¯èƒ½éœ€è¦å‡ åˆ†é’Ÿä»¥ä¸Šã€‚å…¨çƒç›¸å…³ntpæ—¶é—´æœåŠ¡å™¨ï¼šhttps://www.ntppool.org/zh/Â¶4.2.1 ntpï¼ˆ1ï¼‰å®‰è£…å’ŒçŽ¯å¢ƒå‡†å¤‡12345678#å®‰è£…ntpyum install ntp -y#å¼€æ”¾123ç«¯å£é˜²ç«å¢™ä½œä¸ºå®¢æˆ·ç«¯è®¿é—®çš„ç«¯å£firewall-cmd --permanent --add-port=123/udpfirewall-cmd --reload#ä½¿ç”¨å‰å¯ä»¥æŠŠå…¶ä»–æ—¶é—´åŒæ­¥æœåŠ¡å…³æŽ‰ï¼Œæ¯”å¦‚chronyï¼ˆå¦‚æžœæœ‰ä½¿ç”¨çš„è¯ï¼‰systemctl stop chronyd &amp;&amp; systemctl disable chronydï¼ˆ2ï¼‰ä¿®æ”¹ntpå‚æ•°é…ç½®æ–‡ä»¶ðŸ™†â€â™‚å¯¹äºŽntpdï¼Œå‘çŽ°è¿™é‡Œä¸åšé…ç½®ä¹Ÿå¯ä»¥è‡ªåŠ¨åŒæ­¥ç¡¬ä»¶æ—¶é—´ã€‚123vim /etc/sysconfig/ntpd#å¯é€‰æ‹©ä¿®æ”¹ï¼Œæ˜¯è®©ntpdateåŒæ­¥æ—¶å€™æ—¶å†™åˆ°ç¡¬ä»¶vim /etc/sysconfig/ntpdateä¿®æ”¹æˆ–è€…è¿½åŠ å¦‚ä¸‹é…ç½®12#åŒæ­¥æ—¶é—´åŽï¼Œå†™åˆ°ç¡¬ä»¶ä¸­SYNC_HWCLOCK=yesï¼ˆ3ï¼‰ä¿®æ”¹ntpé…ç½®æ–‡ä»¶12#ä¿®æ”¹ntpé…ç½®æ–‡ä»¶ï¼ˆåªåšä»¥ä¸‹ç›¸å…³é…ç½®ä¿®æ”¹ï¼Œå…¶ä½™ä¿æŒä¸å˜ï¼‰vim /etc/ntp.confæœåŠ¡ç«¯é…ç½®1234567891011#å…è®¸192.168.60.0ç½‘æ®µå†…æ‰€æœ‰æœºå™¨ä»Žæœ¬æœºåŒæ­¥æ—¶é—´restrict 192.168.60.0 mask 255.255.255.0 nomodify notrap#æ—¶é—´æœåŠ¡å™¨åœ°å€server 0.centos.pool.ntp.org iburstserver ntp1.aliyun.com iburst#å…è®¸ä¸Šå±‚æ—¶é—´æœåŠ¡å™¨ä¸»åŠ¨ä¿®æ”¹æœ¬æœºæ—¶é—´restrict 0.centos.pool.ntp.org nomodify notrap noqueryrestrict ntp1.aliyun.com nomodify notrap noquery#å¤–éƒ¨æ—¶é—´æœåŠ¡å™¨ä¸å¯ç”¨æ—¶ï¼Œä»¥æœ¬åœ°æ—¶é—´ä½œä¸ºæ—¶é—´æœåŠ¡server 127.127.1.0fudge 127.127.1.0 stratum 10å®¢æˆ·ç«¯é…ç½®1234567#ä»Žnode1ä¸­åŒæ­¥æ—¶é—´server 192.168.60.101 iburst#å…è®¸node01ä¿®æ”¹æœ¬åœ°æ—¶é—´restrict 192.168.60.101 nomodify notrap noquery#å¦‚æžœnode01ä¸å¯ç”¨ï¼Œç”¨æœ¬åœ°çš„æ—¶é—´æœåŠ¡server 127.127.1.0fudge 127.127.1.0 stratum 10ï¼ˆ4ï¼‰å¯åŠ¨å’Œæµ‹è¯•12345678910111213141516171819202122232425262728293031#ntpdè¿›ç¨‹è¿›è¡ŒåŒæ­¥æ—¶ï¼Œå¯èƒ½éœ€è¦5-10åˆ†é’Ÿçš„æ—¶é—´æ‰èƒ½åŒæ­¥ï¼Œå¦å¤–ntpdå¼€å¯åŽï¼Œåˆ™æ— æ³•ä½¿ç”¨ntpdateï¼Œæ‰€ä»¥å¯ä»¥æå‰å…ˆæ‰‹åŠ¨åŒæ­¥ntpdate ntp1.aliyun.com#ntpdate 192.168.60.101hwclock -w#å¯åŠ¨æœåŠ¡systemctl start ntpd#å¼€æœºå¯åŠ¨systemctl enable ntpdnetstat -tunlp |grep ntpd##ä¸Šå±‚ ntp çš„çŠ¶æ€ #*è¡¨ç¤ºç›®å‰ä½¿ç”¨çš„ntp server #remoteï¼šç”¨äºŽåŒæ­¥çš„è¿œç¨‹èŠ‚ç‚¹æˆ–æœåŠ¡å™¨ã€‚â€œLOCALâ€è¡¨ç¤ºæœ¬æœºï¼ˆå½“æ²¡æœ‰è¿œç¨‹æœåŠ¡å™¨å¯ç”¨æ—¶ä¼šå‡ºçŽ°ï¼‰ #refidï¼šè¿œç¨‹çš„æœåŠ¡å™¨è¿›è¡ŒåŒæ­¥çš„æ›´é«˜ä¸€çº§æœåŠ¡å™¨ #stï¼šå³stratumé˜¶å±‚ï¼Œå€¼è¶Šå°è¡¨ç¤ºntp serveçš„ç²¾å‡†åº¦è¶Šé«˜ #whenï¼šæœ€åŽä¸€æ¬¡åŒæ­¥åˆ°çŽ°åœ¨çš„æ—¶é—´ #Pollè¡¨ç¤ºï¼Œæ¯éš”å¤šå°‘æ¯«ç§’ä¸Žntp serveråŒæ­¥ä¸€æ¬¡ #reachï¼šå·²ç»æˆåŠŸæ›´æ–°çš„æ¬¡æ•° #delayï¼šä»Žæœ¬åœ°åˆ°è¿œç¨‹èŠ‚ç‚¹æˆ–æœåŠ¡å™¨é€šä¿¡çš„å¾€è¿”æ—¶é—´ #offsetï¼šä¸»æœºä¸Žè¿œç¨‹èŠ‚ç‚¹æˆ–æœåŠ¡å™¨æ—¶é—´æºçš„æ—¶é—´åç§»é‡ï¼Œoffset è¶ŠæŽ¥è¿‘äºŽ0ï¼Œä¸»æœºå’Œ NTP æœåŠ¡å™¨çš„æ—¶é—´è¶ŠæŽ¥è¿‘(ä»¥æ–¹å‡æ ¹è¡¨ç¤ºï¼Œå•ä½ä¸ºæ¯«ç§’) #jitterï¼šä¸Žè¿œç¨‹èŠ‚ç‚¹åŒæ­¥çš„æ—¶é—´æºçš„å¹³å‡åå·®ï¼ˆå¤šä¸ªæ—¶é—´æ ·æœ¬ä¸­çš„ offset çš„åå·®ï¼Œå•ä½æ˜¯æ¯«ç§’ï¼‰ï¼Œè¿™ä¸ªæ•°å€¼çš„ç»å¯¹å€¼è¶Šå°ï¼Œä¸»æœºçš„æ—¶é—´å°±è¶Šç²¾ç¡®ntpq -p#å¯é€šè¿‡watchæ¥å®žæ—¶ç›‘æŽ§watch ntpq -p#ntp åŒæ­¥çŠ¶æ€ï¼ˆç­‰å¾…5-10åˆ†é’ŸåŽï¼ŒæŸ¥çœ‹åŒæ­¥çŠ¶æ€ï¼‰ntpstat#æŸ¥çœ‹æ—¥å¿—tail -f /var/log/messagesÂ¶4.2.2 chronyï¼ˆ1ï¼‰å®‰è£…å’ŒçŽ¯å¢ƒå‡†å¤‡123456789#å®‰è£…chronyyum install chrony -y#å¼€æ”¾123ç«¯å£é˜²ç«å¢™ä½œä¸ºå®¢æˆ·ç«¯è®¿é—®çš„ç«¯å£firewall-cmd --permanent --add-port=123/udpfirewall-cmd --permanent --add-port=323/udpfirewall-cmd --reload#ä½¿ç”¨å‰å¯ä»¥æŠŠå…¶ä»–æ—¶é—´åŒæ­¥æœåŠ¡å…³æŽ‰ï¼Œæ¯”å¦‚ntpï¼ˆå¦‚æžœæœ‰ä½¿ç”¨çš„è¯ï¼‰systemctl stop ntpd &amp;&amp; systemctl disable ntpdï¼ˆ2ï¼‰ä¿®æ”¹chronyé…ç½®æ–‡ä»¶12#ä¿®æ”¹é…ç½®æ–‡ä»¶ï¼ˆåªåšä»¥ä¸‹ç›¸å…³é…ç½®ä¿®æ”¹ï¼Œå…¶ä½™ä¿æŒä¸å˜ï¼‰vim /etc/chrony.confæœåŠ¡ç«¯é…ç½®å‡è®¾æœåŠ¡ç«¯ipä¸º192.168.60.101123456789#å¤–ç½‘ntpæ—¶é—´æœåŠ¡å™¨åœ°å€server 0.centos.pool.ntp.org iburstserver ntp1.aliyun.com iburst#åŒæ­¥åˆ°biosæ—¶é—´(RTC)rtcsync#é™åˆ¶å…è®¸192.168.60ç½‘æ®µipçš„å®¢æˆ·ç«¯åŒæ­¥allow 192.168.60.0/24#å³ä½¿æœªä¸Žæ—¶é—´æºåŒæ­¥ä¹Ÿå¯æä¾›æœ¬åœ°æ—¶é—´local stratum 10å®¢æˆ·ç«¯é…ç½®1234# åˆ é™¤å…¶å®ƒserverï¼Œå¹¶æ·»åŠ å¦‚ä¸‹serverserver 192.168.60.101 iburst#åŒæ­¥åˆ°biosæ—¶é—´(RTC)rtcsyncï¼ˆ3ï¼‰å¯åŠ¨å’Œæµ‹è¯•1234567891011121314#å¯åŠ¨æœåŠ¡systemctl start chronyd#æµ‹è¯•æ—¶é—´åŒæ­¥çš„æ—¶å€™ï¼ˆå‡è®¾æ‰‹åŠ¨è®¾ç½®äº†é”™è¯¯çš„æ—¶é—´ï¼‰å¦‚æžœchronydå·²ç»å¯åŠ¨äº†çš„è¯ï¼Œéœ€è¦é‡å¯ä»¥ä¸‹æ‰èƒ½çœ‹æ•ˆæžœsystemctl restart chronyd#å¼€æœºå¯åŠ¨systemctl enable chronydnetstat -tunlp |grep chronyd#å¼ºåˆ¶å¿«é€ŸåŒæ­¥ç³»ç»Ÿæ—¶é—´chronyc -a makestephwclock -w#chronyå…¼å®¹ntpdateï¼Œå®¢æˆ·ç«¯ä¹Ÿå¯ä»¥ä½¿ç”¨ntpdateæ‰‹åŠ¨å¿«é€ŸåŒæ­¥æ—¶é—´ntpdate 192.168.60.101Â¶5. å®šæ—¶ä»»åŠ¡Â¶1ï¼‰ç”¨æˆ·å®šæ—¶ä»»åŠ¡æ¯ä¸ªç”¨æˆ·éƒ½å¯ä»¥åˆ›å»ºè‡ªå·±çš„å®šæ—¶ä»»åŠ¡ï¼Œè¿™äº›ä»»åŠ¡ä»…å¯¹è¯¥ç”¨æˆ·å¯è§å’Œæ‰§è¡Œã€‚ç”¨æˆ·å®šæ—¶ä»»åŠ¡é€šå¸¸å­˜å‚¨åœ¨/var/spool/cronç›®å½•é‡Œã€‚éƒ½æ˜¯ä»¥ç”¨æˆ·åå‘½åçš„å­ç›®å½•é‡Œã€‚åœ¨ RedHat ç³»åˆ—ç³»ç»Ÿé‡Œï¼Œç”¨æˆ·çš„å®šæ—¶ä»»åŠ¡é…ç½®æ–‡ä»¶ï¼ˆä¹Ÿç§°ä¸º crontab æ–‡ä»¶ï¼‰å­˜å‚¨åœ¨ /var/spool/cron/ ç›®å½•ä¸­ã€‚æ¯ä¸ªç”¨æˆ·çš„å®šæ—¶ä»»åŠ¡éƒ½ä¿å­˜åœ¨ç›¸åº”çš„ç”¨æˆ·åæ–‡ä»¶ä¸­ï¼Œä¾‹å¦‚ï¼Œroot ç”¨æˆ·çš„å®šæ—¶ä»»åŠ¡æ–‡ä»¶ä½äºŽ/var/spool/cron/rootã€‚åœ¨ Debian ç³»åˆ—ç³»ç»Ÿé‡Œï¼Œç”¨æˆ·çš„å®šæ—¶ä»»åŠ¡é…ç½®æ–‡ä»¶åŒæ ·æ˜¯ crontab æ–‡ä»¶ï¼Œå­˜å‚¨åœ¨ /var/spool/cron/crontabs/ ç›®å½•ä¸­ã€‚æ¯ä¸ªç”¨æˆ·çš„å®šæ—¶ä»»åŠ¡éƒ½ä¿å­˜åœ¨ç›¸åº”çš„ç”¨æˆ·åæ–‡ä»¶ä¸­ï¼Œä¾‹å¦‚ï¼Œrootç”¨æˆ·çš„å®šæ—¶ä»»åŠ¡æ–‡ä»¶ä½äºŽ /var/spool/cron/crontabs/rootã€‚1234567891011121314151617181920212223##ç”¨æˆ·å®šæ—¶ä»»åŠ¡çš„é…ç½®æ ¼å¼m h dom mon dow command#ç¼–è¾‘ç”¨æˆ·å®šæ—¶ä»»åŠ¡crontab -e##ç¤ºä¾‹ï¼š#ï¼ˆ1ï¼‰æ¯å¤©å‡Œæ™¨2ç‚¹æ‰§è¡Œå‘½ä»¤0 2 * * * command#ï¼ˆ2ï¼‰æ¯å‘¨ä¸€åˆ°å‘¨äº”çš„ä¸Šåˆ9ç‚¹æ‰§è¡Œå‘½ä»¤0 9 * * 1-5 command#ï¼ˆ3ï¼‰æ¯ä¸ªæœˆçš„1å·å’Œ15å·çš„ä¸‹åˆ3ç‚¹æ‰§è¡Œå‘½ä»¤0 15 1,15 * * command#ï¼ˆ4ï¼‰æ¯å°æ—¶çš„ç¬¬10åˆ†é’Ÿæ‰§è¡Œå‘½ä»¤10 * * * * command#ï¼ˆ5ï¼‰æ¯éš”5åˆ†é’Ÿæ‰§è¡Œå‘½ä»¤*/5 * * * * command#æ¯1åˆ†é’Ÿæ‰§è¡Œä¸€æ¬¡ä»»åŠ¡* * * * * command #åŒï¼š*/1 * * * * commandðŸ’â€â™‚ cron è¡¨è¾¾å¼è¯´æ˜Žï¼šå®šæ—¶ä»»åŠ¡çš„è¯­æ³•ç”±äº”ä¸ªæ—¶é—´å­—æ®µå’Œä¸€ä¸ªå‘½ä»¤å­—æ®µç»„æˆï¼Œç”¨äºŽæŒ‡å®šä»»åŠ¡æ‰§è¡Œçš„æ—¶é—´é—´éš”å’Œè¦æ‰§è¡Œçš„å‘½ä»¤ã€‚mï¼šåˆ†é’Ÿï¼ˆminuteï¼š0-59ï¼‰hï¼šå°æ—¶ï¼ˆhourï¼š0-23ï¼‰domï¼šæœˆä»½ä¸­çš„æŸä¸€å¤©ï¼ˆday of monthï¼š1-31ï¼‰monï¼šæœˆä»½ï¼ˆmonthï¼š1-12ï¼‰dowï¼šæ˜ŸæœŸä¸­çš„æŸä¸€å¤©ï¼ˆday of weekï¼š0-7ï¼Œå…¶ä¸­0å’Œ7éƒ½è¡¨ç¤ºæ˜ŸæœŸæ—¥ï¼‰commandï¼šè¦æ‰§è¡Œçš„å‘½ä»¤æˆ–è„šæœ¬è·¯å¾„ç‰¹æ®Šçš„å­—ç¬¦å’Œç¬¦å·ï¼šæ˜Ÿå·(*)ï¼šé€šé…ç¬¦ï¼Œè¡¨ç¤ºåŒ¹é…æ‰€æœ‰å¯èƒ½çš„å€¼ã€‚ä¾‹å¦‚ï¼Œ*è¡¨ç¤ºæ¯åˆ†é’Ÿã€æ¯å°æ—¶ã€æ¯å¤©ã€æ¯æœˆã€æ¯å‘¨éƒ½æ‰§è¡Œã€‚é€—å·(,)ï¼šç”¨äºŽåˆ—ä¸¾å¤šä¸ªå€¼ã€‚ä¾‹å¦‚ï¼Œ1,5,10è¡¨ç¤º1ã€5å’Œ10è¿™ä¸‰ä¸ªå€¼ã€‚è¿žæŽ¥ç¬¦(-)ï¼šç”¨äºŽå®šä¹‰èŒƒå›´ã€‚ä¾‹å¦‚ï¼Œ3-6è¡¨ç¤ºä»Ž3åˆ°6çš„è¿žç»­å€¼ã€‚æ–œçº¿(/)ï¼šç”¨äºŽå®šä¹‰æ­¥é•¿ã€‚ä¾‹å¦‚ï¼Œ*/5è¡¨ç¤ºæ¯éš”5ä¸ªå•ä½æ‰§è¡Œä¸€æ¬¡ã€‚å¯¹äºŽåˆ†é’Ÿå­—æ®µï¼Œ*/5è¡¨ç¤ºæ¯éš”5åˆ†é’Ÿæ‰§è¡Œä¸€æ¬¡ã€‚ðŸ’â€â™‚ æ³¨æ„ï¼šç”¨æˆ·å®šæ—¶ä»»åŠ¡åªèƒ½å¼ºåˆ¶ä»¥ç”¨æˆ·èº«ä»½è¿è¡Œï¼Œä¸èƒ½æŒ‡å®šæ‰§è¡Œä»»åŠ¡çš„ç”¨æˆ·Â¶2ï¼‰ç³»ç»Ÿå®šæ—¶ä»»åŠ¡ç³»ç»Ÿå®šæ—¶ä»»åŠ¡å¯¹æ•´ä¸ªç³»ç»Ÿç”Ÿæ•ˆã€‚è¿™äº›ä»»åŠ¡åªæœ‰ root ç”¨æˆ·æˆ–å…·æœ‰ sudo æƒé™çš„ç”¨æˆ·æ‰èƒ½ç®¡ç†ç»´æŠ¤ï¼Œç³»ç»Ÿçº§åˆ«çš„ crontab æ–‡ä»¶é€šå¸¸å­˜å‚¨åœ¨ /etc/crontab æˆ– /etc/cron.d/ ç›®å½•ä¸­ã€‚123456789101112131415##ç³»ç»Ÿå®šæ—¶ä»»åŠ¡çš„é…ç½®æ ¼å¼m h dom mon dow user command#ç¼–è¾‘ç³»ç»Ÿå®šæ—¶ä»»åŠ¡vi /etc/crontab##ç¤ºä¾‹ï¼š#ï¼ˆ1ï¼‰æ¯å¤©å‡Œæ™¨2ç‚¹æ‰§è¡Œå‘½ä»¤0 2 * * * root command#ï¼ˆ2ï¼‰æ¯å‘¨ä¸€åˆ°å‘¨äº”çš„ä¸Šåˆ9ç‚¹æ‰§è¡Œå‘½ä»¤0 9 * * 1-5 root command#ï¼ˆ3ï¼‰æ¯ä¸ªæœˆçš„1å·å’Œ15å·çš„ä¸‹åˆ3ç‚¹æ‰§è¡Œå‘½ä»¤0 15 1,15 * * root commanduserï¼šæ‰§è¡Œå‘½ä»¤çš„ç”¨æˆ·ï¼ˆé»˜è®¤ä»¥ root ç”¨æˆ·èº«ä»½è¿è¡Œï¼Œä½†å¯ä»¥æŒ‡å®šå…¶ä»–ç”¨æˆ·èº«ä»½è¿è¡Œï¼‰Â¶åä¸‰ã€Shellç¼–ç¨‹Â¶1. sed å‘½ä»¤å·¥å…·åå‘åœºæ™¯æ˜¯ä»¥æµå¤„ç†çš„æ–¹å¼ç¼–è¾‘æ–‡æ¡£å¤„ç†æ–¹å¼ï¼šä»¥è¡Œå¤„ç†sedæ˜¯ä¸€ç§å‡ ä¹ŽåŒ…æ‹¬åœ¨æ‰€æœ‰ UNIX å¹³å°ï¼ˆåŒ…æ‹¬ Linuxï¼‰çš„è½»é‡çº§æµç¼–è¾‘å™¨ã€‚sedä¸»è¦æ˜¯ç”¨æ¥å°†æ•°æ®è¿›è¡Œé€‰å–ã€æ›¿æ¢ã€åˆ é™¤ã€æ–°å¢žçš„å‘½ä»¤ã€‚Â¶1.1 æ ¼å¼1sed [é€‰é¡¹] '[ åŒ¹é…åœ°å€ [!] åŠ¨ä½œ]' æ–‡ä»¶å!è¡¨ç¤ºå¯¹åŒ¹é…åœ°å€çš„è¡Œä¸æ‰§è¡ŒåŠ¨ä½œåŒ¹é…åœ°å€å¯ä»¥æ˜¯:ï¼ˆ1ï¼‰æ¨¡å¼åŒ¹é…åœ°å€ï¼Œå³æ­£åˆ™è¡¨è¾¾å¼ï¼ˆ2ï¼‰è¡Œæ•°èŒƒå›´ï¼Œå†™æ•°å­—å¸¸ç”¨é€‰é¡¹-nï¼š ä¸€èˆ¬sedå‘½ä»¤ä¼šæŠŠæ‰€æœ‰æ•°æ®éƒ½è¾“å‡ºåˆ°å±å¹• ï¼Œå¦‚æžœåŠ å…¥æ­¤é€‰æ‹©ï¼Œåˆ™åªä¼šæŠŠç»è¿‡sedå‘½ä»¤å¤„ç†çš„è¡Œè¾“å‡ºåˆ°å±å¹•ã€‚-eï¼š å…è®¸å¯¹è¾“å…¥æ•°æ®åº”ç”¨å¤šæ¡sedå‘½ä»¤ç¼–è¾‘-iï¼š ç”¨sedçš„ä¿®æ”¹ç»“æžœç›´æŽ¥ä¿®æ”¹è¯»å–æ•°æ®çš„æ–‡ä»¶ï¼Œè€Œä¸æ˜¯ç”±å±å¹•è¾“å‡ºï¼ˆå³ä¼šä¿®æ”¹æºæ•°æ®ï¼‰åŠ¨ä½œ(ä½œç”¨äºŽè¡Œ)a \ï¼š è¿½åŠ ï¼Œåœ¨å½“å‰è¡ŒåŽæ·»åŠ ä¸€è¡Œæˆ–å¤šè¡Œã€‚æ·»åŠ å¤šè¡Œæ—¶ï¼Œé™¤æœ€åŽ ä¸€è¡Œå¤–ï¼Œæ¯è¡Œæœ«å°¾éœ€è¦ç”¨â€œ\â€ä»£è¡¨æ•°æ®æœªå®Œç»“ã€‚c \ï¼š è¡Œæ›¿æ¢ï¼Œç”¨cåŽé¢çš„å­—ç¬¦ä¸²æ›¿æ¢åŽŸæ•°æ®è¡Œï¼Œæ›¿æ¢å¤šè¡Œæ—¶ï¼Œé™¤æœ€åŽä¸€è¡Œå¤–ï¼Œæ¯è¡Œæœ«å°¾éœ€ç”¨â€œ\â€ä»£è¡¨æ•°æ®æœªå®Œç»“ã€‚i \ï¼š æ’å…¥ï¼Œåœ¨å½“æœŸè¡Œå‰æ’å…¥ä¸€è¡Œæˆ–å¤šè¡Œã€‚æ’å…¥å¤šè¡Œæ—¶ï¼Œé™¤æœ€åŽ ä¸€è¡Œå¤–ï¼Œæ¯è¡Œæœ«å°¾éœ€è¦ç”¨â€œ\â€ä»£è¡¨æ•°æ®æœªå®Œç»“ã€‚dï¼š åˆ é™¤ï¼Œåˆ é™¤æŒ‡å®šçš„è¡Œã€‚pï¼š æ‰“å°ï¼Œè¾“å‡ºæŒ‡å®šçš„è¡Œã€‚sï¼šå­—ä¸²æ›¿æ¢ï¼Œç”¨ä¸€ä¸ªå­—ç¬¦ä¸²æ›¿æ¢å¦å¤–ä¸€ä¸ªå­—ç¬¦ä¸²ã€‚æ ¼å¼ä¸ºâ€œè¡ŒèŒƒã€‚ï¼ˆä½œç”¨äºŽè¡Œä¸­çš„å­—ç¬¦ä¸²ï¼‰å›´s/æ—§å­—ä¸²/æ–°å­—ä¸²/gâ€ï¼ˆå’Œvimä¸­çš„æ›¿æ¢æ ¼å¼ç±»ä¼¼ï¼‰Â¶1.2 åœ¨ç¬¬äºŒè¡ŒåŽè¿½åŠ ä¸€è¡Œå†…å®¹1$ sed -i '2a s003,\tlisi,\tjava,\t100,\tok,' student.txt #ä¸åŠ -iåˆ™ä¼šè¾“å‡ºåˆ°å±å¹•ï¼ˆå³ä¸ä¿®æ”¹åŽŸæ–‡ä»¶çš„å†…å®¹ï¼‰ï¼ŒåŠ äº†-iåˆ™ä¼šè¾“å‡ºä¼šåŽŸæ–‡ä»¶ä»¥è¦†ç›–åŽŸå†…å®¹Â¶1.2 åœ¨ç¬¬äºŒè¡Œå‰è¿½åŠ ä¸¤è¡Œå†…å®¹123$ sed '2i \s004,\twangwu,\tjava,\t100,\tok, \s005,\tzhaosi,\tc++,\t100,\tok,' student.txt\è¡¨ç¤ºè¾“å…¥æœªç»“æŸÂ¶1.3 æ‰“å°è¡Œ1$ sed -n '2 p' student.txt #åªæ‰“å°ç¬¬äºŒè¡Œï¼Œ-né˜²æ­¢æ‰“å°ç¬¬äºŒè¡ŒåŽè¿˜ä¼šæ‰“å°æ‰€æœ‰è¡Œ #æ­¤å¤„çš„2æ˜¯è¡Œæ•°åŒ¹é…åœ°å€Â¶1.4 åˆ é™¤è¡Œåˆ é™¤ç¬¬äºŒè¡Œåˆ°ç¬¬ä¸‰è¡Œï¼ˆä¸æ”¹å˜æºæ–‡ä»¶çš„æ•°æ®ï¼Œåªè¾“å‡ºåˆ é™¤åŽå‰©ä½™çš„ç»“æžœï¼‰1$ sed '2,3d' student.txtåˆ é™¤ç¬¬ä¸€è¡Œå¹¶ä¿®æ”¹æ–‡æœ¬æºæ•°æ®ï¼ˆå°†è¾“å‡ºç»“æžœè¦†ç›–ä½œç”¨çš„æ–‡ä»¶å†…å®¹ï¼‰1$ sed -i '1d' student.txtÂ¶1.5 å­—ç¬¦ä¸²æ›¿æ¢sed ' åŒ¹é…åœ°å€ s/æ—§å­—ä¸²/æ–°å­—ä¸²/g' æ–‡ä»¶åæ­¤å¤„åŒ¹é…åœ°å€å¦‚æžœæ˜¯æ­£åˆ™åŒ¹é…åœ°å€ï¼Œé‚£ä¹ˆä¸€å®šè¦åŠ / /ä»¥è¡¨ç¤ºæ­£åˆ™æ¨¡å¼æŠŠç¬¬äºŒè¡Œçš„wenæ”¹æˆxuanÂ¶2. awk å‘½ä»¤å·¥å…·åå‘åœºæ™¯æ˜¯ä»¥æµå¤„ç†çš„æ ¼å¼åŒ–æŠ¥è¡¨è¾“å‡ºå¤„ç†æ–¹å¼ï¼šä»¥è¡Œå¤„ç†Â¶2.1 æ ¼å¼1awk 'æ¡ä»¶1&#123;åŠ¨ä½œ1&#125; æ¡ä»¶2&#123;åŠ¨ä½œ2&#125; â€¦' æ–‡ä»¶åæ¡ä»¶ï¼ˆPatternï¼‰ï¼šä¸€èˆ¬ä½¿ç”¨å…³ç³»è¡¨è¾¾å¼ä½œä¸ºæ¡ä»¶x &gt; 10 åˆ¤æ–­å˜é‡ xæ˜¯å¦å¤§äºŽ10x&gt;=10 å¤§äºŽç­‰äºŽx&lt;=10 å°äºŽç­‰äºŽåŠ¨ä½œï¼ˆActionï¼‰ï¼šæ ¼å¼åŒ–è¾“å‡ºæµç¨‹æŽ§åˆ¶è¯­å¥å¦‚æžœæ²¡æœ‰æŒ‡å®šæ¡ä»¶ï¼Œæ¯è¡Œéƒ½æ‰§è¡Œç›¸åº”çš„åŠ¨ä½œæ‰€æœ‰çš„åŠ¨ä½œæˆ–è€…å‘½ä»¤éƒ½è¦ç”¨{}æ‹¬èµ·æ¥æµ‹è¯•æ–‡ä»¶ï¼šstudent.txt:1234s001, wen, java, 90, ok,s001, wen, c, 90, ok,s001, wen, c#, 90, ok,s002, qcmoke, c, 100, ok,Â¶2.1.1 è¾“å‡ºç¬¬ä¸€åˆ—å’Œç¬¬äºŒåˆ—123$ awk '&#123;print $1$2&#125;' student.txt# $1ä¸ºå–å‡ºç¬¬ä¸€ä¸ªåˆ†éš”å¼€çš„å­—æ®µï¼Œ$2ä¸ºå–å‡ºç¬¬äºŒä¸ªåˆ†éš”å¼€çš„å­—æ®µ# é»˜è®¤è¯†åˆ«çš„åˆ†éš”ç¬¦æ˜¯åˆ¶è¡¨ç¬¦æˆ–è€…å¤§äºŽé›¶çš„ä»»æ„ç©ºæ ¼Â¶2.2 BEGINBEGINæ˜¯åœ¨æ‰€æœ‰çš„æ•°æ®è¯»å–ä¹‹å‰çš„å‘½ä»¤è¯­å¥,ä»¥æ˜¯å¦æ‰§è¡ŒæˆåŠŸä¸ºæ¡ä»¶ç»“æžœï¼Œæ»¡è¶³BEGINæ‰æ‰§è¡Œ{}é‡Œçš„å†…å®¹Â¶2.2.1 æµ‹è¯•BEGIN1$ awk 'BEGIN&#123;print "hello"&#125; &#123;print $1 "\t" $2&#125;' student.txtÂ¶2.3 FSå†…ç½®å¯¹è±¡ä½œç”¨ï¼šç»™awkå‘½ä»¤è®¾ç½®è¯†åˆ«çš„åˆ†éš”ç¬¦1$ awk '&#123;FS=","&#125; &#123;print $1 "\t" $2&#125;' student.txtawké»˜è®¤æ˜¯å…ˆè¯»å…¥ä¸€è¡Œæ•°æ®æ‰å¼€å§‹å¤„ç†åŽé¢çš„åŠ¨ä½œï¼Œæ•…åœ¨æŒ‡å®šåˆ†éš”ç¬¦åŽï¼Œä»Žç¬¬äºŒè¡Œå¼€å§‹æ‰ç”Ÿæ•ˆï¼Œè€Œç¬¬ä¸€è¡Œæ— æ•ˆã€‚å¤„ç†ï¼šÂ¶2.3.1 æµ‹è¯•FSä½¿ç”¨BEGINï¼Œè®©awkè¯»å–ç¬¬ä¸€è¡Œæ•°æ®å‰å°±å…ˆæŒ‡å®šåˆ†éš”ç¬¦ã€‚1$ awk 'BEGIN&#123;FS=","&#125; &#123;print $1 "\t" $2&#125;' student.txtÂ¶2.4 ENDä½œç”¨ï¼šåœ¨æ‰€æœ‰æ•°æ®éƒ½è¯»å–å¹¶æ‰§è¡Œå®Œæ‰€æœ‰åŠ¨ä½œä¹‹åŽå†æ‰§è¡ŒæŸä¸ªåŠ¨ä½œï¼Œä»¥æ˜¯å¦æˆåŠŸä¸ºæ¡ä»¶ç»“æžœã€‚Â¶2.4.1 æµ‹è¯•END1$ awk '&#123;print $1$2&#125;END&#123;print "ending over !"&#125;' student.txtÂ¶3. é€šè¿‡ cat å‘½ä»¤åœ¨æ–‡ä»¶æœ«å°¾è¿½åŠ å†…å®¹ï¼ˆå¹¶é˜²æ­¢é‡å¤æ·»åŠ ï¼‰ç¤ºä¾‹å¦‚ä¸‹ï¼š1234567891011#åœ¨/etc/bash.bashrcæ–‡ä»¶æœ«å°¾é…ç½®export LC_ALL="C.UTF-8"text_str='export LC_ALL="C.UTF-8"' ;\file_str='/etc/bash.bashrc' ;\grep -v '^#' "$file_str" | grep -q "$text_str" || cat &gt;&gt; "$file_str" &lt;&lt; EOF$text_strEOF#æˆ–è€…ï¼štext_str='export LC_ALL="C.UTF-8"' ;\file_str='/etc/bash.bashrc' ;\grep -v '^#' "$file_str" | grep -q "$text_str" || echo "$text_str" &gt;&gt; "$file_str"Â¶åå››ã€vi å’Œ vimÂ¶åŸºæœ¬ä½¿ç”¨viå’Œvimçš„ä¸‰ç§æ¨¡å¼ï¼š123æ­£å¸¸æ¨¡å¼ï¼šä»¥ vim æ‰“å¼€ä¸€ä¸ªæ¡£æ¡ˆå°±ç›´æŽ¥è¿›å…¥ä¸€èˆ¬æ¨¡å¼äº†(è¿™æ˜¯é»˜è®¤çš„æ¨¡å¼)ã€‚åœ¨è¿™ä¸ªæ¨¡å¼ä¸­ï¼Œ ä½ å¯ä»¥ä½¿ç”¨ã€Žä¸Šä¸‹å·¦å³ã€æŒ‰é”®æ¥ç§»åŠ¨å…‰æ ‡ï¼Œä½ å¯ä»¥ä½¿ç”¨ã€Žåˆ é™¤å­—ç¬¦ã€æˆ–ã€Žåˆ é™¤æ•´è¡Œã€æ¥å¤„ç†æ¡£æ¡ˆå†…å®¹ï¼Œ ä¹Ÿå¯ä»¥ä½¿ç”¨ã€Žå¤åˆ¶ã€ç²˜è´´ã€æ¥å¤„ç†ä½ çš„æ–‡ä»¶æ•°æ®ã€‚æ’å…¥æ¨¡å¼ï¼šæŒ‰ä¸‹ i, I, o, O, a, A, r, R ç­‰ä»»ä½•ä¸€ä¸ªå­—æ¯ä¹‹åŽæ‰ä¼šè¿›å…¥ç¼–è¾‘æ¨¡å¼, ä¸€èˆ¬æ¥è¯´æŒ‰ i å³å¯.å‘½ä»¤è¡Œæ¨¡å¼ï¼šå³å…ˆæŒ‰ esc é”®å†è¾“å…¥ ï¼šæ—¶çš„æƒ…å†µã€‚å¯ä»¥æä¾›ä½ ç›¸å…³æŒ‡ä»¤ï¼Œå®Œæˆè¯»å–ã€å­˜ç›˜ã€æ›¿æ¢ã€ç¦»å¼€vimã€æ˜¾ç¤ºè¡Œå·ç­‰çš„åŠ¨ä½œåˆ™æ˜¯åœ¨æ­¤æ¨¡å¼ä¸­è¾¾æˆçš„ï¼å„ç§æ¨¡å¼çš„ç›¸äº’åˆ‡æ¢å¦‚å›¾ï¼šå¸¸ç”¨æ“ä½œå¦‚ä¸‹ï¼š12345671) æ‹·è´è¡Œï¼šåœ¨ä¸€èˆ¬æ¨¡å¼ä¸‹, yy æ‹·è´å½“å‰è¡Œï¼ˆ5yy æ‹·è´å½“å‰è¡Œå‘ä¸‹çš„ 5 è¡Œï¼‰ï¼Œè¾“å…¥ p è¿›è¡Œç²˜è´´ã€‚2) åˆ é™¤è¡Œï¼šåˆ é™¤å½“å‰è¡Œ dd ï¼›åˆ é™¤å½“å‰è¡Œå‘ä¸‹çš„ 5 è¡Œ 5dd3) æŸ¥æ‰¾æŸä¸ªå•è¯ï¼šå‘½ä»¤è¡Œä¸‹ï¼Œ&#x2F;å…³é”®å­— ï¼Œ å›žè½¦ æŸ¥æ‰¾ï¼Œè¾“å…¥nå°±æ˜¯æŸ¥æ‰¾ä¸‹ä¸€ä¸ªï¼Œè¾“å…¥Nå‘ä¸ŠæŸ¥æ‰¾ä¸‹ä¸€ä¸ª4) è®¾ç½®æ–‡ä»¶çš„è¡Œå·ï¼Œå–æ¶ˆæ–‡ä»¶çš„è¡Œå·ï¼šåœ¨ä¸€èˆ¬æ¨¡å¼ä¸‹, :set nu å’Œ :set nonu5) å°†å…‰æ ‡ç§»åŠ¨åˆ°æ–‡æ¡£é¦–è¡Œå’Œæœ«è¡Œï¼šåœ¨ä¸€èˆ¬æ¨¡å¼ä¸‹ï¼Œæœ«è¡Œ[G]ï¼Œé¦–è¡Œ[gg]6) æ’¤é”€ï¼šåœ¨ä¸€ä¸ªæ–‡ä»¶ä¸­è¾“å…¥å†…å®¹åŽï¼Œåœ¨ä¸€èˆ¬æ¨¡å¼ä¸‹, æ’¤é”€æŒ‰ u7) å°†å…‰æ ‡ç§»åŠ¨åˆ°æŒ‡å®šè¡Œï¼šåœ¨ä¸€èˆ¬æ¨¡å¼ä¸‹ï¼Œå…ˆè¾“å…¥è¡Œå·ï¼ˆå¦‚20ï¼‰ï¼Œå†æŒ‰ shift + gæ›´å¤šå‘½ä»¤æ“ä½œè§ä¸‹å›¾ï¼šå‚è€ƒï¼šhttps://www.runoob.com/linux/linux-vim.htmlÂ¶å¸¸è§é—®é¢˜Â¶ï¼ˆ1ï¼‰è§£å†³ä½¿ç”¨ vi æˆ– vim ç²˜è´´å¯¼è‡´ç¼©è¿›é—®é¢˜æˆ–ä¹±ç è¿™æ˜¯ç”±äºŽ vi æˆ– vim å¯¹äºŽæŸäº›æ ¼å¼çš„æ–‡ä»¶ï¼ˆå¦‚ï¼šyaml æ–‡ä»¶ï¼‰è¿›è¡Œç²˜è´´æ—¶è¿›è¡Œäº†è‡ªåŠ¨æ ¼å¼åŒ–å¤„ç†ï¼Œä¸ºäº†é˜²æ­¢è‡ªåŠ¨æ ¼å¼åŒ–å¯å¦‚ä¸‹è§£å†³ï¼šåœ¨å‘½ä»¤æ¨¡å¼ä¸‹ï¼Œè¾“å…¥ :set paste å¹¶å›žè½¦ç¡®è®¤ï¼Œç„¶åŽå†è¾“å…¥ i è¿›è¡Œç²˜è´´ã€‚å¦‚éœ€æ¢å¤è‡ªåŠ¨ç¼©è¿›åªéœ€åœ¨å‘½ä»¤æ¨¡å¼è¾“å…¥ :set nopaste å³å¯Â¶åäº”ã€Linuxå®‰è£…Â¶è‡ªå®šä¹‰ç£ç›˜åˆ†åŒºåœ¨å®‰è£…Linuxæ—¶ï¼Œä»¥ä¸‹åˆ†åŒºæ˜¯å¿…é¡»è¦åˆ›å»ºçš„ï¼šæ ¹åˆ†åŒºï¼ˆ/ï¼‰ï¼šè¿™æ˜¯Linuxç³»ç»Ÿçš„æ ¹ç›®å½•ï¼ŒåŒ…å«æ“ä½œç³»ç»Ÿçš„æ‰€æœ‰æ–‡ä»¶å’Œç›®å½•ã€‚äº¤æ¢åˆ†åŒºï¼ˆswapï¼‰ï¼šç”¨äºŽè™šæ‹Ÿå†…å­˜ï¼Œå½“ç‰©ç†å†…å­˜ä¸è¶³æ—¶ï¼Œç³»ç»Ÿå°†éƒ¨åˆ†æ•°æ®ç§»è‡³äº¤æ¢åˆ†åŒºä¸­ï¼ˆé€šå¸¸å»ºè®®å°†äº¤æ¢åˆ†åŒºå¤§å°è®¾ç½®ä¸ºç‰©ç†å†…å­˜çš„ä¸¤å€ï¼‰ã€‚å¦‚æžœä½¿ç”¨UEFIå¯åŠ¨ï¼Œåˆ™è¿˜éœ€è¦åˆ›å»ºä¸€ä¸ªEFIç³»ç»Ÿåˆ†åŒºï¼ˆESPï¼‰ï¼Œå®ƒåŒ…å«å¼•å¯¼åŠ è½½ç¨‹åºã€å†…æ ¸æ–‡ä»¶å’Œå…¶ä»–æ”¯æŒæ–‡ä»¶ã€‚ä½†æ˜¯ï¼Œå¦‚æžœä½¿ç”¨ä¼ ç»Ÿçš„BIOSå¼•å¯¼æ¨¡å¼ï¼Œåˆ™ä¸éœ€è¦åˆ›å»ºESPåˆ†åŒºã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œåœ¨æŸäº›æƒ…å†µä¸‹ï¼Œå¯èƒ½ä¼šå‡ºçŽ°ä¸éœ€è¦ ESP åˆ†åŒºä¹Ÿå¯ä»¥ä½¿ç”¨ UEFI å¯åŠ¨çš„æƒ…å†µã€‚ä¾‹å¦‚ï¼ŒæŸäº› UEFI å›ºä»¶å¯èƒ½æ”¯æŒç›´æŽ¥ä»Žç£ç›˜ä¸­çš„æŸä¸ªåˆ†åŒºå¯åŠ¨æ“ä½œç³»ç»Ÿï¼Œè€Œæ— éœ€ä½¿ç”¨ ESP åˆ†åŒºã€‚æ­¤å¤–ï¼Œä¸€äº›ç‰¹å®šçš„å‘è¡Œç‰ˆæˆ–å®‰è£…ç¨‹åºå¯èƒ½æä¾›äº†ä¸Ž ESP åˆ†åŒºæ— å…³çš„æ›¿ä»£æ–¹æ¡ˆï¼Œä»¥ä¾¿åœ¨æ²¡æœ‰ ESP åˆ†åŒºçš„æƒ…å†µä¸‹å®žçŽ° UEFI å¯åŠ¨è¯·æ³¨æ„ï¼Œä»¥ä¸Šä»…é€‚ç”¨äºŽåŸºæœ¬çš„Linuxå®‰è£…ã€‚è€Œä¸ºäº†æ•°æ®çš„å®‰å…¨ï¼Œé€šå¸¸ä¼šåˆ›å»ºä»¥ä¸‹å‡ ä¸ªåˆ†åŒºæ ¹åˆ†åŒºï¼ˆ/ï¼‰äº¤æ¢åˆ†åŒºï¼ˆswapï¼‰/home åˆ†åŒºï¼šç”¨äºŽå­˜å‚¨ç”¨æˆ·æ•°æ®å’Œé…ç½®æ–‡ä»¶ã€‚/boot åˆ†åŒºï¼šé€šå¸¸ç”¨äºŽå­˜å‚¨å¯åŠ¨å¼•å¯¼ç¨‹åºã€å†…æ ¸æ˜ åƒä»¥åŠç›¸å…³çš„é…ç½®æ–‡ä»¶ç­‰ã€‚éœ€è¦è¶³å¤Ÿçš„ç©ºé—´æ¥å­˜å‚¨æœªæ¥æ›´æ–°çš„å†…æ ¸æ–‡ä»¶ã€‚EFI ç³»ç»Ÿåˆ†åŒºï¼ˆESPï¼‰ï¼šå¦‚æžœä½¿ç”¨UEFIå¯åŠ¨ï¼Œåˆ™éœ€è¦ä¸€ä¸ªESPåˆ†åŒºï¼Œå®ƒåŒ…å«å¼•å¯¼åŠ è½½ç¨‹åºã€å†…æ ¸æ–‡ä»¶å’Œå…¶ä»–æ”¯æŒæ–‡ä»¶ï¼Œåœ¨lå®‰è£…inuxåŽä¼šè‡ªåŠ¨æŒ‚è½½åˆ°ç³»ç»Ÿçš„/boot/efiç›®å½•ã€‚åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œè¿˜å¯èƒ½éœ€è¦åˆ›å»ºå…¶ä»–åˆ†åŒºï¼Œå¦‚/varã€/tmp æˆ– /usr åˆ†åŒºç­‰ã€‚ä½†è¿™å–å†³äºŽå…·ä½“çš„éœ€æ±‚å’ŒLinuxå‘è¡Œç‰ˆçš„è¦æ±‚ã€‚**åˆ†åŒºå®¹é‡åˆ†é…ç¤ºä¾‹ï¼š**å¯¹äºŽä¸€ä¸ª 100GB å®¹é‡çš„ç£ç›˜ï¼Œå»ºè®®å°†å…¶åˆ†åŒºå’Œé…ç½®å¦‚ä¸‹ï¼šæ ¹åˆ†åŒºï¼ˆ/ï¼‰ï¼šå°†æ ¹åˆ†åŒºè®¾ç½®ä¸º 40-50GBã€‚è¿™è¶³ä»¥å®‰è£…Linuxç³»ç»Ÿã€å¸¸ç”¨åº”ç”¨ç¨‹åºå’Œä¸€äº›åŸºæœ¬çš„å¼€å‘å·¥å…·ã€‚äº¤æ¢åˆ†åŒºï¼ˆswapï¼‰ï¼šå°†äº¤æ¢åˆ†åŒºè®¾ç½®ä¸º 2-4GBã€‚è¿™é‡ŒæŽ¨èä½¿ç”¨ç‰©ç†å†…å­˜å¤§å°çš„ä¸¤å€ä½œä¸ºäº¤æ¢åˆ†åŒºå¤§å°çš„åŸºå‡†ã€‚/home åˆ†åŒºï¼šå°†/homeåˆ†åŒºè®¾ç½®ä¸º 30-50GBã€‚è¿™å°†ä¸ºç”¨æˆ·æ•°æ®å’Œé…ç½®æ–‡ä»¶æä¾›è¶³å¤Ÿçš„å­˜å‚¨ç©ºé—´ã€‚/boot åˆ†åŒºï¼šè®¾ç½® 2GBï¼ˆè‡³å°‘ 200MBï¼Œä½†è€ƒè™‘åˆ°å¯èƒ½éœ€è¦å‡çº§å†…æ ¸æˆ–è€…è‡ªç¼–è¯‘å†…æ ¸ç­‰å¯èƒ½éœ€è¦è¾ƒå¤šç©ºé—´ï¼Œåˆ™å»ºè®®è®¾ç½®ä¸º 2GBï¼Œé˜²æ­¢å‡çº§å†…æ ¸æ—¶å‡ºçŽ°åˆ†åŒºç©ºé—´ä¸è¶³çš„é—®é¢˜ï¼‰ï¼Œè¦ç¡®ä¿è¶³å¤Ÿå­˜å‚¨æœªæ¥çš„å†…æ ¸æ›´æ–°æ–‡ä»¶ã€‚EFI ç³»ç»Ÿåˆ†åŒºï¼ˆESPï¼‰ï¼šå¦‚æžœæ‚¨ä½¿ç”¨ UEFI å¼•å¯¼ï¼Œåˆ™éœ€è¦åˆ›å»ºä¸€ä¸ª ESP åˆ†åŒºã€‚é€šå¸¸ï¼Œè¿™ä¸ªåˆ†åŒºåªéœ€è¦ä¸º 100-500MB å³å¯ã€‚å…¶ä»–åˆ†åŒºï¼šå¦‚æžœæ‚¨éœ€è¦å­˜å‚¨å¤§é‡çš„æ•°æ®ã€éŸ³é¢‘æˆ–è§†é¢‘æ–‡ä»¶ï¼Œå¯ä»¥åˆ›å»ºä¸€ä¸ªå•ç‹¬çš„æ•°æ®åˆ†åŒºã€‚è¯¥åˆ†åŒºçš„å¤§å°åº”æ ¹æ®æ‚¨çš„ç‰¹å®šéœ€æ±‚æ¥ç¡®å®šã€‚æç¤ºï¼šå¦‚æžœæ²¡æœ‰ç‰¹åˆ«éœ€æ±‚ï¼Œå…¶å®žåªåˆ†é…æ ¹åˆ†åŒºå’Œäº¤æ¢åˆ†åŒºå°±å¤Ÿäº†ã€‚Â¶åå…­ã€å¸¸è§é—®é¢˜è§£å†³Â¶1. linuxæ›´æ–°è¢«é”çš„è§£å†³æ–¹æ³•123456#é—®é¢˜å¦‚ä¸‹ï¼šE: æ— æ³•èŽ·å¾—é” /var/lib/dpkg/lock - open (11: èµ„æºæš‚æ—¶ä¸å¯ç”¨)E: æ— æ³•é”å®šç®¡ç†ç›®å½•(/var/lib/dpkg/)ï¼Œæ˜¯å¦æœ‰å…¶ä»–è¿›ç¨‹æ­£å ç”¨å®ƒï¼Ÿ#è§£å†³ï¼šrm /var/lib/dpkg/lockÂ¶2. è§£å†³ä½¿ç”¨lså‘½ä»¤ç›®å½•æ— æ³•é«˜äº®æ˜¾ç¤ºçš„é—®é¢˜123456cat &gt;&gt; ~/.bashrc &lt;&lt; 'EOF'alias ls='ls --color=auto'EOF#ä½¿é…ç½®æ–‡ä»¶ä¿®æ”¹ç”Ÿæ•ˆsource ~/.bashrc]]></content>
      <categories>
        <category>linux</category>
      </categories>
      <tags>
        <tag>linux</tag>
        <tag>ubuntu</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[frpå®žçŽ°å†…ç½‘ç©¿é€]]></title>
    <url>%2Ftools%2Ffrp.html</url>
    <content type="text"><![CDATA[Â¶ä¸€ã€frpçš„ä½œç”¨frpçš„ä½œç”¨å°±æ˜¯å®žçŽ°å†…ç½‘ç©¿é€ï¼Œå†…ç½‘ç©¿é€å°±æ˜¯å…è®¸å†…ç½‘çš„ä¸»æœºèƒ½å¤Ÿè¢«å¤–ç½‘çš„å…¶ä»–ä¸»æœºè®¿é—®ï¼Œå†…ç½‘ç©¿é€æ˜¯åå‘ä»£ç†æŠ€æœ¯ä¸­çš„ä¸€ä¸ªä¸­é—´çŽ¯èŠ‚æŠ€æœ¯ã€‚å¯¹äºŽåå‘ä»£ç†çš„æ›´å¤šç†è§£å¯è§å¦å¤–ä¸€æ–‡ã€Šå…³äºŽä»£ç†æŠ€æœ¯çš„ç†è§£ã€‹ã€‚åˆ©ç”¨å¤„äºŽå†…ç½‘æˆ–é˜²ç«å¢™åŽçš„æœºå™¨ï¼Œå¯¹å¤–ç½‘çŽ¯å¢ƒæä¾› http æˆ– https æœåŠ¡ã€‚è¯´ç½¢ï¼Œä¹Ÿå°±æ˜¯ç»™å¤–ç½‘æä¾›å†…ç½‘ä¸»æœºçš„http æˆ– https æœåŠ¡ã€‚æ­¤å¤–ï¼Œè¿˜èƒ½åˆ©ç”¨å¤„äºŽå†…ç½‘æˆ–é˜²ç«å¢™åŽçš„æœºå™¨ï¼Œå¯¹å¤–ç½‘çŽ¯å¢ƒæä¾› tcp å’Œ udp æœåŠ¡ï¼Œä¾‹å¦‚åœ¨å®¶é‡Œé€šè¿‡ ssh è®¿é—®å¤„äºŽå…¬å¸å†…ç½‘çŽ¯å¢ƒå†…çš„ä¸»æœºã€‚æ­¤å¤„çš„è®²è§£åŒ…æ‹¬:å¤–ç½‘è®¿é—®å†…ç½‘http æˆ– https æœåŠ¡å¤–ç½‘è®¿é—®å†…ç½‘sshæœåŠ¡Â¶äºŒã€å‡†å¤‡è¯´æ˜ŽÂ¶å®žçŽ°åŠŸèƒ½ï¼ˆ1ï¼‰è‡ªå®šä¹‰ç»‘å®šåŸŸåè®¿é—®å†…ç½‘webæœåŠ¡Â¶é…ç½®å‰å‡†å¤‡ï¼ˆ1ï¼‰å…¬ç½‘æœåŠ¡å™¨1å°ï¼ˆ2ï¼‰å†…ç½‘æœåŠ¡å™¨1å°ï¼ˆ3ï¼‰å…¬ç½‘æœåŠ¡å™¨ç»‘å®šåŸŸå1ä¸ªï¼ˆ4ï¼‰å†…ç½‘æœåŠ¡å™¨éƒ¨ç½²ä¸€ä¸ªwebæœåŠ¡ï¼ˆ5ï¼‰å†…ç½‘æœåŠ¡å™¨éƒ¨ç½²å®‰è£…äº†sshæœåŠ¡(å¦‚åªåšwebæœåŠ¡ï¼Œå¯ä»¥çœç•¥æ­¤æ­¥)Â¶ä¸‰ã€æœåŠ¡ç«¯Â¶å®‰è£…é…ç½®123456#ä¸‹è½½frpwget https://github.com/fatedier/frp/releases/download/v0.44.0/frp_0.44.0_linux_amd64.tar.gz#è§£åŽ‹æ–‡ä»¶tar -zxvf frp_0.44.0_linux_amd64.tar.gz#è¿›å…¥è§£åŽ‹ç›®å½•cd frp_0.44.0_linux_amd64frpsã€frps.iniè¿™ä¸ªä¸¤ä¸ªæ˜¯æœåŠ¡ç«¯æ–‡ä»¶ï¼Œfrpcã€frpc.iniè¿™ä¸¤ä¸ªæ˜¯å®¢æˆ·ç«¯æ–‡ä»¶é…ç½®æœåŠ¡ç«¯123456789101112131415161718192021vi ./frps.ini[common]#ä¸Žå®¢æˆ·ç«¯ç»‘å®šçš„è¿›è¡Œé€šä¿¡çš„ç«¯å£ï¼ˆå¿…é€‰ï¼‰bind_port = 7000#è®¿é—®å®¢æˆ·ç«¯webæœåŠ¡httpåè®®è‡ªå®šä¹‰çš„ç«¯å£å·ï¼Œå¦‚æžœå…¬ç½‘æœåŠ¡å™¨å·²ç»æ­å»ºå ç”¨8080ç«¯å£çš„webæœåŠ¡ï¼Œè¯·è‡ªè¡Œä¿®æ”¹ï¼ˆå¯é€‰ï¼‰vhost_http_port = 8080#è®¿é—®å®¢æˆ·ç«¯webæœåŠ¡httpsåè®®è‡ªå®šä¹‰çš„ç«¯å£å·ï¼Œå¦‚æžœå…¬ç½‘æœåŠ¡å™¨å·²ç»æ­å»ºå ç”¨443ç«¯å£çš„webæœåŠ¡ï¼Œè¯·è‡ªè¡Œä¿®æ”¹ï¼ˆå¯é€‰ï¼‰vhost_https_port = 443##frpè®¤è¯é…ç½®ï¼ˆå¯é€‰ï¼Œå®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯é…ç½®éœ€è¦ä¸€è‡´ï¼‰#è®¤è¯æ–¹å¼ï¼ˆtokenï¼‰authentication_method = token#è®¤è¯æ–¹å¼, å¼€å¯è¿žæŽ¥æ—¶æ ¡éªŒauthenticate_new_work_conns = true#tokenè®¤è¯å¯†ç ï¼ˆå¯è‡ªå®šä¹‰ï¼‰token = admin@12345678##frpæœåŠ¡ç«¯webæŽ§åˆ¶å°é…ç½®ï¼ˆå¯é€‰ï¼Œä¸»è¦ç”¨äºŽç›‘æŽ§å½“å‰è¿žæŽ¥ç«¯å£ï¼Œè®¿é—®åœ°å€ï¼šhttp://æœåŠ¡ç«¯IP:7001ï¼‰dashboard_port = 7001dashboard_user = admindashboard_pwd = admin@12345678æŒ‰â€iâ€é”®è¿›è¡Œç¼–è¾‘ï¼ŒæŒ‰escé€€å‡ºç¼–è¾‘çŠ¶æ€ï¼Œè¾“å…¥:wqé€€å‡ºÂ¶é˜²ç«å¢™é…ç½®1234 #æŸ¥çœ‹å½“å‰firewallé˜²ç«å¢™æœåŠ¡æ˜¯å¦å¼€å¯firewall-cmd --state#æŸ¥çœ‹å½“å‰firewallæœåŠ¡æ‰€æœ‰ç«¯å£å¼€æ”¾æƒ…å†µfirewall-cmd --list-allå¦‚æžœé˜²æŠ¤å¢™å¤„äºŽå…³é—­çŠ¶æ€çš„è¯æ— éœ€è¿›è¡Œä»¥ä¸‹ç«¯å£å·çš„å¼€æ”¾æ­¥éª¤ï¼Œå¦åˆ™ç»§ç»­ã€‚å¦‚æžœ7000ç«¯å£å’Œ8080ç«¯å£å·²ç»å¼€æ”¾å¹¶ä¸”æ²¡æœ‰è¿›ç¨‹å ç”¨ç«¯å£çš„è¯ï¼Œåˆ™æ— éœ€è¿›è¡Œä»¥ä¸‹ç«¯å£å·çš„å¼€æ”¾æ­¥éª¤ï¼Œå¦åˆ™ç»§ç»­ã€‚12345firewall-cmd --permanent --add-port=7000/tcp #å¼€æ”¾frpæœåŠ¡ç«¯çš„ç›‘å¬ç«¯å£firewall-cmd --permanent --add-port=7001/tcp #å¼€æ”¾frpæœåŠ¡ç«¯webæŽ§åˆ¶å°è®¿é—®ç«¯å£firewall-cmd --permanent --add-port=8080/tcp #å¼€æ”¾frpå¯¹å®¢æˆ·ç«¯webæœåŠ¡è®¿é—®çš„ç›¸å…³è½¬å‘ç«¯å£firewall-cmd --zone=public --add-port=5000-5999/tcp --permanent #å¼€æ”¾frpå¯¹å®¢æˆ·ç«¯è®¿é—®çš„ç›¸å…³è½¬å‘ç«¯å£åŒºé—´ï¼ˆæŽ¨èå†…ç½‘ç©¿é€çš„è¿œç¨‹ç«¯å£è®¾ç½®åœ¨æŸä¸ªç«¯å£åŒºé—´ï¼Œç›®çš„æ˜¯åªè¦å®¢æˆ·ç«¯åŽæœŸæ·»åŠ ç«¯å£åœ¨è¯¥ç«¯å£åŒºé—´èŒƒå›´æ—¶æœåŠ¡ç«¯ä¸éœ€è¦åå¤é…ç½®é˜²ç«å¢™ï¼‰firewall-cmd --reload #é‡æ–°åŠ è½½é˜²ç«å¢™é…ç½®Â¶å¯åŠ¨æœåŠ¡ç«¯1234#ä¸´æ—¶å¯åŠ¨./frps -c ./frps.ini#åŽå°ä¿æŒå¯åŠ¨nohup ./frps -c ./frps.ini &amp;Â¶å››ã€å®¢æˆ·ç«¯Â¶å®‰è£…é…ç½®æ ¹æ®å®¢æˆ·ç«¯æ“ä½œç³»ç»Ÿçš„æƒ…å†µä¸‹è½½frpå®¢æˆ·ç«¯éœ€è¦æ³¨æ„çš„æ˜¯ï¼šå®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯çš„ç‰ˆæœ¬å·è¦ä¸€è‡´ã€‚frpæœåŠ¡ç«¯å’Œå®¢æˆ·ç«¯éƒ½æ˜¯åœ¨ä¸€ä¸ªåŒ…é‡Œï¼Œå¦‚æžœéƒ½æ˜¯linuxåˆ™ä¸‹è½½ç›¸åŒç‰ˆæœ¬çš„frp_ç‰ˆæœ¬å·_linux_amd64.tar.gzå³å¯ï¼Œå¦‚æžœå®¢æˆ·ç«¯æ˜¯windowsï¼Œé‚£ä¹ˆä¸‹è½½frp_ç‰ˆæœ¬å·_windows_amd64.zipä¸åŒæ“ä½œç³»ç»Ÿæ“ä½œå¤§åŒå°å¼‚ã€‚ä¸‹é¢ä»¥linuxä¸ºä¾‹ï¼Œå‡è®¾å·²ç»ä¸‹è½½å¹¶è§£æžå¥½ã€‚1vi ./frpc.ini #ç¼–è¾‘frpc.inié…ç½®æ–‡ä»¶1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950[common]#frpæœåŠ¡ç«¯çš„IPæˆ–åŸŸåï¼ˆå¿…é€‰ï¼‰server_addr = 45.129.11.99#frpæœåŠ¡ç«¯çš„ç›‘å¬ç«¯å£ï¼ˆå¿…é€‰ï¼‰server_port = 7000#å¯ç”¨TLSåŠ å¯†ä¼ è¾“åŠŸèƒ½ï¼ˆå¯é€‰ï¼Œä»Žv0.25.0ç‰ˆæœ¬å¼€å§‹frpcå’Œfrpsä¹‹é—´æ”¯æŒé€šè¿‡TLSåè®®åŠ å¯†ä¼ è¾“ï¼‰tls_enable = true##frpè®¤è¯é…ç½®ï¼ˆå¯é€‰ï¼Œå®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯é…ç½®éœ€è¦ä¸€è‡´ï¼‰#è®¤è¯æ–¹å¼ï¼ˆtokenï¼‰authentication_method = token#è®¤è¯æ–¹å¼, å¼€å¯è¿žæŽ¥æ—¶æ ¡éªŒauthenticate_new_work_conns = true#tokenè®¤è¯å¯†ç ï¼ˆå¯è‡ªå®šä¹‰ï¼‰token = admin@12345678##frpå®¢æˆ·ç«¯æŽ§åˆ¶å°ï¼ˆå¯é€‰ï¼Œå¯ç”¨äºŽåŠ¨æ€ä¿®æ”¹å®¢æˆ·ç«¯é…ç½®ï¼Œå…¶ä¸­admin_addrå¯è®¾ç½®ä¸ºå®¢æˆ·ç«¯çš„ä¸€ä¸ªæŒ‡å®šIPåœ°å€ï¼Œé‚£ä¹ˆè®¿é—®åˆ™éœ€è¦é€šè¿‡è¿™ä¸ªIPåœ°å€è¿›è¡Œè®¿é—®ï¼Œå¦‚æžœå¸Œæœ›å¯ä»¥é€šè¿‡å®¢æˆ·ç«¯çš„å¤šä¸ªIPåœ°å€è¿›è¡Œè®¿é—®ï¼Œåˆ™å¯ä»¥è®¾ç½®ä¸º0.0.0.0ã€‚è®¿é—®åœ°å€ä¸ºï¼šhttp://IP:7002ï¼‰admin_addr = 0.0.0.0admin_port = 7002admin_user = adminadmin_pwd = admin@12345678##è‡ªå®šä¹‰å†…ç½‘ç©¿é€ç«¯å£æ˜ å°„é…ç½®ï¼ˆå¯é€‰ï¼‰#httpæœåŠ¡çš„å†…ç½‘ç©¿é€ç«¯å£æ˜ å°„é…ç½®ï¼ˆ[ ]é‡Œçš„åç§°å¯è‡ªå®šä¹‰ï¼Œè¡¨ç¤ºæœåŠ¡åç§°ï¼‰[web]#è®¿é—®åè®®type = tcp#æœ¬åœ°åœ°å€ï¼ˆåŒä¸€å†…ç½‘ä¸‹çš„ä»»ä½•ä¸»æœºåœ°å€éƒ½å¯ä»¥ï¼‰ local_ip = 127.0.0.1#local_ip = 192.168.222.131#æœ¬åœ°ç«¯å£local_port = 5000#è¿œç¨‹ç«¯å£ï¼ˆè¦ç¡®ä¿è¿œç¨‹æœåŠ¡å™¨é˜²ç«å¢™å¼€æ”¾å¯¹åº”ç«¯å£ï¼‰remote_port = 5000#httpæœåŠ¡çš„å†…ç½‘ç©¿é€ç«¯å£æ˜ å°„é…ç½®ï¼ˆè®¿é—®åè®®ä¸ºhttpæ—¶ï¼Œå¯ä»¥è¿›è¡Œæ›´å¤šçš„é…ç½®ï¼‰[web2]type = http local_ip = 127.0.0.1local_port = 80#typeä¸ºhttpæ—¶å¯ä»¥ä¸ç”¨è®¾ç½®remote_portï¼Œé»˜è®¤ä¼šç»Ÿä¸€ä½¿ç”¨æœåŠ¡ç«¯é…ç½®çš„vhost_http_portä½œä¸ºè¿œç¨‹ç«¯å£#typeä¸ºhttpæ—¶å¯è‡ªå®šä¹‰åŸŸåï¼ˆè®¿é—®å…¬ç½‘æœåŠ¡å™¨åŸŸå,éœ€è¦è§£æžåŸŸååˆ°server_addrï¼‰custom_domains = example.com#sshæœåŠ¡çš„å†…ç½‘ç©¿é€ç«¯å£æ˜ å°„é…ç½®[ssh]type = tcplocal_ip = 127.0.0.1local_port = 22remote_port = 5001Â¶å¯åŠ¨å®¢æˆ·ç«¯12345678#ä¸´æ—¶å¯åŠ¨./frpc -c ./frpc.ini#åŽå°ä¿æŒå¯åŠ¨ï¼ˆä»…Linuxï¼‰nohup ./frpc -c ./frpc.ini &amp;#é‡æ–°åŠ è½½é…ç½®ï¼ˆå¦‚ä¿®æ”¹é…ç½®æ–‡ä»¶ï¼‰./frpc reloadÂ¶äº”ã€æµ‹è¯•httpå’Œsshï¼ˆ1ï¼‰httpæµ‹è¯•ï¼šæµè§ˆå™¨æ‰“å¼€è®¿é—®http://åŸŸå:8080/èµ„æºè·¯å¾„ï¼ˆå¦‚ï¼šhttp://example.com:8080/myproject/index.htmlï¼‰ï¼ˆ2ï¼‰sshæµ‹è¯•ï¼š12345ssh [-p port] user@remote #sshè¿œç¨‹è¿žæŽ¥æœåŠ¡å™¨#å¦‚ï¼šssh -p 5001 root@45.129.11.99#æˆ–è€…ssh -p 5001 root@example.comÂ¶å…­ã€é…ç½®è¯¦è§£Â¶æœåŠ¡ç«¯12345678910111213141516171819202122232425262728293031323334353637383940[common] # é€šç”¨é…ç½®æ®µbind_addr = 0.0.0.0 # ç»‘å®šçš„IPåœ°å€ï¼Œæ”¯æŒIPv6ï¼Œä¸æŒ‡å®šé»˜è®¤0.0.0.0ï¼›bind_port = 7000 # æœåŠ¡ç«¯å£ï¼›bind_udp_port = 7001 # æ˜¯å¦ä½¿ç”¨udpç«¯å£ï¼Œä¸ä½¿ç”¨åˆ é™¤æˆ–æ³¨é‡Šæœ¬è¡Œï¼›kcp_bind_port = 7000 # æ˜¯å¦ä½¿ç”¨kcpåè®®ï¼Œä¸ä½¿ç”¨åˆ é™¤æˆ–æ³¨é‡Šæœ¬è¡Œï¼›# proxy_bind_addr = 127.0.0.1 # ä»£ç†ç›‘å¬åœ°å€ï¼Œé»˜è®¤å’Œbind_addrç›¸åŒï¼› # è™šæ‹Ÿä¸»æœºvhost_http_port = 80 # æ˜¯å¦å¯ç”¨è™šæ‹Ÿä¸»æœºï¼Œç«¯å£å¯ä»¥å’Œbind_portç›¸åŒï¼›vhost_https_port = 443vhost_http_timeout = 60 # åŽç«¯è™šæ‹Ÿä¸»æœºå“åº”è¶…æ—¶æ—¶é—´ï¼Œé»˜è®¤ä¸º60sï¼› # å¼€å¯frpsä»ªè¡¨ç›˜å¯ä»¥æ£€æŸ¥frpçš„çŠ¶æ€å’Œä»£ç†çš„ç»Ÿè®¡ä¿¡æ¯ã€‚dashboard_addr = 0.0.0.0 # frpsä»ªè¡¨ç›˜ç»‘å®šçš„åœ°å€ï¼›dashboard_port = 7500 # frpsä»ªè¡¨ç›˜ç»‘å®šçš„ç«¯å£ï¼›dashboard_user = admin # è®¿é—®frpsä»ªè¡¨ç›˜çš„ç”¨æˆ·ï¼› dashboard_pwd = admin # å¯†ç ï¼›assets_dir = ./static # ä»ªè¡¨ç›˜é¡µé¢æ–‡ä»¶ç›®å½•ï¼Œåªé€‚ç”¨äºŽè°ƒè¯•ï¼› # æ—¥å¿—é…ç½®æ–‡ä»¶log_file = ./frps.log # æ—¥å¿—æ–‡ä»¶,ä¸æŒ‡å®šæ—¥å¿—ä¿¡æ¯é»˜è®¤è¾“å‡ºåˆ°æŽ§åˆ¶å°ï¼›log_level = info # æ—¥å¿—ç­‰çº§ï¼Œå¯ç”¨ç­‰çº§â€œtrace, debug, info, warn, errorâ€ï¼›log_max_days = 3 # æ—¥å¿—ä¿å­˜æœ€å¤§ä¿å­˜æ—¶é—´ï¼› token = 12345678 # å®¢æˆ·ç«¯ä¸ŽæœåŠ¡ç«¯é€šä¿¡çš„èº«ä»½éªŒè¯ä»¤ç‰Œ heartbeat_timeout = 90 # å¿ƒè·³æ£€æµ‹è¶…æ—¶æ—¶é—´ï¼Œä¸å»ºè®®ä¿®æ”¹é»˜è®¤é…ç½®ï¼Œé»˜è®¤å€¼ä¸º90ï¼›ï¼Ÿ # æŒ‡å®šå…è®¸å®¢æˆ·ç«¯ä½¿ç”¨çš„ç«¯å£èŒƒå›´ï¼ŒæœªæŒ‡å®šåˆ™æ²¡æœ‰é™åˆ¶ï¼›allow_ports = 2000-3000,3001,3003,4000-50000 max_pool_count = 5 # æ¯ä¸ªå®¢æˆ·ç«¯è¿žæŽ¥æœåŠ¡ç«¯çš„æœ€å¤§è¿žæŽ¥æ•°ï¼›max_ports_per_client = 0 # æ¯ä¸ªå®¢æˆ·ç«¯æœ€å¤§å¯ä»¥ä½¿ç”¨çš„ç«¯å£ï¼Œ0è¡¨ç¤ºæ— é™åˆ¶ authentication_timeout = 900 # å®¢æˆ·ç«¯è¿žæŽ¥è¶…æ—¶æ—¶é—´ï¼ˆç§’ï¼‰ï¼Œé»˜è®¤ä¸º900sï¼› subdomain_host = frps.com # è‡ªå®šä¹‰å­åŸŸåï¼Œéœ€è¦åœ¨dnsä¸­å°†åŸŸåè§£æžä¸ºæ³›åŸŸåï¼› tcp_mux = true # æ˜¯å¦ä½¿ç”¨tcpå¤ç”¨ï¼Œé»˜è®¤ä¸ºtrueï¼› # frpåªå¯¹åŒæ„å®¢æˆ·ç«¯çš„è¿žæŽ¥è¿›è¡Œå¤ç”¨ï¼›Â¶å®¢æˆ·ç«¯1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768[common] # é€šç”¨é…ç½®æ®µ server_addr = 0.0.0.0 # serverçš„IPåœ°å€ï¼›æ”¯æŒIPv6server_port = 7000 # serverçš„ç«¯å£ï¼› # å¦‚æžœè¦é€šè¿‡httpæˆ–socks5ä»£ç†è¿žæŽ¥frpsï¼Œå¯ä»¥åœ¨æ­¤å¤„æˆ–åœ¨å…¨å±€çŽ¯å¢ƒå˜é‡ä¸­è®¾ç½®ä»£ç†ï¼Œåªæ”¯æŒtcpåè®®ï¼›# http_proxy = http://user:passwd@192.168.1.128:8080# http_proxy = socks5://user:passwd@192.168.1.128:1080 # å®¢æˆ·ç«¯æ—¥å¿—log_file = ./frpc.log # æŒ‡å®šæ—¥å¿—æ–‡ä»¶ï¼›log_level = info # æŒ‡å®šæ—¥å¿—ç­‰çº§ï¼›log_max_days = 3 token = 12345678 # å®¢æˆ·ç«¯ä¸ŽæœåŠ¡ç«¯é€šä¿¡çš„èº«ä»½éªŒè¯ä»¤ç‰Œtls_enable = true #ä»Žv0.25.0ç‰ˆæœ¬å¼€å§‹frpcå’Œfrpsä¹‹é—´æ”¯æŒé€šè¿‡TLSåè®®åŠ å¯†ä¼ è¾“ã€‚é€šè¿‡åœ¨frpc.iniçš„commonä¸­é…ç½®tls_ enable = trueæ¥å¯ç”¨æ­¤åŠŸèƒ½ï¼Œå®‰å…¨æ€§æ›´é«˜ã€‚ #ä¸ºäº†ç«¯å£å¤ç”¨ï¼Œfrpå»ºç«‹TLSè¿žæŽ¥çš„ç¬¬ä¸€ä¸ªå­—èŠ‚ä¸º0x17ã€‚ #æ³¨æ„:å¯ç”¨æ­¤åŠŸèƒ½åŽé™¤xtcpå¤–ï¼Œä¸éœ€è¦å†è®¾ç½®use. encryptionã€‚# è®¾ç½®ç®¡ç†åœ°å€ï¼Œç”¨äºŽé€šè¿‡http apiæŽ§åˆ¶frpcçš„åŠ¨ä½œï¼Œå¦‚é‡æ–°åŠ è½½ï¼›admin_addr = 127.0.0.1admin_port = 7400admin_user = adminadmin_passwd = admin pool_count = 5 # åˆå§‹è¿žæŽ¥æ± çš„æ•°é‡ï¼Œé»˜è®¤ä¸º0ï¼› tcp_mux = true # æ˜¯å¦å¯ç”¨tcpå¤ç”¨ï¼Œé»˜è®¤ä¸ºtrueï¼› user = your_name # frpcçš„ç”¨æˆ·åï¼Œç”¨äºŽåŒºåˆ«ä¸ç”¨frpcçš„ä»£ç†ï¼› login_fail_exit = true # é¦–æ¬¡ç™»å½•å¤±è´¥æ—¶é€€å‡ºç¨‹åºï¼Œå¦åˆ™è¿žç»­é‡æ–°ç™»å½•åˆ°frpsï¼› protocol = tcp # ç”¨äºŽè¿žæŽ¥æœåŠ¡å™¨çš„åè®®ï¼Œæ”¯æŒtcpã€kcpã€websocket; dns_server = 8.8.8.8 # ä¸ºfrp å®¢æˆ·ç«¯æŒ‡å®šä¸€ä¸ªå•ç‹¬çš„DNSæœåŠ¡å™¨ï¼› # start = ssh,dns # è¦å¯ç”¨çš„ä»£ç†çš„åå­—ï¼Œé»˜è®¤ä¸ºç©ºè¡¨ç¤ºæ‰€æœ‰ä»£ç†ï¼› # å¿ƒè·³æ£€æŸ¥# heartbeat_interval = 30 # å¤±è´¥é‡è¯•æ¬¡æ•°# heartbeat_timeout = 90 # è¶…æ—¶æ—¶é—´ # é…ç½®ç¤ºä¾‹[ssh] # ä»£ç†é…ç½®æ®µåç§°ï¼Œå¦‚æžœé…ç½®user=your_name,åˆ™æ˜¾ç¤ºä¸ºyour_name.sshï¼›type = tcp # åè®®é»˜è®¤tcp,å¯é€‰tcp,udp,http,https,stcp,xtcp;local_ip = 127.0.0.1 # æœ¬åœ°åœ°å€local_port = 22 # æœ¬åœ°ç«¯å£use_encryption = false # æ˜¯å¦åŠ å¯†æœåŠ¡ç«¯å’Œå®¢æˆ·ç«¯çš„é€šä¿¡ä¿¡æ¯ï¼Œé»˜è®¤ä¸ºä¸åŠ å¯†ï¼›use_compression = false # æ˜¯å¦å¼€å¯åŽ‹ç¼©ï¼Œé»˜è®¤ä¸å¼€å¯ï¼›remote_port = 6001 # åœ¨æœåŠ¡å™¨ç«¯å¼€å¯çš„è¿œç¨‹ç«¯å£ï¼›# è´Ÿè½½å‡è¡¡é…ç½®group = test_group # è´Ÿè½½å‡è¡¡ç»„åï¼Œä¼šå°†åŒä¸€ç»„å†…çš„å®¢æˆ·ç«¯è¿›è¡Œè´Ÿè½½ï¼›group_key = 123456 # è´Ÿè½½å‡è¡¡ç»„å¯†é’¥ï¼› # webç¤ºä¾‹[web01]type = http # ä½¿ç”¨httplocal_ip = 127.0.0.1 local_port = 80use_encryption = falseuse_compression = truehttp_user = admin # è®¿é—®web01é¡µé¢å¯ç”¨è®¤è¯ï¼Œç”¨æˆ·åadminhttp_pwd = admin # å¯†ç subdomain = web01 # å­åŸŸåï¼Œéœ€è¦æœåŠ¡ç«¯é…ç½®äº†subdomain_hostå‚æ•°ï¼›custom_domains = web02.example.com # web01çš„åŸŸåï¼Œå’ŒsubdomainäºŒé€‰ä¸€locations = /,/pic # æŒ‡å®šç”¨äºŽè·¯ç”±çš„URLå‰ç¼€ï¼›host_header_rewrite = example.com # é…ç½®httpåŒ…å¤´åŸŸåé‡å†™;header_X-From-Where = frp # æ·»åŠ åŒ…å¤´ä¿¡æ¯X-From-Where: frpï¼›Â¶ä¸ƒã€å‚è€ƒhttps://www.bookstack.cn/read/frp-0.36-zh/70fe76b44fdacf77.mdhttp://www.yangjinxiang.com/article/119.html]]></content>
      <categories>
        <category>tools</category>
      </categories>
      <tags>
        <tag>http</tag>
        <tag>https</tag>
        <tag>frp</tag>
        <tag>å†…ç½‘ç©¿é€</tag>
        <tag>åå‘ä»£ç†</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[gitåŸºç¡€å­¦ä¹ ç¬”è®°]]></title>
    <url>%2Ftools%2Fgit.html</url>
    <content type="text"><![CDATA[ä¸€ä¸ªç”±æµ…å…¥æ·±ï¼Œå­¦å®ŒåŽèƒ½ç«‹åˆ»ä¸Šæ‰‹çš„Gitæ•™ç¨‹ï¼Œå¯¹äºŽåˆå­¦è€…æ¥è¯´ï¼Œæœ‰ä¸€å®šçš„å‚è€ƒä»·å€¼ã€‚Â¶ä¸€ã€åŸºæœ¬æ¦‚å¿µÂ¶1. ä»€ä¹ˆæ˜¯GitGitæ˜¯ä¸€ä¸ªå¼€æºçš„åˆ†å¸ƒå¼ç‰ˆæœ¬æŽ§åˆ¶ç³»ç»Ÿã€‚Gitçš„åˆ†å¸ƒå¼ï¼šGité‡‡ç”¨äº†åˆ†å¸ƒå¼ç‰ˆæœ¬åº“çš„æ–¹å¼ï¼Œä¸éœ€è¦æœåŠ¡å™¨ç«¯è½¯ä»¶æ”¯æŒå³å¯åœ¨æœ¬åœ°å®Œæˆç‰ˆæœ¬æŽ§åˆ¶å·¥ä½œã€‚Gitçš„ç‰ˆæœ¬æŽ§åˆ¶ï¼šæ˜¯ä¸€ç§è®°å½•ä¸€ä¸ªæˆ–è‹¥å¹²æ–‡ä»¶å†…å®¹å˜åŒ–ï¼Œä»¥ä¾¿å°†æ¥æŸ¥é˜…ç‰¹å®šç‰ˆæœ¬ä¿®è®¢æƒ…å†µçš„ç³»ç»Ÿã€‚Gitçš„æœ€åŸºæœ¬ç†è§£ï¼šç®€å•çš„è¯´Gitå°±æ˜¯ç”¨äºŽä¿å­˜æ–‡ä»¶åœ¨æ¯æ¬¡ä¿®æ”¹æ—¶çš„å¿«ç…§çš„ä¸€ä¸ªç®¡ç†ç³»ç»Ÿï¼Œè¿™äº›å¿«ç…§æž„æˆäº†ä¸€ä¸ªä¸ªå¯ä»¥æ¥å›žåˆ‡æ¢çš„ç‰ˆæœ¬ã€‚æ‰€ä»¥ä½ å¯ä»¥é€šè¿‡ä½¿ç”¨gitæ¥åˆ‡æ¢å¿«ç…§å®žçŽ°æ–‡ä»¶æ¢å¤ï¼Œè¿™ä½¿å¾—æˆ‘ä»¬ç®¡ç†å¤§åž‹é¡¹ç›®ä»£ç æˆ–è€…æ–‡ä»¶æ—¶å¾—åˆ°äº†å®‰å…¨çš„ä¿éšœæœºåˆ¶ã€‚å½“ç„¶gitçš„åŠŸèƒ½ä¸åªæ˜¯å¿«ç…§çš„æ¥å›žåˆ‡æ¢é‚£ä¹ˆç®€å•ã€‚å®ƒç«Ÿç„¶æ˜¯ä¸€ç§ç³»ç»Ÿï¼Œé‚£å¿…ç„¶æœ‰ç€å¾ˆå¤šå…¶å®ƒç®¡ç†æ€§çš„åŠŸèƒ½ï¼Œå¦‚åˆ†æ”¯åˆå¹¶ï¼ˆæˆ–è€…è¯´æ˜¯å¿«ç…§åˆå¹¶ï¼‰ã€å„ç‰ˆæœ¬æ–‡ä»¶å·®å¼‚å¯¹ç…§ã€æœ¬åœ°ä»“åº“å’Œè¿œç¨‹ä»“åº“çš„è¿žæŽ¥å’Œäº’åŠ¨ã€ä»Žæœ¬åœ°åº“æŽ¨é€åˆ°è¿œç¨‹åº“ï¼Œä»Žè¿œç¨‹åº“å…‹éš†åˆ°æœ¬åœ°ç­‰ç­‰ã€‚Â¶2. gitçš„æ–‡ä»¶ç®¡ç†æœºåˆ¶gitæŠŠæ•°æ®çœ‹ä½œæ˜¯å°åž‹æ–‡ä»¶ç³»ç»Ÿçš„ä¸€ç»„å¿«ç…§ã€‚æ¯æ¬¡æäº¤æ›´æ–°æ—¶gitéƒ½ä¼šå¯¹å½“å‰çš„å…¨éƒ¨æ–‡ä»¶åˆ¶ä½œä¸€ä¸ªå¿«ç…§å¹¶ä¿å­˜è¿™ä¸ªå¿«ç…§çš„ç´¢å¼•ã€‚ä¸ºäº†é«˜æ•ˆï¼Œå¦‚æžœæ–‡ä»¶æ²¡æœ‰ä¿®æ”¹ï¼Œgitä¸å†é‡æ–°å­˜è¯¥æ–‡ä»¶ï¼Œè€Œæ˜¯åªä¿ç•™ä¸€ä¸ªé“¾æŽ¥æŒ‡é’ˆæŒ‡å‘ä¹‹å‰å­˜å‚¨çš„æ–‡ä»¶ã€‚æ‰€ä»¥gitçš„å·¥ä½œæ–¹å¼å¯ä»¥ç§°ä¹‹ä¸ºå¿«ç…§æµã€‚Â¶3. gitçš„å·¥ä½œæµç¨‹ï¼ˆ1ï¼‰åœ¨å·¥ä½œåŒºä¸­æ·»åŠ ã€ä¿®æ”¹æ–‡ä»¶ï¼ˆ2ï¼‰å°†éœ€è¦è¿›è¡Œç‰ˆæœ¬ç®¡ç†çš„æ–‡ä»¶å­˜å…¥æš‚å­˜åŒºï¼ˆ3ï¼‰å°†æš‚å­˜åŒºçš„æ–‡ä»¶æäº¤åˆ°gitä»“åº“Â¶4. gitç‰ˆæœ¬æŽ§åˆ¶åŒºåŸŸçš„æƒ…å†µï¼ˆ1ï¼‰å·¥ä½œåŒºï¼šå°±æ˜¯ä½ åœ¨ç”µè„‘é‡Œèƒ½çœ‹åˆ°çš„ç›®å½•ã€‚ï¼ˆ2ï¼‰æš‚å­˜åŒºï¼šè‹±æ–‡å«stage, æˆ–indexã€‚ä¸€èˆ¬å­˜æ”¾åœ¨ â€œ.gitç›®å½•ä¸‹â€ ä¸‹çš„indexæ–‡ä»¶ï¼ˆ.git/indexï¼‰ä¸­ï¼Œæ‰€ä»¥æˆ‘ä»¬æŠŠæš‚å­˜åŒºæœ‰æ—¶ä¹Ÿå«ä½œç´¢å¼•ï¼ˆindexï¼‰ã€‚ï¼ˆ3ï¼‰ç‰ˆæœ¬åº“ï¼šå·¥ä½œåŒºæœ‰ä¸€ä¸ªéšè—ç›®å½•.gitï¼Œè¿™ä¸ªä¸ç®—å·¥ä½œåŒºï¼Œè€Œæ˜¯Gitçš„ç‰ˆæœ¬åº“ã€‚Â¶5. gitç®¡ç†ä¸‹æ–‡ä»¶çš„çŠ¶æ€ï¼ˆ1ï¼‰å·²ä¿®æ”¹ï¼ˆmodifiedï¼‰ï¼ˆ2ï¼‰å·²æš‚å­˜ï¼ˆstagedï¼‰ï¼ˆ3ï¼‰å·²æäº¤ï¼ˆcommittedï¼‰Â¶äºŒ. å®‰è£…Gitåœ¨ä½¿ç”¨ Git å‰éœ€è¦å…ˆå®‰è£… Gitã€‚Git ç›®å‰æ”¯æŒ Linux/Unixã€Solarisã€Macå’Œ Windows å¹³å°ä¸Šè¿è¡Œã€‚Git å„å¹³å°å®‰è£…åŒ…ä¸‹è½½åœ°å€ä¸ºï¼šhttp://git-scm.com/downloadså®‰è£…çš„è¿‡ç¨‹å°±æ˜¯å‚»ç“œå¼ä¸‹ä¸€æ­¥ã€‚ç„¶åŽæ‰“å¼€ git bash è¾“å…¥ç›¸å…³ git å‘½ä»¤å³å¯æ‰§è¡Œç‰ˆæœ¬æŽ§åˆ¶æ“ä½œã€‚ðŸ’â€â™‚ Git GUI å›¾å½¢åŒ–æ“ä½œå·¥å…·å®‰è£… Git åŽï¼Œä¸»è¦æ˜¯å¯ä»¥é€šè¿‡ç»ˆç«¯å‘½ä»¤è¡Œæ–¹å¼è¿›è¡Œ Git æ“ä½œï¼Œå¦‚æžœå¸Œæœ›ä½¿ç”¨å›¾å½¢åŒ–çš„ Git æ“ä½œæ–¹å¼ï¼Œå¯ä»¥é€‰æ‹©ä»¥ä¸‹å·¥å…·ï¼šï¼ˆ1ï¼‰Git å†…ç½®çš„é»˜è®¤ Git å›¾å½¢åŒ–æ“ä½œå·¥å…·ï¼šgit gui ï¼ˆwindows å¯¹åº”æ–‡ä»¶è·¯å¾„&lt;gitå®‰è£…è·¯å¾„&gt;/cmd/git-gui.exeï¼‰ï¼ˆ2ï¼‰ç¬¬ä¸‰æ–¹ Git å›¾å½¢åŒ–æ“ä½œå·¥å…·ï¼šSourcetreeï¼ˆä¸å¼€æºä½†å…è´¹ï¼Œæ”¯æŒ Windowsã€Macï¼ˆä¸æ”¯æŒ Linuxï¼‰ï¼Œé™¤äº†æ”¯æŒ Git å¤–ï¼Œè¿˜æ”¯æŒ Mercurial ç­‰å…¶ä»–ç‰ˆæœ¬æŽ§åˆ¶ï¼‰GitKraKenï¼ˆä¸å¼€æºä¸”æ”¶è´¹ï¼Œæ”¯æŒ Windowsã€Macã€Linuxï¼‰GitHub Desktopï¼ˆå¼€æºå…è´¹ï¼Œå®˜æ–¹ä»…æ”¯æŒ Windowsã€Macï¼Œä½†ç¤¾åŒºåˆ†æ”¯æœ‰ Linux å‘è¡Œç‰ˆï¼‰GitAheadï¼ˆå¼€æºå…è´¹ï¼Œæ”¯æŒ Windowsã€Macã€Linuxï¼‰GitColaï¼ˆå¼€æºå…è´¹ï¼Œæ”¯æŒ Windowsã€Macã€Linuxï¼‰TortoiseGitï¼ˆå¼€æºå…è´¹ï¼Œä»…æ”¯æŒ Windowsï¼‰GitExtensionsï¼ˆå¼€æºå…è´¹ï¼Œæ”¯æŒ Windowsã€Macã€Linuxï¼‰å¯¹äºŽä¼—å¤š Git GUI å·¥å…·çš„é€‰æ‹©ï¼Œä¸ªäººæŽ¨èä½¿ç”¨ Sourcetreeï¼Œå› ä¸ºå…¶è¾ƒä¸ºä¸»æµï¼Œä¸”ç¾Žè§‚å¥½ç”¨ã€‚å‚è€ƒï¼šhttps://blog.csdn.net/mzl87/article/details/128577959Â¶ä¸‰ã€åˆå§‹åŒ–gitç‰ˆæœ¬ä»“åº“1git init #åˆå§‹åŒ–gitç‰ˆæœ¬åº“ï¼Œä¼šè‡ªåŠ¨åˆ›å»ºäº†å”¯ä¸€masteråˆ†æ”¯ï¼Œå¹¶è¿›å…¥æ­¤åˆ†æ”¯æ¡ˆä¾‹ï¼š123mkdir project #åˆ›å»ºæ–‡ä»¶ç›®å½•cd project #è¿›å…¥å·¥ä½œç›®å½•ä¸­git init #åˆå§‹åŒ–gitç‰ˆæœ¬åº“ï¼Œä¼šè‡ªåŠ¨åˆ›å»ºäº†å”¯ä¸€masteråˆ†æ”¯ï¼Œå¹¶è¿›å…¥æ­¤åˆ†æ”¯projectæ˜¯æ‰€è°“çš„å·¥ä½œåŒºï¼Œå·¥ä½œåŒºæœ‰ä¸€ä¸ªéšè—ç›®å½•.gitï¼Œè¿™ä¸ªä¸ç®—å·¥ä½œåŒºï¼Œè€Œæ˜¯gitçš„ç‰ˆæœ¬åº“ã€‚gitçš„ç‰ˆæœ¬åº“é‡Œå­˜äº†å¾ˆå¤šæ–‡ä»¶ï¼Œå…¶ä¸­å…¶ä¸­.git/indexå°±æ˜¯æ‰€è°“çš„æš‚å­˜åŒºï¼Œå³stageï¼ˆæˆ–è€…å«indexï¼‰ï¼Œå®ƒæ˜¯ä¸€ä¸ªäºŒè¿›åˆ¶æ–‡ä»¶ï¼Œè¿˜æœ‰æŒ‡å‘masteråˆ†æ”¯çš„ä¸€ä¸ªæŒ‡é’ˆæ–‡ä»¶HEADç­‰ã€‚Â¶å››ã€ç»™æš‚å­˜åŒºæ·»åŠ æ–‡ä»¶1git add files #å°†filesæ·»åŠ åˆ°æš‚å­˜åŒºæ¡ˆä¾‹ï¼š12echo "demo" &gt;&gt; demo.txt #åˆ›å»ºä¸€ä¸ªå†…å®¹ä¸ºâ€œdemoâ€çš„æµ‹è¯•æ–‡ä»¶git add demo.txt #å°†demo.txtæ·»åŠ åˆ°æš‚å­˜åŒºÂ¶äº”ã€ç»™gitç‰ˆæœ¬åº“æäº¤æ–‡ä»¶1git commit -m "æäº¤è¯´æ˜Ž" #ä¸€æ¬¡æ€§å°†æ·»åŠ åˆ°æš‚å­˜åŒºçš„æ‰€æœ‰æ–‡ä»¶æäº¤åˆ°ç‰ˆæœ¬åº“ä¸­çš„masteråˆ†æ”¯ï¼Œ-måŽçš„ä¿¡æ¯æ˜¯æäº¤è¯´æ˜Žæ¡ˆä¾‹ï¼š1git commit -m "commit demo.txt" #ä¸€æ¬¡æ€§å°†æ·»åŠ åˆ°æš‚å­˜åŒºçš„æ‰€æœ‰æ–‡ä»¶æäº¤åˆ°ç‰ˆæœ¬åº“ä¸­çš„masteråˆ†æ”¯ï¼Œ-måŽçš„ä¿¡æ¯æ˜¯æäº¤è¯´æ˜ŽÂ¶å…­ã€æŸ¥çœ‹gitæ–‡ä»¶çŠ¶æ€12git status #æŸ¥çœ‹é¡¹ç›®çš„å½“å‰çŠ¶æ€ä¿¡æ¯ã€‚"AM" çŠ¶æ€çš„æ„æ€æ˜¯ï¼Œè¿™ä¸ªæ–‡ä»¶åœ¨æˆ‘ä»¬å°†å®ƒæ·»åŠ åˆ°ç¼“å­˜ä¹‹åŽåˆæœ‰æ”¹åŠ¨ã€‚git status -s #åŠ äº†-s å‚æ•°ï¼Œä»¥èŽ·å¾—ç®€çŸ­é¡¹ç›®çš„å½“å‰çŠ¶æ€ä¿¡æ¯ã€‚æ¡ˆä¾‹ï¼šä»¥ä¸‹å°†ä»Žæ— æ–‡ä»¶æ”¹åŠ¨æˆ–è€…æ·»åŠ ----&gt;åˆ›å»ºæ–‡ä»¶-----&gt;æ·»åŠ æ–‡ä»¶åˆ°æš‚å­˜åŒº-----&gt;æäº¤æš‚å­˜åŒºçš„æ‰€æœ‰æ–‡ä»¶åˆ°gitç‰ˆæœ¬åº“è¿™å‡ ä¸ªä¸åŒé˜¶æ®µçš„æ–‡ä»¶çŠ¶æ€123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960#æ— æ–‡ä»¶æ”¹åŠ¨æˆ–è€…æ·»åŠ çš„æƒ…å†µæŸ¥çœ‹gitçŠ¶æ€ï¼šwen@DESKTOP-BHMU9KJ MINGW64 ~/Desktop/project (master)$ git statusOn branch masterNo commits yetnothing to commit (create/copy files and use "git add" to track)#åˆ›å»ºæ–‡ä»¶å¹¶æŸ¥çœ‹gitçŠ¶æ€ï¼šwen@DESKTOP-BHMU9KJ MINGW64 ~/Desktop/project (master)$ echo "demo" &gt;&gt;demo.txtwen@DESKTOP-BHMU9KJ MINGW64 ~/Desktop/project (master)$ git statusOn branch masterNo commits yetUntracked files: #æç¤ºæ–‡ä»¶æœªè¢«gitè·Ÿè¸ªï¼Œå³æ­¤æ–‡ä»¶è¿˜æ²¡å¼€å§‹æ­£å¼æŽ¥å—gitçš„ç‰ˆæœ¬æŽ§åˆ¶ï¼Œä¸€æ—¦æäº¤åˆ°æš‚å­˜åŒºå¼€å§‹åˆ°gitç‰ˆæœ¬åº“ï¼Œå°±å—åˆ°gitçš„è·Ÿè¸ªå’Œç‰ˆæœ¬æŽ§åˆ¶ã€‚ (use "git add &lt;file&gt;..." to include in what will be committed) demo.txtnothing added to commit but untracked files present (use "git add" to track)wen@DESKTOP-BHMU9KJ MINGW64 ~/Desktop/project (master)#æ·»åŠ æ–‡ä»¶åˆ°æš‚å­˜åŒºå¹¶æŸ¥çœ‹gitçŠ¶æ€ï¼š#æ­¤æ—¶gitå¼€å§‹è·Ÿè¸ªæäº¤çš„æ–‡ä»¶ã€‚wen@DESKTOP-BHMU9KJ MINGW64 ~/Desktop/project (master)$ git add demo.txtwen@DESKTOP-BHMU9KJ MINGW64 ~/Desktop/project (master)$ git statusOn branch masterNo commits yetChanges to be committed: (use "git rm --cached &lt;file&gt;..." to unstage)# å¯ä»¥é€šè¿‡git rm --cached &lt;file&gt;æ¸…é™¤æäº¤çš„æ–‡ä»¶ï¼Œgitåˆä¸ä¼šè·Ÿè¸ªæ–‡ä»¶äº†ã€‚æˆ–è€…é€šè¿‡git rm --cached * æ¸…ç©ºæš‚å­˜åŒºçš„æ‰€ä»¥æ–‡ä»¶ new file: demo.txt#æäº¤æš‚å­˜åŒºçš„æ‰€æœ‰æ–‡ä»¶åˆ°gitç‰ˆæœ¬åº“å¹¶æŸ¥çœ‹gitçŠ¶æ€ï¼šwen@DESKTOP-BHMU9KJ MINGW64 ~/Desktop/project (master)$ git commit -m "commit demo.txt"[master (root-commit) 0e22aaf] commit demo.txt 1 file changed, 1 insertion(+) create mode 100644 demo.txtwen@DESKTOP-BHMU9KJ MINGW64 ~/Desktop/project (master)$ git statusOn branch masternothing to commit, working tree clean #æ­¤æ—¶æç¤ºæ²¡æœ‰æš‚å­˜åŒºé‡Œæ²¡æœ‰ä»»ä½•æ–‡ä»¶éœ€è¦æäº¤åˆ°gitç‰ˆæœ¬åº“äº†Â¶ä¸ƒã€æŸ¥çœ‹åŽ†å²æäº¤è®°å½•gitçš„æäº¤å¯¹è±¡ï¼šæ–‡ä»¶å¯¹è±¡å­˜æ”¾åœ¨æ ‘å¯¹è±¡é‡Œï¼Œæ ‘å¯¹è±¡åˆå­˜æ”¾åœ¨æäº¤å¯¹è±¡é‡Œã€‚æ‰€ä»¥æŸ¥çœ‹æäº¤æ—¶çš„æäº¤idå€¼å®žé™…æ˜¯æ‰€æœ‰æäº¤æ–‡ä»¶ç»„åˆè€Œæˆçš„æŸç§å½¢å¼çš„å“ˆå¸Œå€¼ã€‚12345git log #è¾“å‡ºå®Œæ•´åŽ†å²æäº¤è®°å½•git log --pretty=oneline #æ¯æ¬¡æäº¤ä»¥ä¸€è¡Œè¾“å‡ºåŽ†å²æäº¤è®°å½•git log --oneline #æ¯æ¬¡æäº¤ä»¥ä¸€è¡Œè¾“å‡ºç®€çŸ­åž‹åŽ†å²æäº¤è®°å½•git log --decorate --all --oneline --graph #æŒ‰åˆ†æ”¯æƒ…å†µæŸ¥çœ‹æäº¤è®°å½•git reflog #æŸ¥çœ‹åŽ†å²æ‰€ä»¥commit id,å¹¶ä¸”èƒ½å¤Ÿæ˜¾ç¤ºåˆ°æŸä¸ªç‰ˆæœ¬çš„æ­¥æ•°ï¼Œå¦‚ï¼šHEAD@&#123;2&#125;æ³¨æ„ï¼šå½“æäº¤è®°å½•åŽï¼Œgitæ˜¯æ— æ³•å†åˆ é™¤æäº¤è®°å½•çš„ï¼ˆå³ç‰ˆæœ¬ä»“åº“å¿«ç…§ï¼‰ï¼Œé™¤éžåˆ é™¤äº†gitä»“åº“ï¼ˆ.gitç›®å½•ï¼‰ï¼Œå¦‚æžœæƒ³è¦å®žçŽ°ç±»ä¼¼åˆ é™¤çš„æ•ˆæžœåªèƒ½é€šè¿‡ç§»åŠ¨HEDAæŒ‡é’ˆçš„æŒ‡å‘æ¥å®žçŽ°ã€‚æ¡ˆä¾‹ï¼šä»¥ä¸‹å°±ä»¥ä¿®æ”¹demo.txtä¸ºä¾‹ï¼Œè¿›è¡ŒåŽ†å²æäº¤è®°å½•æŸ¥çœ‹ã€‚12345678910111213141516171819202122232425262728293031323334wen@DESKTOP-BHMU9KJ MINGW64 ~/Desktop/project (master)$ git logcommit 0e22aafab1b3951a989105af18d3028b0bd6dc81 (HEAD -&gt; master) #ç‰ˆæœ¬å¿«ç…§çš„idå·ï¼Œidå€¼æ˜¯é€šè¿‡å“ˆå¸Œç®—æ³•è®¡ç®—å‡ºæ¥çš„å“ˆå¸Œå€¼ï¼Œæ–‡ä»¶å†…å®¹ä¸åŒï¼Œå“ˆå¸Œå€¼å¿…å®šä¸åŒã€‚Author: qcmoke &lt;1667164190@qq.com&gt;Date: Thu Oct 18 21:47:18 2018 +0800 commit demo.txtwen@DESKTOP-BHMU9KJ MINGW64 ~/Desktop/project (master)$ vim demo.txtwen@DESKTOP-BHMU9KJ MINGW64 ~/Desktop/project (master)$ git add demo.txtwen@DESKTOP-BHMU9KJ MINGW64 ~/Desktop/project (master)$ git commit -m "modify demo.txt"[master c3f6e58] modify demo.txt 1 file changed, 1 insertion(+), 1 deletion(-)wen@DESKTOP-BHMU9KJ MINGW64 ~/Desktop/project (master)$ git logcommit c3f6e587497f49870ab974ca4433a8e13467088d (HEAD -&gt; master)Author: qcmoke &lt;1667164190@qq.com&gt;Date: Fri Oct 19 00:11:11 2018 +0800 modify demo.txtcommit 0e22aafab1b3951a989105af18d3028b0bd6dc81Author: qcmoke &lt;1667164190@qq.com&gt;Date: Thu Oct 18 21:47:18 2018 +0800 commit demo.txtwen@DESKTOP-BHMU9KJ MINGW64 ~/Desktop/project (master)Â¶å…«ã€ç‰ˆæœ¬å¿«ç…§å›žæ»šæ“ä½œä¸ºäº†æ•ˆæžœï¼Œåœ¨ä»¥ä¸Šå·²ç»åˆ›å»ºå¹¶ä¿®æ”¹äº†demo.txtçš„åŸºç¡€ä¸Šï¼Œä¸‹é¢ç»§ç»­æ·»åŠ readme.txtæ–‡ä»¶ï¼Œå¹¶å¯¹ä¹‹è¿›è¡Œä¸€æ¬¡ä¿®æ”¹ã€‚12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455#åˆ›å»ºä¸€ä¸ªreadme.txtæ–‡ä»¶ï¼Œå†…å®¹ä¸º"hello world !"wen@DESKTOP-BHMU9KJ MINGW64 ~/Desktop/project (master)$ echo "hello world !" &gt;&gt; readme.txtwen@DESKTOP-BHMU9KJ MINGW64 ~/Desktop/project (master)$ git add readme.txtwen@DESKTOP-BHMU9KJ MINGW64 ~/Desktop/project (master)$ git commit -m "commit readme.txt"[master 5b144ee] commit readme.txt 1 file changed, 1 insertion(+) create mode 100644 readme.txt#ä¿®æ”¹å†…å®¹ï¼Œå‘æ–‡ä»¶é‡Œæ·»åŠ "I am a student !"å­—ç¬¦ä¸²wen@DESKTOP-BHMU9KJ MINGW64 ~/Desktop/project (master)$ echo "I am a student !" &gt;&gt; readme.txtwen@DESKTOP-BHMU9KJ MINGW64 ~/Desktop/project (master)$ git add readme.txtwen@DESKTOP-BHMU9KJ MINGW64 ~/Desktop/project (master)$ git commit -m "modify readme.txt"[master a10b617] modify readme.txt 1 file changed, 1 insertion(+), 1 deletion(-)#æŸ¥çœ‹åŽ†å²æäº¤è®°å½•wen@DESKTOP-BHMU9KJ MINGW64 ~/Desktop/project (master)$ git logcommit a10b617a02aa30ddd4e895d0653d33c7a28dcfad (HEAD -&gt; master)Author: qcmoke &lt;1667164190@qq.com&gt;Date: Sat Oct 20 20:09:17 2018 +0800 modify readme.txtcommit 5b144ee3e670f710091d7441bcde01ceaf8c622eAuthor: qcmoke &lt;1667164190@qq.com&gt;Date: Sat Oct 20 20:06:38 2018 +0800 commit readme.txtcommit c3f6e587497f49870ab974ca4433a8e13467088dAuthor: qcmoke &lt;1667164190@qq.com&gt;Date: Fri Oct 19 00:11:11 2018 +0800 modify demo.txtcommit 0e22aafab1b3951a989105af18d3028b0bd6dc81Author: qcmoke &lt;1667164190@qq.com&gt;Date: Thu Oct 18 21:47:18 2018 +0800 commit demo.txtwen@DESKTOP-BHMU9KJ MINGW64 ~/Desktop/project (master)ä»¥ä¸Šæ“ä½œå®ŒæˆåŽå½“å‰çš„æƒ…å†µå¦‚ä¸‹å›¾ï¼šÂ¶1. å›žæ»šåˆ°ä¸Šä¸€ä¸ªç‰ˆæœ¬å¿«ç…§1git reset HEAD~ # å›žæ»šåˆ°ä¸Šä¸ªç‰ˆæœ¬å¹¶ä¸”æš‚å­˜åŒºä¼šè¢«å›žæ»šåˆ°çš„ä»“åº“ç‰ˆæœ¬æ–‡ä»¶æ‰€è¦†ç›–ã€‚~è¡¨ç¤ºä¸Šä¸€ä¸ªç‰ˆæœ¬å¿«ç…§ï¼Œ~~è¡¨ç¤ºä¸Šä¸Šä¸ªå¿«ç…§ï¼Œä»¥æ­¤ç±»æŽ¨ï¼Œä¹Ÿå¯ä»¥ç”¨æ•°å­—ä»£æ›¿ï¼Œå¦‚~10åˆ™è¡¨ç¤ºå‰10ä¸ªçš„ç‰ˆæœ¬git reset --mixed HEAD~é»˜è®¤é€‰é¡¹ç§»åŠ¨HEADçš„æŒ‡å‘ï¼Œå°†å…¶æŒ‡å‘ä¸Šä¸€ä¸ªç‰ˆæœ¬å¿«ç…§å°†HEADç§»åŠ¨åŽæŒ‡å‘çš„å¿«ç…§å›žæ»šåˆ°æš‚å­˜åŒºï¼ˆæš‚å­˜åŒºä¼šè¢«å›žæ»šåˆ°çš„ä»“åº“ç‰ˆæœ¬æ–‡ä»¶æ‰€è¦†ç›–ï¼‰git reset --soft HEAD~ç§»åŠ¨HEADçš„æŒ‡å‘ï¼Œå°†å…¶æŒ‡å‘ä¸Šä¸€ä¸ªå¿«ç…§ï¼ˆä¸å›žæ»šåˆ°æš‚å­˜åŒºï¼‰git reset --hard HEAD~ç§»åŠ¨HEADçš„æŒ‡å‘ï¼Œå°†å…¶æŒ‡å‘ä¸Šä¸€ä¸ªç‰ˆæœ¬å¿«ç…§å°†HEADç§»åŠ¨åŽæŒ‡å‘çš„å¿«ç…§å›žæ»šåˆ°æš‚å­˜åŒºå°†æš‚å­˜åŒºçš„æ–‡ä»¶è¿˜åŽŸåˆ°å·¥ä½œç›®å½•ï¼ˆå·¥ä½œç›®å½•ä¼šè¢«æš‚å­˜åŒºçš„æ–‡ä»¶æ‰€è¦†ç›–ï¼‰æ¡ˆä¾‹ï¼š1234567891011121314151617181920212223242526272829303132333435363738wen@DESKTOP-BHMU9KJ MINGW64 ~/Desktop/project (master)$ git reset HEAD~Unstaged changes after reset:M readme.txtwen@DESKTOP-BHMU9KJ MINGW64 ~/Desktop/project (master)$ git logcommit 5b144ee3e670f710091d7441bcde01ceaf8c622e (HEAD -&gt; master)Author: qcmoke &lt;1667164190@qq.com&gt;Date: Sat Oct 20 20:06:38 2018 +0800 commit readme.txtcommit c3f6e587497f49870ab974ca4433a8e13467088dAuthor: qcmoke &lt;1667164190@qq.com&gt;Date: Fri Oct 19 00:11:11 2018 +0800 modify demo.txtcommit 0e22aafab1b3951a989105af18d3028b0bd6dc81Author: qcmoke &lt;1667164190@qq.com&gt;Date: Thu Oct 18 21:47:18 2018 +0800 commit demo.txt#å¯ä»¥å‘çŽ°è®°å½•é‡Œæ²¡æœ‰â€œmodify readme.txtâ€çš„å†…å®¹äº†ï¼Œå› ä¸ºå·²ç»å›žæ»šåˆ°äº†ä¸Šä¸€ä¸ªç‰ˆæœ¬ï¼Œè€Œä¸Šä¸€ä¸ªç‰ˆæœ¬å¹¶æ²¡æœ‰è¿™æ¡æäº¤è®°å½•ã€‚wen@DESKTOP-BHMU9KJ MINGW64 ~/Desktop/project (master)$ git statusOn branch masterChanges not staged for commit: (use "git add &lt;file&gt;..." to update what will be committed) (use "git checkout -- &lt;file&gt;..." to discard changes in working directory) modified: readme.txtno changes added to commit (use "git add" and/or "git commit -a")#å¯ä»¥å‘çŽ°ä¸€ä¸ªæœ‰è¶£çš„äº‹æƒ…ï¼Œé‚£å°±æ˜¯gitæç¤ºè¦å‘æš‚å­˜åŒºæ·»åŠ æ–‡ä»¶ï¼Œå¹¶æäº¤æ–‡ä»¶åˆ°ç‰ˆæœ¬åº“ã€‚åŽŸå› æ˜¯æ‰§è¡Œå›žæ»šåŽå·¥ä½œåŒºçš„readme.txtè¦æ¯”æš‚å­˜åŒºçš„readme.txtæ–°ï¼Œç›¸å¯¹äºŽå·¥ä½œåŒºå¯¹readme.txtåšäº†ä¿®æ”¹ã€‚Â¶2. å›žæ»šåˆ°ç‰¹å®šç‰ˆæœ¬å¿«ç…§1git reset ç‰ˆæœ¬å¿«ç…§çš„idå·æ¡ˆä¾‹ï¼š1234å¦‚æœ¬ä¾‹ä¸­è¦ä»Žç¬¬å››ä¸ªç‰ˆæœ¬å›žæ»šåˆ°ç¬¬ä¸‰ä¸ªç‰ˆæœ¬ï¼šgit reset c3f6e587497f49870ab974ca4433a8e13467088dæˆ–è€…ç®€å†™ï¼ˆèƒ½è¯†åˆ«å³å¯ï¼‰ï¼šgit reset c3f6e58Â¶3. å›žæ»šå¿«ç…§ä¸­çš„ä¸ªåˆ«æ–‡ä»¶1git reset ç‰ˆæœ¬å¿«ç…§ æ–‡ä»¶å/æ–‡ä»¶è·¯å¾„ #HEADæŒ‡é’ˆä¸ç§»åŠ¨ï¼Œåªå›žæ»šä¸ªåˆ«æ–‡ä»¶Â¶4. å¾€æ–°ç‰ˆæœ¬å›žæ»šç±»ä¼¼çš„åªè¦è®°ä½ç‰ˆæœ¬å¿«ç…§çš„idå·å³å¯å¾€å¾€æ–°ç‰ˆæœ¬å›žæ»šã€‚1git reset ç‰ˆæœ¬å¿«ç…§çš„idå·ä½†å¾€æ—§ç‰ˆæœ¬å›žæ»šåŽå¹¶ä¸”å…³é—­äº†shellï¼Œå¦‚æžœåœ¨å›žé€€ä»¥åŽåˆæƒ³å†æ¬¡å›žåˆ°ä¹‹å‰çš„ç‰ˆæœ¬ï¼Œç”¨git logä¼šæŸ¥ä¸åˆ°ç‰ˆæœ¬idå·ã€‚å¯ä»¥é€šè¿‡ä»¥ä¸‹å‘½ä»¤æŸ¥çœ‹æ‰€æœ‰commitè®°å½•ã€‚1git reflog #æŸ¥çœ‹åŽ†å²æ‰€ä»¥commit idÂ¶ä¹ã€æ¢å¤å·¥ä½œåŒºÂ¶1. æ²¡æœ‰addçš„æƒ…å†µ12345#æ£€å‡º,åªèƒ½æ¸…ç©ºå…¨éƒ¨å·²ä¿®æ”¹çš„é—®é¢˜ä»¶, ä½†æ˜¯å¯¹äºŽæ–°å»ºçš„æ–‡ä»¶å’Œæ–‡ä»¶å¤¹æ— æ³•æ¸…ç©º, å¿…é¡»ç»„åˆä¸‹é¢å‘½ä»¤ã€‚å¦‚æžœåªä½œç”¨ä¸ªåˆ«æ–‡ä»¶ç”¨å‚æ•° -- &lt;file&gt;git checkout .#æ¸…ç©ºæ‰€æœ‰æ–°å»ºçš„æ–‡ä»¶å’Œæ–‡ä»¶å¤¹git clean -dfgit cleançš„å‚æ•°è¯´æ˜Ž:-f ï¼šåˆ é™¤ ä¸€äº› æ²¡æœ‰ git add çš„ æ–‡ä»¶-dfï¼šåˆ é™¤ ä¸€äº› æ²¡æœ‰ git add çš„ æ–‡ä»¶å’Œç›®å½•-nï¼šæ˜¾ç¤ºå°†è¦åˆ é™¤çš„æ–‡ä»¶æˆ–è€…ç›®å½•Â¶2. å·²ç»addä½†æ²¡æœ‰commitçš„æƒ…å†µ123git reset . #é‡ç½®ï¼Œè¦†ç›–æš‚å­˜ï¼Œä½†ä¸è¦†ç›–æœ¬åœ°å·¥ä½œåŒºgit checkout .git clean -dfæ³¨: è¿™ç§æƒ…git resetä¸å…è®¸ä½¿ç”¨--softå’Œ--hardé€‰é¡¹Â¶3. å·²ç»addå¹¶ä¸”commitçš„æƒ…å†µ1git reset --hard HEAD~ #é‡ç½®ï¼Œè¦†ç›–æš‚å­˜å’Œæœ¬åœ°å·¥ä½œåŒºÂ¶åã€checkoutå’Œresetçš„åŒºåˆ«æ¢å¤æ–‡ä»¶å½“ç”¨checkoutå’Œresetæ¥æ¢å¤æŒ‡å®šå¿«ç…§ä¸­çš„æŒ‡å®šæ–‡ä»¶æ—¶ï¼Œä¸¤ç§çš„å‘½ä»¤éƒ½ä¸ä¼šæ”¹å˜HEADæŒ‡é’ˆçš„æŒ‡å‘ã€‚ä»–ä»¬çš„åŒºåˆ«æ˜¯ï¼šcheckoutå‘½ä»¤ä¼šåŒæ—¶è¦†ç›–æš‚å­˜åŒºå’Œå·¥ä½œåŒºï¼›è€Œresetå‘½ä»¤é»˜è®¤åªæ˜¯å°†æŒ‡å®šå¿«ç…§çš„æŒ‡å®šæ–‡ä»¶æ¢å¤åˆ°æš‚å­˜åŒºï¼ˆ--mixedï¼‰ã€‚æ³¨æ„ï¼šåœ¨æ¢å¤æŒ‡å®šå¿«ç…§ä¸­çš„æŒ‡å®šæ–‡ä»¶æ—¶ä½¿ç”¨git resetä¸å…è®¸ä½¿ç”¨--softå’Œ--hardé€‰é¡¹æ¢å¤å¿«ç…§å½“ç”¨checkoutå’Œresetæ¥æ¢å¤æŒ‡å®šå¿«ç…§æ—¶ï¼Œä¸¤ç§çš„å‘½ä»¤éƒ½ä¼šæ”¹å˜HEADæŒ‡é’ˆçš„æŒ‡å‘ã€‚ä»–ä»¬çš„åŒºåˆ«æ˜¯ï¼šcheckoutå‘½ä»¤åªç§»åŠ¨HEADè‡ªèº«æŒ‡å‘å…¶ä»–åˆ†æ”¯ï¼Œå¹¶ä¸ç§»åŠ¨HEADæ‰€åœ¨çš„åˆ†æ”¯æŒ‡é’ˆï¼›è€Œresetå‘½ä»¤ä¼šç§»åŠ¨HEADè‡ªèº«æŒ‡å‘å…¶ä»–åˆ†æ”¯å¹¶ä¸”ä¼šç§»åŠ¨HEADæ‰€åœ¨çš„åˆ†æ”¯æŒ‡é’ˆæŒ‡å‘å…¶ä»–ç‰ˆæœ¬åº“å¿«ç…§ã€‚Â¶åä¸€ã€æ–‡ä»¶diffå·®å¼‚æ¯”è¾ƒÂ¶1. æ¯”è¾ƒæš‚å­˜åŒºä¸Žå·¥ä½œåŒºçš„æ–‡ä»¶å·®å¼‚1git diff fileæ¡ˆä¾‹ï¼šæˆ‘ä»¬å¯¹demo.txtçš„å†…å®¹åšä»¥ä¸‹ä¿®æ”¹ã€‚æ”¹æˆä»¥ä¸‹ï¼š1234567#include &lt;iostream&gt;int main()&#123; using namespace std; cout &lt;&lt; "Hello World ï¼"&lt;&lt; endl; return 0;&#125;å¹¶æ·»åŠ åˆ°æš‚å­˜åŒºã€‚1git add demo.txtç„¶åŽåœ¨å·¥ä½œåŒºå†å¯¹demo.txtåšä¿®æ”¹ã€‚ä¿®æ”¹ä¸ºä»¥ä¸‹ï¼š1234567#include &lt;iostream&gt;using namespace std;int main()&#123; cout &lt;&lt; "Hello Git World ï¼"&lt;&lt; endl; return 0;&#125;1git diff demo.txt #æ¯”è¾ƒæš‚å­˜åŒºä¸Žå·¥ä½œåŒºçš„demo.txtå·®å¼‚æ‰“å°çš„å†…å®¹å¦‚ä¸‹ï¼š123456789101112131415diff --git a/demo.txt b/demo.txt #a/demo.txtæ˜¯æš‚å­˜åŒºçš„demo.txtï¼Œb/demo.txtæ˜¯å·¥ä½œåŒºçš„index ab28497..f6e1eb1 100644 #ab28497..f6e1eb1æ˜¯æ–‡ä»¶idï¼Œ100644æ˜¯æ–‡ä»¶ç±»åž‹å’Œæƒé™--- a/demo.txt #---è¡¨ç¤ºæ—§æ–‡ä»¶+++ b/demo.txt #+++è¡¨ç¤ºæ–°æ–‡ä»¶@@ -2,6 +2,6 @@ #-è¡¨ç¤ºæ—§æ–‡ä»¶ï¼Œ+è¡¨ç¤ºæ–°æ–‡ä»¶ï¼Œæ•°å­—è¡¨ç¤ºå¼€å§‹è¡Œå·å’Œè”è¿žç»­çš„è¡Œæ•° using namespace std; #æ²¡æœ‰+æˆ–è€…-è¡¨ç¤ºå…±æœ‰çš„å†…å®¹ int main() &#123;- cout &lt;&lt; "Hello World ï¼"&lt;&lt; endl; #-çš„å†…å®¹è¡¨ç¤ºæ—§æ–‡ä»¶æ‰€ç‰¹æœ‰çš„å†…å®¹+ cout &lt;&lt; "Hello Git World ï¼"&lt;&lt; endl; #+çš„å†…å®¹è¡¨ç¤ºæ–°æ–‡ä»¶æ‰€ç‰¹æœ‰çš„å†…å®¹ return 0; &#125;\ No newline at end of filewen@DESKTOP-BHMU9KJ MINGW64 ~/Desktop/project (master)Â¶2. æ¯”è¾ƒä¸¤ä¸ªåŽ†å²å¿«ç…§çš„å·®å¼‚1git diff å¿«ç…§id1 å¿«ç…§id2 fileÂ¶3. æ¯”è¾ƒå·¥ä½œåŒºå’Œç‰ˆæœ¬å¿«ç…§çš„å·®å¼‚12git diff å¿«ç…§id file #å·¥ä½œåŒºå’Œå…·ä½“çš„æŸä¸ªå¿«ç…§è¿›è¡Œå¯¹æ¯”git diff HEAD file #å·¥ä½œåŒºå’ŒHEADæ‰€æŒ‡å‘çš„ç‰ˆæœ¬å¿«ç…§è¿›è¡Œå¯¹æ¯”Â¶4. æ¯”è¾ƒæš‚å­˜åŒºå’Œç‰ˆæœ¬å¿«ç…§çš„å·®å¼‚12git diff --cached file #æš‚å­˜åŒºå’ŒHEADæ‰€æŒ‡å‘çš„ç‰ˆæœ¬å¿«ç…§è¿›è¡Œå¯¹æ¯”git diff --cached ç‰ˆæœ¬å¿«ç…§id file #æš‚å­˜åŒºå’Œå…·ä½“çš„æŸä¸ªå¿«ç…§è¿›è¡Œå¯¹æ¯”Â¶åäºŒã€æäº¤ä¿®æ”¹éœ€æ±‚ï¼šæäº¤æš‚å­˜åŒºçš„æ‰€ä»¥æ–‡ä»¶åˆ°ç‰ˆæœ¬åº“åŽï¼ˆå¦‚ git commit -m â€œcommit all files as sunday !â€ï¼‰ï¼Œä¹‹åŽåˆæ”¹åŠ¨äº†æœ¬åœ°çš„æŸä¸ªæ–‡ä»¶ï¼Œä½†ä¸æƒ³å› ä¸ºæ­¤ä¸ªä¾‹å†å¦å¤–æäº¤ä¸€æ¬¡è€Œç”Ÿæˆä¸€ä¸ªç‰ˆæœ¬å¿«ç…§ï¼ˆå³ç”Ÿæˆä¸€ä¸ªæäº¤logï¼‰ï¼Œåªæƒ³è¦è®©è¿™ä¸ªä¿®æ”¹çš„æ–‡ä»¶æ·»åŠ åˆ°ä¸Šæ¬¡çš„æäº¤ä¸­ï¼ˆå½“å‰æœ€æ–°çš„ç‰ˆæœ¬å¿«ç…§ä¸­ï¼‰ã€‚å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æ¥å®žçŽ°ã€‚1git commit --amend #æäº¤æš‚å­˜åŒºçš„å†…å®¹ï¼Œä½†ä¸äº§ç”Ÿæ–°çš„ç‰ˆæœ¬å¿«ç…§ï¼Œåªæ˜¯å¯¹åŽŸæœ¬çš„å¿«ç…§è¿›è¡Œä¿®æ”¹ã€‚æ¡ˆä¾‹ï¼š123456789101112131415161718192021222324252627282930313233343536373839404142434445wen@DESKTOP-BHMU9KJ MINGW64 ~/Desktop/project (master)$ git add demo.txt #å…ˆæ·»åŠ ä¿®æ”¹è¿‡çš„demo.txtåˆ°æš‚å­˜åŒºwen@DESKTOP-BHMU9KJ MINGW64 ~/Desktop/project (master)$ git statusOn branch masterChanges to be committed: (use "git reset HEAD &lt;file&gt;..." to unstage) modified: demo.txtwen@DESKTOP-BHMU9KJ MINGW64 ~/Desktop/project (master)$ git commit --amend #å¯¹å½“å‰æœ€æ–°çš„å¿«ç…§è¿›è¡Œä¿®æ”¹ï¼Œä½¿æš‚å­˜åŒºçš„demo.txtæ–‡ä»¶è¦†ç›–æœ€æ–°ç‰ˆæœ¬ä»“åº“å¿«ç…§ä¸­çš„demo.txtã€‚[master 319082e] commit readme.txt Date: Sat Oct 20 20:06:38 2018 +0800 2 files changed, 8 insertions(+), 1 deletion(-) create mode 100644 readme.txtwen@DESKTOP-BHMU9KJ MINGW64 ~/Desktop/project (master)$ git statusOn branch masternothing to commit, working tree cleanwen@DESKTOP-BHMU9KJ MINGW64 ~/Desktop/project (master)$ git log #å‘çŽ°æ²¡æœ‰å¦å¤–ç”Ÿæˆä¸€ä¸ªæ–°çš„ç‰ˆæœ¬ä»“åº“å¿«ç…§ã€‚commit 319082ee50a29e9f33a69d084b5f8acd17ac5b09 (HEAD -&gt; master)Author: qcmoke &lt;1667164190@qq.com&gt;Date: Sat Oct 20 20:06:38 2018 +0800 commit readme.txtcommit c3f6e587497f49870ab974ca4433a8e13467088dAuthor: qcmoke &lt;1667164190@qq.com&gt;Date: Fri Oct 19 00:11:11 2018 +0800 modify demo.txtcommit 0e22aafab1b3951a989105af18d3028b0bd6dc81Author: qcmoke &lt;1667164190@qq.com&gt;Date: Thu Oct 18 21:47:18 2018 +0800 commit demo.txtwen@DESKTOP-BHMU9KJ MINGW64 ~/Desktop/project (master)Â¶åä¸‰ã€åˆ é™¤å„åŒºçš„æ–‡ä»¶1234git rm æ–‡ä»¶å #åªåˆ é™¤å·¥ä½œåŒºå’Œæš‚å­˜åŒºçš„è¯¥æ–‡ä»¶ï¼Œgit rm . åˆ™è¡¨ç¤ºæ¸…ç©ºå·¥ä½œåŒºå’Œæš‚å­˜åŒºçš„æ–‡ä»¶è€Œä¸æ˜¯æŒ‡å®šçš„å•ä¸ªæ–‡ä»¶git rm -f æ–‡ä»¶å #å½“å·¥ä½œåŒºå’Œæš‚å­˜åŒºçš„å†…å®¹ä¸ä¸€æ ·æ—¶ï¼Œæ‰§è¡Œæ­¤å‘½ä»¤æ¥å¼ºåˆ¶åˆ é™¤å·¥ä½œåŒºå’Œæš‚å­˜åŒºçš„è¯¥æ–‡ä»¶git rm -cached æ–‡ä»¶å #åªåˆ é™¤æš‚å­˜åŒºçš„æ–‡ä»¶ï¼Œä½†ä¿ç•™å·¥ä½œåŒºçš„æ–‡ä»¶ã€‚git reset--hard HEAD~ #å¦‚æžœè¦åˆ é™¤æ–‡ä»¶åŒæ—¶è¦æ¸…é™¤è®°å½•ï¼Œå¯ä»¥é‡‡å–å›žæ»šçš„æ–¹æ³•æ¡ˆä¾‹ï¼š12345678910111213141516171819202122232425wen@DESKTOP-BHMU9KJ MINGW64 ~/Desktop/project (master)$ lsdemo.txt readme.txtwen@DESKTOP-BHMU9KJ MINGW64 ~/Desktop/project (master)$ git rm demo.txt #åˆ é™¤å·¥ä½œåŒºå’Œæš‚å­˜åŒºçš„demo.txtrm 'demo.txt'wen@DESKTOP-BHMU9KJ MINGW64 ~/Desktop/project (master)$ lsreadme.txtwen@DESKTOP-BHMU9KJ MINGW64 ~/Desktop/project (master)$ git status #æš‚å­˜åŒºä¸­æç¤ºå·²ç»åˆ é™¤demo.txtOn branch masterChanges to be committed: (use "git reset HEAD &lt;file&gt;..." to unstage) deleted: demo.txt wen@DESKTOP-BHMU9KJ MINGW64 ~/Desktop/project (master)$ git commit -m "deleted demo.txt" #æäº¤æœ¬æ¬¡ä¿®æ”¹[master 65ca766] deleted demo.txt 1 file changed, 7 deletions(-) delete mode 100644 demo.txtÂ¶åå››ã€é‡å‘½åæ–‡ä»¶12git mv æ—§æ–‡ä»¶å æ–°æ–‡ä»¶å #é‡å‘½åå·¥ä½œåŒºçš„æ–‡ä»¶ï¼Œæš‚å­˜åŒºçš„æ–‡ä»¶ä¹Ÿè¢«é‡å‘½åmv æ—§æ–‡ä»¶å æ–°æ–‡ä»¶å #åªé‡å‘½åå·¥ä½œåŒºçš„æ–‡ä»¶ï¼Œæš‚å­˜åŒºçš„æ–‡ä»¶æ²¡æœ‰é‡å‘½åæ¡ˆä¾‹ï¼š123456789101112131415161718192021222324wen@DESKTOP-BHMU9KJ MINGW64 ~/Desktop/project (master)$ lsreadme.txtwen@DESKTOP-BHMU9KJ MINGW64 ~/Desktop/project (master)$ git mv readme.txt Readme.txt #å°†å·¥ä½œåŒºå’Œæš‚å­˜åŒºçš„readme.txté‡å‘½åä¸ºReadme.txtwen@DESKTOP-BHMU9KJ MINGW64 ~/Desktop/project (master)$ lsReadme.txtwen@DESKTOP-BHMU9KJ MINGW64 ~/Desktop/project (master)$ git statusOn branch masterChanges to be committed: (use "git reset HEAD &lt;file&gt;..." to unstage) renamed: readme.txt -&gt; Readme.txtwen@DESKTOP-BHMU9KJ MINGW64 ~/Desktop/project (master)$ git commit -m "renamed readme.txt -&gt; Readme.txt" #æäº¤æœ¬æ¬¡ä¿®æ”¹[master 330b8d7] renamed readme.txt -&gt; Readme.txt 1 file changed, 0 insertions(+), 0 deletions(-) rename readme.txt =&gt; Readme.txt (100%)Â¶åäº”ã€åˆ†æ”¯ç®¡ç†Â¶1. æŸ¥çœ‹åˆ†æ”¯123456#æŸ¥çœ‹æœ¬åœ°åˆ†æ”¯ï¼ˆè¿™ä¸ªå‘½ä»¤ä¼šåˆ—å‡ºå½“å‰æ‰€æœ‰æœ¬åœ°åˆ†æ”¯ï¼Œå…¶ä¸­å‰é¢å¸¦æœ‰ * å·çš„è¡¨ç¤ºå½“å‰æ‰€åœ¨çš„åˆ†æ”¯ã€‚ï¼‰git branch#æŸ¥çœ‹è¿œç¨‹åˆ†æ”¯git branch -r#æŸ¥çœ‹æœ¬åœ°å’Œè¿œç¨‹åˆ†æ”¯git branch -aÂ¶2. åˆ›å»ºåˆ†æ”¯åˆå§‹åŒ–gitä»“åº“æ—¶ï¼ŒHEADæŒ‡é’ˆé»˜è®¤æŒ‡å‘masteråˆ†æ”¯ã€‚å¦‚æžœéœ€è¦å…¶ä»–åˆ†æ”¯åˆ™éœ€è¦åˆ›å»ºå’Œåˆ‡æ¢ã€‚ç”¨ä¸‹é¢å‘½ä»¤æ¥å®žçŽ°æ­¤éœ€æ±‚ï¼š12345#åˆ›å»ºåˆ†æ”¯git branch &lt;name&gt;#ç¤ºä¾‹ï¼šgit branch dev #åˆ›å»ºdevåˆ†æ”¯Â¶3. åˆ‡æ¢åˆ†æ”¯12345678#åˆ‡æ¢åˆ†æ”¯ï¼ˆå°†å½“å‰åˆ†æ”¯åˆ‡æ¢åˆ°å¦ä¸€ä¸ªåˆ†æ”¯ï¼Œå¹¶æ›´æ–°å·¥ä½œç›®å½•ä¸­çš„æ–‡ä»¶å†…å®¹ï¼‰git checkout &lt;name&gt;#ç¤ºä¾‹1ï¼šgit branch dev #åˆ›å»ºdevåˆ†æ”¯git checkout dev #åˆ‡æ¢åˆ°devåˆ†æ”¯#ç¤ºä¾‹2ï¼šgit checkout -b dev #åˆ›å»ºdevåˆ†æ”¯å¹¶åˆ‡æ¢åˆ°devåˆ†æ”¯éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œåœ¨è¿›è¡Œåˆ†æ”¯åˆ‡æ¢æ—¶ï¼Œå¿…é¡»ä¿è¯å½“å‰çš„å·¥ä½œç›®å½•å’Œæš‚å­˜åŒºæ˜¯å¹²å‡€çš„ï¼ˆæ²¡æœ‰æœªæäº¤çš„å˜æ›´ï¼‰ï¼Œå¦åˆ™åˆ‡æ¢å¯èƒ½ä¼šå¤±è´¥ã€‚å¦‚æžœæƒ³è¦ä¿å­˜å½“å‰åˆ†æ”¯çš„ä¿®æ”¹ï¼Œå¯ä»¥å…ˆæ‰§è¡Œ git add å’Œ git commit å‘½ä»¤å°†ä¿®æ”¹æäº¤åˆ°å½“å‰åˆ†æ”¯ï¼Œç„¶åŽå†æ‰§è¡Œåˆ‡æ¢åˆ†æ”¯çš„æ“ä½œã€‚å½“æˆ‘ä»¬åˆ›å»ºæ–°çš„åˆ†æ”¯å¹¶ï¼ˆå¦‚ï¼šdevï¼‰è¿›è¡Œåˆ†æ”¯åˆ‡æ¢æ—¶ï¼Œgitä¼šæ–°å»ºäº†ä¸€ä¸ªæŒ‡é’ˆå«devï¼Œå…¶æŒ‡å‘masterç›¸åŒçš„ç‰ˆæœ¬ä»“åº“å¿«ç…§ï¼Œå½“åˆ‡æ¢åˆ°devåˆ†æ”¯æ—¶ï¼Œå°±ä¼šæŠŠHEADæŒ‡å‘devï¼Œå°±è¡¨ç¤ºå½“å‰åˆ†æ”¯åœ¨devä¸Šã€‚ä»ŽçŽ°åœ¨å¼€å§‹ï¼Œå¯¹å·¥ä½œåŒºçš„ä¿®æ”¹å’Œæäº¤å°±æ˜¯é’ˆå¯¹devåˆ†æ”¯äº†ï¼Œæ¯”å¦‚æ–°æäº¤ä¸€æ¬¡åŽï¼ŒdevæŒ‡é’ˆå¾€å‰ç§»åŠ¨ä¸€æ­¥ï¼Œè€ŒmasteræŒ‡é’ˆä¸å˜ã€‚å‡å¦‚æˆ‘ä»¬åœ¨devä¸Šçš„å·¥ä½œå®Œæˆäº†ï¼Œå°±å¯ä»¥æŠŠdevåˆå¹¶åˆ°masterä¸Šã€‚æœ€ç®€å•çš„æ–¹æ³•ï¼Œå°±æ˜¯ç›´æŽ¥æŠŠmasteræŒ‡å‘devçš„å½“å‰æäº¤ï¼Œå°±å®Œæˆäº†åˆå¹¶ï¼šåˆå¹¶å®Œåˆ†æ”¯åŽï¼Œç”šè‡³å¯ä»¥åˆ é™¤devåˆ†æ”¯ã€‚åˆ é™¤devåˆ†æ”¯å°±æ˜¯æŠŠdevæŒ‡é’ˆç»™åˆ æŽ‰ï¼šÂ¶4. åˆå¹¶åˆ†æ”¯Â¶ç®€å•ä½¿ç”¨12#åˆå¹¶æŸåˆ†æ”¯åˆ°å½“å‰åˆ†æ”¯git merge &lt;name&gt;ç¤ºä¾‹ï¼šåˆå¹¶devåˆ†æ”¯åˆ°masteråˆ†æ”¯ã€‚1234#å…ˆåˆ‡æ¢åˆ°masteråˆ†æ”¯ï¼ˆHEADæŒ‡é’ˆæŒ‡å‘masterï¼‰ git checkout master#åˆå¹¶devåˆ°å½“å‰åˆ†æ”¯ï¼ˆå³masteråˆ†æ”¯ï¼‰git merge devå¯¹äºŽä»¥ä¸Šæ¡ˆä¾‹çš„åˆå¹¶åŽŸç†æ˜¯ï¼šHEADæŒ‡å‘çš„masteræŒ‡é’ˆç§»åŠ¨åˆ°äº†devæŒ‡é’ˆæ‰€æŒ‡çš„èŠ‚ç‚¹å³å®Œæˆäº†åˆå¹¶ã€‚Â¶åˆå¹¶å†²çªå¤šä¸ªå¼€å‘è€…å¯¹åŒä¸€ç‰ˆæœ¬çš„åŒä¸€ä¸ªæ–‡ä»¶è¿›è¡Œä¿®æ”¹å¹¶æäº¤ï¼Œå½“åˆå¹¶ä¸¤ä¸ªå¼€å‘è€…çš„æäº¤çš„åˆ†æ”¯æ—¶ä¼šå‡ºçŽ°åˆå¹¶å†²çªé—®é¢˜ã€‚ä¸‹é¢æ˜¯åˆå¹¶å†²çªçš„ä¸€ä¸ªç®€å•ç¤ºä¾‹ï¼š1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556####ï¼ˆ1ï¼‰gité¡¹ç›®åˆå§‹åŒ–æ“ä½œ #### #åˆå§‹åŒ–ä¸€ä¸ªæ–°ç›®å½•ä¸ºgitä»“åº“ git init test #è¿›å…¥gitä»“åº“ç›®å½•é‡Œï¼ˆåˆå§‹åŒ–çš„gitä»“åº“é»˜è®¤åœ¨masteråˆ†æ”¯ï¼‰ cd test/ #åˆ›å»ºä¸€ä¸ªæµ‹è¯•æ–‡ä»¶å¹¶è¾“å…¥å†…å®¹ echo "init" &gt; test.txt #æäº¤æµ‹è¯•æ–‡ä»¶åˆ°é»˜è®¤çš„masteråˆ†æ”¯ git add . &amp;&amp; git commit -m "init" ####ï¼ˆ2ï¼‰äº§ç”Ÿå†²çªæ“ä½œ #### #æ–°å»ºdevåˆ†æ”¯ git branch dev #åˆ‡æ¢åˆ°devåˆ†æ”¯ git checkout dev #ä¿®æ”¹æµ‹è¯•æ–‡ä»¶å†…å®¹ echo "dev" &gt;&gt; test.txt #æäº¤æµ‹è¯•æ–‡ä»¶åˆ°devåˆ†æ”¯ git add . &amp;&amp; git commit -m "modify by dev" #åˆ‡æ¢å›žå’Œmasteråˆ†æ”¯ git checkout master #ä¿®æ”¹æµ‹è¯•æ–‡ä»¶å†…å®¹ echo "master" &gt;&gt; test.txt #æäº¤æµ‹è¯•æ–‡ä»¶åˆ°masteråˆ†æ”¯ git add . &amp;&amp; git commit -m "modify by master"####ï¼ˆ3ï¼‰åˆå¹¶åˆ†æ”¯å¹¶è§£å†³å†²çªæ“ä½œ #### ##æ­¤æ—¶devåˆ†æ”¯å’Œmasteråˆ†æ”¯çš„ç‰ˆæœ¬ä¸€æ ·ï¼Œä½†æ˜¯æµ‹è¯•æ–‡ä»¶å†…å®¹ä¸ä¸€æ · #å¯ä»¥åœ¨masteråˆ†æ”¯ä¸Šåˆå¹¶devåˆ†æ”¯è¿‡æ¥ï¼Œæ“ä½œå¦‚ä¸‹ï¼š git merge dev #æ­¤æ—¶çš„æµ‹è¯•æ–‡ä»¶å†…å®¹å¦‚ä¸‹ï¼š $ cat test.txt init &lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD master ======= dev &gt;&gt;&gt;&gt;&gt;&gt;&gt; dev #ç¼–è¾‘å­˜åœ¨å†…å®¹å†²çªçš„æµ‹è¯•æ–‡ä»¶å¹¶è§£å†³å†²çªçš„å†…å®¹ $ vi test.txt #åˆ é™¤æŽ‰ç‰¹æ®Šç¬¦å·å¹¶ä¿®æ”¹ä¸ºéœ€è¦çš„å†…å®¹ï¼Œä¿®æ”¹åŽçš„å†…å®¹å¦‚ä¸‹ï¼š init master dev #æäº¤å·²ç»ä¿®å¤å†²çªçš„æµ‹è¯•æ–‡ä»¶åˆ°masteråˆ†æ”¯ï¼ˆå†²çªè§£å†³ï¼‰ git add . &amp;&amp; git commit -m "merge dev and modify by master" #ç”±äºŽæŸäº›åŽŸå› éœ€è¦æ”¾å¼ƒåˆå¹¶ï¼ˆå¦‚å†²çªéš¾ä»¥è§£å†³ï¼‰ï¼Œé‚£ä¹ˆå¯ä»¥æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤æ¥æ’¤é”€åˆå¹¶æ“ä½œï¼š git merge --abortÂ¶åˆ†æžï¼ˆ1ï¼‰åˆå¹¶ä¸ä¼šå†²çªæƒ…å½¢ï¼šåœ¨åŽŸåˆ†æ”¯ä¸Šçš„æŸä¸€åŽŸèŠ‚ç‚¹åˆ›å»ºç¬¬äºŒä¸ªåˆ†æ”¯ï¼Œæ­¤æ—¶åŽŸåˆ†æ”¯å’Œæ–°åˆ›å»ºçš„åˆ†æ”¯æŒ‡å‘è¿™ä¸ªåŽŸèŠ‚ç‚¹ã€‚ä»Žè¿™ä¸ªåŽŸèŠ‚ç‚¹å¾€ç¬¬äºŒä¸ªåˆ†æ”¯çš„æ–¹å‘å¼€å‘ï¼ˆä¿®æ”¹ï¼‰å¾—åˆ°æ–°çš„èŠ‚ç‚¹ï¼ˆåœ¨ç¬¬äºŒä¸ªåˆ†æ”¯ä¸Šï¼‰ï¼Œå†å°†ç¬¬äºŒä¸ªåˆ†æ”¯çš„æ–°èŠ‚ç‚¹åˆå¹¶åˆ°åŽŸèŠ‚ç‚¹ï¼ˆåœ¨åŽŸåˆ†æ”¯ä¸Šï¼‰ï¼Œè¿™ç§åˆå¹¶ä¸ä¼šå‘ç”Ÿå†²çªã€‚ç†è§£:â€œåˆå¹¶èŠ‚ç‚¹çš„å¿«ç…§â€æ¯”â€œè¢«åˆå¹¶èŠ‚ç‚¹çš„å¿«ç…§â€çš„ç‰ˆæœ¬æ–°ï¼Œåˆå¹¶ä¸ä¼šå†²çªã€‚æƒ…å†µå¦‚å›¾ï¼šï¼ˆ2ï¼‰åˆå¹¶ä¼šå†²çªæƒ…å½¢ï¼šåŒä¸€èŠ‚ç‚¹åˆ†å‰å¼€å‘åŽåˆå¹¶åˆ°å…¶ä¸­ä¸€ä¸ªåˆ†æ”¯ä¸Šä¼šåˆå¹¶å†²çªã€‚åœ¨åŽŸåˆ†æ”¯ä¸Šçš„æŸä¸€åŽŸèŠ‚ç‚¹åˆ›å»ºç¬¬äºŒä¸ªåˆ†æ”¯ï¼Œæ­¤æ—¶åŽŸåˆ†æ”¯å’Œæ–°åˆ›å»ºçš„åˆ†æ”¯æŒ‡å‘è¿™ä¸ªåŽŸèŠ‚ç‚¹ï¼Œåœ¨åŽŸåˆ†æ”¯çš„è¿™ä¸ªåŽŸèŠ‚ç‚¹ä¸Šå¼€å§‹ä¿®æ”¹å¾—åˆ°æ–°çš„èŠ‚ç‚¹ã€‚åœ¨ç¬¬äºŒä¸ªåˆ†æ”¯çš„è¿™ä¸ªåŽŸèŠ‚ç‚¹ä¸Šä¿®æ”¹å¾—åˆ°å¦ä¸€ä¸ªæ–°çš„èŠ‚ç‚¹ï¼Œæ­¤æ—¶åˆå¹¶ä¸€ä¸ªåˆ†æ”¯åˆ°å¦ä¸€ä¸ªåˆ†æ”¯éƒ½ä¼šå†²çªã€‚ç†è§£ï¼šâ€œåˆå¹¶èŠ‚ç‚¹çš„å¿«ç…§â€å’Œâ€œè¢«åˆå¹¶èŠ‚ç‚¹çš„å¿«ç…§â€çš„ç‰ˆæœ¬ä¸€æ ·æ–°ï¼Œåˆå¹¶ä¼šå†²çªã€‚Â¶5. åˆ é™¤åˆ†æ”¯12345#åˆ é™¤åˆ†æ”¯git branch -d &lt;name&gt; #ç¤ºä¾‹ï¼šgit branch -d dev #åˆ é™¤devåˆ†æ”¯Â¶åå…­ã€gitè¿œç¨‹ç®¡ç†Â¶1. gitæœåŠ¡ç«¯è®¿é—®é…ç½®Â¶1ï¼‰ç®€è¦æ¦‚è¿°gitå®¢æˆ·ç«¯è®¿é—®gitæœåŠ¡ç«¯çš„ä»“åº“ï¼Œéœ€è¦é€šè¿‡è¿œç¨‹ä»“åº“çš„åœ°å€è¿›è¡Œè®¿é—®ï¼Œè¿œç¨‹ä»“åº“çš„åœ°å€é€šå¸¸ä¸ºHTTPåè®®åœ°å€æˆ–è€…SSHåè®®åœ°å€ã€‚ï¼ˆ1ï¼‰HTTPåè®®åœ°å€åœ°å€æ ¼å¼ï¼šhttp://host:port/xxx.git æˆ– https://host:port/xxx.gité‰´æƒä¸ŽåŠ å¯†æ–¹å¼ï¼šé€šè¿‡ç”¨æˆ·åå’Œå¯†ç æˆ–è®¿é—®ä»¤ç‰Œç­‰è¿›è¡Œèº«ä»½éªŒè¯ï¼ŒåŠ å¯†é€šä¿¡åˆ™é€šè¿‡TLS/SSLæ¥å®žçŽ°ã€‚ç§˜é’¥å­˜å‚¨ï¼šé¦–æ¬¡é¦–æ¬¡è®¿é—®è¿œç¨‹åº“æ—¶éœ€è¾“å…¥äº†ç”¨æˆ·åå’Œå¯†ç è¿›è¡Œèº«ä»½éªŒè¯ï¼Œä¹‹åŽä¼šä¿å­˜åœ¨ç³»ç»Ÿçš„å‡­æ®å­˜å‚¨åŒºåŸŸä¸­ï¼Œå„ä¸ªå¹³å°çš„å‡­æ®å­˜å‚¨æœºåˆ¶å¦‚ä¸‹ï¼šWindowsï¼šWindowså‡­æ®ç®¡ç†å™¨ ï¼ˆå¯åœ¨ æŽ§åˆ¶é¢æ¿&gt;ç”¨æˆ·å¸æˆ·&gt;å‡­æ®ç®¡ç†å™¨&gt;Windows å‡­æ®ä¸­æŸ¥çœ‹ï¼Œæˆ–é€šè¿‡cmdå‘½ä»¤ cmdkey /list æŸ¥çœ‹ï¼‰macOS: é’¥åŒ™ä¸²ï¼ˆKeychain Accessï¼‰Linuxï¼šGNOME Keyringæˆ–KWalletï¼ˆ2ï¼‰SSHåè®®åœ°å€ï¼šåœ°å€æ ¼å¼ï¼šssh://git@host:port/xxx.git æˆ– git@host:xxx.git ï¼ˆå¦‚æžœSSHåè®®åœ°å€ä½¿ç”¨é»˜è®¤çš„22ç«¯å£åˆ™å¯å¿½ç•¥ssh://å’Œç«¯å£è¿›è¡Œç®€å†™ï¼‰é‰´æƒä¸ŽåŠ å¯†æ–¹å¼ï¼šä½¿ç”¨SSHç§˜é’¥å¯¹è¿›è¡Œèº«ä»½éªŒè¯å’ŒåŠ å¯†é€šä¿¡ã€‚ç§˜é’¥å­˜å‚¨ï¼šå®¢æˆ·ç«¯SSHç§˜é’¥å¯¹å­˜å‚¨åœ¨~/.sshç›®å½•ï¼Œç›®å½•ä¸‹æœ‰ç§é’¥æ–‡ä»¶ï¼ˆå³id_rsaï¼‰å’Œå…¬é’¥æ–‡ä»¶ï¼ˆå³id_rsa.pubï¼Œå«å…¬é’¥å¯†æ–‡ï¼Œå³æ‰€è°“çš„SSHç§˜é’¥ï¼‰ï¼›æœåŠ¡ç«¯SSHç§˜é’¥å¯¹åŒæ ·å­˜å‚¨åœ¨~/.sshç›®å½•ä¸‹ï¼Œå¦å¤–æœåŠ¡ç«¯è¿˜æœ‰ä¸ªé‡è¦çš„æŽˆæƒæ–‡ä»¶ï¼ˆå³ authorized_keysï¼‰ï¼Œå…¶å­˜æ”¾æœ‰å®¢æˆ·ç«¯çš„å…¬é’¥å¯†æ–‡ï¼Œç”¨äºŽå®¢æˆ·ç«¯è®¿é—®çš„èº«ä»½éªŒè¯ã€‚èº«ä»½éªŒè¯è¿‡ç¨‹ï¼šå½“ç”¨æˆ·å°è¯•ä¸ŽSSHæœåŠ¡å™¨å»ºç«‹è¿žæŽ¥æ—¶ï¼ŒæœåŠ¡å™¨ä¼šè¦æ±‚å®¢æˆ·ç«¯å‘é€å…¶å…¬é’¥ã€‚å¦‚æžœè¯¥å…¬é’¥å­˜åœ¨äºŽæœåŠ¡å™¨ä¸Šçš„authorized_keysæ–‡ä»¶ä¸­ï¼Œåˆ™æœåŠ¡å™¨å°†å…è®¸å®¢æˆ·ç«¯è®¿é—®å¹¶ä½¿ç”¨è¯¥SSHå¸æˆ·ã€‚Â¶2ï¼‰SSHç§˜é’¥é…ç½®Â¶ï¼ˆ1ï¼‰å®¢æˆ·ç«¯é…ç½®123456#ç”Ÿæˆsshå¯†é’¥å¯¹ssh-keygen -t rsa -C "youremail@example.com"#ç„¶åŽè¿žç»­3æ¬¡å›žè½¦ï¼Œæœ€ç»ˆä¼š~/.sshç›®å½•ä¸‹ç”Ÿæˆç§é’¥æ–‡ä»¶ï¼ˆid_rsaï¼‰å’Œå…¬é’¥æ–‡ä»¶ï¼ˆid_rsa.pubï¼‰#èŽ·å–å®¢æˆ·ç«¯çš„sshå…¬é’¥å¯†æ–‡ï¼ˆåŽç»­æœåŠ¡ç«¯é…ç½®ç”¨åˆ°ï¼‰cat ~/.ssh/id_rsa.pubå…³äºŽssh-keygenå‘½ä»¤è¡Œå·¥å…·å‚æ•°çš„è¯´æ˜Žï¼š-t: æŒ‡å®šè¦ç”Ÿæˆçš„å¯†é’¥ç±»åž‹ã€‚æ”¯æŒçš„å¯†é’¥ç±»åž‹æœ‰ï¼šrsaã€dsaã€ecdsaã€ed25519ç­‰-C: å¯é€‰ï¼Œåœ¨å¯†é’¥æœ«å°¾æ·»åŠ æ³¨é‡Šä¿¡æ¯ä»¥æ ‡è¯†è¯¥å¯†é’¥çš„ç”¨é€”ï¼ˆä¸€èˆ¬ä¸ºç”¨æˆ·çš„é‚®ç®±åœ°å€ï¼‰ï¼Œä»…ä»…ä¸ºæ³¨é‡Šï¼Œæœ‰æ— éƒ½ä¸ä¼šå½±å“sshåŠ è§£å¯†å’Œèº«ä»½éªŒè¯ã€‚-b: æŒ‡å®šå¯†é’¥é•¿åº¦ï¼ˆä»¥æ¯”ç‰¹ä¸ºå•ä½ï¼‰ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼ŒRSAå¯†é’¥çš„é•¿åº¦ä¸º2048ä½ï¼ŒDSAå¯†é’¥çš„é•¿åº¦ä¸º1024ä½ï¼ŒECDSAå¯†é’¥çš„é•¿åº¦ä¸º256ä½ï¼ŒEd25519å¯†é’¥çš„é•¿åº¦ä¸º256ä½ã€‚-f: æŒ‡å®šç”Ÿæˆå¯†é’¥çš„æ–‡ä»¶åå’Œè·¯å¾„ã€‚å¦‚æžœä¸æŒ‡å®šè¯¥å‚æ•°ï¼Œåˆ™é»˜è®¤ç”Ÿæˆid_rsaå’Œid_rsa.pubä¸¤ä¸ªå¯†é’¥æ–‡ä»¶ï¼Œå¹¶ä¿å­˜åœ¨~/.sshç›®å½•ä¸‹ã€‚-N: æŒ‡å®šæ–°å¯†é’¥çš„å¯†ç çŸ­è¯­ï¼ˆä¹Ÿç§°ä¸ºå£ä»¤ï¼‰ã€‚-i: å¯¼å…¥å·²æœ‰çš„å¯†é’¥æ–‡ä»¶ã€‚-e: å°†OpenSSHæ ¼å¼çš„å¯†é’¥è½¬æ¢ä¸ºå…¶ä»–æ ¼å¼ï¼ˆå¦‚PKCS#8æ ¼å¼ï¼‰ã€‚-y: æå–å…¬é’¥éƒ¨åˆ†ï¼Œè¾“å‡ºåˆ°æ ‡å‡†è¾“å‡ºã€‚-R: ä»Žknown_hostsæ–‡ä»¶ä¸­åˆ é™¤æŒ‡å®šä¸»æœºçš„æ¡ç›®ã€‚Â¶ï¼ˆ2ï¼‰æœåŠ¡ç«¯é…ç½®12345#æ·»åŠ å®¢æˆ·ç«¯çš„sshå…¬é’¥å¯†æ–‡åˆ°æœåŠ¡ç«¯æŽˆæƒæ–‡ä»¶ä¸­ï¼Œç”¨äºŽæœåŠ¡ç«¯çš„èº«ä»½éªŒè¯echo "å®¢æˆ·ç«¯çš„sshå…¬é’¥å¯†æ–‡" &gt;&gt; ~/.ssh/authorized_keys#ä¾‹å¦‚ï¼šecho "ssh-rsa AAAAB311/c/250YucGiB/mbZU= youremail@example.com" &gt;&gt; ~/.ssh/authorized_keysæ­¤å¤–è¿˜å¯ä»¥åœ¨å®¢æˆ·ç«¯é€šè¿‡å‘½ä»¤ï¼šssh-copy-id -p port user@remote å°†å…¬é’¥å¯†æ–‡è‡ªåŠ¨ä¸Šä¼ ä¿å­˜åˆ°æœåŠ¡ç«¯æŽˆæƒæ–‡ä»¶authorized_keysä¸­ï¼Œä¸è¿‡æ‰§è¡Œè¯¥å‘½ä»¤éœ€è¦è¾“å…¥ â€œuserâ€ ç”¨æˆ·çš„sshå¯†ç ã€‚æœåŠ¡ç«¯æ·»åŠ Â¶ï¼ˆ3ï¼‰sshè®¿é—®èº«ä»½éªŒè¯æµ‹è¯•å¯åœ¨å®¢æˆ·ç«¯æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤æ¥æµ‹è¯•è®¿é—®æœåŠ¡ç«¯æ—¶èº«ä»½éªŒè¯æ˜¯å¦é€šè¿‡ï¼š1234ssh -p port -T git@host#ä¾‹å¦‚ï¼šssh -T git@github.comssh -p 2222 -T git@github.comÂ¶3ï¼‰å®¢æˆ·ç«¯å¤šSSHç§˜é’¥é…ç½®åœ¨é€šè¿‡SSHåè®®è®¿é—®GitæœåŠ¡ç«¯æ—¶ï¼ŒGitå®¢æˆ·ç«¯æ˜¯å€ŸåŠ©SSHæ¥å®žçŽ°è®¿é—®çš„ã€‚åœ¨é»˜è®¤æƒ…å†µä¸‹SSHä¼šä½¿ç”¨~/.ssh/id_rsaä¸ºé»˜è®¤ç§é’¥æ–‡ä»¶ï¼Œå¹¶ä¼šè‡ªåŠ¨ä½¿ç”¨è¯¥å¯†é’¥è¿›è¡Œèº«ä»½éªŒè¯ã€‚ä½†å¦‚æžœä¸€ä¸ªå®¢æˆ·ç«¯éœ€è¦è®¿é—®å¤šä¸ªæœåŠ¡ç«¯ï¼Œå¹¶ä¸”è®¿é—®ä¸åŒæœåŠ¡ç«¯å¯¹åº”çš„SSHç§˜é’¥ä¹Ÿä¸åŒï¼Œé‚£ä¹ˆå®¢æˆ·ç«¯å°±éœ€è¦ç”Ÿæˆä¸åŒçš„SSHç§˜é’¥å¯¹æ–‡ä»¶ï¼ˆå¦‚ï¼šid_rsa_gitlibã€id_rsa_gogsï¼‰ï¼Œæ“ä½œå¦‚ä¸‹ï¼š1234#ç”Ÿæˆæ–°çš„SSHç§˜é’¥å¯¹ï¼Œå¹¶æŒ‡å®šç§˜é’¥å¯¹çš„æ–‡ä»¶è·¯å¾„ssh-keygen -t rsa -C "youremail@example.com" -f ~/.ssh/id_rsa_example #ä¼šåœ¨~/.sshç›®å½•ä¸‹ç”Ÿæˆç§é’¥æ–‡ä»¶id_rsa_exampleå’Œå…¬é’¥æ–‡ä»¶id_rsa_example.pub#å°†æ–°çš„SSHå…¬é’¥è®¾ç½®åˆ°æœåŠ¡ç«¯ä¸­cat ~/.ssh/id_rsa_example.pubå¯¹äºŽå®¢æˆ·ç«¯ä½¿ç”¨å¤šä¸ªä¸åŒçš„SSHç§˜é’¥å¯¹æ–‡ä»¶ï¼ŒSSHæ— æ³•è‡ªåŠ¨è¯†åˆ«åˆ°è¿™äº›ä¸åŒæ–‡ä»¶è·¯å¾„çš„ç§é’¥æ–‡ä»¶ï¼Œæ•…æ— æ³•è‡ªåŠ¨ä½¿ç”¨è¿™äº›éžé»˜è®¤çš„ç§é’¥æ–‡ä»¶è¿›è¡Œèº«ä»½éªŒè¯ï¼Œä¹Ÿå°±æ˜¯è¯´æ— è®ºè®¿é—®å“ªä¸ªæœåŠ¡å™¨éƒ½ä¼šä½¿ç”¨é»˜è®¤çš„ç§é’¥æ–‡ä»¶id_rsaè¿›è¡Œèº«ä»½éªŒè¯ï¼Œæ•…è€Œå¯¹äºŽéžé»˜è®¤ç§˜é’¥é…ç½®çš„æœåŠ¡å™¨ä¼šéªŒè¯å¤±è´¥ã€‚è§£å†³è¿™ä¸ªé—®é¢˜æœ‰ä»¥ä¸‹ä¸¤ç§æ–¹å¼ï¼šï¼ˆ1ï¼‰ä½¿ç”¨æ–°çš„sshä»£ç†æ¥æ·»åŠ è‡ªå®šä¹‰çš„ç§é’¥12345678#å¯åŠ¨ä¸€ä¸ªæ–°çš„sshä»£ç†ssh-agent bash#æ·»åŠ è‡ªå®šä¹‰çš„ç§é’¥åˆ°sshä»£ç†ä¸­ssh-add ~/.ssh/id_rsa_example#æŸ¥çœ‹æ‰€æœ‰æ·»åŠ ç§˜é’¥åˆ—è¡¨ssh-add -l#åˆ é™¤æ‰€æœ‰æ–°å¢žçš„ç§é’¥#ssh-del -lðŸ’â€â™‚ å…³äºŽSSHä»£ç†çš„è¯´æ˜Žï¼šSSHä»£ç†ï¼ˆSSH Agentï¼‰æ˜¯ä¸€ä¸ªç¨‹åºï¼Œç”¨äºŽç®¡ç†å’Œå­˜å‚¨SSHå¯†é’¥ï¼Œå¹¶åœ¨éœ€è¦è¿›è¡ŒSSHèº«ä»½éªŒè¯æ—¶æä¾›è¿™äº›å¯†é’¥ã€‚å®ƒå…è®¸SSHå®¢æˆ·ç«¯ä¸ŽSSHå¯†é’¥åˆ†ç¦»ï¼Œå¹¶é¿å…åœ¨æ¯æ¬¡è¿žæŽ¥åˆ°SSHæœåŠ¡å™¨æ—¶éƒ½è¦è¾“å…¥å¯†ç æˆ–è€…æ‰‹åŠ¨åŠ è½½å¯†é’¥çš„ç¹çæ€§ã€‚å½“æ‚¨å°†SSHç§é’¥æ·»åŠ åˆ°ä»£ç†ä¸­åŽï¼Œä»£ç†ä¼šå°†ç§é’¥å­˜å‚¨åœ¨å†…å­˜ä¸­ï¼Œå¹¶å°†å…¶ç”¨äºŽåŽç»­çš„SSHè¿žæŽ¥èº«ä»½éªŒè¯ã€‚è¿™æ ·ï¼Œåªè¦ä»£ç†ä»ç„¶åœ¨è¿è¡Œå¹¶ä¸”SSHå¯†é’¥ä»ç„¶å­˜åœ¨äºŽä»£ç†ä¸­ï¼Œæ‚¨å°±æ— éœ€å†æ¬¡è¾“å…¥å¯†ç æˆ–åŠ è½½å¯†é’¥å³å¯è¿žæŽ¥åˆ°SSHæœåŠ¡å™¨ã€‚å¦å¤–ï¼ŒSSHä»£ç†è¿˜æä¾›äº†ä¸€ç§å®‰å…¨æ–¹å¼æ¥å­˜å‚¨å’Œç®¡ç†å¤šä¸ªSSHå¯†é’¥ã€‚é€šè¿‡ä½¿ç”¨SSHä»£ç†ï¼Œæ‚¨å¯ä»¥è½»æ¾åœ°åˆ‡æ¢ä¸åŒçš„SSHå¯†é’¥ï¼Œå¹¶æŽ§åˆ¶å“ªäº›å¯†é’¥å¯ä¾›ä½¿ç”¨ï¼Œä»¥ç¡®ä¿å®‰å…¨æ€§å’Œä¿æŠ¤ç§äººæ•°æ®ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œåœ¨ä½¿ç”¨SSHä»£ç†æ—¶ï¼Œå¦‚æžœæ‚¨å…³é—­äº†ä»£ç†æˆ–é‡æ–°å¯åŠ¨è®¡ç®—æœºï¼Œåˆ™å¿…é¡»é‡æ–°æ·»åŠ SSHå¯†é’¥æ‰èƒ½ä½¿ç”¨ã€‚æ­¤å¤–ï¼Œä¸ºäº†ç¡®ä¿å®‰å…¨æ€§ï¼Œå»ºè®®åœ¨ä½¿ç”¨å®ŒSSHå¯†é’¥åŽä»Žä»£ç†ä¸­æ¸…é™¤å®ƒä»¬ï¼Œä»¥é¿å…æ¶æ„è½¯ä»¶æ”»å‡»æˆ–å…¶ä»–å®‰å…¨æ¼æ´žã€‚ï¼ˆ2ï¼‰SSHå®¢æˆ·ç«¯çš„é…ç½®æ–‡ä»¶æ·»åŠ SSHç™»å½•é…ç½®1234567cat &gt;&gt; ~/.ssh/config &lt;&lt; 'EOF'Host *.example.com HostName git.example.com PreferredAuthentications publickey IdentityFile ~/.ssh/id_rsa_example User user1EOFé…ç½®æ–‡ä»¶å‚æ•°Host: è¯·æ±‚æœåŠ¡ç«¯æ—¶ï¼ŒæœåŠ¡ç«¯ipæˆ–åŸŸåçš„åŒ¹é…æ¨¡å¼ï¼ˆå¯å«é€šé…ç¬¦ï¼Œå¦‚ï¼š*.60.156 æˆ– *.example.comï¼‰ï¼Œå¯æ ¹æ®è¿™ä¸ªè¯†åˆ«æ¨¡å¼é…ç½®åˆ°ä¸»æœºåå’Œç§é’¥æ–‡ä»¶HostName: æœåŠ¡ç«¯çš„è®¿é—®ipæˆ–åŸŸåï¼ˆä¸èƒ½å«é€šé…ç¬¦ï¼Œå¦‚ï¼š192.168.60.156 æˆ– git.example.comï¼‰ï¼Œé»˜è®¤å€¼ä¸ºè®¿é—®æ—¶sshé“¾æŽ¥åœ°å€çš„ipæˆ–åŸŸåï¼Œå¦‚æžœä½¿ç”¨å†…ç½‘ç©¿é€ç­‰åå‘ä»£ç†æœåŠ¡å™¨åˆ™å¯ä»¥ä¿®æ”¹User: sshç”¨æˆ·å ï¼ˆé»˜è®¤å€¼ä¸ºsshé“¾æŽ¥åœ°å€é‡Œçš„ç”¨æˆ·åï¼‰IdentityFile: ç§é’¥æ–‡ä»¶è·¯å¾„Port: ç«¯å£å·ï¼ˆé»˜è®¤å€¼ä¸ºè®¿é—®æ—¶sshé“¾æŽ¥åœ°å€çš„ç«¯å£ï¼Œ å¦‚æžœä½¿ç”¨å†…ç½‘ç©¿é€ç­‰åå‘ä»£ç†æœåŠ¡å™¨åˆ™å¯ä»¥ä¿®æ”¹ï¼‰å¯¹äºŽgitå¯ä½¿ç”¨å¦‚ä¸‹æœ€ç®€å†™ï¼š1234cat &gt;&gt; ~/.ssh/config &lt;&lt; 'EOF'Host 192.168.60.156 IdentityFile ~/.ssh/id_rsa_exampleEOFÂ¶2. gitæäº¤ç”¨æˆ·ä¿¡æ¯é…ç½®è®¾ç½®gitæäº¤ä»£ç æ—¶éœ€è¦è®¾ç½®çš„ä½œè€…åå’Œç”µå­é‚®ä»¶åœ°å€ä½¿ç”¨Gitæ—¶ï¼Œå¦‚æžœæœªè®¾ç½®ç”¨æˆ·åå’Œé‚®ç®±åœ°å€ï¼Œåˆ™æ¯æ¬¡æäº¤ä»£ç æ—¶éƒ½éœ€è¦æ‰‹åŠ¨è¾“å…¥ç›¸å…³ä¿¡æ¯ï¼Œè¿™å¯èƒ½ä¼šéžå¸¸ç¹çå’Œæ˜“é”™ï¼Œæ‰€ä»¥ä¸€èˆ¬åœ¨æäº¤ä»“åº“åˆ†æ”¯æ—¶ï¼Œè¿™äº›ä¿¡æ¯éƒ½æ˜¯éœ€è¦æå‰é…ç½®çš„ã€‚æ³¨æ„æ­¤å¤„çš„æäº¤ä»£ç çš„ç”¨æˆ·åå¹¶éžsshçš„ç”¨æˆ·åï¼Œå…¶ä»…ä»…æ˜¯æ ‡è¯†æäº¤ä»£ç æ—¶çš„ä½œè€…åç§°ï¼Œå…¶å¯ä»¥æ ¹æ®éœ€è¦è¿›è¡Œä¿®æ”¹ã€‚1234567891011121314151617181920#é…ç½®å…¨å±€gitç”¨æˆ·ä¿¡æ¯ï¼ˆé…ç½®ä¿¡æ¯å­˜å‚¨åœ¨ ~/.gitconfig æ–‡ä»¶é‡Œï¼‰git config --global user.name "username"git config --global user.email "youremail@example.com"#é…ç½®å½“å‰é¡¹ç›®gitç”¨æˆ·ä¿¡æ¯ï¼ˆå¯ä¸ºæ¯gitæœ¬åœ°ä»“åº“è®¾ç½®ï¼Œé…ç½®ä¿¡æ¯å­˜å‚¨åœ¨å½“å‰é¡¹ç›®çš„ .git/config æ–‡ä»¶é‡Œ ï¼‰git config user.name "username"git config user.email "youremail@example.com" #æŸ¥çœ‹å…¨å±€gitç”¨æˆ·ä¿¡æ¯git config --global user.namegit config --global user.email#ä¹Ÿå¯ä»¥ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤èŽ·å–å…¨å±€çš„æ‰€æœ‰é…ç½®ä¿¡æ¯git config --global --list#æŸ¥çœ‹å½“å‰é¡¹ç›®gitç”¨æˆ·ä¿¡æ¯ï¼ˆé»˜è®¤ä¸ºå…¨å±€gitç”¨æˆ·ä¿¡æ¯ï¼‰git config user.namegit config user.email#ä¹Ÿå¯ä»¥ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤èŽ·å–å½“å‰é¡¹ç›®çš„æ‰€æœ‰é…ç½®ä¿¡æ¯git config --listÂ¶3. æ·»åŠ æœ¬ä»“åº“å’Œè¿œç¨‹åº“çš„å…³è”å°†æœ¬åœ°åº“ä¸Žè¿œç¨‹åº“å»ºç«‹è”ç³»ï¼Œå¹¶æŒ‡å®šè¯¥è¿œç¨‹å­˜å‚¨åº“çš„åç§°ã€‚123456git remote add è¿œç¨‹åº“åç§° è¿œç¨‹åº“åœ°å€#ä¾‹å¦‚ï¼šgit remote add origin https://host:port/xxx.git #ä½¿ç”¨HTTPåè®®åœ°å€git remote add origin ssh://git@host:port/xxx.git #ä½¿ç”¨SSHåè®®åœ°å€git remote add origin git@host:xxx.git #å¦‚æžœä½¿ç”¨sshåè®®ä½¿ç”¨é»˜è®¤çš„22ç«¯å£åˆ™å¯å¦‚æ­¤ç®€å†™Â¶4. è§£é™¤æœ¬ä»“åº“å’Œè¿œç¨‹åº“çš„å…³è”1234git remote rm è¿œç¨‹åº“åç§°#ä¾‹å¦‚ï¼šè§£é™¤æœ¬ä»“åº“å’Œåç§°ä¸ºoriginçš„è¿œç¨‹åº“çš„å…³è”git remote rm originæ³¨æ„ï¼Œæ­¤å‘½ä»¤æ˜¯è§£é™¤äº†æœ¬åœ°ä»“åº“å’Œè¿œç¨‹ä»“åº“çš„å…³è”ï¼Œå¹¶ä¸æ˜¯åˆ é™¤äº†è¿œç¨‹ä»“åº“çš„æ•°æ®ã€‚Â¶5. ä¿®æ”¹æœ¬åœ°åº“å…³è”çš„è¿œç¨‹åº“ä¿¡æ¯12345#ä¿®æ”¹æœ¬åœ°åº“æ‰€å¯¹åº”çš„æ–°è¿œç¨‹åº“åœ°å€ã€‚git remote set-url è¿œç¨‹åº“åç§° è¿œç¨‹åº“åœ°å€#ä¾‹å¦‚git remote set-url origin https://host:port/xxx.gitÂ¶6. æŸ¥çœ‹æœ¬åœ°åº“å…³è”çš„è¿œç¨‹åº“ä¿¡æ¯1234#åˆ—å‡ºæ‰€æœ‰è¿œç¨‹åº“åç§°git remote#åˆ—å‡ºæ‰€æœ‰è¿œç¨‹åº“åç§°å’Œåœ°å€git remote -vÂ¶7.è®¾ç½®æœ¬åœ°åˆ†æ”¯çš„ä¸Šæ¸¸åˆ†æ”¯å³è®¾ç½®æœ¬åœ°åº“çš„æŒ‡å®šåˆ†æ”¯å…³è”åˆ°è¿œç¨‹åº“çš„æŒ‡å®šåˆ†æ”¯ã€‚1234567#origin/remote_branchæ˜¯è¿œç¨‹åˆ†æ”¯çš„åç§°#local_branchæ˜¯æœ¬åœ°åˆ†æ”¯çš„åç§°ï¼ˆå¦‚æžœä¸å†™åˆ™ä¸ºæœ¬åœ°å½“å‰åˆ†æ”¯çš„åç§°ï¼Œå¦‚æžœæœ¬åœ°æ²¡æœ‰åˆ†æ”¯åˆ™ä¼šæŠ¥é”™ï¼Œæœ¬åœ°åˆå§‹åŒ–ä»“åº“æ—¶ä¼šè‡ªåŠ¨åˆ›å»ºé»˜è®¤åˆ†æ”¯masterï¼‰git branch --set-upstream-to=origin/remote_branch local_branch#ä¾‹å¦‚git branch --set-upstream-to=origin/master mastergit branch --set-upstream-to=origin/masterÂ¶8. æŽ¨é€æœ¬åœ°åˆ†æ”¯åˆ°ä¸Šæ¸¸åˆ†æ”¯å³æŽ¨é€æœ¬åœ°åº“å½“å‰åˆ†æ”¯åˆ°è¿œç¨‹åº“çš„æŒ‡å®šåˆ†æ”¯ã€‚1234git push è¿œç¨‹åº“åç§° è¿œç¨‹åº“åˆ†æ”¯#ä¾‹å¦‚git push origin master12345#å¦‚æžœå·²ç»è®¾ç½®äº†ä¸Šæ¸¸åˆ†æ”¯ï¼Œåˆ™å¯ä»¥ä¸ç”¨åŠ è¿œç¨‹åº“çš„åç§°å’Œåœ°å€ï¼Œå¦‚ä¸‹ï¼šgit branch --set-upstream-to=origin/master mastergit push#æˆ–è€…å¯ä»¥åˆå¹¶å†™ä¸ºå¦‚ä¸‹ï¼šgit push --set-upstream origin master #å¯ç®€å†™ä¸ºï¼šgit push -u origin masterÂ¶9. å…‹éš†è¿œç¨‹åº“ä¸ºæœ¬åœ°åº“1234git clone è¿œç¨‹åº“åœ°å€ [æœ¬åœ°åº“åç§°]#ä¾‹å¦‚ï¼šgit clone git@github.com:qcmoke/test.git proé€šè¿‡git cloneå…‹éš†è¿œç¨‹ä»“åº“åˆ°æœ¬åœ°ï¼Œé‚£ä¹ˆgitå°†è‡ªåŠ¨åˆå§‹åŒ–æœ¬åœ°ä»“åº“ï¼Œå¹¶è®¾ç½®æœ¬åœ°åˆ†æ”¯å’Œå¯¹åº”ä¸Šæ¸¸åˆ†æ”¯ï¼Œä¸Šæ¸¸åˆ†æ”¯ä¸ºè¿œç¨‹ä»“åº“çš„é»˜è®¤åˆ†æ”¯ï¼ˆä¸€èˆ¬æ˜¯masteråˆ†æ”¯ï¼‰ã€‚Â¶10. æ‹‰å–è¿œç¨‹åº“åˆ°æœ¬åœ°åº“12#æ‹‰å–è¿œç¨‹åº“åˆ°æœ¬åœ°åº“ï¼ˆå–å›žè¿œç¨‹åº“æŸä¸ªåˆ†æ”¯çš„æ›´æ–°ï¼Œå†ä¸Žæœ¬åœ°çš„å½“å‰åˆ†æ”¯è¿›è¡Œåˆå¹¶ï¼‰git pullðŸ’â€â™‚ è¯´æ˜Žï¼šgit pull = git fetch è¿œç¨‹åº“åœ°å€ + git merge è¿œç¨‹åº“åç§°/è¿œç¨‹åº“åˆ†æ”¯git fetchåªæ˜¯ä¸‹è½½è¿œç¨‹åº“çš„åˆ†æ”¯å†…å®¹åˆ°æœ¬åœ°ï¼Œä½†æ²¡æœ‰è¦†ç›–æŽ‰æœ¬åœ°åº“çš„åˆ†æ”¯ï¼Œéœ€è¦ç”¨git mergeæ¥åˆå¹¶è¿œç¨‹åº“çš„åˆ†æ”¯åˆ°æœ¬åœ°åº“çš„å½“å‰åˆ†æ”¯ã€‚æ¯”å¦‚git pullå‘½ä»¤é»˜è®¤ä¼šè¢«è§£æžæˆå¦‚ä¸‹ï¼š12&gt;git fetch origin master #ä»Žoriginè¿œç¨‹åº“çš„masteråˆ†æ”¯ä¸‹è½½æ›´æ–°å†…å®¹åˆ°æœ¬åœ° &gt;git merge FETCH_HEAD #å°†ä¸‹è½½å¥½çš„è¿œç¨‹åº“åˆ†æ”¯åˆå¹¶åˆ°å½“å‰åˆ†æ”¯ä¸­ðŸ’â€â™‚ æ³¨æ„ï¼šä½¿ç”¨å‘½ä»¤git pullæ‹‰å–åˆ†æ”¯å‰ï¼Œä¸€èˆ¬æ˜¯å·²ç»é€šè¿‡ git clone æ¥å…‹éš†èŽ·å–è¿œç¨‹åº“çš„ä»£ç äº†ã€‚å¦‚æžœå…ˆå‰æœªä½¿ç”¨ git clone çš„è¯ï¼Œéœ€è¦å…ˆæ·»åŠ è¿œç¨‹ä»“åº“ï¼Œå¹¶è®¾ç½®æœ¬åœ°åˆ†æ”¯çš„ä¸Šæ¸¸åˆ†æ”¯åŽæ‰èƒ½æ­£å¸¸ä½¿ç”¨ git pullå‘½ä»¤æ¥æ‹‰å–åˆ†æ”¯ ã€‚æ“ä½œå¦‚ä¸‹ï¼š12345&gt;git remote add origin https://host:port/xxx.git&gt;git branch --set-upstream-to=origin/master master&gt;git pull&gt;#è®¾ç½®æœ¬åœ°åˆ†æ”¯çš„ä¸Šæ¸¸åˆ†æ”¯å’Œæ‹‰å–ä¸¤æ¡å‘½ä»¤å¯åˆå¹¶å†™ä¸ºå¦‚ä¸‹ï¼ˆæ³¨æ„åœ¨git pullä¸­çš„--set-upstreamä¸èƒ½ç®€å†™ä¸º-uï¼‰ï¼š&gt;git pull --set-upstream origin masterÂ¶11. è§£å†³æŽ¨é€æœ¬åœ°åº“åˆ°è¿œç¨‹åº“å†²çªçš„é—®é¢˜å½“æœ‰ä¸¤ä¸ªæœ¬åœ°åº“éƒ½è¿žæŽ¥ç€åŒä¸€ä¸ªè¿œç¨‹åº“ï¼Œå½“æœ‰ä¸€ä¸ªä¿®æ”¹äº†æ–‡ä»¶å¹¶ä¸”æŽ¨é€åˆ°äº†è¿œç¨‹åº“åŽã€‚å¦å¤–æœ‰ä¸ªä»“åº“ä¹Ÿä¿®æ”¹åˆ°äº†åŒæ ·çš„æ–‡ä»¶ã€‚å¦‚æžœå†…å®¹ä¸¤ä¸ªæŽ¨é€çš„ä¿®æ”¹ä¸ä¸€è‡´ï¼Œé‚£ä¹ˆå°±é€ æˆäº†å†²çªã€‚æ¯”å¦‚æ ¹æ®ä¹‹å‰çš„ä¾‹å­ï¼Œæœ¬åœ°æœ‰proå’Œproject2ä¸¤ä¸ªä»“åº“ã€‚ï¼ˆ1ï¼‰ä¿®æ”¹project2çš„readme.txtæ–‡ä»¶çš„å†…å®¹ä¸ºä»¥ä¸‹ï¼š12I am readme.txtmodify readme.txt by project212345678910111213141516171819wen@DESKTOP-BHMU9KJ MINGW64 ~/Desktop/project2 (master)$ git add readme.txtwen@DESKTOP-BHMU9KJ MINGW64 ~/Desktop/project2 (master)$ git commit -m "modify readme.txt by project2"[master 17938ff] modify readme.txt by project2 1 file changed, 2 insertions(+), 1 deletion(-)wen@DESKTOP-BHMU9KJ MINGW64 ~/Desktop/project2 (master)$ git push origin masterEnumerating objects: 5, done.Counting objects: 100% (5/5), done.Delta compression using up to 4 threads.Compressing objects: 100% (2/2), done.Writing objects: 100% (3/3), 292 bytes | 146.00 KiB/s, done.Total 3 (delta 1), reused 0 (delta 0)remote: Resolving deltas: 100% (1/1), completed with 1 local object.To github.com:qcmoke/test.git 12f4d1d..17938ff master -&gt; masterï¼ˆ2ï¼‰åœ¨project2ä¿®æ”¹å¹¶æäº¤readme.txtåˆ°è¿œç¨‹åº“åŽï¼Œåˆåœ¨æœ¬åœ°çš„proä»“åº“ä¿®æ”¹readme.txtï¼ŒåŒæ ·æäº¤readme.txtåˆ°è¿œç¨‹åº“ã€‚æœ¬åœ°çš„proä¿®æ”¹readme.txtçš„å†…å®¹ä¸ºä»¥ä¸‹ï¼š12I am readme.txtmodify readme.txt by pro12345678910111213141516171819202122wen@DESKTOP-BHMU9KJ MINGW64 ~/Desktop/pro (master)$ git add readme.txtwen@DESKTOP-BHMU9KJ MINGW64 ~/Desktop/pro (master)$ git commit -m "modify readme.txt by pro"[master 32cde6b] modify readme.txt by pro 1 file changed, 2 insertions(+), 1 deletion(-)wen@DESKTOP-BHMU9KJ MINGW64 ~/Desktop/pro (master)$ git push origin masterTo github.com:qcmoke/test.git ! [rejected] master -&gt; master (fetch first)error: failed to push some refs to 'git@github.com:qcmoke/test.git'hint: Updates were rejected because the remote contains work that youdohint: not have locally. This is usually caused by another repository pushinghint: to the same ref. You may want to first integrate the remote changeshint: (e.g., 'git pull ...') before pushing again.hint: See the 'Note about fast-forwards' in 'git push --help' for details.wen@DESKTOP-BHMU9KJ MINGW64 ~/Desktop/pro (master)$gitæŽ¨é€å¤±è´¥ï¼ŒåŽŸå› æ˜¯æŽ¨é€çš„å†…å®¹ä¸Žæœ¬åœ°ä»“åº“project2çš„æŽ¨é€æœ‰å†²çªï¼Œproject2æŽ¨é€æ—¶ï¼Œå·²ç»æ›´æ–°äº†ä¸€ä¸ªç‰ˆæœ¬ã€‚è€Œproæ­¤æ—¶æ¯”è¿œç¨‹ä»“åº“æ—§äº†ä¸€ä¸ªç‰ˆæœ¬ï¼Œå½“æŽ¨é€æ—¶å°±ä¸Žè¿œç¨‹åº“çš„ç‰ˆæœ¬ä¸€æ ·äº†ï¼Œä½†é—®é¢˜æ˜¯åŒæ ·æŽ¨é€åˆ°åŒä¸€ä¸ªè¿œç¨‹ä»“åº“ç‰ˆæœ¬ï¼Œè€Œè¿œç¨‹ä»“åº“çš„è¿™ä¸ªç‰ˆæœ¬ä¸­çš„readme.txtå·²ç»è¢«project2ä¿®æ”¹äº†ã€‚gitè¿œç¨‹ä»“åº“æ— æ³•ç¡®å®šè¦å“ªä¸ªæœ¬åœ°åº“çš„ä¿®æ”¹ï¼Œæ‰€ä»¥å°±å†²çªäº†ã€‚è¿™è¦æ±‚åœ¨è¢«å…¶ä»–æœ¬åœ°åº“ä¿®æ”¹ä¹‹å‰å°±è¦æ›´æ–°æœ¬åœ°åº“proåˆ°ä¸Žè¿œç¨‹åº“ç›¸åŒçš„ç‰ˆæœ¬å¿«ç…§ï¼Œæ‰èƒ½è¿›è¡Œä¿®æ”¹åŽæŽ¨é€ã€‚é€šè¿‡ä»¥ä¸‹å‘½ä»¤æ¥æ›´æ–°æœ¬åœ°åº“proåˆ°ä¸Žè¿œç¨‹åº“ç›¸åŒçš„ç‰ˆæœ¬å¿«ç…§ï¼š1$ git pull origin masterç„¶åŽå†å°†æœ¬åœ°proçš„readme.txtçš„å†…å®¹ä¿®æ”¹ä¸ºä»¥ä¸‹ï¼š12I am readme.txtmodify readme.txt by proç„¶åŽå†æŽ¨é€æ·»åŠ æäº¤åˆ°æœ¬åœ°ä»“åº“ï¼Œå†å°†æœ¬åœ°ä»“åº“çš„æœ€æ–°ç‰ˆæœ¬æŽ¨é€åˆ°è¿œç¨‹ä»“åº“ï¼š1234567891011121314151617181920wen@DESKTOP-BHMU9KJ MINGW64 ~/Desktop/pro (master)$ git pull origin masterFrom github.com:qcmoke/test * branch master -&gt; FETCH_HEADAlready up to date.wen@DESKTOP-BHMU9KJ MINGW64 ~/Desktop/pro (master)$ git push origin masterEnumerating objects: 9, done.Counting objects: 100% (9/9), done.Delta compression using up to 4 threads.Compressing objects: 100% (4/4), done.Writing objects: 100% (5/5), 606 bytes | 202.00 KiB/s, done.Total 5 (delta 1), reused 0 (delta 0)remote: Resolving deltas: 100% (1/1), completed with 1 local object.To github.com:qcmoke/test.git 17938ff..830af40 master -&gt; masterwen@DESKTOP-BHMU9KJ MINGW64 ~/Desktop/pro (master)$Â¶åä¸ƒã€å›¢é˜ŸååŒå¼€å‘ä¸¤ç§æ–¹å¼ï¼šé¡¹ç›®ç®¡ç†è€…å‘é€è¯·æ±‚é‚€è¯·å…¶ä»–æˆå‘˜åŠ å…¥åˆ°é¡¹ç›®é‡Œï¼Œéœ€è¦ç®¡ç†è€…é€šè¿‡ç”¨æˆ·åæˆ–è€…é‚®ç®±é‚€è¯·å…¶ä»–æˆå‘˜ï¼ŒåŒæ—¶å…¶ä»–æˆå‘˜ä¹Ÿè¦åŒæ„æŽ¥å—æ‰èƒ½åŠ å…¥åˆ°é¡¹ç›®ä¸­ï¼Œå¦‚æ­¤å…¶ä»–æˆå‘˜å°±èƒ½git pushã€‚å…¶ä»–æˆå‘˜å…ˆforké¡¹ç›®æˆä¸ºè‡ªå·±çš„ä»“åº“ï¼Œç„¶åŽgit pushåˆ°è‡ªå·±çš„ä»“åº“åŽï¼Œå‘é€Pull Requestsè¯·æ±‚ç»™ç®¡ç†è€…ã€‚ç®¡ç†è€…åŒæ„å¹¶mergeåˆå¹¶å…¶ä»–æˆå‘˜çš„ä¿®æ”¹å†…å®¹åˆ°è‡ªå·±çš„ä»“åº“é‡Œã€‚è¯¦ç»†æ­¥éª¤å¾…å®Œæˆâ€¦ ðŸ˜‚Â¶åå…«ã€é—®é¢˜è§£å†³Â¶1. centos7 æœ€å°ç³»ç»Ÿç²¾ç®€å®‰è£…gité—®é¢˜centos7 æœ€å°ç³»ç»Ÿç²¾ç®€å®‰è£…åŽï¼Œåœ¨ git clone æ—¶å‡ºçŽ°é—®é¢˜æç¤ºï¼šfatal: unable to access 'https://xxxxxx.git/': Peer reports incompatible or unsupported protocol version.è§£å†³åŠžæ³•ï¼š1yum update -y nss curl libcurl1234vi /etc/profile#ä¿®æ”¹ï¼šPATH=$PATH:/usr/libexec/git-coreexport PATHsource /etc/profileÂ¶2. git bash ä¸­æ–‡ä¹±ç é—®é¢˜è§£å†³ä¹±ç å¦‚ä¸‹ï¼šè§£å†³åŠžæ³•ï¼š1git config --global core.quotepath falsecore.quotepath æ˜¯ Git çš„ä¸€ä¸ªé…ç½®é€‰é¡¹ï¼Œç”¨äºŽæŒ‡å®šåœ¨å‘½ä»¤è¾“å‡ºä¸­æ˜¯å¦å¯¹æ–‡ä»¶åè¿›è¡Œå¼•å·è½¬ä¹‰ã€‚è§£å†³åŽæ•ˆæžœå¦‚ä¸‹ï¼šå‚è€ƒï¼šhttps://www.php.cn/tool/git/485156.htmlÂ¶åä¹ã€Git å¸¸ç”¨å‘½ä»¤é€ŸæŸ¥è¡¨åˆ›å»ºç‰ˆæœ¬åº“12git clone #å…‹éš†è¿œç¨‹ç‰ˆæœ¬åº“git init #åˆå§‹åŒ–æœ¬åœ°ç‰ˆæœ¬åº“ä¿®æ”¹å’Œæäº¤123456789git status #æŸ¥çœ‹çŠ¶æ€git diff #æŸ¥çœ‹å˜æ›´å†…å®¹git add . #è·Ÿè¸ªæ‰€æœ‰æ”¹åŠ¨è¿‡çš„æ–‡ä»¶git add #è·Ÿè¸ªæŒ‡å®šçš„æ–‡ä»¶git mv #æ–‡ä»¶æ”¹ågit rm #åˆ é™¤æ–‡ä»¶git rm --cached #åœæ­¢è·Ÿè¸ªæ–‡ä»¶ä½†ä¸åˆ é™¤git commit -m "commit messages" #æäº¤æ‰€æœ‰æ›´æ–°è¿‡çš„æ–‡ä»¶git commit --amend #ä¿®æ”¹æœ€åŽä¸€æ¬¡æ”¹åŠ¨æŸ¥çœ‹æäº¤åŽ†å²123git log #æŸ¥çœ‹æäº¤åŽ†å²git log -p #æŸ¥çœ‹æŒ‡å®šæ–‡ä»¶çš„æäº¤åŽ†å²git blame #ä»¥åˆ—è¡¨æ–¹å¼æŸ¥çœ‹æŒ‡å®šæ–‡ä»¶çš„æäº¤åŽ†å²æ’¤é”€1234git reset --hard HEAD #æ’¤é”€å·¥ä½œç›®å½•ä¸­æ‰€æœ‰æœªæäº¤æ–‡ä»¶çš„ä¿®æ”¹å†…å®¹git checkout HEAD #æ’¤é”€æŒ‡å®šçš„æœªæäº¤æ–‡ä»¶çš„ä¿®æ”¹å†…å®¹git revert #æ’¤é”€æŒ‡å®šçš„æäº¤git log --before="1 days" #é€€å›žåˆ°ä¹‹å‰1å¤©çš„ç‰ˆæœ¬åˆ†æ”¯ä¸Žæ ‡ç­¾1234567git branch #æ˜¾ç¤ºæ‰€æœ‰æœ¬åœ°åˆ†æ”¯git checkout #åˆ‡æ¢åˆ°æŒ‡å®šåˆ†æ”¯å’Œæ ‡ç­¾git branch #åˆ›å»ºæ–°åˆ†æ”¯git branch -d #åˆ é™¤æœ¬åœ°åˆ†æ”¯git tag #åˆ—å‡ºæ‰€æœ‰æœ¬åœ°æ ‡ç­¾git tag #åŸºäºŽæœ€æ–°æäº¤åˆ›å»ºæ ‡ç­¾git tag -d #åˆ é™¤æ ‡ç­¾åˆå¹¶ä¸Žè¡åˆ12git merge #åˆå¹¶æŒ‡å®šåˆ†æ”¯åˆ°å½“å‰åˆ†æ”¯git rebase #è¡åˆæŒ‡å®šåˆ†æ”¯åˆ°å½“å‰åˆ†æ”¯è¿œç¨‹æ“ä½œ12345678git remote -v #æŸ¥çœ‹è¿œç¨‹ç‰ˆæœ¬åº“ä¿¡æ¯git remote show #æŸ¥çœ‹æŒ‡å®šè¿œç¨‹ç‰ˆæœ¬åº“ä¿¡æ¯git remote add #æ·»åŠ è¿œç¨‹ç‰ˆæœ¬åº“git fetch #ä»Žè¿œç¨‹åº“èŽ·å–ä»£ç git pull #ä¸‹è½½ä»£ç åŠå¿«é€Ÿåˆå¹¶git push #ä¸Šä¼ ä»£ç åŠå¿«é€Ÿåˆå¹¶git push #åˆ é™¤è¿œç¨‹åˆ†æ”¯æˆ–æ ‡ç­¾git push --tags #ä¸Šä¼ æ‰€æœ‰æ ‡ç­¾æ›´å¤šå†…å®¹è¯·æŸ¥çœ‹ Git æ–‡æ¡£ã€‚]]></content>
      <categories>
        <category>tools</category>
      </categories>
      <tags>
        <tag>git</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[gitbookä½¿ç”¨æ•™ç¨‹]]></title>
    <url>%2Fblog%2Fgitbook.html</url>
    <content type="text"><![CDATA[Â¶ä¸€ã€å®‰è£…gitbookä¾èµ–äºŽnode.js,å®‰è£…ä¹Ÿæ˜¯é€šè¿‡nodejsçš„npmåŒ…ç®¡ç†å™¨å®‰è£…gitbookã€‚ä½ å¯ä»¥åˆ°node.jsçš„å®˜ç½‘ä¸‹è½½ã€‚å¹¶æ·»åŠ nodejsçš„å®‰è£…è·¯å¾„åˆ°çŽ¯å¢ƒå˜é‡pathä¸­ã€‚æ‰“å¼€cmdæˆ–è€…å…¶ä»–ç»ˆç«¯ï¼ˆå¦‚git bashç­‰ï¼‰ï¼Œè¾“å…¥ä»¥ä¸‹å‘½ä»¤å³å¯å®‰è£…gitbookã€‚1npm install gitbook-cli -gÂ¶äºŒã€ä½¿ç”¨æŽ¥ä¸‹æ¥è®²ä¸€ä¸‹gitbookå·¥ä½œåŒºçš„æ¦‚å¿µã€‚è¿™ä¸ªå·¥ä½œåŒºå°±æ˜¯ä½ ç®¡ç†å’Œç¼–å†™bookçš„åœ°æ–¹ã€‚gitbookå…è®¸ä½ åœ¨ä¸åŒçš„ç›®å½•ä¸Šåˆ›å»ºå¤šä¸ªå·¥ä½œåŒºã€‚å®ƒä»¬äº’ä¸å½±å“ã€‚çŽ°åœ¨å°±è®²è®²å¦‚ä½•åˆ›å»ºè¿™æ ·çš„å·¥ä½œåŒºã€‚é¦–å…ˆï¼Œä½ éœ€è¦å…ˆåˆ›å»ºä¸€ä¸ªç›®å½•ï¼Œå¦‚åœ¨æ¡Œé¢ä¸Šåˆ›å»ºäº†ä¸€ä¸ªåç§°ä¸ºmybookçš„ç›®å½•ï¼ˆæ–‡ä»¶å¤¹ï¼‰ï¼Œç„¶åŽé€šè¿‡ä»¥ä¸‹å‘½ä»¤å¯¹è¿™ä¸ªç›®å½•è¿›è¡Œåˆå§‹åŒ–:1gitbook inité€šè¿‡ä»¥ä¸Šåˆå§‹åŒ–åŽä¼šmybooké‡Œç”Ÿæˆä¸¤ä¸ªæ–‡ä»¶ï¼Œåˆ†åˆ«æ˜¯README.mdå’ŒSUMMARY.mdã€‚è¿™ä¸¤ä¸ªæ–‡ä»¶å°±æ˜¯ä½ å†™bookçš„æ–‡ä»¶ã€‚å…¶ä¸­README.mdæ˜¯bookçš„æ¯é¡µå†…å®¹ï¼Œè€ŒSUMMARY.mdçš„ä½œç”¨åˆ™æ˜¯ç”Ÿæˆbookçš„ç›®å½•ã€‚è¿™äº›ç›®å½•å’ŒREADME.mdæ˜¯ä¸€ä¸€å¯¹åº”çš„å…³ç³»ã€‚1gitbook build1gitbook serveÂ¶ä¸‰ã€å®‰è£…æ’ä»¶å’Œä¼˜åŒ–åŠŸèƒ½åœ¨mybookç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªåä¸ºbook.jsonçš„æ–‡ä»¶ã€‚å°†ä»¥ä¸‹å†…å®¹å¤åˆ¶ç²˜è´´åˆ°æ­¤æ–‡ä»¶ä¸­ï¼šå½“ç„¶ä»¥ä¸‹çš„gitbookã€titleã€descriptionã€author ã€github ã€wechatéœ€è¦æ ¹æ®ä½ çš„æƒ…å†µæ¥åšä¿®æ”¹ã€‚123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081&#123; "gitbook": "3.2.3", "title": "Qcmoke's Book", "description": "my book", "author": "qcmoke", "language": "zh-hans", "links": &#123; "sidebar": &#123; &#125; &#125;, "plugins": ["github", "donate", "splitter", "anchor-navigation-ex", "-sharing", "sharing-plus", "-highlight", "prism" ], "pluginsConfig": &#123; "sharing": &#123; "douban": false, "facebook": false, "google": false, "hatenaBookmark": false, "instapaper": false, "line": false, "linkedin": false, "messenger": false, "pocket": false, "qq": false, "qzone": false, "stumbleupon": false, "twitter": false, "viber": false, "vk": false, "weibo": false, "whatsapp": false, "all": [ "weibo","qq","qzone","google","douban" ] &#125;, "github": &#123; "url": "https://github.com/qcmoke" &#125;, "donate": &#123; "wechat": "https://example.com/images/wechatpay.png", "title": "", "button": "èµ", "wechatText": "å¾®ä¿¡æ‰“èµ" &#125;, "anchor-navigation-ex": &#123; "associatedWithSummary":false, "showLevel":true, "multipleH1": true, "mode": "float", "pageTop": &#123; "showLevelIcon": false, "level1Icon": "fa fa-hand-o-right", "level2Icon": "fa fa-hand-o-right", "level3Icon": "fa fa-hand-o-right" &#125; &#125;, "theme-default": &#123; "showLevel": true &#125;, "fontsettings": &#123; "theme": "white", "family": "serif", "size": 2 &#125;, "prism": &#123; "css": [ "prismjs/themes/prism-tomorrow.css" ] &#125; &#125;&#125;ç„¶åŽæ‰§è¡Œä»¥ä¸‹å‘½ä»¤å³å¯å®‰è£…æ’ä»¶å¹¶ä¼˜åŒ–åŠŸèƒ½ã€‚1gitbook install ./Â¶å››ã€éƒ¨ç½²åˆ°githubå¦‚æžœè¿˜æ²¡æœ‰é…ç½®ssh keyï¼Œä½ è¦å…ˆç»™æœ¬æœºé…ç½®å¥½ssh keyã€‚ç„¶åŽåœ¨githubä¸Šåˆ›å»ºä¸€ä¸ªä»“åº“ã€‚å¦‚åç§°ä¸ºmygitbookçš„ä»“åº“ã€‚ä½ éœ€è¦å°†gitbookå·¥ä½œä¸‹çš„_bookåˆå§‹åŒ–ä¸ºgitä»“åº“ã€‚ç„¶åŽå†æŽ¨é€åˆ°githubè¿œç¨‹ä»“åº“ã€‚å¤§æ¦‚å¦‚ä¸‹ï¼š1234567$ gitbook build$ cd _book$ git init$ git add$ git commit -m "first commit"$ git remote add origin git@github.com:qcmoke/mygitbook.git$ git push -u origin masterä»¥ä¸Šéƒ¨ç½²å®ŒæˆåŽéœ€è¦åˆ°githubé€‰æ‹©mygitbookä»“åº“åŽï¼Œç‚¹å‡»settingå¼€å¯å¹¶è®¾ç½®github pagesæœåŠ¡ã€‚å…·ä½“å¦‚ä¸‹ï¼šå°†sourceè®¾ç½®ä¸ºmasteræˆ–è€…gh-pagesï¼Œå¹¶ä¿å­˜ã€‚æ­¤æ—¶ä¾¿å¯ä»¥é€šè¿‡http://yourname.github.io/mygitbookï¼ˆå¦‚æžœä½ å†è®¾ç½®æ­¤ä»“åº“çš„pageså‰æœ‰åœ¨å…¶ä»–ä»“åº“è®¾ç½®è¿‡è‡ªå®šä¹‰åŸŸåï¼Œé‚£ä¹ˆä¼šé€šè¿‡http://ä½ çš„åŸŸåï¼‰è®¿é—®ä½ çš„gitbookä¸»é¡µäº†ã€‚å¦‚æžœä½ éœ€è¦é€šè¿‡httpsè®¿é—®ï¼Œä½ å¯ä»¥ç‚¹å‡»ä¸‹æ–¹çš„Enforce HTTPSå³å¯é€šè¿‡httpsè¿›è¡Œè®¿é—®ã€‚æ­¤æ¡ä¸ºå¯é€‰é¡¹&lt;-----å¦‚æžœä½ éœ€è¦å†æ­¤ä»“åº“é‡Œå¦å¤–è®¾ç½®åŸŸåï¼Œæ— è®ºä½ ä¹‹å‰æ˜¯å¦æœ‰åœ¨å…¶ä»–ä»“åº“è®¾ç½®è¿‡è‡ªå®šä¹‰åŸŸåï¼Œåœ¨æ­¤ä»“åº“ä½ è¿˜å¯ä»¥å†è®¾ç½®è‡ªå®šä¹‰åŸŸåï¼Œå¯ä»¥æ˜¯é¡¶çº§åŸŸåï¼Œä¹Ÿå¯ä»¥æ˜¯äºŒçº§å­åŸŸåï¼Œä½†ä¸èƒ½å’Œå…¶ä»–ä»“åº“çš„è‡ªå®šä¹‰åŸŸåä¸€æ ·ï¼Œå¦åˆ™ä¼šå†²çªã€‚å‰ææ˜¯éœ€è¦ä½ åˆ°åŸŸåè§£æžå¹³å°å°†è¯¥è‡ªå®šä¹‰åŸŸåè§£æžä¸€æ¡CNAMEè®°å½•åˆ°yourname.github.io ã€‚å¹¶ä¸”å¯é€‰æ€§çš„æ·»åŠ Enforce HTTPSï¼Œè‡ªå®šä¹‰åŸŸåæ·»åŠ htttsæ¯”è¾ƒå°´å°¬ï¼Œéœ€è¦ä½ å†ç­‰å¾…24ä¸ªå°æ—¶å·¦å³æ‰èƒ½æˆåŠŸã€‚å¦‚æžœè¿æ°”å¥½çš„è¯ä¼šæå‰ä¸€äº›ã€‚]]></content>
      <categories>
        <category>blog</category>
      </categories>
      <tags>
        <tag>gitbook</tag>
        <tag>github</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Linuxçš„scpå‘½ä»¤]]></title>
    <url>%2Flinux%2Fscp.html</url>
    <content type="text"><![CDATA[Linuxä¹‹é—´å¤åˆ¶ æ–‡ä»¶ å’Œ ç›®å½• ä½¿ç”¨å‘½ä»¤ï¼šscpï¼Œå‘½ä»¤åŸºæœ¬æ ¼å¼ï¼šscp [å¯é€‰å‚æ•°] file_source file_targetÂ¶ä»‹ç»linux ä¹‹é—´å¤åˆ¶ æ–‡ä»¶ å’Œ ç›®å½•ä½¿ç”¨å‘½ä»¤ï¼šscpÂ¶å‘½ä»¤å‘½ä»¤åŸºæœ¬æ ¼å¼ï¼šscp [å¯é€‰å‚æ•°] file_source file_targetÂ¶å¤åˆ¶æ–‡ä»¶Â¶å‘½ä»¤æ¨¡æ¿1234scp local_file remote_username@remote_ip:remote_folder scp local_file remote_username@remote_ip:remote_filescp local_file remote_ip:remote_folderscp local_file remote_ip:remote_file1æŒ‡å®šäº†ç”¨æˆ·åï¼Œå‘½ä»¤æ‰§è¡ŒåŽéœ€è¦å†è¾“å…¥å¯†ç ï¼Œä»…æŒ‡å®šäº†è¿œç¨‹çš„ç›®å½•ï¼ˆæ–‡ä»¶åä¸å˜ï¼‰ï¼›2æŒ‡å®šäº†ç”¨æˆ·åï¼Œå‘½ä»¤æ‰§è¡ŒåŽéœ€è¦å†è¾“å…¥å¯†ç ï¼ŒæŒ‡å®šäº†è¿œç¨‹çš„ç›®å½•ä¸”æŒ‡å®šäº†æ–‡ä»¶åï¼›3 å‘½ä»¤æ‰§è¡ŒåŽéœ€è¦è¾“å…¥ç”¨æˆ·åå’Œå¯†ç ï¼Œä»…æŒ‡å®šäº†è¿œç¨‹çš„ç›®å½•ï¼ˆæ–‡ä»¶åä¸å˜ï¼‰ï¼›4 å‘½ä»¤æ‰§è¡ŒåŽéœ€è¦è¾“å…¥ç”¨æˆ·åå’Œå¯†ç ï¼ŒæŒ‡å®šäº†è¿œç¨‹çš„ç›®å½•ä¸”æŒ‡å®šäº†æ–‡ä»¶åï¼›Â¶æ ·ä¾‹1234scp ~&#x2F;home&#x2F;test.txt zhuzhutest@10.1.1.2:&#x2F;home&#x2F;scp ~&#x2F;home&#x2F;test.txt zhuzhutest@10.1.1.2:&#x2F;home&#x2F;change_name.txtscp ~&#x2F;home&#x2F;test.txt 10.1.1.2:&#x2F;home&#x2F;scp ~&#x2F;home&#x2F;test.txt 10.1.1.2:&#x2F;home&#x2F;change_name.txtÂ¶å¤åˆ¶ç›®å½•Â¶å‘½ä»¤æ¨¡æ¿12scp -r local_folder remote_username@remote_ip:remote_folderscp -r local_folder remote_ip:remote_folder1æŒ‡å®šäº†ç”¨æˆ·åï¼Œå‘½ä»¤æ‰§è¡ŒåŽéœ€è¦å†è¾“å…¥å¯†ç ï¼›2 å‘½ä»¤æ‰§è¡ŒåŽéœ€è¦è¾“å…¥ç”¨æˆ·åå’Œå¯†ç ï¼›Â¶æ ·ä¾‹12scp -r ~&#x2F;home&#x2F;folder1 zhuzhutest@10.1.1.2:&#x2F;home&#x2F;scp -r ~&#x2F;home&#x2F;folder2 10.1.1.2:&#x2F;home&#x2F;å°†æœ¬æœºç”¨æˆ·ä¸‹~/home/folder1ç›®å½•å’Œ~/home/folder2ç›®å½•åˆ†åˆ«å¤åˆ¶è¿œç¨‹ç›®æ ‡Linuxã€‚]]></content>
      <categories>
        <category>linux</category>
      </categories>
      <tags>
        <tag>linux</tag>
        <tag>scp</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[é€šè¿‡gitå¤‡ä»½è¿˜åŽŸhexoæºç ]]></title>
    <url>%2Fblog%2Fhexo_backup.html</url>
    <content type="text"><![CDATA[Hexoåšå®¢å­˜åœ¨ä¸€ä¸ªé—®é¢˜ï¼šæˆ‘ä»¬ä»…ä»…å°†åšå®¢çš„é™æ€é¡µé¢æ–‡ä»¶éƒ¨ç½²åˆ°äº†githubè¿œç¨‹ä»“åº“ä¸­ï¼Œè€Œæˆ‘ä»¬çš„ç«™ç‚¹æºæ–‡ä»¶ä»åœ¨æœ¬åœ°å­˜å‚¨ã€‚å¦‚æžœå­˜å‚¨ç«™ç‚¹æºæ–‡ä»¶çš„ç”µè„‘ç³»ç»Ÿå´©æºƒäº†ï¼Œæˆ–è€…æˆ‘ä»¬æ¢äº†å…¶ä»–ç”µè„‘ï¼Œæˆ‘ä»¬ä¾¿æ— æ³•å®žæ—¶æ›´æ–°åšå®¢äº†ã€‚å¦‚æžœé€‰æ‹©é‡æ–°æ­å»ºç«™ç‚¹ï¼Œä¸ä»…è¿‡ç¨‹ç¹çï¼Œè€Œä¸”è¿˜éœ€è¦å¤§é‡æ—¶é—´å®‰è£…ä¾èµ–ã€ä¸»é¢˜é…ç½®ã€åšå®¢ä¼˜åŒ–ï¼Œæžå…¶éº»çƒ¦ã€‚æ‰€ä»¥æˆ‘ä»¬éœ€è¦å°†ç«™ç‚¹å¿…è¦æ–‡ä»¶ä¹Ÿéƒ¨ç½²åˆ°è¿œç¨‹ä»“åº“ä¸­ã€‚ç„¶è€Œgithubçš„ç§æœ‰ä»“åº“æ˜¯è¦æ”¶è´¹çš„ï¼Œå¦‚æžœç”¨å…è´¹ä»“åº“ï¼Œæš´éœ²hexoæºç ï¼Œå°¤å…¶æ˜¯é…ç½®æ–‡ä»¶æ˜¯å¾ˆä¸å®‰å…¨çš„ï¼Œå› ä¸ºé…ç½®æ–‡ä»¶ä¸­å¯èƒ½å«æœ‰ä½ çš„éšç§ä¿¡æ¯ï¼Œæ¯”å¦‚å„ç§ç§˜é’¥ç­‰ã€‚æ‰€ä»¥æœ‰ä¸€ä¸ªç§äººä»“åº“æ˜¯å¾ˆæœ‰åˆ©çš„ã€‚ä½ å¯ä»¥é€šè¿‡è´­ä¹°æœåŠ¡å™¨æ­å»ºè‡ªå·±çš„gitç§äººæœåŠ¡å™¨å¹¶å¤‡ä»½hexoæºç ã€‚ä½ ä¹Ÿå¯ä»¥åœ¨codingç­‰è¿™æ ·æä¾›ç§äººä»“åº“çš„æœåŠ¡å•†è¿›è¡Œhexoæºç å¤‡ä»½ã€‚æˆ‘ä»¬é‡‡å–çš„è¿œç¨‹ä»“åº“éƒ¨ç½²ç­–ç•¥æ˜¯ï¼šä½¿ç”¨codingçš„ç§äººä»“åº“ï¼Œä¸€ä¸ªä»“åº“ä¸¤ä¸ªåˆ†æ”¯ã€‚ä»“åº“å³[yourname.coding.me]ï¼Œä¸€ä¸ªåˆ†æ”¯[master]ç”¨äºŽæ‰˜ç®¡æ¼”ç¤ºé¡µé¢ï¼Œä¸€ä¸ªåˆ†æ”¯[backup]ç”¨äºŽå¤‡ä»½Hexoåšå®¢ç«™ç‚¹çš„å¿…è¦æ–‡ä»¶ã€‚Â¶ä¸€ã€å¤‡ä»½å¤šæœºåŒæ­¥æ›´æ–°çš„å‰æï¼šbackupåˆ†æ”¯ï¼ˆä¹Ÿå¯ä»¥æ˜¯å…¶ä»–åç§°çš„åˆ†æ”¯æˆ–è€…æ–°çš„ä»“åº“ï¼‰Hexoåšå®¢ç«™ç‚¹çš„å¿…è¦æ–‡ä»¶ï¼š12345678.â”œâ”€â”€ scaffolds # æ–‡ç« æ¨¡æ¿â”œâ”€â”€ source # ç”¨æˆ·æºæ–‡ä»¶ï¼šé¡µé¢ï¼Œæ–‡ç« markdownæ–‡ä»¶â”œâ”€â”€ themes # ä¸»é¢˜â”œâ”€â”€ .gitignore # gitå¿½ç•¥æ–‡ä»¶ä¿¡æ¯â”œâ”€â”€ _config.yml # ç«™ç‚¹é…ç½®æ–‡ä»¶â”œâ”€â”€ package.json # å·²å®‰è£…æ’ä»¶æ˜ å°„è¡¨ï¼Œä¸‹æ¬¡åªéœ€npm installå³ç›´æŽ¥å®‰è£…è¡¨ä¸­çš„æ’ä»¶â”œâ”€â”€ package-lock.jsonä½¿gitä¸Šä¼ è¿œç¨‹gitæœåŠ¡å™¨ï¼ˆè¿™é‡Œæ˜¯codingï¼‰æ—¶å¯å¿½ç•¥ä¸å¿…è¦çš„æ–‡ä»¶ï¼Œåšæ³•æ˜¯ç¼–è¾‘ç«™ç‚¹æ ¹ç›®å½•ä¸‹çš„.gitignoreæ–‡ä»¶ï¼Œå¤åˆ¶ç²˜è´´ä¸€ä¸‹å†…å®¹åˆ°.gitignoreæ–‡ä»¶ä¸­ã€‚1234567.DS_StoreThumbs.dbdb.json*.lognode_modules/public/.deploy*/Â¶1.åˆ é™¤å¿…è¦æ–‡ä»¶åˆ é™¤themes/ä½ çš„ä¸»é¢˜ä¸­çš„.gitï¼Œ.githubï¼Œ.gitignoreç­‰gitä»“åº“æ–‡ä»¶ï¼Œåªä¿ç•™ç«™ç‚¹æ ¹ç›®å½•ä¸‹çš„.gitignoreã€‚Â¶2.hexoæºç å¤‡ä»½åœ¨Hexoåšå®¢ç«™ç‚¹æ ¹ç›®å½•ï¼ˆå³blogæ–‡ä»¶å¤¹ï¼‰ä¸­æ‰“å¼€GitBashï¼š123456$ git init # å°†blogä½œä¸ºä¸€ä¸ªgitä»“åº“è¿›è¡Œåˆå§‹åŒ–$ git checkout -b backup # åˆ›å»º/åˆ‡æ¢æœ¬åœ°backupåˆ†æ”¯$ git add . # å°†æ–‡ä»¶æ·»åŠ åˆ°æš‚å­˜åŒº $ git commit -m "æäº¤è¯´æ˜Ž" # å°†æš‚å­˜åŒºæ–‡ä»¶æäº¤åˆ°æœ¬åœ°ä»“åº“$ git remote add origin git@git.coding.net:yourname/yourname.coding.me.git # æ·»åŠ è¿œç¨‹ä»“åº“$ git push origin backup # å°†æœ¬åœ°ä»“åº“æŽ¨é€è‡³è¿œç¨‹ä»“åº“å¦‚æžœè¿œç¨‹å·²ç»å­˜åœ¨backupåˆ†æ”¯ï¼ŒæŽ¨é€æœ¬åœ°åˆ†æ”¯backupåˆ°å·²æœ‰çš„è¿œç¨‹åˆ†æ”¯backupï¼Œè¾¾åˆ°æ›´æ–°è¿œç¨‹backupçš„ç›®çš„ï¼š1$ git push --force origin backup #git pushçš„æ—¶å€™éœ€è¦æœ¬åœ°å…ˆgit pullæ›´æ–°åˆ°è·ŸæœåŠ¡å™¨ç‰ˆæœ¬ä¸€è‡´ï¼Œå¦‚æžœæœ¬åœ°ç‰ˆæœ¬åº“æ¯”è¿œç¨‹æœåŠ¡å™¨ä¸Šçš„ä½Žï¼Œé‚£ä¹ˆä¸€èˆ¬ä¼šæç¤ºä½ git pullæ›´æ–°ï¼Œå¦‚æžœä¸€å®šè¦æäº¤ï¼Œé‚£ä¹ˆå¯ä»¥ä½¿ç”¨è¿™ä¸ªå‘½ä»¤ã€‚Â¶äºŒã€è¿˜åŽŸÂ¶1.è¿˜åŽŸå‰æ(1) å®‰è£…Git(2) å®‰è£…nodejsÂ¶2.hexoæºç è¿˜åŽŸ12345$ git clone -b backup https://git.coding.net/yourname/yourname.coding.me.git # å…‹éš†backupåˆ†æ”¯åˆ°æœ¬åœ°ï¼Œç§æœ‰ä»“åº“éœ€è¦è¾“å…¥ç”¨æˆ·åå’Œå¯†ç $ cd yourname.coding.me # è¿›å…¥yourname.coding.meæ–‡ä»¶å¤¹$ npm install hexo --save # å®‰è£…hexo$ npm install hexo-cli -g # å®‰è£…hexoå‘½ä»¤è¡Œæ¨¡å¼$ npm install # å®‰è£…æ‰€æœ‰ä¾èµ–ï¼Œæ ¹æ®package.jsonè‡ªåŠ¨å®‰è£…ä¹‹å‰å®‰è£…è¿‡çš„æ’ä»¶Â¶3.Gité…ç½®ç”¨æˆ·ä¿¡æ¯ï¼ˆæ–°ç³»ç»ŸçŽ¯å¢ƒä¸‹ï¼‰åœ¨Git bashä¸­è¾“å…¥ï¼šï¼ˆ1ï¼‰è®¾ç½®ç”¨æˆ·å12git config --global user.name â€˜è¿™é‡Œå¡«å†™è‡ªå·±çš„ç”¨æˆ·åâ€™ å¦‚ï¼š git config --global user.name 'qcmoke'ï¼ˆ2ï¼‰è®¾ç½®ç”¨æˆ·åé‚®ç®±12git config --global user.email â€˜è¿™é‡Œå¡«å†™è‡ªå·±çš„ç”¨æˆ·é‚®ç®±â€™ å¦‚ï¼šgit config --global user.email '1667164190@qq.com'ï¼ˆ3ï¼‰æŸ¥çœ‹é…ç½®ä¿¡æ¯1git config --listæ³¨æ„ï¼šè¯¥è®¾ç½®åœ¨GitHubä»“åº“ä¸»é¡µæ˜¾ç¤ºè°æäº¤äº†è¯¥æ–‡ä»¶ï¼Œæ³¨æ„è¿™é‡Œçš„ - æœ‰ä¸¤ä¸ªï¼Â¶4.é…ç½®ç½‘ç»œåè®®(1) SSHåè®®ï¼Œé•¿æœŸéƒ¨ç½²æŽ¨èSSHï¼Œä¸€åŠ³æ°¸é€¸ã€‚â‘ SSHç§˜é’¥ï¼š123$ ssh-keygen -t rsa -C "youremail@example.com" # ç”Ÿæˆrsaç§˜é’¥$ cd ~/.ssh # è¿›å…¥è™šæ‹Ÿç›®å½•sshæ–‡ä»¶ä¸­$ cat id_rsa.pub # æ˜¾ç¤ºid_rsa.pubæ–‡ä»¶å†…å®¹â‘¡å¤åˆ¶ç§˜é’¥è‡³github/coding-&gt;ç”¨æˆ·setting-&gt;SSH keysï¼ŒNew SSH Keyï¼›â‘¢éªŒè¯æ˜¯å¦æ·»åŠ æˆåŠŸ12$ ssh -T git@github.com # éªŒè¯githubæ˜¯å¦æ·»åŠ æˆåŠŸ$ ssh -T git@git.coding.net # éªŒè¯codingæ˜¯å¦æ·»åŠ æˆåŠŸâ‘£ç¼–è¾‘ç«™ç‚¹é…ç½®æ–‡ä»¶_config.ymlï¼š123456deploy: type: git repo: github: git@github.com:yourname/yourname.github.io.git coding: git@git.coding.net:yourname/yourname.coding.me.git branch: masterÂ¶5.æ–°çŽ¯å¢ƒä¸‹éƒ¨ç½²hexoåšå®¢é‡æ–°éƒ¨ç½²ï¼š12$ hexo clean$ hexo g -dÂ¶6.åŠæ—¶æ›´æ–°hexoæºç åˆ°codingï¼ˆå¦‚æžœæœ‰ä¿®æ”¹hexoæºç ï¼‰ä¸Šä¼ è‡³hexoåˆ†æ”¯ï¼š123$ git add .$ git commit -m "commit-message"$ git push origin backup]]></content>
      <categories>
        <category>blog</category>
      </categories>
      <tags>
        <tag>git</tag>
        <tag>hexo</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[windowså®‰è£…mysql5.7è§£åŽ‹ç‰ˆ]]></title>
    <url>%2Fdevops%2Fwin_mysql.html</url>
    <content type="text"><![CDATA[æœ¬æ–‡è®°å½•äº†windows10å®‰è£…mysql5.7è§£åŽ‹ç‰ˆçš„å®žæˆ˜è¿‡ç¨‹ï¼Œå¯¹äºŽåˆå­¦è€…æžæœ‰å¸®åŠ©ã€‚æ ¹æ®æœ¬æ–‡æ•™ç¨‹èƒ½å°½é‡é¿å…å¾ˆå¤šä¸å¿…è¦çš„æ­ªè·¯â€¦Â¶é›¶. ä¸‹è½½mysqlå®˜æ–¹ä¸‹è½½åœ°å€:https://dev.mysql.com/downloads/mysql/æ­¤å¤„é€‰æ‹©çš„ç‰ˆæœ¬æ˜¯mysql-5.7.23è§£åŽ‹ç‰ˆhttps://cdn.mysql.com//Downloads/MySQL-5.7/mysql-5.7.23-winx64.zipÂ¶ä¸€. å‰ç½®å‡†å¤‡è§£åŽ‹mysql-5.7.23-winx64.zipé‡Œçš„æ–‡ä»¶åˆ°C:\DevelopmentTools\mysql-5.7.23-winx64ç›®å½•ã€‚åˆ›å»ºmysqlå®‰è£…é…ç½®æ–‡ä»¶ï¼Œå‘½åä¸ºmy.iniã€‚æ–‡ä»¶é‡Œçš„å†…å®¹å¦‚ä¸‹ï¼Œå¤åˆ¶ç²˜è´´åˆ°my.iniå³å¯ã€‚12345678910111213141516171819[mysql]# è®¾ç½®mysqlå®¢æˆ·ç«¯é»˜è®¤å­—ç¬¦é›†default-character-set=utf8 [mysqld]# è®¾ç½®3306ç«¯å£port = 3306# è®¾ç½®mysqlçš„å®‰è£…ç›®å½•basedir=C:\\DevelopmentTools\\mysql-5.7.23-winx64# è®¾ç½® mysqlæ•°æ®åº“çš„æ•°æ®çš„å­˜æ”¾ç›®å½•ï¼Œå¦‚æžœæ˜¯MySQL 8+ ä¸éœ€è¦ä»¥ä¸‹é…ç½®ï¼Œç³»ç»Ÿè‡ªå·±ç”Ÿæˆå³å¯ï¼Œå¦åˆ™æœ‰å¯èƒ½æŠ¥é”™datadir=C:\\DevelopmentTools\\mysql-5.7.23-winx64\\data# å…è®¸æœ€å¤§è¿žæŽ¥æ•°max_connections=20# æœåŠ¡ç«¯ä½¿ç”¨çš„å­—ç¬¦é›†é»˜è®¤ä¸º8æ¯”ç‰¹ç¼–ç çš„latin1å­—ç¬¦é›†character-set-server=utf8# åˆ›å»ºæ–°è¡¨æ—¶å°†ä½¿ç”¨çš„é»˜è®¤å­˜å‚¨å¼•æ“Ždefault-storage-engine=INNODB# æœ€å¤§è¿žæŽ¥æ•°max_connections=500é…ç½®å®ŒæˆåŽï¼Œå°†my.iniæ–‡ä»¶æ”¾åˆ°C:\DevelopmentTools\mysql-5.7.23-winx64ç›®å½•ä¸­ã€‚Â¶ä¸€.å®‰è£…mysqlä»¥ä¸‹å†…å®¹ä»¥mysqlè½¯ä»¶åŒ…ç›®å½•åœ¨C:\DevelopmentTools\mysql-5.7.23-winx64ä¸ºä¾‹è¿›è¡Œå®‰è£…ï¼ŒåŒæ ·å®‰è£…å®Œæˆçš„ç›®å½•ä¹Ÿæ˜¯æ­¤ç›®å½•ã€‚ä»¥ç®¡ç†å‘˜èº«ä»½è¿è¡Œcmdï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤è¿›å…¥C:\DevelopmentTools\mysql-5.7.23-winx64\binç›®å½•ï¼š1cd C:\DevelopmentTools\mysql-5.7.23-winx64\binÂ¶1.å®‰è£…mysqlæœåŠ¡1mysqld -install mysqlæ³¨ï¼šmysqld -install [æœåŠ¡å],æœåŠ¡åé»˜è®¤ä¸ºmysqlï¼Œè‹¥æ— éœ€è¦ï¼Œå»ºè®®ä¸æ›´æ”¹ã€‚å¦‚æžœæç¤ºä¸¢å¤±MSVCR120.dllï¼Œéœ€è¦ä¸‹è½½å®‰è£…VC++2013ã€‚æµè§ˆå™¨æ‰“å¼€https://www.microsoft.com/zh-cn/download/confirmation.aspx?id=40784ï¼Œé€‰æ‹©&quot;å•å‡»æ‰‹åŠ¨ä¸‹è½½&quot;ï¼Œé€‰æ‹©åˆé€‚ç³»ç»Ÿçš„ç‰ˆæœ¬ï¼Œæ¯”å¦‚64ä½ç³»ç»Ÿåˆ™é€‰vcredist_x64.exeï¼Œè€Œ32ä½ç³»ç»Ÿé€‰vcredist_x86.exeã€‚å¦‚æžœä¸¢å¤±çš„æ˜¯å…¶å®ƒè¿žæŽ¥åº“ï¼ŒåŒæ ·æ ¹æ®æç¤ºåˆ°å¾®è½¯å®˜ç½‘ä¸‹è½½å®‰è£…å³å¯ã€‚Â¶2.åˆå§‹åŒ–mysql1mysqld --initialize-insecureæ³¨ï¼šâ€“initializeæœ‰ä¸¤ä¸ª-ï¼ŒåŽè¾¹æ²¡æœ‰ç©ºæ ¼åˆå§‹åŒ–åŽï¼ŒC:\DevelopmentTools\mysql-5.7.23-winx64ç›®å½•ä¸‹ä¼šå‡ºçŽ°dataç›®å½•Â¶3.æ·»åŠ mysqlçŽ¯å¢ƒå˜é‡å°†C:\DevelopmentTools\mysql-5.7.20-winx64\binæ·»åŠ åˆ°Pathä¸­ï¼Œæ–¹ä¾¿åœ¨ä»»ä½•ç›®å½•ä¸‹éƒ½å¯ä»¥æ‰§è¡Œmysqlå‘½ä»¤ã€‚Â¶4.å¯åŠ¨mysqlæœåŠ¡ä»¥ç®¡ç†å‘˜èº«ä»½è¿è¡Œcmd1net start mysqlÂ¶5.æ— å¯†ç ç™»å½•mysqlæ–¹å¼1ï¼šä¸€æ¬¡å›žè½¦å³å¯ç™»å½•1mysql -urootæ–¹å¼2ï¼šç¬¬ä¸€æ¬¡å›žè½¦åŽï¼Œä¸è¾“å…¥å¯†ç ï¼Œå†æ¬¡å›žè½¦å³å¯ç™»å½•1mysql -uroot -pÂ¶6.ä¿®æ”¹å¯†ç ï¼ˆé»˜è®¤æ²¡æœ‰å¯†ç  ï¼‰1set password=password('123456');Â¶7.ç”¨å¯†ç ç™»å½•mysqlï¼Œè¾“å…¥ä»¥ä¸‹å‘½ä»¤å›žè½¦1mysql -uroot -p123456Â¶8. æŸ¥çœ‹å­—ç¬¦é›†æ˜¯å¦ç¬¦åˆé¢„æœŸå€¼1234567891011121314mysql&gt; show variables like 'char%';+--------------------------+----------------------------------------------------------+| Variable_name | Value |+--------------------------+----------------------------------------------------------+| character_set_client | utf8 || character_set_connection | utf8 || character_set_database | utf8 || character_set_filesystem | binary || character_set_results | utf8 || character_set_server | utf8 || character_set_system | utf8 || character_sets_dir | C:\DevelopmentTools\mysql-5.7.23-winx64\share\charsets\ |+--------------------------+----------------------------------------------------------+8 rows in set (0.00 sec)é™¤äº†character_set_filesysteméƒ½æ˜¯utf8ï¼Œç¬¦åˆé¢„æœŸé…ç½®å€¼ï¼Â¶9. æŸ¥çœ‹æœ€å¤§è¿žæŽ¥æ•°æ˜¯å¦ç¬¦åˆé¢„æœŸå€¼1234567mysql&gt; show variables like 'max_connections';+-----------------+-------+| Variable_name | Value |+-----------------+-------+| max_connections | 500 |+-----------------+-------+1 row in set (0.00 sec)Â¶ä¸€.å¸è½½mysqlÂ¶1.ä»¥ç®¡ç†å‘˜èº«ä»½è¿è¡Œcmdå¹¶è¿›å…¥C:\DevelopmentTools\mysql-5.7.23-winx64\binç›®å½•1cd C:\DevelopmentTools\mysql-5.7.23-winx64\binÂ¶2.å…³é—­mysqlæœåŠ¡1net stop mysqlÂ¶3.å¸è½½mysqlï¼Œmysqld -remove [æœåŠ¡å]ï¼ŒæœåŠ¡åé»˜è®¤ä¸ºmysql1mysqld -remove mysqlÂ¶4.åˆ é™¤mysqlå®‰è£…ç›®å½•Â¶5.cmdè¾“å…¥ä»¥ä¸‹å‘½ä»¤æ‰“å¼€æ³¨å†Œè¡¨ï¼š1regeditæ¸…é™¤æ³¨å†Œè¡¨ä¸­çš„è¯¥MySQLæœåŠ¡ï¼Œæœ‰å‡ ä¸ªåœ°æ–¹:a. HKEY_LOCAL_MACHINE\SYSTEM\ControlSet001\services\eventlog\Application\MySQL ç›®å½•åˆ é™¤b. HKEY_LOCAL_MACHINE\SYSTEM\ControlSet002\services\eventlog\Application\MySQL ç›®å½•åˆ é™¤c. HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\services\eventlog\Application\MySQL ç›®å½•åˆ é™¤æ³¨å†Œè¡¨ä¸­çš„ControlSet001ã€ControlSet002ä¸ä¸€å®šæ˜¯001å’Œ002ï¼Œå¯èƒ½æ˜¯ControlSet005ã€006ä¹‹ç±»ï¼Œåˆ é™¤çš„æ—¶å€™æŠŠé‡Œé¢çš„MySQLç›®å½•éƒ½åˆ é™¤å°±å¯ä»¥ã€‚è¿™äº›ç›®å½•ä¸­å¯èƒ½ä¹Ÿæ²¡æœ‰ï¼Œæ²¡æœ‰çš„è¯å¿½ç•¥å³å¯ã€‚â€‹Â¶ä¸‰. æ›´å¤šå†…å®¹æ›´å¤šå†…å®¹è§ï¼šhttps://blog.csdn.net/mr_green1024/article/details/53222526]]></content>
      <categories>
        <category>devops</category>
      </categories>
      <tags>
        <tag>mysql</tag>
        <tag>windows</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[vscodeæ•™ç¨‹]]></title>
    <url>%2Ftools%2Fvscode_use.html</url>
    <content type="text"><![CDATA[vscodeæ˜¯å¾ˆä¼˜ç§€çš„æ–‡æœ¬ç¼–è¾‘å™¨ï¼Œç”šè‡³å¯ä»¥è¯´æ˜¯å¼ºå¤§çš„ideå¼€å‘å·¥å…·ï¼Œç”±äºŽå…¶è‰¯å¥½çš„ç”¨æˆ·ä½“éªŒï¼Œä¸°å¯Œçš„æ‰©å±•æ’ä»¶ï¼Œè®©å…¶å—åˆ°å¾ˆå¤šå¼€å‘è€…çš„é’çï¼Œè¿™é‡Œå°±åªä»‹ç»ä¸€äº›å¸¸ç”¨æ’ä»¶çš„å®‰è£…å’Œä½¿ç”¨æ•™ç¨‹ã€‚Â¶é€šç”¨è®¾ç½®æŽ¨èsettings.json æŽ¨èé€šç”¨è®¾ç½®é…ç½®å¦‚ä¸‹ï¼ˆä¸åŒ…æ‹¬æ’ä»¶é…ç½®ï¼‰ï¼š1234567891011121314151617181920&#123; //ä¿®æ”¹vscodeçš„é»˜è®¤ç»ˆç«¯ï¼ˆPowerShellã€Git Bashã€Command Promptï¼‰ "terminal.integrated.defaultProfile.windows": "Git Bash", //ç¼–è¾‘è‡ªåŠ¨ä¿å­˜ "files.autoSave": "afterDelay", //æ ¹æ®æ–‡ä»¶ç¼–ç æ ¼å¼è‡ªåŠ¨é€‰æ‹©åˆé€‚çš„ç¼–ç æ–¹å¼æ‰“å¼€æ–‡ä»¶ "files.autoGuessEncoding": true, //åœ¨æ‹¬å·åŒ¹é…æ—¶é«˜äº®æ˜¾ç¤ºç›¸åº”çš„æ‹¬å· "editor.guides.bracketPairs": true, //ä¿å­˜è‡ªåŠ¨æ ¼å¼åŒ– "editor.formatOnSave": true, //å¤åˆ¶ç²˜è´´æ—¶è‡ªåŠ¨æ ¼å¼åŒ–å¤åˆ¶å†…å®¹ "editor.formatOnPaste": true, //åœ¨é”®å…¥ä¸‹ä¸€è¡ŒåŽè‡ªåŠ¨æ ¼å¼åŒ–è¯¥è¡Œ "editor.formatOnType": true, //è‡ªåŠ¨æ¢è¡Œæ˜¾ç¤º "editor.wordWrap": "on", //å…³é—­å·¥ä½œåŒºå—é™æ¨¡å¼ "security.workspace.trust.enabled": false,&#125;Â¶ä¸»é¢˜æ’ä»¶æŽ¨èçš„ä¸‰æ¬¾ä¸»é¢˜æ’ä»¶ï¼šAtom One Dark ThemeOne Dark ProGitHub ThemeÂ¶å›¾æ ‡æ’ä»¶æŽ¨èçš„ä¸¤æ¬¾å›¾æ ‡æ’ä»¶ï¼šMaterial Icon Themevscode-iconsÂ¶é€šç”¨åŠŸèƒ½æ’ä»¶Â¶Code Runnerã€ä»£ç è¿è¡Œã€‘å…è®¸åœ¨ç¼–è¾‘å™¨ä¸­ç›´æŽ¥è¿è¡Œä»£ç ç‰‡æ®µæˆ–æ•´ä¸ªæ–‡ä»¶ï¼Œå¹¶ä¸”æ”¯æŒå¤šç§ç¼–ç¨‹è¯­è¨€ã€‚å®‰è£…å®Œæˆæ’ä»¶å¯ä»¥åšå¦‚ä¸‹ä¼˜åŒ–é…ç½®ï¼š123456// åœ¨vscodeçš„ç»ˆç«¯ä¸­è¿è¡Œå’Œè¾“å‡ºï¼ˆé»˜è®¤åœ¨æŽ§åˆ¶å°è¾“å‡ºï¼‰"code-runner.runInTerminal": true,"code-runner.executorMap": &#123; //ä¿®æ”¹javaç±»åž‹æ–‡ä»¶ç¼–è¯‘è¿è¡Œå‘½ä»¤ï¼ˆç¼–è¯‘ä½¿ç”¨utf8ç¼–ç ï¼‰ "java": "javac -encoding utf8 $fileName &amp;&amp; java -Dfile.encoding=UTF-8 $fileNameWithoutExt",&#125;,Â¶Chinese (Simplified) (ç®€ä½“ä¸­æ–‡)ã€ä¸­æ–‡è¯­è¨€åŒ…ã€‘è¿™åº”è¯¥ä¸ç”¨å¤šä»‹ç»ï¼Œæ˜¯vscodeçš„å®˜æ–¹ä¸­æ–‡è¯­è¨€åŒ…Â¶Prettier - Code formatterã€å‰ç«¯ä»£ç æ ¼å¼åŒ–å·¥å…·ã€‘æ”¯æŒè¶…å¤šè¯­è¨€ï¼ˆä¸»è¦æ”¯æŒhtmlã€cssã€jsã€vueç­‰å‰ç«¯è¯­è¨€ï¼‰ï¼Œä¸€é”®æ ¼å¼åŒ–ï¼Œç¾ŽåŒ–ä»£ç æ ¼å¼é…ç½®æ–¹å¼ï¼šåœ¨vscodeå…¨å±€è®¾ç½®é…ç½®æ–‡ä»¶settings.jsonä¸­é…ç½®æˆ–è€…å·¥ä½œåŒºè®¾ç½®é…ç½®æ–‡ä»¶.vscode/settings.jsonä¸­é…ç½®ï¼ˆä¼šè¦†ç›–å…¨å±€è®¾ç½®ï¼‰ï¼š123456789101112&#123; // ä½¿ç”¨prettieræ’ä»¶æ ¼å¼åŒ–javascriptæ–‡ä»¶ "[javascript]": &#123; "editor.defaultFormatter": "esbenp.prettier-vscode" &#125;, // ä½¿ç”¨prettieræ’ä»¶æ ¼å¼åŒ–htmlæ–‡ä»¶ "[html]": &#123; "editor.defaultFormatter": "esbenp.prettier-vscode" &#125;, // prettieræ’ä»¶æ ¼å¼åŒ–æ¢è¡Œè¡Œå®½é™åˆ¶ï¼Œè¶…è¿‡åˆ™è‡ªåŠ¨æ¢è¡Œï¼ˆåªå¯¹å‰ç«¯çš„ä¸€äº›æ–‡ä»¶æœ‰æ•ˆï¼Œå¦‚ï¼šhtmlã€cssã€jsã€vueç­‰ï¼‰ "prettier.printWidth": 120,&#125;æˆ–è€…åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸­åˆ›å»ºæ–‡ä»¶.prettierrcè¿›è¡Œé…ç½®ï¼ˆä¼šè¦†ç›–å…¨å±€æˆ–å·¥ä½œåŒºè®¾ç½®ï¼‰ï¼š123456&#123; "singleQuote": true, "printWidth": 120, "trailingComma": "none", "semi": false&#125;&quot;singleQuote&quot;: trueï¼šå¯ç”¨å•å¼•å·&quot;printWidth&quot;: 120ï¼šé™åˆ¶æ¯è¡Œå­—ç¬¦æ•°ä¸º 120&quot;trailingComma&quot;: &quot;none&quot;ï¼šè‡ªåŠ¨åˆ é™¤æœ«å°¾é€—å·&quot;semi&quot;: falseï¼šç¦ç”¨åˆ†å·Â¶Error Lensã€é”™è¯¯æç¤ºã€‘å¯ä»¥å°†åŽŸå…ˆæ˜¾ç¤ºçš„é—®é¢˜æ˜¾ç¤ºåœ¨å¯¹åº”è¡Œå³ä¾§å¹¶é«˜äº®ã€‚æ•ˆæžœå¦‚ä¸‹ï¼šÂ¶Live Serverã€æœ¬åœ°WebæœåŠ¡å™¨ã€‘æä¾›å®žæ—¶ Web æœåŠ¡å™¨å’Œè‡ªåŠ¨åˆ·æ–°åŠŸèƒ½ï¼Œé€‚ç”¨äºŽç®€å•ç½‘é¡µæœ¬åœ°å¿«é€Ÿéƒ¨ç½²å’Œè¿è¡Œè°ƒè¯•ç­‰ã€‚Â¶Path Intellisenseã€è·¯å¾„è¡¥å…¨ã€‘åœ¨è¾“å…¥è·¯å¾„æ—¶ï¼Œæœ‰æ™ºèƒ½æç¤ºè¡¥å…¨ã€‚æ•ˆæžœå¦‚ä¸‹ï¼šÂ¶IntelliJ IDEA Keybindingsã€IDEAå¿«æ·é”®ã€‘è¿™æ˜¯ä¸€ä¸ªé’ˆå¯¹ VS Code çš„ IntelliJ IDEA å¿«æ·é”®ç§»æ¤ã€‚å¯ä»¥å‘ä½¿ç”¨IDEAå¿«æ·é”®ä¸€æ ·ä½¿ç”¨vscodeã€‚Â¶Partial Diffã€æ–‡ä»¶å·®å¼‚æ¯”å¯¹ã€‘æ¯”è¾ƒä¸¤ä¸ªæ–‡æœ¬æ–‡ä»¶ä¹‹é—´çš„å·®å¼‚ã€‚Â¶Image previewã€å›¾åƒé¢„è§ˆã€‘å¯ä»¥é¢„è§ˆå¼•å…¥çš„å›¾åƒã€‚æ•ˆæžœå¦‚ä¸‹ï¼šÂ¶Copy Path (Unix Style)å¤åˆ¶æ–‡ä»¶æˆ–ç›®å½•unixé£Žæ ¼çš„è·¯å¾„Â¶GBK to UTF8 for vscodeã€æ–‡ä»¶ç¼–ç è½¬åŒ–ã€‘å¯ä»¥å°†æ–‡ä»¶åœ¨GBKä¸ŽUTF8ç¼–ç ä¹‹é—´æ— ç‘•è½¬æ¢Â¶Doxygen Documentation Generatorã€æ–‡æ¡£ç”Ÿæˆå™¨ã€‘å†™æ³¨é‡Šå’Œæ–‡æ¡£æ—¶éžå¸¸å¥½ç”¨ã€‚æ•ˆæžœå¦‚ä¸‹ï¼šÂ¶Markdownæ’ä»¶å¯é€‰æ’ä»¶ï¼šMarkdown Preview Enhancedï¼šå¢žå¼º vscode ä¸­ Markdown é¢„è§ˆåŠŸèƒ½ã€‚åŒ…æ‹¬æ›´å¥½çš„é¢„è§ˆæ˜¾ç¤ºæ•ˆæžœã€å¢žåŠ ä¾§è¾¹æ ‡é¢˜å±•ç¤ºã€æ”¯æŒ:emoji:æ ¼å¼è¡¨æƒ…æ¸²æŸ“ç­‰ã€‚Markdown All in Oneï¼šå¢žå¼ºvscodeä¸­Markdownç¼–å†™åŠŸèƒ½ï¼Œå¦‚ï¼šè‡ªåŠ¨è¡¥å…¨ã€æ ‡é¢˜åºå·è‡ªåŠ¨ç»´æŠ¤ç­‰ã€‚Paste Imageï¼šå°†å›¾åƒç›´æŽ¥ä»Žå‰ªè´´æ¿ç²˜è´´åˆ° markdown æ–‡ä»¶é‡Œã€‚é»˜è®¤ä¿å­˜å›¾ç‰‡åˆ°å½“å‰ markdown æ–‡ä»¶æ‰€åœ¨ç›®å½•ï¼Œå¦‚æžœå¸Œæœ›ä¿å­˜åˆ° markdown æ–‡ä»¶æ‰€åœ¨ç›®å½•çš„åŒåæ–‡ä»¶å¤¹é‡Œï¼Œå¯å¦‚ä¸‹é…ç½®ï¼š12345678&#123; //å›¾ç‰‡ç²˜è´´ä¿æŒè·¯å¾„ "pasteImage.path": "$&#123;currentFileDir&#125;/$&#123;currentFileNameWithoutExt&#125;", //å›¾ç‰‡ç²˜è´´ä»£ç  //"pasteImage.insertPattern": "![$&#123;imageFileNameWithoutExt&#125;]($&#123;imageFilePath&#125;)", //å›¾ç‰‡ç²˜è´´æ—¶è‡ªå®šä¹‰è·¯å¾„ //"pasteImage.showFilePathConfirmInputBox": true&#125;å¯é€šè¿‡Ctrl+Shift+Pæ‰“å¼€å‘½ä»¤é¢æ¿è¾“å…¥Paste Image æ¥å®žçŽ°å›¾ç‰‡ç²˜è´´ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨å¿«æ·é”®Ctrl+Alt+Vç›´æŽ¥ç²˜è´´ï¼Œä½†å¿«æ·é”®å¯èƒ½ä¼šå’Œå…¶ä»–æ’ä»¶ï¼ˆå¦‚ï¼šIntelliJ IDEA Keybindingsï¼‰å†²çªï¼Œæ‰€ä»¥æœ€å¥½ä¿®æ”¹ä¸‹å¿«æ·é”®ï¼Œæ¯”å¦‚ä¿®æ”¹æˆCtrl+Alt+V Ctrl+Alt+V ã€‚Â¶Gitç®¡ç†æ’ä»¶å¯é€‰æ’ä»¶ï¼šGitLensï¼šè¯¥æ’ä»¶æä¾›äº†å¼ºå¤§çš„ Git å·¥å…·é›†ï¼Œå¯ä»¥æ–¹ä¾¿åœ°æŸ¥çœ‹ Git åŽ†å²è®°å½•ã€æ¯”è¾ƒä¿®æ”¹å¹¶æ‰§è¡Œå…¶ä»– Git æ“ä½œã€‚Git Historyï¼šè¯¥æ’ä»¶æä¾›äº†ä¸€ä¸ªäº¤äº’å¼çš„ Git åŽ†å²è®°å½•è§†å›¾ï¼Œå¯ä»¥æ–¹ä¾¿åœ°æŸ¥çœ‹å’Œæ¯”è¾ƒä¸åŒç‰ˆæœ¬ä¹‹é—´çš„ä»£ç å·®å¼‚ã€‚Git Graphï¼šè¯¥æ’ä»¶æä¾›äº†ä¸€ä¸ªå¯è§†åŒ–çš„ Git åˆ†æ”¯å›¾å½¢ç•Œé¢ï¼Œå¯ä»¥æ–¹ä¾¿åœ°æŸ¥çœ‹å’Œç®¡ç† Git åˆ†æ”¯åŠå…¶åŽ†å²è®°å½•ã€‚Git Blameï¼šè¯¥æ’ä»¶åœ¨ç¼–è¾‘å™¨ä¸­æ˜¾ç¤ºæ¯è¡Œä»£ç æœ€è¿‘çš„ä¿®æ”¹è€…å’Œä¿®æ”¹æ—¶é—´ï¼Œæ–¹ä¾¿ç”¨æˆ·å¿«é€Ÿå®šä½åˆ°ç›¸å…³ç‰ˆæœ¬ã€‚Add to GIT Ignore æ·»åŠ gitå¿½ç•¥æ–‡ä»¶åˆ°.gitignoreä¸­Â¶Javaæ’ä»¶ä¾èµ–æ’ä»¶ï¼šExtension Pack for Java JAVAæ’ä»¶æ‰©å±•åŒ…ï¼Œå…¶å«äº†ä»¥ä¸‹å¤šä¸ªæ’ä»¶ã€‚åªéœ€å®‰è£…è¿™ä¸€ä¸ªä¸‹é¢çš„æ’ä»¶ä¹Ÿå°±éƒ½è·Ÿç€è‡ªåŠ¨å®‰è£…äº†ã€‚Maven for Java è¯¥æ’ä»¶æä¾›äº†Mavené¡¹ç›®çš„æž„å»ºå’Œä¾èµ–ç®¡ç†åŠŸèƒ½ã€‚Debugger for Java è¯¥æ’ä»¶æä¾›äº†å¯¹Javaåº”ç”¨ç¨‹åºçš„è°ƒè¯•æ”¯æŒProject Manager for Java æä¾›äº†æ–¹ä¾¿çš„Javaé¡¹ç›®ç®¡ç†æ–¹å¼ã€‚è¯¥æ’ä»¶å¯ä»¥åˆ›å»ºé¡¹ç›® ã€æ‰“å¼€é¡¹ç›®ã€åˆ‡æ¢é¡¹ç›®ç­‰ã€‚Test Runner for Java è¯¥æ’ä»¶æä¾›äº†JUnitæµ‹è¯•è¿è¡Œå™¨ï¼Œç”¨äºŽåœ¨VS Codeä¸­è¿è¡Œå’Œè°ƒè¯•Javaå•å…ƒæµ‹è¯•Language Support for Javaâ„¢ by Red Hat è¯¥æ’ä»¶æä¾›äº†è¯­æ³•é«˜äº®ã€ä»£ç è¡¥å…¨å’Œé”™è¯¯æç¤ºç­‰åŠŸèƒ½ã€‚å¦‚æžœæç¤ºæ’ä»¶éœ€è¦java11ï¼Œåˆ™åœ¨æœ¬åœ°å®‰è£…å¥½jdk11ï¼Œç„¶åŽåœ¨settings.jsonä¸­æ·»åŠ å¦‚ä¸‹ä»£ç 1"java.home": "D:\\Development\\Java\\jdk-11",Â¶Golangæ’ä»¶ä¾èµ–æ’ä»¶ï¼šGo æä¾›äº†æ™ºèƒ½æ„ŸçŸ¥ã€ä»£ç è¡¥å…¨ã€è°ƒè¯•å™¨ã€æµ‹è¯•æ¡†æž¶æ”¯æŒã€ä»£ç æ ¼å¼åŒ–ã€é‡æž„å·¥å…·ç­‰åŠŸèƒ½Code Runner ï¼ˆå¯é€‰ï¼‰Go æ’ä»¶å®‰è£…å¥½åŽï¼Œåªè¦æ‰“å¼€ä¸€ä¸ª.goæ–‡ä»¶ï¼Œvscodeå°±ä¼šæç¤ºä¸‹è½½goç›¸å…³è°ƒè¯•å’Œå¼€å‘çš„exeå·¥å…·ï¼Œå›½å†…å› ä¸ºå¢™çš„åŽŸå› ï¼Œç»å¸¸å¤±è´¥ã€‚æ­¤æ—¶éœ€è¦è®¾ç½®go çš„ä»£ç†ï¼Œå‰©ä¸‹é‡æ–°æ‰“å¼€vscodeæ ¹æ®Goæ’ä»¶æç¤ºç‚¹å‡»ä¸‹è½½goä¾èµ–å·¥å…·å³å¯ã€‚1go env -w GOPROXY=https://goproxy.cn,directè¿™äº›ä¾èµ–å·¥å…·ä¼šè‡ªåŠ¨å®‰è£…åˆ°%GOPATH%/binç›®å½•ä¸‹ã€‚Â¶C/C++æ’ä»¶ä¾èµ–æ’ä»¶ï¼š[C/C++ Extension Pack](C/C++ Extension Pack) C/C++æ’ä»¶æ‰©å±•åŒ…ï¼Œå…¶å«äº†ä»¥ä¸‹å¤šä¸ªæ’ä»¶ã€‚åªéœ€å®‰è£…è¿™ä¸€ä¸ªä¸‹é¢çš„æ’ä»¶ä¹Ÿå°±éƒ½è·Ÿç€è‡ªåŠ¨å®‰è£…äº†ã€‚C/C++ æä¾›äº† C/C++ è¯­è¨€å¼€å‘æ‰€éœ€çš„ IntelliSenseã€è°ƒè¯•ã€ä»£ç å¯¼èˆªç­‰åŠŸèƒ½ã€‚ï¼ˆå¦‚æžœä»…ä»…æ˜¯å•æ–‡ä»¶å¼€å‘ï¼Œè¿™ä¸€ä¸ªæ’ä»¶å°±å¤Ÿäº†ï¼‰C/C++ Themes æä¾›äº†å¤šç§ä¸»é¢˜ï¼ŒåŒ…æ‹¬æš—è‰²å’Œäº®è‰²ä¸»é¢˜ç­‰CMake æä¾›äº† CMake é¡¹ç›®æ”¯æŒï¼ŒåŒ…æ‹¬ä»£ç è¡¥å…¨ã€è¯­æ³•é«˜äº®å’Œè‡ªåŠ¨å®Œæˆç­‰åŠŸèƒ½ã€‚CMake Tools æ’ä»¶æ˜¯é’ˆå¯¹ CMake é¡¹ç›®çš„å·¥å…·é›†åˆï¼Œæä¾›äº†è‡ªåŠ¨å®Œæˆã€ä»£ç è¡¥å…¨ã€è¯­æ³•é«˜äº®ç­‰å¸¸è§åŠŸèƒ½ï¼Œå¹¶ä¸”è¿˜æ”¯æŒè°ƒè¯•ã€è¿è¡Œæµ‹è¯•ç­‰é«˜çº§åŠŸèƒ½ï¼Œå¯ä»¥è®©ç”¨æˆ·æ›´æ–¹ä¾¿åœ°åˆ›å»ºã€ç¼–è¯‘å’Œè°ƒè¯• CMake é¡¹ç›®ï¼Œæé«˜å¼€å‘æ•ˆçŽ‡å’Œä»£ç è´¨é‡ã€‚Â¶Pythonæ’ä»¶ä¾èµ–æ’ä»¶ï¼šPython æä¾›äº†ä»£ç ç¼–è¾‘ã€è¯­æ³•é«˜äº®ã€è‡ªåŠ¨å®Œæˆç­‰åŠŸèƒ½ï¼Œæ”¯æŒå¤šç§ Python ç‰ˆæœ¬ã€‚Pylance æä¾›äº†æ›´å¥½çš„ Python ä»£ç æ™ºèƒ½æ„ŸçŸ¥å’Œç±»åž‹æ£€æŸ¥åŠŸèƒ½ã€‚Code Runner ï¼ˆå¯é€‰ï¼‰å®‰è£…å¥½æ’ä»¶åŽé»˜è®¤è‡ªåŠ¨å¯é€‰åŠ å…¥å¦‚ä¸‹vscodeè®¾ç½®é…ç½®ï¼š123456&#123; // pythonæ’ä»¶æ ¼å¼åŒ–æ¢è¡Œè¡Œå®½é™åˆ¶ï¼Œè¶…è¿‡åˆ™è‡ªåŠ¨æ¢è¡Œï¼ˆåªå¯¹pythonæœ‰æ•ˆï¼‰ "python.formatting.autopep8Args": [ "--max-line-length=200" ],&#125;Â¶Vueæ’ä»¶ä¾èµ–æ’ä»¶ï¼šVue Language Features (Volar) æä¾›äº†è¯­æ³•é«˜äº®ã€ä»£ç ç‰‡æ®µã€è‡ªåŠ¨å®Œæˆã€ä»£ç æ£€æŸ¥ã€è°ƒè¯•å’Œå®šä¹‰è·³è½¬ç­‰åŠŸèƒ½ã€‚Volarå¯å–ä»£ä»¥å‰çš„Veturã€‚Vue Peek ï¼ˆå¯é€‰ï¼‰æä¾›æ¨¡æ¿è·³è½¬ç»„ä»¶ï¼ŒæŸ¥çœ‹å®šä¹‰ç­‰åŠŸèƒ½ã€‚vue-helperï¼ˆå¯é€‰ï¼‰ä¸“ä¸ºvueé€‚é… Element-UIã€VUX å’Œ IVIEW æä¾›æ›´å¥½çš„æ‰©å±•ï¼ˆå¦‚æç¤ºè¡¥é½ã€æ¨¡æ¿è·³è½¬ç»„ä»¶ç­‰ï¼‰CSS Peekï¼ˆå¯é€‰ï¼‰è·³è½¬åˆ°æ ·å¼çš„å¤–éƒ¨å®šä¹‰ï¼ˆå®šä½å¤–éƒ¨CSSï¼‰Auto Close Tagï¼ˆå¯é€‰ï¼‰è‡ªåŠ¨é—­åˆHTML/XMLæ ‡ç­¾Auto Rename Tagï¼ˆå¯é€‰ï¼‰è‡ªåŠ¨å®Œæˆæ ‡ç­¾çš„åŒæ­¥ä¿®æ”¹EsLintï¼ˆå¯é€‰ï¼‰ç¼–ç è§„èŒƒä»¥åŠä»£ç æ£€æŸ¥JavaScript Boosterï¼ˆå¯é€‰ï¼‰jså†™æ³•ä¼˜åŒ–æç¤ºï¼ˆå†™çš„ä¸å¤Ÿå¥½ï¼Œæˆ–æœ‰å…¶å®ƒå†™æ³•ï¼Œæœ‰ç¯æ³¡æç¤ºï¼‰Â¶è¿œç¨‹å¼€å‘æ’ä»¶Remote - SSHï¼šè¯¥æ’ä»¶æä¾›äº†é€šè¿‡ SSH è¿žæŽ¥è¿œç¨‹æœºå™¨çš„åŠŸèƒ½ï¼Œä½¿ç”¨æˆ·å¯ä»¥åœ¨æœ¬åœ°çš„ VSCode ç¼–è¾‘å™¨ä¸­å¯¹è¿œç¨‹æœºå™¨ä¸Šçš„æ–‡ä»¶è¿›è¡Œç¼–è¾‘ã€è°ƒè¯•å’Œæµ‹è¯•ç­‰æ“ä½œã€‚å…¶å«äº†ä»¥ä¸‹å¤šä¸ªæ’ä»¶ã€‚Remote - SSH: Editing Configuration Filesï¼šè¯¥æ’ä»¶ä¸ºè¿œç¨‹æœºå™¨ä¸Šçš„é…ç½®æ–‡ä»¶æä¾›äº†è¯­è¨€æ”¯æŒå’Œ IntelliSense åŠŸèƒ½ï¼ŒåŒ…æ‹¬å¸¸è§çš„é…ç½®æ–‡ä»¶æ ¼å¼ï¼Œå¦‚ JSONã€YAMLã€XML ç­‰ã€‚Remote - SSH: Explorerï¼šè¯¥æ’ä»¶æä¾›äº†ä¸€ä¸ªåœ¨æœ¬åœ°æµè§ˆè¿œç¨‹æœºå™¨æ–‡ä»¶ç³»ç»Ÿçš„èµ„æºç®¡ç†å™¨ï¼Œä½¿ç”¨æˆ·å¯ä»¥æ–¹ä¾¿åœ°æŸ¥çœ‹å’Œæ“ä½œè¿œç¨‹æœºå™¨ä¸Šçš„æ–‡ä»¶å’Œç›®å½•ã€‚Â¶é¡¹ç›®ç®¡ç†æ’ä»¶Project Managerä¿å­˜é¡¹ç›®é€‰save projectï¼Œå°†ä¼šçœ‹åˆ°å·²ç»ä¿å­˜çš„å„ç§é¡¹ç›®ã€‚2.åˆ‡æ¢é¡¹ç›®æˆ–è€…ç‚¹å‡»å·¦ä¸‹è§’å³å¯åœ¨ä¸Šæ–¹åˆ—å‡ºä¿å­˜çš„é¡¹ç›®ï¼Œç‚¹å‡»è¦åˆ‡æ¢çš„é¡¹ç›®å³å¯è¿›å…¥è¯¥é¡¹ç›®é‡Œå·¥ä½œã€‚Â¶å·¥ä½œåŒºç®¡ç†æ’ä»¶Workspace Explorer æä¾›äº†å¤švscodeå·¥ä½œåŒºä¸‹ç®¡ç†å’Œåˆ‡æ¢ç­‰å®žç”¨ä¸”æ–¹ä¾¿çš„åŠŸèƒ½ã€‚vscodeæœ¬èº«å°±æœ‰æä¾›å·¥ä½œåŒºåŠŸèƒ½ï¼Œç›®çš„æ˜¯èƒ½å¤Ÿé’ˆå¯¹ä¸åŒå·¥ä½œçŽ¯å¢ƒï¼ˆæ¯”å¦‚Javaã€Golangã€Vueç­‰ï¼‰è®¾ç½®ä¸åŒçš„è®¾ç½®å’Œæ’ä»¶å¯ç”¨ï¼Œåªéœ€è¦æ“ä½œ â€œæ–‡ä»¶â€ã€‹â€œå°†å·¥ä½œåŒºå¦å­˜ä¸ºâ€ ï¼Œå°±èƒ½æŠŠå½“å‰é¡¹ç›®ä¿å­˜ä¸ºä¸€ä¸ªå·¥ä½œåŒºï¼Œæ¯”å¦‚å¯¹äºŽä¸€ä¸ªJavaé¡¹ç›®ï¼Œå°±å¯ä»¥æŠŠå…¶ä»–ç”¨ä¸åˆ°çš„æ’ä»¶â€œç¦ç”¨ï¼ˆå·¥ä½œåŒºï¼‰â€æŽ‰ï¼Œç„¶åŽä¿å­˜ä¸ºjava.code-workspaceæ–‡ä»¶ï¼Œä¹‹åŽå¦‚æžœéœ€è¦å¼€å‘javaé¡¹ç›®ï¼Œå°±åªéœ€è¦ç”¨vscodeæ‰“å¼€è¿™ä¸ªæ–‡ä»¶ä½œä¸ºå·¥ä½œåŒºï¼Œç„¶åŽæŠŠæ‰€æœ‰éœ€è¦å¼€å‘çš„javaé¡¹ç›®éƒ½åŠ å…¥è¿›æ¥ï¼Œè¿™æ ·è¿™äº›javaé¡¹ç›®å°±éƒ½èƒ½å…±äº«åˆ°è¿™ä¸ªå·¥ä½œåŒºçš„è®¾ç½®å’Œæ’ä»¶é…ç½®äº†ã€‚å·¥ä½œåŒºè™½ç„¶å¥½ç”¨ï¼Œä½†æ˜¯æ“ä½œä¸å¤ªæ–¹ä¾¿ï¼Œè¿™æ—¶å¯ä»¥ä½¿ç”¨ Workspace Explorer æ’ä»¶æ¥ç®¡ç†å’Œåˆ‡æ¢ä¸åŒçš„å·¥ä½œåŒºï¼Œè¶…å®žç”¨çš„ã€‚éœ€è¦å¦‚ä¸‹é…ç½®ï¼š1234&#123; //ã€Workspace Exploreræ’ä»¶ã€‘vscodeå·¥ä½œåŒºå­˜å‚¨ç›®å½• "workspaceExplorer.workspaceStorageDirectory": "E:\\Code\\vscode-workspace"&#125;Â¶vscodeå¸¸ç”¨æŠ€å·§Â¶è½¬åˆ°å®šä¹‰æ–‡ä»¶åœ¨æ–°æ ‡ç­¾é¡µæ‰“å¼€vscodeè½¬åˆ°å®šä¹‰é»˜è®¤æ˜¯ç›´æŽ¥åœ¨å½“å‰æ ‡ç­¾é¡µç›´æŽ¥æ‰“å¼€å¹¶è¦†ç›–çš„ï¼ˆé¢„è§ˆæ¨¡å¼æ‰“å¼€ï¼‰ï¼Œè¿™æ ·çš„æˆ–å°±ä¸å¥½åœ¨å¤šä¸ªæ–‡ä»¶é—´å¿«é€Ÿè¿›è¡Œåˆ‡æ¢äº†ï¼Œé‚£ä¹ˆæ€Žä¹ˆè§£å†³è¿™ä¸ªé—®é¢˜å‘¢ï¼Ÿå…¶å®žvscodeè‡ªèº«å°±æœ‰è¿™æ–¹é¢éœ€æ±‚çš„è§£å†³æ–¹æ¡ˆã€‚æ³¨æ„è§‚å¯Ÿæ ‡ç­¾é¡µä¸Šæ–‡å­—æ˜¯å¦æ˜¯æ–œä½“ã€‚å¯é€šè¿‡åŒå‡»å¯¹åº”æ–‡ä»¶æˆ–è€…æ ‡ç­¾é¡µè¿›è¡Œé¢„è§ˆæ¨¡å¼å’Œå›ºå®šæ¨¡å¼åˆ‡æ¢ã€‚ï¼ˆ1ï¼‰å¦‚æžœæ˜¯æ–œä½“è¯´æ˜Žæ˜¯é¢„è§ˆæ¨¡å¼æ‰“å¼€æ–‡ä»¶ã€‚é»˜è®¤æ‰“å¼€å…¶ä»–æ–‡ä»¶æ—¶æ­¤æ ‡ç­¾é¡µä¸Šçš„æ–‡ä»¶ä¼šè¢«å…¶ä»–æ–‡ä»¶è¦†ç›–ï¼ˆ2ï¼‰å¦‚æžœä¸æ˜¯æ–œä½“è¯´æ˜Žæ˜¯å›ºå®šæ¨¡å¼æ‰“å¼€æ–‡ä»¶ï¼Œå³å›ºå®šè¯¥æ–‡ä»¶åœ¨æ­¤æ ‡ç­¾é¡µä¸Šä¸è¢«å…¶ä»–æ–‡ä»¶è¦†ç›–ã€‚Â¶å¸¸ç”¨æ’ä»¶ä¸€è§ˆåç§°ç®€è¿°Auto Close Tagè‡ªåŠ¨é—­åˆHTMLæ ‡ç­¾Auto Importimportæç¤ºAuto Rename Tagä¿®æ”¹HTMLæ ‡ç­¾æ—¶ï¼Œè‡ªåŠ¨ä¿®æ”¹åŒ¹é…çš„æ ‡ç­¾Better Alignå¯¹é½èµ‹å€¼ç¬¦å·å’Œæ³¨é‡ŠBetter Commentsç¼–å†™æ›´åŠ äººæ€§åŒ–çš„æ³¨é‡ŠCode Runnerè¿è¡Œé€‰ä¸­ä»£ç æ®µï¼ˆæ”¯æŒå¤šæ•°è¯­è¨€ï¼‰Code Spell checkerå•è¯æ‹¼å†™æ£€æŸ¥Color Highlighté¢œè‰²å€¼åœ¨ä»£ç ä¸­é«˜äº®æ˜¾ç¤ºColor Infoå°çª—å£æ˜¾ç¤ºé¢œè‰²å€¼ï¼Œrgb,hsl,cmyk,hexç­‰ç­‰Color Pickeræ‹¾è‰²å™¨CSS-in-JSCSS-in-JSé«˜äº®æç¤ºå’Œè½¬æ¢Debugger for Chromeè°ƒè¯•ChromeDocument Thisæ³¨é‡Šæ–‡æ¡£ç”ŸæˆDotENV.envæ–‡ä»¶é«˜äº®EditorConfig for VS CodeEditorConfigæ’ä»¶Emojiåœ¨ä»£ç ä¸­è¾“å…¥emojiendyå°†è¾“å…¥å…‰æ ‡è·³è½¬åˆ°å½“å‰è¡Œæœ€åŽé¢ESLintESLintæ’ä»¶ï¼Œé«˜äº®æç¤ºFile Peekæ ¹æ®è·¯å¾„å­—ç¬¦ä¸²ï¼Œå¿«é€Ÿå®šä½åˆ°æ–‡ä»¶filesizeçŠ¶æ€æ æ˜¾ç¤ºå½“å‰æ–‡ä»¶å¤§å°Find-Jumpå¿«é€Ÿè·³è½¬åˆ°æŒ‡å®šå•è¯ä½ç½®Font-awesome codes for htmlFontAwesomeæç¤ºä»£ç æ®µftp-syncåŒæ­¥æ–‡ä»¶åˆ°ftpGit Blameåœ¨çŠ¶æ€æ æ˜¾ç¤ºå½“å‰è¡Œçš„Gitä¿¡æ¯Git History(git log)æŸ¥çœ‹git loggitignore.gitignoreæ–‡ä»¶è¯­æ³•GitLensæ˜¾ç¤ºæ–‡ä»¶æœ€è¿‘çš„commitå’Œä½œè€…ï¼Œæ˜¾ç¤ºå½“å‰è¡Œcommitä¿¡æ¯GraphQL for VSCodegraphqlé«˜äº®å’Œæç¤ºGuidesé«˜äº®ç¼©è¿›åŸºå‡†çº¿HTML CSS Class CompletionCSS classæç¤ºHTML CSS Supportcssæç¤ºï¼ˆæ”¯æŒvueï¼‰HTMLHintHTMLæ ¼å¼æç¤ºhtmltagwrapå¿«æ·åŒ…è£¹htmlæ ‡ç­¾htmltagwrapåŒ…è£¹HTMLImport Beautifyimportåˆ†ç»„ã€æŽ’åºã€æ ¼å¼åŒ–Import Costè¡Œå†…æ˜¾ç¤ºå¯¼å…¥ï¼ˆimport/requireï¼‰çš„åŒ…çš„å¤§å°Indenticatorç¼©è¿›é«˜äº®IntelliSense for css class namescss classè¾“å…¥æç¤ºJavaScript (ES6) code snippetsES6è¯­æ³•ä»£ç æ®µJS Refactorä»£ç é‡æž„å·¥å…·ï¼Œæå–å‡½æ•°ã€å˜é‡é‡å‘½åç­‰ç­‰JSON to TSJSONç»“æž„è½¬åŒ–ä¸ºtypescriptçš„interfacejumpyå¿«é€Ÿè·³è½¬åˆ°æŒ‡å®šå•è¯ä½ç½®markdownlintMarkdownæ ¼å¼æç¤ºNode modules resolveå¿«é€Ÿå¯¼èˆªåˆ°Nodeæ¨¡å—npmè¿è¡Œnpmå‘½ä»¤npm Intellisenseå¯¼å…¥æ¨¡å—æ—¶ï¼Œæç¤ºå·²å®‰è£…æ¨¡å—åç§°Path Autocompleteè·¯å¾„å®Œæˆæç¤ºPath Intellisenseå¦ä¸€ä¸ªè·¯å¾„å®Œæˆæç¤ºPolacodeå°†ä»£ç ç”Ÿæˆå›¾ç‰‡PostCss SortingcssæŽ’åºPrettier - Code formatterprettierå®˜æ–¹æ’ä»¶Prettify JSONæ ¼å¼åŒ–JSONProject Managerå¿«é€Ÿåˆ‡æ¢é¡¹ç›®vscode-iconsæ–‡ä»¶å›¾æ ‡ï¼Œæ–¹ä¾¿å®šä½æ–‡ä»¶VueHelperVue2ä»£ç æ®µï¼ˆåŒ…æ‹¬Vue2 apiã€vue-router2ã€vuex2ï¼‰ctrl+é¼ æ ‡ å¯ä»¥å®šä½å‡½æ•°ç­‰ä½ç½®Â¶è§£å†³vscodeå¯¹Cç›˜å ç”¨é—®é¢˜éšç€ä½¿ç”¨çš„æ—¶é—´çš„å¢žåŠ å’ŒåŠŸèƒ½æ’ä»¶å®‰è£…çš„å¢žåŠ ï¼Œvscodeåœ¨Cç›˜ä¸Šçš„ç¼“å­˜å’Œæ’ä»¶ç­‰æ–‡ä»¶å ç”¨ä¼šè¶Šæ¥è¶Šå¤§ã€‚vscodeåœ¨Cç›˜ä¸Šæœ‰å¦‚ä¸‹å‡ ä¸ªé‡è¦çš„ç›®å½•ï¼šæ’ä»¶æ‰©å±•ç›®å½•ï¼š %USERPROFILE%\.vscodeå…¶ä¸­%USERPROFILE%ä¸ºï¼šC:\Users\ç”¨æˆ·åã€‚åŒ…å«äº†æ‰€æœ‰ç”¨æˆ·ç›¸å…³çš„é…ç½®ã€æ’ä»¶å’Œæ‰©å±•ç­‰ä¿¡æ¯ã€‚ä¾‹å¦‚ï¼Œå®‰è£…çš„æ’ä»¶ã€ä»£ç ç‰‡æ®µã€é”®ç»‘å®šç­‰éƒ½ä¿å­˜åœ¨è¿™ä¸ªç›®å½•ä¸‹ã€‚åº”ç”¨ç¨‹åºæ•°æ®ç›®å½•ï¼š %USERPROFILE%\AppData\Roaming\CodeåŒ…å«äº†ä¸Žåº”ç”¨ç¨‹åºæœ¬èº«ç›¸å…³çš„é…ç½®å’Œæ•°æ®ã€‚ä¾‹å¦‚ï¼Œæœ€è¿‘æ‰“å¼€çš„æ–‡ä»¶åˆ—è¡¨ã€è‡ªå®šä¹‰ä¸»é¢˜ç­‰éƒ½ä¿å­˜åœ¨è¿™ä¸ªç›®å½•ä¸‹ã€‚ç¼“å­˜ç›®å½•ï¼š%USERPROFILE%\AppData\Local\Programs\Microsoft VS CodeåŒ…å«äº†åº”ç”¨ç¨‹åºä½¿ç”¨çš„ç¼“å­˜æ–‡ä»¶ã€‚ä¾‹å¦‚ï¼Œè¯­è¨€æœåŠ¡å™¨çš„ç¼“å­˜æ–‡ä»¶ã€æ‰©å±•ä¾èµ–é¡¹ç­‰éƒ½ä¿å­˜åœ¨è¿™ä¸ªç›®å½•ä¸‹ã€‚é’ˆå¯¹ä»¥ä¸Šé—®é¢˜ä¸‹é¢å°†æä¾›ä¸¤ç§è§£å†³æ–¹æ¡ˆã€‚Â¶å®šæœŸæ¸…ç†æ–¹æ¡ˆä»¥ä¸Šç›®å½•æœ‰äº›æ–‡ä»¶ä¸­â€œç¼“å­˜ç›®å½•â€å¯ä»¥å®Œå…¨åˆ é™¤ï¼Œè€Œâ€œåº”ç”¨ç¨‹åºæ•°æ®ç›®å½•â€åªèƒ½éƒ¨åˆ†åˆ é™¤ï¼Œä¸ºäº†æ–¹ä¾¿ï¼Œè¿™é‡Œæä¾›ä¸ªæ¸…ç†è„šæœ¬ï¼švscodeç¼“å­˜æ¸…ç†.bat1234567891011121314151617181920212223242526272829303132@REM example:@REM del "%userprofile%/AppData/Local/Microsoft/vscode-cpptools/ipch/" /s /q /f@REM rd "%userprofile%/AppData/Local/Microsoft/vscode-cpptools/ipch/" /s /q@REM md "%userprofile%/AppData/Local/Microsoft/vscode-cpptools/ipch/"@echo offcall:EmptyOneDir "%userprofile%\AppData\Local\Microsoft\vscode-cpptools\ipch"call:EmptyOneDir "%userprofile%\AppData\Roaming\Code\CachedExtensionVSIXs"call:EmptyOneDir "%userprofile%\AppData\Roaming\Code\Cache"call:EmptyOneDir "%userprofile%\AppData\Roaming\Code\CachedData"call:EmptyOneDir "%userprofile%\AppData\Roaming\Code\CachedExtensions"call:EmptyOneDir "%userprofile%\AppData\Roaming\Code\CachedExtensionVSIXs"call:EmptyOneDir "%userprofile%\AppData\Roaming\Code\Code Cache"call:EmptyOneDir "%userprofile%\AppData\Roaming\Code\Crashpad"call:EmptyOneDir "%userprofile%\AppData\Roaming\Code\logs"call:EmptyOneDir "%userprofile%\AppData\Roaming\Code\Service Worker\CacheStorage"call:EmptyOneDir "%userprofile%\AppData\Roaming\Code\Service Worker\ScriptCache"call:EmptyOneDir "%userprofile%\AppData\Roaming\Code\User\workspaceStorage"call:EmptyOneDir "%userprofile%\AppData\Roaming\Code\User\History"goto end:EmptyOneDir rem same as Let empty [path] /q echo empty %1 echo del %1 /s /q /f del %1 /s /q /f echo rd %1 /s /q rd %1 /s /q echo md %1 md %1:endå®šæœŸåŒå‡»è¿è¡Œä¸€æ¬¡ï¼Œå°±èƒ½é‡Šæ”¾vscodeå ç”¨çš„å¤§éƒ¨åˆ†ç©ºé—´Â¶æ”¹å­˜å‚¨ç›®å½•æ–¹æ¡ˆå®žçŽ°åŽŸç†ï¼šå…ˆå°†vscodeåŽŸæœ¬åœ¨Cç›˜çš„ä¸‰å¤§ç›®å½•ç§»åŠ¨ï¼ˆå‰ªåˆ‡ï¼‰åˆ°å…¶ä»–ç›˜çš„æ–°ç›®å½•ä¸Šï¼Œå¹¶é€šè¿‡åœ¨Cç›˜åŽŸä½ç½®ä¸Šåˆ›å»ºæŒ‡å‘æ–°çš„å­˜å‚¨ç›®å½•çš„è½¯è¿žæŽ¥å³å¯ï¼ˆè½¯è¿žæŽ¥ç±»ä¼¼å¿«æ·é”®ï¼Œä½†ä¸æ˜¯ï¼‰ã€‚è¿™æ ·ä»¥åŽvscodeå³ä½¿è¦å­˜å‚¨æ•°æ®åˆ°Cç›˜ä¸Šï¼Œä½†æ˜¯Cç›˜ä¸Šç›¸å…³å­˜å‚¨ç›®å½•åªæ˜¯è½¯è¿žæŽ¥ï¼Œå®žé™…å­˜å‚¨æ˜¯åœ¨å…¶ä»–ç›˜çš„ç›®å½•ä¸Šã€‚ä»¥ç®¡ç†å‘˜èº«ä»½è¿è¡Œ CMD ï¼Œç„¶åŽä¾æ¬¡è¾“å…¥å¦‚ä¸‹å‘½ä»¤ï¼š123456789101112131415161718192021222324#ä¸´æ—¶è®¾ç½®çŽ¯å¢ƒå˜é‡ï¼Œç”¨æ¥è¡¨ç¤ºéœ€è¦è¿ç§»çš„æ–°ç›®å½•set new_vscode_dir=E:\Cache\SymlinkData#åˆ›å»ºæ–°ç›®å½•mkdir "%new_vscode_dir%\.vscode"mkdir "%new_vscode_dir%\AppData\Roaming\Code"mkdir "%new_vscode_dir%\AppData\Local\Programs\Microsoft VS Code"mkdir "%new_vscode_dir%\AppData\Local\Microsoft\vscode-cpptools"#ç§»åŠ¨åŽŸç›®å½•åˆ°æ–°ç›®å½•ï¼Œç”±äºŽWindows11ä¸Šmoveå‘½ä»¤æ— æ³•è·¨ç›˜ç¬¦ç§»åŠ¨ï¼Œæ•…æ”¹ç”¨xcopy+delå®žçŽ°xcopy /s /e /h /y "%USERPROFILE%\.vscode" "%new_vscode_dir%\.vscode"rd /s /q "%USERPROFILE%\.vscode"xcopy /s /e /h /y "%USERPROFILE%\AppData\Roaming\Code" "%new_vscode_dir%\AppData\Roaming\Code"rd /s /q "%USERPROFILE%\AppData\Roaming\Code"xcopy /s /e /h /y "%USERPROFILE%\AppData\Local\Programs\Microsoft VS Code" "%new_vscode_dir%\AppData\Local\Programs\Microsoft VS Code"rd /s /q "%USERPROFILE%\AppData\Local\Programs\Microsoft VS Code"xcopy /s /e /h /y "%USERPROFILE%\AppData\Local\Microsoft\vscode-cpptools" "%new_vscode_dir%\AppData\Local\Microsoft\vscode-cpptools"rd /s /q "%USERPROFILE%\AppData\Local\Microsoft\vscode-cpptools"#åˆ›å»ºè½¯è¿žæŽ¥mklink /D "%USERPROFILE%\.vscode" "%new_vscode_dir%\.vscode"mklink /D "%USERPROFILE%\AppData\Roaming\Code" "%new_vscode_dir%\AppData\Roaming\Code"mklink /D "%USERPROFILE%\AppData\Local\Programs\Microsoft VS Code" "%new_vscode_dir%\AppData\Local\Programs\Microsoft VS Code"mklink /D "%USERPROFILE%\AppData\Local\Microsoft\vscode-cpptools" "%new_vscode_dir%\AppData\Local\Microsoft\vscode-cpptools"å‚è€ƒï¼šhttps://blog.csdn.net/xbs150/article/details/126425882https://blog.csdn.net/Tisfy/article/details/126082324Â¶å‚è€ƒhttps://blog.csdn.net/qq_51173321/article/details/126287293]]></content>
      <categories>
        <category>tools</category>
      </categories>
      <tags>
        <tag>vscode</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[sublime text3ä½¿ç”¨æŒ‡å—]]></title>
    <url>%2Ftools%2Fsublime_use.html</url>
    <content type="text"><![CDATA[sublime text3æ˜¯å¾ˆä¼˜ç§€çš„æ–‡æœ¬ç¼–è¾‘å™¨ï¼Œé«˜é€Ÿçš„æ–‡ä»¶è¯»å–é€Ÿåº¦ï¼Œç¾Žè§‚çš„ç”¨æˆ·ç•Œé¢ï¼Œä¸°å¯Œçš„æ‰©å±•æ’ä»¶ï¼Œè®©å…¶å—åˆ°å¾ˆå¤šå¼€å‘è€…çš„é’çï¼Œè¿™é‡Œå°±åªä»‹ç»ä¸€äº›å¸¸ç”¨æ’ä»¶çš„å®‰è£…å’Œä½¿ç”¨æ•™ç¨‹ã€‚Â¶ä¸€ã€å®‰è£…Package Controlæ’ä»¶ç®¡ç†æŽ§åˆ¶å°é¦–å…ˆè¦å®‰è£…Package Control,æœ‰äº†è¿™ä¸ªæ’ä»¶ç®¡ç†æŽ§åˆ¶å°æ‰èƒ½å®‰è£…ç¬¬ä¸‰æ–¹æ’ä»¶ã€‚å®‰è£…è¿™ä¸ªæ’ä»¶å¯ä»¥é€šè¿‡æŒ‰ä»¥ä¸‹å‘½ä»¤æ¥æ‰“å¼€æŽ§åˆ¶å°ã€‚1ctrl+ `å‡ºçŽ°æŽ§åˆ¶å°åŽè¾“å…¥ä»¥ä¸‹å‘½ä»¤å¹¶æŒ‰Enteré”®å³å¯å®‰è£…Package Controlã€‚1import urllib.request,os,hashlib; h = '6f4c264a24d933ce70df5dedcf1dcaee' + 'ebe013ee18cced0ef93d5f746d80ef60'; pf = 'Package Control.sublime-package'; ipp = sublime.installed_packages_path(); urllib.request.install_opener( urllib.request.build_opener( urllib.request.ProxyHandler()) ); by = urllib.request.urlopen( 'http://packagecontrol.io/' + pf.replace(' ', '%20')).read(); dh = hashlib.sha256(by).hexdigest(); print('Error validating download (got %s instead of %s), please try manual install' % (dh, h)) if dh != h else open(os.path.join( ipp, pf), 'wb' ).write(by)Â¶äºŒã€å®‰è£…æ’ä»¶å®‰è£…å¥½Package ControlåŽå°±å¯ä»¥å®‰è£…ç¬¬ä¸‰æ–¹æ’ä»¶äº†ï¼Œé¦–å…ˆå…ˆæŒ‰ctrl+shift+pæ‰“å¼€æŽ§åˆ¶å°ï¼Œç„¶åŽé€šè¿‡è¾“å…¥Package Control: Install packageå¹¶æŒ‰Enteré”®å³å¯è¾“å…¥ç¬¬ä¸‰æ–¹æ’ä»¶å®‰è£…ã€‚æŽ¥ä¸‹æ¥å°† ä»‹ç»æˆ‘æ­£åœ¨ä½¿ç”¨çš„å‡ ä¸ªç¬¬ä¸‰æ–¹æ’ä»¶ã€‚è¿™äº›æ’ä»¶å‡ ä¹Žéƒ½å¯ä»¥åœ¨sublimeæ’ä»¶å®˜ç½‘æ‰¾åˆ°ã€‚Â¶1.A File IconA File Iconèƒ½å®žçŽ°sublimeä¾§è¾¹æ ä¸Šä¸‹æ–‡èœå•ä¸Šæ ¹æ®ä¸åŒæ–‡ä»¶ç±»åž‹æ˜¾ç¤ºä¸åŒå›¾æ ‡æ ·å¼ã€‚(1) å…ˆæŒ‰ctrl+shift+pæ‰“å¼€æŽ§åˆ¶å°ï¼Œç„¶åŽé€šè¿‡è¾“å…¥Package Control: Install Packageï¼Œé€‰ä¸­Package Control: Install Packageé€‰é¡¹ï¼Œå¹¶æŒ‰Enteré”®ã€‚(2) è¾“å…¥A File IconåŽé€‰ä¸­A File Iconæ’ä»¶å¹¶æŒ‰Enteré”®ï¼Œç­‰å¾…ä¸€ä¼šå„¿è·³å‡ºPackage Control Messagesé¡µé¢æˆ–è€…å·¦ä¸‹è§’çš„å°ç­‰å·æ¥å›žèµ°åŠ¨ç»“æŸå°±è¡¨ç¤ºå®‰è£…æˆåŠŸã€‚æ•ˆæžœå¦‚å›¾ï¼šÂ¶2.EmmetEmmetæ˜¯éžå¸¸æœ‰ç”¨çš„æ’ä»¶ï¼Œä½¿ç”¨ä»¿CSSé€‰æ‹©å™¨çš„è¯­æ³•æ¥ç”Ÿæˆä»£ç ï¼Œå¤§å¤§æé«˜äº†HTMLå’ŒCSSä»£ç ç¼–å†™çš„é€Ÿåº¦ã€‚åªéœ€æŒ‰ä½Tabé”®å³å¯æŠŠä¸€ä¸ªç®€å†™ä»£ç å±•å¼€æˆHTMLå’ŒCSSçš„ä»£ç å—ã€‚å®‰è£…ï¼š(1) å…ˆæŒ‰ctrl+shift+pæ‰“å¼€æŽ§åˆ¶å°ï¼Œç„¶åŽé€šè¿‡è¾“å…¥Package Control: Install Packageï¼Œé€‰ä¸­Package Control: Install Packageé€‰é¡¹ï¼Œå¹¶æŒ‰Enteré”®ã€‚(2) è¾“å…¥EmmetåŽé€‰ä¸­Emmetæ’ä»¶åŒ…å¹¶æŒ‰Enteré”®ï¼Œç­‰å¾…ä¸€ä¼šå„¿å·¦ä¸‹è§’çš„å°ç­‰å·æ¥å›žèµ°åŠ¨ç»“æŸå°±è¡¨ç¤ºå®‰è£…æˆåŠŸã€‚å¯¹äºŽhtmlï¼š1234567891011!æˆ–html:5 --------&gt; htmlæ–‡ä»¶æ¨¡å¼link:css--------&gt;æ’å…¥cssæ¡£æ¡ˆdiv --------&gt;&lt;div&gt;&lt;/div&gt;.box --------&gt;&lt;div class="box"&gt;&lt;/div&gt;div*2 --------&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;div&gt;p --------&gt;&lt;div&gt;&lt;p&gt;&lt;/p&gt;&lt;/div&gt;div+p --------&gt;&lt;div&gt;&lt;/div&gt;&lt;p&gt;&lt;/p&gt;Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·å»ºç«‹ä¸€ä¸ªhtmlæ–‡ä»¶ä½“éªŒä»¥ä¸‹ï¼Œhtmlæ–‡ä»¶ä¸­è¾“å…¥!å¹¶æŒ‰Tabé”®ï¼Œç¥žå¥‡èˆ¬åœ°å°±ä¼šå¿«é€Ÿç”Ÿæˆä»¥ä¸‹ä»£ç ï¼š12345678910&lt;!DOCTYPE html&gt;&lt;html lang="en"&gt; &lt;head&gt; &lt;meta charset="UTF-8"&gt; &lt;title&gt;Document&lt;/title&gt; &lt;/head&gt; &lt;body&gt; &lt;/body&gt;&lt;/html&gt;ç±»ä¼¼çš„è¾“å…¥div*#hd&gt;ul&gt;li.houndrend$*4&gt;a[href='https:qcmoke.github.io']å¹¶æŒ‰Tabé”®ä¼šå¿«é€Ÿç”Ÿæˆä»¥ä¸‹ä»£ç :12345678&lt;div id="hd"&gt; &lt;ul&gt; &lt;li class="houndrend1"&gt;&lt;a href="https:qcmoke.github.io"&gt;&lt;/a&gt;&lt;/li&gt; &lt;li class="houndrend2"&gt;&lt;a href="https:qcmoke.github.io"&gt;&lt;/a&gt;&lt;/li&gt; &lt;li class="houndrend3"&gt;&lt;a href="https:qcmoke.github.io"&gt;&lt;/a&gt;&lt;/li&gt; &lt;li class="houndrend4"&gt;&lt;a href="https:qcmoke.github.io"&gt;&lt;/a&gt;&lt;/li&gt; &lt;/ul&gt;&lt;/div&gt;å¯¹äºŽcss:ç±»ä¼¼çš„è¾“å…¥w300å¹¶æŒ‰Tabé”®ä¼šå¿«é€Ÿç”Ÿæˆä»¥ä¸‹ä»£ç :1width: 300px;è€Œh300åˆ™å¿«é€Ÿç”Ÿæˆä»¥ä¸‹ä»£ç :1height: 300px;å…³äºŽEmmetæ›´å¤šæŠ€æœ¯å†…å®¹å¯æŸ¥çœ‹å®˜æ–¹æ–‡æ¡£ï¼Œæˆ–è€…è‡ªä¿¡googleã€baiduã€‚Â¶3.AutoFileNameAutoFileNameèƒ½å¤Ÿåœ¨htmlå¼•ç”¨å…¶ä»–æ–‡ä»¶å†…å®¹å¦‚jsï¼Œimagesï¼Œcssç­‰ç­‰æ—¶è‡ªåŠ¨è¡¥å…¨æ–‡ä»¶åã€‚(1) å…ˆæŒ‰ctrl+shift+pæ‰“å¼€æŽ§åˆ¶å°ï¼Œç„¶åŽé€šè¿‡è¾“å…¥Package Control: Install Packageï¼Œé€‰ä¸­Package Control: Install Packageé€‰é¡¹ï¼Œå¹¶æŒ‰Enteré”®ã€‚(2) è¾“å…¥AutoFileNameå¹¶æŒ‰Enteré”®ï¼Œç­‰å¾…ä¸€ä¼šå„¿å·¦ä¸‹è§’çš„å°ç­‰å·æ¥å›žèµ°åŠ¨ç»“æŸå°±è¡¨ç¤ºå®‰è£…æˆåŠŸã€‚Â¶4.SideBarToolsSideBarTools èƒ½å®žçŽ°ä¾§è¾¹æ ä¸Šä¸‹æ–‡èœå•ä¸­æ·»åŠ ä¸€äº›æœ‰ç”¨çš„å·¥å…·ï¼šå¤åˆ¶æ–‡ä»¶åã€å¤åˆ¶ç›¸å¯¹è·¯å¾„ã€å¤åˆ¶ç»å¯¹è·¯å¾„ã€é‡å¤ã€ç§»åŠ¨ç­‰ã€‚å®‰è£…ï¼š(1) å…ˆæŒ‰ctrl+shift+pæ‰“å¼€æŽ§åˆ¶å°ï¼Œç„¶åŽé€šè¿‡è¾“å…¥Package Control: Install Packageï¼Œé€‰ä¸­Package Control: Install Packageé€‰é¡¹ï¼Œå¹¶æŒ‰Enteré”®ã€‚(2) è¾“å…¥SideBarToolså¹¶æŒ‰Enteré”®ï¼Œç­‰å¾…ä¸€ä¼šå„¿å·¦ä¸‹è§’çš„å°ç­‰å·æ¥å›žèµ°åŠ¨ç»“æŸå°±è¡¨ç¤ºå®‰è£…æˆåŠŸã€‚æ•ˆæžœå¦‚ä¸‹å›¾ï¼šÂ¶5.SideBarEnhancementsSideBarEnhancementsç±»ä¼¼äºŽSideBarToolsï¼Œä¸è¿‡åŠŸèƒ½æ›´å¤šï¼Œåœ¨æ–‡ä»¶å’Œæ–‡ä»¶å¤¹è¾¹æ ä¸Šçš„æ“ä½œæä¾›å¢žå¼ºåŠŸèƒ½ï¼Œå³èƒ½å®žçŽ°ä¾§è¾¹æ ä¸Šä¸‹æ–‡èœå•ä¸­æ·»åŠ æ›´å¤šæœ‰ç”¨çš„å·¥å…·ã€‚å®‰è£…ï¼š(1) å…ˆæŒ‰ctrl+shift+pæ‰“å¼€æŽ§åˆ¶å°ï¼Œç„¶åŽé€šè¿‡è¾“å…¥Package Control: Install Packageï¼Œé€‰ä¸­Package Control: Install Packageé€‰é¡¹ï¼Œå¹¶æŒ‰Enteré”®ã€‚(2) è¾“å…¥SideBarEnhancementså¹¶æŒ‰Enteré”®ï¼Œç­‰å¾…ä¸€ä¼šå„¿å·¦ä¸‹è§’çš„å°ç­‰å·æ¥å›žèµ°åŠ¨ç»“æŸå°±è¡¨ç¤ºå®‰è£…æˆåŠŸã€‚è¯´æ˜Žï¼šå¦‚æžœæ­£åœ¨ä½¿ç”¨SideBarToolsçš„è¯ï¼Œä¸ºäº†ä¸èµ·å†²çªå¯ä»¥å…ˆå¸è½½æŽ‰SideBarToolsã€‚æ•ˆæžœå¦‚ä¸‹å›¾ï¼šÂ¶6.AdvancedNewFileAdvancedNewFileæ­¤æ’ä»¶å…è®¸åœ¨é¡¹ç›®ä¸­é€šè¿‡å¿«æ·é”®æ›´å¿«åœ°åˆ›å»ºæ–‡ä»¶ã€‚å®‰è£…ï¼š(1) å…ˆæŒ‰ctrl+shift+pæ‰“å¼€æŽ§åˆ¶å°ï¼Œç„¶åŽé€šè¿‡è¾“å…¥Package Control: Install Packageï¼Œé€‰ä¸­Package Control: Install Packageé€‰é¡¹ï¼Œå¹¶æŒ‰Enteré”®ã€‚(2) è¾“å…¥AdvancedNewFileå¹¶æŒ‰Enteré”®ï¼Œç­‰å¾…ä¸€ä¼šå„¿å·¦ä¸‹è§’çš„å°ç­‰å·æ¥å›žèµ°åŠ¨ç»“æŸå°±è¡¨ç¤ºå®‰è£…æˆåŠŸã€‚ctrl+alt+nï¼šç”¨äºŽåˆ›å»ºæ–°æ–‡ä»¶çš„å¸¸è§„é”®ã€‚DocBlockrDocBlockrèƒ½å®žçŽ°ä»£ç æ³¨é‡Šæç¤ºï¼Œå®ƒä½¿ç¼–å†™æ–‡æ¡£å˜å¾—è½»è€Œæ˜“ä¸¾ã€‚DocBlockræ”¯æŒJavaScript (including ES6), PHP, ActionScript, Haxe, CoffeeScript, TypeScript, Java, Apex, Groovy, Objective C, C, C++ å’ŒRust.å®‰è£…ï¼š(1) å…ˆæŒ‰ctrl+shift+pæ‰“å¼€æŽ§åˆ¶å°ï¼Œç„¶åŽé€šè¿‡è¾“å…¥Package Control: Install Packageï¼Œé€‰ä¸­Package Control: Install Packageé€‰é¡¹ï¼Œå¹¶æŒ‰Enteré”®ã€‚(2) è¾“å…¥DocBlockrå¹¶æŒ‰Enteré”®ï¼Œç­‰å¾…ä¸€ä¼šå„¿å·¦ä¸‹è§’çš„å°ç­‰å·æ¥å›žèµ°åŠ¨ç»“æŸå°±è¡¨ç¤ºå®‰è£…æˆåŠŸã€‚æ•ˆæžœå¦‚ä¸‹å›¾ï¼šÂ¶7.Local HistoryLocal Historyèƒ½å®žçŽ°æ–‡ä»¶ç¼–è¾‘è¿‡ç¨‹ä¸­å­˜æ”¾æ–‡ä»¶å‰¯æœ¬å’ŒåŽ†å²è®°å½•ä¿¡æ¯ã€‚å³æ¯æ¬¡ä¿®æ”¹æ–‡ä»¶æ—¶ï¼Œä¿®æ”¹è¿‡çš„æ–‡ä»¶ä¿å­˜é€€å‡ºåŽï¼ŒLocal Historyæ’ä»¶ä¼šå°†æ—§æ–‡ä»¶çš„å‰¯æœ¬å’Œç¼–è¾‘è®°å½•ä¿¡æ¯ç»“åˆä¿®æ”¹åŽé€€å‡ºçš„æ—¶é—´å‘½åå¹¶ä¿ç•™åœ¨æœ¬åœ°ç›¸åº”ç›®å½•ä¸­ã€‚å®‰è£…ï¼š(1) å…ˆæŒ‰ctrl+shift+pæ‰“å¼€æŽ§åˆ¶å°ï¼Œç„¶åŽé€šè¿‡è¾“å…¥Package Control: Install Packageï¼Œé€‰ä¸­Package Control: Install Packageé€‰é¡¹ï¼Œå¹¶æŒ‰Enteré”®ã€‚(2) è¾“å…¥Local Historyå¹¶æŒ‰Enteré”®ï¼Œç­‰å¾…ä¸€ä¼šå„¿å·¦ä¸‹è§’çš„å°ç­‰å·æ¥å›žèµ°åŠ¨ç»“æŸå°±è¡¨ç¤ºå®‰è£…æˆåŠŸã€‚æ•ˆæžœå¦‚ä¸‹å›¾ï¼šä»¥ä¸‹æ˜¯ä¿®æ”¹è¿‡ä¸‰æ¬¡çš„Demo.javaæ–‡ä»¶ã€‚å¯ä»¥é€šè¿‡åœ¨å½“å‰æ–‡ä»¶ä¸Šç‚¹å‡»å³é”®æŒ‰ç…§å¦‚ä¸‹å›¾æŒ‡ç¤ºæ‰“å¼€æœ¬åœ°åŽ†å²æ–‡ä»¶ç›®å½•ã€‚æŒ‰ç…§å¦‚ä¸‹å›¾æ‰€ç¤ºå¯ä»¥æŸ¥çœ‹ç¼–è¾‘è®°å½•ä¿¡æ¯ã€‚é€‰æ‹©å‰¯æœ¬é€‰æ‹©å‰¯æœ¬æ–‡ä»¶åŽå³å¯æŸ¥çœ‹ç¼–è¾‘è®°å½•ä¿¡æ¯ï¼Œå…¶ä¸­å˜åŠ¨çš„ä¿¡æ¯ä¼šé«˜äº®æ˜¾ç¤ºã€‚å½“ç„¶ï¼Œå¦‚æžœä½ æƒ³åˆ é™¤æŽ‰æœ¬åœ°çš„å‰¯æœ¬å’Œè®°å½•é‚£ä¹ˆä½ å¯ä»¥æŒ‰ç…§ä¸‹å›¾æŒ‡ç¤ºä¸€é”®æ¸…ç©ºæœ¬åœ°å‰¯æœ¬æ–‡ä»¶ã€‚Â¶8.HTML-CSS-JS PrettifyHTML-CSS-JS Prettifyå…è®¸æ‚¨æ ¼å¼åŒ–HTMLï¼ŒCSSï¼ŒJavaScriptå’ŒJSONä»£ç ã€‚æ­¤æ ¼å¼åŒ–æ’ä»¶æ˜¯ç”¨JavaScriptç¼–å†™çš„ï¼Œå› æ­¤æ‚¨éœ€è¦å®‰è£…node.jsæ¥è§£é‡ŠJavaScriptä»£ç ã€‚node.jsçš„å®‰è£…å¾ˆç®€å•ï¼Œå¦‚æžœä¸åšç‰¹åˆ«è¦æ±‚çš„è¯å°±ç›´æŽ¥ä¸€è·¯ä¸‹ä¸€æ­¥å°±è¡Œäº†ã€‚å®‰è£…ï¼š(1) å…ˆæŒ‰ctrl+shift+pæ‰“å¼€æŽ§åˆ¶å°ï¼Œç„¶åŽé€šè¿‡è¾“å…¥Package Control: Install Packageï¼Œé€‰ä¸­Package Control: Install Packageé€‰é¡¹ï¼Œå¹¶æŒ‰Enteré”®ã€‚(2) è¾“å…¥HTML-CSS-JS Prettifyå¹¶æŒ‰Enteré”®ï¼Œç­‰å¾…ä¸€ä¼šå„¿å·¦ä¸‹è§’çš„å°ç­‰å·æ¥å›žèµ°åŠ¨ç»“æŸå°±è¡¨ç¤ºå®‰è£…æˆåŠŸã€‚node.jså’ŒHTML-CSS-JS Prettifyæ’ä»¶éƒ½å®‰è£…å¥½åŽè¦åœ¨sublimeä¸­HTML-CSS-JS Prettifyçš„é…ç½®æ–‡ä»¶æŒ‡å®šnode.jsçš„è·¯å¾„ã€‚é…ç½®è¿‡ç¨‹å¦‚ä¸‹å›¾ï¼šå¯å¯¹ä¸€ä¸‹ä»£ç ä¸­çš„&quot;windows&quot;:åšä¿®æ”¹åŽï¼Œç›´æŽ¥å¤åˆ¶ç²˜è´´ã€‚12345678&#123; "node_path": &#123; "windows": "D:/DevelopmentTools/nodejs/node.exe", //æ ¹æ®è‡ªå·±çš„å®‰è£…æƒ…å†µæŒ‡å®šnode.jsçš„è·¯å¾„ "linux": "/usr/bin/nodejs", "osx": "/usr/local/bin/node" &#125;,&#125;ä¸€åˆ‡å‡†å¤‡å°±ç»ªï¼Œå¼€å§‹æµ‹è¯•ï¼šæ ¼å¼åŒ–å‰ï¼šæŒ‰ctrl+shift+hå¯å¯¹ä¸Šå›¾ç³Ÿé€äº†çš„ä»£ç è¿›è¡Œæ ¼å¼åŒ–ã€‚æ ¼å¼åŒ–åŽï¼šÂ¶9.TerminalTerminalèƒ½è®©ä½ åœ¨sublime textä¸­å¿«é€Ÿæ‰“å¼€ç»ˆç«¯ã€‚å®‰è£…ï¼š(1) å…ˆæŒ‰ctrl+shift+pæ‰“å¼€æŽ§åˆ¶å°ï¼Œç„¶åŽé€šè¿‡è¾“å…¥Package Control: Install Packageï¼Œé€‰ä¸­Package Control: Install Packageé€‰é¡¹ï¼Œå¹¶æŒ‰Enteré”®ã€‚(2) è¾“å…¥Terminalå¹¶æŒ‰Enteré”®ï¼Œç­‰å¾…ä¸€ä¼šå„¿å·¦ä¸‹è§’çš„å°ç­‰å·æ¥å›žèµ°åŠ¨ç»“æŸå°±è¡¨ç¤ºå®‰è£…æˆåŠŸã€‚å®‰è£…å®Œæ­¤æ’ä»¶åŽå¯ä»¥è‡ªå®šä¹‰ç»ˆç«¯ï¼Œå¦‚æžœä¸è‡ªå®šä¹‰ï¼Œwindowsé»˜è®¤æ˜¯cmd,æˆ‘è¿™é‡Œä»¥git bashä¸ºç»ˆç«¯ä¸ºä¾‹ï¼Œé…ç½®è¿‡ç¨‹å¦‚ä¸‹ï¼šå¯å¯¹ä¸€ä¸‹ä»£ç ä¸­çš„&quot;terminal&quot;:åšä¿®æ”¹åŽï¼Œç›´æŽ¥å¤åˆ¶ç²˜è´´ã€‚123&#123; "terminal": "D:/DevelopmentTools/Git/bin/bash.exe", //æ ¹æ®è‡ªå·±çš„å®‰è£…æƒ…å†µæŒ‡å®šbash.exeçš„è·¯å¾„&#125;Â¶10.Chinese LocalizationChinese Localizationæ’ä»¶èƒ½è®©sublime textæ”¯æŒå¤šè¯­è¨€ï¼Œå½“ç„¶ï¼Œæ”¯æŒç®€ä½“ä¸­æ–‡ã€‚å®‰è£…ï¼š(1) å…ˆæŒ‰ctrl+shift+pæ‰“å¼€æŽ§åˆ¶å°ï¼Œç„¶åŽé€šè¿‡è¾“å…¥Package Control: Install Packageï¼Œé€‰ä¸­Package Control: Install Packageé€‰é¡¹ï¼Œå¹¶æŒ‰Enteré”®ã€‚(2) è¾“å…¥Chinese Localizationå¹¶æŒ‰Enteré”®ï¼Œç­‰å¾…ä¸€ä¼šå„¿å·¦ä¸‹è§’çš„å°ç­‰å·æ¥å›žèµ°åŠ¨ç»“æŸå°±è¡¨ç¤ºå®‰è£…æˆåŠŸã€‚å®‰è£…å¥½åŽå¯èƒ½è¦é‡å¯sublimeï¼Œé‡å¯åŽé»˜è®¤å°±ä¸ºä¸­æ–‡ç®€ä½“ã€‚å…¶ä»–è¯­è¨€è®¾ç½®å¯è§ä¸‹å›¾ï¼šÂ¶11.IMESupportIMESupport èƒ½è§£å†³è¾“å…¥æ³•åˆ‡æ¢ä¸­æ–‡è¾“å…¥æ—¶è¾“å…¥æ¡†ä¸è·Ÿéšå…‰æ ‡çš„é—®é¢˜ã€‚å®‰è£…ï¼š(1) å…ˆæŒ‰ctrl+shift+pæ‰“å¼€æŽ§åˆ¶å°ï¼Œç„¶åŽé€šè¿‡è¾“å…¥Package Control: Install Packageï¼Œé€‰ä¸­Package Control: Install Packageé€‰é¡¹ï¼Œå¹¶æŒ‰Enteré”®ã€‚(2) è¾“å…¥IMESupportå¹¶æŒ‰Enteré”®ï¼Œç­‰å¾…ä¸€ä¼šå„¿å·¦ä¸‹è§’çš„å°ç­‰å·æ¥å›žèµ°åŠ¨ç»“æŸå°±è¡¨ç¤ºå®‰è£…æˆåŠŸã€‚Â¶12.Markdown Editingå’ŒMarkdown Previewmarkdown Editingæ’ä»¶èƒ½æ”¯æŒmarkdownæ›´è‰¯å¥½çš„ç¼–å†™æ“ä½œæ–¹å¼ï¼ŒMarkdown Previewæ’ä»¶èƒ½æ”¯æŒæµè§ˆå™¨é¢„è§ˆã€‚å®‰è£…ï¼š(1) å…ˆæŒ‰ctrl+shift+pæ‰“å¼€æŽ§åˆ¶å°ï¼Œç„¶åŽé€šè¿‡è¾“å…¥Package Control: Install Packageï¼Œé€‰ä¸­Package Control: Install Packageé€‰é¡¹ï¼Œå¹¶æŒ‰Enteré”®ã€‚(2) è¾“å…¥Markdown Editingå¹¶æŒ‰Enteré”®ï¼Œç­‰å¾…ä¸€ä¼šå„¿å·¦ä¸‹è§’çš„å°ç­‰å·æ¥å›žèµ°åŠ¨ç»“æŸå°±è¡¨ç¤ºå®‰è£…æˆåŠŸã€‚(3)ç±»ä¼¼åœ°ï¼ŒæŒ‰ctrl+shift+pæ‰“å¼€æŽ§åˆ¶å°ï¼Œç„¶åŽé€šè¿‡è¾“å…¥Package Control: Install Packageï¼Œé€‰ä¸­Package Control: Install Packageé€‰é¡¹ï¼Œå¹¶æŒ‰Enteré”®ã€‚(2) è¾“å…¥Markdown Previewå¹¶æŒ‰Enteré”®ï¼Œç­‰å¾…ä¸€ä¼šå„¿å·¦ä¸‹è§’çš„å°ç­‰å·æ¥å›žèµ°åŠ¨ç»“æŸå°±è¡¨ç¤ºå®‰è£…æˆåŠŸã€‚è‡ªå®šä¹‰å¿«æ·é”®ï¼Œç‚¹å‡» Preferences --&gt; é€‰æ‹© Key Bindings Userï¼Œè¾“å…¥ï¼š1&#123; "keys": ["alt+m"], "command": "markdown_preview", "args":&#123;"target": "browser", "parser":"markdown"&#125; &#125;,Â¶13.FileDiffsFileDiffsèƒ½æ˜¾ç¤ºä¸åŒæ–‡ä»¶çš„ä¸åŒå¤„å†…å®¹ã€‚æ–¹ä¾¿æŽ’æŸ¥é”™è¯¯ã€‚(1) å…ˆæŒ‰ctrl+shift+pæ‰“å¼€æŽ§åˆ¶å°ï¼Œç„¶åŽé€šè¿‡è¾“å…¥Package Control: Install Packageï¼Œé€‰ä¸­Package Control: Install Packageé€‰é¡¹ï¼Œå¹¶æŒ‰Enteré”®ã€‚(2) è¾“å…¥FileDiffså¹¶æŒ‰Enteré”®ï¼Œç­‰å¾…ä¸€ä¼šå„¿å·¦ä¸‹è§’çš„å°ç­‰å·æ¥å›žèµ°åŠ¨ç»“æŸå°±è¡¨ç¤ºå®‰è£…æˆåŠŸã€‚åœ¨æ–‡ä»¶ä¸Šå³é”®é€‰æ‹©FileDiffs menuã€ç„¶åŽé€‰æ‹©Diff file with File in Projectã€‚æ˜¾ç¤ºå½“å‰æ–‡ä»¶å’Œå‰é¡¹ç›®ä¸­çš„å…¶ä»–æ–‡ä»¶çš„å·®å¼‚ã€‚Â¶14.ColorPickeColorPickeré€‰è‰²é¢æ¿èƒ½å¿«é€ŸèŽ·å–æƒ³è¦çš„åå…­è¿›åˆ¶é¢œè‰²å€¼ã€‚(1) å…ˆæŒ‰ctrl+shift+pæ‰“å¼€æŽ§åˆ¶å°ï¼Œç„¶åŽé€šè¿‡è¾“å…¥Package Control: Install Packageï¼Œé€‰ä¸­Package Control: Install Packageé€‰é¡¹ï¼Œå¹¶æŒ‰Enteré”®ã€‚(2) è¾“å…¥ColorPickerå¹¶æŒ‰Enteré”®ï¼Œç­‰å¾…ä¸€ä¼šå„¿å·¦ä¸‹è§’çš„å°ç­‰å·æ¥å›žèµ°åŠ¨ç»“æŸå°±è¡¨ç¤ºå®‰è£…æˆåŠŸã€‚æŒ‰ctrl+shift+cè°ƒå‡ºé€‰è‰²é¢æ¿Â¶ä¸‰ã€å¸è½½æ’ä»¶å®‰è£…ï¼š(1) å…ˆæŒ‰ctrl+shift+pæ‰“å¼€æŽ§åˆ¶å°ï¼Œç„¶åŽé€šè¿‡è¾“å…¥Package Control: Remove Packageï¼Œé€‰ä¸­Package Control: Remove Packageé€‰é¡¹ï¼Œå¹¶æŒ‰Enteré”®ã€‚(2) è¾“å…¥æ’ä»¶åŒ…åå¹¶æŒ‰Enteré”®ï¼Œç­‰å¾…ä¸€æ®µæ—¶é—´å·¦ä¸‹è§’çš„å°ç­‰å·æ¥å›žèµ°åŠ¨ç»“æŸå°±è¡¨ç¤ºå¸è½½æˆåŠŸã€‚Â¶å››ã€å¿«æ·é”®ï¼ˆçƒ­é”®ï¼‰çš„ä½¿ç”¨é€šè¿‡ä¸‹å›¾æŒ‡ç¤ºå¯ä»¥æ‰“å¼€å¿«æ·é”®é…ç½®æ–‡ä»¶ã€‚æ¯ä¸ªå¿«æ·é”®éƒ½æœ‰è‹±æ–‡è§£é‡Šã€‚å¦‚æžœå¿«æ·é”®å’Œå…¶ä»–è½¯ä»¶çš„å¿«æ·é”®å†²çªï¼ŒåŒæ ·å¯ä»¥åœ¨ç”¨æˆ·è‡ªå®šä¹‰é…ç½®æ–‡ä»¶é‡Œä¿®æ”¹ã€‚å¤šè¡Œå¿«é€Ÿé€‰æ‹©æ–‡æœ¬Ctrl+Dï¼šé€‰ä¸­å…‰æ ‡æ‰€å çš„æ–‡æœ¬ï¼Œç»§ç»­æ“ä½œåˆ™ä¼šé€‰ä¸­ä¸‹ä¸€ä¸ªç›¸åŒçš„æ–‡æœ¬ã€‚ï¼ˆéžå¸¸å®žç”¨ï¼‰Ctrl-K, Ctrl-Dï¼šæŠŠå½“å‰é€‰ä¸­æ‰€å æ–‡æœ¬çš„å…‰æ ‡ï¼Œè·³è½¬åˆ°ä¸‹ä¸€ä¸ªç›¸åŒæ–‡æœ¬ã€‚ï¼ˆé…åˆCtrl+Då¾ˆå®žç”¨ï¼‰Alt-F3ï¼šä¸€æ¬¡æ€§é€‰ä¸­(å½“å‰é€‰ä¸­çš„æ–‡æœ¬ï¼‰ç›¸åŒçš„æ–‡æœ¬ã€‚ç­‰äºŽå¤šæ¬¡å®žç”¨Ctrl+Dã€‚ï¼ˆéƒ¨åˆ†ä¿®æ”¹æƒ…å†µä¸‹æ…Žç”¨ï¼ŒMacä¸‹:Ctrl-Cmd-Gï¼‰è¡Œæ“ä½œé€‰æ‹©ç±»Ctrl+Lï¼šé€‰æ‹©å…‰æ ‡å½“å‰è¡Œï¼Œé‡å¤å¯ä¾æ¬¡å¢žåŠ é€‰æ‹©ä¸‹ä¸€è¡Œï¼Œè‹¥å¤šæœ‰è¡Œå…‰æ ‡ï¼Œåˆ™ç¬¬ä¸€æ¬¡é€‰æ‹©å¤šè¡Œã€‚Ctrl+J ï¼šå°†å…‰æ ‡çš„ä¸‹ä¸€è¡Œï¼Œåˆå¹¶åˆ°å…‰æ ‡å½“å‰è¡Œã€‚è‹¥é€‰æ‹©å¤šè¡Œï¼Œåˆ™åˆå¹¶é€‰æ‹©çš„å¤šè¡Œä¸ºä¸€è¡Œï¼ŒåŒæ—¶å†åˆå¹¶å½“å‰è¡Œçš„ä¸‹ä¸€è¡Œã€‚æ“ä½œç±»Ctrl+Gï¼šè·³è½¬åˆ°ç¬¬å‡ è¡Œã€‚Ctrl+Shift+Lï¼šï¼ˆå‰æå…ˆé€‰ä¸­å¤šè¡Œï¼‰ä¼šåœ¨æ¯è¡Œè¡Œå°¾æ’å…¥å…‰æ ‡ï¼Œå³å¯åŒæ—¶ç¼–è¾‘è¿™äº›è¡Œã€‚Ctrl+Shift+â†‘ â†“ï¼š å½“å‰è¡Œæˆ–å½“å‰é€‰ä¸­è¡Œä¸Žä¸Šä¸‹è¡Œäº’æ¢ä½ç½®ã€‚Ctrl+Enterï¼š åœ¨å½“å‰å…‰æ ‡çš„ä¸‹ä¸€è¡Œæ’å…¥æ–°è¡Œå¹¶è·³è½¬å…‰æ ‡ã€‚Ctrl+Shift+Enterï¼šåœ¨å½“å‰å…‰æ ‡çš„åœ¨ä¸Šä¸€è¡Œæ’å…¥æ–°è¡Œå¹¶è·³è½¬å…‰æ ‡ã€‚Ctrl+Shift+Dï¼š å¤åˆ¶å…‰æ ‡æˆ–æ‰€é€‰åŒºæ‰€åœ¨çš„æ•´è¡Œï¼Œæ’å…¥åˆ°ä¸‹ä¸€è¡Œã€‚åˆ é™¤ç±»Ctrl+Shift+Kï¼šåˆ é™¤æ•´è¡Œï¼Œæ²¡æœ‰ç©ºç™½ç¬¦ã€‚Ctrl+k+kï¼š ä»Žå…‰æ ‡å¤„è‡³è¡Œå°¾åˆ é™¤ã€‚Ctrl+K+Backspaceï¼šä»Žå…‰æ ‡å¤„è‡³è¡Œé¦–åˆ é™¤ã€‚æ³¨é‡ŠCtrl+Shift+/ï¼šæ ¹æ®é€‰æ‹©è¿›è¡Œå¤šè¡Œæ³¨é‡Šã€‚Ctrl+/ï¼šå•è¡Œæ³¨é‡Šã€‚ç¼©è¿›Ctrl+[ ]ï¼šå·¦å³ç¼©è¿›å½“å…‰æ ‡æˆ–å…‰æ ‡æ‰€åœ¨çš„è¡Œã€‚Tabï¼š å‘å³ç¼©è¿›ã€‚Shift+Tabï¼šå‘å·¦ç¼©è¿›ã€‚ä»£ç å—Ctrl+Shift+[ï¼šé€‰ä¸­ä»£ç ï¼ŒæŒ‰ä¸‹å¿«æ·é”®ï¼ŒæŠ˜å ä»£ç ã€‚Ctrl+Shift+]ï¼šé€‰ä¸­ä»£ç ï¼ŒæŒ‰ä¸‹å¿«æ·é”®ï¼Œå±•å¼€ä»£ç ã€‚Ctrl+K+0ï¼š å±•å¼€æ‰€æœ‰æŠ˜å ä»£ç ã€‚Ctrl+K+Tï¼šæŠ˜å æ‰€æœ‰htmlçš„å±žæ€§ã€‚ï¼ˆéžå¸¸å¥½ç”¨ï¼Œçœ‹htmlç»“æž„çš„æ—¶å€™ï¼‰Ctrl+Mï¼šè·³è½¬åˆ°å¯¹åº”æ‹¬å·ã€‚Ctrl+Shift+Jï¼šå¿«é€Ÿé€‰æ‹©åŒçº§çš„å†…å®¹ï¼ŒåŒçº§å†…å®¹=å…„å¼Ÿå†…å®¹ã€‚ç¼–è¾‘Ctrl+Yï¼šæ¢å¤æ’¤é”€ã€‚Ctrl+Zï¼š æ’¤é”€ã€‚Ctrl+K+Uï¼šè½¬æ¢å…‰æ ‡æœ€è¿‘å•è¯ï¼Œæˆ–æ‰€é€‰åŒºåŸŸå¤§å†™ã€‚Ctrl+K+Lï¼šè½¬æ¢å…‰æ ‡æœ€è¿‘å•è¯ï¼Œæˆ–æ‰€é€‰åŒºåŸŸå°å†™ã€‚æŸ¥æ‰¾Ctrl+F:åœ¨å½“å‰é¡µé¢ä¸­æŸ¥æ‰¾Ctrl+shift+Fï¼šé«˜çº§æŸ¥æ‰¾ï¼Œåœ¨æ–‡ä»¶å¤¹å†…æŸ¥æ‰¾ã€‚Ctrl+Pï¼šæ‰“å¼€å¤šåŠŸèƒ½æœç´¢æ¡†ã€‚ 1.è¾“å…¥å½“å‰é¡¹ç›®ä¸­çš„æ–‡ä»¶åï¼Œå¿«é€Ÿæœç´¢æ–‡ä»¶ã€‚ 2.è¾“å…¥@å’Œå…³é”®å­—ï¼ŒæŸ¥æ‰¾æ–‡ä»¶ä¸­å‡½æ•°åã€‚ï¼ˆCtrl+Rï¼‰ 3.è¾“å…¥ï¼šå’Œæ•°å­—ï¼Œè·³è½¬åˆ°æ–‡ä»¶ä¸­è¯¥è¡Œä»£ç ã€‚ï¼ˆCtrl+Gï¼‰ 4.è¾“å…¥#å’Œå…³é”®å­—ï¼ŒæŸ¥æ‰¾å˜é‡åã€‚ ï¼ˆCtrl+ï¼šï¼‰Ctrl+Gï¼šæ‰“å¼€æœç´¢æ¡†ï¼Œè‡ªåŠ¨å¸¦ï¼šï¼Œè¾“å…¥æ•°å­—è·³è½¬åˆ°è¯¥è¡Œä»£ç ã€‚Ctrl+Rï¼šæ‰“å¼€æœç´¢æ¡†ï¼Œè‡ªåŠ¨å¸¦@ï¼Œè¾“å…¥å…³é”®å­—ï¼ŒæŸ¥æ‰¾æ–‡ä»¶ä¸­çš„å‡½æ•°åã€‚Ctrl+; ï¼šæ‰“å¼€æœç´¢æ¡†ï¼Œè‡ªåŠ¨å¸¦#ï¼Œè¾“å…¥å…³é”®å­—ï¼ŒæŸ¥æ‰¾æ–‡ä»¶ä¸­çš„å˜é‡åã€å±žæ€§åç­‰ã€‚çª—å£Alt+Shift+1ï¼šçª—å£åˆ†å±ï¼Œæ¢å¤é»˜è®¤1å±ï¼ˆéžå°é”®ç›˜çš„æ•°å­—ï¼‰Alt+Shift+2ï¼šå·¦å³åˆ†å±-2åˆ—ã€‚Alt+Shift+3ï¼šå·¦å³åˆ†å±-3åˆ—ã€‚Alt+Shift+4ï¼šå·¦å³åˆ†å±-4åˆ—ã€‚Alt+Shift+5ï¼šç­‰åˆ†4å±ã€‚Alt+Shift+8ï¼šåž‚ç›´åˆ†å±-2å±ã€‚Alt+Shift+9ï¼šåž‚ç›´åˆ†å±-3å±ã€‚Ctrl+K,Ctirl+Bï¼šå¼€å¯/å…³é—­ä¾§è¾¹æ ã€‚Ctrl+Nï¼šæ–°å»ºç©ºé¢æ¿ã€‚Ctrl+Shift+Nï¼šåœ¨æ–°å»ºçª—å£ä¸­ï¼Œåˆ›å»ºç©ºé¢æ¿ã€‚Ctrl+Tabï¼šä»Žå·¦å¾€å³ï¼Œåˆ‡æ¢å½“å‰çª—å£çš„æ ‡ç­¾é¡µã€‚Ctrl+Shift+Tabï¼šä»Žå³å¾€å·¦ï¼Œåˆ‡æ¢å½“å‰çª—å£çš„æ ‡ç­¾é¡µã€‚Ctrl+Wï¼šå…³é—­å½“å‰æ ‡ç­¾ï¼Œå½“çª—å£å†…æ²¡æœ‰æ ‡ç­¾æ—¶ä¼šå…³é—­è¯¥çª—å£Ctrl+Shift+Tï¼šæ¢å¤åˆšåˆšå…³é—­çš„æ ‡ç­¾é«˜çº§Ctrl+Shift+Spaceï¼šé€‰æ‹©å½“å‰å…‰æ ‡æœ€å°å—çš„ä»£ç ã€‚ï¼ˆéžå¸¸å¥½ç”¨ï¼‰Ctrl+Shift+â€™ï¼šemmetæ’ä»¶ä¸‹ï¼Œè¿™ä¸ªå¯ä»¥åœ¨htmlä¸­ï¼Œé€‰æ‹©å…‰æ ‡æœ€è¿‘çš„ä¸€ç»„é—­åˆæ ‡ç­¾ã€‚ä¿®æ”¹æ ‡ç­¾éžå¸¸æ–¹ä¾¿ã€‚Ctrl+Uï¼š è½¯æ’¤é”€ï¼Œæ’¤é”€å¿«æ·é”®çš„ä¸€äº›åŠ¨ä½œï¼Œæ¯”å¦‚æ’¤é”€é€‰ä¸­ã€‚ï¼ˆè‹¥å¿«æ·é”®å†²çªä¸èµ·æ•ˆæžœï¼Œè¯·è‡ªå®šä¹‰å¿«æ·é”®ï¼‰Â¶äº”ã€å¸¸ç”¨æŽ§åˆ¶å°å‘½ä»¤ï¼ˆ1ï¼‰å¦‚æžœä¸æƒ³ç‚¹å‡»å³ä¸‹è§’çš„Plain Textæ¥è®¾ç½®ä»£ç è¯­è¨€å¯ä»¥ç›´æŽ¥æŒ‰ctrl+shift+p ç„¶åŽè¾“å…¥ï¼šSet Syntax: code language,å¦‚Set Syntax: HTMLå³å¯è®¾ç½®å½“å‰æ–‡ä»¶ä¸ºhtmlæ–‡ä»¶ã€‚è®¾ç½®ä»£ç è¯­è¨€: Set Syntax: code languageå®‰è£…æ’ä»¶: Package Control: Install Packageå¸è½½æ’ä»¶: Package Control: Remove PackageæŸ¥çœ‹æ’ä»¶ï¼šPackage Control: List Packageæ›´æ–°æ’ä»¶ï¼šPackage Control: Upgrade Packageç¦ç”¨æ’ä»¶ï¼šPackage Control: Disable Packageæ¿€æ´»æ’ä»¶ï¼šPackage Control: Enable Packageç¦ç”¨æ’ä»¶ç­‰åŒäºŽåœ¨preferences &gt; settings &gt; useré‡Œæ·»åŠ éœ€è¦å¿½ç•¥çš„æ’ä»¶ï¼š1234"ignored_packages":[ "Vintage" // åœ¨è¿™ä¸ªæ•°ç»„é‡Œé¢æ·»åŠ éœ€è¦å¿½ç•¥çš„æ’ä»¶],Â¶å…­ã€å…¶ä»–Â¶1. è§£å†³sublimeä¸­æ–‡å­—è¡Œé—´ä¸Šä¸‹ä¸å¯¹é½çš„æ¯›ç—…åªéœ€è¦ç‚¹å‡»è®¾ç½®ï¼Œå¦‚ä¸‹å›¾ï¼šå®Œæˆä¼šå¼¹å‡ºä¸€ä¸ªè®¾ç½®é¡µé¢ã€‚é€‰æ‹©å³è¾¹çš„ç”¨æˆ·è®¾ç½®é…ç½®åŒºè¿›è¡Œä¿®æ”¹ï¼Œå¦‚ä¸‹å›¾ï¼šåœ¨èŠ±æ‹¬å·å†…æ·»åŠ ä»¥ä¸‹ä»£ç ï¼š1234"font_options": [ "gdi" ],æ·»åŠ åŽå¦‚ä¸‹ï¼š1234567891011&#123; "font_options": [ "gdi" ], "font_size": 23, "ignored_packages": [ "Vintage" ]&#125;å®Œæˆäº†ï¼Œå‘çŽ°ä¸­æ–‡å­—è¡Œé—´ä¸Šä¸‹å¯¹é½äº†ã€‚Â¶ä¸ƒã€å‚è€ƒèµ„æ–™ï¼šsublimeä½¿ç”¨æŒ‡å—Sublime Text3 å¿«æ·é”®æ€»ç»“]]></content>
      <categories>
        <category>tools</category>
      </categories>
      <tags>
        <tag>sublime text3</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[hexo+nextæ‰“é€ ç²¾ç¾Žçš„ä¸ªäººåšå®¢ç½‘ç«™]]></title>
    <url>%2Fblog%2Fhexo_next.html</url>
    <content type="text"><![CDATA[Hexo æ˜¯ä¸€ä¸ªå¿«é€Ÿã€ç®€æ´ä¸”é«˜æ•ˆçš„åšå®¢æ¡†æž¶ã€‚Hexo ä½¿ç”¨ Markdownï¼ˆæˆ–å…¶ä»–æ¸²æŸ“å¼•æ“Žï¼‰è§£æžæ–‡ç« ï¼Œåœ¨å‡ ç§’å†…ï¼Œå³å¯åˆ©ç”¨hexoç”Ÿæˆé™æ€ç½‘é¡µã€‚Â¶åŸºç¡€åŠŸèƒ½ç¯‡Â¶1. æ­å»ºhexoçŽ¯å¢ƒè¦æ­å»ºhexo+githubçš„ä¸ªäººåšå®¢ï¼Œé¦–å…ˆéœ€è¦ç¡®ä¿å®‰è£…äº†gitå’Œnode.jsã€‚Â¶1) å®‰è£…å’Œé…ç½®gitå…³äºŽgitçš„å®‰è£…å’Œé…ç½®è¯·å‚è€ƒã€Šwindows10å®‰è£…gitå¹¶è¿žæŽ¥githubã€‹ï¼Œç¡®ä¿gitå®‰è£…æˆåŠŸå¹¶èƒ½ä¸Šä¼ æ–‡ä»¶åˆ°githubä»“åº“ã€‚æ¸©é¦¨æç¤ºï¼šä¸€å®šè¦é…ç½®å¥½ssh keyï¼Œå‚è€ƒçš„æ•™ç¨‹ä¸­æœ‰æŒ‡å¯¼ã€‚Â¶2) å®‰è£…node.jsgitå®‰è£…é…ç½®å¥½åŽè¿˜è¦å®‰è£…node.jsï¼Œè¯·è‡³å®˜ç½‘ä¸‹è½½node.jsã€‚node.jsçš„å…·ä½“å®‰è£…ä»Žå¤´åˆ°å°¾å‚»ç“œå¼â€œä¸‹ä¸€æ­¥â€ã€‚ä¸è¿‡å®‰è£…è·¯å¾„å»ºè®®é€‰æ‹©éžç³»ç»Ÿç›˜ç›®å½•ã€‚å®‰è£…å¥½åŽï¼Œæ£€æµ‹PATHçŽ¯å¢ƒå˜é‡æ˜¯å¦é…ç½®äº†Node.jsï¼Œæ‰“å¼€cmd æˆ–è€…å®‰è£…å¥½gitåŽçš„git bashï¼Œè¾“å…¥å¦‚ä¸‹å‘½ä»¤ï¼š1$ node --versionå‡ºçŽ°node.jsçš„ç‰ˆæœ¬ä¿¡æ¯åˆ™è¯´æ˜Žå®‰è£…æˆåŠŸã€‚Â¶3) å®‰è£…hexoä»¥ä¸Šéƒ½å®ŒæˆåŽæ‰“å¼€git bashè¾“å…¥ï¼š1$ npm install -g hexo-cli #ä½¿ç”¨ npm å®‰è£… Hexoå‡ºçŽ°å¦‚ä¸‹ä¿¡æ¯è¡¨ç¤ºä¸‹è½½å¹¶å®‰è£…å®Œæˆã€‚Â¶4) ä½¿ç”¨hexoå®‰è£… Hexo å®ŒæˆåŽï¼Œåœ¨ä»»æ„ç›®å½•æ‰§è¡Œä¸‹åˆ—å‘½ä»¤ï¼ŒHexo å°†ä¼šåœ¨æŒ‡å®šæ–‡ä»¶å¤¹ä¸­æ–°å»ºæ‰€éœ€è¦çš„æ–‡ä»¶ï¼š123$ hexo init myblog # åˆå§‹åŒ–hexoå·¥ä½œåŒºï¼Œæ­¤æ—¶myblogæ˜¯å·¥ä½œåŒº$ cd myblog # è¿›å…¥å·¥ä½œåŒº $ npm install # å®‰è£…hexoé»˜è®¤ä½¿ç”¨çš„ä¸€äº›åŸºç¡€åŒ…ï¼Œå¯ä»¥ä¸ç”¨æ‰§è¡Œï¼Œå› ä¸ºåˆå§‹åŒ–æ—¶å·²ç»é»˜è®¤å®‰è£…äº†è¿™äº›åŸºç¡€åŒ…ã€‚ä½†å¦‚æžœåœ¨åˆå§‹åŒ–æ—¶å®‰è£…è¿™äº›åŸºç¡€åŒ…å¤±è´¥æ—¶ï¼Œå¯ä»¥é€šè¿‡è¿™æ¡å‘½ä»¤é‡æ–°å®‰è£…ä¸€éã€‚ðŸ’â€â™‚ä¸è¦è¾“å…¥ $å’Œ #åŠå…¶ä¹‹åŽçš„æ³¨é‡Šå†…å®¹ã€‚æ–°å»ºå®ŒæˆåŽï¼ŒæŒ‡å®šæ–‡ä»¶å¤¹çš„ç›®å½•å¦‚ä¸‹ï¼š12345678.â”œâ”€â”€ _config.ymlâ”œâ”€â”€ package.jsonâ”œâ”€â”€ scaffoldsâ”œâ”€â”€ source| â”œâ”€â”€ _drafts| â””â”€â”€ _postsâ””â”€â”€ themesç¼–è¯‘å¹¶è¿è¡Œ12$ hexo g # ç¼–è¯‘ç”Ÿæˆé™æ€æ–‡ä»¶$ hexo s # å¯åŠ¨è¿è¡ŒæœåŠ¡æ‰§è¡Œä»¥ä¸Šå‘½ä»¤ä¹‹åŽï¼Œhexoå°±ä¼šåœ¨ publicæ–‡ä»¶å¤¹ç”Ÿæˆç›¸å…³ htmlæ–‡ä»¶ï¼Œè¿™äº›æ–‡ä»¶å°†æ¥éƒ½æ˜¯è¦æäº¤åˆ°githubåŽ»çš„ã€‚hexo sæ˜¯å¼€å¯æœ¬åœ°é¢„è§ˆæœåŠ¡ï¼Œæ‰“å¼€æµè§ˆå™¨è®¿é—® http://localhost:4000 å³å¯çœ‹åˆ°å†…å®¹ï¼Œå¾ˆå¤šäººä¼šç¢°åˆ°æµè§ˆå™¨ä¸€ç›´åœ¨è½¬åœˆä½†æ˜¯å°±æ˜¯åŠ è½½ä¸å‡ºæ¥çš„é—®é¢˜ï¼Œä¸€èˆ¬æƒ…å†µä¸‹æ˜¯å› ä¸ºç«¯å£å ç”¨çš„ç¼˜æ•…ï¼Œå¯ä»¥ä½¿ç”¨:1$ hexo s -p port #è‡ªå®šä¹‰ç«¯å£æ–¹å¼å¯åŠ¨hexoæœåŠ¡ã€‚å…¶ä»–å‘½ä»¤ï¼š12$ hexo clean #æ¸…ç†publicçš„å†…å®¹$ hexo n file #æ–°å»ºæ–‡ç« ï¼ŒfileæŒ‡çš„æ˜¯markdownæ–‡ç« æ–‡ä»¶çš„åç§°Â¶2. ç¼–å†™æ–‡ç« é¦–å…ˆè¦åœ¨ myblog/sourceç›®å½•ä¸‹åˆ›å»ºä¸€ç¯‡æ–‡ç« ï¼Œå‘½åä¸ºï¼šname.mdï¼Œå¦‚ï¼šfirst-article.md ã€‚æˆ–è€…ç”¨hexoåˆ›å»ºä¸€ç¯‡æ–‡ç« ï¼Œæ‰“å¼€git bashè¾“å…¥ï¼š1$ hexo n first_articleå®ŒæˆåŽ source/_postsç›®å½•ä¸‹ä¼šå¤šå‡º first-article.mdæ–‡ä»¶ã€‚ å¦‚ä¸‹å›¾ï¼šæ‰“å¼€ first-article.mdï¼Œä¿®æ”¹è¡¨å¤´åŽå¼€å§‹é€šè¿‡markdownè¯­æ³•æ¥ä¹¦å†™æ–‡ç« ã€‚ å†…å®¹å¦‚ä¸‹ï¼š1234567891011---title: first_articledate: 2018-09-14 14:27:24tags: - åˆ†äº« - firstcategories: ç¢Žç¢Žå¿µ---# æ­£æ–‡å“¥ä»¬ï¼Œè¿™æ˜¯ä½ çš„ç¬¬ä¸€ç¯‡æ–‡ç« ~å…¶ä¸­ categoriesæ˜¯ç»™åˆ†ç±»æ æ·»åŠ åˆ†ç±»é¡¹ï¼Œæˆ–è€…å°†æ–‡ç« å½’çº³åˆ°&quot;ç¢Žç¢Žå¿µ&quot;åˆ†ç±»é¡¹é‡Œï¼›è€Œ tagsè¡¨ç¤ºçš„æ˜¯æ–‡å­—çš„æ ‡ç­¾ï¼Œå¯ä»¥å†™å¤šä¸ªï¼Œæ¯”å¦‚æˆ‘å†™äº† åˆ†äº«å’Œ firstã€‚å®ŒæˆåŽç¼–è¯‘å¹¶è¿è¡Œ12$ hexo g$ hexo sç„¶åŽæµè§ˆå™¨è®¿é—®æµ‹è¯•åšå®¢ï¼Œä½ ä¼šå‘çŽ°åˆ†ç±»èœå•å’Œæ ‡ç­¾èœå•é‡Œå°±ä¼šæœ‰å†…å®¹æ˜¾ç¤ºäº†ã€‚Â¶3. æ›´æ¢ä¸»é¢˜å¯ä»¥åˆ° hexoå®˜æ–¹ä¸»é¢˜ ä¸‹è½½ä¸»é¢˜æ¨¡æ¿ã€‚åœ¨è¿™é‡Œæˆ‘æŽ¨èä½¿ç”¨nextä¸»é¢˜ï¼Œæ–‡æ¡£é½å…¨ï¼Œç¤¾åŒºä¹Ÿæ´»è·ƒã€‚å®˜ç½‘ï¼šhttp://theme-next.iissnan.comä¸‹è½½ä¸»é¢˜åŒ…åŽæ”¾åˆ° myblog/themes/ ä¸‹ã€‚æ¯”å¦‚æˆ‘ä»¬è¦ç”¨nextä¸»é¢˜ï¼ˆä½¿ç”¨å¯¹çš„ç‰ˆæœ¬æ˜¯5.1.4ï¼‰ï¼Œåˆ™å¯ä»¥è¿›å…¥ myblog/themes/ç›®å½•ä¸‹ç„¶åŽæ‰§è¡Œå‘½ä»¤ï¼š12$ git clone https://github.com/iissnan/hexo-theme-next.git$ mv hexo-theme-next nextç„¶åŽä¿®æ”¹ myblog/_config.ymlä¸­çš„ theme: landscapeæ”¹ä¸º theme: nextå®ŒæˆåŽé‡æ–°ç¼–è¯‘å¹¶è¿è¡Œæµ‹è¯•ã€‚Â¶4. æ›´æ¢ä¸»é¢˜å¸ƒå±€nextæä¾›äº†4ç§å¸ƒå±€ä¾›é€‰æ‹©ï¼Œæˆ‘è¿™é‡Œé€‰çš„æ˜¯Geminiã€‚æ‰“å¼€ myblog/themes/next/_config.ymlä¸»é¢˜é…ç½®æ–‡ä»¶ï¼Œæœç´¢å…³é”®å­— Scheme Settingsæ‰¾åˆ°å¦‚ä¸‹ä»£ç å—ï¼Œå¹¶åœ¨ scheme: Museçš„å‰é¢æ·»åŠ  #ï¼Œç„¶åŽåŽ»æŽ‰ #scheme: Geminiå‰é¢çš„ #,ä¿®æ”¹åŽå¦‚ä¸‹ï¼š123456789# ---------------------------------------------------------------# Scheme Settings# ---------------------------------------------------------------# Schemes#scheme: Muse#scheme: Mist#scheme: Piscesscheme: Geminiå®ŒæˆåŽé‡æ–°ç¼–è¯‘è¿è¡Œæµ‹è¯•ï¼Œä½ ä¼šå‘çŽ°åšå®¢çš„ä¸»é¢˜å¸ƒå±€å·²ç»å˜äº†ã€‚Â¶5. èœå•æ æ·»åŠ èœå•é€‰é¡¹nexté»˜è®¤èœå•æ åªæœ‰ homeå’Œ archivesèœå•é€‰é¡¹ï¼Œä½ å¯ä»¥æ·»åŠ æ›´å¤šçš„èœå•é€‰é¡¹ï¼Œæ¯”å¦‚è¿™é‡Œæˆ‘ä»¬æ·»åŠ  tagså’Œ categoriesã€‚åªéœ€æ‰“å¼€ myblog/themes/next/_config.ymlä¸»é¢˜é…ç½®æ–‡ä»¶ï¼Œæœç´¢å…³é”®å­— Menu Settingsæ‰¾åˆ°å¦‚ä¸‹å›¾ä»£ç å—ï¼Œç„¶åŽå°† tagså’Œ categoriesé€‰é¡¹å‰çš„æ³¨é‡Šç¬¦å· #åŽ»æŽ‰å°±èƒ½å¯ç”¨è¿™ä¸¤ä¸ªèœå•ã€‚å¦‚ä¸‹å›¾ï¼šðŸ’â€â™‚æç¤ºï¼š NexT ä½¿ç”¨çš„æ˜¯ Font Awesome æä¾›çš„å›¾æ ‡ï¼Œå¯ä»¥åŽ»Font AwesomeèŽ·å–è‡ªå®šä¹‰çš„å›¾æ ‡ã€‚å®ŒæˆåŽé‡æ–°ç¼–è¯‘å¹¶è¿è¡Œï¼Œç„¶åŽæµè§ˆå™¨è¾“å…¥http://localhost:4000/ï¼Œä½ ä¼šå‘çŽ°å¤šå‡ºæ¥äº†ä¸¤ä¸ªèœå•é€‰é¡¹ã€‚å¦‚ä¸‹å›¾ï¼šè™½ç„¶æ˜¯æœ‰äº†è¿™ä¸¤ä¸ªèœå•é€‰é¡¹ï¼Œä½†å½“ä½ ç‚¹å‡»è¿™äº›æ–°èœå•æ—¶ä¼šå‘çŽ°åªæœ‰ç±»ä¼¼ Cannot GET /tags/è¿™æ ·çš„æç¤ºã€‚æ­¤æ—¶ä½ è‚¯å®šä¼šæ‰‹è¶³æ— æŽªã€‚åˆ«æ‹…å¿ƒï¼Œä¹‹æ‰€ä»¥ä¼šæœ‰è¿™æ ·çš„æç¤ºï¼Œæ˜¯å› ä¸ºnexté»˜è®¤åªå¯åŠ¨äº†è¿™ä¸¤ä¸ªèœå•é¡¹ï¼Œç„¶å¹¶æ²¡æœ‰æ‰¾åˆ° tagså’Œ categoriesé¡µé¢ï¼Œä½ éœ€è¦åšçš„æ˜¯åˆ›å»ºè¿™ä¸¤ä¸ªé¡µé¢ï¼Œåˆ›å»ºçš„è¿‡ç¨‹å¾ˆç®€å•ï¼Œå¹¶ä¸éœ€è¦ä½ æœ‰ä»€ä¹ˆç¼–ç¨‹åŸºç¡€ï¼Œä½ åªéœ€è¦è¾“å…¥ä»¥ä¸‹å‘½ä»¤hexoå°±èƒ½å¸®ä½ ç”Ÿæˆè¿™ä¸¤ä¸ªé¡µé¢ã€‚åœ¨ç«™ç‚¹æ ¹ç›®å½•ä¸‹æ‰“å¼€ä½ å¿ƒçˆ±çš„git bashã€‚ç„¶åŽè¾“å…¥ä»¥ä¸‹ä¸¤æ¡å‘½ä»¤ï¼š12$ hexo n page tags$ hexo n page categorieså®ŒæˆåŽä½ ä¼šå‘çŽ° myblog/source/ç›®å½•ä¼šå‡ºçŽ°ä¸¤ä¸ªæ–‡ä»¶å¤¹ï¼Œå¦‚ä¸‹å›¾ï¼šæ‰“å¼€ myblog/source/categoriesç›®å½•ä¸‹çš„ index.mdï¼Œä¿®æ”¹å†…å®¹ä¸ºä»¥ä¸‹ï¼š12345---title: åˆ†ç±»date: 2018-09-14 12:18:35type: categories---æ‰“å¼€ myblog/source/tags/ç›®å½•ä¸‹çš„ index.mdï¼Œä¿®æ”¹å†…å®¹ä¸ºä»¥ä¸‹ï¼š12345---title: æ ‡ç­¾date: 2018-09-14 12:17:57type: tags---å®ŒæˆåŽé‡æ–°ç¼–è¯‘å¹¶è¿è¡Œï¼Œæ­¤æ—¶ä½ å†æ‰“å¼€æµè§ˆå™¨è¾“å…¥http://localhost:4000/ï¼Œç‚¹å‡» tagså’Œ categoriesèœå•æ—¶ä¼šå‘çŽ°å·²ç»å¯ä»¥æ‰“å¼€é¡µé¢äº†ã€‚Â¶6. é»˜è®¤ä¸­æ–‡ç®€ä½“æ˜¾ç¤ºè®¾ç½®æ‰“å¼€å…¨å±€é…ç½®æ–‡ä»¶ myblog/_config.ymlï¼Œæœç´¢æ‰¾åˆ° languageï¼Œæ”¹ä¸ºä»¥ä¸‹ï¼š1language: zh-Hanså¦‚å›¾ï¼šè¿™é‡Œçš„ zh-Hansè¦æ ¹æ® myblog/themes/next/languagesç›®å½•ä¸‹çš„è¯­è¨€é…ç½®æ–‡ä»¶çš„åç§°æ¥è®¾ç½®ï¼Œä¹Ÿæœ‰å¯èƒ½æ˜¯ zh-CNã€‚(å¦‚åœ¨æ­¤ç›®å½•é‡Œæ‰“å¼€ zh-Hans.ymlæ–‡ä»¶ï¼Œå‘çŽ°é‡Œé¢æ˜¯ç®€ä½“ä¸­æ–‡ï¼Œé‚£å°±å¯¹äº†ï¼Œæ³¨æ„ï¼šè¿™é‡Œçš„æ–‡ä»¶çš„åç§°ä¸å¡«æ–‡ä»¶åŽç¼€å .yml)å®ŒæˆåŽé‡æ–°ç¼–è¯‘å¹¶è¿è¡Œæµ‹è¯•ï¼Œæ•ˆæžœå¦‚ä¸‹ï¼šÂ¶7. æ›´æ”¹åšå®¢ä½œè€…åå’Œä¸»é¡µåœ°å€æ‰“å¼€ myblog/_config.ymlå…¨å±€é…ç½®æ–‡ä»¶ï¼Œæœç´¢å…³é”®è¯ Siteæ‰¾åˆ°å¦‚ä¸‹å›¾çš„åœ°æ–¹ç„¶åŽä¿®æ”¹ä»¥ä¸‹ä¸‰å¤„ï¼š1234title: Qcmoke's Blog #ç«™ç‚¹åç§°author: Qcmoke #ä½œè€…åç§°url: https://qcmoke.github.io #å¡«github pageçš„urlå³å¯å®ŒæˆåŽé‡æ–°ç¼–è¯‘å¹¶è¿è¡Œï¼Œæ•ˆæžœå¦‚ä¸‹å›¾ï¼šÂ¶8. å¯ç”¨ä¾§è¾¹æ ç¤¾äº¤é“¾æŽ¥æ‰“å¼€ myblog/themes/next/_config.ymlä¸»é¢˜é…ç½®æ–‡ä»¶ï¼Œæœç´¢å…³é”®å­— Socialæ‰¾åˆ°ä¸‹å›¾ä½ç½®ï¼šæ ¹æ®è‡ªèº«æƒ…å†µè¿›è¡Œä¿®æ”¹æˆ–è€…æ·»åŠ ï¼Œæ³¨æ„ï¼šä¸€å®šè¦åŽ»æŽ‰ #social:å‰çš„ #æ‰èƒ½ç”Ÿæ•ˆã€‚æˆ‘çš„å¦‚ä¸‹å›¾ï¼šå®ŒæˆåŽé‡æ–°ç¼–è¯‘å¹¶è¿è¡Œï¼Œæ•ˆæžœå¦‚ä¸‹å›¾ï¼šÂ¶9. ä¾§æ æ·»åŠ å¤–é“¾æ‰“å¼€ myblog/themes/next/_config.ymlä¸»é¢˜é…ç½®æ–‡ä»¶ï¼Œæœç´¢å…³é”®å­— Blog rollsæ‰¾åˆ°ä¸‹å›¾ä½ç½®ï¼šæ ¹æ®è‡ªèº«æƒ…å†µè¿›è¡Œä¿®æ”¹æˆ–è€…æ·»åŠ ï¼Œæ³¨æ„ï¼šä¸€å®šè¦åŽ»æŽ‰ #links:å‰çš„ #æ‰èƒ½ç”Ÿæ•ˆã€‚æˆ‘çš„å¦‚ä¸‹å›¾å®ŒæˆåŽé‡æ–°ç¼–è¯‘å¹¶è¿è¡Œï¼Œæ•ˆæžœå¦‚ä¸‹å›¾ï¼šÂ¶10.åŽ»é™¤ä¾§æ ç›®å½•è‡ªåŠ¨ç”Ÿæˆçš„åºæ•°ç¼–è¾‘ myblog/themes/next/_config.ymlä¸»é¢˜é…ç½®æ–‡ä»¶ï¼Œæœç´¢å…³é”®å­— tocæ‰¾åˆ°å¦‚ä¸‹ä»£ç ï¼Œnumberé»˜è®¤æ˜¯ trueï¼Œå°† numberè®¾ç½®ä¸º falseï¼Œå¦‚ä¸‹ï¼š12345678toc: enable: true # Automatically add list number to toc. number: false # If true, all words will placed on next lines if header width longer then sidebar width. wrap: falseÂ¶11. è®¾ç½®å¤´åƒÂ¶1) åŸºç¡€è®¾ç½®æ‰¾ä¸€å¼ ä½ å–œæ¬¢çš„å¤´åƒå›¾ç‰‡æ”¾å…¥ myblog/themes/next/source/imagesç›®å½•ä¸­ï¼Œä¾‹å¦‚æˆ‘è¿™é‡Œæ”¾äº†ä¸€å¼  logo.jpgã€‚ç„¶åŽæ‰“å¼€ myblog/themes/next/_config.ymlä¸»é¢˜é…ç½®æ–‡ä»¶ã€‚æ‰¾åˆ°å…³é”®å­— avatar,åœ¨åŽé¢åŠ å…¥ logo.jpgçš„è·¯å¾„åœ°å€ï¼ˆæ³¨æ„ï¼šæ˜¯æƒ³ç›¸å¯¹è·¯å¾„ï¼‰ã€‚å¦‚ä¸‹å›¾ï¼šå¦‚æžœä½ æƒ³å¦å¤–æ·»åŠ ä¸€ä¸ªç‚¹å‡»ä¾§æ å¤´åƒå°±èƒ½å›žåˆ°åšå®¢é¦–é¡µçš„åŠŸèƒ½ï¼Œå…¶å®žå¾ˆç®€å•ï¼Œåªéœ€è¦å°†å›¾ç‰‡å˜æˆä¸€ä¸ªå¯ä»¥ç‚¹å‡»çš„å›¾ç‰‡é“¾æŽ¥ã€‚æ‰“å¼€æ–‡ä»¶ä½ç½®ï¼šmyblog/themes/next/layout/_macro/sidebar.swig,æ‰¾åˆ°å¦‚ä¸‹ä»£ç å—ã€‚123&lt;img class="site-author-image" itemprop="image" src="&#123;&#123; url_for( theme.avatar | default(theme.images + '/avatar.gif') ) &#125;&#125;" alt="&#123;&#123; theme.author &#125;&#125;" /&gt;å°†ä»¥ä¸Šä»£ç å—å¤–é¢æ·»åŠ ä¸€ä¸ªæŒ‡å‘åšå®¢ä¸»é¡µçš„aæ ‡ç­¾ã€‚å³ä¿®æ”¹æˆä»¥ä¸‹ï¼š12345&lt;a href="/"&gt; &lt;img class="site-author-image" itemprop="image" src="&#123;&#123; url_for( theme.avatar | default(theme.images + '/avatar.gif') ) &#125;&#125;" alt="&#123;&#123; theme.author &#125;&#125;" /&gt;&lt;/a&gt;å®ŒæˆåŽé‡æ–°ç¼–è¯‘å¹¶è¿è¡Œè¿›è¡Œæµ‹è¯•ã€‚Â¶2) å®šåˆ¶åœ†å½¢å¤´åƒæ‰“å¼€ç«™ç‚¹ä¸‹çš„ myblog/themes/next/source/css/_common/components/sidebar/sidebar-author.stylæ–‡ä»¶ ,åœ¨ .site-author-imageé€‰æ‹©å™¨çš„æœ«å°¾ï¼ˆå³æ‹¬å·å‰ï¼‰æ·»åŠ 12border-radius: 50%;transition: 2s all;åœ¨ .site-author-imageé€‰æ‹©å™¨å³æ‹¬å·åŽå¦èµ·ä¸€è¡Œ,åŠ å…¥ä»¥ä¸‹ä»£ç ï¼š123.site-author-image:hover&#123; transform: rotate(360deg);&#125;æˆ–è€…ä½ å¯ä»¥çœ‹ä¸‹é¢çš„ä»£ç ä¼šæ›´åŠ ç›´è§‚ã€‚åŽŸæ¥çš„ï¼š12345678.site-author-image &#123; display: block; margin: 0 auto; padding: $site-author-image-padding; max-width: $site-author-image-width; height: $site-author-image-height; border: $site-author-image-border-width solid $site-author-image-border-color;&#125;ä¿®æ”¹åŽï¼š123456789101112131415.site-author-image &#123; display: block; margin: 0 auto; padding: $site-author-image-padding; max-width: $site-author-image-width; height: $site-author-image-height; border: $site-author-image-border-width solid $site-author-image-border-color; opacity: hexo-config('avatar.opacity') is a 'unit' ? hexo-config('avatar.opacity') : 1; border-radius: 50%; transition: 2s all;&#125;.site-author-image:hover&#123; transform: rotate(360deg);&#125;å®ŒæˆåŽé‡æ–°ç¼–è¯‘å¹¶è¿è¡Œï¼Œæ•ˆæžœå¦‚ä¸‹å›¾ï¼šÂ¶12. è®¾ç½®æµè§ˆå™¨æ ‡ç­¾å›¾æ ‡å°†ä¸€å¼ å›¾æ ‡32x32åƒç´ å¤§å°çš„å›¾æ ‡favicon.jpgæ”¾å…¥ myblog/themes/next/source/imagesç›®å½•é‡Œï¼Œæ‰“å¼€ myblog/themes/next/_config.ymlä¸»é¢˜é…ç½®æ–‡ä»¶ï¼Œæœç´¢å…³é”®å­— faviconï¼Œæ‰¾åˆ°å¦‚ä¸‹ä»£ç å—ï¼Œå¹¶åšç›¸åº”ä¿®æ”¹ã€‚12345678favicon: small: /images/favicon-16x16-next.png #medium: /images/favicon-32x32-next.png medium: /images/favicon.jpg #æµè§ˆå™¨æ ‡ç­¾å›¾æ ‡åœ¨è¿™é‡Œè®¾ç½® apple_touch_icon: /images/apple-touch-icon-next.png safari_pinned_tab: /images/logo.svg #android_manifest: /images/manifest.json #ms_browserconfig: /images/browserconfig.xmlå®ŒæˆåŽé‡æ–°ç¼–è¯‘å¹¶è¿è¡Œï¼Œæµè§ˆå™¨è¾“å…¥http://localhost:4000/è®¿é—®ä½ çš„åšå®¢ï¼Œå‘çŽ°ä½ çš„åšå®¢çš„æµè§ˆå™¨æ ‡ç­¾å›¾æ ‡å·²ç»å˜äº†ã€‚Â¶13. é¦–é¡µæ–‡ç« ç¼©ç•¥æè¿°è®¾ç½®æ‰“å¼€ myblog/themes/next/_config.ymlä¸»é¢˜é…ç½®æ–‡ä»¶ï¼Œæœç´¢å…³é”®å­— auto_excerptæ‰¾åˆ°å¦‚ä¸‹ä½ç½®ï¼š123auto_excerpt: enable: false length: 150ä¿®æ”¹enableå’Œlengthï¼Œä¿®æ”¹åŽå¦‚ä¸‹ï¼š123auto_excerpt: enable: true length: 10å®ŒæˆåŽé‡æ–°ç¼–è¯‘å¹¶è¿è¡Œï¼Œæ•ˆæžœå¦‚ä¸‹å›¾:Â¶14. æ·»åŠ 3DåŠ¨ç”»èƒŒæ™¯æ‰“å¼€ myblog/themes/next/_config.ymlä¸»é¢˜é…ç½®æ–‡ä»¶ï¼Œæœç´¢å…³é”®å­— canvasæ‰¾åˆ°å¦‚ä¸‹ä½ç½®ï¼š123456789101112# Canvas-nest# Dependencies: https://github.com/theme-next/theme-next-canvas-nestcanvas_nest: false# JavaScript 3D library.# Dependencies: https://github.com/theme-next/theme-next-three# three_wavesthree_waves: false# canvas_linescanvas_lines: false# canvas_spherecanvas_sphere: falseçœ‹ä½ å–œæ¬¢å“ªç§åŠ¨ç”»èƒŒæ™¯é£Žæ ¼ï¼Œåˆ†åˆ«æœ‰ canvas_nestã€three_wavesã€canvas_linesã€canvas_sphereå››ç§ï¼Œé€‰æ‹©ä¸€ç§ç„¶åŽå°†å†’å·åŽé¢çš„ falseæ”¹æˆ trueã€‚è¿™é‡Œæˆ‘é€‰æ‹©çš„æ˜¯ç¬¬ä¸€ç§ canvas_nestï¼Œæ”¹æˆå¦‚ä¸‹ï¼š123456789101112#Canvas-nest# Dependencies: https://github.com/theme-next/theme-next-canvas-nestcanvas_nest: true# JavaScript 3D library.# Dependencies: https://github.com/theme-next/theme-next-three# three_wavesthree_waves: false# canvas_linescanvas_lines: false# canvas_spherecanvas_sphere: falseå®ŒæˆåŽé‡æ–°ç¼–è¯‘å¹¶è¿è¡Œï¼Œå®ŒæˆåŽä½ ä¼šå‘çŽ°åšå®¢ç½‘é¡µå·²ç»å‡ºçŽ°å¥½çœ‹çš„åŠ¨æ€èƒŒæ™¯äº†ã€‚Â¶15. å¢žåŠ æœ¬åœ°æœç´¢åŠŸèƒ½éœ€è¦å®‰è£… hexo-generator-searchdbæ’ä»¶æ¥å®žçŽ°è¿™ä¸ªåŠŸèƒ½ï¼Œåœ¨ç«™ç‚¹çš„æ ¹ç›®å½•ä¸‹æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š1$ npm install hexo-generator-searchdb --saveç¼–è¾‘ myblog/_config.ymlå…¨å±€é…ç½®æ–‡ä»¶ï¼Œæ–°å¢žä»¥ä¸‹å†…å®¹åˆ°ä»»æ„ä½ç½®ï¼š12345search: path: search.xml field: post format: html limit: 10000æ‰“å¼€ myblog/themes/next/_config.ymlä¸»é¢˜é…ç½®æ–‡ä»¶ï¼Œæœç´¢å…³é”®å­— local_searchæ‰¾åˆ°å¦‚ä¸‹ä»£ç ï¼Œenableé»˜è®¤æ˜¯ falseï¼Œå°† enableè®¾ç½®ä¸º trueï¼Œå¦‚ä¸‹ï¼š12local_search: enable: trueå®ŒæˆåŽé‡æ–°ç¼–è¯‘å¹¶è¿è¡Œï¼Œå®ŒæˆåŽä½ ä¼šå‘çŽ°åšå®¢èœå•æ ä¸Šå·²ç»å‡ºçŽ°äº†æœç´¢é¡¹äº†ã€‚Â¶16. ç½®é¡¶æŒ‰é’®æ˜¾ç¤ºç™¾åˆ†æ¯”æ‰“å¼€ myblog/themes/next/_config.ymlä¸»é¢˜é…ç½®æ–‡ä»¶ï¼Œæœç´¢å…³é”®å­— scrollpercentã€‚ å°†å…¶å€¼è®¾ç½®ä¸ºtrueã€‚æ•ˆæžœå¦‚ä¸‹å›¾ï¼šÂ¶17. æ–‡ç« å­—æ•°å’Œé˜…è¯»æ—¶é•¿ç»Ÿè®¡éœ€è¦å®‰è£… hexo-wordcountè¿™ä¸ªæ’ä»¶æ¥å®žçŽ°è¿™ä¸ªåŠŸèƒ½ï¼Œåœ¨ç«™ç‚¹æ ¹ç›®å½•ä¸‹æ‰“å¼€git bashï¼Œè¾“å…¥ï¼š1$ npm install hexo-wordcount --saveæ‰“å¼€ myblog/themes/next/_config.ymlä¸»é¢˜é…ç½®æ–‡ä»¶ï¼Œæœç´¢å…³é”®å­— post_wordcountã€‚å°†å…¶é…ç½®ä¿®æ”¹æˆä»¥ä¸‹ä»£ç ï¼š123456post_wordcount: item_text: true wordcount: true min2read: true totalcount: false separated_meta: trueå®ŒæˆåŽé‡æ–°ç¼–è¯‘å¹¶è¿è¡Œæµ‹è¯•ã€‚Â¶18. éšè—åº•éƒ¨çš„â€œå¼ºåŠ›é©±åŠ¨â€å†…å®¹æ‰“å¼€ myblog/themes/next/layout/_partials/footer.swig,æœç´¢å…³é”®å­— theme.footer.powered.enableï¼Œé€šè¿‡ &lt;!-- --&gt;æ³¨é‡ŠæŽ‰å¦‚ä¸‹ä»£ç ã€‚å®ŒæˆåŽé‡æ–°ç¼–è¯‘å¹¶è¿è¡Œï¼Œä½ ä¼šå‘çŽ°åšå®¢å·²ç»éšè—æŽ‰äº†åº•éƒ¨çš„â€œå¼ºåŠ›é©±åŠ¨â€å†…å®¹äº†ã€‚Â¶19. å›¾ç‰‡ç‚¹å‡»æ”¾å¤§åŠŸèƒ½æ”¯æŒé»˜è®¤fancyboxå¼€å¯åŽï¼Œæ‰€æœ‰æ–‡å­—çš„å›¾ç‰‡éƒ½ä¼šå¼ºåˆ¶è¢«åŠ å…¥åˆ°äº†fancyboxå¼¹å‡ºæ¡†ï¼Œå¹¶ä¸”fancyboxä¼šå’Œå›¾ç‰‡é“¾æŽ¥å†²çªï¼Œå¦‚æžœæƒ³è®©æŸäº›å›¾ç‰‡ç¦ç”¨fancyboxçš„è¯å¯ä»¥å¯¹nextåšä¸€äº›ä¿®æ”¹æ¥å®žçŽ°è¿™ä¸ªå°åŠŸèƒ½ã€‚ä¿®æ”¹ themes/next/source/js/src/utils.jsæ–‡ä»¶ï¼š123456789 wrapImageWithFancyBox: function () &#123; $('.content img') .not('[hidden]') .not('.group-picture img, .post-gallery img') .each(function () &#123; var $image = $(this);+ if ($image.hasClass('nofancybox')) return; var imageTitle = $image.attr('title'); var $imageWrapLink = $image.parent('a');ç„¶åŽåœ¨ä½¿ç”¨çš„æ—¶å€™ï¼Œç»™ä¸éœ€è¦ fancybox çš„æ ‡ç­¾ä¸­æ·»åŠ classå±žæ€§ class=&quot;nofancybox&quot;ï¼Œå¦‚æžœ class å±žæ€§ä¸­å·²ç»æœ‰å…¶å®ƒå†…å®¹ï¼Œä¹Ÿå¯ä»¥ä»¥ç©ºæ ¼å¹¶åˆ—ï¼Œæ¯”å¦‚ä¸‹é¢ï¼š1&lt;img class="logoimg nofancybox" src="/images/logo.jpg"&gt;Â¶20. æ–‡ç« åº”ç”¨æœ¬åœ°å›¾ç‰‡å†™åšå®¢æ—¶è™½ç„¶å¯ä»¥é€šè¿‡ç¬¬ä¸‰æ–¹å›¾åºŠç»™hexoæ–‡ç« æ’å…¥å›¾ç‰‡ï¼Œä½†å¦‚æžœä½ å’Œæˆ‘ä¸€æ ·æ€»å®³æ€•å“ªå¤©ç¬¬ä¸‰æ–¹å›¾åºŠæä¾›å•†è¢«æ— æ•…å’Œè°äº†æˆ–è€…å…³é—­æœåŠ¡äº†ï¼Œé‚£ä¹ˆé€šè¿‡ç›¸å¯¹è·¯å¾„ä»Žæœ¬åœ°å¼•å…¥å›¾ç‰‡çš„æ–¹æ¡ˆæ— ç–‘æ˜¯å†å¥½ä¸è¿‡çš„æ–¹æ¡ˆã€‚hexoå…è®¸ä½ åœ¨ myblog/source/imagesç›®å½•ä¸‹æ”¾å…¥å›¾ç‰‡ï¼ˆè¿™é‡Œçš„imagesç›®å½•å¦‚æžœæ²¡æœ‰éœ€è¦ä½ è‡ªå·±åˆ›å»ºï¼‰ï¼Œå½“hexoç¼–è¯‘æ—¶ä¼šå°†å›¾ç‰‡æ”¾å…¥åˆ° myblog/public/imagesç›®å½•é‡Œã€‚ç”±äºŽéƒ¨ç½²åšå®¢å…¶å®žå°±æ˜¯éƒ¨ç½² publicç›®å½•ï¼Œæ‰€ä»¥å¼•ç”¨å›¾ç‰‡çš„æ–¹å¼ä¹Ÿå°±æ˜¯ ![](/images/image.jpg)ã€‚å› æ­¤è¦å°†åšå®¢æ–‡ç« å¼•ç”¨çš„æœ¬åœ°å›¾ç‰‡éƒ½å­˜åˆ° myblog/source/imagesç›®å½•é‡Œã€‚ä½†å¦‚æžœæ‰€æœ‰çš„å›¾ç‰‡éƒ½æ”¾åˆ°åŒä¸€ä¸ªç›®å½•é‡Œä¼šå¯¼è‡´åŽæœŸç»´æŠ¤çš„æˆæœ¬å¾ˆå¤§ã€‚ä¸ºè§£å†³ä»¥ä¸Šçš„é—®é¢˜ï¼Œhexoæ”¯æŒé€šè¿‡å…¶ä»–ç›®å½•çš„æ–¹å¼å¼•å…¥å›¾ç‰‡ï¼Œåªè¦ä¿®æ”¹ myblog/_config.ymlå…¨å±€é…ç½®æ–‡ä»¶ï¼Œå°† post_asset_folder:è¿™ä¸ªé€‰é¡¹è®¾ç½®ä¸º trueï¼Œå°±èƒ½å°†å›¾ç‰‡æ”¾ç½®åˆ°markdownæ–‡ä»¶æ‰€åœ¨ç›®å½•ä¸‹çš„åŒåæ–‡ä»¶å¤¹é‡Œï¼Œä½†éœ€è¦é€šè¿‡ç±»ä¼¼![](2018/09/21/article/image.jpg)çš„æ–¹å¼æ¥å¼•ç”¨å›¾ç‰‡ï¼Œæ˜Žæ˜¾è¿™æ ·ä¸€é•¿ä¸²çš„è·¯å¾„å¼•ç”¨æ˜¯å¾ˆç³Ÿç³•çš„ã€‚ä¸ºè§£å†³ä»¥ä¸Šçš„é—®é¢˜ï¼Œå¯ä»¥ä½¿ç”¨ hexo-asset-imageæ’ä»¶æ¥å®žçŽ°ç±»ä¼¼![](article/image.jpg)çš„ç›¸å¯¹è·¯å¾„å¼•ç”¨æ–¹å¼æ¥å¼•ç”¨å›¾ç‰‡ï¼Œæ“ä½œå¦‚ä¸‹ï¼šï¼ˆ1ï¼‰å®‰è£…hexo-asset-image1$ npm install hexo-asset-image --saveï¼ˆ2ï¼‰å°†å…¨å±€é…ç½®æ–‡ä»¶ myblog/_config.ymlé‡Œçš„ post_asset_folder:è¿™ä¸ªé€‰é¡¹è®¾ç½®ä¸º trueï¼ˆ3ï¼‰æ–°å»ºä¸€ç¯‡markdownæ–‡ç« åšæµ‹è¯•12#æ‰§è¡Œè¯¥å‘½ä»¤ä¼šåœ¨myblog/source/_posts/æ–‡ä»¶å¤¹å†…é™¤äº†ç”Ÿæˆnewpage.mdæ–‡ä»¶å¤–ï¼Œè¿˜ç”Ÿæˆä¸€ä¸ªåŒåçš„newpageæ–‡ä»¶å¤¹$ hexo n newpageï¼ˆ4ï¼‰å¼•ç”¨æœ¬åœ°å›¾ç‰‡è¦æ’å…¥å›¾ç‰‡æ—¶ï¼Œåªéœ€è¦å°†å›¾ç‰‡æ”¾å…¥ newpageæ–‡ä»¶å¤¹ä¸­ï¼Œæ¯”å¦‚æ”¾å…¥ä¸€å¼ åä¸ºtest.pngçš„å›¾ç‰‡ï¼Œé‚£ä¹ˆåœ¨newpage.mdä¸­é€šè¿‡ä»¥ä¸‹markdownè¯­å¥æ¥å¼•ç”¨è¯¥å›¾ç‰‡ï¼š1![test](newpage/test.png)ï¼ˆ5ï¼‰ç¼–è¯‘å¹¶å¯åŠ¨æµ‹è¯•12$ hexo g$ hexo så®ŒæˆåŽä½ ä¼šå‘çŽ°åšå®¢ä¸­ç›¸å…³çš„æ–‡ç« èƒ½æ­£å¸¸æ˜¾ç¤ºå›¾ç‰‡äº†ã€‚Â¶21. ä¿®æ”¹æ–‡ç« é“¾æŽ¥ç»„æˆå½¢å¼Hexoé»˜è®¤çš„æ–‡ç« é“¾æŽ¥å½¢å¼æ˜¯ä¸€ä¸ªå››çº§urlâ€”â€”https://domain/year/month/day/demo.htmlï¼Œå¯èƒ½é€ æˆurlè¿‡é•¿ï¼Œå¯¹æœç´¢å¼•æ“Žæ˜¯ååˆ†ä¸å‹å¥½ã€‚æˆ‘ä»¬å¯ä»¥æ”¹æˆhttps://domain/demo.htmlçš„å½¢å¼ã€‚ç¼–è¾‘å…¨å±€é…ç½®æ–‡ä»¶myblog/_config.ymlï¼Œåšå¦‚ä¸‹ä¿®æ”¹ï¼š12#permalink: :year/:month/:day/:title/permalink: :title.htmlæ‰§è¡Œä»¥ä¸‹å‘½ä»¤é‡æ–°éƒ¨ç½²å³å¯ï¼š1$ hexo clean &amp;&amp; hexo g &amp;&amp; hexo dä½†æ˜¯ä¸ºäº†æ›´å¥½ç®¡ç†æ–‡ç« ï¼Œæˆ‘æ›´æ„¿æ„ç”¨https://domain/åˆ†ç±»/demo.htmlçš„å½¢å¼æ¥å®šä¹‰æ–‡ç« çš„urlã€‚æ¯”å¦‚æˆ‘æœ¬åœ°myblog/source/_postsç›®å½•ä¸‹ç®¡ç†çš„æ–‡ç« ï¼ˆmarkdownæ–‡ä»¶ï¼‰éžå¸¸å¤šï¼Œä¼šå¾ˆä¸å®¹æ˜“æŸ¥æ‰¾åˆ°ã€‚é‚£æˆ‘å¯ä»¥æ ¹æ®_postsç›®å½•ä¸‹markdownæ–‡ä»¶çš„ç±»åˆ«è¿›è¡Œåˆ†ç±»ï¼Œå¹¶åœ¨_postsç›®å½•ä¸‹å»ºç«‹ä¸Žæ–‡ç« ç›¸å…³çš„æ–‡ä»¶å¤¹ï¼Œå°†è¿™äº›æ–‡ç« åˆ†ç±»å¥½åŽæ”¾å…¥åˆ°è¿™äº›åˆ†ç±»æ–‡ä»¶å¤¹é‡Œå­˜æ”¾ã€‚æ¯”å¦‚æˆ‘æœ‰ä¸€ç¯‡æ–‡ä»¶åä¸ºhexo_next.mdçš„æ–‡ç« ã€‚æ–‡ç« çš„æ ‡é¢˜å«ã€Šhexo nextä¸»é¢˜è®¾ç½®ä¸Žå®Œå–„ã€‹ï¼Œé‚£ä¹ˆæˆ‘æ ¹æ®è‡ªå·±çš„å–œå¥½å»ºç«‹ä¸€ä¸ªåä¸ºblogçš„æ–‡ä»¶å¤¹ï¼Œå¹¶å°†hexo_next.mdæ”¾åˆ°è¿™ä¸ªæ–‡ä»¶å¤¹é‡Œã€‚ä»¥å·¥ä½œåŒºæ ¹ç›®å½•ä¸ºèµ·å§‹ç‚¹çš„å¤§æ¦‚çš„ç»“æž„å¦‚ä¸‹ï¼š1234567891011121314151617&gt;.&gt;â”œâ”€â”€ _config.yml&gt;â”œâ”€â”€ package.json&gt;â”œâ”€â”€ scaffolds&gt;â”œâ”€â”€ source&gt;| â”œâ”€â”€ _drafts&gt;| â””â”€â”€ _posts&gt;| â”œâ”€â”€ blog #æœ¬ä¾‹åˆ†ç±»æ–‡ä»¶å¤¹&gt;| | â”œâ”€â”€ hexo_next.md #æœ¬ä¾‹æ–‡ç« ï¼ˆmarkdownæ–‡ä»¶ï¼‰&gt;| | â”œâ”€â”€ hexo_next #æœ¬åœ°å­˜æ”¾hexo_next.mdé‡Œæ‰€éœ€å›¾ç‰‡çš„æ–‡ä»¶å¤¹ | â”œâ”€â”€ typecho_move.md #å…¶ä»–åŒç±»åˆ«çš„æ–‡ç«  &gt;| | â””â”€â”€ typecho_move &gt;| â”œâ”€â”€ devops #å…¶ä»–åˆ†ç±»æ–‡ä»¶å¤¹&gt;| â”œâ”€â”€ linux&gt;| â”œâ”€â”€ sql&gt;| â””â”€â”€ tools&gt;â””â”€â”€ themesç»è¿‡é™æ€åŒ–å¤„ç†åŽï¼Œé‚£ä¹ˆæˆ‘çš„urlå½¢å¼å°±å˜æˆäº†https://domain/blog/hexo_next.htmlã€‚è¿™æ ·å¤„ç†çš„å¥½å¤„å°±æ˜¯æ—¢èƒ½å¾ˆå¥½çš„ç®¡ç†æ–‡ç« ï¼Œåˆèƒ½å¯¹seoèµ·åˆ°å¾ˆå¥½çš„ä¼˜åŒ–ä½œç”¨ï¼Œé‚£ä½•ä¹è€Œä¸ä¸ºå‘¢ï¼ŸÂ¶21. æ”¯æŒemojiæ–‡å­—è¡¨æƒ…å¦‚ä½•è®©markdownå¯ä»¥è§£æžemojiå‘¢ï¼Ÿå®žé™…ä¸Šæˆ‘ä»¬å‘çŽ°ï¼Œåœ¨ä¸€äº›ç¼–è¾‘å™¨ä¸­è¾“å…¥ :blush: å¹¶æ²¡æœ‰è¡¨æƒ…å‡ºçŽ°ï¼ˆå½“ç„¶æœ‰çš„ç¼–è¾‘å™¨å¯ä»¥ï¼Œæ¯”å¦‚æˆ‘çŽ°åœ¨ä½¿ç”¨çš„typoraå°±å¾ˆç»™åŠ›ï¼‰ï¼Œè¿™æ˜¯ä¸ºä»€ä¹ˆå‘¢ï¼Ÿ è¿™æ˜¯markdownç¼–è¾‘å™¨æ¸²æŸ“å¼•æ“Žçš„é—®é¢˜ ã€‚åŒæ ·çš„ï¼ŒHexoä¹Ÿè¦å¯¹markdownæ–‡ä»¶è¿›è¡Œæ¸²æŸ“ï¼Œè€ŒHexoç›®å‰é»˜è®¤æ¸²æŸ“å¼•æ“Žæ˜¯ hexo-renderer-marked,å¯æƒœè¿™ä¸ªæ¸²æŸ“å™¨ä¼¼ä¹Žä¸æ”¯æŒæ’ä»¶æ‰©å±•ï¼Œå½“ç„¶å°±ä¸è¡Œäº†ã€‚é‚£æ€Žä¹ˆè§£å†³å‘¢ï¼Ÿè¿™é‡Œå°±è¦è¯´ hexo-renderer-markdown-itæ’ä»¶äº†ï¼Œè¿™ä¸ªæ¸²æŸ“å™¨æ’ä»¶æ˜¯æ”¯æŒæ‰©å±•ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨è¿™ä¸ªæ¸²æŸ“å¼•æ“Žæ¥æ”¯æŒ emojiè¡¨æƒ…ï¼Œå…·ä½“å®žçŽ°è¿‡ç¨‹å¦‚ä¸‹ï¼šæ›´æ¢æ¸²æŸ“å™¨è¿›å…¥blogè·Ÿç›®å½•ï¼Œæ‰§è¡Œå¦‚ä¸‹å‘½ä»¤12$ npm un hexo-renderer-marked --save #å¸è½½hexoé»˜è®¤æ¸²æŸ“å™¨hexo-renderer-marked$ npm i hexo-renderer-markdown-it --save #å®‰è£…æ¸²æŸ“å™¨hexo-renderer-markdown-itå®‰è£…emojiæ’ä»¶ï¼Œæ‰§è¡Œå¦‚ä¸‹å‘½ä»¤1$ npm install markdown-it-emoji --saveç¼–è¾‘ç«™ç‚¹é…ç½®æ–‡ä»¶æ‰“å¼€ myblog/_config.ymlç«™ç‚¹é…ç½®æ–‡ä»¶ï¼Œæ·»åŠ å¦‚ä¸‹å†…å®¹1234567891011121314151617181920212223# Markdown-it config## Docs: https://github.com/celsomiranda/hexo-renderer-markdown-it/wikimarkdown: render: html: true xhtmlOut: false breaks: true linkify: true typographer: true quotes: 'â€œâ€â€˜â€™' plugins: - markdown-it-abbr - markdown-it-footnote - markdown-it-ins - markdown-it-sub - markdown-it-sup - markdown-it-emoji # add emoji anchors: level: 1 collisionSuffix: 'v' permalink: true permalinkClass: header-anchor permalinkSymbol: Â¶å®ŒæˆåŽé‡æ–°ç¼–è¯‘å¹¶è¿è¡Œï¼Œä½ ä¼šå‘çŽ°åšå®¢ä¸­ç›¸å…³çš„æ–‡ç« èƒ½æ­£å¸¸æ˜¾ç¤º emojiè¡¨æƒ…äº†ã€‚æ¯”å¦‚ä¸‹é¢çš„markdownç»è¿‡ç¼–è¯‘æˆhtmlåŽï¼Œç½‘é¡µè®¿é—®ä¼šå¾—åˆ°è¿™ä¸ªç¬‘è„¸ï¼šðŸ˜„1234567---title: emoji testdate: 2018-09-14 04:13:00---&lt;!-- more --&gt;:smile:ðŸ’â€â™‚æ›´å¤šçš„ emojiå†™æ³•å¯å‚è€ƒ:ðŸ“šhttps://www.webfx.com/tools/emoji-cheat-sheet/Â¶22. æ›´æ”¹ä¸Šä¸‹ç¯‡çš„é¡ºåºé»˜è®¤nextæ–‡ç« ä¸‹é¢çš„&quot;ä¸Šä¸€ç¯‡ï¼Œä¸‹ä¸€ç¯‡&quot;æ˜¯æ—§å‘å¸ƒçš„æ–‡ç« åœ¨ä¸Šç¯‡é‡Œçš„ï¼Œä½†æ˜¯å¦‚æžœå¸Œæœ›æ–°çš„å‘å¸ƒæ–‡ç« åœ¨ä¸Šç¯‡çš„è¯å°±è¦åšä¿®æ”¹æˆ–è€…é…ç½®äº†ï¼Œæœ€æ–°ç‰ˆæœ¬çš„nextä¼¼ä¹Žå·²ç»å¯ä»¥ç›´æŽ¥åœ¨ä¸»é¢˜é…ç½®æ–‡ä»¶é‡Œè®¾ç½®äº†ï¼Œä½†æˆ‘è¿™é‡Œä½¿ç”¨çš„æ˜¯æ—§ç‰ˆæœ¬çš„next5.1.4ï¼Œæ‰€ä»¥éœ€è¦æ·±å…¥æºç è¿›è¡Œä¿®æ”¹ï¼Œå¯ä»¥å‚è€ƒä¸‹é¢çš„æ–¹æ¡ˆã€‚ç¼–è¾‘ blog/themes/next/layout/_macro/post.swig ç„¶åŽåšä»¥ä¸‹ä¿®æ”¹ï¼šæ‰¾åˆ°ä»¥ä¸‹ä»£ç å—ã€‚123456789101112131415161718192021&#123;% if not is_index and (post.prev or post.next) %&#125; &lt;div class="post-nav"&gt; &lt;div class="post-nav-next post-nav-item"&gt; &#123;% if post.next %&#125; &lt;a href="&#123;&#123; url_for(post.next.path) &#125;&#125;" rel="next" title="&#123;&#123; post.next.title &#125;&#125;"&gt; &lt;i class="fa fa-chevron-left"&gt;&lt;/i&gt; &#123;&#123; post.next.title &#125;&#125; &lt;/a&gt; &#123;% endif %&#125; &lt;/div&gt; &lt;span class="post-nav-divider"&gt;&lt;/span&gt; &lt;div class="post-nav-prev post-nav-item"&gt; &#123;% if post.prev %&#125; &lt;a href="&#123;&#123; url_for(post.prev.path) &#125;&#125;" rel="prev" title="&#123;&#123; post.prev.title &#125;&#125;"&gt; &#123;&#123; post.prev.title &#125;&#125; &lt;i class="fa fa-chevron-right"&gt;&lt;/i&gt; &lt;/a&gt; &#123;% endif %&#125; &lt;/div&gt; &lt;/div&gt;&#123;% endif %&#125;å°†ä»¥ä¸Šä»£ç ä¿®æ”¹æˆä»¥ä¸‹ä»£ç ï¼š123456789101112131415161718192021&#123;% if not is_index and (post.prev or post.next) %&#125; &lt;div class="post-nav"&gt; &lt;div class="post-nav-next post-nav-item"&gt; &#123;% if post.prev %&#125; &lt;a href="&#123;&#123; url_for(post.prev.path) &#125;&#125;" rel="prev" title="&#123;&#123; post.prev.title &#125;&#125;"&gt; &lt;i class="fa fa-chevron-left"&gt;&lt;/i&gt; &#123;&#123; post.prev.title &#125;&#125; &lt;/a&gt; &#123;% endif %&#125; &lt;/div&gt; &lt;span class="post-nav-divider"&gt;&lt;/span&gt; &lt;div class="post-nav-prev post-nav-item"&gt; &#123;% if post.next %&#125; &lt;a href="&#123;&#123; url_for(post.next.path) &#125;&#125;" rel="next" title="&#123;&#123; post.next.title &#125;&#125;"&gt; &#123;&#123; post.next.title &#125;&#125; &lt;i class="fa fa-chevron-right"&gt;&lt;/i&gt; &lt;/a&gt; &#123;% endif %&#125; &lt;/div&gt; &lt;/div&gt;&#123;% endif %&#125;Â¶23. æ·»åŠ é¡µé¢åŠ è½½æ•ˆæžœæ‰“å¼€ myblog/themes/next/_config.ymlä¸»é¢˜é…ç½®æ–‡ä»¶ï¼Œæœç´¢å…³é”®å­— pace_themeæ‰¾åˆ°å¦‚ä¸‹ä»£ç ä½ç½®ï¼Œå°† paceè®¾ç½®ä¸º trueï¼Œpace_themeå¯ä»¥æ ¹æ®åˆ—å‡ºäº†çš„æ ·å¼è¿›è¡Œé€‰æ‹©ï¼š12345678910111213141516171819# Progress bar in the top during page loading.pace: true# Themes list:#pace-theme-big-counter#pace-theme-bounce#pace-theme-barber-shop#pace-theme-center-atom#pace-theme-center-circle#pace-theme-center-radar#pace-theme-center-simple#pace-theme-corner-indicator#pace-theme-fill-left#pace-theme-flash#pace-theme-loading-bar#pace-theme-mac-osx#pace-theme-minimal# For example# pace_theme: pace-theme-center-simplepace_theme: pace-theme-minimalæ•ˆæžœå¦‚ä¸‹ï¼šÂ¶24. å›¾ç‰‡æ‡’åŠ è½½æ‡’åŠ è½½ï¼Œå³åœ¨éœ€è¦çš„æ—¶å€™æ‰åŠ è½½å›¾ç‰‡ï¼Œè€Œä¸æ˜¯ä¸€æ¬¡æ€§åŠ è½½å®Œæ•´ä¸ªé¡µé¢çš„å›¾ç‰‡,ä½¿ç”¨lazyloadæ’ä»¶å®žçŽ°æ‡’åŠ è½½å¯ä»¥æœ‰æ•ˆæé«˜åšå®¢çš„è®¿é—®é€Ÿåº¦ã€‚åœ¨Hexoåšå®¢ç›®å½•ä¸‹ï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š1$ npm install hexo-lazyload-image --saveç¼–è¾‘Hexoä¸»é…ç½®æ–‡ä»¶ myblog/_config.yml,æ·»åŠ å¦‚ä¸‹é…ç½®ï¼š1234lazyload: enable: true onlypost: false #loadingImg: ../images/loading-post.gifå‚æ•°ï¼šenableï¼šæ˜¯å¦å¼€å¯å›¾ç‰‡åšæ‡’åŠ è½½åŠŸèƒ½onlypostï¼šæ˜¯å¦ä»…æ–‡ç« ä¸­çš„å›¾ç‰‡åšæ‡’åŠ è½½ï¼Œå¦‚æžœä¸º falseï¼Œåˆ™ä¸»é¢˜ä¸­çš„å…¶ä»–å›¾ç‰‡ï¼Œä¹Ÿä¼šåšæ‡’åŠ è½½ï¼Œå¦‚å¤´åƒï¼Œlogo ç­‰ä»»ä½•å›¾ç‰‡ã€‚loadingImgï¼šå›¾ç‰‡æœªåŠ è½½æ—¶çš„ä»£æ›¿å›¾ï¼Œä¸å¡«å†™ä½¿ç”¨é»˜è®¤åŠ è½½å›¾ç‰‡ï¼Œå¦‚æžœéœ€è¦è‡ªå®šä¹‰ï¼Œæ·»å¡«å…¥ loading å›¾ç‰‡åœ°å€ï¼Œå¦‚æžœæ˜¯æœ¬åœ°å›¾ç‰‡ï¼Œä¸è¦å¿˜è®°æŠŠå›¾ç‰‡æ·»åŠ åˆ°ä½ çš„ä¸»é¢˜ç›®å½•ä¸‹ã€‚ Next ä¸»é¢˜éœ€å°†å›¾ç‰‡æ”¾åˆ° themes/next/source/images ç›®å½•ä¸‹ï¼Œç„¶åŽå¼•ç”¨æ—¶ï¼šloadingImg: ../images/xxx.gifæ•ˆæžœå¦‚ä¸‹ï¼šÂ¶25. å¼€å¯æ‰“èµåŠŸèƒ½é¦–å…ˆè¦å°†æ”¯ä»˜å®å’Œå¾®ä¿¡çš„æ”¶æ¬¾ç å›¾ç‰‡æ”¾åˆ° myblog/themes/next/source/imagesç›®å½•é‡Œã€‚æ‰“å¼€ myblog/themes/next/_config.ymlä¸»é¢˜é…ç½®æ–‡ä»¶ï¼Œæœç´¢å…³é”®å­— rewardæ‰¾åˆ°ä¸‹å›¾ä½ç½®ï¼šæ ¹æ®è‡ªèº«æƒ…å†µè¿›è¡Œä¿®æ”¹æˆ–è€…æ·»åŠ ï¼Œæ³¨æ„ï¼šä¸€å®šåŽ»æŽ‰å…ƒç´ å‰é¢çš„ #æ‰èƒ½ç”Ÿæ•ˆã€‚æˆ‘çš„å¦‚ä¸‹ï¼š12345# Rewardreward_comment: å¦‚æžœä½ è§‰å¾—æˆ‘çš„æ–‡ç« å¯¹ä½ æœ‰å¸®åŠ©ï¼Œä½ å¯ä»¥æ‰“èµæˆ‘å“¦~wechatpay: /images/wechatpay.pngalipay: /images/alipay.jpg#bitcoin: /images/bitcoin.pngå®ŒæˆåŽé‡æ–°ç¼–è¯‘å¹¶è¿è¡Œï¼Œæµè§ˆå™¨è®¿é—®åšå®¢æ—¶ï¼Œä½ ä¼šå‘çŽ°æ¯ç¯‡æ–‡ç« åº•éƒ¨å°±ä¼šæœ‰æ‰“èµçš„å°å›¾æ ‡äº†ã€‚Â¶26. æ–‡ç« åˆ†äº«åŠŸèƒ½è¿™é‡Œæˆ‘æä¾›äº†ä¸‰ç§æ–¹æ¡ˆï¼ŒæŽ¨èä¸‹æ–‡è¯´çš„ç¬¬äºŒç§æ–¹æ¡ˆã€‚Â¶æ–¹æ¡ˆ1 jiathisæ‰“å¼€ myblog/themes/next/_config.ymlä¸»é¢˜é…ç½®æ–‡ä»¶ï¼Œæœç´¢å…³é”®å­— jiathisï¼Œæ‰¾åˆ°å¦‚ä¸‹ä»£ç ã€‚123#jiathis: ##uid: Get this uid from http://www.jiathis.com/#add_this_id:åŽ»æŽ‰ #jiathis:å‰çš„ #ï¼Œå¹¶åœ¨å…¶åŽæ·»åŠ  trueç»“æžœå¦‚ä¸‹ï¼š123jiathis: true ##uid: Get this uid from http://www.jiathis.com/#add_this_id:ä¸çŸ¥é“ä¸ºä»€ä¹ˆæœ‰bugï¼Œæ— æ³•åŠ è½½å‡ºå›¾æ ‡ï¼Œä¹Ÿä¸èƒ½ç‚¹å‡»ã€‚äºŽæ˜¯æ¢å¤åŽŸæ ·åŽï¼Œæ”¹ç”¨ç¬¬äºŒç§æ–¹æ¡ˆã€‚Â¶æ–¹æ¡ˆ2 needmoreshare2æ‰“å¼€ myblog/themes/next/_config.ymlä¸»é¢˜é…ç½®æ–‡ä»¶ï¼Œæœç´¢å…³é”®å­— needmoreshare2ï¼Œæ‰¾åˆ°å¦‚ä¸‹ä»£ç å¹¶åšä»¥ä¸‹ä¿®æ”¹ã€‚12345678910111213141516needmoreshare2: enable: true postbottom: enable: true options: iconStyle: box boxForm: horizontal position: bottomCenter networks: Weibo,Wechat,Douban,QQZone,Twitter,Facebook float: enable: true options: iconStyle: box boxForm: horizontal position: middleRight networks: Weibo,Wechat,Douban,QQZone,Twitter,Facebookä¸è¿‡æˆ‘å‘çŽ°next 5.1.4ç‰ˆæœ¬ä¸­å¾®ä¿¡åŠ è½½ä¸å‡ºäºŒç»´ç ,åº”è¯¥æ˜¯å°è£…å¥½çš„å¾®ä¿¡åˆ†äº«é“¾æŽ¥å¤±æ•ˆäº†ã€‚æˆ‘æ˜¯é€šè¿‡è€ç‰ˆæœ¬çš„ä»“åº“https://github.com/iissnan/hexo-theme-nextå®‰è£…çš„ï¼Œæ‰€ä»¥æœ‰è¿™ä¸ªé—®é¢˜ï¼Œè€Œæ–°ç‰ˆæœ¬çš„nextæ˜¯æ²¡æœ‰è¿™ä¸ªé—®é¢˜çš„ã€‚æ–°ç‰ˆæœ¬ä»“åº“å·²ç»æ¬è¿åˆ°äº†https://github.com/theme-next ã€‚è™½ç„¶æˆ‘å®‰è£…çš„æ˜¯è€ç‰ˆæœ¬ï¼Œä¸è¿‡è¿™é‡Œæˆ‘ä¹Ÿæä¾›äº†è§£å†³åŠžæ³•ã€‚ç«™ç‚¹æ ¹ç›®å½•ä¸‹æ‰“å¼€git bashï¼Œè¾“å…¥ä»¥ä¸‹å‘½ä»¤ï¼š12$ rm -rf themes/next/source/lib/needsharebutton$ git clone https://github.com/theme-next/theme-next-needmoreshare2 themes/next/source/lib/needsharebuttonå®ŒæˆåŽé‡æ–°ç¼–è¯‘å¹¶è¿è¡Œï¼Œä½ ä¼šå‘çŽ°åšå®¢å·²ç»å‡ºçŽ°åˆ†äº«æœåŠ¡å›¾æ ‡äº†ï¼Œå¹¶ä¸”ç‚¹å‡»å¾®ä¿¡åˆ†äº«å›¾æ ‡ä¹Ÿå¯ä»¥åŠ è½½å‡ºåˆ†äº«äºŒç»´ç äº†ã€‚Â¶æ–¹æ¡ˆ3 baidushareæ‰“å¼€ myblog/themes/next/_config.ymlä¸»é¢˜é…ç½®æ–‡ä»¶ï¼Œæœç´¢å…³é”®å­— baidushareï¼Œæ‰¾åˆ°å¦‚ä¸‹ä»£ç å¹¶åšä¿®æ”¹ã€‚ä¿®æ”¹åŽå¦‚ä¸‹ï¼š12345#baidushare:## type: buttonbaidushare: type: button baidushare: trueå®ŒæˆåŽé‡æ–°ç¼–è¯‘å¹¶è¿è¡Œï¼Œä½ ä¼šå‘çŽ°åšå®¢å·²ç»å‡ºçŽ°åˆ†äº«æœåŠ¡å›¾æ ‡äº†ã€‚Â¶27. ä¼˜åŒ–æ·±è‰²ä»£ç é«˜äº®èƒŒæ™¯åœ¨ä¸»é¢˜é…ç½®æ–‡ä»¶ä¿®æ”¹ä»£ç é«˜äº®èƒŒæ™¯ä¸ºæ·±è‰²èƒŒæ™¯åŽï¼Œå½“åœ¨åšå®¢æ–‡ç« ä¸Šé€‰æ‹©ä»£ç æ—¶ï¼Œé€‰æ‹©åˆ°çš„é¢œè‰²ä¹Ÿä¸ºæ·±è‰²ï¼Œè™½ç„¶å’ŒèƒŒæ™¯è‰²è¿˜æ˜¯æœ‰ç‚¹ç‚¹åŒºåˆ«ï¼Œä½†æ˜¯ä¸å¥½åŒºåˆ†ã€‚æ‰€ä»¥ç»è¿‡ä¸€ç•ªç ”ç©¶ï¼Œæ‰æœ‰äº†ä»¥ä¸‹ä¼˜åŒ–æ•™ç¨‹ã€‚åœ¨ myblog/themes/next/source/css/_custom/custom.stylä¸­æ·»åŠ ä»¥ä¸‹æ ·å¼ä»£ç ï¼š12345678910111213141516171819//page code background-color.code ::selection &#123; background: #2593a6; color: #fff;&#125;.code +mobile() &#123; background: #2593a6; color: #fff;&#125;//gitalk code background-color .gt-container .gt-comment-content .highlight pre, .markdown-body pre&#123; background-color: #2d2d2d;&#125;.gt-container .gt-comment-content .highlight ::selection &#123; background: #2593a6; color: #fff;&#125;ä»¥ä¸Šä»£ç ä¼˜åŒ–äº†æ‰€ä»¥é«˜äº®ä»£ç åŒºåŸŸï¼ŒåŒ…æ‹¬gitalkè¯„è®ºåŒºçš„é«˜äº®ä»£ç ã€‚ è¿™äº›æ ·å¼ä»£ç æ˜¯é€šè¿‡æµè§ˆå™¨è°ƒè¯•è€Œå¾—ï¼Œå¦‚æœ‰å…¶å®ƒæ ·å¼çš„éœ€æ±‚ï¼Œå¯å‚è€ƒæœ¬ç¤ºä¾‹åœ¨æµè§ˆå™¨ä¸­è°ƒè¯•ã€‚Â¶28. ä¼˜åŒ–æ–‡ç« åº•éƒ¨å¸¦æ ‡ç­¾æ‰“å¼€ myblog/themes/next/layout/_macro/post.swigæ–‡ä»¶,æœç´¢ rel=&quot;tag&quot;&gt;#,å°† # æ¢æˆ &lt;i class=&quot;fa fa-tag&quot;&gt;ï¼Œå¦‚ä¸‹ï¼š12345&lt;div class="post-tags"&gt; &#123;% for tag in post.tags %&#125; &lt;a href="&#123;&#123; url_for(tag.path) &#125;&#125;" rel="tag"&gt;&lt;i class="fa fa-tag"&gt;&lt;/i&gt; &#123;&#123; tag.name &#125;&#125;&lt;/a&gt; &#123;% endfor %&#125;&lt;/div&gt;Â¶29. æ–‡ç« æœ«å°¾æ·»åŠ â€œæœ¬æ–‡ç»“æŸâ€æ ‡è®°åœ¨è·¯å¾„ myblog/themes/next/layout/_macroä¸­æ–°å»º passage-end-tag.swigæ–‡ä»¶,å¹¶å¤åˆ¶ä»¥ä¸‹ä»£ç åˆ° passage-end-tag.swig ä¸­ï¼š1234567891011&lt;div&gt; &#123;% if not is_index %&#125; &lt;br /&gt; &lt;br /&gt; &lt;div style="text-align:center;color: #ccc;font-size:14px;"&gt;----------- æœ¬æ–‡ç»“æŸ -----------&lt;/div&gt; &lt;br /&gt; &lt;br /&gt; &lt;br /&gt; &lt;br /&gt; &#123;% endif %&#125;&lt;/div&gt;æ‰“å¼€myblog/themes/next/layout/_macro/ä¸‹çš„post.swigæ–‡ä»¶,æ‰¾åˆ°å¦‚ä¸‹ä»£ç å—ï¼š123&#123;#####################&#125;&#123;### END POST BODY ###&#125;&#123;#####################&#125;åœ¨ä»¥ä¸Šä»£ç å—çš„ä¸Šé¢å¦èµ·ä¸€è¡Œæ·»åŠ å¦‚ä¸‹ä»£ç ï¼š12345&lt;div&gt; &#123;% if not is_index %&#125; &#123;% include 'passage-end-tag.swig' %&#125; &#123;% endif %&#125; &lt;/div&gt;ç„¶åŽæ‰“å¼€ä¸»é¢˜é…ç½®æ–‡ä»¶myblog/themes/next/_config.yml,åœ¨æœ«å°¾æ·»åŠ ï¼š123# æ–‡ç« æœ«å°¾æ·»åŠ â€œæœ¬æ–‡ç»“æŸâ€æ ‡è®°passage_end_tag:enabled: trueÂ¶30. ä¼˜åŒ–æ–‡ç« å†…é“¾æŽ¥æ–‡æœ¬æ ·å¼åœ¨ myblog/themes/next/source/css/_custom/custom.stylä¸­æ·»åŠ ä»¥ä¸‹æ ·å¼ä»£ç ï¼š1234567891011//æ–‡ç« å†…é“¾æŽ¥æ–‡æœ¬æ ·å¼.post-body p a&#123; color: #0593d3; border-bottom: none; border-bottom: 1px solid #0593d3; &amp;:hover &#123; color: #fc6423; border-bottom: none; border-bottom: 1px solid #fc6423; &#125;&#125;å¯ä»¥æ ¹æ®è‡ªå·±çš„å–œå¥½ä½¿ç”¨æµè§ˆå™¨è°ƒè¯•å¾—åˆ°ç›¸åº”çš„æ ·å¼ã€‚Â¶31. Geminiå¸ƒå±€è¿”å›žé¡¶éƒ¨æŒ‰é’®é€‚é…ç§»åŠ¨ç«¯ç”±äºŽè‡ªå·±ä¸æ‰ï¼Œä¸ºäº†è§£å†³ä»¥ä¸‹é—®é¢˜ï¼Œä¸çŸ¥èŠ±äº†å¤šå°‘æ—¶é—´å’Œç²¾åŠ›ã€‚åœ¨è¿™ä¸ªæŠ˜è…¾çš„è¿‡ç¨‹ä¸­ï¼Œæœ‰ä¸Šè¿‡ç™¾åº¦å’Œè°·æ­Œæœäº†å¥½å¤šçš„æ•™ç¨‹ä½†å´æ— åŠŸè€Œè¿”ï¼›åŽæ¥åˆå°è¯•é€šè¿‡æµè§ˆå™¨è°ƒè¯•æ¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œä¹ŸåŒæ ·ä»¥å¤±è´¥è€Œå‘Šç»ˆã€‚åœ¨å‡ è¿‘ç»æœ›æ—¶ï¼Œç½‘å‹åˆ†äº«äº†ä¸€ç¯‡åšå®¢æ–‡ç« ã€Šåœ¨ç§»åŠ¨è®¾å¤‡ä¸‹å¯ç”¨NexTä¸»é¢˜çš„ç›®å½•é¡µé¢å’Œå›žåˆ°é¡¶éƒ¨æŒ‰é’®ã€‹ï¼Œç»å‚è€ƒå¹¶åšä¿®æ”¹åŽæ‰æœ‰äº†ä»¥ä¸‹ç®€é™‹çš„æ•™ç¨‹ã€‚æ•™ç¨‹å¼€å§‹ï¼šç¼–è¾‘ themes/next/source/css/_common/componentsç›®å½•ä¸‹çš„ back-to-top.stylå’Œ back-to-top-sidebar.stylæ–‡ä»¶ã€‚ç”¨ /* */æ³¨é‡ŠæŽ‰ä»¥ä¸‹ä»£ç ã€‚ï¼ˆæ³¨æ„ï¼šä¸¤ä¸ªæ–‡ä»¶éƒ½è¦æ³¨é‡ŠæŽ‰ï¼‰12345678+tablet() &#123; fixbutton() if hexo-config('sidebar.onmobile'); hide() if not hexo-config('sidebar.onmobile');&#125;+mobile() &#123; fixbutton() if hexo-config('sidebar.onmobile'); hide() if not hexo-config('sidebar.onmobile');&#125;æ³¨é‡ŠåŽå¦‚ä¸‹ï¼š12345678910/* +tablet() &#123; fixbutton() if hexo-config('sidebar.onmobile'); hide() if not hexo-config('sidebar.onmobile'); &#125; +mobile() &#123; fixbutton() if hexo-config('sidebar.onmobile'); hide() if not hexo-config('sidebar.onmobile'); &#125; */Â¶32. ç¦ç”¨ç‰¹å®šæ–‡ç« ä¾§æ ç›®å½•å¯¹äºŽMuseå¸ƒå±€ï¼Œå¦‚æžœé¡µé¢å«æœ‰å¤šçº§æ ‡é¢˜ï¼Œé‚£ä¹ˆé»˜è®¤æ˜¯ä¼šè‡ªåŠ¨å±•å¼€ä¾§æ æŠ½å±‰ç›®å½•çš„ï¼Œä½†å®žé™…çš„ä½¿ç”¨ä¸­ï¼Œæˆ‘ä»¬ä¸å¸Œæœ›æ¯”å¦‚å…³äºŽé¡µé¢ï¼Œå‹æƒ…é¡µé¢ç­‰ç­‰è‡ªåŠ¨å±•å¼€ç›®å½•ï¼Œé‚£ä¹ˆå°±éœ€è¦å¯¹nextåšä¸€å®šçš„ä¿®æ”¹æ¥å®žçŽ°è¿™ä¸ªéœ€æ±‚ã€‚æ‰¾åˆ°äº† themes/next/layout/_marcro/sidebar.swigä¸­æ‰¾åˆ°ä¸‹ä¸€åˆ—ä¿¡æ¯ã€‚1&#123;% set display_toc = is_post and theme.toc.enable or is_page and theme.toc.enable %&#125;å°†å…¶ä¿®æ”¹ä¸ºï¼š1&#123;% set display_toc = is_post and theme.toc.enable and !page.no_toc or is_page and theme.toc.enable and !page.no_toc %&#125;å¦‚æžœéœ€è¦æŒ‡å®šæŸç¯‡æ–‡ç« ç¦ç”¨ä¾§æ ç›®å½•ï¼Œåªéœ€è¦åœ¨è¯¥æ–‡ç« Front-Matteréƒ¨åˆ†æ·»åŠ ä¸€ä¸ª no_toc: trueå³å¯ã€‚å¦‚ä¸‹ï¼š123456---title: å‹æƒ…é“¾æŽ¥date: 2020-02-18 22:32:49no_toc: truecomments: true---æ–¹æ¡ˆæ¥æºï¼šhttp://master.hellosenlin.netlify.com/posts/24546/Â¶33. æ–‡ç« å¼•ç”¨éŸ³ä¹å’Œè§†é¢‘Â¶1) htmlåŽŸç”Ÿæ–¹å¼Â¶(1) éŸ³ä¹é¢æ¿åœ¨markdownæ–‡ç« é‡Œä½¿ç”¨ HTML çš„æ ‡ç­¾å¼•å…¥ï¼Œå†™æ³•å¦‚ä¸‹1&lt;audio src="https://ä»€ä¹ˆä»€ä¹ˆä»€ä¹ˆ.mp3" style="max-height :100%; max-width: 100%; display: block; margin-left: auto; margin-right: auto;" controls="controls" loop="loop" preload="meta"&gt;Your browser does not support the audio tag.&lt;/audio&gt;Â¶(2) è§†é¢‘é¢æ¿åœ¨markdownæ–‡ç« é‡Œä½¿ç”¨ HTML çš„æ ‡ç­¾å¼•å…¥ï¼Œå†™æ³•å¦‚ä¸‹1&lt;video poster="https://å°é¢å›¾.jpg" src="https://ä»€ä¹ˆä»€ä¹ˆä»€ä¹ˆ.mp4" style="max-height :100%; max-width: 100%; display: block; margin-left: auto; margin-right: auto;" controls="controls" loop="loop" preload="meta"&gt;Your browser does not support the video tag.&lt;/video&gt;Â¶2) ç¬¬ä¸‰æ–¹æ’ä»¶æ–¹å¼Â¶(1) éŸ³ä¹é¢æ¿æ’ä»¶æ­¤å‰æœ‰å°è¯•è¿‡ä½¿ç”¨ç½‘æ˜“äº‘éŸ³ä¹å¤–é“¾çš„æ–¹å¼ç»™åšå®¢åŠ å…¥éŸ³ä¹é¢æ¿ï¼Œä½†ä½¿ç”¨çš„è¿‡ç¨‹ä¸­å‘çŽ°æœ‰ä¸€äº›éŸ³ä¹å› ä¸ºç‰ˆæƒåŽŸå› æ’­æ”¾ä¸äº†ï¼Œè¿˜æœ‰å°±æ˜¯ä¸å®Œå…¨æ”¯æŒ httpsï¼Œå¯¼è‡´å°ç»¿é”ä¸è§äº†ã€‚è¦è§£å†³è¿™äº›ç¼ºç‚¹ï¼Œå°±éœ€è¦å¦è¾Ÿè¹Šå¾„è½¬è€Œå®‰è£…ç¬¬ä¸‰æ–¹éŸ³ä¹é¢æ¿æ’ä»¶äº†ï¼Œhexo-tag-aplayeræ˜¯ä¸€ä¸ªéŸ³ä¹é¢æ¿æ’ä»¶ï¼ŒåŠŸèƒ½å¾ˆå¼ºå¤§ï¼Œç›¸æ¯”äºŽåŽŸç”Ÿhtmlçš„è§†é¢‘é¢æ¿è€Œè¨€ï¼Œå¯çŽ©æ€§æ›´ä¸°å¯Œï¼Œæ¯”å¦‚å¯ä»¥æœ‰æ­Œè¯ï¼Œæ­Œå•åˆ—è¡¨ç­‰ç­‰ã€‚åºŸè¯ä¸å¤šè¯´ï¼Œç›´æŽ¥ä¸Šæ•™ç¨‹ã€‚å®‰è£…éŸ³ä¹é¢æ¿æ’ä»¶1npm install hexo-tag-aplayer --saveå•é¦–æ­Œæ›²çš„å½¢å¼é€šè¿‡æ¨¡æ¿è¯­æ³•åœ¨markdownæ–‡ç« é‡Œå¼•å…¥ï¼Œå†™æ³•å¦‚ä¸‹ï¼š1&#123;% aplayer "æ­Œæ›²å" "æ­Œæ‰‹å" "https://ä»€ä¹ˆä»€ä¹ˆä»€ä¹ˆ.mp3" "https://å°é¢å›¾.jpg" "lrc:https://æ­Œè¯.lrc" %&#125;æ­Œå•çš„å½¢å¼1234567891011121314151617181920212223&#123;% aplayerlist %&#125;&#123; "autoplay": false, "showlrc": 3, "mutex": true, "music": [ &#123; "title": "æ­Œæ›²å", "author": "æ­Œæ‰‹å", "url": "https://ä»€ä¹ˆä»€ä¹ˆä»€ä¹ˆ.mp3", "pic": "https://å°é¢å›¾.jpg", "lrc": "https://æ­Œè¯.lrc" &#125;, &#123; "title": "æ­Œæ›²å", "author": "æ­Œæ‰‹å", "url": "https://ä»€ä¹ˆä»€ä¹ˆä»€ä¹ˆ.mp3", "pic": "https://å°é¢å›¾.jpg", "lrc": "https://æ­Œè¯.lrc" &#125; ]&#125;&#123;% endaplayerlist %&#125;è¯¦ç»†å‚æ•°è§ README å’Œè¿™æ’ä»¶çš„â€œæ¯äº²â€ Aplayer çš„å®˜æ–¹æ–‡æ¡£ã€‚å…³äºŽ lrc æ­Œè¯ï¼Œå¯ä»¥å‚è€ƒçŸ¥ä¹Žçš„è¿™ç¯‡æ–‡ç« https://www.zhihu.com/question/27638171ä¸‹è½½ç½‘æ˜“äº‘éŸ³ä¹çš„æ­Œè¯ï¼Œå¦‚æžœé‚£æ­Œè¯æœ‰é”™è¯¯ï¼ˆæ¯”å¦‚å­—æ¯å¤§å°å†™å’Œæ ‡ç‚¹ç¬¦å·ä¹±åŠ ï¼‰æˆ–è€…æ—¶é—´å®Œå…¨å¯¹ä¸ä¸Šï¼Œä½ å¯ä»¥ä¸€å¥ä¸€å¥è‡ªå·±æŸ¥çœ‹ä¿®æ”¹â€¦â€¦Â¶(2) è§†é¢‘é¢æ¿hexo-tag-dplayeræ’ä»¶åŠŸèƒ½ç›¸æ¯”äºŽåŽŸç”Ÿhtmlè§†é¢‘æ ‡ç­¾ä¼šæ›´åŠ å¼ºå¤§ï¼Œæ¯”å¦‚å¯ä»¥ä½¿ç”¨å¼¹å¹•ï¼Œéžå¸¸å»ºè®®é£Ÿç”¨ã€‚å®‰è£…æ’ä»¶1npm install hexo-tag-dplayer --saveé€šè¿‡æ¨¡æ¿è¯­æ³•åœ¨markdownæ–‡ç« é‡Œå¼•å…¥ï¼Œå†™æ³•å¦‚ä¸‹ï¼š1&#123;% dplayer "url=https://ä»€ä¹ˆä»€ä¹ˆä»€ä¹ˆ.mp4" "pic=https://å°é¢å›¾.jpg" "api=https://api.prprpr.me/dplayer/" "id=" "loop=false" %&#125;å¦‚æžœè¦ä½¿ç”¨å¼¹å¹•ï¼Œå¿…é¡»æœ‰ apiå’Œ idä¸¤é¡¹ï¼Œå¹¶ä¸”è‹¥ä½¿ç”¨çš„æ˜¯å®˜æ–¹çš„ api åœ°å€ï¼ˆå³ä¸Šé¢çš„ï¼‰ï¼Œid çš„å€¼ä¸èƒ½ä¸Žè¿™ä¸ªåˆ—è¡¨çš„å€¼ä¸€æ ·ã€‚id çš„å€¼è‡ªå·±éšä¾¿å–ï¼Œä½†å»ºè®®ä½¿ç”¨è§†é¢‘çš„å“ˆå¸Œå€¼ï¼Œå¯å‚è€ƒhttp://tool.oschina.net/encrypt?type=2ã€‚ç›®å‰å‘çŽ°å®˜æ–¹apiä¸èƒ½ä½¿ç”¨ï¼Œå¯ä»¥å¯»æ±‚å…¶ä»–å…è´¹çš„å¼¹å¹•æœåŠ¡å™¨ã€‚ä¹Ÿå¯è‡ªè¡Œæ­å»ºï¼Œå¯å‚è€ƒ:ðŸ“š https://alone88.cn/archives/484.htmlðŸ“š https://dandoc.u2sb.top/å…³äºŽè¿™ä¸ªæ’ä»¶çš„æ›´å¤šå†…å®¹å¯ä»¥åŽ» README å’Œè¿™æ’ä»¶çš„â€œæ¯äº²â€ Dplayer çš„å®˜æ–¹æ–‡æ¡£çœ‹çœ‹ã€‚Â¶3) éŸ³ä¹é¢æ¿ç»¼åˆæ¡ˆä¾‹æ–°å»ºä¸€ä¸ªhexo markdownæ–‡ç« æ–‡ä»¶1hexo n musicåœ¨æ–°å»ºçš„music.mdæ–‡ä»¶é‡ŒåŠ å…¥å¦‚ä¸‹å†…å®¹ï¼š123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151---title: å…³äºŽæˆ‘date: 2018-10-05 22:32:49comments: true---&lt;!-- more --&gt;&lt;style&gt; .description &#123; margin: 0 auto; text-align: center; &#125; .logoimg&#123; display: block; margin: 0 auto; padding: 2px; max-width: 96px; height: auto; border: 2px solid #333; border-radius: 50%; transition: 2s all; &#125; .logoimg:hover&#123; transform: rotate(360deg); &#125; .aboutbox &#123; width: 90%; height: 90%; margin: 0 auto; margin-top: 30px; box-shadow: 0 0 10px 0 rgba(0,0,0,.5); &#125; .musicbox &#123; width: 90%; margin: 60px auto; padding: 10px; &#125; .days&#123; margin: 0 auto; text-align: center; font-weight: bold; margin-top: 30px; margin-bottom: 35px; &#125;&lt;/style&gt;&lt;div class="aboutbox"&gt;&lt;div class="description"&gt; &lt;br/&gt; &lt;a href="/"&gt;&lt;img class="logoimg nofancybox" itemprop="image" src="/images/logo.jpg"&gt;&lt;/a&gt; &lt;br /&gt; æœ¬ç«™äºŽ2018å¹´9æœˆ22æ—¥åˆ›å»ºï¼Œç«™ç‚¹ä¸»è¦ç”¨äºŽä¸ªäººå­¦ä¹ ä»¥åŠç”Ÿæ´»è®°å½•ã€‚ &lt;br /&gt; åšä¸»ï¼šqcmoke &lt;br /&gt; è”ç³»æ–¹å¼ï¼šqcmoke@gmail.com&lt;/div&gt;&lt;div class="musicbox"&gt; &#123;% aplayerlist %&#125; &#123; "autoplay": false, "showlrc": 3, "mutex": true, "music": [ &#123; "title": "çŽ‹ç‰Œå†¤å®¶", "author": "æŽè£æµ©", "url": "https://source.qcmoke.cn/music/wangpaiyuanjia.mp3", "pic": "https://source.qcmoke.cn/music/wangpaiyuanjia.jpg", "lrc": "https://source.qcmoke.cn/music/wangpaiyuanjia.lrc" &#125;, &#123; "title": "if you", "author": "Bigbang", "url": "https://source.qcmoke.cn/music/ifyou.mp3", "pic": "https://source.qcmoke.cn/music/ifyou.jpg", "lrc": "https://source.qcmoke.cn/music/ifyou.lrc" &#125;, &#123; "title": "åŽä¼šæ— æœŸ", "author": "G.E.M. é‚“ç´«æ£‹", "url": "https://source.qcmoke.cn/music/houhuiwuqi.mp3", "pic": "https://source.qcmoke.cn/music/houhuiwuqi.jpg", "lrc": "https://source.qcmoke.cn/music/houhuiwuqi.lrc" &#125;, &#123; "title": "ç©ºç©ºå¦‚ä¹Ÿ", "author": "ä»»ç„¶", "url": "https://source.qcmoke.cn/music/kongkongruye.mp3", "pic": "https://source.qcmoke.cn/music/kongkongruye.jpg", "lrc": "https://source.qcmoke.cn/music/kongkongruye.lrc" &#125;, &#123; "title": "æ—¥è½å¤§é“", "author": "æ¢åš", "url": "https://source.qcmoke.cn/music/riluodadao.mp3", "pic": "https://source.qcmoke.cn/music/riluodadao.jpg", "lrc": "https://source.qcmoke.cn/music/riluodadao.lrc" &#125;, &#123; "title": "çº¢æ˜­æ„¿", "author": "éŸ³é˜™è¯—å¬", "url": "https://source.qcmoke.cn/music/hongzhaoyuan.mp3", "pic": "https://source.qcmoke.cn/music/hongzhaoyuan.jpg", "lrc": "https://source.qcmoke.cn/music/hongzhaoyuan.lrc" &#125;, &#123; "title": "ç¬”è®°", "author": "å‘¨ç¬”ç•…", "url": "https://source.qcmoke.cn/music/biji.mp3", "pic": "https://source.qcmoke.cn/music/biji.jpg", "lrc": "https://source.qcmoke.cn/music/biji.lrc" &#125; ] &#125; &#123;% endaplayerlist %&#125;&lt;/div&gt;&lt;script type="text/javascript" src="//rf.revolvermaps.com/0/0/8.js?i=5xixmgxe8az&amp;amp;m=0&amp;amp;c=ff0000&amp;amp;cr1=ffffff&amp;amp;f=arial&amp;amp;l=33" async="async"&gt;&lt;/script&gt;&lt;div id="days" class="days"&gt;&lt;/div&gt;&lt;script&gt; function show_date_time()&#123; window.setTimeout("show_date_time()", 1000); BirthDay=new Date("09/22/2018 15:13:14"); today=new Date(); timeold=(today.getTime()-BirthDay.getTime()); sectimeold=timeold/1000 secondsold=Math.floor(sectimeold); msPerDay=24*60*60*1000 e_daysold=timeold/msPerDay daysold=Math.floor(e_daysold); e_hrsold=(e_daysold-daysold)*24; hrsold=setzero(Math.floor(e_hrsold)); e_minsold=(e_hrsold-hrsold)*60; minsold=setzero(Math.floor((e_hrsold-hrsold)*60)); seconds=setzero(Math.floor((e_minsold-minsold)*60)); document.getElementById('days').innerHTML="å·²è¿è¡Œ"+daysold+"å¤©"+hrsold+"å°æ—¶"+minsold+"åˆ†"+seconds+"ç§’"; &#125; function setzero(i)&#123; if (i&lt;10) &#123;i="0" + i&#125;; return i; &#125; show_date_time();&lt;/script&gt;&lt;/div&gt;æ•ˆæžœÂ¶4) è§†é¢‘é¢æ¿ç»¼åˆæ¡ˆä¾‹æ–°å»ºä¸€ä¸ªhexo markdownæ–‡ç« æ–‡ä»¶1hexo n videoåœ¨æ–°å»ºçš„video.mdæ–‡ä»¶é‡ŒåŠ å…¥å¦‚ä¸‹å†…å®¹ï¼š12345678910---title: æˆ‘çš„è§†é¢‘é¡µé¢date: 2020-03-02 22:21:39---&lt;!-- more --&gt;&lt;video poster="http://localhost:4000/images/logo.jpg" src="https://source.qcmoke.cn/video/VID_20190503_143115.mp4" style="max-height :100%; max-width: 100%; display: block; margin-left: auto; margin-right: auto;" controls="controls" loop="loop" preload="meta"&gt;Your browser does not support the video tag.&lt;/video&gt;&#123;% dplayer "url=https://source.qcmoke.cn/video/VID_20190503_143115.mp4" "http://localhost:4000/images/logo.jpg" "api=https://api.prprpr.me/dplayer/" "id=" "loop=false" %&#125;æ•ˆæžœï¼šÂ¶34) æ·»åŠ çœ‹æ¿å¨˜ç›®çš„æ˜¯ç»™åšå®¢é¡µé¢æ·»åŠ å°èŒå® ï¼Œç»™åšå®¢æ·»åŠ ä¸€ç‚¹è¶£å‘³æ€§ï¼Œä¸‹é¢å°±ä»‹ç»ä½¿ç”¨live2dæ’ä»¶æ¥å®žçŽ°è¿™ä¸ªåŠŸèƒ½ã€‚ï¼ˆ1ï¼‰ä¸‹è½½å¹¶å®‰è£…æ’ä»¶1npm install --save hexo-helper-live2dï¼ˆ2ï¼‰ä¸‹è½½å¹¶å®‰è£…èŒå® æ¨¡åž‹1npm install æ¨¡åž‹åç§°å®˜æ–¹æä¾›äº†ä»¥ä¸‹æ¨¡åž‹åç§°ï¼šlive2d-widget-model-chitoselive2d-widget-model-epsilon2_1live2d-widget-model-gflive2d-widget-model-haru/01 (use npm install --save live2d-widget-model-haru)live2d-widget-model-haru/02 (use npm install --save live2d-widget-model-haru)live2d-widget-model-harutolive2d-widget-model-hibikilive2d-widget-model-hijikilive2d-widget-model-izumilive2d-widget-model-koharulive2d-widget-model-mikulive2d-widget-model-ni-jlive2d-widget-model-nicolive2d-widget-model-nietzschelive2d-widget-model-nipsilonlive2d-widget-model-nitolive2d-widget-model-shizukulive2d-widget-model-tororolive2d-widget-model-tsumikilive2d-widget-model-unitychanlive2d-widget-model-wankolive2d-widget-model-z16ä½ å¯ä»¥æŸ¥çœ‹demoæ¼”ç¤ºåŽå†å†³å®šåšé€‰æ‹©ã€‚ï¼ˆ3ï¼‰ç¼–è¾‘Hexoä¸»é…ç½®æ–‡ä»¶ myblog/_config.yml,æ·»åŠ å¦‚ä¸‹é…ç½®ï¼š12345678910111213141516171819202122232425## Live2D## https://github.com/EYHN/hexo-helper-live2dlive2d: enable: true # enable: false scriptFrom: local # é»˜è®¤ pluginRootPath: live2dw/ # æ’ä»¶åœ¨ç«™ç‚¹ä¸Šçš„æ ¹ç›®å½•(ç›¸å¯¹è·¯å¾„) pluginJsPath: lib/ # è„šæœ¬æ–‡ä»¶ç›¸å¯¹ä¸Žæ’ä»¶æ ¹ç›®å½•è·¯å¾„ pluginModelPath: assets/ # æ¨¡åž‹æ–‡ä»¶ç›¸å¯¹ä¸Žæ’ä»¶æ ¹ç›®å½•è·¯å¾„ # scriptFrom: jsdelivr # jsdelivr CDN # scriptFrom: unpkg # unpkg CDN # scriptFrom: https://cdn.jsdelivr.net/npm/live2d-widget@3.x/lib/L2Dwidget.min.js # ä½ çš„è‡ªå®šä¹‰ url tagMode: false # æ ‡ç­¾æ¨¡å¼, æ˜¯å¦ä»…æ›¿æ¢ live2d tagæ ‡ç­¾è€Œéžæ’å…¥åˆ°æ‰€æœ‰é¡µé¢ä¸­ debug: false # è°ƒè¯•, æ˜¯å¦åœ¨æŽ§åˆ¶å°è¾“å‡ºæ—¥å¿— model: use: live2d-widget-model-haruto # npm-module package name # use: wanko # åšå®¢æ ¹ç›®å½•/live2d_models/ ä¸‹çš„ç›®å½•å # use: ./wives/wanko # ç›¸å¯¹äºŽåšå®¢æ ¹ç›®å½•çš„è·¯å¾„ # use: https://cdn.jsdelivr.net/npm/live2d-widget-model-wanko@1.0.5/assets/wanko.model.json # ä½ çš„è‡ªå®šä¹‰ url display: # æ¨¡åž‹ä½ç½®ï¼Œæ ¹æ®ä¸åŒçš„æ¨¡åž‹è‡ªè¡Œè°ƒæ•´ position: left width: 100 height: 150 mobile: # æ˜¯å¦é€‚ç”¨äºŽç§»åŠ¨ç«¯ show: falseÂ¶ç¬¬ä¸‰æ–¹æœåŠ¡ç¯‡Â¶1. æ·»åŠ è¯„åˆ†åŠŸèƒ½æ·˜å®ä¹°ä¸œè¥¿ï¼Œä½œä¸ºæ¶ˆè´¹è€…çš„æˆ‘ä»¬ï¼Œçœ‹è¯„ä»·å¾ˆé‡è¦ã€‚çŽ°åœ¨ä½œä¸ºåšä¸»ï¼Œå†™äº†ä¸€ç¯‡æ–‡ç« ï¼Œå¾ˆæœŸå¾…è¯»è€…çš„åé¦ˆã€‚è€Œä¸Žæ·˜å®ä¸€æ ·ï¼Œç¡®è®¤æ”¶è´§åŽï¼Œç›¸æ¯”è¯„è®ºï¼Œæ›´æ„¿æ„äº”æ˜Ÿå¥½è¯„ã€‚é‚£ä¹ˆåšå®¢æ–‡ç« æ€Žä¹ˆåŠ ä¸Šå‘¢ï¼Ÿé¦–å…ˆæ‰“å¼€ä¸»é¢˜é…ç½®æ–‡ä»¶ï¼š123456# Star rating support to each article.# To get your ID visit https://widgetpack.comrating: enable: true id: 23**** color: fc6423å…ˆåŽ»https://widgetpack.comæ³¨å†Œä¸ªå¸å·ï¼Œå¡«ä¸€ä¸‹è‡ªå·±åšå®¢çš„ä¿¡æ¯ï¼ŒæŠŠå·¦ä¸Šè§’çš„ IDå€¼ï¼Œå¡«è¿›ä¸Šé¢çš„ rating.idä¸­ï¼Œcoloræ”¹æˆè‡ªå·±å–œæ¬¢çš„å³å¯ã€‚ðŸ’â€â™‚è¯´æ˜Žï¼šå¯ä»¥é…ç½®è¯„åˆ†æ–¹å¼ï¼Œä¾§æ  &gt; Rating &gt; Settingï¼Œå»ºè®®ç”¨ IP address æˆ– Device(cookie)ï¼Œå…ç™»å½•ï¼Œæ¯•ç«Ÿ Socials é‡Œé¢çš„é€‰é¡¹å‡ ä¹Žéƒ½è¢«å¢™ï¼Œä¸é€‚åˆå›½å†…ç½‘ç»œçŽ¯å¢ƒã€‚å»ºè®®åœ¨ä¾§æ  &gt; Site &gt; Setting ä¸­å‹¾é€‰ Private é€‰é¡¹ã€‚ä¸Šé¢ä¸¤æ­¥å‹¾é€‰åŽåˆ«å¿˜äº†ç‚¹å‡»é¡µé¢å³ä¸‹æ–¹çš„ SAVE SETTING ç»¿è‰²æŒ‰é’®ä¿å­˜ã€‚å¦‚æžœä½ æƒ³ç»™è¯„åˆ†çš„æ˜Ÿæ˜Ÿå‘¨å›´åŠ å†…å®¹ï¼Œå¯ä»¥ä¿®æ”¹æ–‡ä»¶ï¼šthemes/next/layout/_macro/post.swigï¼Œä¾‹å¦‚æ·»åŠ ä¸‹é¢ +ç›¸å…³çš„å†…å®¹ï¼š123456&#123;% if theme.rating.enable %&#125; &lt;div class="wp_rating"&gt;+ &lt;div style="color: rgba(0, 0, 0, 0.75); font-size:13px; letter-spacing:3px"&gt;(&gt;çœ‹å®Œè®°å¾—äº”æ˜Ÿå¥½è¯„å“¦äº²&lt;)&lt;/div&gt; &lt;div id="wpac-rating"&gt;&lt;/div&gt; &lt;/div&gt;&#123;% endif %&#125;Â¶2. ç½‘ç«™è®¿é—®ç»Ÿè®¡nextä¸»é¢˜é»˜è®¤é›†æˆäº†ä¸€äº›ç¬¬ä¸‰æ–¹è®¿é—®ç»Ÿè®¡æ’ä»¶ã€‚å…¶ä¸­æŽ¨èä½¿ç”¨ä¸è’œå­ç»Ÿè®¡æœåŠ¡æˆ–è€…leancloudç»Ÿè®¡æœåŠ¡ã€‚é€‰æ‹©ä¸€ç§å°±è¡Œã€‚ðŸ’â€â™‚ å¯¹æ¯”ï¼šä¸è’œå­ç»Ÿè®¡ï¼šæ”¯æŒâ€œæœ¬ç«™è®¿å®¢æ•°â€ã€â€œæœ¬ç«™æ€»è®¿é—®é‡â€å’Œâ€œæœ¬æ–‡æ€»é˜…è¯»é‡â€ï¼›æš‚ä¸å¼€æ”¾æ³¨å†Œï¼Œæ²¡æœ‰ç”¨æˆ· åŽå°ï¼Œä¸æ”¯æŒæ•°æ®ç»´æŠ¤ã€‚leancloudç»Ÿè®¡ï¼šåªæ”¯æŒâ€œæœ¬æ–‡æ€»é˜…è¯»é‡â€ç»Ÿè®¡ï¼›æœ‰ç”¨æˆ·åŽå°ï¼Œæ”¯æŒæ•°æ®ç»´æŠ¤ã€‚ç”±äºŽä»¥ä¸Šå¯çœ‹å‡ºå„è‡ªçš„é•¿çŸ­ï¼Œæ‰€ä»¥é…Œæƒ…é€‰æ‹©ã€‚å¦‚æžœä¸å…³å¿ƒæ•°æ®ç»´æŠ¤çš„è¯ï¼Œæˆ‘ä¸ªäººæ¯”è¾ƒæŽ¨èä½¿ç”¨ä¸è’œå­ç»Ÿè®¡ï¼Œå› ä¸ºç®€å•æ˜“ç”¨ã€‚Â¶1) ä¸è’œå­ç»Ÿè®¡å®˜ç½‘ï¼šhttp://busuanzi.ibruce.infoåªéœ€è¦æ‰“å¼€ myblog/themes/next/_config.ymlä¸»é¢˜é…ç½®æ–‡ä»¶ï¼Œæœç´¢å…³é”®å­— busuanzi_countã€‚ å°† enableçš„å€¼æ”¹ä¸º true,å¹¶å¯¹ç«™ç‚¹UVé…ç½®ã€ç«™ç‚¹PVé…ç½®ã€å•é¡µé¢PVè¿›è¡Œé…ç½®ã€‚å¦‚ä¸‹ï¼š123456789101112131415161718busuanzi_count: # count values only if the other configs are false enable: true # custom uv span for the whole site # æ•ˆæžœï¼šæœ¬ç«™è®¿å®¢æ•°12345äººæ¬¡ site_uv: true site_uv_header: æœ¬ç«™è®¿å®¢æ•° site_uv_footer: äººæ¬¡ # custom pv span for the whole site # æ•ˆæžœï¼šæœ¬ç«™æ€»è®¿é—®é‡12345æ¬¡ site_pv: true site_pv_header: æœ¬ç«™æ€»è®¿é—®é‡ site_pv_footer: æ¬¡ # custom pv span for one page only # æ•ˆæžœï¼šæœ¬æ–‡æ€»é˜…è¯»é‡12345æ¬¡ page_pv: true page_pv_header: æœ¬æ–‡æ€»é˜…è¯»é‡ page_pv_footer: æ¬¡å®ŒæˆåŽé‡æ–°ç¼–è¯‘å¹¶è¿è¡Œï¼Œä½ ä¼šå‘çŽ°æ¯ç¯‡åšå®¢æ–‡ç« å’Œç½‘é¡µåº•éƒ¨å·²ç»å‡ºçŽ°äº†è®¿é—®ç»Ÿè®¡ä¿¡æ¯äº†ã€‚ðŸ’â€â™‚ æ¸©é¦¨æç¤ºï¼šç›®å‰ä¸è’œå­ã€Ždn-lbstatics.qbox.meã€åŸŸåè¿‡æœŸï¼Œæ›´æ¢åŸŸååˆ°ã€Žbusuanzi.ibruce.infoã€ï¼æ•…ä½ å¯èƒ½éœ€è¦ä¿®æ”¹ä»¥ä¸‹æ–‡ä»¶ç›¸å…³ä¿¡æ¯ï¼šç¼–è¾‘ myblog/themes/next/layout/_third-party/analytics/busuanzi-counter.swigï¼Œæ‰¾åˆ°ä»¥ä¸‹ä»£ç ï¼š1&lt;script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"&gt;&lt;/script&gt;ä¿®æ”¹ä¸º:1&lt;script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"&gt;&lt;/script&gt;å¦‚æžœä¸è’œå­åˆæ‹¿å›žåŽŸæ¥çš„åŸŸåï¼Œé‚£ä¹ˆå†æ”¹å›žåŽŸæ¥çš„åŸŸåå§~~~Â¶2) leancloudç»Ÿè®¡ï¼ˆ1ï¼‰ç™»å½•leancloudå®˜ç½‘æ³¨å†Œè´¦æˆ·ã€‚ðŸ’â€â™‚è¯´æ˜Žï¼šçŽ°åœ¨leancloudå®˜æ–¹çš„äº‘æœåŠ¡ç³»ç»Ÿæ˜¯å›½å†…å’Œå›½é™…åˆ†åˆ«è¿è¥ï¼Œæ‰€ä»¥å®˜æ–¹ç½‘å€ä¹Ÿåˆ†ä¸ºå›½å†…ç½‘å€å’Œå›½é™…ç½‘å€ï¼Œä¸ªäººå»ºè®®å›½é™…çš„ã€‚å›½å†…ç½‘å€ï¼šhttps://leancloud.cnå›½é™…ç½‘å€ï¼šhttps://leancloud.appï¼ˆ2ï¼‰ç™»å½•leancloudåŽå°ï¼Œç„¶åŽåˆ›å»ºåº”ç”¨ï¼ˆ3ï¼‰åˆ›å»ºåº”ç”¨å®ŒæˆåŽå°±å¾—åˆ°äº† appidå’Œ appkey:ï¼ˆ4ï¼‰ç„¶åŽè®¾ç½®å®‰å…¨åŸŸåå°†ä½ ç½‘ç«™é¦–é¡µçš„åŸŸåè¯·æ±‚åœ°å€å¡«è¿›åŽ»å³å¯ï¼Œå¯ä»¥é˜²æ­¢å…¶ä»–äººæ”»å‡»ã€‚å¦‚æžœä½ æ˜¯ä¸€ä¸ªå¼€å‘çˆ±å¥½è€…ï¼Œå¯ä»¥å°†æœ¬åœ°localhostï¼ˆåŒ…æ‹¬ç«¯å£å·ï¼‰æ·»åŠ è¿›åŽ»ï¼Œå¼€å‘å®ŒæˆåŽå†åˆ é™¤å³å¯ï¼ˆ5ï¼‰åˆ›å»ºä¸€ä¸ªåç§°ä¸ºCounterçš„Classï¼Œç”¨äºŽæ•°æ®å­˜å‚¨ã€‚ï¼ˆ6ï¼‰ç»‘å®šè‡ªå®šä¹‰åŸŸåä½œä¸ºapiè®¿é—®å…¥å£ã€‚2022 å¹´ 8 æœˆèµ·ï¼Œå›½é™…ç‰ˆå…±äº«åŸŸåä¸å†å‘ä¸­å›½å¤§é™†æä¾›æœåŠ¡ï¼Œè§ï¼šhttps://forum.leancloud.cn/t/2022-8/25408ã€‚æ•…å¦‚æžœä¸ç»‘å®šè‡ªå®šä¹‰åŸŸååˆ™æ— æ³•é€šè¿‡å›½å†…ç½‘ç»œæ­£è®¿é—®ï¼ˆä¸»è¦æ˜¯ä¼šæŠ¥â€œè·¨åŸŸâ€é”™è¯¯ä¿¡æ¯ï¼‰ï¼Œè‹¥æƒ³è¦ç»§ç»­æ­£å¸¸ä½¿ç”¨è¦ä¹ˆç§‘å­¦ä¸Šç½‘æˆ–è€…æ”¹ä¸ºå›½å†…ç‰ˆï¼Œåˆæˆ–è€…åœ¨å›½é™…ç‰ˆä¸Šç»‘å®šè‡ªå®šä¹‰åŸŸåã€‚å…¶ä¸­åœ¨å›½é™…ç‰ˆä¸Šç»‘å®šè‡ªå®šä¹‰åŸŸåæ“ä½œå¦‚ä¸‹ï¼šï¼ˆ7ï¼‰ç¼–è¾‘ myblog/themes/next/_config.ymlä¸»é¢˜é…ç½®æ–‡ä»¶ï¼Œæ·»åŠ å°†leancloudåŽå°å¾—åˆ°çš„ appidå’Œ appkeyå¡«å…¥é…ç½®ä¸­ã€‚å¦‚ä¸‹ï¼š1234567# Show number of visitors to each article.# You can visit https://leancloud.cn / https://leancloud.app get AppID and AppKey.leancloud_visitors: enable: true app_id: 6LNbUE*********XbMMI app_key: d2FLy*********uDWx server_api: https://leancloud.qcmoke.cnðŸ‘€ æ³¨æ„ï¼šenable è¦è®¾ç½®ä¸º true è¡¨ç¤ºå¼€å¯è¿™ä¸ªåŠŸèƒ½ã€‚ï¼ˆ8ï¼‰å¦‚æžœå’Œæˆ‘ä¸€æ ·ä½¿ç”¨çš„nextç‰ˆæœ¬æ˜¯5.1.4ï¼Œå¹¶ä¸”ä½¿ç”¨çš„leancloudæ˜¯å›½é™…ç‰ˆï¼ˆleancloudæ˜¯å›½å†…ç‰ˆçš„å¯ä»¥è·³è¿‡ï¼‰ï¼Œå°±è¿˜è¦åšå…¼å®¹å¤„ç†ï¼Œå› ä¸ºå›½é™…ç‰ˆleancloudæ˜¯åŽæ¥æ‰æœ‰çš„ï¼Œä»¥è‡´äºŽæ—§ç‰ˆçš„nextä¸å…¼å®¹ã€‚ä¿®æ”¹ themes/next/layout/_third-party/analytics/lean-analytics.swig,å°†å…¶å†…å®¹æ›¿æ¢æˆä¸‹é¢ï¼š123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198199200201202203204205206207208209210211212213214215216217218219220221222223224225226227228229230231232233234&lt;!--åˆ‡æ¢å›½é™…ç‰ˆleancloudæ›¿æ¢ä»£ç --&gt;&#123;% if theme.leancloud_visitors.enable and !theme.valine.visitor %&#125; &#123;# custom analytics part create by xiamo; edited by LEAFERx #&#125; &lt;script&gt; &#123;% if page.layout === 'post' %&#125; function addCount(Counter) &#123; var $visitors = $('.leancloud_visitors'); var url = $visitors.attr('id').trim(); var title = $visitors.attr('data-flag-title').trim(); Counter('get', '/classes/Counter', &#123; where: JSON.stringify(&#123; url &#125;) &#125;) .done(function(&#123; results &#125;) &#123; if (results.length &gt; 0) &#123; var counter = results[0]; &#123;% if theme.leancloud_visitors.betterPerformance %&#125; var $element = $(document.getElementById(url)); $element.find('.leancloud-visitors-count').text(counter.time + 1); &#123;% endif %&#125; Counter('put', '/classes/Counter/' + counter.objectId, JSON.stringify(&#123; time: &#123; '__op': 'Increment', 'amount': 1 &#125; &#125;)) &#123;% if not theme.leancloud_visitors.betterPerformance %&#125; .done(function() &#123; var $element = $(document.getElementById(url)); $element.find('.leancloud-visitors-count').text(counter.time + 1); &#125;) &#123;% endif %&#125; .fail(function (&#123; responseJSON &#125;) &#123; console.log('Failed to save Visitor num, with error message: ' + responseJSON.error); &#125;) &#125; else &#123; &#123;% if theme.leancloud_visitors.security %&#125; var $element = $(document.getElementById(url)); $element.find('.leancloud-visitors-count').text('Counter not initialized! More info at console err msg.'); console.error('ATTENTION! LeanCloud counter has security bug, see how to solve it here: https://github.com/theme-next/hexo-leancloud-counter-security. \n However, you can still use LeanCloud without security, by setting `security` option to `false`.'); &#123;% else %&#125; Counter('post', '/classes/Counter', JSON.stringify(&#123; title: title, url: url, time: 1 &#125;)) .done(function() &#123; var $element = $(document.getElementById(url)); $element.find('.leancloud-visitors-count').text(1); &#125;) .fail(function() &#123; console.log('Failed to create'); &#125;); &#123;% endif %&#125; &#125; &#125;) .fail(function (&#123; responseJSON &#125;) &#123; console.log('LeanCloud Counter Error: ' + responseJSON.code + ' ' + responseJSON.error); &#125;); &#125; &#123;% else %&#125; function showTime(Counter) &#123; var entries = []; var $visitors = $('.leancloud_visitors'); $visitors.each(function() &#123; entries.push( $(this).attr('id').trim() ); &#125;); Counter('get', '/classes/Counter', &#123; where: JSON.stringify(&#123; url: &#123; '$in': entries &#125; &#125;) &#125;) .done(function(&#123; results &#125;) &#123; var COUNT_CONTAINER_REF = '.leancloud-visitors-count'; if (results.length === 0) &#123; $visitors.find(COUNT_CONTAINER_REF).text(0); return; &#125; for (var i = 0; i &lt; results.length; i++) &#123; var item = results[i]; var url = item.url; var time = item.time; var element = document.getElementById(url); $(element).find(COUNT_CONTAINER_REF).text(time); &#125; for (var i = 0; i &lt; entries.length; i++) &#123; var url = entries[i]; var element = document.getElementById(url); var countSpan = $(element).find(COUNT_CONTAINER_REF); if (countSpan.text() == '') &#123; countSpan.text(0); &#125; &#125; &#125;) .fail(function (&#123; responseJSON &#125;) &#123; console.log('LeanCloud Counter Error: ' + responseJSON.code + ' ' + responseJSON.error); &#125;); &#125; &#123;% endif %&#125; $(function() &#123; $.get('https://app-router.leancloud.cn/2/route?appId=' + '&#123;&#123; theme.leancloud_visitors.app_id &#125;&#125;') .done(function(&#123; api_server &#125;) &#123; var Counter = function(method, url, data) &#123; return $.ajax(&#123; method: method, //url: 'https://' + api_server + '/1.1' + url, url: ('&#123;&#123; theme.leancloud_visitors.server_api &#125;&#125;' || api_server) + '/1.1' + url, headers: &#123; 'X-LC-Id': '&#123;&#123; theme.leancloud_visitors.app_id &#125;&#125;', 'X-LC-Key': '&#123;&#123; theme.leancloud_visitors.app_key &#125;&#125;', 'Content-Type': 'application/json', &#125;, data: data &#125;); &#125;; &#123;% if page.layout === 'post' %&#125; const localhost = /http:\/\/(localhost|127.0.0.1|0.0.0.0)/; if (localhost.test(document.URL)) return;//æœ¬åœ°è°ƒè¯•æ—¶ä¸è¿›è¡Œç»Ÿè®¡ addCount(Counter); &#123;% else %&#125; if ($('.post-title-link').length &gt;= 1) &#123; showTime(Counter); &#125; &#123;% endif %&#125; &#125;); &#125;); &lt;/script&gt;&#123;% endif %&#125;&lt;!--nextåŽŸæ¥çš„ç‰ˆæœ¬--&gt;&lt;!--&#123;% if theme.leancloud_visitors.enable %&#125; &#123;# custom analytics part create by xiamo #&#125; &lt;script src="https://cdn1.lncld.net/static/js/av-core-mini-0.6.4.js"&gt;&lt;/script&gt; &lt;script&gt;AV.initialize("&#123;&#123;theme.leancloud_visitors.app_id&#125;&#125;", "&#123;&#123;theme.leancloud_visitors.app_key&#125;&#125;");&lt;/script&gt; &lt;script&gt; function showTime(Counter) &#123; var query = new AV.Query(Counter); var entries = []; var $visitors = $(".leancloud_visitors"); $visitors.each(function () &#123; entries.push( $(this).attr("id").trim() ); &#125;); query.containedIn('url', entries); query.find() .done(function (results) &#123; var COUNT_CONTAINER_REF = '.leancloud-visitors-count'; if (results.length === 0) &#123; $visitors.find(COUNT_CONTAINER_REF).text(0); return; &#125; for (var i = 0; i &lt; results.length; i++) &#123; var item = results[i]; var url = item.get('url'); var time = item.get('time'); var element = document.getElementById(url); $(element).find(COUNT_CONTAINER_REF).text(time); &#125; for(var i = 0; i &lt; entries.length; i++) &#123; var url = entries[i]; var element = document.getElementById(url); var countSpan = $(element).find(COUNT_CONTAINER_REF); if( countSpan.text() == '') &#123; countSpan.text(0); &#125; &#125; &#125;) .fail(function (object, error) &#123; console.log("Error: " + error.code + " " + error.message); &#125;); &#125; function addCount(Counter) &#123; var $visitors = $(".leancloud_visitors"); var url = $visitors.attr('id').trim(); var title = $visitors.attr('data-flag-title').trim(); var query = new AV.Query(Counter); query.equalTo("url", url); query.find(&#123; success: function(results) &#123; if (results.length &gt; 0) &#123; var counter = results[0]; counter.fetchWhenSave(true); counter.increment("time"); counter.save(null, &#123; success: function(counter) &#123; var $element = $(document.getElementById(url)); $element.find('.leancloud-visitors-count').text(counter.get('time')); &#125;, error: function(counter, error) &#123; console.log('Failed to save Visitor num, with error message: ' + error.message); &#125; &#125;); &#125; else &#123; var newcounter = new Counter(); /* Set ACL */ var acl = new AV.ACL(); acl.setPublicReadAccess(true); acl.setPublicWriteAccess(true); newcounter.setACL(acl); /* End Set ACL */ newcounter.set("title", title); newcounter.set("url", url); newcounter.set("time", 1); newcounter.save(null, &#123; success: function(newcounter) &#123; var $element = $(document.getElementById(url)); $element.find('.leancloud-visitors-count').text(newcounter.get('time')); &#125;, error: function(newcounter, error) &#123; console.log('Failed to create'); &#125; &#125;); &#125; &#125;, error: function(error) &#123; console.log('Error:' + error.code + " " + error.message); &#125; &#125;); &#125; $(function() &#123; var Counter = AV.Object.extend("Counter"); if ($('.leancloud_visitors').length == 1) &#123; addCount(Counter); &#125; else if ($('.post-title-link').length &gt; 1) &#123; showTime(Counter); &#125; &#125;); &lt;/script&gt;&#123;% endif %&#125;--&gt;ðŸ™‰æ³¨æ„ï¼šæœ¬åœ°è°ƒè¯•æ—¶ä¸è¿›è¡Œç»Ÿè®¡ã€‚å¦‚æžœçœ‹æ‡‚ä¸Šé¢æºç å¯ä»¥è®©å…¶åœ¨æœ¬åœ°è°ƒè¯•æ˜¯èƒ½è¿›è¡Œç»Ÿè®¡ã€‚ä½†å°ç™½ç›´æŽ¥å¤åˆ¶ç²˜è´´å°±å¥½ï¼Œå‘å¸ƒéƒ¨ç½²æ—¶ï¼Œé€šè¿‡åŸŸåè®¿é—®å°±èƒ½ç»Ÿè®¡äº†ã€‚ä¸ºäº†è®©ç§»åŠ¨ç«¯æ˜¾ç¤ºæ›´å‹å¥½ï¼Œæˆ‘ä¿®æ”¹äº† themes/next/layout/_macro/post.swigæ–‡ä»¶ï¼ŒåŠ äº†ä¸€ä¸ªspanæ ‡ç­¾è¿›è¡Œä¿®é¥°ï¼Œè®©å°çœ¼ç›å’Œè®¿é—®æ•°å€¼å§‹ç»ˆåœ¨åŒä¸€è¡Œã€‚123456789101112131415 &#123;# LeanCould PageView #&#125; &#123;% if theme.leancloud_visitors.enable %&#125; &lt;span id="&#123;&#123; url_for(post.path) &#125;&#125;" class="leancloud_visitors" data-flag-title="&#123;&#123; post.title &#125;&#125;"&gt; &lt;span class="post-meta-divider"&gt;|&lt;/span&gt;+ &lt;span class="lv-inline-block" style="display: inline-block;"&gt; &lt;span class="post-meta-item-icon"&gt; &lt;i class="fa fa-eye"&gt;&lt;/i&gt; &lt;/span&gt; &#123;% if theme.post_meta.item_text %&#125; &lt;span class="post-meta-item-text"&gt;&#123;&#123;__('post.visitors')&#125;&#125;:&lt;/span&gt; &#123;% endif %&#125; &lt;span class="leancloud-visitors-count"&gt;&lt;/span&gt;+ &lt;/span&gt; &lt;/span&gt; &#123;% endif %&#125;Â¶3) é¢å¤–è¡¥å……ç”±äºŽä¸è’œå­ç»Ÿè®¡å’Œleancloudç»Ÿè®¡éƒ½å­˜åœ¨ç€ä¸€äº›ç¼ºå¤±çš„é—®é¢˜ï¼Œä½†æ˜¯å®ƒä»¬ä¹‹é—´åˆå†¥å†¥ä¸­æœ‰ç€äº’è¡¥çš„å…³ç³»ï¼Œæ‰€ä»¥æˆ‘é€šè¿‡ä¸€æ³¢è€ƒè™‘åŽï¼Œé€‰æ‹©äº†æŠ˜ä¸­çš„æ–¹æ¡ˆï¼Œé‚£å°±æ˜¯ä½¿ç”¨ä¸è’œå­ç»Ÿè®¡çš„â€œæœ¬ç«™è®¿å®¢æ•°â€ã€â€œæœ¬ç«™æ€»è®¿é—®é‡â€ï¼Œè€Œä½¿ç”¨leancloudç»Ÿè®¡çš„â€œæœ¬æ–‡æ€»é˜…è¯»é‡â€ç»Ÿè®¡ã€‚é…ç½®å¦‚ä¸‹ï¼š1234567891011121314151617181920# Show PV/UV of the website/page with busuanzi.# Get more information on http://ibruce.info/2015/04/04/busuanzi/busuanzi_count: # count values only if the other configs are false enable: true # custom uv span for the whole site # æ•ˆæžœï¼šæœ¬ç«™è®¿å®¢æ•°12345äººæ¬¡ site_uv: true site_uv_header: æœ¬ç«™è®¿å®¢æ•° site_uv_footer: äººæ¬¡ # custom pv span for the whole site # æ•ˆæžœï¼šæœ¬ç«™æ€»è®¿é—®é‡12345æ¬¡ site_pv: true site_pv_header: æœ¬ç«™æ€»è®¿é—®é‡ site_pv_footer: æ¬¡ # custom pv span for one page only # æ•ˆæžœï¼šæœ¬æ–‡æ€»é˜…è¯»é‡12345æ¬¡ page_pv: false page_pv_header: æœ¬æ–‡æ€»é˜…è¯»é‡ page_pv_footer: æ¬¡123456# Show number of visitors to each article.# You can visit https://leancloud.cn / https://leancloud.app get AppID and AppKey.leancloud_visitors: enable: true app_id: 6LNbUERxbG0OAnWfmJSbmXiW-MdYXbMMI app_key: d2FLy9fmXOTiM8TrokuIuDWxðŸ’â€â™‚å¦‚æžœä½ å¯¹è¿™è®¿é—®ç»Ÿè®¡è¿™ä¸€å—å¾ˆæ„Ÿå…´è¶£å¹¶ä¸”æ‡‚ç‚¹ç¼–ç¨‹çŸ¥è¯†çš„è¯ï¼Œä½ å®Œå…¨å¯ä»¥é€šè¿‡leancloudçš„sdkæ¥å¼€å‘å‡ºå®Œæ•´çš„ç»Ÿè®¡åŠŸèƒ½ã€‚è¿™æ ·çš„è¯å°±å¯ä»¥ä¸ç”¨ä¸è’œå­ç»Ÿè®¡äº†ã€‚è¦æ˜¯ä½ è¿˜æœ‰ä¸€å°å¯ä»¥é•¿æœŸä½¿ç”¨çš„vpsçš„è¯ï¼Œä½ ç”šè‡³å¯ä»¥ä¸ç”¨leancloudçš„æœåŠ¡ï¼Œè€Œæ˜¯è‡ªå·±å®žçŽ°ä¸€ä¸ªè®¿é—®è®¡æ•°çš„åŽç«¯æœåŠ¡ã€‚è¿™é‡Œæˆ‘å°±ä¸æ·±å…¥äº†ã€‚Â¶3. åŠ å…¥è¯„è®ºé¢æ¿Â¶1) Gitalkä¸Šç½‘æ‰¾è¿‡å¾ˆå¤šä¸Žhexoç›¸å…³çš„è¯„è®ºé¢æ¿ï¼Œä½†å‘çŽ°å¾ˆå¤šç¬¬ä¸‰æ–¹çš„è¯„è®ºé¢æ¿æä¾›çš„è¯„è®ºé¢æ¿éƒ½æœ‰ä¸€ä¸ªè‡´å‘½çš„å¼±ç‚¹ï¼Œé‚£å°±æ˜¯åœ¨ä¸å¯é¢„æ–™çš„ä¸€å¤©çªç„¶åœ¨å›½å†…è¢«å’Œè°äº†ï¼Œæˆ–è€…å‡ºçŽ°å„ç§å„æ ·çš„é—®é¢˜ï¼Œè¿™å¾ˆè®©äººå¤´ç–¼ã€‚åŽæ¥åœ¨ç½‘ä¸Šå‘çŽ°æœ‰äººé€šè¿‡è°ƒç”¨githubæä¾›çš„Issues apiåšæˆäº†æ¯”è¾ƒç¾Žè§‚çš„è¯„è®ºé¢æ¿ï¼Œè¿™å…¶ä¸­æˆ‘å‘çŽ°äº†ä¸¤ç§ï¼Œç¬¬ä¸€ç§æ˜¯gitmentï¼Œç¬¬äºŒç§å°±æ˜¯è¿™é‡Œè¦è®²çš„gitalkã€‚ä¹‹å‰ä¹Ÿå°è¯•è¿‡åŠ å…¥gitmentï¼Œä½†æ˜¯å‘çŽ°è£…å¥½åŽå‡ºçŽ°äº†å„ç§é—®é¢˜ã€‚æœ€ä¸¥é‡çš„é—®é¢˜å°±æ˜¯æ— æ³•é€šè¿‡ç™»é™†è¯„è®ºé¢æ¿è¿›è¡Œåˆå§‹åŒ–æ–‡ç« çš„è¯„è®ºåŠŸèƒ½ï¼Œæ‰€ä»¥ä¹Ÿå°±æ”¾å¼ƒäº†è¿™ç§é€”å¾„ã€‚åŽæ¥åœ¨nextçš„Telegramç¾¤é‡Œå‘çŽ°äº†gitalkè¿™ä¸ªå¹²è´§ï¼ŒäºŽæ˜¯å¼€å§‹ä¸Šç½‘æ‰¾å„ç§æ•™ç¨‹å°è¯•æ­å»ºï¼Œä½†åœ¨è¿™è¿‡ç¨‹ä¸­ä¹Ÿè¿˜æ˜¯å‘çŽ°äº†ä¸€äº›é—®é¢˜ã€‚æ‰€ä»¥åœ¨è¿™é‡Œæˆ‘å°†å°½å¯èƒ½è¯¦ç»†è§£é‡Šæ¸…æ¥šï¼Œé¿å…è¯¯å¯¼å¤§å®¶ã€‚ï¼ˆ1ï¼‰é¦–å…ˆä½ å¾—å…ˆåˆ°githubä¸Šç”³è¯·ä¸€ä¸ª Github Applicationï¼Œç”±äºŽéœ€è¦è°ƒç”¨ Github API ,é¦–å…ˆç‚¹å‡»æ³¨å†Œä¸€ä¸ª Github Application ã€‚ç”³è¯·é¡µå¦‚ä¸‹å›¾ï¼šå‚æ•°è¯´æ˜Žï¼š1234Application nameï¼š #åº”ç”¨åç§°ï¼Œéšæ„å¡«Homepage URLï¼š #åº”ç”¨åœ°å€ï¼Œå¡«ä½ çš„åšå®¢åœ°å€ï¼Œå¦‚https://youname.github.io Application description #æè¿°ï¼Œéšæ„å¡«Authorization callback URLï¼š#å›žè°ƒåœ°å€ï¼Œå¡«ä½ çš„åšå®¢åœ°å€ï¼Œå¦‚https://youname.github.ioå¦‚æžœæ²¡æœ‰ç”¨è‡ªè´­çš„åŸŸåï¼ŒHomepage URLå’Œ Authorization callback URLç»Ÿä¸€å¡«https://youname.github.io (younameæ˜¯ä½ çš„githubç”¨æˆ·å)ã€‚å¡«å†™å®ŒæˆåŽï¼Œç‚¹å‡»register applicationã€‚åˆ›å»ºæˆåŠŸåŽï¼Œä¼šçœ‹åˆ° clientID: XXXå’Œ clientSecret: XXX è¿™ä¸¤ä¸ªå‚æ•°ï¼Œå¦‚ä¸‹å›¾ï¼šï¼ˆ2ï¼‰åˆ›å»ºä¸€ä¸ªä»“åº“ç”¨æ¥å­˜æ”¾issueæ•°æ®ï¼Œå‘½åå¯ä»¥éšæ„ï¼Œä½†ä¸ºäº†å’Œæˆ‘ç»Ÿä¸€ï¼Œæœ€å¥½ä¹Ÿå‘½åä¸º gitalkã€‚ï¼ˆ3ï¼‰æ·»åŠ gitalk.swigé…ç½®æ–‡ä»¶åœ¨ç›®å½• myblog/themes/next/layout/_third-party/commentsä¸‹åˆ›å»ºä¸€ä¸ª gitalk.swigæ–‡ä»¶ã€‚å°†ä»¥ä¸‹ä»£ç å…¨éƒ¨å¤åˆ¶åˆ° gitalk.swigä¸­ã€‚1234567891011121314151617181920&#123;% if theme.gitalk.enable %&#125; &#123;% if page.comments %&#125; &lt;link rel="stylesheet" href="https://unpkg.com/gitalk/dist/gitalk.css"&gt; &lt;script src="https://unpkg.com/gitalk/dist/gitalk.min.js"&gt;&lt;/script&gt; &lt;script type="text/javascript"&gt; const gitalk = new Gitalk(&#123; clientID: '&#123;&#123;theme.gitalk.clientID&#125;&#125;', clientSecret: '&#123;&#123;theme.gitalk.clientSecret&#125;&#125;', repo: '&#123;&#123;theme.gitalk.repo&#125;&#125;', owner: '&#123;&#123;theme.gitalk.owner&#125;&#125;', admin: '&#123;&#123;theme.gitalk.admin&#125;&#125;'.split(','), id: location.pathname, // facebook-like distraction free mode distractionFreeMode: '&#123;&#123; theme.gitalk.distractionFreeMode &#125;&#125;', createIssueManually: '&#123;&#123; theme.gitalk.createIssueManually &#125;&#125;' &#125;) gitalk.render('gitalk-container') &lt;/script&gt; &#123;% endif %&#125;&#123;% endif %&#125;ï¼ˆ4ï¼‰ä¿®æ”¹index.swigé…ç½®æ–‡ä»¶åœ¨ myblog/themes/next/layout/_third-party/commentsç›®å½•ä¸‹çš„ index.swigæ–‡ä»¶æœ€åŽåŠ å…¥ä»¥ä¸‹ä»£ç ï¼š1&#123;% include 'gitalk.swig' %&#125;ï¼ˆ5ï¼‰ä¿®æ”¹comments.swigé…ç½®æ–‡ä»¶æ‰“å¼€ myblog/themes/next/layout/_partials ç›®å½•ä¸‹çš„ comments.swigæ–‡ä»¶ï¼Œæœç´¢å…³é”®å­— valineæ‰¾åˆ°ä»¥ä¸‹ä»£ç ï¼š1234&#123;% elseif theme.valine.appid and theme.valine.appkey %&#125; &lt;div class="comments" id="comments"&gt; &lt;/div&gt;&#123;% endif %&#125;å°†ä»¥ä¸Šä»£ç æ”¹æˆä»¥ä¸‹ä»£ç :12345678&#123;% elseif theme.valine.appid and theme.valine.appkey %&#125; &lt;div class="comments" id="comments"&gt; &lt;/div&gt; &#123;% elseif theme.gitalk.enable %&#125; &lt;div class="comments" id="comments"&gt; &lt;div id="gitalk-container"&gt;&lt;/div&gt; &lt;/div&gt;&#123;% endif %&#125;ï¼ˆ6ï¼‰ä¿®æ”¹ä¸»é¢˜é…ç½®æ–‡ä»¶æ‰“å¼€ myblog/themes/next/_config.ymlä¸»é¢˜é…ç½®æ–‡ä»¶ï¼Œæ ¹æ®è‡ªå·±çš„æƒ…å†µæ·»åŠ å¦‚ä¸‹ä»£ç :1234567891011# Gitalk# more info please open https://github.com/gitalk/gitalkgitalk: enable: true clientID: d933e443cdfe503ce05a #åˆ›å»ºGithub Applicationæ—¶ç”Ÿæˆçš„clientID clientSecret: 149d163f4b10cedf7a68993289da9c0f0836bd34 #åˆ›å»ºGithub Applicationæ—¶ç”Ÿæˆçš„clientSecret repo: mygitalk #å¡«ä¹‹å‰åˆ›å»ºå¥½çš„å­˜æ”¾issueçš„ä»“åº“å owner: qcmoke #å¡«Github ç”¨æˆ·å admin: qcmoke #å¡«Github ç”¨æˆ·å distractionFreeMode: true #ç±»ä¼¼Facebookè¯„è®ºæ¡†çš„å…¨å±é®ç½©æ•ˆæžœ. createIssueManually: true #å¦‚æžœå½“å‰é¡µé¢æ²¡æœ‰ç›¸åº”çš„ isssue ï¼Œä¸”ç™»å½•çš„ç”¨æˆ·å±žäºŽ adminï¼Œåˆ™ä¼šè‡ªåŠ¨åˆ›å»º issueã€‚å¦‚æžœè®¾ç½®ä¸º trueï¼Œåˆ™æ˜¾ç¤ºä¸€ä¸ªåˆå§‹åŒ–é¡µé¢ï¼Œåˆ›å»º issue éœ€è¦ç‚¹å‡» init æŒ‰é’®ã€‚ä¸ºäº†ä¸å‡ºé”™åŒæ—¶ä¹Ÿæ–¹ä¾¿ç®¡ç†ï¼Œä½ å¯å°†è¿™äº›ä»£ç æ”¾åœ¨gitmentï¼ˆå¦‚æžœä¹‹å‰æœ‰é…ç½®çš„è¯ï¼‰æ¿å—åŽã€‚å¦‚æˆ‘çš„ï¼šï¼ˆ7ï¼‰éƒ¨ç½²åˆ°githubæœ€åŽé€šè¿‡ hexo éƒ¨ç½²ä½ çš„åšå®¢ï¼Œå³å¯çœ‹åˆ°gitalkè¯„è®ºé¢æ¿çš„æ•ˆæžœã€‚ï¼ˆ8ï¼‰åˆå§‹åŒ–æ¯ç¯‡æ–‡ç« çš„Issueä½ å¯èƒ½ä¼šå‘çŽ°è¿˜ä¸èƒ½è¯„è®ºï¼Œå¾ˆç®€å•ï¼Œä½ åªéœ€è¦ç‚¹å‡» åˆå§‹åŒ–Issue,ä¹‹åŽå°±è¦ä»¥githubè´¦å·ç™»å½•ã€‚ç™»å½•æˆåŠŸåŽä¾¿è‡ªåŠ¨å®Œæˆåˆå§‹åŒ–ã€‚ï¼ˆæ³¨æ„ï¼Œåªèƒ½é€šè¿‡è‡ªå·±çš„githubè´¦å·æ¥åˆå§‹åŒ–ï¼‰ã€‚åˆå§‹åŒ–éœ€è¦åˆ·æ–°ä¸€ä¸‹ï¼Œç»“æžœå¦‚ä¸‹å›¾ï¼Œgithubç”¨æˆ·å°±èƒ½é€šè¿‡ç™»å½•githubè´¦å·è¿›è¡Œè¯„è®ºäº†ã€‚åŒæ—¶å­˜æ”¾è¯„è®ºæ•°æ®çš„ä»“åº“ï¼ŒIssuesä¸‹ä¹Ÿç”Ÿæˆäº†Issueæ•°æ®è‡³æ­¤ï¼ŒåŠ å…¥Gitalkè¯„è®ºé¢æ¿å®Œç»“ã€‚Â¶2) Vssueç›®å‰å‘çŽ°Gitalkæ˜¯å¾ˆå¥½çš„ï¼Œä½†æ˜¯ç›®å‰å®ƒåªæ”¯æŒgithubä»£ç æ‰˜ç®¡å¹³å°ï¼Œä½†ç¢äºŽgithubæœåŠ¡å™¨åœ¨å›½å¤–ï¼Œè¯„è®ºé¢æ¿æœ‰æ—¶å€™ä¼šç”±äºŽç½‘ç»œçš„åŽŸå› å¯¼è‡´æ— æ³•è¯·æ±‚apiï¼Œæ‰€ä»¥è¿™æ‰è®¤è¯†åˆ°äº†Vssueï¼ŒVssueå’ŒGitalkçš„åŠŸèƒ½å·®ä¸å¤šï¼Œå®ƒæ”¯æŒå¤šä¸ªä»£ç æ‰˜ç®¡å¹³å°ï¼ˆGitHubã€GitLabã€Bitbucketã€Giteeã€Giteaï¼‰ï¼Œå¦‚æžœä½¿ç”¨Giteeä½œä¸ºè¯„è®ºapiçš„è¯ï¼Œç½‘ç»œå»¶æ—¶çš„é—®é¢˜å°±ä¼šå¾—åˆ°æ¯”è¾ƒå¥½çš„è§£å†³ã€‚æŽ¥ä¸‹æ¥å°±å¥‰ä¸Šæ•™ç¨‹ã€‚ï¼ˆ1ï¼‰åœ¨ç›®å½• myblog/themes/next/layout/_third-party/commentsä¸‹åˆ›å»ºä¸€ä¸ª vssue.swigæ–‡ä»¶ã€‚å†…å®¹å¦‚ä¸‹ï¼š1234567891011121314151617181920212223242526272829303132333435363738394041424344454647&#123;% if theme.vssue.enable %&#125; &#123;% if page.comments %&#125; &lt;!-- Vssue çš„æ ·å¼æ–‡ä»¶ --&gt; &lt;link rel="stylesheet" href="&#123;&#123; theme.vssue.vssueCss &#125;&#125;"&gt; &lt;!-- Vue è¿è¡Œæ—¶ç‰ˆ (runtime only) --&gt; &lt;script src="&#123;&#123; theme.vssue.vueRuntimeJs &#125;&#125;"&gt;&lt;/script&gt; &lt;!-- åœ¨ Vue ä¹‹åŽå¼•å…¥ Vssue --&gt; &lt;script src="&#123;&#123; theme.vssue.vssueTypeJs &#125;&#125;"&gt;&lt;/script&gt; &lt;!-- å°† Vssue ä½œä¸º Vue ç»„ä»¶ä½¿ç”¨,å¯¹äºŽ Vue è¿è¡Œæ—¶ç‰ˆï¼Œä½¿ç”¨æ¸²æŸ“å‡½æ•°ï¼ˆrender functionï¼‰ --&gt; &lt;script type="text/javascript"&gt; new Vue(&#123; el: '#vssue', render: h =&gt; h('Vssue', &#123; props: &#123; // åœ¨è¿™é‡Œè®¾ç½®å½“å‰é¡µé¢å¯¹åº”çš„ Issue æ ‡é¢˜ title: '&#123;&#123;theme.vssue.title&#125;&#125;', // åœ¨è¿™é‡Œè®¾ç½®ä½ ä½¿ç”¨çš„å¹³å°çš„ OAuth App é…ç½® options: &#123; owner: '&#123;&#123;theme.vssue.owner&#125;&#125;', repo: '&#123;&#123;theme.vssue.repo&#125;&#125;', clientId: '&#123;&#123;theme.vssue.clientId&#125;&#125;', clientSecret: '&#123;&#123;theme.vssue.clientSecret&#125;&#125;', &#125;, &#125; &#125;) &#125;) &lt;/script&gt; &lt;!--è‡ªå®šä¹‰æ ·å¼--&gt; &lt;style&gt; .vssue &#123; width: 96%; color: #60676d; &#125; .vssue .vssue-button &#123; padding: unset; &#125; .vssue .vssue-button:not(:disabled).vssue-button-primary &#123; color: #60676d; border-color: #60676d; &#125; .vssue :not(.vssue-comment-content) a &#123; color: #333; &#125; &lt;/style&gt; &#123;% endif %&#125;&#123;% endif %&#125;ï¼ˆ2ï¼‰åœ¨ myblog/themes/next/layout/_third-party/commentsç›®å½•ä¸‹çš„ index.swigæ–‡ä»¶æœ€åŽåŠ å…¥ä»¥ä¸‹ä»£ç ï¼š1&#123;% include 'vssue.swig' %&#125;ï¼ˆ3ï¼‰æ‰“å¼€ myblog/themes/next/layout/_partials ç›®å½•ä¸‹çš„ comments.swigæ–‡ä»¶ï¼Œæ·»åŠ å¦‚ä¸‹ +çš„å†…å®¹ï¼š12345678910111213141516 &#123;% elseif theme.valine.appid and theme.valine.appkey %&#125; &lt;div class="comments" id="comments"&gt;&lt;/div&gt; &#123;% elseif theme.gitalk.enable %&#125; &lt;div class="comments" id="comments"&gt; &lt;div id="gitalk-container"&gt;&lt;/div&gt; &lt;/div&gt;+ &#123;% elseif theme.vssue.enable %&#125;+ &lt;div class="comments" id="comments"&gt;+ &lt;div id="vssue"&gt;&lt;/div&gt;+ &lt;/div&gt; &#123;% endif %&#125;&#123;% endif %&#125;ï¼ˆ4ï¼‰ä¿®æ”¹ä¸»é¢˜é…ç½®æ–‡ä»¶æ‰“å¼€ myblog/themes/next/_config.ymlä¸»é¢˜é…ç½®æ–‡ä»¶ï¼Œæ ¹æ®è‡ªå·±çš„æƒ…å†µæ·»åŠ å¦‚ä¸‹ä»£ç :123456789101112131415161718## Vssue# more info please open https://vssue.js.orgvssue: enable: true #æ˜¯å¦å¼€å¯vssueè¯„è®ºé¢æ¿ owner: qcmoke #gitç®¡ç†ç”¨æˆ· repo: myvssue #gitä»“åº“åç§° title: Vssue Dev #å¯¹åº”çš„Issueæ ‡é¢˜ clientId: b0634**********1012aa #OAuth App clientId clientSecret: 7a3********620313 #OAuth App clientSecret #Vssue jsæ–‡ä»¶ï¼ˆæ”¯æŒå¤šä¸ªä»£ç æ‰˜ç®¡å¹³å°ï¼Œåˆ‡æ¢å¹³å°æ—¶è¦åˆ‡æ¢ç›¸åº”çš„jsæ–‡ä»¶ï¼‰ #GitHubï¼šhttps://unpkg.com/vssue/dist/vssue.github.min.js #GitLabï¼šhttps://unpkg.com/vssue/dist/vssue.gitlab.min.js #Bitbucketï¼šhttps://unpkg.com/vssue/dist/vssue.bitbucket.min.js #Giteeï¼šhttps://unpkg.com/vssue/dist/vssue.gitee.min.js #Giteaï¼šhttps://unpkg.com/vssue/dist/vssue.gitea.min.js vssueTypeJs: https://unpkg.com/vssue/dist/vssue.gitee.min.js vssueCss: https://unpkg.com/vssue/dist/vssue.min.css #Vssue çš„æ ·å¼æ–‡ä»¶ vueRuntimeJs: https://unpkg.com/vue/dist/vue.runtime.min.js #Vue è¿è¡Œæ—¶ç‰ˆ (runtime only)è‡³æ­¤ï¼ŒåŠ å…¥Vssueè¯„è®ºé¢æ¿å®Œç»“ã€‚ðŸ’â€â™‚ æç¤ºï¼šclientIdå’ŒclientSecretå’ŒGitalkçš„ç”³è¯·å·®ä¸å¤šï¼Œå¯ä»¥è‡ªè¡ŒåŽ»ç›¸åº”çš„gitä»£ç æ‰˜ç®¡å¹³å°è¿›è¡Œç”³è¯·ã€‚å½“ç„¶æˆ‘æŽ¨èä½ åŽ»å‚è€ƒéžå¸¸è¯¦ç»†çš„å®˜æ–¹æŒ‡å—ï¼šhttps://vssue.js.org/zh/guideÂ¶3) Valinevalineæ˜¯ä¸€ä¸ªä¼˜ç§€çš„è¯„è®ºç³»ç»Ÿè½¯ä»¶ï¼ŒåŽå°çš„è¯„è®ºæ•°æ®ä¾èµ–äºŽleancloudçš„äº‘å­˜å‚¨ï¼Œæ‰€ä»¥è¿˜éœ€è¦åŽ»leancloudå®˜ç½‘è®¾ç½®æ•°æ®å­˜å‚¨åŠŸèƒ½ã€‚ï¼ˆ1ï¼‰é¦–å…ˆå°±æ˜¯åŽ»leancloudèŽ·å– appidå’Œ appkeyï¼Œæ€Žä¹ˆèŽ·å–å¯ä»¥å‚è€ƒä¸Šæ–‡ä¸­çš„&quot;ç½‘ç«™è®¿é—®ç»Ÿè®¡=&gt;leandcloudç»Ÿè®¡â€ã€‚ðŸ’â€â™‚æç¤ºï¼š å…¶ä¸­ appidå’Œ appkeyä¸Žleandcloudç»Ÿè®¡ä¸€æ ·å°±è¡Œã€‚ï¼ˆ2ï¼‰å¦å¤–ï¼Œè¿˜éœ€è¦åœ¨leancloudåŽå°åˆ›å»ºä¸€ä¸ªCommentçš„Classï¼Œç”¨äºŽæ•°æ®å­˜å‚¨ã€‚è™½ç„¶ç½‘ä¸Šæœ‰äººè¯´valineä¼šè‡ªåŠ¨åˆ›å»ºè¿™ä¸ªClassï¼Œä½†æ˜¯æˆ‘åœ¨ç”¨å›½é™…ç‰ˆæµ‹è¯•çš„æ—¶å€™å‘çŽ°ä¸€ç›´æ— æƒé™æˆ–è€…æç¤ºæ²¡è¿™ä¸ªClassï¼Œé‚£å€’ä¸å¦‚ç›´æŽ¥åˆ›å»ºå°±å¥½ã€‚ï¼ˆ3ï¼‰ä¿®æ”¹ä¸»é¢˜é…ç½®æ–‡ä»¶ï¼Œé…ç½® valineã€‚ä¿®æ”¹ enableä¸º trueï¼Œå¹¶ä¸”æ·»åŠ  appidå’Œ appkeyå³å¯ã€‚1234567891011121314# Valine.# You can get your appid and appkey from https://leancloud.cn# more info please open https://valine.js.orgvaline: enable: true appid: 75OSy9**********zoHsz # your leancloud application appid appkey: LKk**************GeB # your leancloud application appkey notify: false # mail notifier , https://github.com/xCss/Valine/wiki verify: false # Verification code placeholder: Just go go # comment box placeholder avatar: mm # gravatar style guest_info: nick,mail,link # custom comment header pageSize: 10 # pagination size server_api: https://leancloud.qcmoke.cnðŸ’â€â™‚è¯´æ˜Žï¼šavatar æ˜¯è®¾ç½®é»˜è®¤å¤´åƒï¼Œå¯ä»¥åŽ»https://valine.js.org/avatar é€‰æ‹©é»˜è®¤å¤´åƒæ›´å¤šè¯¦ç»†å†…å®¹è¯·æŸ¥é˜…valineçš„å®˜æ–¹æ–‡æ¡£ï¼šhttps://valine.js.orgä¸‹è½½av-min.jså’Œav-min.js.mapæ”¾åˆ°themes/next/source/js/src`ä¸‹ï¼šhttps://code.bdstatic.com/npm/leancloud-storage@4.12.0/dist/av-min.jshttps://code.bdstatic.com/npm/leancloud-storage@4.12.0/dist/av-min.js.mapï¼ˆ2ï¼‰ç„¶åŽä¿®æ”¹ themes/next/layout/_third-party/comments/valine.swig12345678910111213141516171819202122232425262728293031323334353637&#123;% if theme.valine.enable %&#125; &#123;% if page.comments %&#125; &lt;!--Leancloud æ“ä½œåº“--&gt; &lt;script src="/js/src/av-min.js"&gt;&lt;/script&gt; &lt;!--Valine çš„æ ¸å¿ƒä»£ç åº“--&gt; &lt;script src='//unpkg.com/valine/dist/Valine.min.js'&gt;&lt;/script&gt; &lt;script type="text/javascript"&gt; var emoticonList=[] for(var i = 1; i &lt;= 164; i++)&#123; emoticonList.push("aru ("+i+").png") &#125; new Valine(&#123; lang: 'zh-cn', admin_email: 'qcmoke@gmail.com', el: '#comments-valine' , appId: '&#123;&#123; theme.valine.appid &#125;&#125;', appKey: '&#123;&#123; theme.valine.appkey &#125;&#125;', placeholder: '&#123;&#123; theme.valine.placeholder &#125;&#125;', serverURLs: '&#123;&#123; theme.valine.server_api &#125;&#125;', &#125;); &lt;/script&gt; &lt;script&gt; //ç‚¹å‡»é‚®ä»¶ä¸­çš„é“¾æŽ¥è·³è½¬è‡³ç›¸åº”è¯„è®º if(window.location.hash)&#123; var checkExist = setInterval(function() &#123; if ($(window.location.hash).length) &#123; $('html, body').animate(&#123;scrollTop: $(window.location.hash).offset().top-90&#125;, 1000); clearInterval(checkExist); &#125; &#125;, 100); &#125; &lt;/script&gt; &#123;% endif %&#125;&#123;% endif %&#125;ï¼ˆ1ï¼‰å…³äºŽè‡ªå®šä¹‰çŽ¯å¢ƒå˜é‡ç›´æŽ¥å‚è€ƒæˆ‘ä¸‹é¢çš„å¯ä»¥å°½é‡é¿å…å‡ºé”™ã€‚ä¸‹é¢é™„ä¸Šæˆ‘çš„leancloudç®¡ç†åŽå°è‡ªå®šä¹‰çŽ¯å¢ƒå˜é‡ï¼šðŸ’â€â™‚è¡¥å……è¯´æ˜Žï¼šï¼ˆ1ï¼‰æˆ‘é…ç½®çš„smtpè´¦å·å’Œå¯†ç æ˜¯Gmailçš„ï¼Œå½“ç„¶è¿˜å¯ä»¥ä½¿ç”¨å…¶ä»–çš„ï¼Œæ¯”å¦‚QQï¼ŒOutlookç­‰ï¼Œå…·ä½“å¯å‚è€ƒè¿™ç¯‡æ–‡ç« ï¼šhttp://help.cy-email.com/yxtj-cyyxï¼ˆ2ï¼‰å¦‚æžœæœºå™¨æ­£åœ¨å¯åŠ¨ç„¶åŽå°±ä¿®æ”¹è¿™äº›çŽ¯å¢ƒå˜é‡çš„è¯æ˜¯éœ€è¦åˆ°â€œéƒ¨ç½²â€é‚£é‡Œé‡å¯çš„ã€‚ï¼ˆ3ï¼‰æœ‰å‡ ä¸ªé‚®ä»¶æ¨¡æ¿çŽ¯å¢ƒå˜é‡å›¾ç‰‡ä¸­æ˜¾ç¤ºä¸å…¨ï¼Œä¸‹é¢æ˜¯å®Œæ•´çš„ã€‚MAIL_SUBJECT1$&#123;PARENT_NICK&#125;ï¼Œæ‚¨åœ¨ã€Ž$&#123;SITE_NAME&#125;ã€ä¸Šçš„è¯„è®ºæ”¶åˆ°äº†å›žå¤MAIL_TEMPLATE1&lt;div style="border-radius: 10px 10px 10px 10px;font-size:13px;color: #555555;width: 666px;font-family:'Century Gothic','Trebuchet MS','Hiragino Sans GB',å¾®è½¯é›…é»‘,'Microsoft Yahei',Tahoma,Helvetica,Arial,'SimSun',sans-serif;margin:50px auto;border:1px solid #eee;max-width:100%;background: #ffffff repeating-linear-gradient(-45deg,#fff,#fff 1.125rem,transparent 1.125rem,transparent 2.25rem);box-shadow: 0 1px 5px rgba(0, 0, 0, 0.15);"&gt;&lt;div style="width:100%;background:#49BDAD;color:#ffffff;border-radius: 10px 10px 0 0;background-image: -moz-linear-gradient(0deg, rgb(67, 198, 184), rgb(255, 209, 244));background-image: -webkit-linear-gradient(0deg, rgb(67, 198, 184), rgb(255, 209, 244));height: 66px;"&gt;&lt;p style="font-size:15px;word-break:break-all;padding: 23px 32px;margin:0;background-color: hsla(0,0%,100%,.4);border-radius: 10px 10px 0 0;"&gt;æ‚¨åœ¨&lt;a style="text-decoration:none;color: #ffffff;" href="$&#123;SITE_URL&#125;"&gt;ã€Ž$&#123;SITE_NAME&#125;ã€&lt;/a&gt;ä¸Šçš„ç•™è¨€æœ‰æ–°å›žå¤å•¦ï¼ï¼ï¼&lt;/p&gt;&lt;/div&gt;&lt;div style="margin:40px auto;width:90%"&gt;&lt;p&gt;"&lt;strong&gt;$&#123;PARENT_NICK&#125;&lt;/strong&gt;" åŒå­¦ï¼Œæ‚¨æ›¾å‘è¡¨è¯„è®ºï¼š&lt;/p&gt;&lt;div style="background: #fafafa repeating-linear-gradient(-45deg,#fff,#fff 1.125rem,transparent 1.125rem,transparent 2.25rem);box-shadow: 0 2px 5px rgba(0, 0, 0, 0.15);margin:20px 0px;padding:15px;border-radius:5px;font-size:14px;color:#555555;"&gt;$&#123;PARENT_COMMENT&#125;&lt;/div&gt;&lt;p&gt;"&lt;strong&gt;$&#123;NICK&#125;&lt;/strong&gt;" ç»™æ‚¨çš„å›žå¤å¦‚ä¸‹ï¼š&lt;/p&gt;&lt;div style="background: #fafafa repeating-linear-gradient(-45deg,#fff,#fff 1.125rem,transparent 1.125rem,transparent 2.25rem);box-shadow: 0 2px 5px rgba(0, 0, 0, 0.15);margin:20px 0px;padding:15px;border-radius:5px;font-size:14px;color:#555555;"&gt;$&#123;COMMENT&#125;&lt;/div&gt;&lt;p&gt;æ‚¨å¯ä»¥ç‚¹å‡»ï¼š&lt;a style="text-decoration:none; color:#12addb" href="$&#123;POST_URL&#125;"&gt;[å›žå¤çš„å®Œæ•´å†…å®¹] &lt;/a&gt;è¿›è¡ŒæŸ¥çœ‹ã€‚æ¬¢è¿Žå†æ¬¡å…‰ä¸´&lt;a style="text-decoration:none; color:#12addb" href="$&#123;SITE_URL&#125;"&gt; ã€Ž$&#123;SITE_NAME&#125;ã€&lt;/a&gt;ï¼ï¼ï¼&lt;/p&gt;&lt;style type="text/css"&gt;a:link&#123;text-decoration:none&#125;a:visited&#123;text-decoration:none&#125;a:hover&#123;text-decoration:none&#125;a:active&#123;text-decoration:none&#125;&lt;/style&gt;&lt;/div&gt;&lt;/div&gt;MAIL_SUBJECT_ADMIN1å®å’šï¼ã€Ž$&#123;SITE_NAME&#125;ã€ä¸Šæœ‰äº†æ–°è¯„è®ºï¼MAIL_TEMPLATE_ADMIN1&lt;div style="border-radius: 10px 10px 10px 10px;font-size:13px; color: #555555;width: 666px;font-family:'Century Gothic','Trebuchet MS','Hiragino Sans GB',å¾®è½¯é›…é»‘,'Microsoft Yahei',Tahoma,Helvetica,Arial,'SimSun',sans-serif;margin:50px auto;border:1px solid #eee;max-width:100%;background: #ffffff repeating-linear-gradient(-45deg,#fff,#fff 1.125rem,transparent 1.125rem,transparent 2.25rem);box-shadow: 0 1px 5px rgba(0, 0, 0, 0.15);"&gt;&lt;div style="width:100%;background:#49BDAD;color:#ffffff;border-radius: 10px 10px 0 0;background-image: -moz-linear-gradient(0deg, rgb(67, 198, 184), rgb(255, 209, 244));background-image: -webkit-linear-gradient(0deg, rgb(67, 198, 184), rgb(255, 209, 244));height: 66px;"&gt;&lt;p style="font-size:15px;word-break:break-all;padding: 23px 32px;margin:0;background-color: hsla(0,0%,100%,.4);border-radius: 10px 10px 0 0;"&gt;æ‚¨çš„&lt;a style="text-decoration:none;color: #ffffff;" href="$&#123;SITE_URL&#125;"&gt; ã€Ž$&#123;SITE_NAME&#125;ã€ &lt;/a&gt;ä¸Šæœ‰äº†æ–°çš„è¯„è®º &lt;/p&gt;&lt;/div&gt;&lt;div style="margin:40px auto;width:90%"&gt;&lt;p&gt;&lt;strong&gt;"$&#123;NICK&#125;"&lt;/strong&gt; å‘è¡¨è¯„è®ºï¼š&lt;/p&gt;&lt;div style="background: #fafafa repeating-linear-gradient(-45deg,#fff,#fff 1.125rem,transparent 1.125rem,transparent 2.25rem);box-shadow: 0 2px 5px rgba(0, 0, 0, 0.15);margin:20px 0px;padding:15px;border-radius:5px;font-size:14px;color:#555555;"&gt;$&#123;COMMENT&#125;&lt;/div&gt;&lt;p&gt;&lt;a style="text-decoration:none; color:#12addb" href="$&#123;POST_URL&#125;" target="_blank"&gt;[æŸ¥çœ‹è¯¦æƒ…]&lt;/a&gt;&lt;/p&gt;&lt;style type="text/css"&gt;a:link&#123;text-decoration:none&#125;a:visited&#123;text-decoration:none&#125;a:hover&#123;text-decoration:none&#125;a:active&#123;text-decoration:none&#125;&lt;/style&gt;&lt;/div&gt;&lt;/div&gt;å¦‚æžœä½¿ç”¨å›½é™…ç‰ˆleancloudï¼Œé‚£ä¹ˆleancloudçš„å®šæ—¶ä»»åŠ¡è¦åšä¸€äº›è°ƒæ•´ã€‚ä¸»è¦å°±æ˜¯å°†å®˜æ–¹çš„ä»‹ç»æ—¶é—´è°ƒæ•´æˆåŒ—äº¬æ—¶åŒºçš„æ—¶é—´ã€‚12# åŒ—äº¬æ—¶é—´æ¯å¤©æ—©8ç‚¹æ£€æŸ¥è¿‡åŽ»24å°æ—¶å†…æ¼å‘çš„é€šçŸ¥é‚®ä»¶ä¸€å¹¶è¡¥å‘0 0 0 * * ?12# æ¯å¤©æ—©0ç‚¹åˆ°æ™š23ç‚¹æ¯éš”30åˆ†é’Ÿè®¿é—®äº‘å¼•æ“Ž0 0/30 0-23 * * ?Â¶4) æ•´åˆå¤šä¸ªè¯„è®ºé¢æ¿ç¼–è¾‘ /themes/next/layout/_third-party/comments/valine.swigï¼Œä¿®æ”¹å¦‚ä¸‹ï¼š123 new Valine(&#123;- el: '#comments' , + el: '#comments-valine' ,ç¼–è¾‘ themes/next/layout/_partials/comments.swigï¼Œä¿®æ”¹å¦‚ä¸‹ï¼š1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465 &#123;% elseif theme.gitment.enable %&#125; &lt;div class="comments" id="comments"&gt; &#123;% if theme.gitment.lazy %&#125; &lt;div onclick="showGitment()" id="gitment-display-button"&gt;&#123;&#123; __('gitmentbutton') &#125;&#125;&lt;/div&gt; &lt;div id="gitment-container" style="display:none"&gt;&lt;/div&gt; &#123;% else %&#125; &lt;div id="gitment-container"&gt;&lt;/div&gt; &#123;% endif %&#125; &lt;/div&gt;+ &#123;% elseif theme.gitalk.enable and theme.valine.enable %&#125;+ &lt;div class="comments" id="comments"&gt;+ &lt;div class="tablink-li"&gt;+ &lt;button class="tablink" onclick="openPage('tabs-gitalk',this)" id="defaultOpen"&gt;Gitalk&lt;/button&gt;+ &lt;button class="tablink" onclick="openPage('tabs-valine',this)"&gt;Valine&lt;/button&gt;+ &lt;/div&gt;+ &lt;div class="tabcontent-li"&gt;+ &lt;div id="tabs-gitalk" class="tabcontent"&gt;+ &lt;div id="gitalk-container"&gt;&lt;/div&gt;+ &lt;/div&gt;+ &lt;div id="tabs-valine" class="tabcontent"&gt;+ &lt;div id="comments-valine"&gt;&lt;/div&gt;+ &lt;/div&gt;+ &lt;/div&gt;+ &lt;/div&gt;+ &lt;script&gt;+ function openPage(pageName, elmnt) &#123;+ var i, tabcontent;+ tabcontent = document.getElementsByClassName("tabcontent");+ for (i = 0; i &lt; tabcontent.length; i++) &#123;+ tabcontent[i].style.display = "none";+ &#125;+ tablinks = document.getElementsByClassName("tablink");+ for (i = 0; i &lt; tablinks.length; i++) &#123;+ tablinks[i].classList.remove("currentTabcontent");+ &#125;+ document.getElementById(pageName).style.display = "block";+ elmnt.classList.add("currentTabcontent");+ &#125;+ document.getElementById("defaultOpen").click();;+ &lt;/script&gt;- &#123;% elseif theme.valine.appid and theme.valine.appkey %&#125;- &lt;div class="comments" id="comments"&gt;&lt;/div&gt;+ &#123;% elseif theme.valine.enable %&#125;+ &lt;div class="comments" id="comments"&gt;+ &lt;div id="comments-valine"&gt;&lt;/div&gt;+ &lt;/div&gt; &#123;% elseif theme.gitalk.enable %&#125; &lt;div class="comments" id="comments"&gt; &lt;div id="gitalk-container"&gt;&lt;/div&gt; &lt;/div&gt; &#123;% elseif theme.vssue.enable %&#125; &lt;div class="comments" id="comments"&gt; &lt;div id="vssue"&gt;&lt;/div&gt; &lt;/div&gt; &#123;% endif %&#125;&#123;% endif %&#125;åˆ›å»º themes/next/source/css/_custom/comments.stylæ–‡ä»¶ï¼Œå†…å®¹å¦‚ä¸‹ï¼š1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374/** * è¯„è®ºåŒºæ ·å¼ */.main-inner .comments &#123; // margin: 60px 0 20px 0; // åŽ»æŽ‰é“¾æŽ¥ä¸‹çš„ä¸‹åˆ’çº¿ a &#123; border-bottom: none; &#125; .highlight pre &#123; color: #24292e; &#125; // é˜²æ­¢ä»£ç åŒºè¾¹ç¼˜é»‘çº¿ .highlight, pre &#123; background: unset; &#125; .highlight ::selection &#123; background: #2593a6; color: #24292e; &#125; .tablink-li &#123; margin-bottom: 30px; &#125; .tabcontent-li &#123; border-top: solid 1px; &#125; .tablink &#123; float: left; border: none; outline: 0; cursor: pointer; width: 60px; color: #ddd; background-color: #60676d; &#125; .tablink:hover &#123; background-color: #222; &#125; .tabcontent &#123; display: none; &#125; .currentTabcontent &#123; background-color: #222; &#125; #tabs-valine &#123; margin: 25px; &#125; .valine &#123; .vwrap &#123; .textarea-wrapper .comment_trigger &#123; background-color: #f6f6f6; &#125; .textarea-wrapper textarea &#123; background-color: #f6f6f6; &#125; .auth-section .input-wrapper input &#123; background-color: #f6f6f6; &#125; .auth-section &#123; background-color: #f6f6f6; &#125; .auth-section .post-action button &#123; background-color: #333; &#125; &#125; &#125;&#125;âœ‰ï¸ ç”±äºŽæ•´åˆvssueçš„è¿‡ç¨‹ä¸­å‘çŽ°å•ç‹¬ä½¿ç”¨æ²¡é—®é¢˜ï¼Œä½†æ˜¯å’Œå…¶ä»–è¯„è®ºé¢æ¿åœ¨ä¸€èµ·å‘ç”Ÿå›žè°ƒåœ°å€ä¸æ­£ç¡®çš„é—®é¢˜ï¼ŒäºŽæ˜¯è¿™é‡Œæš‚ä¸”åªæ•´åˆäº†Gitalkå’ŒValineï¼Œå¦‚æžœæœ‰å°ä¼™ä¼´æ‰¾åˆ°äº†è§£å†³æ–¹æ¡ˆï¼Œæ¬¢è¿Žè”ç³»æœ¬äººï¼Œé²œèŠ±å¥‰ä¸Šï¼ðŸŒ¹Â¶4. æ·»åŠ çƒ­é—¨æ–‡ç« é¡µé¢ðŸ’â€â™‚è¯´æ˜Žï¼šè¿™é‡Œæ·»åŠ çƒ­é—¨æ–‡ç« é¡µé¢çš„åŽŸç†æ˜¯é€šè¿‡leancloudè®¿é—®ç»Ÿè®¡ç”Ÿæˆçš„æ•°æ®å®žçŽ°çš„ï¼Œæ•…éœ€è¦ç¼–è¾‘ themes/next/_config.ymlä¸»é¢˜é…ç½®æ–‡ä»¶å¼€å¯ leancloud_visitorsçš„åŠŸèƒ½ã€‚å…·ä½“æ“ä½œè¯·å‚è€ƒä¸Šæ–‡çš„â€œleancloudç»Ÿè®¡â€ã€‚åˆ›å»º themes/next/layout/top.swigæ–‡ä»¶12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152&#123;% block content %&#125; &#123;######################&#125; &#123;### LINKS BLOCK ###&#125; &#123;######################&#125; &lt;div id="top"&gt;&lt;/div&gt; &lt;!--ä¸‹è½½av-min.jsæ”¾åˆ°themes/next/source/js/srcä¸‹ï¼šhttps://code.bdstatic.com/npm/leancloud-storage@4.12.0/dist/av-min.js --&gt; &lt;script src="/js/src/av-min.js"&gt;&lt;/script&gt; &lt;script&gt; var appId = '&#123;&#123; theme.leancloud_visitors.app_id &#125;&#125;' var appKey = '&#123;&#123; theme.leancloud_visitors.app_key &#125;&#125;' var serverApi = '&#123;&#123; theme.leancloud_visitors.server_api &#125;&#125;' if(serverApi)&#123; AV.init(&#123;appId, appKey,serverURLs: serverApi&#125;); &#125;else&#123; AV.initialize(appId, appKey) &#125; var time = 0 var title = "" var url = "" var query = new AV.Query('Counter'); query.notEqualTo('id', 0); query.descending('time'); query.limit(1000); query.find().then(function (dataArray) &#123; if(!dataArray)&#123; return &#125; for (var i = 0; i &lt; dataArray.length; i++) &#123; var item = dataArray[i] var result = item.attributes; time = result.time; title = result.title; url = result.url; var content = "&lt;p&gt;" + "&lt;font color='#1C1C1C'&gt;" + "ã€æ–‡ç« çƒ­åº¦:" + time + "â„ƒã€‘" + "&lt;/font&gt;" + "&lt;a href='" + url + "'&gt;" + title + "&lt;/a&gt;" + "&lt;/p&gt;"; document.getElementById("top").innerHTML+=content &#125; &#125;, function (error) &#123; console.log("error",error); &#125;); &lt;/script&gt; &lt;style&gt; .post-description &#123; display: none; &#125; &lt;/style&gt; &#123;##########################&#125; &#123;### END LINKS BLOCK ###&#125; &#123;##########################&#125;&#123;% endblock %&#125;ðŸ’â€â™‚ æé†’ï¼šå¦‚æžœä½ çš„åšå®¢ä½¿ç”¨äº† Valine è¯„è®ºç³»ç»Ÿï¼Œé‚£ä¹ˆå¯èƒ½ä¼šæœ‰ä»£ç å†²çªé—®é¢˜ã€‚éœ€è¦ä¿®æ”¹ themes/next/layout/_third-party/comments/valine.swig åŠ å…¥ {% if page.comments %}è¿™ä¸ªåˆ¤æ–­æ¡ä»¶ï¼Œé»˜è®¤æ—§ç‰ˆçš„nextæ²¡æœ‰è¿™ä¸ªæ¡ä»¶ã€‚å¯å‚è€ƒä¸Šæ–‡â€œå¢žå¼ºç‰ˆvalineâ€ç›¸å…³ä»£ç ã€‚ç¼–è¾‘ themes/next/layout/page.swig,ä¿®æ”¹ä¸¤å¤„ä»£ç 1234567891011121314151617 &#123;% block title %&#125;&#123;# #&#125;&#123;% set page_title_suffix = ' | ' + config.title %&#125;&#123;# #&#125;&#123;% if page.type === "categories" and not page.title %&#125;&#123;# #&#125;&#123;&#123; __('title.category') + page_title_suffix &#125;&#125;&#123;# #&#125;&#123;% elif page.type === "tags" and not page.title %&#125;&#123;# #&#125;&#123;&#123; __('title.tag') + page_title_suffix &#125;&#125;&#123;# &lt;!-- å‹æƒ…é“¾æŽ¥--&gt; #&#125;&#123;% elif page.type === 'links' and not page.title %&#125;&#123;# #&#125;&#123;&#123; __('title.links') + page_title_suffix &#125;&#125;&#123;#+ &lt;!-- topé¡µé¢--&gt;+ #&#125;&#123;% elif page.type === 'top' and not page.title %&#125;&#123;#+ #&#125;&#123;&#123; __('title.top') + page_title_suffix &#125;&#125;&#123;# #&#125;&#123;% else %&#125;&#123;# #&#125;&#123;&#123; page.title + page_title_suffix &#125;&#125;&#123;# #&#125;&#123;% endif %&#125;&#123;##&#125;&#123;% endblock %&#125;12345678910111213141516171819 &#123;% elif page.type === 'categories' %&#125; &lt;div class="category-all-page"&gt; &lt;div class="category-all-title"&gt; &#123;&#123; _p('counter.categories', site.categories.length) &#125;&#125; &lt;/div&gt; &lt;div class="category-all"&gt; &#123;&#123; list_categories() &#125;&#125; &lt;/div&gt; &lt;/div&gt; &lt;!-- å‹æƒ…é“¾æŽ¥--&gt; &#123;% elif page.type === 'links' %&#125; &#123;% include 'links.swig' %&#125;+ &lt;!-- topé¡µé¢--&gt;+ &#123;% elif page.type === 'top' %&#125;+ &#123;% include 'top.swig' %&#125; &#123;% else %&#125; &#123;&#123; page.content &#125;&#125; &#123;% endif %&#125; &lt;/div&gt;åˆ›å»º myblog/source/top/index.mdæ–‡ä»¶1234567---title: æ–‡ç« é˜…è¯»é‡æŽ’è¡Œæ¦œtype: topcomments: falsekeywords: top,æ–‡ç« é˜…è¯»é‡æŽ’è¡Œæ¦œ,çƒ­æ–‡,æ–‡ç« çƒ­åº¦,çƒ­é—¨æ–‡ç« description: åšå®¢æ–‡ç« é˜…è¯»é‡æŽ’è¡Œæ¦œ---ç„¶åŽç¼–è¾‘ themes/next/_config.ymlï¼Œæ·»åŠ èœå•é¡¹12345678menu: home: / || home categories: /categories/ || th tags: /tags/ || tags archives: /archives/ || archive links: /links/ || link about: /about/ || user çƒ­æ–‡: /top/ || fireÂ¶5. æ·»åŠ åœ¨çº¿è”ç³»åŠŸèƒ½åœ¨è¿™ä½¿ç”¨çš„æ˜¯DaoVoiceåšåœ¨çº¿è”ç³»åŠŸèƒ½ã€‚é¦–å…ˆåˆ°DaoVoiceä¸Šæ³¨å†Œä¸€ä¸ªè´¦å·,æ³¨å†Œå®ŒæˆåŽä¼šå¾—åˆ°ä¸€ä¸ªapp_idï¼ŒèŽ·å–appidçš„æ­¥éª¤å¦‚ä¸‹å›¾æ‰€ç¤º:æ‰“å¼€myblog/themes/next/layout/_partials/head.swigæ–‡ä»¶æ‰¾åˆ°å¦‚ä¸‹ä»£ç ï¼š1&#123;% include &#39;head&#x2F;custom-head.swig&#39; %&#125;å¦èµ·ä¸€è¡Œæ·»åŠ å¦‚ä¸‹ä»£ç ï¼ˆå®žé™…æˆ‘å°±æ˜¯æ·»åŠ åˆ°æœ€åŽï¼‰ï¼š123456789&#123;% if theme.daovoice %&#125; &lt;script&gt; (function(i,s,o,g,r,a,m)&#123;i["DaoVoiceObject"]=r;i[r]=i[r]||function()&#123;(i[r].q=i[r].q||[]).push(arguments)&#125;,i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;a.charset="utf-8";m.parentNode.insertBefore(a,m)&#125;)(window,document,"script",('https:' == document.location.protocol ? 'https:' : 'http:') + "//widget.daovoice.io/widget/0f81ff2f.js","daovoice") daovoice('init', &#123; app_id: "&#123;&#123;theme.daovoice_app_id&#125;&#125;" &#125;); daovoice('update'); &lt;/script&gt;&#123;% endif %&#125;æ‰“å¼€ myblog/themes/next/_config.ymlä¸»é¢˜é…ç½®æ–‡ä»¶123# Online contact daovoice: truedaovoice_app_id: 33***da4 #è¿™é‡Œè¾“å…¥å‰é¢èŽ·å–çš„app_idæœ€åŽæ‰§è¡Œ hexo clean &amp;&amp; hexo g &amp;&amp; hexo s,æ‰“å¼€åšå®¢å°±èƒ½çœ‹åˆ°æ•ˆæžœäº†ã€‚å¦‚ä¸‹å›¾ï¼šå½“ç„¶ä¸ºäº†è°ƒæ•´å›¾æ ‡çš„ä½ç½®ï¼Œä½ å¯ä»¥ç™»é™†daovoiceåŽå°è¿›è¡Œä¿®æ”¹ï¼Œå¦‚ä¸‹å›¾ï¼šæœ€åŽåˆ°å³ä¸Šè§’é€‰æ‹©ç®¡ç†å‘˜ï¼Œå¾®ä¿¡ç»‘å®š,å¯ä»¥ç»‘å®šä½ çš„å¾®ä¿¡å·ï¼Œå…³æ³¨å…¬ä¼—å·åŽæ‰“å¼€å°ç¨‹åºï¼Œåœ¨å¾®ä¿¡ä¸­ç™»é™†daovoiceï¼Œå°±å¯ä»¥å®žæ—¶æ”¶å‘æ¶ˆæ¯ï¼Œæœ‰æ–°çš„æ¶ˆæ¯ä¹Ÿä¼šé€šè¿‡å¾®ä¿¡çš„å°ç¨‹åºé€šçŸ¥ï¼Œè®¾ç½®é¡µé¢å¦‚ä¸‹:Â¶é«˜çº§å®šåˆ¶ç¯‡Â¶1. è‡ªå®šä¹‰é¦–é¡µæ‘˜è¦å›¾ç‰‡å’Œæ‘˜è¦æè¿°Â¶1) æ¦‚è¿°æ–‡ç« å°é¢çš„æ„æ€å°±æ˜¯ï¼šåœ¨åšå®¢é¦–é¡µçš„æ—¶å€™ä¼šæ˜¾ç¤ºæ–‡ç« çš„å°é¢å›¾ç‰‡å’Œæ‘˜è¦æè¿°ï¼Œè¿›å…¥è¿™ç¯‡æ–‡ç« çš„è¯¦ç»†é¡µé¢åŽï¼Œå°†ä¸æ˜¾ç¤ºè¿™å¼ å›¾ç‰‡å’Œæ‘˜è¦æè¿°ã€‚å¦‚æžœæƒ³æ·»åŠ æ–‡ç« å°é¢çš„è¯ï¼Œéœ€è¦æ·»åŠ å­—æ®µå±žæ€§ï¼šsummary_imgï¼Œsummary_imgçš„å€¼æ˜¯å›¾ç‰‡çš„è·¯å¾„ã€‚å¦‚æžœæƒ³è¦æ·»åŠ æ‘˜è¦æè¿°çš„è¯ï¼Œå¯ä»¥æ·»åŠ å­—æ®µå±žæ€§ï¼šsummary_description ï¼Œsummary_description çš„å€¼æ˜¯æè¿°çš„å†…å®¹ã€‚ä¾‹å¦‚ï¼š123456789---title: CSS å„ç§Hackæ‰‹æ®µdate: 2017-06-25 03:25:24categories: å‰ç«¯tags: [CSS]comments: falsesummary_img: /images/css-hack-1.pngsummary_description: å°é¢æ‘˜è¦æè¿°ï¼Œäº†è§£ä¸€ä¸‹ï¼---Â¶2) å…·ä½“å®žçŽ°ä¿®æ”¹ myblog/themes/next/layout/_macro/post.swig æ–‡ä»¶ã€‚å°†ä»£ç ï¼š1234567891011121314&lt;!-- è‡ªå®šä¹‰æ‘˜è¦å›¾ç‰‡å¼€å§‹ --&gt; &#123;% if post.summary_img %&#125; &lt;div class="out-img-topic"&gt; &lt;img src=&#123;&#123; post.summary_img &#125;&#125; class="img-topic"&gt; &lt;/div&gt; &#123;% endif %&#125; &lt;!-- è‡ªå®šä¹‰æ‘˜è¦å›¾ç‰‡ç»“æŸ --&gt; &lt;!-- è‡ªå®šä¹‰æ‘˜è¦æè¿°å¼€å§‹ --&gt; &#123;% if post.summary_description %&#125; &lt;div class="post-button text-center"&gt; &lt;div&gt;&#123;&#123; post.summary_description &#125;&#125;&lt;/div&gt; &lt;/div&gt; &#123;% endif %&#125; &lt;!-- è‡ªå®šä¹‰æ‘˜è¦æè¿°ç»“æŸ --&gt;æ·»åŠ åˆ°ä»¥ä¸‹æ‰€ç¤ºçš„ä½ç½®12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758 &#123;% if is_index %&#125; &lt;!-- è‡ªå®šä¹‰æ‘˜è¦å›¾ç‰‡å¼€å§‹ --&gt; &#123;% if post.summary_img %&#125; &lt;div class="out-img-topic"&gt; &lt;img src=&#123;&#123; post.summary_img &#125;&#125; class="img-topic"&gt; &lt;/div&gt; &#123;% endif %&#125; &lt;!-- è‡ªå®šä¹‰æ‘˜è¦å›¾ç‰‡ç»“æŸ --&gt; &lt;!-- è‡ªå®šä¹‰æ‘˜è¦æè¿°å¼€å§‹ --&gt; &#123;% if post.summary_description %&#125; &lt;div class="post-button text-center"&gt; &lt;div&gt;&#123;&#123; post.summary_description &#125;&#125;&lt;/div&gt; &lt;/div&gt; &#123;% endif %&#125; &lt;!-- è‡ªå®šä¹‰æ‘˜è¦æè¿°ç»“æŸ --&gt; &#123;% if post.description and theme.excerpt_description %&#125; &#123;&#123; post.description &#125;&#125; &lt;!--noindex--&gt; &lt;div class="post-button text-center"&gt; &lt;a class="btn" href="&#123;&#123; url_for(post.path) &#125;&#125;"&gt; &#123;&#123; __('post.read_more') &#125;&#125; Â» &lt;/a&gt; &lt;/div&gt; &lt;!--/noindex--&gt; &#123;% elif post.excerpt %&#125; &#123;&#123; post.excerpt &#125;&#125; &lt;!--noindex--&gt; &lt;div class="post-button text-center"&gt; &lt;a class="btn" href="&#123;&#123; url_for(post.path) &#125;&#125;&#123;% if theme.scroll_to_more %&#125;#&#123;&#123; __('post.more') &#125;&#125;&#123;% endif %&#125;" rel="contents"&gt; &#123;&#123; __('post.read_more') &#125;&#125; Â» &lt;/a&gt; &lt;/div&gt; &lt;!--/noindex--&gt; &#123;% elif theme.auto_excerpt.enable %&#125; &#123;% set content = post.content | striptags %&#125; &#123;&#123; content.substring(0, theme.auto_excerpt.length) &#125;&#125; &#123;% if content.length &gt; theme.auto_excerpt.length %&#125;...&#123;% endif %&#125; &lt;!--noindex--&gt; &lt;div class="post-button text-center"&gt; &lt;a class="btn" href="&#123;&#123; url_for(post.path) &#125;&#125;&#123;% if theme.scroll_to_more %&#125;#&#123;&#123; __('post.more') &#125;&#125;&#123;% endif %&#125;" rel="contents"&gt; &#123;&#123; __('post.read_more') &#125;&#125; Â» &lt;/a&gt; &lt;/div&gt; &lt;!--/noindex--&gt; &#123;% else %&#125; &#123;% if post.type === 'picture' %&#125; &lt;a href="&#123;&#123; url_for(post.path) &#125;&#125;"&gt;&#123;&#123; post.content &#125;&#125;&lt;/a&gt; &#123;% else %&#125; &#123;&#123; post.content &#125;&#125; &#123;% endif %&#125; &#123;% endif %&#125; &#123;% else %&#125; &#123;&#123; post.content &#125;&#125; &#123;% endif %&#125;&lt;/div&gt;&#123;#####################&#125;&#123;### END POST BODY ###&#125;&#123;#####################&#125;è¿™æ ·çš„è¯ï¼Œå°±å¯ä»¥ä½¿ç”¨ summary_img: imageurl å’Œ summary_description: description demoæ¥è®¾ç½®æ–‡ç« å°é¢å’Œæ‘˜è¦æè¿°äº†ã€‚ðŸ’¡å»ºè®®ï¼šå¼€å¯äº†æ–‡ç« å°é¢å’Œæ‘˜è¦æè¿°çš„æ–‡ç« ï¼Œæˆ‘å»ºè®®å°† &lt;!-- more --&gt; æ”¾åœ¨æ–‡ç« æ­£æ–‡å†…å®¹çš„å¼€å¤´ã€‚ä¸ºäº†é€‚åº”ä¸åŒå¤§å°çš„å›¾ç‰‡ï¼Œæ‘˜è¦å›¾ç‰‡çš„æ ·å¼éœ€è¦åšä¸€ä¸‹è°ƒæ•´ã€‚åœ¨ myblog/themes/next/source/css/_custom/custom.stylä¸­æ·»åŠ ä»¥ä¸‹æ ·å¼ä»£ç ï¼š1234//ç¼©ç•¥å›¾æŒ‡å®šå®½åº¦å€¼æ˜¾ç¤ºã€‚img.img-topic &#123; width: 75%;&#125;å¦‚æžœå¸Œæœ›hexoé»˜è®¤descriptionä¹Ÿå’Œsummary_descriptionå±…ä¸­æ˜¾ç¤ºï¼ŒåŒæ ·ä¿®æ”¹ myblog/themes/next/layout/_macro/post.swig æ–‡ä»¶ã€‚æ‰¾åˆ°ä»¥ä¸‹ä»£ç ã€‚12345678910&#123;% if post.description and theme.excerpt_description %&#125; &#123;&#123; post.description &#125;&#125; &lt;!--noindex--&gt; &lt;div class="post-button text-center"&gt; &lt;a class="btn" href="&#123;&#123; url_for(post.path) &#125;&#125;"&gt; &#123;&#123; __('post.read_more') &#125;&#125; Â» &lt;/a&gt; &lt;/div&gt; &lt;!--/noindex--&gt;&#123;% elif post.excerpt %&#125;å°†ä»¥ä¸Šä»£ç æ”¹æˆï¼š123456789101112&#123;% if post.description and theme.excerpt_description %&#125; &lt;div class="post-button text-center"&gt; &lt;div&gt;&#123;&#123; post.description &#125;&#125;&lt;/div&gt; &lt;/div&gt; &lt;!--noindex--&gt; &lt;div class="post-button text-center"&gt; &lt;a class="btn" href="&#123;&#123; url_for(post.path) &#125;&#125;"&gt; &#123;&#123; __('post.read_more') &#125;&#125; Â» &lt;/a&gt; &lt;/div&gt; &lt;!--/noindex--&gt;&#123;% elif post.excerpt %&#125;Â¶3) ä¼˜åŒ–é¦–é¡µæ‘˜è¦æ ·å¼ä¸ºäº†å‡å°é¦–é¡µæ‘˜è¦æ–‡å­—çš„å¤§å°ï¼Œä½¿å¾—èƒ½å¤Ÿæ›´ç¾Žè§‚ï¼Œå¯é€šè¿‡ä¸‹é¢æ­¥éª¤ä¿®æ”¹ï¼šç¼–è¾‘ themes/next/layout/_macro/post.swigã€‚åŠ å…¥å¦‚ä¸‹divã€‚12345678910111213141516171819202122&#123;% if is_index %&#125;+ &lt;div class="index-content"&gt; &lt;!-- è‡ªå®šä¹‰æ‘˜è¦å›¾ç‰‡å¼€å§‹ --&gt; &#123;% if post.summary_img %&#125; &lt;div class="out-img-topic"&gt; &lt;img src=&#123;&#123; post.summary_img &#125;&#125; class="img-topic"&gt; &lt;/div&gt; &#123;% endif %&#125; &lt;!-- è‡ªå®šä¹‰æ‘˜è¦å›¾ç‰‡ç»“æŸ --&gt; å…¶ä»–å†…å®¹ å…¶ä»–å†…å®¹ ...... &#123;% if post.type === 'picture' %&#125; &lt;a href="&#123;&#123; url_for(post.path) &#125;&#125;"&gt;&#123;&#123; post.content &#125;&#125;&lt;/a&gt; &#123;% else %&#125; &#123;&#123; post.content &#125;&#125; &#123;% endif %&#125; &#123;% endif %&#125;+ &lt;/div&gt; &#123;% else %&#125; &#123;&#123; post.content &#125;&#125; &#123;% endif %&#125;ç„¶åŽç¼–è¾‘ themes/next/source/css/_custom/custom.stylå¹¶åŠ å…¥å¦‚ä¸‹æ ·å¼ï¼š1234// æ‘˜è¦æ–‡å­—.index-content &#123; font-size: 12px;&#125;Â¶2. ä¼˜åŒ–æ ‡ç­¾äº‘é¡µé¢æ–°å»º themes/next/layout/tag-color.swigæ–‡ä»¶ï¼Œæ‹·è´å¦‚ä¸‹å†…å®¹ï¼š12345678910111213141516171819202122232425262728293031323334 &#123;########å½©è‰²æ ‡ç­¾äº‘##########&#125;&lt;script type="text/javascript"&gt; var alltags = document.getElementsByClassName('tag-cloud-tags'); var tags = alltags[0].getElementsByTagName('a'); for (var i = 0; i &lt; tags.length; i++) &#123; //console.log(tags[i]); //é»˜è®¤nextä¼šæ ¹æ®æ–‡ç« çš„æ•°é‡ç¡®å®šaæ ‡ç­¾å­—çš„å¤§å°ï¼Œè¿™é‡ŒæŠŠå­—ä½“ä¿®æ”¹æˆç»Ÿä¸€å¤§å° tags[i].style.background = "rgb(67, 67, 67)"; tags[i].style.fontSize = "13px"; tags[i].style.color = "#ddd"; &#125;&lt;/script&gt;&lt;style&gt; .tag-cloud-tags&#123; text-align: center; counter-reset: tags; margin-bottom: 20px; &#125; .tag-cloud-tags a&#123; border-radius: 6px; padding-right: 5px; padding-left: 5px; margin: 8px 5px 0px 0px; &#125; .tag-cloud-tags a:before&#123; content: "ðŸ”–"; &#125; .tag-cloud-tags a:hover&#123; box-shadow: 0px 5px 15px 0px rgba(0,0,0,.4); transform: scale(1.1); transition-duration: 0.15s; &#125;&lt;/style&gt;åœ¨ themes/next/layout/page.swigé‡Œå¼•å…¥ tag-color.swigã€‚12345678910111213141516 &#123;# tagcloud page support #&#125; &#123;% if page.type === "tags" %&#125; &lt;div class="tag-cloud"&gt; &lt;div class="tag-cloud-title"&gt; &#123;&#123; _p('counter.tag_cloud', site.tags.length) &#125;&#125; &lt;/div&gt; &lt;div class="tag-cloud-tags"&gt; &#123;&#123; tagcloud(&#123;min_font: 12, max_font: 30, amount: 300, color: true, start_color: '#ccc', end_color: '#111'&#125;) &#125;&#125; &lt;/div&gt; &lt;/div&gt;+ &#123;########å½©è‰²æ ‡ç­¾äº‘##########&#125;+ &#123;% include 'tag-color.swig' %&#125; &#123;% elif page.type === 'categories' %&#125; &lt;div class="category-all-page"&gt;Â¶3. æ·»åŠ 404é¡µé¢æ–°å»ºæ–‡ä»¶ï¼šthemes/next/source/404.htmlï¼Œå†…å®¹å¦‚ä¸‹ï¼š123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869&lt;!DOCTYPE html&gt;&lt;html&gt; &lt;head&gt; &lt;meta charset="utf-8" /&gt; &lt;!-- æµè§ˆå™¨æ ‡ç­¾å›¾æ ‡ï¼Œæ­¤å¤„éœ€è¦åœ¨themes/next/source/imagesä¸­åŠ å…¥favicon.jpgå›¾ç‰‡ --&gt; &lt;link rel="shortcut icon" href="/images/favicon.jpg" /&gt; &lt;title&gt;404å“Ÿ&lt;/title&gt; &lt;style type="text/css"&gt; body &#123; background-color: #ececec; font-family: "Open Sans", sans-serif; font-size: 14px; color: #3c3c3c; &#125; .demo p:first-child &#123; text-align: center; font-family: cursive; font-size: 150px; font-weight: bold; line-height: 100px; letter-spacing: 5px; color: #fff; &#125; .demo p:first-child span &#123; cursor: pointer; text-shadow: 0px 0px 2px #686868, 0px 1px 1px #ddd, 0px 2px 1px #d6d6d6, 0px 3px 1px #ccc, 0px 4px 1px #c5c5c5, 0px 5px 1px #c1c1c1, 0px 6px 1px #bbb, 0px 7px 1px #777, 0px 8px 3px rgba(100, 100, 100, 0.4), 0px 9px 5px rgba(100, 100, 100, 0.1), 0px 10px 7px rgba(100, 100, 100, 0.15), 0px 11px 9px rgba(100, 100, 100, 0.2), 0px 12px 11px rgba(100, 100, 100, 0.25), 0px 13px 15px rgba(100, 100, 100, 0.3); -webkit-transition: all 0.1s linear; transition: all 0.1s linear; &#125; .demo p:first-child span:hover &#123; text-shadow: 0px 0px 2px #686868, 0px 1px 1px #fff, 0px 2px 1px #fff, 0px 3px 1px #fff, 0px 4px 1px #fff, 0px 5px 1px #fff, 0px 6px 1px #fff, 0px 7px 1px #777, 0px 8px 3px #fff, 0px 9px 5px #fff, 0px 10px 7px #fff, 0px 11px 9px #fff, 0px 12px 11px #fff, 0px 13px 15px #fff; -webkit-transition: all 0.1s linear; transition: all 0.1s linear; &#125; .demo p:not(:first-child) &#123; text-align: center; color: #666; font-family: cursive; font-size: 20px; text-shadow: 0 1px 0 #fff; letter-spacing: 1px; line-height: 2em; margin-top: -50px; &#125; &lt;/style&gt; &lt;/head&gt; &lt;body&gt; &lt;div class="demo"&gt; &lt;p&gt;&lt;span&gt;4&lt;/span&gt;&lt;span&gt;0&lt;/span&gt;&lt;span&gt;4&lt;/span&gt;&lt;/p&gt; &lt;p&gt;è¯¥é¡µé¢ä¸å­˜åœ¨(Â´ï½¥Ï‰ï½¥`)&lt;/p&gt; &lt;/div&gt; &lt;/body&gt;&lt;/html&gt;éƒ¨ç½²æœåŠ¡å™¨åŽï¼Œè®¿é—®ä¸å­˜åœ¨çš„èµ„æºæ—¶å³å¯æ‰“å¼€ 404 é¡µé¢ã€‚æ³¨æ„ï¼šä¸èƒ½é€šè¿‡æœ¬åœ° localhost è®¿é—®ï¼Œè¦éƒ¨ç½²åŽé€šè¿‡è‡ªå·±åŸŸåæ¥è®¿é—®ã€‚Â¶4. æ·»åŠ æœ€è¿‘æ–‡ç« æ ç›®ç¼–è¾‘ myblog/themes/next/layout/_macro/sidebar.swig ã€‚æ‰¾åˆ° theme.socialæ¿å—ä»£ç ï¼Œåœ¨è¯¥æ¿å—æœ€åŽçš„ endifåŽéš”ä¸€è¡Œæ·»åŠ å¦‚ä¸‹ä»£ç ã€‚123456789101112131415161718&#123;# recent posts #&#125;&#123;% if theme.recent_posts %&#125; &lt;div class="links-of-blogroll motion-element &#123;&#123; "links-of-blogroll-" + theme.recent_posts_layout &#125;&#125;"&gt; &lt;div class="links-of-blogroll-title"&gt; &lt;!-- modify icon to fire by szw --&gt; &lt;i class="fa fa-history fa-&#123;&#123; theme.recent_posts_icon | lower &#125;&#125;" aria-hidden="true"&gt;&lt;/i&gt; &#123;&#123; theme.recent_posts_title &#125;&#125; &lt;/div&gt; &lt;ul class="links-of-blogroll-list"&gt; &#123;% set posts = site.posts.sort('-date') %&#125; &#123;% for post in posts.slice('0', '5') %&#125; &lt;li class="recent_posts_li"&gt; &lt;a href="&#123;&#123; url_for(post.path) &#125;&#125;" title="&#123;&#123; post.title &#125;&#125;" target="_blank"&gt;&#123;&#123; post.title &#125;&#125;&lt;/a&gt; &lt;/li&gt; &#123;% endfor %&#125; &lt;/ul&gt; &lt;/div&gt;&#123;% endif %&#125;å†ç¼–è¾‘ myblog/themes/next/source/css/_common/components/sidebar/sidebar-blogroll.stylåœ¨æ–‡ä»¶æœ€åŽæ·»åŠ å¦‚ä¸‹æ ·å¼ä»£ç 12345678li.recent_posts_li &#123; text-align: left; display: block; word-break: keep-all; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;&#125;ç¼–è¾‘ä¸»é¢˜é…ç½®æ–‡ä»¶ myblog/themes/next/_config.yml,æ·»åŠ å¦‚ä¸‹ä»£ç ï¼š123recent_posts_title: è¿‘æœŸæ–‡ç« recent_posts_layout: blockrecent_posts: trueÂ¶5. è‡ªå®šä¹‰å‹æƒ…é“¾æŽ¥é¡µé¢Â¶æ–¹æ¡ˆ1 çº¯é™æ€æ–‡ä»¶åˆ›å»º myblog/source/links-falls/index.md12345678910111213141516171819202122232425262728293031323334353637383940414243444546---title: å‹æƒ…é“¾æŽ¥date: 2020-02-18 22:32:49no_toc: truecomments: true---&lt;!-- more --&gt;&lt;!DOCTYPE html&gt;&lt;html lang="en"&gt;&lt;head&gt; &lt;meta charset="UTF-8"&gt; &lt;link rel="stylesheet" href="/static/links-falls/link.css"&gt; &lt;script src="https://cdn.bootcss.com/jquery/3.4.1/jquery.min.js"&gt;&lt;/script&gt; &lt;script src="/static/links-falls/link.js" type="text/javascript"&gt;&lt;/script&gt;&lt;/head&gt;&lt;body&gt; &lt;div&gt; &lt;div class="links-content"&gt; &lt;div class="link-navigation"&gt;&lt;/div&gt; &lt;/div&gt; &lt;/div&gt;&lt;/body&gt;&lt;/html&gt;------&lt;div style="text-align:center;"&gt; &lt;span class="with-love" id="animate1"&gt;&lt;i class="fa fa-heart"&gt;&lt;/i&gt;&lt;/span&gt; ç•™è¨€äº’æ¢å‹é“¾é¸­ &lt;span class="with-love" id="animate2"&gt;&lt;i class="fa fa-heart"&gt;&lt;/i&gt;&lt;/span&gt;&lt;/div&gt;------&#123;% note success %&#125;## å‹é“¾æ ¼å¼- æ˜µç§°ï¼šexample- ç½‘ç«™åœ°å€ï¼šhttps://example.com- ç½‘ç«™Logoï¼šhttps://example.com/logo.jpg&#123;% endnote %&#125;åœ¨ myblog/source/static/ç›®å½•åˆ†åˆ«åˆ›å»ºæ–‡ä»¶linklist.json123456789101112[ &#123; "nickname": "example1", "avatar": "https://example.com/logo.jpg", "site": "https://example.com" &#125;, &#123; "nickname": "example2", "avatar": "https://example.com/logo.jpg", "site": "https://example.com" &#125;]æ·»åŠ å‹é“¾çš„è¯ï¼Œåªè¦åœ¨è¿™ä¸ªjsonæ–‡ä»¶é‡Œæ·»åŠ æ•°æ®å³å¯ã€‚link.js12345678910111213141516171819202122232425262728293031$(function() &#123; link = &#123; init: function() &#123; const that = this; /*åŠ è½½ linklist.json æ–‡ä»¶è·¯å¾„*/ $.getJSON("/static/links-falls/linklist.json", function(data) &#123; that.render(data); &#125;); &#125;, render: function(data) &#123; let html, nickname, avatar, site, li = ""; for (let i = 0; i &lt; data.length; i++) &#123; nickname = data[i].nickname; avatar = data[i].avatar; site = data[i].site; // å°†æ•°æ®æ‹¼æŽ¥æˆhtml li += '&lt;div class="card"&gt;' +'&lt;a href="' +site +'" target="_blank"&gt;' +'&lt;div class="thumb" style="background: url( ' + avatar +');"&gt;' +"&lt;/div&gt;" + "&lt;/a&gt;" +'&lt;div class="card-header"&gt;' +'&lt;span class="card-site-nickname"&gt;&lt;a href="' +site +'" target="_blank"&gt;' +nickname +"&lt;/a&gt;&lt;/span&gt;" +"&lt;/div&gt;" + "&lt;/div&gt;"; &#125; $(".link-navigation").append(li); &#125;, &#125;; link.init();&#125;);link.css12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576777879808182838485.links-content &#123; margin-top: 1rem;&#125;.link-navigation::after &#123; content: " "; display: block; clear: both;&#125;.card &#123; width: 60px; height: 100px; font-size: 0.5rem; padding: 0; border-radius: 4px; transition-duration: 0.15s; margin-bottom: 1rem; display: block; float: left; box-shadow: 0 2px 6px 0 rgba(0, 0, 0, 0.12); background: #f5f5f5;&#125;.card &#123; margin-left: 16px;&#125;.card &#123; margin-right: 16px;&#125;.card:hover &#123; transform: scale(1.1); box-shadow: 0 2px 6px 0 rgba(0, 0, 0, 0.12), 0 0 6px 0 rgba(0, 0, 0, 0.04);&#125;.card .thumb &#123; width: 100%; height: 0; border-radius: 50%; padding-bottom: 100%; background-size: 100% 100% !important;&#125;.posts-expand .post-body img &#123; margin: 0; padding: 0; border: 0;&#125;.card .card-header &#123; display: block; text-align: center; padding: 1rem 0.25rem; font-weight: 500; color: #333; white-space: normal;&#125;.card .card-header a &#123; font-style: normal; color: #2bbc8a; font-weight: 700; text-decoration: none; border: 0;&#125;.card .card-header a:hover &#123; color: #d480aa; text-decoration: none; border: 0;&#125;.card-site-nickname &#123; white-space: nowrap; /*å¼ºåˆ¶spanä¸æ¢è¡Œ*/ display: inline-block; /*å°†spanå½“åšå—çº§å…ƒç´ å¯¹å¾…*/ width: 100%; /*é™åˆ¶å®½åº¦*/ overflow: hidden; /*è¶…å‡ºå®½åº¦éƒ¨åˆ†éšè—*/ text-overflow: ellipsis; /*è¶…å‡ºéƒ¨åˆ†ä»¥ç‚¹å·ä»£æ›¿*/ line-height: 0.9; /*æ•°å­—ä¸Žä¹‹å‰çš„æ–‡å­—å¯¹é½*/&#125;.card-site-nickname:hover &#123; overflow: visible; /* å†…å®¹æ˜¾ç¤ºåœ¨å…ƒç´ æ¡†å¤–é¢ */&#125;éœ€è¦åœ¨ myblog/_config.ymlä¸­æ·»åŠ å¦‚ä¸‹é…ç½®ï¼Œè¡¨ç¤ºä¸è¿›è¡Œæ¸²æŸ“çš„ç›®å½•æˆ–è€…æ–‡ä»¶12skip_render: - static/**æœ€åŽä¿®æ”¹ä¸»é¢˜é…ç½®æ–‡ä»¶ themes/next/_config.xmlæ–‡ä»¶ï¼ŒæŠŠé“¾æŽ¥åŠ å…¥åˆ°èœå•æ 1234567menu: home: / || home categories: /categories/ || th tags: /tags/ || tags archives: /archives/ || archive+ links: /links-falls/ || link about: /about/ || useræ•ˆæžœï¼šÂ¶æ–¹æ¡ˆ2 æ¨¡æ¿å¼•æ“Žswigæ–°å»º themes/next/layout/links.swigæ–‡ä»¶ï¼Œå¹¶å¤åˆ¶ç²˜è´´ä»¥ä¸‹å†…å®¹123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198199200201202203204205206207208209210211212213214215216217&#123;% block content %&#125; &#123;######################&#125; &#123;### LINKS BLOCK ###&#125; &#123;######################&#125; &lt;div id="links"&gt; &lt;style&gt; div#links &#123; margin-top: 20px; &#125; .card &#123; /* ä¸¤åˆ— */ /* width: 35%; padding: 10px 20px; */ /* ä¸‰åˆ— */ width: 30%; padding: 10px 11px; margin: auto 6px; /* å››åˆ— */ /* width: 20%; padding: 10px 20px; */ font-size: 1rem; border-radius: 4px; transition-duration: 0.15s; box-shadow: 0px 0px 3px 0px rgba(0, 0, 0, 0.12); margin-bottom: 1rem; background: #f5f5f5; display: flex; float: left; &#125; /* pc ç¼©æ”¾100% */ @media (min-width: 1600px) &#123; .card&#123; width: 29%; &#125; &#125; /* pc ç¼©æ”¾125%*/ @media (min-width: 1024px) &#123; .main-inner &#123; width: 1024px; &#125; .links-content &#123; margin-top: 1rem; width: 100%; &#125; .link-navigation::after &#123; content: " "; display: block; clear: both; &#125; /* .card:nth-child(odd) &#123; float: left; &#125; .card:nth-child(even) &#123; float: right; &#125; */ &#125; /* ipad pro */ @media (max-width: 1024px) &#123; .card &#123; width: 30%; padding: 10px 11px; margin: 0 6px 1rem 6px; &#125; &#125; @media (max-width: 1023px) &#123; .main-inner &#123; width: unset; &#125; .card &#123; margin-left: 5rem; width: 85%; &#125; .links-content &#123; width: unset; &#125; .card:nth-child(odd) &#123; float: none; &#125; .card:nth-child(even) &#123; float: none; &#125; &#125; /* ipad */ @media (max-width: 768px) &#123; .card &#123; margin-left: 4rem; width: 80%; &#125; &#125; /* iphone7/7 plus */ @media (max-width: 767px) &#123; .card &#123; margin-left: 2rem; width: 76%; &#125; &#125; /* iphone 5/se */ @media (max-width: 320px) &#123; .card &#123; margin-left: 1rem; width: 82%; &#125; &#125; .card:hover &#123; /* transform: scale(1.1); */ box-shadow: 0 2px 6px 0 rgba(0, 0, 0, 0.12), 0 0 6px 0 rgba(0, 0, 0, 0.04); &#125; .card a &#123; border: none; &#125; .card .ava &#123; width: 3rem !important; height: 3rem !important; margin: 0 !important; margin-right: 1em !important; border-radius: 50%; &#125; .card .card-header &#123; font-style: italic; overflow: hidden; width: 100%; &#125; .card .card-header a &#123; font-style: normal; font-weight: bold; text-decoration: none; &#125; .card .card-header a:hover &#123; color: #222; text-decoration: none; &#125; .card .card-header .info &#123; font-style: normal; color: #a3a3a3; font-size: 12px; min-width: 0; overflow: hidden; white-space: nowrap; text-overflow: ellipsis; &#125; span.focus-links &#123; font-style: normal; margin-left: 10px; position: unset; left: 0; padding: 0 7px 0 5px; font-size: 11px; border-radius: 40px; line-height: 24px; height: 22px; color: #fff !important; background-color: #555; display: inline-block; &#125; span.focus-links:hover &#123; background-color: #222; &#125; .friends-btn &#123; text-align: center; color: #555 !important; background-color: #fff; border-radius: 3px; font-size: 15px; box-shadow: inset 0 0 10px 0 rgba(0, 0, 0, 0.35); border: none !important; transition-property: unset; padding: 0 15px; margin: inherit; &#125; .friends-btn:hover &#123; color: rgb(255, 255, 255) !important; border-radius: 3px; font-size: 15px; box-shadow: inset 0px 0px 10px 0px rgba(0, 0, 0, 0.35); background-image: linear-gradient( 90deg, #a166ab 0%, #ef4e7b 25%, #f37055 50%, #ef4e7b 75%, #a166ab 100% ); margin: inherit; &#125; &lt;/style&gt; &lt;div class="links-content"&gt; &lt;div class="link-navigation"&gt; &#123;% for link in theme.mylinks %&#125; &lt;div class="card"&gt; &lt;img class="ava" src="&#123;&#123; link.avatar &#125;&#125;" style="border: none"/&gt; &lt;div class="card-header"&gt; &lt;div&gt;&lt;a href="&#123;&#123; link.site &#125;&#125;" target="_blank"&gt; &#123;&#123; link.nickname &#125;&#125;&lt;/a&gt; &lt;a href="&#123;&#123; link.site &#125;&#125;"&gt;&lt;span class="focus-links"&gt;å…³æ³¨&lt;/span&gt;&lt;/a&gt;&lt;/div&gt; &lt;div class="info" title="&#123;&#123; link.info &#125;&#125;"&gt;&#123;&#123; link.info &#125;&#125;&lt;/div&gt; &lt;/div&gt; &lt;/div&gt; &#123;% endfor %&#125; &lt;/div&gt; &#123;&#123; page.content &#125;&#125; &lt;/div&gt; &lt;/div&gt; &#123;##########################&#125; &#123;### END LINKS BLOCK ###&#125; &#123;##########################&#125;&#123;% endblock %&#125;ç„¶åŽä¿®æ”¹ themems/next/layout/page.swigæ–‡ä»¶ï¼Œæ ¹æ®ä¸Šä¸‹æ–‡æ‰¾åˆ°ç›¸å…³ä½ç½®ç„¶åŽæ·»åŠ å¦‚ä¸‹ä¸¤å¤„ +å·ç›¸å…³çš„å†…å®¹ã€‚1234567891011121314 &#123;% block title %&#125;&#123;# #&#125;&#123;% set page_title_suffix = ' | ' + config.title %&#125;&#123;# #&#125;&#123;% if page.type === "categories" and not page.title %&#125;&#123;# #&#125;&#123;&#123; __('title.category') + page_title_suffix &#125;&#125;&#123;# #&#125;&#123;% elif page.type === "tags" and not page.title %&#125;&#123;# #&#125;&#123;&#123; __('title.tag') + page_title_suffix &#125;&#125;&#123;#+ &lt;!-- å‹æƒ…é“¾æŽ¥--&gt;+ #&#125;&#123;% elif page.type === 'links' and not page.title %&#125;&#123;#+ #&#125;&#123;&#123; __('title.links') + page_title_suffix &#125;&#125;&#123;# #&#125;&#123;% else %&#125;&#123;# #&#125;&#123;&#123; page.title + page_title_suffix &#125;&#125;&#123;# #&#125;&#123;% endif %&#125;&#123;##&#125;&#123;% endblock %&#125;12345678910111213141516 &#123;% elif page.type === 'categories' %&#125; &lt;div class="category-all-page"&gt; &lt;div class="category-all-title"&gt; &#123;&#123; _p('counter.categories', site.categories.length) &#125;&#125; &lt;/div&gt; &lt;div class="category-all"&gt; &#123;&#123; list_categories() &#125;&#125; &lt;/div&gt; &lt;/div&gt;+ &lt;!-- å‹æƒ…é“¾æŽ¥--&gt;+ &#123;% elif page.type === 'links' %&#125;+ &#123;% include 'links.swig' %&#125; &#123;% else %&#125; &#123;&#123; page.content &#125;&#125; &#123;% endif %&#125; &lt;/div&gt;æ–°å»º hexo/source/links/index.mdå‹é“¾æ–‡ä»¶ï¼Œåœ¨æ ‡é¢˜å¤´ä¸­å†™å…¥ type = &quot;links&quot; è¿™ä¸ªå±žæ€§å¤´ï¼Œå¦‚ä¸‹ï¼š12345678910111213141516171819202122232425262728---title: å‹æƒ…é“¾æŽ¥date: 2018-10-05 22:39:06no_toc: truecomments: truetype: "links"---------&lt;div style="text-align:center;"&gt; &lt;span class="with-love" id="animate1"&gt;&lt;i class="fa fa-heart"&gt;&lt;/i&gt;&lt;/span&gt; ç•™è¨€äº’æ¢å‹é“¾é¸­ &lt;span class="with-love" id="animate2"&gt;&lt;i class="fa fa-heart"&gt;&lt;/i&gt;&lt;/span&gt;&lt;/div&gt;------&#123;% note default %&#125;### å‹é“¾æ ¼å¼- æ˜µç§°ï¼šexample- é“¾æŽ¥ï¼šhttps://example.com- å¤´åƒï¼šhttps://example.com/logo.jpg- æè¿°ï¼šPeace &amp; Love ! Learning to think independently !&#123;% endnote %&#125;ä¿®æ”¹ä¸»é¢˜é…ç½®æ–‡ä»¶ themes/next/_config.xmlæ–‡ä»¶ï¼ŒæŠŠé“¾æŽ¥åŠ å…¥åˆ°èœå•æ 1234567menu: home: / || home categories: /categories/ || th tags: /tags/ || tags archives: /archives/ || archive+ links: /links/ || link about: /about/ || useræœ€åŽï¼Œæ·»åŠ å‹é“¾çš„è¯ï¼Œåªè¦åœ¨ä¸»é¢˜é…ç½®æ–‡ä»¶ themes/next/_config.xmlæ–‡ä»¶æœ«å°¾æ·»åŠ ç›¸å…³å‹æƒ…ä¿¡æ¯å³å¯ï¼š12345678910# å‹æƒ…é“¾æŽ¥mylinks: - nickname: example1 # æ˜µç§° avatar: https://example.com/logo.jpg # å¤´åƒåœ°å€ site: https://example.com #å‹é“¾åœ°å€ info: Peace &amp; Love ! Learning to think independently ! - nickname: example2 avatar: https://example.com/logo.jpg site: https://example.com info: Peace &amp; Love ! Learning to think independently !æ•ˆæžœï¼šÂ¶6. ä¼˜åŒ–å’Œç¾ŽåŒ–ä»£ç å—Â¶6.1 æ·»åŠ ä»£ç å—å…¨é€‰å¤åˆ¶åŠŸèƒ½ä¸‹è½½ç¬¬ä¸‰æ–¹æ’ä»¶ï¼šclipboard.js, æˆ–è€…ç›´æŽ¥ä¸‹è½½ (å³é”®å¦å­˜ä¸º)ã€‚ä¿å­˜ clipboard.min.jsæ–‡ä»¶åˆ° theme/next/source/js/src ä¸‹ã€‚ç„¶åŽåœ¨ theme/next/source/js/src ç›®å½•ä¸‹ï¼Œåˆ›å»º clipboard-use.jsï¼Œæ·»åŠ å†…å®¹å¦‚ä¸‹ï¼š123456789101112131415161718192021222324/*é¡µé¢è½½å…¥å®ŒæˆåŽï¼Œåˆ›å»ºå¤åˆ¶æŒ‰é’®*/!(function(e, t, a) &#123; var initCopyCode = function() &#123; var copyHtml ='&lt;button class="btn-copy" data-clipboard-snippet=""&gt;&lt;i class="fa fa-clipboard"&gt;&lt;/i&gt;&lt;/button&gt;'; $(".highlight .code pre").before(copyHtml); var clipboard = new ClipboardJS(".btn-copy", &#123; target: function(trigger) &#123; return trigger.nextElementSibling; &#125; &#125;); clipboard.on("success", function(e) &#123; var button = e.trigger; var iElement = button.querySelector("i"); iElement.className = "fa fa-check"; button.onmouseleave = function(ev) &#123; e.clearSelection(); setTimeout(function() &#123; iElement.className = "fa fa-clipboard"; &#125;, 1000); &#125;; &#125;); &#125;; initCopyCode();&#125;)(window, document);åœ¨ theme/next/source/css/_custom/custom.styl æ ·å¼ä¸­æ·»åŠ å¦‚ä¸‹ä»£ç ï¼š1234567891011121314151617181920212223242526272829303132333435363738394041//ä»£ç å—å¤åˆ¶æŒ‰é’®.highlight&#123; //æ–¹ä¾¿copyä»£ç æŒ‰é’®ï¼ˆbtn-copyï¼‰çš„å®šä½ position: relative;&#125;.btn-copy &#123; display: inline-block; cursor: pointer; background-color: #eee; background-image: linear-gradient(#fcfcfc,#eee); border: 1px solid #d5d5d5; border-radius: 3px; -webkit-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none; -webkit-appearance: none; font-size: 13px; font-weight: 700; line-height: 20px; color: #333; -webkit-transition: opacity .3s ease-in-out; -o-transition: opacity .3s ease-in-out; transition: opacity .3s ease-in-out; padding: 2px 6px; //å›ºå®šåœ¨ä»£ç å—çš„å³ä¸Šè§’,çˆ¶relative+å­fixed==&gt;çˆ¶relative+å­absolute,è¿™é‡Œå¯ä»¥æ ¹æ®è‡ªå·±çš„æƒ…å†µåšè°ƒæ•´fixedæˆ–è€…absolute //çˆ¶relative+å­fixed position: fixed; margin-top: 2px; //çˆ¶relative+å­absolute //position: absolute; //top: 5px; right: 5px; opacity: 0;&#125;.btn-copy span &#123; margin-left: 5px;&#125;.highlight:hover .btn-copy&#123; opacity: 1;&#125;åœ¨ themes/next/layout/_layout.swig æ–‡ä»¶ä¸­å¼•ç”¨ï¼ˆ&lt;/body&gt;ï¼‰ä¹‹å‰æ·»åŠ ï¼š123&lt;!-- æ·»åŠ ä»£ç å—å…¨é€‰å¤åˆ¶åŠŸèƒ½ --&gt;&lt;script type="text/javascript" src="/js/src/clipboard.min.js"&gt;&lt;/script&gt; &lt;script type="text/javascript" src="/js/src/clipboard-use.js"&gt;&lt;/script&gt;Â¶6.2 æ·»åŠ macä»£ç é¢æ¿åˆ›å»º themes/next/scripts/codeblock.jsæ–‡ä»¶1234567891011121314151617181920var attributes = [ 'autocomplete="off"', 'autocorrect="off"', 'autocapitalize="off"', 'spellcheck="false"', 'contenteditable="true"']var attributesStr = attributes.join(' ')hexo.extend.filter.register('after_post_render', function (data) &#123; var patt = /&lt;figure class="highlight(\s?)([a-zA-Z]*)"&gt;.*?&lt;\/figure&gt;/; while (patt.test(data.content)) &#123; data.content = data.content.replace(patt, function () &#123; var language = RegExp.$2 || 'plain' var lastMatch = RegExp.lastMatch lastMatch = lastMatch.replace('&lt;figure class="highlight', '&lt;figure class="iseeu highlight') return '&lt;div class="highlight-wrap"' + attributesStr + 'data-rel="' + language.toUpperCase() + '"&gt;' + lastMatch + '&lt;/div&gt;' &#125;) &#125; return data&#125;)åˆ›å»º themes/next/source/css/_custom/macPanel.stylæ–‡ä»¶12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849// mac Panelæ•ˆæžœä»£ç å—ç›¸å…³.highlight-wrap[data-rel] &#123; position: relative; overflow: hidden; border-radius: 5px; box-shadow: 0 10px 30px 0px rgba(0, 0, 0, 0.4); margin: 35px 0; margin-top: 10px; margin-bottom: 25px; &amp;::before &#123; color: white; content: attr(data-rel); height: 38px; line-height: 38px; background: #21252b; color: #fff; font-size: 16px; position: absolute; top: 0; left: 0; width: 100%; //font-family: 'Source Sans Pro', sans-serif; font-weight: bold; padding: 0px 80px; text-indent: 15px; float: left; &#125; &amp;::after &#123; content: ' '; position: absolute; -webkit-border-radius: 50%; border-radius: 50%; background: #fc625d; width: 12px; height: 12px; top: 0; left: 20px; margin-top: 13px; -webkit-box-shadow: 20px 0px #fdbc40, 40px 0px #35cd4b; box-shadow: 20px 0px #fdbc40, 40px 0px #35cd4b; z-index: 3; &#125;&#125;.highlight, pre &#123; margin-bottom: unset; margin-top: 35px;&#125;ä¿®æ”¹ themes/next/source/css/_custom/custom.stylï¼Œåœ¨æœ€åŽè¿½åŠ å¦‚ä¸‹ï¼š1@require "macPanel"Â¶6.3 macä»£ç é¢æ¿æ•´åˆå…¨é€‰å¤åˆ¶æŒ‰é’®ä¸ºäº†å®žçŽ°è¿™ä¸ªæ•´åˆï¼Œæˆ‘å¯çœŸæ˜¯èŠ±äº†ä¸å°‘æ—¶é—´ï¼Œé—®äº†å¾ˆå¤šå…¶ä»–åšä¸»ï¼Œä½†éƒ½æ— æžœï¼ŒåŽæ¥å‘çŽ°æœ€æ–°ç‰ˆçš„nextå…¶å®žå·²ç»å®žçŽ°äº†è¿™ä¸ªæ•´åˆçš„åŠŸèƒ½ï¼Œä½†æ˜¯å¾ˆé—æ†¾çš„æ˜¯æˆ‘åšå®¢çš„nextè¿˜æ˜¯æ¯”è¾ƒæ—§çš„ç‰ˆæœ¬ï¼Œæ²¡åŠžæ³•ç›´æŽ¥é…ç½®å®žçŽ°ã€‚ç´¢æ€§æˆ‘ç›´æŽ¥åŽ»ä¸‹è½½äº†æœ€æ–°ç‰ˆçš„nextè¿›è¡Œç ”ç©¶ï¼Œé€šè¿‡ä¸€ç•ªè¾ƒåŠ²åŽï¼Œæˆ‘ç»ˆäºŽåšå‡ºæ¥äº†ï¼Œä¸‹é¢å¥‰ä¸Šæ•™ç¨‹ï¼šÂ¶è°ƒæ•´è¯´æ˜Žå¦‚æžœæ˜¯æŒ‰ç…§ä¸Šæ–‡æ­¥éª¤ä¸€æ­¥ä¸€æ­¥å®žçŽ°ä¸‹æ¥çš„ï¼Œé‚£ä¹ˆä¸ºäº†å®žçŽ°æ•´åˆï¼Œè¿˜å¾—åšä»¥ä¸‹è°ƒæ•´ã€‚å¦‚æžœæ²¡æœ‰ç»è¿‡ä»¥ä¸Šæ­¥éª¤ï¼Œå¯ä»¥ç›´æŽ¥è·³åˆ°ç¬¬2ç‚¹ã€‚ç”±äºŽmacé¢æ¿ç›´æŽ¥æ•´åˆäº†ä»£ç å…¨é€‰å¤åˆ¶æŒ‰é’®ï¼Œæ‰€ä»¥å¯ä»¥æŠŠä¸‹é¢è¿™äº›æ–‡ä»¶åˆ é™¤æŽ‰themes/next/source/js/src/clipboard-use.jsthemes/next/source/css/_custom/macPanel.stylthemes/next/scripts/codeblock.jsæ­¤å¤–è¿˜è¦åšä¸€äº›ä¿®æ”¹ï¼Œåˆ é™¤æŽ‰ä»¥ä¸‹æ–‡ä»¶çš„ç›¸å…³ä»£ç ï¼šæ–‡ä»¶1ï¼šthemes/next/layout/_layout.swig123&lt;!-- æ·»åŠ ä»£ç å—å…¨é€‰å¤åˆ¶åŠŸèƒ½ --&gt;&lt;script type="text/javascript" src="/js/src/clipboard.min.js"&gt;&lt;/script&gt; &lt;script type="text/javascript" src="/js/src/clipboard-use.js"&gt;&lt;/script&gt;æ–‡ä»¶2ï¼šthemes/next/source/css/_custom/custom.styl1234567891011121314151617181920212223242526272829303132333435363738394041//ä»£ç å—å¤åˆ¶æŒ‰é’®.highlight&#123; //æ–¹ä¾¿copyä»£ç æŒ‰é’®ï¼ˆbtn-copyï¼‰çš„å®šä½ position: relative;&#125;.btn-copy &#123; display: inline-block; cursor: pointer; background-color: #eee; background-image: linear-gradient(#fcfcfc,#eee); border: 1px solid #d5d5d5; border-radius: 3px; -webkit-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none; -webkit-appearance: none; font-size: 13px; font-weight: 700; line-height: 20px; color: #333; -webkit-transition: opacity .3s ease-in-out; -o-transition: opacity .3s ease-in-out; transition: opacity .3s ease-in-out; padding: 2px 6px; //å›ºå®šåœ¨ä»£ç å—çš„å³ä¸Šè§’,çˆ¶relative+å­fixed==&gt;çˆ¶relative+å­absolute,è¿™é‡Œå¯ä»¥æ ¹æ®è‡ªå·±çš„æƒ…å†µåšè°ƒæ•´fixedæˆ–è€…absolute //çˆ¶relative+å­fixed position: fixed; margin-top: 2px; //çˆ¶relative+å­absolute //position: absolute; //top: 5px; right: 5px; opacity: 0;&#125;.btn-copy span &#123; margin-left: 5px;&#125;.highlight:hover .btn-copy&#123; opacity: 1;&#125;1@require "macPanel"Â¶æ•´åˆæ­¥éª¤æ–°å¢žæ•´åˆçš„jsé€»è¾‘ä»£ç ï¼šthemes/next/source/js/src/highlight-wrap.js1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253/** * @author qcmoke * @description "macé¢æ¿"å’Œ"ä»£ç å…¨é€‰å¤åˆ¶" * @Dependencies https://github.com/zenorocha/clipboard.js * @version 2.0 */function initMacPanel() &#123; var highlights = $(".highlight").not(".gist .highlight"); for (var i = 0; i &lt; highlights.length; i++) &#123; var figure = $(highlights[i]); var css = figure.attr("class"); var patt = /highlight(\s?)([a-zA-Z]*)/; patt.test(css); //å¾—åˆ°ç¬¬äºŒä¸ªå°æ‹¬å·çš„å†…å®¹ï¼Œå¦‚æžœä¸ºç©ºï¼Œåˆ™è®¾ç½®ä¸ºplain var language = RegExp.$2 || "plain"; var newDiv = $("&lt;div&gt;") .attr("data-rel", language.toUpperCase()) .addClass("highlight-wrap"); var wrap = figure.wrap(newDiv); wrap.before( '&lt;button class="copy-btn" data-clipboard-snippet=""&gt;&lt;i class="fa fa-clipboard"&gt;&lt;/i&gt;&lt;/button&gt;' ); &#125;&#125;function initClipboard() &#123; var clipboard = new ClipboardJS(".copy-btn", &#123; target: function(trigger) &#123; //return trigger.nextElementSibling;//è¿”å›žå¤åˆ¶æŒ‰é’®ä¸‹ä¸€ä¸ªåˆ—è¡¨é€‰é¡¹çš„ HTML å†…å®¹ ///è¿”å›žå¤åˆ¶æŒ‰é’®æ‰€åœ¨domä¸‹å«æœ‰classä¸ºcodeçš„ç¬¬ä¸€ä¸ªdomå¯¹è±¡(å¯ä»¥é˜²æ­¢å¤åˆ¶figcaptionçš„å†…å®¹) var wrap = trigger.parentElement; var code = wrap.querySelector(".code"); return code; &#125; &#125;); clipboard.on("success", function(e) &#123; var button = e.trigger; var iElement = button.querySelector("i"); iElement.className = "fa fa-check"; button.onmouseleave = function(ev) &#123; e.clearSelection(); setTimeout(function() &#123; iElement.className = "fa fa-clipboard"; &#125;, 1000); &#125;; &#125;);&#125;$(document).ready(function() &#123; initMacPanel(); initClipboard();&#125;);ä¿®æ”¹é¡µé¢æ¨¡æ¿å¼•æ“Žæ–‡ä»¶ï¼šthemes/next/layout/_scripts/pages/post-details.swigï¼Œåœ¨æœ€åŽè¿½åŠ å¦‚ä¸‹ä»£ç ä»¥å¼•å…¥ç¬¬ä¸‰æ–¹æ’ä»¶ä¾èµ– clipboard.min.jså’Œä»¥ä¸Šçš„ highlight-wrap.jsã€‚123&lt;!-- ä»£ç å—åŒ…è£¹é¢æ¿=macé¢æ¿+ä»£ç å—å…¨é€‰å¤åˆ¶æŒ‰é’® --&gt;&lt;script type="text/javascript" src="&#123;&#123; url_for(theme.js) &#125;&#125;/src/clipboard.min.js?v=&#123;&#123; theme.version &#125;&#125;"&gt;&lt;/script&gt;&lt;script type="text/javascript" src="&#123;&#123; url_for(theme.js) &#125;&#125;/src/highlight-wrap.js?v=&#123;&#123; theme.version &#125;&#125;"&gt;&lt;/script&gt;ç¬¬ä¸‰æ–¹æ’ä»¶ï¼šclipboard.js, æˆ–è€…ç›´æŽ¥ä¸‹è½½ (å³é”®å¦å­˜ä¸º)ã€‚å¦‚æžœä¹‹å‰æ²¡æœ‰ä¸‹è½½clipboard.min.jsï¼Œé‚£ä¹ˆéœ€è¦ä¸‹è½½å¹¶ä¿å­˜ clipboard.min.jsæ–‡ä»¶åˆ° theme/next/source/js/src ä¸‹æ–°å¢žæ•´åˆçš„è‡ªå®šä¹‰æ ·å¼æ–‡ä»¶ï¼šthemes/next/source/css/_custom/highlight-wrap.styl123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118/** * @author qcmoke * @description "macé¢æ¿"å’Œ"ä»£ç å…¨é€‰å¤åˆ¶"æ ·å¼ * @version 2.0 * * tips: ä¿®æ”¹hexo nextä¸»é¢˜é…ç½®æ–‡ä»¶ï¼Œè®¾ç½®ä»£ç é«˜äº®highlight_themeä¸ºnight eighties */.highlight-wrap &#123; position: relative;&#125;.highlight-wrap:hover .copy-btn, .highlight-wrap .copy-btn:focus &#123; opacity: 1;&#125;.copy-btn &#123; position: absolute; top: 2px; right: 2px; display: inline-block; padding: 2px 6px; outline: 0; border: none; background: inherit; color: #dfe2e5; vertical-align: middle; white-space: nowrap; font-weight: 600; font-size: 14px; line-height: 16px; opacity: 0; cursor: pointer; transition: opacity .3s ease-in-out; user-select: none;&#125;.highlight-wrap &#123; margin-bottom: 1.6em; padding-top: 30px; border-radius: 5px; background: #21252b; box-shadow: 0 10px 30px 0 rgba(0, 0, 0, .4); &amp;::before &#123; position: absolute; top: 1px; padding: 0 80px; color: #fff; content: attr(data-rel); font-weight: 700; font-size: 14px; &#125; .highlight &#123; margin: 0 !important; border-radius: 0 0 5px 5px; &amp;::before &#123; position: absolute; left: 12px; margin-top: -20px; width: 12px; height: 12px; border-radius: 50%; background: #fc625d; box-shadow: 20px 0 #fdbc40, 40px 0 #35cd4b; content: ' '; &#125; // ä»£ç é€‰ä¸­æ—¶çš„æ ·å¼ ::selection &#123; background: #2593a6; color: #fff; &#125; // ä»£ç å—æ ‡é¢˜æ  figcaption &#123; margin: 0; padding: 0 .5em .35em; padding-right: 8px; padding-left: 27px; border-bottom: 1px solid #111; background-color: #21252b; color: #999; font-style: italic; line-height: 1em; a &#123; float: right; color: #2770c3; &#125; a:hover &#123; border-bottom: 1px solid #d9534f; color: #d9534f; &#125; &#125; // é˜²æ­¢è°ƒè¯•ä»£ç å—å†…è¾¹æ¡†å‡ºçŽ°ç™½çº¿çš„é—®é¢˜ table&gt;tbody&gt;tr:nth-of-type(odd) &#123; background-color: unset; &#125; .code &#123; +mobile() &#123; //background: #2593a6; color: #fff; &#125; &#125; // æ“ä½œç³»ç»Ÿè®¾ç½®ç¼©æ”¾æ¯”ä¾‹æ¯”è¾ƒå¤§çš„æ—¶å€™é€‚å½“è°ƒæ•´ä»£ç å­—ä½“å˜å¤§ @media (min-width: 1600px) &#123; pre &#123; font-size: 14px; &#125; &#125; &#125;&#125;ä¿®æ”¹ä¸»é¢˜è‡ªå®šä¹‰æ ·å¼æ–‡ä»¶ï¼šthemes/next/source/css/_custom/custom.stylï¼Œåœ¨æœ€åŽè¿½åŠ å¦‚ä¸‹ä»£ç ä»¥å¼•å…¥æ•´åˆçš„æ ·å¼ï¼š1@require "highlight-wrap"ðŸ’â€â™‚æ¸©é¦¨æç¤ºï¼šcustom.stylä¸­æœ€å¥½ä¸è¦å‡ºçŽ°å…¶ä»–ä¸Žé«˜äº®æœ‰å…³çš„æ ·å¼ï¼Œå¦‚æžœå­˜åœ¨çš„è¯å¯èƒ½ä¼šä¸Žä¸Šé¢çš„æ ·å¼å†²çªã€‚å¦‚æžœå‘çŽ°æœ€ç»ˆæ•ˆæžœä¸ç†æƒ³ï¼Œå¯ä»¥å°è¯•åœ¨custom.stylä¸­æ³¨é‡ŠæŽ‰å†²çªçš„cssä»£ç ã€‚å»ºè®®ä¿®æ”¹hexo nextä¸»é¢˜é…ç½®æ–‡ä»¶ï¼Œè®¾ç½®ä»£ç é«˜äº® highlight_themeä¸º night eightiesï¼Œè¿™æ ·æ•ˆæžœä¼šæ›´å¥½ã€‚æ•ˆæžœï¼šÂ¶7. æ·»åŠ æš—é»‘æ¨¡å¼æ”¯æŒç¼–è¾‘ themes/next/layout/_scripts/vendors.swigæ–‡ä»¶ï¼Œåœ¨æœ€æ–‡ä»¶åº•éƒ¨åŠ å…¥å¦‚ä¸‹ä»£ç 1234567891011121314151617181920212223242526&lt;!-- æš—é»‘æ¨¡å¼ --&gt;&lt;i id="darkmode" class="fa fa-lightbulb-o" aria-hidden="true"&gt;&lt;/i&gt;&lt;script&gt;// ä¾æ¬¡åˆ¤æ–­ ç³»ç»Ÿæš—é»‘æ¨¡å¼ ç¼“å­˜ darkvar body = $("body")var darkmode = $("#darkmode")if (matchMedia("(prefers-color-scheme: dark)").matches ||localStorage.getItem("darkmode") === "1") &#123; if (!(localStorage.getItem("noDark") === "1")) &#123; body.addClass("dark") &#125;&#125;body.hasClass("dark")?darkmode.removeClass("fa-moon-o").addClass("fa-lightbulb-o"):darkmode.removeClass("fa-lightbulb-o").addClass("fa-moon-o")darkmode.click(function () &#123; if (body.hasClass("dark")) &#123; darkmode.removeClass("fa-lightbulb-o").addClass("fa-moon-o") body.removeClass("dark") localStorage.setItem("darkmode", "0") localStorage.setItem("noDark", "1") &#125; else &#123; darkmode.removeClass("fa-moon-o").addClass("fa-lightbulb-o") body.addClass("dark") localStorage.setItem("darkmode", "1") localStorage.setItem("noDark", "0") &#125;&#125;)&lt;/script&gt;åˆ›å»º themes/next/source/css/_custom/dark.stylï¼Œå†…å®¹å¦‚ä¸‹ï¼š123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198199200201202203204205206207208209210211212213214215216217218219220221222223224225226227228229230231232233234235236237238239240241242243244245246247248249250251252253254255256257258259260261262263264265266267268269270271272273274275276277278279280281282283284285286287288289290291292293294295296297298299300301302303304305306307308309310311312313314315316317318319320321322323324325326327328329330331/* é»‘æš—åˆ‡æ¢æ¨¡å¼æŒ‰é’® */#darkmode &#123; position: fixed; z-index: 1050; cursor: pointer; right: 33px; bottom: 91px; left: unset; font-size: 20px; width: 1rem; @media (max-width: 960px) &#123; right: 25px; bottom: 110px; &#125;&#125;/* å¹³æ»‘æ”¹å˜èƒŒæ™¯è‰² */* &#123; transition: background-color 1000ms; // transition: color 500ms, background-color 1000ms;&#125;/* ä¸‹é¢æ˜¯æš—é»‘æ¨¡å¼ä¸‹çš„ä¸ªæ€§åŒ–å®šåˆ¶æ ·å¼ */:root &#123; --dark-background-color: #222; --dark-post-background-color: #292a2d; --dark-color: #a9a9b3; --dark-a-hover-color: #6190e8;&#125;.dark &#123; background-color: var(--dark-background-color); color: var(--dark-color); ::selection &#123; background: #f4e1c0; color: #101012; text-shadow: none; &#125; /* åœ¨æ·±è‰²æ¨¡å¼ä¸‹æŠŠå›¾ç‰‡äº®åº¦è°ƒåˆ° 70% */ img &#123; -webkit-filter: brightness(0.7) !important; filter: brightness(0.7) !important; &#125; a &#123; color: var(--dark-color); :hover &#123; color: var(--dark-a-hover-color); &#125; &#125; .header &#123; .menu &#123; background-color: #565555; .menu-item &#123; a &#123; color: var(--dark-color); :hover &#123; color: var(--dark-color); &#125; &#125; &#125; @media (max-width: 767px) &#123; background-color: var(--dark-background-color); &#125; &#125; &#125; .post &#123; background-color: var(--dark-post-background-color); &#125; .main-inner .post &#123; background-color: var(--dark-post-background-color); box-shadow: 0 0 10px 0 #555; .archive &#123; box-shadow: unset; &#125; /* ä»£ç è¡Œ */ code &#123; color: #eee; background: #555; &#125; &#125; .posts-expand &#123; .post-title-link &#123; color: var(--dark-color); &#125; table&gt;tbody&gt;tr:nth-of-type(odd) &#123; background-color: #202225; &#125; &#125; .highlight-wrap &#123; background: #1d1d1d; .copy-btn &#123; border: unset; background-color: unset; color: var(--dark-color); &#125; table&gt;tbody&gt;tr:nth-of-type(odd) &#123; background-color: unset; &#125; &#125; blockquote &#123; border-left-color: #666; color: #929191; &#125; .posts-expand .post-body img &#123; border: unset; &#125; /* macä»£ç é¢æ¿ */ .highlight-wrap &#123; .highlight .gutter pre &#123; background-color: unset; color: #666; &#125; .highlight .code pre &#123; background-color: unset; border-left-color: #333; &#125; .highlight, pre &#123; background: #202225; color: var(--dark-color); &#125; &#125; .highlight-wrap::before &#123; color: #ccc; &#125; /* åˆ†é¡µ */ .pagination &#123; .page-number.current &#123; color: #333; background: #ccc; &#125; &#125; .pagination .next, .pagination .page-number, .pagination .prev &#123; border-top-color: #333; &#125; /* æ–‡ç« åº•éƒ¨ */ .post-footer &#123; .post-widgets &#123; border-top-color: #666; #needsharebutton-postbottom .btn &#123; color: #333; background-color: var(--dark-color); &#125; #needsharebutton-postbottom .btn:hover &#123; background-color: #f6f6f6; &#125; &#125; .post-nav &#123; border-top: 1px solid #666; .post-nav-item a:hover &#123; color: var(--dark-a-hover-color); &#125; &#125; &#125; /* è¯„è®ºé¢æ¿ */ .comments &#123; .tablink &#123; color: #222; &#125; .tablink:hover &#123; background-color: #ddd; &#125; .currentTabcontent &#123; background-color: #ddd; &#125; .tabcontent-li &#123; border-color: #757474; /* gitalk */ .gt-container &#123; .gt-comment-body &#123; color: var(--dark-color) !important; &#125; .gt-meta &#123; border-bottom: #333; &#125; .gt-header-textarea &#123; background-color: var(--dark-post-background-color); &#125; .gt-comment-content &#123; background-color: var(--dark-post-background-color); &#125; .gt-comment-content:hover &#123; -webkit-box-shadow: 0 0.625em 3.75em 0 #f4f4f4; box-shadow: 1px 1px 1em 0 #222; &#125; .gt-user .gt-ico svg &#123; fill: #ccc; &#125; .gt-header-preview &#123; background-color: var(--dark-post-background-color); color: var(--dark-color); &#125; &#125; .valine &#123; * &#123; color: var(--dark-color); &#125; border-bottom: #333; .vwrap &#123; border: var(--dark-post-background-color); .textarea-wrapper &#123; background: unset; &#125; .textarea-wrapper .comment_trigger &#123; background-color: var(--dark-post-background-color); &#125; .textarea-wrapper textarea &#123; color: var(--dark-color); background-color: var(--dark-post-background-color); &#125; .auth-section .input-wrapper input &#123; color: var(--dark-color); background-color: var(--dark-post-background-color); &#125; .auth-section &#123; background-color: var(--dark-post-background-color); &#125; .auth-section .post-action button &#123; border: var(--dark-post-background-color); background-color: #202124; &#125; &#125; .vlist .vcard .text-wrapper .vhead .vname &#123; color: var(--dark-a-hover-color); &#125; &#125; &#125; &#125; .post-toc &#123; a &#123; :hover &#123; color: #ccc; &#125; &#125; .nav .active-current&gt;a &#123; color: #87daff; &#125; &#125; /* æœ¬åœ°æœç´¢é¢æ¿ */ .local-search-popup &#123; background: #333; &#125; /* å½’æ¡£é¡µ */ .archive &#123; .posts-collapse .post-title a &#123; color: var(--dark-color); &#125; .posts-collapse::after &#123; background: var(--dark-post-background-color); &#125; &#125; /*é˜…è¯»æŽ’è¡Œæ¦œ*/ #top font &#123; color: var(--dark-color); &#125; /* å‹æƒ…é“¾æŽ¥ */ #links &#123; .card &#123; .card-header a &#123; color: #333; &#125; .card-header .info &#123; color: #60676d; &#125; &#125; &#125;&#125;ç¼–è¾‘ themes/next/source/css/_custom/custom.stylï¼Œåœ¨æ­¤æ–‡ä»¶ä¸­çš„æœ€åŽå¼•å…¥ dark.stylæ ·å¼æ–‡ä»¶1@require 'dark';Â¶8. é­”æ”¹nextä¸»é¢˜ç”±äºŽä¸ªäººå–œå¥½ï¼Œå’Œä¸ºé€‚é…ç§»åŠ¨ç«¯ï¼Œæœ¬åšå®¢ä»Žè¿™é‡Œå¼€å§‹å°†ä¿®æ”¹nextä¸»é¢˜çš„å¸ƒå±€ä¸ºMuseã€‚å¹¶åœ¨Museçš„åŸºç¡€ä¸Šåšäº†æ¯”è¾ƒå¤§çš„æ ·å¼è°ƒæ•´ï¼Œå½¢æˆäº†ç›®å‰åšå®¢çŽ°çŠ¶çš„åŸºæœ¬å¸ƒå±€å’Œæ ·å¼ã€‚å…¶ä¸­åŒ…æ‹¬æ•´ä½“éª¨æž¶å¸ƒå±€ã€èœå•æ ã€é¦–é¡µæ–‡ç« ç¼©ç•¥å¡ç‰‡ã€æ–‡ç« é¡µå®½ã€ç§»åŠ¨ç«¯é€‚é…ã€å­—ä½“å¤§å°ç­‰ç­‰è¯¸å¤šæ ·å¼çš„è°ƒæ•´ã€‚å…ˆçœ‹é­”æ”¹ä¸»é¢˜æ•ˆæžœï¼šä¿®æ”¹ themes/next/_config.ymlå¯ç”¨ Muset:12345# Schemesscheme: Muse#scheme: Mist#scheme: Pisces#scheme: Geminiç„¶åŽç¼–è¾‘ themes/next/source/css/_custom/custom.stylæ·»åŠ è‡ªå®šä¹‰æ ·å¼ï¼š123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198199200201202203204205206207208209210211212213214215216217218219220221222223224225226227228229230231232233234235236237238239240241242243244245246247248249250251252253254255256257258259260261262263264265266267268269270271272273274275276277278279280281282283284285286287288289290291292293294295296297298299300301302303304305306307308309310311312313314315316317318319320321322323324325326327328329330331332333334335336337338339340341342343344345346347348349350351352353354355356357358359// åŽ»æŽ‰é“¾æŽ¥ä¸‹çš„ä¸‹åˆ’çº¿* a &#123; text-decoration: none; border-bottom: unset;&#125;// é¡µé¢é¡¶éƒ¨æ ·å¼.header &#123; // é¡¶éƒ¨èƒŒæ™¯ background-image: linear-gradient(90deg, #222325, #3b3c3f, #222325); @media (max-width: 767px) &#123; background: black; &#125; // é¡¶éƒ¨å®½åº¦å’Œè·ç¦» .header-inner &#123; padding-top: 0; padding-bottom: 0; width: 100%; &#125; // åšå®¢title .custom-logo-site-title .brand &#123; background: none; .site-title &#123; letter-spacing: 0; font-weight: bold; font-size: 29px; &#125; &#125; // åšå®¢subtitleæè¿° .site-subtitle &#123; margin-top: 7px; margin-bottom: 5px; color: #999; font-weight: 700; font-size: 10px; @media (max-width: 767px) &#123; display: block; margin-top: 11px; padding-bottom: 2px; &#125; &#125; // é¡¶éƒ¨èœå•æ  .menu &#123; margin-top: 0; margin-bottom: 0; padding: 1px; background-color: rgba(255, 255, 255, .75); box-shadow: 0 10px 10px 0 rgba(0, 0, 0, .15); text-align: center; // èœå•è¶…é“¾æŽ¥ .menu-item a &#123; padding-right: 20px; padding-left: 20px; color: #333; font-weight: 600; font-size: 13px; @media (min-width: 1600px) &#123; font-size: 15px; &#125; :hover &#123; color: black; font-weight: bold; &#125; &#125; &#125; // ç§»åŠ¨ç«¯ä¸‹æ‹‰æŠ½å±‰æŒ‰é’®æ¨ªæ èƒŒæ™¯è‰² .site-nav-toggle .btn-bar &#123; background: #f9f9f9; &#125; // ç§»åŠ¨ç«¯ä¸‹æ‹‰æŠ½å±‰é¢æ¿ä¸Šè¾¹è· .site-nav &#123; top: 62px; &#125;&#125;// é¦–é¡µä¸»ä½“éƒ¨åˆ†.main &#123; // é¦–é¡µæ–‡ç« ç¼©ç•¥å¡ç‰‡å®½åº¦ section#posts &#123; margin: 0 auto; width: 78%; @media (min-width: 1600px) &#123; margin: 0 auto; width: 83%; &#125; @media (max-width: 767px) &#123; margin: 0 auto; width: 85%; &#125; @media (max-width: 960px) &#123; margin: 0 auto; width: 85%; &#125; // ç¼©ç•¥å›¾è¾¹ç¼˜æ ·å¼ .post-body img &#123; padding: 0; border: none; &#125; &#125; // ç¼©ç•¥å›¾æŒ‡å®šå®½åº¦å€¼æ˜¾ç¤ºã€‚ img.img-topic &#123; width: 55%; @media (max-width: 767px) &#123; width: 60%; &#125; &#125; // åŽ»é™¤ç¼©ç•¥å¡ç‰‡ä¹‹é—´çš„åˆ†å‰²çº¿ .posts-expand .post-eof &#123; margin: 0; background-color: rgba(255, 255, 255, 0); &#125; // é¡µç  .pagination &#123; // å‡å°é¡µç å¤–è¾¹è· margin: 50px 0 0; // åŽ»é™¤é¡µé¢åº•éƒ¨é¡µç ä¸Šé¢çš„æ¨ªçº¿ border: none; &#125;&#125;// ä¸»ä½“æ–‡ç« .main-inner &#123; // æ–‡ç« å®½åº¦ margin: 0 auto; width: 960px; @media (min-width: 1600px) &#123; width: 1080px; &#125; @media (max-width: 960px) &#123; margin: 0 auto; width: inherit; &#125; @media (max-width: 767px) &#123; margin: 0 auto; width: inherit; &#125; .post &#123; margin-bottom: 10px; padding: 45px 28px 36px; background-color: rgb(255, 255, 255); box-shadow: 0 0 10px 0 rgba(0, 0, 0, .5); .code &#123; //ä¿®å¤é€‰æ‹©ä»£ç æ—¶å…‰æ ‡è·¨è¶Šå¤šè¡Œçš„é—®é¢˜ width: 100%; &#125; @media (max-width: 767px) &#123; padding: 45px 12px 36px; &#125; &#125; .posts-expand &#123; // æ–‡ç« æ ‡é¢˜å­—ä½“ .post-title &#123; font-weight: 700; font-size: 20px; &#125; // æ–‡ç« å…ƒæ•°æ®ï¼ˆmetaï¼‰ç•™ç™½æ›´æ”¹ .post-meta &#123; margin: 10px 0 20px; &#125; // æ–‡ç« çš„æè¿°description .post-meta .post-description &#123; margin-top: 30px; margin-bottom: 0; color: #666; font-style: italic; font-size: 14px; &#125; @media (max-width: 767px) &#123; margin: 0; padding-top: 0; &#125; @media (max-width: 960px) &#123; margin: 0; &#125; &#125; // æ‘˜è¦æ–‡å­— .index-content &#123; font-size: 12px; &#125; // æ–‡ç« å†…é“¾æŽ¥æ–‡æœ¬æ ·å¼ .post-body p a &#123; border-bottom: none; border-bottom: 1px solid #0593d3; color: #0593d3; &amp;:hover &#123; border-bottom: none; border-bottom: 1px solid #fc6423; color: #fc6423; &#125; &#125; // æ–‡ç« åº•éƒ¨ .post-footer &#123; .post-widgets &#123; padding-top: 0; // å½“ratingå’Œneedmoreshare2éƒ½å¼€å¯æ—¶è®©å®ƒä»¬å±…ä¸­ç«–ç€æŽ’ if (hexo-config('rating.enable') &amp;&amp; hexo-config('needmoreshare2.enable')) &#123; #needsharebutton-postbottom &#123; // bottom: 25px; // margin: auto 50%; //ä¿®å¤åˆ†äº«æŒ‰é’®åœ¨ç«ç‹æµè§ˆå™¨æ˜¾ç¤ºæ¢è¡Œçš„é—®é¢˜ bottom: -10px; &#125; .wp_rating &#123; position: relative; top: 35px; &#125; &#125; &#125; .post-nav &#123; margin-top: 30px; &#125; &#125;&#125;// ä¾§æ æŠ½å±‰#sidebar &#123; // è¿‘æœŸæ–‡ç«  .sidebar-inner li.recent_posts_li &#123; text-align: center; &#125; @media (max-width: 767px) &#123; .site-overview &#123; overflow-x: hidden; overflow-y: auto; &#125; &#125;&#125;// ä¾§æ–¹æµ®åŠ¨æŠ½å±‰æŒ‰é’®.sidebar-toggle &#123; @media (max-width: 767px) &#123; right: 20px; bottom: 58px; width: 20px; height: 20px; opacity: unset; .sidebar-toggle-line &#123; height: 3px; &#125; &#125;&#125;// å›žåˆ°é¡¶éƒ¨æŒ‰é’®.back-to-top &#123; @media (max-width: 960px) &#123; right: 20px; &#125; @media (max-width: 767px) &#123; right: 20px; &#125;&#125;// åšå®¢é¡µé¢æœ€åº•éƒ¨.footer-inner &#123; // ç§»åŠ¨ç«¯footerå­—ä½“å˜å°ï¼Œé˜²æ­¢æ¢è¡Œ @media (max-width: 767px) &#123; font-size: 11px; &#125;&#125;// åˆ†ç±»é¡µ.category-all-page &#123; .category-list &#123; margin: 0; margin-left: 44%; padding: 0; list-style: none; &#125; a.category-list-link &#123; font-weight: bold; font-size: 20px; &#125;&#125;// å½’æ¡£é¡µä½ç½®è°ƒæ•´.posts-collapse &#123; margin-top: 50px; .post-header::before &#123; left: -4px; &#125; .collection-title &#123; margin: 50px 0 5px; &#125; .post &#123; margin: 0; margin-top: 0; margin-left: 2px; padding: 2px; box-shadow: none; &#125; .post-header &#123; position: relative; border-bottom: 1px dashed #ccc; transition-delay: 0s; transition-timing-function: ease-in-out; transition-duration: .2s; transition-property: border; &#125;&#125;// çƒ­æ–‡é¡µ#top p &#123; display: block; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;&#125;// å¼•å…¥å…¶ä»–æ–‡ä»¶çš„æ ·å¼@require 'scrollbar';@require 'comments';@require 'highlight-wrap';@require 'dark';ðŸ’â€â™‚ä¸‹é¢çš„æ–‡ä»¶æ˜¯ custom.stylä¾èµ–çš„æ ·å¼æ–‡ä»¶ï¼šï¼ˆ1ï¼‰scrollbar.styl1234567891011121314151617181920212223242526&gt;/**&gt;* @author qcmoke&gt;* ç¾ŽåŒ–åšå®¢ä¸­æµè§ˆå™¨çš„æ»šåŠ¨æ¡(åªé€‚ç”¨äºŽwebkitå†…æ ¸æµè§ˆå™¨)&gt;*/&gt;@media (min-width: 567px) &#123; /* å®šä¹‰æ»šåŠ¨æ¡é«˜å®½åŠèƒŒæ™¯é«˜å®½åˆ†åˆ«å¯¹åº”æ¨ªç«–æ»šåŠ¨æ¡çš„å°ºå¯¸ */ ::-webkit-scrollbar &#123; width: 10px; height: 10px; background-color: #F5F5F5; &#125; /* å®šä¹‰æ»šåŠ¨æ¡è½¨é“å†…é˜´å½±+åœ†è§’ */ ::-webkit-scrollbar-track &#123; border-radius: 2px; background-color: #F5F5F5; -webkit-box-shadow: inset 0 0 6px rgba(0, 0, 0, .3); &#125; /* å®šä¹‰æ»‘å—å†…é˜´å½±+åœ†è§’ */ ::-webkit-scrollbar-thumb &#123; border-radius: 2px; background-color: #555; -webkit-box-shadow: inset 0 0 6px rgba(0, 0, 0, .3); &#125;&gt;&#125;ï¼ˆ2ï¼‰comments.stylçš„å†…å®¹å‚è€ƒä¸Šæ–‡â€œæ•´åˆå¤šä¸ªè¯„è®ºé¢æ¿â€ï¼ˆ3ï¼‰highlight-wrap.styl çš„å†…å®¹å‚è€ƒä¸Šæ–‡â€œä¼˜åŒ–å’Œç¾ŽåŒ–ä»£ç å—â€ï¼ˆ4ï¼‰dark.styl çš„å†…å®¹å‚è€ƒä¸Šæ–‡â€œæ·»åŠ æš—é»‘æ¨¡å¼æ”¯æŒâ€Â¶9. hexoæ”¯æŒæœ¬åœ°Markdownæ–‡ä»¶é“¾æŽ¥å¼•ç”¨hexo é»˜è®¤æ”¯æŒæ ‡å‡† markdown è¯­æ³•å¼•ç”¨é“¾æŽ¥æ ¼å¼ï¼ˆå¦‚ï¼š[xxx](xxx.html)ï¼‰å’Œ hexo æ ‡ç­¾æ’ä»¶è¯­æ³•å¼•ç”¨é“¾æŽ¥æ ¼å¼ï¼ˆå¦‚ï¼šï¼‰ã€‚å¼•ç”¨æœ¬åœ°æ–‡ç« å¯ä»¥é€šè¿‡ä½¿ç”¨ä»¥ä¸Šä¸¤ç§å¼•ç”¨é“¾æŽ¥æ ¼å¼è¯­æ³•æ¥æ»¡è¶³åŸºæœ¬è¦æ±‚ï¼Œä½†é€šå¸¸åœ¨ç¼–å†™ Markdown æ–‡ç« æ—¶ï¼ŒMarkdown æ–‡ä»¶å¯¹åº”çš„ html é¡µé¢è¿˜æ²¡æœ‰ç¼–è¯‘å‡ºæ¥ï¼Œæ­¤æ—¶çš„å¼•ç”¨é“¾æŽ¥æ˜¯æ— æ•ˆçš„ï¼Œæ•…è€Œæ— æ³•ä½¿ç”¨ Markdown ç¼–è¾‘å™¨ç›´æŽ¥æ‰“å¼€é“¾æŽ¥é¡µé¢ï¼Œä½†é€šè¿‡[xxx](xxx.md)çš„ Markdown æ–‡ä»¶é“¾æŽ¥æ–¹å¼æ¥ç›´æŽ¥å¼•ç”¨ Markdown æ–‡ä»¶æ—¶ Markdown ç¼–è¾‘å™¨æ˜¯å¯ä»¥æ‰“å¼€é“¾æŽ¥é¡µé¢çš„ï¼Œç„¶è€Œä½¿ç”¨[xxx](xxx.md)è¿™ç§å†™æ³•ä¼šå¯¼è‡´ hexo ç¼–è¯‘æ—¶æ— æ³•æ¸²æŸ“ä¸º html é“¾æŽ¥ï¼Œä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå¯ä»¥ç»™ hexo æ·»åŠ ç¼–è¯‘è¿‡æ»¤å™¨ï¼Œè®© hexo ç¼–è¯‘æ—¶å°†[xxx](xxx.md) ä¿®æ”¹ä¸º[xxx](xxx.html)ã€‚å…·ä½“å®žçŽ°æ–¹å¼å¦‚ä¸‹ï¼šåˆ›å»ºå¹¶ç¼–è¾‘ï¼šthemes/next/scripts/filters/hexo-md-link.js æ–‡ä»¶ã€‚å†…å®¹å¦‚ä¸‹ï¼š12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576777879const log = require("hexo-log")(&#123; debug: false, slient: false &#125;);const fs = require("hexo-fs");const path = require("path");const base_dir = path.join(hexo.source_dir, "_posts");const fileList = fs .listDirSync(base_dir, &#123; ignorePattern: /node_modules/, &#125;) .filter((each) =&gt; each &amp;&amp; /\.md$/.test(each)) .map((each) =&gt; &#123; let array = (each + "").split(path.sep); // For Windows if (path.sep === "\\") &#123; each = each.replace(new RegExp("\\" + path.sep, "g"), "/"); &#125; return &#123; fileNameExt: array.length === 0 ? "" : array[array.length - 1], filePath: each, articleName: each.replace(/\.md$/, ""), &#125;; &#125;);function fixLink(data, regEx, func) &#123; let &#123; content &#125; = data; let result = content.match(regEx); if (result &amp;&amp; result.length &gt; 0) &#123; // console.log("result"); result.forEach((linkString) =&gt; &#123; let [filepath, showName] = func(linkString); // console.log(&#123; linkString, filepath, showName &#125;); let anchor = null; if (!filepath || filepath.length === 0) &#123; return; &#125; filepath = filepath.trim(); let htmlFilepath = filepath.replace(".md", ".html"); fileName = filepath.split("/").pop(); [fileName, anchor] = fileName.split("#"); const extName = ".md"; let realNameExt = fileName; if (!fileName.endsWith(extName)) &#123; realNameExt = fileName + extName; &#125; //console.log(&#123; realNameExt, filepath, showName &#125;); let file = fileList.find((file) =&gt; file.fileNameExt === realNameExt); if (file) &#123; // console.log("file", file); content = replaceAndIgnoreCode( content, linkString, `&lt;a href="$&#123;htmlFilepath&#125;" name="$&#123;filepath&#125;" id="hexo-md-link"&gt;$&#123; showName || filepath &#125;&lt;/a&gt;` // `&#123;% post_link $&#123;file.articleName&#125; '$&#123;showName || filepath&#125;' %&#125;` ); &#125; &#125;); &#125; data.content = content; return data;&#125;//èŽ·å–å­—ç¬¦ä¸²çš„ å“ˆå¸Œå€¼function getHashCode(str, caseSensitive) &#123; if (!caseSensitive) &#123; str = str.toLowerCase(); &#125; let hash = 1315423911; for (let i = str.length - 1; i &gt;= 0; i--) &#123; let ch = str.charCodeAt(i); hash ^= (hash &lt;&lt; 5) + ch + (hash &gt;&gt; 2); &#125; return hash &amp; 0x7fffffff;&#125;// æ›¿æ¢å¼•ç”¨é“¾æŽ¥ï¼ˆæŽ’é™¤ä»£ç å—ï¼‰function replaceAndIgnoreCode(markdown, oldString, newString) &#123; // åŒ¹é…æ‰€æœ‰ä»£ç ï¼š`code`å’Œä»£ç å—ï¼š```codelet codeBlocksRegex = /{1,3}[\s\S]*?{1,3}/g;let originalCodeStrArr = markdown.match(codeBlocksRegex);// åœ¨æ¯ä¸ªåŒ¹é…é¡¹ä¹‹é—´ï¼Œä½¿ç”¨å ä½ç¬¦å¡«å……åŽŸå§‹æ–‡æœ¬ä¸­çš„å†…å®¹const PLACEHOLDER_CODE =â€œCODE_BLOCK_PLACEHOLDERâ€ +getHashCode(oldString) +&quot;@&quot; +new Date().getTime();let placeholders = Array(originalCodeStrArr.length).fill(PLACEHOLDER_CODE);//ä½¿ç”¨å ä½ç¬¦æ›¿æ¢æ‰€æœ‰ä»£ç å—ï¼ˆå…ˆèŽ·å–æ‰€æœ‰çš„ä»£ç å—ï¼Œç„¶åŽä½¿ç”¨å ä½ç¬¦æ›¿æ¢æ¯ä¸ªä»£ç å—ï¼‰let reconstructedMarkdown = markdown.split(codeBlocksRegex).reduce((acc, cur, i) =&gt; acc.concat(cur, placeholders[i] || â€œâ€), []).join(&quot;&quot;);// æ›¿æ¢å­—ç¬¦ä¸²ï¼ˆæŽ’é™¤ä»£ç å—å†…çš„å†…å®¹ï¼‰let newMarkdown = reconstructedMarkdown.replace(oldString, newString);// å°†å ä½ç¬¦æ›¿æ¢å›žä»£ç å—let finalMarkdown = newMarkdown.split(PLACEHOLDER_CODE).reduce((accumulator, currentValue, i) =&gt;accumulator.concat(currentValue, originalCodeStrArr[i] || â€œâ€),[]) //å°†æ•°ç»„çš„æ‰€æœ‰å…ƒç´ æŒ‰é¡ºåºä¾æ¬¡æ‰§è¡ŒæŒ‡å®šçš„å‡½æ•°ï¼Œå¹¶è¿”å›žä¸€ä¸ªç´¯ç§¯çš„ç»“æžœ.join(&quot;&quot;).trim();return finalMarkdown;}hexo.extend.filter.register(â€œbefore_post_renderâ€,(data) =&gt; {// é€‚é… xxx æ ¼å¼markdowné“¾æŽ¥fixLink(data, /[.?](.?.md.?)/g, (linkString) =&gt; {let filepath = â€œâ€;let showName = â€œâ€;let filepathMatches = linkString.match(/((.?))/);if (filepathMatches &amp;&amp; filepathMatches.length &gt; 1) {filepath = filepathMatches[1];}let showNameMatches = linkString.match(/[(.?)]/);if (showNameMatches &amp;&amp; showNameMatches.length &gt; 1) {showName = showNameMatches[1];}return [filepath, showName];});// é€‚é… [[xxx/xxxx.md#xxx|xxx]] æ ¼å¼wikié“¾æŽ¥fixLink(data, /[[.?]]/g, (linkString) =&gt; {let [filepath, showName] = (linkString + â€œâ€).replace(&quot;[[&quot;, â€œâ€).replace(&quot;]]&quot;, â€œâ€).split(&quot;|&quot;);return [filepath, showName];});},0);123456789101112131415161718192021222324&gt;æ­¤è„šæœ¬é™¤äº†æ”¯æŒ&#96;[xxx](xxx&#x2F;xxxx.md)&#96;æ ¼å¼çš„ markdown å¼•ç”¨é“¾æŽ¥è¿˜æ”¯æŒ&#96;[[xxx&#x2F;xxxx.md#xxx|xxx]]&#96;æ ¼å¼çš„ wiki å¼•ç”¨é“¾æŽ¥ã€‚æ·»åŠ ä»¥ä¸Šæ–‡ä»¶åŽï¼Œç„¶åŽé‡æ–°è¿›è¡Œ hexo ç¼–è¯‘å³å¯æ”¯æŒ markdown å¼•ç”¨é“¾æŽ¥ã€‚# è¿ç»´éƒ¨ç½²ç¯‡## 1. æ·»åŠ å¤‡æ¡ˆå·ä¿®æ”¹ &#96;themes&#x2F;next&#x2F;layout&#x2F;_layout.swig&#96;ï¼Œåœ¨footeræ ‡ç­¾é‡Œæ·»åŠ aé“¾æŽ¥æ ‡ç­¾ï¼Œå¦‚ä¸‹ï¼š&#96;&#96;&#96;html&lt;footer id&#x3D;&quot;footer&quot; class&#x3D;&quot;footer&quot;&gt; &lt;div class&#x3D;&quot;footer-inner&quot;&gt; &#123;% include &#39;_partials&#x2F;footer.swig&#39; %&#125; &#123;% include &#39;_third-party&#x2F;analytics&#x2F;analytics-with-widget.swig&#39; %&#125; &#123;% if theme.beian.enable %&#125; &lt;a href&#x3D;&quot;&#123;&#123;url_for(theme.beian.url)&#125;&#125;&quot; target&#x3D;&quot;_blank&quot;&gt;&#123;&#123;theme.beian.beianNum&#125;&#125;&lt;&#x2F;a&gt; &#123;% endif %&#125; &#123;% block footer %&#125;&#123;% endblock %&#125; &lt;&#x2F;div&gt;&lt;&#x2F;footer&gt;ç„¶åŽä¿®æ”¹ä¸»é¢˜é…ç½®æ–‡ä»¶ themes/next/_config.ymllæ·»åŠ å¦‚ä¸‹é…ç½®ï¼š1234beian: enable: true url: https://beian.miit.gov.cn/ beianNum: é»”ICPå¤‡20002951å·Â¶2. æœç´¢å¼•æ“Žä¼˜åŒ–ï¼ˆSEOï¼‰Â¶1) ç”Ÿæˆç½‘ç«™åœ°å›¾æ–‡ä»¶é’ˆå¯¹ç™¾åº¦å’Œè°·æ­Œï¼Œåˆ†åˆ«æœ‰ä¸¤ä¸ª hexo æ’ä»¶ï¼Œhexo-generator-sitemap æ˜¯æ˜¯ç”Ÿæˆè°·æ­Œ sitemap çš„æ’ä»¶ï¼›hexo-generator-baidu-sitemapåˆ™æ˜¯ç”Ÿæˆç™¾åº¦ sitemap çš„æ’ä»¶ã€‚12npm install hexo-generator-sitemap --save-devnpm install hexo-generator-baidu-sitemap --save-devå®‰è£…å®ŒæˆåŽï¼Œé‡å¯hexoï¼Œæ‰§è¡Œhexo gåŽï¼Œåœ¨publicç›®å½•ä¸‹ç”Ÿæˆå¯¹åº”çš„xmlæ–‡ä»¶ã€‚æœ¬åœ°å¯ä»¥é€šè¿‡http://127.0.0.4000/sitemap.xmlå’Œ http://127.0.0.4000/baidusitemap.xmlè®¿é—®åˆ° sitemap æ–‡ä»¶ã€‚å‘å¸ƒåŽå¯ä»¥é€šè¿‡ https://yourdoname/sitemap.xml å’Œ https://yourdoname/baidusitemap.xml è®¿é—®ã€‚Â¶2) æ·»åŠ çˆ¬è™«è§„åˆ™æ–‡ä»¶æ–°å»ºçˆ¬è™«è§„åˆ™æ–‡ä»¶ï¼šthemes/next/source/robots.txt123456789# hexo robots.txtUser-agent: * Allow: &#x2F;Allow: &#x2F;archives&#x2F;Disallow: &#x2F;vendors&#x2F;Disallow: &#x2F;js&#x2F;Disallow: &#x2F;css&#x2F;Disallow: &#x2F;fonts&#x2F;Disallow: &#x2F;vendors&#x2F;Disallow: &#x2F;fancybox&#x2F;Â¶3) æäº¤æ–‡ä»¶æ³¨å†Œ googleç½‘ç«™ç«™é•¿ å¹³å°ã€‚å°† https://yourdoname/sitemap.xml æäº¤ç»™googleç½‘ç«™ç«™é•¿æ³¨å†Œ ç™¾åº¦ç«™é•¿ å¹³å°ï¼Œå°† https://yourdoname/baidusitemap.xml æäº¤ç»™ç™¾åº¦ç«™é•¿ç™¾åº¦ç«™é•¿å’ŒGoogleç½‘ç«™ç«™é•¿éƒ½è¦æäº¤ https://yourdoname/robots.txtÂ¶3. é™æ€èµ„æºåŽ‹ç¼©ä¼˜åŒ–ç”¨hexoç”Ÿæˆé™æ€æ–‡ä»¶æ—¶ï¼Œé»˜è®¤ç”Ÿæˆçš„é™æ€æ–‡ä»¶å­˜åœ¨å¤§é‡ç©ºç™½ï¼Œè€Œä¸”cssã€jséƒ½æœªç»åŽ‹ç¼©ï¼Œè¿™åœ¨ä¸€å®šç¨‹åº¦ä¸Šä¼šå½±å“é¡µé¢çš„åŠ è½½ï¼Œæ‰€ä»¥åœ¨ç½‘ä¸Šæ‰€æœæœ‰æ²¡æœ‰åŠžæ³•æ¥ä¼˜åŒ–è¿™äº›é—®é¢˜ï¼Ÿç­”æ¡ˆè‚¯å®šæ˜¯æœ‰ï¼Œå½“ç„¶å¤§éƒ¨åˆ†åšå®¢éƒ½æåˆ°äº†ä½¿ç”¨gulpæ¥ç²¾ç®€ä»£ç ï¼Œè€Œæˆ‘ä»Šå¤©æ‰€è¦è·Ÿå¤§å®¶ä»‹ç»çš„æ˜¯hexo-neatæ’ä»¶ ã€‚æˆ‘ä¸ºå•¥ä¸é€‰æ‹©gulpè€Œä½¿ç”¨hexo-neatå‘¢ï¼Ÿå› ä¸ºç”¨gulpéœ€è¦åœ¨æ¯æ¬¡ç”Ÿæˆé™æ€æ–‡ä»¶åŽï¼Œå³ hexo gåŽï¼Œéƒ½è¦å¦å¤–æ‰§è¡Œ gulpå‘½ä»¤æ‰èƒ½åŽ‹ç¼©é™æ€æ–‡ä»¶ï¼›è€Œä½¿ç”¨hexo-neatåˆ™æ— é¡»å¦å¤–æ‰§è¡Œå…¶ä»–å‘½ä»¤å³å¯è‡ªåŠ¨å®ŒæˆåŽ‹ç¼©åŠŸèƒ½ï¼Œå³æ–¹ä¾¿äº†ä½¿ç”¨ä¹ æƒ¯ã€‚åœ¨ç«™ç‚¹çš„æ ¹ç›®å½•ä¸‹æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š1npm install hexo-neat --saveæ‰“å¼€ myblog/_config.ymlå…¨å±€é…ç½®æ–‡ä»¶æ·»åŠ å¦‚ä¸‹é…ç½®ï¼š1234567891011121314151617181920212223#é™æ€èµ„æºåŽ‹ç¼©ä¼˜åŒ–# hexo-neatneat_enable: true # å¯ç”¨neat# å¯¹htmlä¼˜åŒ–neat_html: enable: true exclude: # å¯¹cssä¼˜åŒ–neat_css: enable: true exclude: - '*.min.css'# å¯¹jsä¼˜åŒ–neat_js: enable: true mangle: true output: compress: exclude: - '*.min.js'åšå¥½ä»¥ä¸Šå‡ æ­¥ä¹‹åŽï¼Œé‡æ–°ç”Ÿæˆåšå®¢çš„æ—¶å€™å°±ä¼šè‡ªåŠ¨åŽ‹ç¼©æ‰€æœ‰çš„ htmlã€cssã€jsã€‚è®¿é—®åšå®¢æ—¶èƒ½æ„Ÿåˆ°æ˜Žæ˜¾åŠ å¿«äº†ã€‚Â¶4. éƒ¨ç½²hexoåˆ°gitæœåŠ¡å™¨ä¸‹é¢ä»¥ GitHub æœåŠ¡å™¨ä¸ºä¾‹è®²è§£ï¼šï¼ˆ1ï¼‰é¦–å…ˆè¦ç™»å½•githubåˆ›å»ºä¸€ä¸ª user.github.ioä»“åº“ï¼Œä»“åº“åæ¯”è¾ƒç‰¹æ®Šï¼Œå¦‚ï¼šqcmoke.github.ioï¼Œæ­¤å¤„çš„ qcmokeä¸ºä½ çš„githubç”¨æˆ·å,githubæ­£æ˜¯é€šè¿‡è¿™ä¸ªä»“åº“å…è´¹ç”Ÿæˆä¸Žè¯¥ä»“åº“åç›¸åŒçš„åŸŸåï¼Œæ³¨æ„githubåªä¸ºæ¯ä¸€ä½ç”¨æˆ·æä¾›ä¸€ä¸ªè¿™æ ·å¸¦æœ‰å…è´¹åŸŸåçš„ github pageã€‚ðŸ’â€â™‚è¯´æ˜Ž:é™¤äº† user.github.ioè¿™æ ·ç‰¹æ®Šåç§°çš„ä»“åº“å¤–ï¼Œå½“ç„¶å…¶ä»–ä»»æ„åç§°çš„ä»“åº“ä¹Ÿå¯ä»¥è®¾ç½®pagesæœåŠ¡ï¼Œåªæ˜¯ä¸æä¾›åŸŸåç½¢äº†ï¼Œä½†ä¹Ÿèƒ½é€šè¿‡ user.github.io/ä»“åº“åç§°æˆ–è€…è®¾ç½®è‡ªå®šä¹‰åŸŸåçš„æ–¹å¼è®¿é—®pagesé¡µé¢ã€‚ï¼ˆ2ï¼‰å®‰è£…gitæ–‡ä»¶ä¸Šä¼ æ’ä»¶1npm install hexo-deployer-git --saveæ‰“å¼€å…¨å±€é…ç½®æ–‡ä»¶ myblog/_config.ymlï¼Œæ‰¾åˆ° deployå¹¶è¿›è¡Œå¦‚ä¸‹ä¿®æ”¹ï¼š1234deploy: type: git repository: git@github.com:qcmoke/qcmoke.github.io.git branch: masterå…¶ä¸­ repository çš„å€¼æ˜¯ä½  git è¿œç¨‹ä»“åº“çš„åœ°å€ã€‚ï¼ˆ3ï¼‰æäº¤éƒ¨ç½²å¦‚æžœä½ ä¸Šé¢éƒ½é…ç½®å¥½äº†ï¼Œå‘å¸ƒä¸Šä¼ å¾ˆå®¹æ˜“ï¼Œåªè¦ä¸€å¥å‘½ä»¤å°±èƒ½æžå®šã€‚12#è¿™æ¡å‘½ä»¤ä¼šå°†publicç›®å½•çš„æ–‡ä»¶æäº¤ä¸Šä¼ åˆ°gitè¿œç¨‹ä»“åº“hexo dðŸ’â€â™‚ æ³¨æ„ï¼šæœ¬åœ°å®‰è£…å¥½åŽssh keyä¸€å®šè¦é…ç½®å¥½ã€‚ å› ä¸ºä¸Šä¼ æ–‡ä»¶åˆ°githubçš„è¿‡ç¨‹ä¸­éœ€è¦ã€‚ï¼ˆ4ï¼‰è®¿é—® https://qcmoke.github.ioè¿›è¡Œæµ‹è¯•ðŸ’â€â™‚æ³¨æ„ï¼šè¿™ä¸ªè¯·æ±‚åœ°å€ç”¨ä½ è‡ªå·±çš„ï¼Œå³ https://user.github.ioÂ¶5. githubå’ŒcodingåŒçº¿è·¯éƒ¨ç½²hexoÂ¶1) é…ç½®è¿™é‡Œè®²çš„æ˜¯hexoä¸€æ¬¡éƒ¨ç½²èƒ½å¤Ÿå®žçŽ°githubå’Œcodingä¸¤ä¸ªè¿œç¨‹ä»“åº“è‡ªåŠ¨åŒæ­¥ï¼Œä½ åªè¦æ‰“å¼€å…¨å±€é…ç½®æ–‡ä»¶ myblog/_config.ymlï¼Œæœç´¢å…³é”®å­— deployï¼Œæ ¹æ®è‡ªå·±è¿œç¨‹ä»“åº“åœ°å€åšä»¥ä¸‹ä¿®æ”¹ï¼š123456deploy: type: git repository: github: git@github.com:qcmoke/qcmoke.github.io.git coding: git@git.coding.net:qcmoke/qcmoke.coding.me.git branch: masterÂ¶2) éƒ¨ç½²å’ŒåŽŸæ¥çš„å•éƒ¨ç½²æ‰§è¡Œçš„å‘½ä»¤ä¸€æ ·ï¼š12hexo ghexo dðŸ™†â€â™‚ åŒçº¿è·¯éƒ¨ç½²hexoå®Œæˆã€‚Â¶3) é¢å¤–è¡¥å……å…¶å®žå®Œæˆä»¥ä¸Šæ­¥éª¤å°±èƒ½å®žçŽ°ç®€å•ç‰ˆçš„åŒçº¿è·¯éƒ¨ç½² hexo äº†ï¼Œä½†æœ‰ä¸¤ä¸ªé—®é¢˜ï¼šï¼ˆ1ï¼‰ä¸åŒå¹³å°ä¸Šçš„hexoåšå®¢éœ€è¦ä¸åŒçš„åŸŸåè®¿é—®ï¼ˆ2ï¼‰åŒçº¿éƒ¨ç½²çš„çš„æƒ…å†µä¸‹ï¼Œgittalk ç”±äºŽæ˜¯é€šè¿‡åŸŸåæ¥è°ƒç”¨ github OAuth Apps çš„ api çš„ï¼Œä½†æ˜¯ github å’Œ coding å…è´¹æä¾›çš„æ˜¯ä¸¤ä¸ªä¸åŒçš„åŸŸåï¼Œæ‰€ä»¥ä¼šå¯¼è‡´apiè°ƒç”¨é”™ä¹±è€ŒæŠ¥é”™çš„é—®é¢˜ã€‚æˆ‘ä»¬å¸Œæœ›ç”¨åŒä¸€ä¸ªåŸŸåå°±èƒ½åŒæ—¶è®¿é—® github pages å’Œ coding pagesï¼Œå³æ‰€è°“çš„è´Ÿè½½å‡è¡¡æ€æƒ³ï¼Œè€Œä¸”è¿˜è¦è§£å†³ gitalk api è°ƒç”¨é”™ä¹±çš„é—®é¢˜ã€‚è§£å†³ä»¥ä¸Šé—®é¢˜çš„å‰ææ˜¯æœ‰ä¸€ä¸ªè‡ªå·±çš„åŸŸåã€‚è‡³äºŽæ€Žä¹ˆèŽ·å–åŸŸåï¼Œæˆ‘å°±ä¸åºŸè¯äº† å•Šï¼Œç™¾åº¦å§æœ‹å‹ ðŸ˜… ~ï¼è¿™é‡Œå°±å‡è®¾ä½ å·²ç»æœ‰äº†è‡ªå·±çš„åŸŸåï¼Œç„¶åŽæŒ‰ç…§ä¸‹é¢çš„æ­¥éª¤ä¸€æ­¥ä¸€æ­¥å®Œæˆå³å¯ã€‚Â¶(1) è§£æžåŸŸåCNAMEè®°å½•å°†åŸŸå CNAME è®°å½•åˆ†åˆ«è§£æžåˆ°ä½  yourname.github.io å’Œ yourname.coding.me ä¸Šã€‚å¦‚ä¸‹å›¾ï¼šå¦‚æžœä½ çš„dnsè§£æžæ‰˜ç®¡æœåŠ¡å•†è§£æžçº¿è·¯æœ‰â€œå›½å†…â€çº¿è·¯ï¼Œæœ€å¥½å°† yourname.coding.meè§£æžåˆ°å›½å†…çº¿è·¯ã€‚è€Œ yourname.github.ioè§£æžåˆ°å›½å¤–çº¿è·¯å³å¯ã€‚å¦‚æžœæ²¡æœ‰çš„è¯ï¼Œå’Œæˆ‘ä¸€æ ·å…¨é€‰é»˜è®¤çº¿è·¯å³å¯ã€‚Â¶(2) è®¾ç½®è‡ªå®šä¹‰åŸŸååˆ†åˆ«ç™»å½•åˆ° github å’Œ coding åŽå°ï¼Œå°†ä½ çš„åŸŸåå¡«å…¥å¹¶å¯ç”¨ https å³å¯ã€‚ï¼ˆ2.1ï¼‰GithubðŸ’â€â™‚æç¤ºï¼šgithub ç›®å‰å¯ç”¨è‡ªå®šä¹‰åŸŸåçš„ https æœåŠ¡å¤§æ¦‚éœ€è¦ç­‰ 24 å°æ—¶æ‰èƒ½ç”Ÿæ•ˆã€‚å¦‚æžœåˆ°æ—¶é—´äº†è¿˜æœªç”Ÿæ•ˆï¼Œå¹¶ä¸” â€œEnforce HTTPSâ€ æ˜¯ç°è‰²çš„ä¸èƒ½é€‰æ‹©æˆ–è€…æ²¡æœ‰è¿™ä¸ªé€‰é¡¹ï¼Œä½ å¯ä»¥æ¸…é™¤è®¾ç½®ä¸­çš„ custom domain åŸŸåï¼Œå†æ¬¡å¡«å†™ä¿å­˜å³å¯è§£å†³ï¼Œç„¶åŽ â€œEnforce HTTPSâ€ é€‰æ‹©æ‰“é’©ï¼Œä¸€èˆ¬å°±èƒ½å¯ç”¨ https äº†ã€‚ðŸ’¡ å¯é€‰ï¼šä½ å¯ä»¥é€‰æ‹©åœ¨ä»“åº“æ ¹ç›®å½•ä¸­åŠ å…¥ä¸€ä¸ªåä¸º CNAMEçš„æ–‡ä»¶ï¼ˆæˆ–è€…åšå®¢æºç çš„themes/next/sourceç›®å½•é‡Œï¼‰ï¼Œé‡Œé¢å¡«å…¥ä½ çš„åŸŸåï¼Œè¿™å’Œè®¾ç½®ä¸­å¡«å…¥è‡ªå®šä¹‰åŸŸåçš„æ•ˆæžœæ˜¯ä¸€æ ·çš„ï¼‰ï¼ˆ2.2ï¼‰CodingðŸ’â€â™‚ è¯´æ˜Žï¼šcoding éœ€è¦é“¶ç‰Œä»¥ä¸Šä¼šå‘˜æ‰æœ‰æƒé™åŠ å…¥è‡ªå®šä¹‰çš„åŸŸåã€‚ä¸è¿‡é“¶ç‰Œä¼šå‘˜æ˜¯å…è´¹çš„ï¼Œç™»å½• coding åŽæ‰¾åˆ°ä¼šå‘˜è®¾ç½®åŽç‚¹å‡»ç”³è¯·å¹¶å®Œå–„ä¸ªäººä¿¡æ¯åŽå°±èƒ½å‡çº§åˆ°é“¶ç‰Œä¼šå‘˜ã€‚ðŸ™‰ ç›®å‰ coding è¢«è…¾è®¯å¤§å“¥æ”¶è´­åŽï¼Œç•Œé¢æ”¹äº†å¾ˆå¤šï¼Œè¯·è‡ªè¡Œè§£å†³ã€‚ðŸŒ¸ å®ŒæˆåŽä½ åªè¦é€šè¿‡è‡ªå®šä¹‰çš„åŸŸåè®¿é—®ä½ çš„ git page æœåŠ¡å³å¯ã€‚Â¶(3) é¢å¤–è¡¥å……ðŸ’â€â™‚å¦‚æžœä½ æ²¡æœ‰ä½¿ç”¨gitalkï¼Œå¯ä»¥ç›´æŽ¥è·³è¿‡ä¸‹é¢çš„å†…å®¹ã€‚ä¸Šæ–‡ä¸­â€œåŠ å…¥è¯„è®ºé¢æ¿â€å·²ç»ä»‹ç»å¦‚ä½•åˆ›å»º â€œgithub OAuth Appsâ€ï¼Œè¿™é‡Œé¢å¤–è¡¥å……è¯´æ˜Žä¸€ä¸‹ï¼Œå’Œæ— è‡ªå®šä¹‰åŸŸåçš„æƒ…å†µä¸åŒ ï¼Œæœ‰è‡ªå®šä¹‰åŸŸåçš„æƒ…å†µåªéœ€è¦ä¸€ä¸ª github OAuth Apps ï¼Œæ‰€ä»¥ Homepage URL å’Œ Authorization callback URL éƒ½æŒ‡å‘åŒä¸€ä¸ªåœ°å€è·¯å¾„ï¼Œæ‰€ä»¥ä¸åŒä»“åº“ä¸‹çš„ gitalk å®žé™…è°ƒç”¨çš„æ˜¯åŒä¸€ä¸ªgithub OAuth Appsçš„api ã€‚å¦‚æžœä½ ä¹‹å‰å·²ç»ä¸º github åšå®¢å’Œ coding åšå®¢åˆ†åˆ«åˆ›å»ºäº†ä¸¤ä¸ª github OAuth Appsï¼Œé‚£ä¹ˆæˆ‘å»ºè®®ä½ å¯ä»¥åˆ é™¤æŽ‰é‚£äº›æ— ç”¨çš„ github OAuth Apps äº†ã€‚ç„¶åŽé‡æ–°åˆ›å»ºä¸€ä¸ª github OAuth Appsï¼Œæ³¨æ„ï¼šgithub OAuth Apps ä¸Šçš„ Homepage URL å’Œ Authorization callback URL ä¸ºä½ åšå®¢çš„æ–°åœ°å€ï¼ˆè‡ªå®šä¹‰åŸŸååœ°å€ï¼‰ä¿®æ”¹ myblog/themes/next/_config.ymlä¸»é¢˜é…ç½®æ–‡ä»¶ä¸­çš„ gitalk é…ç½®ï¼Œé…ç½®å®Œæˆå¦‚ä¸‹å›¾ï¼šÂ¶4) å…³äºŽcodingå¹¿å‘Šç›®å‰ä½¿ç”¨è‡ªå®šä¹‰åŸŸåï¼Œcodingä¼šå¼ºåˆ¶åœ¨ä½ æ‰“å¼€åšå®¢æ—¶æ”¾å…¥å‡ ç§’é’Ÿçš„å¹¿å‘Šï¼Œåœ¨æ­¤åæ§½ä¸€ä¸‹ðŸ’¢ã€‚åŽ»é™¤è¿™ä¸ªå¹¿å‘Šé¡µé¢ä¹Ÿä¸æ˜¯æ²¡æœ‰åŠžæ³•ï¼Œcodingæä¾›äº†ä¸€äº›åŠžæ³•ï¼Œå…¶ä¸­ä¸€ç§å°±æ˜¯åœ¨ä½ çš„åšå®¢é¦–é¡µåŠ å…¥ä»–ä»¬å®¶çš„é“¾æŽ¥ã€‚ä¹Ÿå°±æ˜¯â€œHosted by Coding Pagesâ€è¿™å‡ ä¸ªå­—ï¼Œè™½ç„¶è¿˜æ˜¯å¾ˆè®¨åŽŒï¼Œä½†æ˜¯æ²¡åŠžæ³•ï¼Œå¿å¿å§ï¼Œæ¯•ç«Ÿè¦äº†äººå®¶çš„æœåŠ¡å™¨å•¦ã€‚æ—¢ç„¶codingè¦æ±‚å¸®ä»–ä»¬æ‰“å¹¿å‘Šï¼Œè€Œæˆ‘åˆç”¨çš„æ˜¯åŒçº¿éƒ¨ç½²hexoåšå®¢åˆ°githubå’Œcodingä¸Šçš„æ–¹æ¡ˆï¼Œæ•…å°†è®¡å°±è®¡ï¼Œé‚£ä¹Ÿé¡ºä¾¿å¸®githubæ‰“å¹¿å‘Šå•¦ã€‚å…·ä½“åšæ³•å¦‚ä¸‹:åœ¨ myblog/themes/next/layout/_partials/footer.swigä¸­æ‰¾åˆ°å¦‚ä¸‹ä»£ç å—:12345678910111213 &#123;% if theme.post_wordcount.totalcount %&#125; &lt;span class="post-meta-divider"&gt;|&lt;/span&gt; &lt;span class="post-meta-item-icon"&gt; &lt;i class="fa fa-area-chart"&gt;&lt;/i&gt; &lt;/span&gt; &#123;% if theme.post_wordcount.item_text %&#125; &lt;span class="post-meta-item-text"&gt;&#123;&#123; __('post.totalcount') &#125;&#125;:&lt;/span&gt; &#123;% endif %&#125; &lt;span title="&#123;&#123; __('post.totalcount') &#125;&#125;"&gt;&#123;# #&#125;&#123;&#123; totalcount(site, '0,0.0a') &#125;&#125;&#123;# #&#125;&lt;/span&gt; &#123;% endif %&#125;&lt;/div&gt;å¦èµ·ä¸€è¡Œï¼Œæ·»åŠ å¦‚ä¸‹ä»£ç :1234&lt;!-- Github Pages and coding pages ad --&gt;&lt;span&gt;Hosted by &lt;a href="https://pages.github.com" style="font-weight: bold"&gt;Github Pages&lt;/a&gt;&lt;/span&gt; and &lt;span&gt;Hosted by &lt;a href="https://pages.coding.me" style="font-weight: bold"&gt;Coding Pages&lt;/a&gt;&lt;/span&gt;ä»¥ä¸Šå®ŒæˆåŽè¿˜æ²¡ç»“æŸï¼Œè¿˜è¦ç™»å½•åˆ°codingåŽå°è®¾ç½®é€‰æ‹©â€œå·²æ”¾ç½® Hosted by Coding Pagesâ€æ‰“é’©ã€‚ä½†ä½ å¯èƒ½æ‰¾ä¸åˆ°è¿™ä¸ªè®¾ç½®é¡µé¢ï¼Œä½ éœ€è¦åˆ‡æ¢codingä¸»é¡µå›žæ—§ç‰ˆå†æ‰¾pagesæœåŠ¡è®¾ç½®ï¼Œå°±èƒ½æ‰¾åˆ°è¿™ä¸ªè®¾ç½®äº†ï¼Œå¦‚ä¸‹ï¼šHosted by Coding Pages æäº¤åŽéœ€è¦å®¡æ ¸ï¼Œä¼šåœ¨ä¸¤ä¸ªå·¥ä½œæ—¥å†…ä¸ºä½ å¤„ç†ã€‚å¤„ç†æˆåŠŸåŽå°±ä¸ä¼šæœ‰æ‰“å¼€åšå®¢ä¸»é¡µå‰çš„å‡ ç§’é’Ÿå¹¿å‘ŠæŽ¨é€äº†ã€‚Â¶æ»šåŠ¨æ”¹ç‰ˆç¯‡Â¶1. hexoå‡çº§è‡³4.2.1åŽŸæ¥ç‰ˆæœ¬ï¼šhexo@3.7.1 + hexo-theme-next@5.1.4å‡çº§ç‰ˆæœ¬ï¼šhexo@4.2.1 + hexo-theme-next@5.1.4åŽŸæœ¬ä½¿ç”¨çš„hexo@3.7.1ç‰ˆæœ¬ï¼Œä¸€ç›´æœ‰ä¸ªé—®é¢˜ï¼Œé‚£å°±æ˜¯å¼•ç”¨é‡Œå¦‚æžœä½¿ç”¨ä»£ç å—ï¼Œé‚£ä¹ˆä»£ç å—çš„æ¯è¡Œå¼€å¤´éƒ½ä¼šå¤šå‡ºå­—ç¬¦&gt;ã€‚å¦‚ä¸‹å›¾ï¼šä¸ºäº†è§£å†³ä»¥ä¸Šé—®é¢˜æˆ‘æŠŠhexoç‰ˆæœ¬å‡çº§åˆ°äº†4.2.1ã€‚å…¶å®žåªè¦å‡çº§åˆ°4.0.0ä»¥ä¸Šçš„ç‰ˆæœ¬éƒ½å¯ä»¥ï¼Œä½†5.0.0çš„æ”¹åŠ¨å¤ªå¤§äº†æ‰€ä»¥å°±æ²¡æ”¹å‡ï¼Œæ•…è€Œé€‰æ‹©äº†hexo@4.x.xçš„æœ€åŽä¸€ä¸ªç‰ˆæœ¬hexo@4.2.1ã€‚ä½†æ˜¯å‡çº§åˆ°hexo@4.2.1åŽåˆå‘çŽ°å‡ºçŽ°äº†ä¸€äº›å…¶ä»–çš„é—®é¢˜ï¼Œéœ€è¦æ‰‹åŠ¨é€‚é…ã€‚ä¸»è¦é€‚é…å†…å®¹ä¸ºä»¥ä¸‹ï¼šç‚¹å‡»åšå®¢èœå•æŒ‰é’®æ—¶æ— æ³•æ‰“å¼€é¡µé¢ï¼ŒåŽŸæœ¬çš„urlä¼šå¤šå‡º%20ç­‰ç¼–ç å­—ç¬¦ä¸²ï¼Œå¦‚ï¼šhttp://localhost:4000/categories/%20/ï¼Œå…¶ä¸»è¦åŽŸå› æ˜¯ä½¿ç”¨äº†encodeURIç¼–ç äº†é“¾æŽ¥ï¼Œä½†æ˜¯åŽŸæœ¬èœå•çš„é…ç½®å¤šå‡ºäº†ç©ºæ ¼ï¼Œå¦‚ï¼šcategories: /categories/ || thã€‚è§£å†³åŠžæ³•æœ‰ä¸¤ä¸ªï¼ˆ1ï¼‰åªè¦æŠŠ||å‰é¢çš„ç©ºæ ¼åŽ»æŽ‰å°±å¯ä»¥äº†ã€‚å¦‚ä¸‹ï¼š1234567891011121314menu:home: / || home#about: /about/ || usertags: /tags/ || tagscategories: /categories/ || tharchives: /archives/ || archiveä¸Šé¢ä¿®æ”¹ä¸ºå¦‚ä¸‹ï¼ˆåˆ é™¤pathä¸­å¤šä½™ç©ºæ ¼ï¼‰ï¼šmenu:home: /|| home#about: /about/ || usertags: /tags/|| tagscategories: /categories/|| tharchives: /archives/|| archiveï¼ˆ2ï¼‰è¿˜æœ‰ä¸€ç§åŠžæ³•å°±æ˜¯åœ¨è·³è½¬å‰çš„ä»£ç ä¸­æŠŠç©ºæ ¼åŽ»é™¤æŽ‰ï¼ˆæˆ‘ä½¿ç”¨çš„æ˜¯è¿™ç§ï¼‰ã€‚ä¿®æ”¹themes/next/layout/_macro/sidebar.swigæ–‡ä»¶ï¼š123&lt;a href&#x3D;&quot;&#123;&#123; url_for(theme.menu.archives).split(&#39;||&#39;)[0] | trim &#125;&#125;&quot;&gt;æ”¹æˆ&lt;a href&#x3D;&quot;&#123;&#123; url_for(theme.menu.archives.split(&#39;||&#39;)[0] | trim )&#125;&#125;&quot;&gt;ä¿®æ”¹themes/next/layout/_partials/header.swigæ–‡ä»¶ï¼š123&lt;a href&#x3D;&quot;&#123;&#123; url_for(path.split(&#39;||&#39;)[0]) | trim &#125;&#125;&quot; rel&#x3D;&quot;section&quot;&gt;æ”¹æˆ&lt;a href&#x3D;&quot;&#123;&#123; url_for(path.split(&#39;||&#39;)[0] | trim )&#125;&#125;&quot; rel&#x3D;&quot;section&quot;&gt;å‚è€ƒï¼šhttps://github.com/iissnan/hexo-theme-next/issues/2233https://github.com/SevenNorth/AshesBlog/commit/e758caa65ccd3a9da20ebfadb35573257de6b35bé¦–é¡µåº•éƒ¨åˆ†é¡µæŒ‰é’®æ— æ³•è¯†åˆ«å­—ä½“å›¾æ ‡è€Œç›´æŽ¥å±•ç¤ºå‡ºhtmlæ ‡ç­¾ä»£ç å‡ºæ¥ï¼Œå¦‚ä¸‹å›¾ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œéœ€è¦ä¿®æ”¹themes/next/layout/_partials/pagination.swigï¼Œæ·»åŠ escape: falseï¼Œå¦‚ä¸‹ï¼š123456789101112&#123;% if page.prev or page.next %&#125; &lt;nav class&#x3D;&quot;pagination&quot;&gt; &#123;&#123; paginator(&#123; prev_text: &#39;&lt;i class&#x3D;&quot;fa fa-angle-left&quot;&gt;&lt;&#x2F;i&gt;&#39;, next_text: &#39;&lt;i class&#x3D;&quot;fa fa-angle-right&quot;&gt;&lt;&#x2F;i&gt;&#39;, mid_size: 1, escape: false &#125;) &#125;&#125; &lt;&#x2F;nav&gt;&#123;% endif %&#125;å‚è€ƒï¼šhttps://www.4spaces.org/856.htmlhttps://github.com/theme-next/hexo-theme-next/blob/master/layout/_partials/pagination.swigÂ¶å‚è€ƒðŸ“šhttps://easyhexo.comðŸ“šhttps://io-oi.me/tech/hexo-next-optimizationðŸ“šhttps://www.liaofuzhan.com/posts/2114475547.html]]></content>
      <categories>
        <category>blog</category>
      </categories>
      <tags>
        <tag>github</tag>
        <tag>hexo</tag>
        <tag>next</tag>
        <tag>coding</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[typechoä»Žhttpè½¬https]]></title>
    <url>%2Fblog%2Ftypecho_http_https.html</url>
    <content type="text"><![CDATA[å®žçŽ°httpsé¦–å…ˆéœ€è¦è´­ä¹°sslè¯ä¹¦ï¼Œæ¯”å¦‚é€šè¿‡é˜¿é‡Œäº‘è´­ä¹°äº†dv sslè¯ä¹¦ã€‚ä¸‹è½½sslæ–‡ä»¶è§£åŽ‹åŽä¼šå¾—åˆ°214965547810841.keyã€214965547810841.pemã€chain.pemã€public.pem å…±4ä¸ªæ–‡ä»¶ã€‚æ–‡ä»¶è¯´æ˜Žï¼šè¯ä¹¦æ–‡ä»¶214965547810841.pemï¼ŒåŒ…å«ä¸¤æ®µå†…å®¹ï¼Œè¯·ä¸è¦åˆ é™¤ä»»ä½•ä¸€æ®µå†…å®¹ã€‚å¦‚æžœæ˜¯è¯ä¹¦ç³»ç»Ÿåˆ›å»ºçš„CSRï¼Œè¿˜åŒ…å«ï¼šè¯ä¹¦ç§é’¥æ–‡ä»¶214965547810841.keyã€è¯ä¹¦å…¬é’¥æ–‡ä»¶public.pemã€è¯ä¹¦é“¾æ–‡ä»¶chain.pemã€‚Â¶ä¸€ã€é¢„å‰é…ç½®è®¾ç½®Â¶1.åˆ›å»º/etc/httpd/certç›®å½•certç›®å½•çš„ç›®çš„æ˜¯ç”¨æ¥å­˜æ”¾ä»¥ä¸Š4ä¸ªæ–‡ä»¶ã€‚12cd /etc/httpd/mkdir certÂ¶2.é€šè¿‡xftpç­‰å·¥å…·å°†ä»¥ä¸Š4ä¸ªæ–‡ä»¶å­˜é€åˆ°certç›®å½•ã€‚Â¶3.å®‰è£…opensslå’Œmod_ssl1yum install openssl mod_sslÂ¶äºŒã€é…ç½®è¯ä¹¦å®Œæˆä»¥ä¸Šå®‰è£…åŽï¼Œä¼šè‡ªåŠ¨ç”Ÿæˆ /etc/httpd/conf.d/ssl.conf(ä¹Ÿå¯èƒ½æ˜¯/etc/httpd/conf/extra/httpd-ssl.confï¼Œè¿™ä¸Žæ“ä½œç³»ç»ŸåŠå®‰è£…æ–¹å¼æœ‰å…³ï¼Œæ­¤ç§æƒ…å†µè¯·å‚è€ƒé˜¿é‡Œäº‘çš„è¯´æ˜Žæ–‡æ¡£)ï¼Œ åœ¨é…ç½®æ–‡ä»¶ä¸­æŸ¥æ‰¾ä»¥ä¸‹é…ç½®è¯­å¥ï¼Œé…ç½®public.pemã€214965547810841.keyã€chain.pemçš„è·¯å¾„ã€‚1234567891011# æ·»åŠ  SSL åè®®æ”¯æŒåè®®ï¼ŒåŽ»æŽ‰ä¸å®‰å…¨çš„åè®®SSLProtocol all -SSLv2 -SSLv3# ä¿®æ”¹åŠ å¯†å¥—ä»¶å¦‚ä¸‹SSLCipherSuite HIGH:!RC4:!MD5:!aNULL:!eNULL:!NULL:!DH:!EDH:!EXP:+MEDIUMSSLHonorCipherOrder on# è¯ä¹¦å…¬é’¥é…ç½®SSLCertificateFile /etc/httpd/cert/public.pem# è¯ä¹¦ç§é’¥é…ç½®SSLCertificateKeyFile /etc/httpd/cert/214965547810841.key# è¯ä¹¦é“¾é…ç½®ï¼Œå¦‚æžœè¯¥å±žæ€§å¼€å¤´æœ‰ '#'å­—ç¬¦ï¼Œè¯·åˆ é™¤æŽ‰SSLCertificateChainFile /etc/httpd/cert/chain.pemé™¤æ­¤ä¹‹å¤–è¿˜è¦æ·»åŠ 433ç«¯å£çš„è™šæ‹Ÿç›®å½•ï¼Œæ‰¾åˆ°ssl.confé‡Œçš„ &lt;VirtualHost _default_:443&gt;,ç„¶åŽå¦èµ·ä¸€è¡Œï¼Œæ·»åŠ å¦‚ä¸‹ä»£ç ï¼š12DocumentRoot "/var/www/html/typecho/" ServerName example.com:443Â¶ä¸‰ã€é‡å¯ Apache1service httpd restartÂ¶å››ã€å®‰å…¨ç»„è®¾ç½®éœ€è¦ç™»å½•é˜¿é‡Œäº‘ï¼Œå®‰å…¨ç»„æ·»åŠ å¹¶å¼€æ”¾433ç«¯å£ã€‚Â¶äº”ã€typechoç½‘ç«™ä¿®å¤å’Œé…ç½®é˜¿é‡Œäº‘å®‰å…¨ç»„è®¾ç½®å¥½åŽå°±å¯ä»¥é€šè¿‡ https æ–¹å¼è®¿é—®æ‚¨çš„ç«™ç‚¹äº†ã€‚ä½†ä½ ä¼šå‘çŽ°ä½ çš„typechoåšå®¢åŠ è½½ä¸å‡ºå›¾ç‰‡æˆ–è€…ä¸èƒ½è®¿é—®ï¼ŒåŽŸå› æœ‰ä¸¤ä¸ªåŽŸå› ï¼š1ã€typechoæ²¡æœ‰å¼€å¯httpsï¼›è§£å†³ï¼šè¿›å…¥typechoåšå®¢webæ ¹ç›®å½•12cd /var/www/html/typecho/ #è·¯å¾„æ ¹æ®è‡ªå·±æƒ…å†µè€Œå®švim config.inc.phpæ‰¾åˆ°ä»¥ä¸‹ä»£ç 12/** å®šä¹‰æ ¹ç›®å½• */define('__TYPECHO_ROOT_DIR__', dirname(__FILE__));åœ¨ä»¥ä¸Šä»£ç çš„ä¸Šé¢å¦èµ·2è¡Œï¼Œç„¶åŽè¾“å…¥ä»¥ä¸‹ä»£ç ï¼š12/** å¼€å¯HTTPS */define('__TYPECHO_SECURE__',true);ç„¶åŽä¿å­˜é€€å‡º2ã€ä½ åŽŸæœ¬çš„typechoæ•°æ®åº“åªå­˜äº†httpç±»åž‹çš„åŸŸååœ°å€ï¼Œä½ éœ€è¦å°†httpç±»åž‹çš„åŸŸååœ°å€ä¿®æ”¹ä¸ºhttpsç±»åž‹çš„åŸŸååœ°å€ã€‚è§£å†³ï¼šå¾ˆç®€å•ï¼Œæ‰“å¼€ç»ˆç«¯å·¥å…·ç™»å½•æœåŠ¡å™¨çš„mysqlã€‚ç„¶åŽè¾“å…¥å¦‚ä¸‹ï¼š123mysql&gt; use typecho; mysql&gt; UPDATE `typecho_options` SET `value` = 'https://example.com' WHERE `typecho_options`.`name` = 'siteUrl' AND `typecho_options`.`user` =0;mysql&gt; UPDATE `typecho_contents` SET text = REPLACE(text, 'http://blog.example.com', 'https://example.com') WHERE INSTR(text,'http://blog.example.com') &gt; 0;123456æ³¨è§£ï¼štypecho #æ•°æ®åº“åï¼Œåå­—å¯èƒ½ä¸ä¸€æ ·https:&#x2F;&#x2F;example.com #æ›´æ¢å‰ä½¿ç”¨çš„httpç±»åž‹çš„åŸŸååœ°å€https:&#x2F;&#x2F;example.com #æ›´æ¢åŽä½¿ç”¨çš„httpsç±»åž‹çš„åŸŸååœ°å€ï¼Œå½“ç„¶ä½ ä¹Ÿå¯ä»¥æ›´å…·æƒ…å†µæ”¹ä¸ºhttps:&#x2F;&#x2F;www.example.comtypecho_options #è¡¨åï¼Œæœ‰çš„äººè¡¨å¤´ä¸ä¸€æ ·éœ€è¦ä¿®æ”¹ æ¯”å¦‚ï¼šabc_optionstypecho_contents #è¡¨åï¼Œæœ‰çš„äººè¡¨å¤´ä¸ä¸€æ ·éœ€è¦ä¿®æ”¹ æ¯”å¦‚ï¼šabc_contentsç„¶åŽå†åˆ·æ–°httpsé“¾æŽ¥çš„åšå®¢å°±å‡ºçŽ°å›¾ç‰‡äº†ï¼Œå½“ç„¶è¿˜è¦ç™»å½•åšå®¢ç®¡ç†å‘˜åˆ°åŽå°å¯¹ä¸€äº›ä¸ªäººåå¥½çš„åœ°å€è·¯å¾„åšç›¸åº”æ›´æ”¹ã€‚Â¶å…­ã€å¼ºåˆ¶è½¬httpä¸ºhttpsï¼ˆå¦‚æžœä½ éœ€è¦ï¼‰å…¶å®žå°±æ˜¯å¼ºåˆ¶è½¬80ç«¯å£ä¸º433ç«¯å£ï¼Œå³è®©80ç«¯å£é‡å®šå‘åˆ°443ç«¯å£ã€‚åœ¨è¿™é‡Œæˆ‘ä»¬é€šè¿‡ä¿®æ”¹è™šæ‹Ÿç›®å½•æ¥å®žçŽ°ã€‚1vim /etc/httpd/conf.d/vhost.confè¿™é‡Œçš„vhost.confé…ç½®æ–‡ä»¶ä½ å¯èƒ½æ²¡æœ‰ï¼Œå¦‚ä½•é…ç½®å¯å‚è€ƒã€Šcentos7 apache2.4.6é…ç½®å•ipå¤šåŸŸåã€‹ã€‚åœ¨vhost.confé…ç½®æ–‡ä»¶çš„ç›¸åº”ä½ç½®æ·»åŠ ä»¥ä¸‹ä¸‰è¡Œä»£ç æ¥å®žçŽ°è¯¥åŠŸèƒ½ã€‚123RewriteEngine on # urlé‡å®šå‘å¼€å¯RewriteCond %&#123;SERVER_PORT&#125; !^443$ # æŒ‡å®šè·³è½¬è‡³443ç«¯å£RewriteRule ^/?(.*)$ https://www.%&#123;SERVER_NAME&#125;/$1 [L,R] # è·³è½¬è‡³https://www.åŸŸå.comçš„urlä»¥ä¸‹æˆ‘çš„çš„é…ç½®å¯ä¾›å‚è€ƒï¼š12345678910111213&lt;VirtualHost *:80&gt; DocumentRoot "/var/www/html/typecho" ServerName example.com ServerAlias www.example.com RewriteEngine on RewriteCond %&#123;SERVER_PORT&#125; !^443$ RewriteRule ^/?(.*)$ https://www.%&#123;SERVER_NAME&#125;/$1 [L,R] &lt;Directory "/var/www/html/typecho"&gt; Options FollowSymLinks AllowOverride All Require all granted &lt;/Directory&gt;&lt;/VirtualHost&gt;é…ç½®å¥½åŽæŒ‰:wqä¿å­˜å¹¶é€€å‡ºã€‚é‡å¯apacheæœåŠ¡1service httpd restart]]></content>
      <categories>
        <category>blog</category>
      </categories>
      <tags>
        <tag>apache</tag>
        <tag>ssl</tag>
        <tag>http</tag>
        <tag>https</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ubuntuå®‰è£…ç½‘æ˜“äº‘éŸ³ä¹]]></title>
    <url>%2Flinux%2Fcloudmusic.html</url>
    <content type="text"><![CDATA[Â¶1.ä¸‹è½½è½¯ä»¶åŒ…ä¸‹è½½åœ°å€ï¼šhttps://music.163.com/#/downloadÂ¶2.æ‰§è¡Œäº‘éŸ³ä¹çš„å®‰è£…å‘½ä»¤1# sudo dpkg -i netease-cloud-music_1.1.0_amd64_ubuntu.debÂ¶3.ä¿®å¤å¹¶è‡ªåŠ¨å®‰è£…æ‰€éœ€ä¾èµ–1# sudo apt-get install -f #ç­‰ä»·äºŽï¼šsudo apt-get -f installÂ¶4.å†æ¬¡æ‰§è¡Œäº‘éŸ³ä¹çš„å®‰è£…å‘½ä»¤1# sudo dpkg -i netease-cloud-music_1.0.0_i386_ubuntu16.04.deb]]></content>
      <categories>
        <category>linux</category>
      </categories>
      <tags>
        <tag>ubuntu</tag>
        <tag>ç½‘æ˜“äº‘éŸ³ä¹</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[linuxä»£ç†å®¢æˆ·ç«¯]]></title>
    <url>%2Flinux%2Flinux_proxy.html</url>
    <content type="text"><![CDATA[ä¸€èˆ¬æƒ…å†µï¼Œåœ¨å›½å†…ï¼Œssrå®¢æˆ·ç«¯ä½¿ç”¨æ¯”è¾ƒå¤šçš„åœºæ™¯æ˜¯åœ¨ç”¨æˆ·é‡æ¯”è¾ƒå¤šçš„windowsã€macã€ioså’Œandroidç³»ç»Ÿä¸Šï¼Œç›¸åº”çš„è¿™äº›æ“ä½œç³»ç»Ÿå¯¹åº”çš„ssrå®¢æˆ·ç«¯ä¹Ÿéƒ½æ¯”è¾ƒå®¹æ˜“ä¸Šæ‰‹ã€‚é‚£ä¹ˆåœ¨linuxæ“ä½œç³»ç»Ÿä¸‹æ˜¯å¦æœ‰å…¶ä½¿ç”¨åœºæ™¯å‘¢ï¼Ÿç­”æ¡ˆé‚£æ˜¯è‚¯å®šçš„ï¼Œé¦–å…ˆå¯¹äºŽå¼€å‘äººå‘˜æ¥è¯´ï¼Œè¿˜æ˜¯æœ‰ä¸€éƒ¨åˆ†äººåœ¨ä½¿ç”¨è¯¸å¦‚ubuntuã€deepinè¿™æ ·äº¤äº’æ€§æ¯”è¾ƒå¥½çš„æ“ä½œç³»ç»Ÿçš„ï¼Œé‚£ä¹ˆåœ¨è¿›è¡Œç§‘å­¦ä¸Šç½‘çš„æ—¶å€™ï¼ŒåŠ¿å¿…ä¼šç”¨åˆ°ä»£ç†å®¢æˆ·ç«¯ã€‚è¿˜æœ‰ä¸€ç§åœºæ™¯ï¼Œé‚£å°±æ˜¯è¿ç»´äººå‘˜ä¹Ÿä¼šæœ‰ä½¿ç”¨åˆ°çš„å¯èƒ½æ€§ï¼Œæ¯”å¦‚å¸Œæœ›å¿«é€Ÿé€šè¿‡wgetä¸‹è½½å¢™å¤–çš„æ–‡ä»¶èµ„æºç­‰ç­‰ã€‚Â¶ä¸€ã€SSRÂ¶1ã€guiå®¢æˆ·ç«¯ä»£ç†Â¶1.1 shadowsocks-qt5ä»¥pcç«¯çš„ubuntu18.04æ“ä½œç³»ç»Ÿä¸ºä¾‹ï¼šï¼ˆ1ï¼‰æ·»åŠ ppaæº1$ sudo add-apt-repository ppa:hzwhuang/ss-qt5ï¼ˆ2ï¼‰ä¿®æ”¹ppaï¼Œæ”¹æˆå¦‚ä¸‹1http://ppa.launchpad.net/hzwhuang/ss-qt5/ubuntu artful mainï¼ˆ3ï¼‰æ›´æ–°è½¯ä»¶æº1$ sudo apt-get updateï¼ˆ4ï¼‰å®‰è£…1$ sudo apt-get install shadowsocks-qt5ï¼ˆ5ï¼‰å…¶ä»–é—®é¢˜å®‰è£…è¿‡ç¨‹é‡åˆ° libappindicator1 ä¾èµ–é—®é¢˜ï¼ˆdependency problemsï¼‰ï¼Œè€Œ libappindicator1 åˆé‡åˆ° libindicator7ä¾èµ–çš„è§£å†³åŠžæ³•ã€‚ä¸€å¹¶å®‰è£… libappindicator1 libindicator7 ä¾èµ–ï¼Œå†é‡æ–°å®‰è£… shadowsocks-qt5ã€‚1$ sudo apt-get -f install libappindicator1 libindicator7å®ŒæˆåŽå°±å¯ä»¥æ‰“å¼€shadowsocks-qt5å•¦Â¶2ã€ç»ˆç«¯å‘½ä»¤ä»£ç†ä»¥æœåŠ¡å™¨ä¸­çš„centos7æ“ä½œç³»ç»Ÿä¸ºä¾‹ã€‚Â¶2.1 å®‰è£…ssrå®¢æˆ·ç«¯å®¢æˆ·ç«¯å¯ä»¥é€‰æ‹©åŽŸç‰ˆçš„ssrï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨äºŒæ¬¡å¼€å‘çš„å¼€æºé¡¹ç›®ï¼Œæ¯”å¦‚ä¸‹é¢è¿™å‡ ä¸ªä¸é”™ï¼šshadowsocksråŽŸç‰ˆå¤‡ä»½é¡¹ç›® é…ç½®è¾ƒéº»çƒ¦ï¼Œè¿™é‡Œä¸ç”¨ã€‚ssr-helper è¿™ä¸ªé¡¹ç›®ä½¿ç”¨ä½“éªŒå¾ˆæ£’ï¼Œæ¯”å¦‚å¯ä»¥ä½¿ç”¨å‘½ä»¤å¯¼å…¥ssré“¾æŽ¥ã€ssrè®¢é˜…ç­‰ã€‚ä½†æˆ‘å‘çŽ°åœ¨Ubuntuä¸Šä½¿ç”¨æ²¡é—®é¢˜ï¼Œä½†åœ¨centos7ä¸Šæ€»æ˜¯å¤±è´¥ï¼Œæ‰€ä»¥ç›®å‰å…ˆä¸ç”¨è¿™ä¸ªLinux_ssr_script è¿™ä¸ªé¡¹ç›®åŠŸèƒ½å°‘äº†ä¸€ç‚¹ï¼Œä½†æ˜¯åœ¨centos7æ²¡æœ‰é—®é¢˜ï¼ŒäºŽæ˜¯å°±ä½¿ç”¨å®ƒã€‚123$ git clone http://git.mrwang.pw/Reed/Linux_ssr_script.git$ cd Linux_ssr_script &amp;&amp; chmod +x ./ssr$ ./ssr installÂ¶2.2 é…ç½®èŠ‚ç‚¹1$ ./ssr config123456789101112131415161718192021222324&#123; "server": "xxxx.xyz", "server_port": 999, "password": "xxxx", "method": "aes-256-ctr", "protocol": "auth_aes128_md5", "protocol_param": "11215:rZg30E", "obfs": "tls1.2_ticket_auth", "obfs_param": "e082711215.microsoft.com", "server_ipv6": "::", "local_address": "127.0.0.1", "local_port": 1080, "speed_limit_per_con": 0, "speed_limit_per_user": 0, "additional_ports" : &#123;&#125;, "additional_ports_only" : false, "timeout": 120, "udp_timeout": 60, "dns_ipv6": false, "connect_verbose_info": 0, "redirect": "", "fast_open": false&#125;æ ¹æ®æƒ…å†µé…ç½®ssrèŠ‚ç‚¹ä¸€èˆ¬æƒ…å†µï¼šserverï¼ˆæœåŠ¡ç«¯ipï¼‰ã€server_portï¼ˆæœåŠ¡ç«¯ç«¯å£ï¼‰ã€passwordï¼ˆèŠ‚ç‚¹å¯†ç ï¼‰ã€methodï¼ˆåŠ å¯†æ–¹æ³•ï¼‰ã€protocolï¼ˆåè®®ï¼‰ã€protocol_paramï¼ˆåè®®å‚æ•°ï¼‰ã€obfsï¼ˆæ··æ·†ï¼‰ã€obfs_paramï¼ˆæ··æ·†å‚æ•°ï¼‰æ˜¯éƒ½è¦å¡«çš„ã€‚è€Œå…¶ä»–çš„å‚æ•°è§†èŠ‚ç‚¹æƒ…å†µè€Œé…ç½®å³å¯ã€‚Â¶2.3 å¯åŠ¨å®¢æˆ·ç«¯1234567$ ./ssr start# é…ç½®ä»£ç†(æŒ‡å®šhttpå’Œhttpsèµ°socks5ä»£ç†)export http_proxy="socks5://127.0.0.1:1080"export https_proxy="socks5://127.0.0.1:1080"#æˆ–è€…ç›´æŽ¥è®©æ‰€æœ‰ä»£ç†éƒ½èµ°socks5export ALL_PROXY=socks5://127.0.0.1:1080Â¶2.4 æµ‹è¯•ç„¶åŽé€šè¿‡è®¿é—®cip.ccæŸ¥è¯¢ipä¿¡æ¯æ¥æŸ¥çœ‹æ˜¯å¦æˆåŠŸã€‚123456789101112131415161718192021[root@iz2ze4uom6jrktiqj54y48z ~]# curl cip.ccIP : 39.106.195.202åœ°å€ : ä¸­å›½ åŒ—äº¬è¿è¥å•† : é˜¿é‡Œäº‘/ç”µä¿¡/è”é€š/ç§»åŠ¨/é“é€š/æ•™è‚²ç½‘æ•°æ®äºŒ : åŒ—äº¬å¸‚ | é˜¿é‡Œäº‘æ•°æ®ä¸‰ : ä¸­å›½åŒ—äº¬åŒ—äº¬ | é˜¿é‡Œäº‘URL : http://www.cip.cc/39.106.195.202[root@iz2ze4uom6jrktiqj54y48z ~]# export http_proxy="socks5://127.0.0.1:1080"[root@iz2ze4uom6jrktiqj54y48z ~]# export https_proxy="socks5://127.0.0.1:1080"[root@iz2ze4uom6jrktiqj54y48z ~]# curl cip.ccIP : 47.241.70.253åœ°å€ : ä¸­å›½ é¦™æ¸¯ é˜¿é‡Œäº‘æ•°æ®äºŒ : ç¾Žå›½ | é˜¿é‡Œäº‘æ•°æ®ä¸‰ : ç¾Žå›½åŠ åˆ©ç¦å°¼äºšåœ£å…‹æ‹‰æ‹‰ | é˜¿é‡Œå·´å·´URL : http://www.cip.cc/47.241.70.253Â¶2.5 å…³é—­å®¢æˆ·ç«¯1234ssr stopunset http_proxyunset https_proxyunset ALL_PROXYÂ¶2.6. ä»£ç†è½¬å‘Shadowsockså±žäºŽsocks5åè®®ï¼Œé»˜è®¤ä¸å¯¹httpåè®®çš„è¯·æ±‚è¿›è¡Œä»£ç†æ¯”å¦‚åœ¨ä»¥ä¸Šé…ç½®å®ŒæˆåŽæ‰§è¡Œå¦‚ä¸‹å‘½ä»¤æ˜¯è®¿é—®ä¸äº†Googleçš„ã€‚1$ curl www.google.comå¦‚æžœéœ€è¦è®©ä¸€äº›httpç›¸å…³çš„å‘½ä»¤æˆåŠŸèµ°ä»£ç†ï¼Œé‚£ä¹ˆå¯ä»¥å€ŸåŠ©privoxyæŠŠHTTPåè®®è½¬æˆsocks5åè®®å³å¯ã€‚Â¶2.6.1 privoxyä»£ç†è½¬å‘Â¶2.6.1.1 å®‰è£…é…ç½®privoxyï¼ˆ1ï¼‰å®‰è£…é…ç½®12$ sudo yum install privoxy -y$ sudo vi /etc/privoxy/config12345#(1)æ‰¾åˆ°listen-addressç¡®ä¿æœ‰è¿™è¡Œä»£ç  listen-address 127.0.0.1:8118#(2)æ‰¾åˆ°forward-socks5ç¡®ä¿æœ‰ä¸‹é¢è¿™è¡Œä»£ç å¹¶ä¸”æ‰“å¼€æ³¨é‡Š(æ²¡æœ‰è‡ªå·±åŠ ),å…¶ä¸­/ä»£è¡¨åŒ¹é…å…¨éƒ¨ URLï¼Œå³å…¨å±€ä»£ç†forward-socks5 / 127.0.0.1:1080 .12#å¦‚æžœéœ€è¦è‡ªåŠ¨ä»£ç†ï¼Œå¯ä»¥æŠŠ/æ”¹ä¸ºå¦‚ä¸‹ç±»ä¼¼çš„åŒ¹é…è§„åˆ™å³å¯#forward-socks5 .google.com 127.0.0.1:1080 .ï¼ˆ2ï¼‰å¯åŠ¨å¹¶æŸ¥çœ‹privoxyè¿è¡ŒçŠ¶æ€123456#å¯åŠ¨$ systemctl start privoxy#å¼€æœºå¯åŠ¨$ systemctl enable privoxy#æŸ¥çœ‹çŠ¶æ€$ sudo systemctl status privoxyï¼ˆ3ï¼‰é…ç½®çŽ¯å¢ƒå˜é‡è®©httpã€httpså’Œftpåè®®è½¬å‘ç»™privoxyå¤„ç†12345# å…¨å±€çŽ¯å¢ƒå˜é‡/etc/profile# ç”¨æˆ·çŽ¯å¢ƒå˜é‡~/.bash_profileæˆ–è€…~/.bashrc# ======================# é€‰æ‹©ä»¥ä¸Šä¸€ä¸ªçŽ¯å¢ƒå˜é‡é…ç½®æ–‡ä»¶è¿›è¡Œç¼–è¾‘ï¼ˆæ¯”å¦‚é€‰æ‹©~/.bashrcï¼‰$ vi ~/.bashrcåœ¨æœ«å°¾å¤„æ·»åŠ ä»¥ä¸‹çŽ¯å¢ƒå˜é‡1234proxy="http://127.0.0.1:8118"export https_proxy=$proxyexport http_proxy=$proxyexport ftp_proxy=$proxyç„¶åŽåŠ è½½çŽ¯å¢ƒå˜é‡1$ source ~/.bashrcï¼ˆ4ï¼‰æµ‹è¯•è®¿é—®å¤–ç½‘1234# è®¿é—®éœ€è¦ä»£ç†æ‰èƒ½è®¿é—®çš„google$ curl www.google.com# è®¿é—®æœç‹çš„è¿™ä¸ªæŽ¥å£èƒ½å¤Ÿè¿”å›žä½ çš„IPåœ°å€$ curl "http://pv.sohu.com/cityjson?ie=utf-8"Â¶2.6.1.2 privoxyä½¿ç”¨pacæ¨¡å¼ä»£ç†ç»è¿‡ä»¥ä¸Šæµ‹è¯•å¯ä»¥å‘çŽ°èƒ½å¤Ÿä»£ç†æˆåŠŸäº†ã€‚ä½†å‘çŽ°ç›®å‰åœ¨ç»ˆç«¯ä»»ä½•HTTPè¿žæŽ¥å…¨éƒ½èµ°ä»£ç†äº†ï¼Œè¿™ä¸ç¬¦åˆæˆ‘ä»¬çš„é¢„æœŸï¼Œæˆ‘ä»¬å¸Œæœ›çš„è®©ä»£ç†èµ°pacæ¨¡å¼ï¼ˆå³éœ€è¦çš„è¿žæŽ¥æ‰ä»£ç†ï¼Œä¸éœ€è¦çš„å°±ä¸ç”¨ä»£ç†ï¼Œå¦å¤–å¦‚æžœä»£ç†ä¸å¯ç”¨äº†ä¹Ÿä¸ä¼šå½±å“åŽŸæ¥çš„è®¿é—®ï¼‰ã€‚è¦é…ç½®Privoxyçš„pacæ¨¡å¼ï¼Œé¦–å…ˆéœ€è¦ä¸€ä¸ªç¬¦åˆPrivoxyçš„pacè§„åˆ™çš„æ–‡ä»¶ï¼Œå¯ä»¥ä½¿ç”¨GFWList2Privoxyæ¥ç”Ÿæˆã€‚ï¼ˆ1ï¼‰å®‰è£… GFWList2Privoxy1$ pip install --user gfwlist2privoxyï¼ˆ2ï¼‰èŽ·å–gfwlistæ–‡ä»¶ï¼Œç”Ÿæˆactionsfile1234$ cd /tmp$ wget https://raw.githubusercontent.com/gfwlist/gfwlist/master/gfwlist.txt$ ~/.local/bin/gfwlist2privoxy -i gfwlist.txt -f gfwlist.action -p 127.0.0.1:1080 -t socks5$ sudo cp gfwlist.action /etc/privoxy/å…¶ä¸­gfwlist.actionå°±æ˜¯privoxyçš„pacæ–‡ä»¶ï¼Œä¸€èˆ¬é‡Œé¢åŒ…å«çš„æ‰€æœ‰åŸŸåéƒ½éœ€è¦ä»£ç†æ‰èƒ½è®¿é—®çš„ï¼Œå¦‚æžœä»¥åŽæŸä¸ªpacæ–‡ä»¶ä¹‹å¤–çš„ç½‘ç«™ä¹Ÿæƒ³èµ°ä»£ç†çš„è¯ï¼Œé‚£ä¹ˆä»…éœ€è¦æŠŠåŸŸåæ·»åŠ åˆ°pacæ–‡ä»¶é‡Œé¢å°±å¯ä»¥äº†ï¼Œæ¯”å¦‚æ·»åŠ wp.comåˆ°pacé‡Œé¢,é‚£ä¹ˆå¯æ‰§è¡Œä¸‹é¢çš„å‘½ä»¤è¿›è¡Œæ·»åŠ ï¼šecho '.wp.com' &gt;&gt; /etc/privoxy/gfwlist.actionï¼ˆ3ï¼‰é…ç½®privoxy1$ sudo vim /etc/privoxy/config1234#æ³¨é‡ŠæŽ‰è¿™è¡Œï¼Œé˜²æ­¢pacå¤±æ•ˆï¼Œè€Œå…¨éƒ¨èµ°ä»£ç†äº†#forward-socks5 / 127.0.0.1:1080 .#æ¿€æ´»pacæ–‡ä»¶actionsfile gfwlist.actioné‡å¯Privoxy1$ sudo service privoxy restartï¼ˆ4ï¼‰æµ‹è¯•ä»£ç†æ˜¯å¦èµ°äº†pacæ¨¡å¼1234#è®¿é—®googleå‘çŽ°æ²¡é—®é¢˜$ curl www.google.com#è®¿é—®è¯·æ±‚ipä¿¡æ¯ï¼Œè¿”å›žçš„æ˜¯å®¢æˆ·ç«¯çš„IPè€Œä¸æ˜¯ä»£ç†æœåŠ¡å™¨çš„ipï¼Œè¯´æ˜ŽæˆåŠŸèµ°äº†pacæ¨¡å¼$ curl "http://pv.sohu.com/cityjson?ie=utf-8"ç”±äºŽå¼€æœºè‡ªå¯åŠ¨privoxyï¼Œå¹¶ä¸”çŽ¯å¢ƒå˜é‡ä¸­æŒ‡å®šè¯·æ±‚è½¬å‘ç»™privoxyä»¥pacæ¨¡å¼å¤„ç†ï¼Œæ‰€ä»¥åŽç»­åªéœ€è¦ç»´æŠ¤ssrå®¢æˆ·ç«¯å³å¯ã€‚éœ€è¦ä»£ç†å°±å¼€å¯ssrå®¢æˆ·ç«¯ï¼Œä¸éœ€è¦ä¸å¼€å¯å³å¯ã€‚Â¶2.6.2 proxychains4ä»£ç†è½¬å‘ç»è¿‡ä¸Šé¢çš„å®žæˆ˜å¯ä»¥å‘çŽ°privoxyè™½ç„¶å¯ä»¥å®žçŽ°ä»£ç†è½¬å‘çš„ä½œç”¨ï¼Œä½†å®ƒä¾µå…¥æ€§æ¯”è¾ƒå¤§ã€‚ä¸ºäº†â€œè½»é‡â€ï¼Œæˆ‘ä»¬å¯ä»¥é€‰æ‹©ä½¿ç”¨ProxyChainsæ¥å®Œæˆä»£ç†è½¬å‘çš„ç›®çš„ï¼Œå®ƒå¯ä»¥è®©ç”¨æˆ·å†³å®šå‘½ä»¤æ˜¯å¦èµ°ä»£ç†ï¼Œæ¯”å¦‚éœ€è¦èµ°ä»£ç†ï¼Œé‚£ä¹ˆå°±åœ¨å‘½ä»¤çš„æœ€å‰é¢åŠ ä¸Šproxychains4ï¼Œå¦‚æžœä¸éœ€è¦ä¸åŠ å°±è¡Œï¼Œå¦‚æ­¤å®ƒçš„ä¾µå…¥æ€§å°±é™åˆ°äº†å¾ˆä½Žçš„leveläº†ã€‚âž¡ï¸ åœ¨ä½¿ç”¨å‰å…ˆç¡®ä¿å¼€å¯ssrå®¢æˆ·ç«¯ã€‚ï¼ˆ1ï¼‰å®‰è£… proxychains-ng12345$ git clone https://github.com/rofl0r/proxychains-ng.git$ cd proxychains-ng/$ ./configure --prefix=/usr --sysconfdir=/etc$ make &amp;&amp; make install$ make install-config(2) ç¼–è¾‘proxychains é…ç½®æ–‡ä»¶1$ vim /etc/proxychains.conf12345678[ProxyList]# add proxy here ...# meanwile# defaults set to "tor"#æ³¨é‡ŠæŽ‰é»˜è®¤çš„è¿™ä¸ªé…ç½®#socks4 127.0.0.1 9050#æ·»åŠ ä¸‹é¢è¿™ä¸ªé…ç½®socks5 127.0.0.1 1080ï¼ˆ3ï¼‰å¯¹äºŽéœ€è¦ä»£ç†è½¬å‘çš„å‘½ä»¤ï¼Œæˆ‘ä»¬åªéœ€è¦åœ¨è¯¥å‘½ä»¤å‰åŠ ä¸Šproxychains4å³å¯ï¼Œå¦‚ä¸‹ï¼š12345$ proxychains4 wget https://github.com/seata/seata/releases/download/v1.2.0/seata-server-1.2.0.tar.gz$ proxychains4 curl www.google.com$ proxychains4 curl "http://pv.sohu.com/cityjson?ie=utf-8"ðŸ“š å‚è€ƒï¼šhttps://huangweitong.com/229.htmlhttps://juejin.im/post/5c91ff5ee51d4534446edb9aÂ¶äºŒã€V2ray123456789101112131415161718192021#ä¸‹è½½wget https://github.com/v2ray/v2ray-core/releases/download/v4.28.2/v2ray-linux-64.zip#è§£åŽ‹å®‰è£…unzip v2ray-linux-64.zip -d v2raycd v2ray#å¤‡ä»½é»˜è®¤é…ç½®ï¼Œç„¶åŽå¯ä»¥ä»Žwindowsçš„v2rayNä¸­å¯¼å‡ºå®¢æˆ·ç«¯é…ç½®å¹¶å‘½åä¸ºconfig.jsonï¼Œä¸Šä¼ è¦†ç›–è¿™é‡Œçš„config.jsonæ–‡ä»¶å³å¯cp config.json config-back.json#æµ‹è¯•é…ç½®æ˜¯å¦æ­£ç¡®./v2ray -test -config config.json#åŽå°è¿è¡Œnohup ./v2ray -config config.json &gt; /dev/null 2&gt;&amp;1 &amp;#éžåŽå°å¯åŠ¨#./v2ray -config config.json#æµ‹è¯•curl -L https://www.google.com --socks5 127.0.0.1:10808#å…³é—­åŽå°è¿è¡Œçš„v2rayps aux|grep v2ray|grep -v grep | awk '&#123;print $2&#125;'|xargs kill -9Â¶ä¸‰ã€ClashÂ¶1ã€å®‰è£…é…ç½®1234git clone https://github.com/wanhebin/clash-for-linux.gitcd clash-for-linux#ä¿®æ”¹å˜é‡URLçš„å€¼ï¼ˆclashè®¢é˜…åœ°å€ï¼‰vim start.shÂ¶2ã€å¯åŠ¨1234./start.shexport http_proxy=http://127.0.0.1:7890export https_proxy=http://127.0.0.1:7890export no_proxy=127.0.0.1,localhostClash Webç®¡ç†é¡µé¢ï¼šhttp://IP:9090/uiÂ¶3ã€å…³é—­1234./shutdown.shunset http_proxyunset https_proxyunset no_proxy]]></content>
      <categories>
        <category>linux</category>
      </categories>
      <tags>
        <tag>linux</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ubuntuå¸è½½libreofficeå¥—ä»¶ï¼Œå®‰è£…wps]]></title>
    <url>%2Flinux%2Fubuntu_wps.html</url>
    <content type="text"><![CDATA[Â¶0. å¸è½½libreofficeå¥—ä»¶123# sudo apt-get purge libreoffice* # å¸è½½å¹¶ä¸”åˆ é™¤ç›¸å…³é…ç½®# sudo apt-get clean # åˆ é™¤å®‰è£…äº†çš„è½¯ä»¶åŒ…çš„å®‰è£…åŒ…ï¼ˆå¦‚æžœä½ ç¡®å®šè¿™äº›å®‰è£…åŒ…ä¸ä¼šå†ç”¨ï¼‰ã€‚ åˆ é™¤åŒ…ç¼“å­˜ä¸­çš„æ‰€æœ‰åŒ…ã€‚# sudo apt-get autoremove # åˆ é™¤ä¸ºäº†æ»¡è¶³å…¶ä»–è½¯ä»¶åŒ…çš„ä¾èµ–è€Œå®‰è£…çš„ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨å¸è½½è¿™äº›ä¸å†éœ€è¦çš„è½¯ä»¶åŒ…Â¶1.ä¸‹è½½wps1wget http://kdl.cc.ksosoft.com/wps-community/download/6634/wps-office_10.1.0.6634_amd64.debÂ¶2.å®‰è£…wps1sudo dpkg -i wps-office_10.1.0.6634_amd64.debÂ¶3.å…¶ä»–é—®é¢˜å¯åŠ¨WPS for LinuxåŽï¼Œå¯èƒ½ä¼šå‡ºçŽ°æç¤º&quot;ç³»ç»Ÿç¼ºå¤±å­—ä½“&quot; ã€‚å‡ºçŽ°æç¤ºçš„åŽŸå› æ˜¯å› ä¸ºWPS for Linuxæ²¡æœ‰è‡ªå¸¦windowsçš„å­—ä½“ï¼Œåªè¦åœ¨Linuxç³»ç»Ÿä¸­åŠ è½½å­—ä½“å³å¯ã€‚å…·ä½“æ“ä½œæ­¥éª¤å¦‚ä¸‹ï¼šÂ¶ï¼ˆ1ï¼‰ä¸‹è½½ç¼ºå¤±çš„å­—ä½“æ–‡ä»¶å¤åˆ¶å­—ä½“æ–‡ä»¶åˆ°Linuxç³»ç»Ÿä¸­çš„/usr/share/fontsæ–‡ä»¶å¤¹ä¸­ã€‚å›½å¤–ä¸‹è½½åœ°å€ï¼šhttps://www.dropbox.com/s/lfy4hvq95ilwyw5/wps_symbol_fonts.zipå›½å†…ä¸‹è½½åœ°å€ï¼šhttps://pan.baidu.com/s/1eS6xIzoï¼ˆä¸Šè¿°æ•°æ®æ¥æºç½‘ç»œï¼Œä¾µåˆ ï¼‰ä¸‹è½½å®ŒæˆåŽï¼Œè§£åŽ‹å¹¶è¿›å…¥ç›®å½•ä¸­ï¼Œç»§ç»­æ‰§è¡Œï¼š1# sudo cp ./* /usr/share/fontsÂ¶ï¼ˆ2ï¼‰æ‰§è¡Œä»¥ä¸‹å‘½ä»¤,ç”Ÿæˆå­—ä½“çš„ç´¢å¼•ä¿¡æ¯12# sudo mkfontscale# sudo mkfontdirÂ¶ï¼ˆ3ï¼‰è¿è¡Œfc-cacheå‘½ä»¤æ›´æ–°å­—ä½“ç¼“å­˜1# sudo fc-cacheÂ¶ï¼ˆ4ï¼‰é‡å¯wpså³å¯ï¼Œå­—ä½“ç¼ºå¤±çš„æç¤ºä¸å†å‡ºçŽ°ã€‚]]></content>
      <categories>
        <category>linux</category>
      </categories>
      <tags>
        <tag>ubuntu</tag>
        <tag>wps</tag>
        <tag>libreoffice</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ubuntuä¸‹æ­å»ºjavawebçŽ¯å¢ƒ]]></title>
    <url>%2Fdevops%2Fubuntu_javaweb.html</url>
    <content type="text"><![CDATA[Â¶ä¸€ã€å®‰è£…JDKÂ¶1.ä¸‹è½½å¹¶è§£åŽ‹jdkåˆ°æŒ‡å®šç›®å½•ä¸‹è½½åœ°å€ï¼šhttps://www.oracle.com/technetwork/java/javase/downloads/java-archive-javase8-2177648.htmlè¿™é‡Œæˆ‘ä¸‹è½½çš„æ˜¯jdk-8u171-linux-x64.tar.gzï¼Œå°†åŽ‹ç¼©åŒ…æ”¾åˆ°/home/wen/MyPackage/1234567cd /usr/local/su mkdir javacd java/cp /home/wen/MyPackage/jdk-8u171-linux-x64.tar.gz ./tar -zxvf jdk-8u171-linux-x64.tar.gz rm jdk-8u171-linux-x64.tar.gzÂ¶2.æ·»åŠ çŽ¯å¢ƒå˜é‡1vim /etc/profileæ–‡ä»¶æœ«å°¾æ·»åŠ ï¼š123export JAVA_HOME=/usr/local/java/jdk1.8.0_171export PATH=$&#123;JAVA_HOME&#125;/bin:$PATHexport CLASSPATH=.:$&#123;JAVA_HOME&#125;/lib/dt.jar:$JAVA_HOME/lib/tools.jarÂ¶3.æ›´æ–°çŽ¯å¢ƒå˜é‡1source /etc/profile #é‡æ–°æ‰§è¡Œåˆšä¿®æ”¹çš„åˆå§‹åŒ–æ–‡ä»¶ï¼Œä½¿ä¹‹ç«‹å³ç”Ÿæ•ˆï¼Œè€Œä¸å¿…æ³¨é”€å¹¶é‡æ–°ç™»å½•Â¶äºŒã€å®‰è£…tomcat1234wget https://archive.apache.org/dist/tomcat/tomcat-8/v8.5.31/bin/apache-tomcat-8.5.31.tar.gzmkdir -p /usr/local/tomcattar -zxvf apache-tomcat-8.5.31.tar.gz -C /usr/local/tomcatrm apache-tomcat-8.5.31.tar.gzÂ¶ä¸‰ã€å®‰è£…mysqlÂ¶1.å®‰è£…mysql-serverã€mysql-clientå’Œlibmysqlclient-dev123sudo apt-get install mysql-serversudo apt install mysql-clientsudo apt install libmysqlclient-devç”±äºŽMySQL5.7ç‰ˆæœ¬æœ€é«˜åªé€‚é…åˆ°Ubuntu17.04ï¼Œå¦‚è¦åœ¨18.04ä¸Šå®‰è£…mysql5.7ï¼Œéœ€è¦é€šè¿‡ä»¥ä¸‹æ–¹å¼å®‰è£…:ä¸‹è½½https://dev.mysql.com/get/mysql-apt-config_0.8.11-1_all.deb mysqlè½¯ä»¶æºåŒ…å¹¶å®‰è£…ã€‚sudo dpkg -i mysql-apt-config_0.8.11-1_all.debå®‰è£…æ‰§è¡Œç„¶åŽä¼šå‡ºçŽ°ä¸€ä¸ªç´«è‰²æ¡†ç•Œé¢ã€‚å®ƒæœ‰å››ä¸ªé€‰é¡¹ã€‚é€‰æ‹©ç¬¬ä¸€ä¸ªï¼Œenterç¡®å®šï¼Œç„¶åŽåˆä¼šå‡ºçŽ°ä¸€ä¸ªç´«è‰²æ¡†ç•Œé¢ï¼Œé€‰æ‹©8.0é‚£ä¸ªã€‚enterç¡®å®šï¼Œä¼šå›žåˆ°ç¬¬ä¸€ä¸ªç´«è‰²æ¡†ï¼Œæ­¤æ—¶æŒ‰ä¸Šä¸‹é”®é€‰æ‹© okï¼Œenterç¡®å®šã€‚ä¹‹åŽæ‰§è¡Œsudo apt-get updatesudo apt-get install mysql-serverå®‰è£…è¿‡ç¨‹ä¸­ä¼šè¯¢é—®ï¼Œéƒ½é€‰æ‹©yeså®‰è£…æœ€åŽä¼šå‡ºçŽ°ç´«è‰²æ¡†ï¼Œè®©ä½ è¾“å…¥å¯†ç ï¼Œè¾“å…¥å®Œæˆä¹‹åŽï¼Œä¼šå†è®©ä½ è¾“å…¥ä¸€éã€‚ç¡®å®šã€‚è¾“å…¥å®Œæˆä¹‹åŽï¼Œä¼šå‡ºçŽ°ç´«è‰²æ¡†é—®ä½ é€‰æ‹©å¯†ç çš„åŠ å¯†æ–¹å¼ã€‚å› ä¸ºç¬¬ä¸€ç§åŠ å¯†æ–¹å¼Ubuntuä¸æ”¯æŒï¼Œæ‰€ä»¥æˆ‘ä»¬é€‰æ‹©ç¬¬äºŒä¸ªåŠ å¯†æ–¹å¼ã€‚enterç¡®å®šã€‚æ­¤æ—¶å¯åŠ¨MySQLï¼šservice mysql startè¿›å…¥MySQLï¼šmysql -uroot -på¸è½½mysql:1234sudo apt purge mysql-*sudo rm -rf /etc/mysql/ /var/lib/mysqlsudo apt autoremovesudo apt autorecleanÂ¶2.æµ‹è¯•mysqlæ˜¯å¦å®‰è£…æˆåŠŸå®‰è£…æˆåŠŸåŽå¯ä»¥é€šè¿‡ä¸‹é¢çš„å‘½ä»¤æµ‹è¯•æ˜¯å¦å®‰è£…æˆåŠŸï¼š12sudo netstat -tap | grep mysqlmysql -uroot -pä½ çš„å¯†ç Â¶3.è®¾ç½®mysqlå…è®¸è¿œç¨‹è®¿é—®é¦–å…ˆç¼–è¾‘æ–‡ä»¶/etc/mysql/mysql.conf.d/mysqld.cnf1sudo vi /etc/mysql/mysql.conf.d/mysqld.cnfæ³¨é‡ŠæŽ‰bind-address = 127.0.0.1Â¶4.æŽˆæƒä¿å­˜é€€å‡ºï¼Œç„¶åŽè¿›å…¥mysqlæœåŠ¡ï¼Œæ‰§è¡ŒæŽˆæƒå‘½ä»¤ï¼š12grant all on *.* to root@&#39;%&#39; identified by &#39;ä½ çš„å¯†ç &#39; with grant option;flush privileges;Â¶5.é‡å¯mysqlç„¶åŽæ‰§è¡Œquitå‘½ä»¤é€€å‡ºmysqlæœåŠ¡ï¼Œæ‰§è¡Œå¦‚ä¸‹å‘½ä»¤é‡å¯mysql1service mysql restartÂ¶6.è¿œç¨‹è¿žæŽ¥æµ‹è¯•é€šè¿‡windowsçš„cmdè¾“å…¥ï¼š1mysql -h 192.168.5.116 -P 3306 -u root -p123456Â¶7.å…¶ä»–é—®é¢˜Mysqlç™»å½•æƒé™é—®é¢˜Ubuntu18.04 å®‰è£…mysqlæˆ–è€…mariadbä¹‹åŽï¼Œå‘çŽ°æ™®é€šç”¨æˆ·å’Œè¿œç¨‹éƒ½æ²¡æœ‰æƒé™è¿žæŽ¥ã€‚ERROR 1045: Access denied for user: 'root@localhost' (Using password: YES)ä¿®æ”¹äº†å¯†ç ä¹Ÿä¸å¯¹ã€‚ç„¶åŽsudo mysql -u rootå³å¯ç™»å½•ã€‚è¿™æ˜¾ç„¶ä¸æ˜¯æˆ‘ä»¬æƒ³è¦çš„ã€‚è§£å†³æ–¹æ¡ˆï¼šåˆ é™¤rootï¼Œé‡æ–°åˆ›å»ºç”¨æˆ·ã€‚é¦–å…ˆï¼Œç™»å½•1mysql&gt; sudo mysql -u rootç„¶åŽæŸ¥çœ‹å½“å‰ç”¨æˆ·1mysql&gt; SELECT User,Host FROM mysql.user;UserHostadminlocalhostdebian-sys-maintlocalhostmagento_userlocalhostmysql.syslocalhostrootlocalhoståˆ é™¤rootè´¦å·1mysql&gt; DROP USER &#39;root&#39;@&#39;localhost&#39;;é‡æ–°åˆ›å»ºrootï¼šâ€™@â€™%'æ—¶å…è®¸è¿œç¨‹ç™»å½•1mysql&gt; CREATE USER &#39;root&#39;@&#39;%&#39; IDENTIFIED BY &#39;123456&#39;;æŽˆæƒ123mysql&gt; GRANT ALL PRIVILEGES ON *.* TO &#39;root&#39;@&#39;%&#39; WITH GRANT OPTION;mysql&gt; FLUSH PRIVILEGES;å…³äºŽé‡ç½®å¯†ç 1mysql&gt; SET PASSWORD FOR root@&#39;localhost&#39; &#x3D; PASSWORD(&#39;password&#39;);or1mysql&gt; UPDATE mysql.user SET Password&#x3D;PASSWORD(&#39;newpwd&#39;) WHERE User&#x3D;&#39;root&#39;;or123mysql&gt; USE mysqlmysql&gt; UPDATE user SET Password &#x3D; PASSWORD(&#39;newpwd&#39;)mysql&gt; WHERE Host &#x3D; &#39;localhost&#39; AND User &#x3D; &#39;root&#39;;]]></content>
      <categories>
        <category>linux</category>
      </categories>
      <tags>
        <tag>mysql</tag>
        <tag>ubuntu</tag>
        <tag>jdk</tag>
        <tag>tomcat</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ubuntuå¿…å¤‡ä¼˜åŒ–]]></title>
    <url>%2Flinux%2Fubuntu_advantage.html</url>
    <content type="text"><![CDATA[Â¶1ã€å¼€æ”¾rootç”¨æˆ·ç™»å½•ï¼Œæ·»åŠ rootå¯†ç 1# sudo passwdÂ¶2ã€ä¿®æ”¹è½¯ä»¶æºÂ¶ï¼ˆ1ï¼‰ å¤åˆ¶åŽŸæ–‡ä»¶å¤‡ä»½1# sudo sudo cp /etc/apt/sources.list /etc/apt/sources.list.bakÂ¶ï¼ˆ2ï¼‰ æ·»åŠ æºåœ°å€1# vim /etc/apt/sources.listå°†åŽŸæ¥çš„åˆ—è¡¨å…¨éƒ¨åˆ é™¤,æ·»åŠ å¦‚ä¸‹å†…å®¹ï¼š12345678910deb http://mirrors.aliyun.com/ubuntu/ bionic main restricted universe multiversedeb-src http://mirrors.aliyun.com/ubuntu/ bionic main restricted universe multiversedeb http://mirrors.aliyun.com/ubuntu/ bionic-security main restricted universe multiversedeb-src http://mirrors.aliyun.com/ubuntu/ bionic-security main restricted universe multiversedeb http://mirrors.aliyun.com/ubuntu/ bionic-updates main restricted universe multiversedeb-src http://mirrors.aliyun.com/ubuntu/ bionic-updates main restricted universe multiversedeb http://mirrors.aliyun.com/ubuntu/ bionic-backports main restricted universe multiversedeb-src http://mirrors.aliyun.com/ubuntu/ bionic-backports main restricted universe multiversedeb http://mirrors.aliyun.com/ubuntu/ bionic-proposed main restricted universe multiversedeb-src http://mirrors.aliyun.com/ubuntu/ bionic-proposed main restricted universe multiverseÂ¶ï¼ˆ3ï¼‰ ä¿®æ”¹å®ŒæˆåŽï¼Œä¿å­˜æ–‡ä»¶ï¼Œæ›´æ–°ä¸€ä¸‹12# sudo apt-get update # sudo apt-get upgradeÂ¶Â¶3ã€å®‰è£…deepin-wineÂ¶ï¼ˆ1ï¼‰ å…‹éš†deepin-wine1# git clone https://github.com/wszqkzqk/deepin-wine-ubuntu.gitä¸‹è½½å®ŒåŽè¿›å…¥åŒ…ç›®å½•é‡Œï¼Œåœ¨ç»ˆç«¯ä¸­è¿è¡Œï¼ˆæŽˆäºˆå¯æ‰§è¡Œæƒé™åŽï¼‰ï¼šï¼ˆ2ï¼‰ å®‰è£…12# cd deepin-wine-ubuntu/# ./install.shå¦‚æžœåœ¨/optç›®å½•ä¸‹æœ‰deepinwineè¯´æ˜Žå®‰è£…å®Œæ¯•Â¶ï¼ˆ3ï¼‰ ä½¿ç”¨è¯´æ˜Žä½¿ç”¨wgetä¸‹è½½å¹¶å®‰è£…æ‰€éœ€è¦çš„deepin-wineå®¹å™¨_ï¼ˆå»ºè®®åœ¨ç»ˆç«¯ä¸‹ä½¿ç”¨dpkg -iå®‰è£…å®¹å™¨ï¼Œå¦åˆ™å®¹æ˜“è¯¯æŠ¥ä¾èµ–é”™è¯¯ï¼‰_æŽ¨èä½¿ç”¨ç‰¹åˆ«å…¼å®¹æ”¯æŒåŒ…ï¼šQQ1# wget http://mirrors.aliyun.com/deepin/pool/non-free/d/deepin.com.qq.im/deepin.com.qq.im_8.9.19983deepin23_i386.deb1# sudo dpkg -i deepin.com.qq.im_8.9.19983deepin23_i386.debå‡ºçŽ°ä»¥ä¸‹å®‰è£…å›¾æ ‡å³ä¸ºå®‰è£…æˆåŠŸä»¥ä¸‹çš„å®‰è£…å’Œä»¥ä¸ŠQQçš„å®‰è£…ç±»ä¼¼å¾®ä¿¡1http://mirrors.aliyun.com/deepin/pool/non-free/d/deepin.com.wechat/deepin.com.wechat_2.6.2.31deepin0_i386.debç™¾åº¦ç½‘ç›˜http://mirrors.aliyun.com/deepin/pool/non-free/d/deepin.com.baidu.pan/deepin.com.baidu.pan_5.5.4deepin8_i386.deb è¿…é›·æžé€Ÿç‰ˆhttp://mirrors.aliyun.com/deepin/pool/non-free/d/deepin.com.thunderspeed/deepin.com.thunderspeed_7.10.35.366deepin17_i386.deb Â¶4ã€å®‰è£…æœç‹—æ‹¼éŸ³Â¶ï¼ˆ1ï¼‰æ£€æµ‹æ˜¯å¦å®‰è£…fcitxé¦–å…ˆæ£€æµ‹æ˜¯å¦æœ‰fcitxï¼Œå› ä¸ºæœç‹—æ‹¼éŸ³ä¾èµ–fcitx1# fcitxå¦‚ä¸‹è¡¨ç¤ºæœªæœ‰å®‰è£…ï¼Œå¦åˆ™è·³è¿‡å®‰è£…æ­¥éª¤å®‰è£…fcitx-binå’Œfcitx-table12# sudo apt install fcitx-bin# sudo apt-get install fcitx-tableÂ¶ï¼ˆ2ï¼‰ä¸‹è½½æœç‹—è¾“å…¥æ³•ä¸‹è½½åœ°å€ï¼šhttps://pinyin.sogou.com/linux/Â¶ï¼ˆ3ï¼‰å®‰è£…æœç‹—è¾“å…¥æ³•123# sudo dpkg -i sogoupinyin_2.2.0.0108_amd64.deb #å®‰è£…sogoupinyin# sudo apt --fix-broken install #ä¿®å¤ä¾èµ– # sudo dpkg -i sogoupinyin_2.2.0.0108_amd64.deb #å†æ¬¡å®‰è£…sogoupinyiné‡å¯ç³»ç»ŸåŽè®¾ç½®æœç‹—è¾“å…¥æ³•åˆ°æœ€å‰é¢ï¼ŒæŒ‰Ctrl+ç©ºæ ¼é”®åˆ‡æ¢è¾“å…¥æ³•å³å¯æ­£å¸¸ä½¿ç”¨æœç‹—è¾“å…¥æ³•Â¶5ã€Gnomeæ¡Œé¢ã€ä¸»é¢˜ç¾ŽåŒ–Â¶ï¼ˆ1ï¼‰å®‰è£…gnome-shellUbuntu16.04éœ€è¦å®‰è£…gnomeæ¡Œé¢ç³»ç»Ÿï¼Œå®‰è£…å¥½åŽè¿˜éœ€è¦é€€å‡ºå½“å‰è´¦æˆ·ï¼Œé€‰æ‹©GNOMEæ¡Œé¢ç³»ç»Ÿã€‚ï¼ˆUbuntu18.04é»˜è®¤æ¡Œé¢å³ä¸ºGnomeï¼Œå¯è·³è¿‡æ­¤å‘½ä»¤å’Œæ­¥éª¤ï¼‰Ubuntu16.04å®‰è£…gnome-shellå‘½ä»¤ï¼š1# sudo apt-get install gnome-shellÂ¶ï¼ˆ2ï¼‰å®‰è£…ç¾ŽåŒ–ç®¡ç†å™¨(ä¼˜åŒ–)1# sudo apt install gnome-tweak-toolå¦‚ä¸‹å›¾å³ä¸ºå®‰è£…æˆåŠŸÂ¶ï¼ˆ3ï¼‰æµè§ˆå™¨å®‰è£…Gnome-shell extensionsæ’ä»¶æ­¤æ’ä»¶èƒ½è®©ç”¨æˆ·æ–¹ä¾¿åœ¨æµè§ˆå™¨å®‰è£…ç®¡ç†ä¸»é¢˜ã€‚æ‰€éœ€è¦çš„webæµè§ˆå™¨å¿…é¡»æ˜¯èƒ½å¤Ÿæ”¯æŒé™„ä»¶ç»„ä»¶çš„æµè§ˆå™¨ï¼Œå¦‚chromeã€firfoxã€operaç­‰ï¼Œç”¨æ­¤æµè§ˆå™¨æ‰“å¼€https://extensions.gnome.org/ ï¼Œå‡ºçŽ°å¦‚ä¸‹æƒ…å†µä¸ç”¨ç®¡ï¼Œç›´æŽ¥ç‚¹å‡»é“¾æŽ¥Click here to install browser extension. ä¸ºå½“å‰æµè§ˆå™¨å®‰è£…æ‰©å±•ï¼Œä¹‹åŽï¼Œä½ ä¼šå‘çŽ°ä½ çš„æµè§ˆå™¨å¤šå‡ºäº†ä¸€ä¸ªæ’ä»¶ã€‚ç‚¹å‡»å³ä¸Šè§’çš„å°å›¾æ ‡ï¼Œä½ å¯èƒ½ä¼šè¿˜ä¼šæ”¶åˆ°å¦‚ä¸‹å›¾çš„è­¦å‘Šï¼šé“¾æŽ¥ä¸­çš„documentationæ˜¯å‘Šè¯‰ä½ è¦ä¸ºç³»ç»Ÿå®‰è£…chrome-gnome-shell (è™½ç„¶æœ‰chromeï¼Œä½†ä¸Žchromeæ²¡æœ‰å…³ç³»)ï¼Œå¯¹äºŽUbuntu16.04å®‰è£…gnome-shellæ—¶å·²ç»å®‰è£…äº†chrome-gnome-shellï¼Œå¯è·³è¿‡ï¼Œå¦‚æžœæ˜¯Ubuntu18.04è¯·æ‰§è¡Œï¼š1sudo apt install chrome-gnome-shellÂ¶ï¼ˆ4ï¼‰å®‰è£…gnomeæ‰©å±•å®‰è£…å¥½ä¹‹åŽåˆ·æ–°æµè§ˆå™¨å°±ä¸ä¼šæœ‰è­¦å‘Šäº†ï¼Œç„¶åŽä½ å°±å¯ä»¥æ ¹æ®éœ€è¦æ‰¾åˆ°ç›¸åº”çš„Gnomeæ‰©å±•ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œåªéœ€è¦ç‚¹å‡»ç±»ä¼¼å¼€å…³çš„æŒ‰é’®å³å¯è‡ªåŠ¨å®‰è£…ã€‚å®‰è£…ä»¥ä¸‹æ’ä»¶ï¼šæœ¬æ–‡çš„ç¾ŽåŒ–å®‰è£…äº†å¦‚ä¸‹çš„æ‰©å±•ï¼šâ‘ User Themes: ä½œç”¨æ˜¯ä»Žç”¨æˆ·ç›®å½•åŠ è½½ä¸»é¢˜ã€‚é€šä¿—çš„è¯´å°±æ˜¯ï¼Œæ­£å¸¸çš„ä¸»é¢˜åŒ…ä¸‹è½½åŽï¼Œè¦æ”¾ç½®åœ¨/user/share/themesä¸‹ï¼Œè¿™æ˜¯å¤šç”¨æˆ·å…±åŒä½¿ç”¨çš„ä¸»é¢˜ï¼Œè€Œä¸”ç³»ç»Ÿé‡è£…åŽå°†å¤±åŽ»è¯¥ä¸»é¢˜ï¼Œè€ŒUser Themesæ‰©å±•èƒ½å…è®¸ä½ æŠŠä¸»é¢˜åŒ…æ”¾ç½®åœ¨è‡ªå·±å®¶ç›®å½•.local/share/themes(themesæ–‡ä»¶å¤¹æ˜¯è‡ªå·±æ–°å»ºçš„)ä¸‹ï¼Œå¹¶ä½¿å…¶ç”Ÿæ•ˆã€‚â‘¡Dash to Dock : ä½œç”¨æ˜¯åˆ¶å®šDockå’ŒDashï¼ŒDockå°±æ˜¯ç±»ä¼¼windowsç³»ç»Ÿçš„ä»»åŠ¡æ çš„ä¸œä¸œï¼Œè€ŒDashå°±æ˜¯æœç´¢çš„ä¸œä¸œã€‚ä½ ä¹Ÿå¯ä»¥ç”¨Dash to Panelè¿™ä¸ªæ‰©å±•â‘¢Gnome Global Application Menuï¼šä½œç”¨çœ‹ä¸‹å›¾ï¼Œå°†ä¸€ä¸ªåº”ç”¨çª—å£çš„èœå•é¡¹æ”¾ç½®åœ¨äº†æ¡Œé¢é¡¶éƒ¨æ ä¸­ã€‚â‘£TopIcons Plus: èµ·åˆ°äº†ä»»åŠ¡æ çš„ä½œç”¨,ä¸€äº›ç¨‹åºçš„å›¾æ ‡ä¼šæ˜¾ç¤ºå‡ºæ¥ã€‚Â¶ï¼ˆ5ï¼‰ä¸‹è½½å®‰è£…åº”ç”¨ä¸»é¢˜ã€shellä¸»é¢˜ã€å›¾æ ‡ä¸»é¢˜å¯¹äºŽGnomeæ¡Œé¢ï¼Œä½ æœ€éœ€è¦è¿žæŽ¥çš„å°±æ˜¯è¿™ä¸ªç½‘ç«™https://www.gnome-look.org/ï¼Œå®ƒæä¾›äº†åŒ…æ‹¬ä¸»é¢˜ã€å›¾æ ‡ã€å­—ä½“ç­‰åœ¨å†…çš„å¾ˆå¤šåŒ…ã€‚å› ä¸ºåœ¨ä¸Šè¿°ä¸­å®‰è£…äº†User Themes æ‰©å±•ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥æŠŠä¸‹è½½å¥½çš„ä¸»é¢˜æ”¾ç½®åœ¨è‡ªå·±çš„å®¶ç›®å½•ä¸‹ï¼Œä¸ºæ­¤ï¼Œåœ¨/home/ç”¨æˆ·å/.local/share/ä¸­æ–°å»ºthemesã€fontsã€icons ä¸‰ä¸ªæ–‡ä»¶å¤¹ï¼Œåˆ†åˆ«å­˜æ”¾ä¸»é¢˜ã€å­—ä½“å’Œå›¾æ ‡ ã€‚1# mkdir themes fonts iconsâ‘ åº”ç”¨ä¸»é¢˜ï¼šæˆ‘ä»¬é€šè¿‡gnome-lookå®˜ç½‘ä¸‹è½½ä¸€ä¸ªå¿ƒä»ªçš„ä¸»é¢˜ã€‚è¿™é‡Œæˆ‘ä»¬é€‰æ‹©X-Arc-Collectionã€‚å¤åˆ¶ä»¥ä¸‹4ä¸ªç›®å½•ï¼ˆæˆ–è€…é€‰ä¸€ä¸ªï¼Œä¸ºäº†å’Œæˆ‘çš„æ•™ç¨‹ä¸€è‡´ï¼Œé‚£å°±å…¨éƒ½å¤åˆ¶ï¼‰åˆ°.local/share/themesä¸­ã€‚1# sudo cp -r X-Arc-Collection-v1.4.9/* /home/wen/.local/share/themes/â‘¡shellä¸»é¢˜ï¼šä¸‹è½½å¦‚ä¸‹å›¾æ‰€ç¤ºçš„shellä¸»é¢˜ï¼Œä¸‹è½½åŽï¼Œå°†Human-NEXTæ–‡ä»¶å¤åˆ¶åˆ°.local/share/themes ä¸­ã€‚1# sudo cp -r Human-NEXT /home/wen/.local/share/themes/â‘¢å›¾æ ‡ä¸»é¢˜ï¼šå¯ä»¥åœ¨https://www.gnome-look.org/å®˜ç½‘ä¾§æ Icon Themes ï¼ˆå¦‚ä¸‹å›¾ï¼‰æ‰¾åˆ°éœ€è¦çš„å›¾æ ‡ï¼Œç„¶åŽä¸‹è½½ï¼ŒåŒæ ·å¯ä»¥é€šè¿‡æ·»åŠ æºï¼Œä¸‹è½½å®‰è£…åˆ«äººå¼€å‘å¥½çš„ä¸»é¢˜æ ·å¼ï¼Œæ”¾ç½®åœ¨.local/share/icons ä¸­ã€‚é€šè¿‡gnome-lookå®˜ç½‘ä¸‹è½½å®‰è£…ï¼ˆè¿™é‡Œæˆ‘æ²¡ä½¿ç”¨è¯¥æ–¹å¼ï¼‰é€šè¿‡æ·»åŠ æºï¼Œä¸‹è½½å®‰è£…(è¿™é‡Œæˆ‘ä½¿ç”¨çš„æ˜¯è¯¥æ–¹å¼)123# sudo add-apt-repository ppa:snwh/pulp# sudo apt-get update # sudo apt-get install paper-icon-themeÂ¶ï¼ˆ6ï¼‰é€šè¿‡Gnome-tweak-toolç»Ÿä¸€å¯¹ä»¥ä¸Šå®‰è£…å¥½çš„å„ç§ä¸»é¢˜è¿›è¡Œè®¾ç½®ã€‚â‘ ä¼˜åŒ–shellâ‘¡çª—å£ä¸‰å¤§é”®å·¦ç§»å’Œdockä¸‹ç§»â‘¢æ¡Œé¢æ·»åŠ ä¸»æ–‡ä»¶å¤¹â‘£æœ€åŽè®¾ç½®ä¸€å¼ å£çº¸è¿™é‡Œæˆ‘å°±ä¸åˆ†äº«å£çº¸å’¯~æœ€ç»ˆæ•ˆæžœï¼š]]></content>
      <categories>
        <category>linux</category>
      </categories>
      <tags>
        <tag>ubuntu</tag>
        <tag>æ·»åŠ rootå¯†ç </tag>
        <tag>ä¿®æ”¹è½¯ä»¶æº</tag>
        <tag>deepin-wine</tag>
        <tag>æœç‹—æ‹¼éŸ³</tag>
        <tag>gnome</tag>
        <tag>ä¸»é¢˜ç¾ŽåŒ–</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[pinghsuä¸»é¢˜å…¨æ–‡é»˜è®¤ç¼©ç•¥å›¾æ”¹ä¸ºéšæœºå›¾]]></title>
    <url>%2Fblog%2Fpinghsu_images.html</url>
    <content type="text"><![CDATA[ä¸»é¢˜ç›®å½•ä¸‹çš„index.phpéœ€è¦ä¿®æ”¹å››å¤„åœ°æ–¹ï¼š123456789101112style="background-image:url(&lt;?php parseFieldsThumb($this);?&gt;);"&gt;&lt;/div&gt;æœ‰ä¸¤å¤„éœ€è¦ä¿®æ”¹ä¸ºä»¥ä¸‹-------&gt;style="background-image:url(&lt;?php $this-&gt;options-&gt;themeUrl('images/thumbs/'.mt_rand(0,9).'.jpg'); ?&gt;);"&gt;&lt;/div&gt;style="background-image:url(&lt;?php echo $thumb;?&gt;);"&gt;&lt;/div&gt;æœ‰ä¸¤å¤„éœ€è¦ä¿®æ”¹ä¸ºä»¥ä¸‹-------&gt;style="background-image:url(&lt;?php $this-&gt;options-&gt;themeUrl('images/thumbs/'.mt_rand(0,9).'.jpg'); ?&gt;);"&gt;&lt;/div&gt;]]></content>
      <categories>
        <category>blog</category>
      </categories>
      <tags>
        <tag>pinghsu</tag>
        <tag>ç¼©ç•¥å›¾</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[windows10å®‰è£…gitå¹¶è¿žæŽ¥github]]></title>
    <url>%2Ftools%2Fwin_git.html</url>
    <content type="text"><![CDATA[æœ¬æ–‡ç›®çš„å°±æ˜¯åœ¨æœ¬åœ°å®¢æˆ·ç«¯ä½¿ç”¨gitå·¥å…·è¿žæŽ¥githubè¿œç¨‹ä»“åº“ï¼Œå°†ä»£ç æ‰˜ç®¡åˆ°githubä¸­ã€‚å¹¶æ‹“å±•æ€§çš„å­¦ä¹ ä¸€äº›åŸºæœ¬çš„gitå‘½ä»¤ã€‚Â¶ä¸€ã€gitå®‰è£…å®˜æ–¹ä¸‹è½½ç½‘å€ï¼šhttps://git-scm.com/download/winå®‰è£…ï¼šä¸€è·¯ä¸‹ä¸€æ­¥ï¼Œå‚»ç“œå¼å®‰è£…å³å¯æœ¬æ•™ç¨‹çš„gitå®‰è£…çŽ¯å¢ƒæ˜¯Windows10ï¼Œlinuxçš„å®‰è£…å’Œæ“ä½œå¤§åŒå°å¼‚ã€‚ä¸è¿‡è¿˜æ˜¯è§£é‡Šä¸€ä¸‹ï¼šÂ¶1. ä¿®æ”¹å®‰è£…ç›®å½•å»ºè®®ä¿®æ”¹åˆ°éžCç›˜çš„ç›®å½•Â¶2. é€‰æ‹©å®‰è£…ç»„ä»¶é€‰æ‹©é»˜è®¤git Bash Hereå¯ä»¥ä»Žå½“å‰æ–‡ä»¶å¤¹æ‰“å¼€gitå‘½ä»¤è¡Œç•Œé¢git GUI Here å¯ä»¥æ‰“å¼€å›¾å½¢ç•Œé¢Â¶3. åˆ›å»ºå¼€å§‹èœå•ç›®å½•é€‰æ‹©é»˜è®¤Â¶4. é€‰æ‹©ç¼–è¾‘å™¨é€‰æ‹©é»˜è®¤Â¶5. è°ƒæ•´çŽ¯å¢ƒè·¯å¾„é€‰æ‹©é»˜è®¤è¿™é‡Œçš„ä¸‰ä¸ªé€‰é¡¹çš„æ„æ€ï¼šAã€use git from git bash onlyåªèƒ½ä»Žgit bashé‡Œé¢ä½¿ç”¨gitå‘½ä»¤ï¼Œå³ä¸èƒ½åœ¨cmdå‘½ä»¤è¡Œä¸­ä½¿ç”¨ï¼Œåº”ä¸ºè¿™ä¸ªé€‰é¡¹ä¸ä¼šæŠŠgitå‘½ä»¤åŠ  å…¥åˆ°çŽ¯å¢ƒå˜é‡ä¸­ã€‚Bã€user git from the widowscommand promptåœ¨cmdå‘½ä»¤è¡Œä¸­ä½¿ç”¨gitå‘½ä»¤ï¼Œå¯ä»¥åœ¨git bashå’Œcmdä¸­åŒæ—¶ä½¿ç”¨gitå‘½ä»¤ï¼Œä¼šè‡ªåŠ¨åœ¨å¢žåŠ çŽ¯å¢ƒå˜é‡Cã€user git and optionalunix tools from the windows command promptåœ¨ç¬¬äºŒä¸ªé€‰é¡¹çš„åŸºç¡€ä¸Šå¢žåŠ äº†unixç³»ç»Ÿä¸­çš„ä¸€äº›å·¥å…·ã€‚Â¶6. é€‰æ‹©å®‰å…¨ä¼ è¾“åè®®é€‰æ‹©é»˜è®¤Â¶7. é…ç½®è¡Œç»“æŸè½¬æ¢ç¬¦é€‰æ‹©é»˜è®¤Â¶8. è®¾ç½®GIT Bashç»ˆç«¯ä»¿çœŸå™¨çš„æ ·å¼é€‰æ‹©é»˜è®¤Aã€use minttyæ˜¯ä¸€ç§ä»¿çœŸæ ·å¼ï¼Œæ¯”cmdçª—å£å¥½åœ¨å¯ä»¥è°ƒèŠ‚å¤§å°ï¼Œå­—ä½“æ ·å¼å•¥çš„ã€‚Bã€use windows defaultconsole windowä½¿ç”¨windowsç³»ç»Ÿè‡ªå¸¦çš„cmdçª—å£æ‰“å¼€git bashã€‚Â¶9. é…ç½®é¢å¤–çš„é€‰é¡¹é€‰æ‹©é»˜è®¤Aã€enable file system cachingå…è®¸æ–‡ä»¶ç¼“å­˜ã€‚å³åœ¨æäº¤æ–‡ä»¶çš„æ—¶å€™ï¼Œå¯ä»¥å…ˆå°†æ–‡ä»¶æ”¾åˆ°ç¼“å­˜åŒºï¼Œç„¶åŽå†ç»Ÿä¸€æäº¤ã€‚Bã€enable git credentialmanagerå…è®¸gitè®¸å¯è¯ç®¡ç†ï¼ˆä¼šæ£€æµ‹å¹¶ä¸‹è½½.netframework v4.5ï¼‰Â¶10. å®‰è£…è¿›åº¦Â¶11. ç¡®è®¤æ˜¯å¦å®‰è£…æˆåŠŸå¦‚ä¸‹å›¾è¡¨ç¤ºå®‰è£…æˆåŠŸã€‚Â¶äºŒã€è¿žæŽ¥githubè¿žæŽ¥å‰éœ€è¦ç™»å½•githubå®˜ç½‘æ³¨å†Œè´¦å·å¹¶ä¸”åˆ›å»ºä¸€ä¸ªä»“åº“ï¼Œå¦‚ä»“åº“åä¸ºï¼štestï¼Œæ­¤æ–¹æ³•è‡ªè¡Œç™¾åº¦ï¼Œå‚»ç“œå¼çš„ã€‚Â¶1. é…ç½®SSH keyæ‰“å¼€git bash è¾“å…¥ï¼š1$ ls ~/.ssh/ #æ£€æŸ¥æœ¬æœºæ˜¯å¦å·²ç»å­˜åœ¨sshå¯†é’¥ï¼Œå¦‚æžœæç¤ºï¼š"No such file or directory" è¯´æ˜Žä½ æ˜¯ç¬¬ä¸€æ¬¡ä½¿ç”¨gitï¼Œè¿˜ä¸å­˜åœ¨sshç§˜é’¥ã€‚å¦‚æžœçœ‹åˆ—å‡ºid_rsaã€id_rsa.pubã€known_hostsä¸‰ä¸ªæ–‡ä»¶è¯´æ˜Žå·²å­˜åœ¨sshå¯†é’¥å¦‚æžœä¸å­˜åœ¨sshç§˜é’¥ï¼Œåˆ™è¾“å…¥ï¼š12$ ssh-keygen -t rsa -C "é‚®ç®±è´¦å·"#å¦‚ï¼šssh-keygen -t rsa -C "1667164190@qq.com"ç„¶åŽè¿žç»­3æ¬¡å›žè½¦ï¼Œæœ€ç»ˆä¼šåœ¨ç”¨æˆ·ç›®å½•ä¸‹ç”Ÿæˆä¸€ä¸ª.sshç›®å½•(å¯èƒ½ç³»ç»Ÿé»˜è®¤éšè—æŽ‰äº†ï¼Œè¯·è‡ªè¡Œç³»ç»Ÿè®¾ç½®å–æ¶ˆæ–‡ä»¶éšè—é»˜è®¤è®¾ç½®)ã€‚å¦‚ä¸‹å›¾æ‰“å¼€ç”¨æˆ·ç›®å½•ï¼Œæ‰¾åˆ°~/.ssh/id_rsa.pubæ–‡ä»¶ï¼Œè®°äº‹æœ¬æ‰“å¼€å¹¶å¤åˆ¶é‡Œé¢çš„å…¨éƒ¨å†…å®¹ï¼Œæ‰“å¼€ä½ çš„githubä¸»é¡µï¼Œè¿›å…¥ä¸ªäººè®¾ç½® -&gt; SSH and GPG keys -&gt;New SSH keyã€‚å°†åˆšå¤åˆ¶çš„å†…å®¹ç²˜è´´åˆ°keyé‚£é‡Œï¼Œtitleéšä¾¿å¡«ï¼Œä¿å­˜ã€‚è‡³æ­¤ssh keyè®¾ç½®å®Œæ¯•ã€‚Â¶2. æµ‹è¯•é…ç½®sshç§˜é’¥æ˜¯å¦æˆåŠŸ1$ ssh -T git@github.com # æ³¨æ„é‚®ç®±åœ°å€ä¸ç”¨æ”¹ã€‚å¦‚æžœæç¤ºAre you sure you want to continue connecting (yes/no)?ï¼Œè¾“å…¥yesï¼Œç„¶åŽä¼šçœ‹åˆ°å¦‚ä¸‹å›¾è¡¨ç¤ºæˆåŠŸè¿žæŽ¥ã€‚Â¶3. é…ç½®å…¨å±€ç”¨æˆ·ä¿¡æ¯åœ¨Git bashä¸­è¾“å…¥ï¼šÂ¶ï¼ˆ1ï¼‰è®¾ç½®ç”¨æˆ·å12$ git config --global user.name 'è¿™é‡Œå¡«å†™githubçš„ç”¨æˆ·å'#å¦‚ï¼š git config --global user.name 'qcmoke'Â¶ï¼ˆ2ï¼‰è®¾ç½®å…¨å±€ç”¨æˆ·é‚®ç®±12$ git config --global user.email 'è¿™é‡Œå¡«å†™githubè®¾ç½®çš„ç”¨æˆ·é‚®ç®±'#å¦‚ï¼šgit config --global user.email '1667164190@qq.com'Â¶4. æŸ¥çœ‹é…ç½®ä¿¡æ¯1git config --listæ³¨æ„ï¼šè¯¥è®¾ç½®åœ¨GitHubä»“åº“ä¸»é¡µæ˜¾ç¤ºè°æäº¤äº†è¯¥æ–‡ä»¶ï¼Œæ³¨æ„è¿™é‡Œçš„ - æœ‰ä¸¤ä¸ªï¼Â¶5. ä»Žæœ¬åœ°ä»“åº“æäº¤æ–‡ä»¶åˆ°è¿œç¨‹ä»“åº“githubæœ¬åœ°åˆ›å»ºä¸€ä¸ªç›®å½•ï¼Œå¹¶è¿›å…¥æ­¤ç›®å½•ï¼Œåˆå§‹åŒ–æ­¤ç›®å½•ä¸ºæœ¬åœ°gitä»“åº“ã€‚123456789wen@DESKTOP-P0991RH MINGW64 ~/Desktop$ mkdir testwen@DESKTOP-P0991RH MINGW64 ~/Desktop$ cd test/wen@DESKTOP-P0991RH MINGW64 ~/Desktop/test$ git initInitialized empty Git repository in C:/Users/wen/Desktop/test/.git/Â¶6. åˆ›å»ºä¸€ä¸ªæ–‡ä»¶ï¼Œå¾…åŽç»­ä¸Šä¼ githubã€‚123456wen@DESKTOP-P0991RH MINGW64 ~/Desktop/test (master)$ echo "hello world !" &gt;&gt;readme.txtwen@DESKTOP-P0991RH MINGW64 ~/Desktop/test (master)$ ls -a./ ../ .git/ readme.txtÂ¶7. æŸ¥çœ‹å½“å‰gitçŠ¶æ€123456789101112wen@DESKTOP-P0991RH MINGW64 ~/Desktop/test (master)$ git statusOn branch masterNo commits yetUntracked files: (use "git add ..." to include in what will be committed) readme.txtnothing added to commit but untracked files present (use "git add" to track)Â¶8. æäº¤æ–‡ä»¶åˆ°gitæš‚å­˜åŒº123456789101112131415wen@DESKTOP-P0991RH MINGW64 ~/Desktop/test (master)$ git add readme.txt #æäº¤æ‰€æœ‰æ–‡ä»¶ä½¿ç”¨: git add .warning: LF will be replaced by CRLF in readme.txt.The file will have its original line endings in your working directory.wen@DESKTOP-P0991RH MINGW64 ~/Desktop/test (master)$ git statusOn branch masterNo commits yetChanges to be committed: (use "git rm --cached ..." to unstage) new file: readme.txtÂ¶9. æäº¤æš‚å­˜åŒºçš„æ‰€æœ‰æ–‡ä»¶åˆ°æœ¬åœ°ä»“åº“12345678910wen@DESKTOP-P0991RH MINGW64 ~/Desktop/test (master)$ git commit -m "ç¬¬ä¸€æ¬¡æäº¤readme.txtæ–‡ä»¶"[master (root-commit) e5041a3] ç¬¬ä¸€æ¬¡æäº¤readme.txtæ–‡ä»¶ 1 file changed, 1 insertion(+) create mode 100644 readme.txtwen@DESKTOP-P0991RH MINGW64 ~/Desktop/test (master)$ git statusOn branch masternothing to commit, working tree cleanÂ¶10. ç»™æœ¬åœ°ä»“åº“æ˜ å°„è¿œç¨‹ä»“åº“å¦‚ä¸‹å›¾å…ˆè¦å¤åˆ¶è¿œç¨‹ä»“åº“é“¾æŽ¥git@github.com:qcmoke/test.git12wen@DESKTOP-P0991RH MINGW64 ~/Desktop/test (master)$ git remote add origin git@github.com:qcmoke/test.gitè¯·åƒä¸‡æ³¨æ„ï¼ŒæŠŠä¸Šé¢çš„qcmokeæ›¿æ¢æˆä½ è‡ªå·±çš„GitHubè´¦æˆ·åï¼Œå¦åˆ™ï¼Œä½ åœ¨æœ¬åœ°å…³è”çš„å°±æ˜¯æˆ‘çš„è¿œç¨‹åº“ï¼Œå…³è”æ²¡æœ‰é—®é¢˜ï¼Œä½†æ˜¯ä½ ä»¥åŽæŽ¨é€æ˜¯æŽ¨ä¸ä¸ŠåŽ»çš„ï¼Œå› ä¸ºä½ çš„SSH Keyå…¬é’¥ä¸åœ¨æˆ‘çš„è´¦æˆ·åˆ—è¡¨ä¸­ã€‚æ·»åŠ åŽï¼Œè¿œç¨‹åº“çš„åå­—å°±æ˜¯originï¼Œè¿™æ˜¯Gité»˜è®¤çš„å«æ³•ï¼Œä¹Ÿå¯ä»¥æ”¹æˆåˆ«çš„ï¼Œä½†æ˜¯originè¿™ä¸ªåå­—ä¸€çœ‹å°±çŸ¥é“æ˜¯è¿œç¨‹åº“ã€‚Â¶11. æŠŠæœ¬åœ°åº“çš„æ‰€æœ‰å†…å®¹æŽ¨é€åˆ°è¿œç¨‹åº“ä¸Š123456789wen@DESKTOP-P0991RH MINGW64 ~/Desktop/test (master)$ git push -u origin masterEnumerating objects: 3, done.Counting objects: 100% (3/3), done.Writing objects: 100% (3/3), 253 bytes | 253.00 KiB/s, done.Total 3 (delta 0), reused 0 (delta 0)To github.com:qcmoke/test.git * [new branch] master -&gt; masterBranch 'master' set up to track remote branch 'master' from 'origin'.æ­¤æ—¶åˆ·æ–°github testé¡¹ç›®é¡µå°±ä¼šçœ‹åˆ°ä¸Šä¼ çš„æ–‡ä»¶ã€‚Â¶ä¸‰ã€gitå¸¸ç”¨å‘½ä»¤123456789101112131415161718192021222324252627# git init #åˆ›å»ºæ–°çš„ Git ä»“åº“# git status #æŸ¥çœ‹é¡¹ç›®çš„å½“å‰çŠ¶æ€ä¿¡æ¯ã€‚"AM" çŠ¶æ€çš„æ„æ€æ˜¯ï¼Œè¿™ä¸ªæ–‡ä»¶åœ¨æˆ‘ä»¬å°†å®ƒæ·»åŠ åˆ°ç¼“å­˜ä¹‹åŽåˆæœ‰æ”¹åŠ¨ã€‚# git status -s #åŠ äº†-s å‚æ•°ï¼Œä»¥èŽ·å¾—ç®€çŸ­é¡¹ç›®çš„å½“å‰çŠ¶æ€ä¿¡æ¯ã€‚# git diff #æŸ¥çœ‹æ‰§è¡Œ git status çš„ç»“æžœçš„è¯¦ç»†ä¿¡æ¯# git diff #å°šæœªç¼“å­˜çš„æ”¹åŠ¨# git diff --cached #æŸ¥çœ‹å·²ç¼“å­˜çš„æ”¹åŠ¨# git diff HEAD #æŸ¥çœ‹å·²ç¼“å­˜çš„ä¸Žæœªç¼“å­˜çš„æ‰€æœ‰æ”¹åŠ¨# git diff --stat #æ˜¾ç¤ºæ‘˜è¦è€Œéžæ•´ä¸ªdiff# git add #å°†è¯¥æ–‡ä»¶æ·»åŠ gitæš‚å­˜åŒº# git rm # git rm -f #åˆ é™¤ä¹‹å‰ä¿®æ”¹è¿‡å¹¶ä¸”å·²ç»æ”¾åˆ°æš‚å­˜åŒºåŸŸçš„è¯ï¼Œåˆ™å¿…é¡»è¦ç”¨å¼ºåˆ¶åˆ é™¤é€‰é¡¹ -f# git rm --cached #å¦‚æžœæŠŠæ–‡ä»¶ä»Žæš‚å­˜åŒºåŸŸç§»é™¤ï¼Œä½†ä»ç„¶å¸Œæœ›ä¿ç•™åœ¨å½“å‰å·¥ä½œç›®å½•ä¸­ï¼Œæ¢å¥è¯è¯´ï¼Œä»…æ˜¯ä»Žè·Ÿè¸ªæ¸…å•ä¸­åˆ é™¤ï¼Œä½¿ç”¨ --cached é€‰é¡¹å³å¯# git rm â€“r * #å¯ä»¥é€’å½’åˆ é™¤ï¼Œå³å¦‚æžœåŽé¢è·Ÿçš„æ˜¯ä¸€ä¸ªç›®å½•åšä¸ºå‚æ•°ï¼Œåˆ™ä¼šé€’å½’åˆ é™¤æ•´ä¸ªç›®å½•ä¸­çš„æ‰€æœ‰å­ç›®å½•å’Œæ–‡ä»¶# git commit -m "ç¬¬ä¸€æ¬¡æäº¤readme.txtæ–‡ä»¶" #æäº¤æš‚å­˜åŒºçš„æ‰€æœ‰æ–‡ä»¶åˆ°gitä»“åº“# git clone #æ‹·è´ä¸€ä¸ª Git ä»“åº“åˆ°æœ¬åœ°#git remote add [shortname] [url] #æ·»åŠ è¿œç¨‹åº“ï¼Œå¦‚ git remote add origin git@github.com:qcmoke/test.git# git remote #è¦æŸ¥çœ‹å½“å‰é…ç½®æœ‰å“ªäº›è¿œç¨‹ä»“åº“# git remote -v #è¦æŸ¥çœ‹å½“å‰é…ç½®æœ‰å“ªäº›è¿œç¨‹ä»“åº“ï¼ˆå¯ä»¥çœ‹åˆ°æ¯ä¸ªåˆ«åçš„å®žé™…é“¾æŽ¥åœ°å€ï¼‰# git push -u origin master #ç¬¬ä¸€æ¬¡æŽ¨é€masteråˆ†æ”¯çš„æ‰€æœ‰å†…å®¹è‡³GitHub# git push origin master #å°†masteråˆ†æ”¯æœ€æ–°ä¿®æ”¹æŽ¨é€è‡³GitHub]]></content>
      <categories>
        <category>tools</category>
      </categories>
      <tags>
        <tag>git</tag>
        <tag>github</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[typechoåœ¨lampçŽ¯å¢ƒä¸‹çš„æ¬å®¶æ•™ç¨‹]]></title>
    <url>%2Fblog%2Ftypecho_move.html</url>
    <content type="text"><![CDATA[æœ¬æ•™ç¨‹æ‰€è¯´çš„ç½‘ç«™æ¬å®¶æŒ‡çš„æ˜¯ç½‘ç«™çš„è¿è½½æœåŠ¡å™¨å˜æ›´ï¼Œæ­¤å˜æ›´åˆ†ä¸ºä¸¤ç§æ¬å®¶æƒ…å†µï¼Œä¸€ç§æ˜¯ä¸æ›´æ”¹åŸŸåçš„æ–¹å¼æ¬å®¶ï¼Œå¦ä¸€ç§ä¸ºéœ€è¦æ›´æ”¹åŸŸåçš„æ–¹å¼æ¬å®¶ã€‚ä»¥ä¸‹å°†ä¸»è¦è®²è§£ç¬¬äºŒç§æ–¹å¼ï¼Œå½“ç„¶ä¹Ÿé€‚ç”¨äºŽç¬¬ä¸€ç§æ–¹å¼ã€‚Â¶é›¶ã€å‰ç½®çŽ¯å¢ƒæ—§è¿œç¨‹æœåŠ¡å™¨çŽ¯å¢ƒï¼šCentOS 7æ–°è¿œç¨‹æœåŠ¡å™¨çŽ¯å¢ƒï¼šCentOS 7æ–°æ—§ç½‘ç«™æœåŠ¡æ¡†æž¶ï¼šLAMP ï¼ˆApache2.4.6ã€PHP5.4.16ã€MariaDB5.5.56ï¼‰æœ¬åœ°è¿è¡ŒçŽ¯å¢ƒï¼šWindows10Â¶ä¸€ã€å¤‡ä»½Â¶1.é¦–å…ˆéœ€è¦å¤‡ä»½æ•°æ®åº“æ­¤è¿‡ç¨‹æ˜¯ä»ŽåŽŸæœåŠ¡å™¨ä¸­å¯¼å‡ºtypechoç½‘ç«™çš„sqlè„šæœ¬ï¼Œæœ¬æ•™ç¨‹ä»¥MariaDBæ•°æ®åº“ä¸ºä¾‹å­ï¼Œï¼ˆMariaDBæ˜¯mysqlçš„åˆ†æ”¯ï¼Œå½“ç„¶mysqlåœ¨æ­¤æ•™ç¨‹ä¸­ä¸€æ ·é€šç”¨ï¼‰é€šè¿‡è¿œç¨‹ç»ˆç«¯å·¥å…·å¦‚xshellç­‰å·¥å…·è¿žæŽ¥æœåŠ¡å™¨åŽè¾“å…¥ï¼š1mysqldump -h localhost -u root -p typecho &gt; /root/typecho.sqlÂ¶2.å¤‡ä»½æ•´ä¸ªç½‘ç«™å¦‚ä¸‹ï¼š1cp -r /var/www/html/typecho /rootÂ¶3.å¤‡ä»½æ–‡ä»¶ä¸‹è½½åˆ°æœ¬åœ°å°†ä»¥ä¸Šå¤‡ä»½å¥½çš„æ•°æ®é€šè¿‡xftpã€winscpç­‰å·¥å…·ä¼ åˆ°æœ¬åœ°ï¼Œè‡³æ­¤å¤‡ä»½å·¥ä½œå®Œæˆã€‚Â¶äºŒã€è¿˜åŽŸÂ¶1.è¿˜åŽŸtypechoæ•°æ®åº“é¦–å…ˆç¡®ä¿æ–°æœåŠ¡å™¨å·²ç»æ­å»ºå¥½LAMPçŽ¯å¢ƒã€‚é€šè¿‡xftpå°†å¤‡ä»½å¥½çš„æ‰€ä»¥æ–‡ä»¶ä¼ åˆ°æ–°æœåŠ¡å™¨çš„rootç›®å½•ã€‚ç„¶åŽé€šè¿‡xshellè¾“å…¥ï¼š12345mysql -h localhost -u root -p;MariaDB [(none)]&gt; create database typecho;MariaDB [(none)]&gt; use typecho;MariaDB [(none)]&gt; source /root/typecho.sql;MariaDB [(none)]&gt; show tables;(æŸ¥çœ‹typechoæ•°æ®åº“ä¸‹é¢çš„æ‰€æœ‰è¡¨,å°±å¯ä»¥çœ‹åˆ°è¡¨äº†)Â¶2.å°†typechoæ•´ä¸ªç½‘ç«™æ”¾åˆ°webæœåŠ¡å™¨æ ¹ç›®å½•å¦‚ä¸‹ï¼šÂ¶3.ç»™apacheæ·»åŠ è™šæ‹Ÿç›®å½•æ³¨æ„ä»¥ä¸‹çš„ServerNameè¦æ”¹æˆè‡ªå·±çš„åŸŸåã€‚å½“ç„¶å‰ææ˜¯ä½ çš„åŸŸåå·²ç»è§£æžåˆ°äº†æœ¬å°çš„æœåŠ¡å™¨å¯¹åº”çš„å…¬ç½‘ipï¼Œè§£æžå·¥ä½œè¯·åŠ¡å¿…é¢„å…ˆå®Œæˆï¼Œç”±äºŽä¸åŒè´­ä¹°åŸŸåå¯èƒ½æ¥è‡ªä¸åŒçš„æä¾›å•†ï¼Œä¸å¥½ä¸€ä¸€è®²è§£ã€‚å¦‚æžœä¸æ¸…æ¥šæ€Žä¹ˆè§£æžåŸŸååˆ°æœåŠ¡å™¨å¯¹åº”çš„å…¬ç½‘ipï¼Œç™¾åº¦ä¸Šå„ä¸ªåŸŸåæä¾›å•†çš„åŸŸåè§£æžæ•™ç¨‹å¾ˆå¤šï¼Œè¯·è‡ªè¡Œç™¾åº¦æŸ¥è¯¢ã€‚ä¸ç®¡æ–°æœåŠ¡å™¨çš„åšå®¢è¦ä¸è¦ä¿®æ”¹åŸŸåï¼Œéƒ½è¦æ·»åŠ å¦‚ä¸‹è™šæ‹Ÿç›®å½•ï¼Œå¦‚æžœåšå®¢æ²¡æœ‰ä¿®æ”¹åŸŸåï¼ŒServerNameå¡«åŽŸæ¥çš„åŸŸåï¼›å¦‚æžœæ¢äº†å…¶ä»–æ–°çš„åŸŸåï¼Œ ServerNameåˆ™å¡«æ–°çš„åŸŸåã€‚1vim /etc/httpd/conf.d/vhost.confå¤åˆ¶ä»¥ä¸‹ä»£ç ç²˜è´´åˆ°vhost.confä¸­ã€‚123456789&lt;VirtualHost *:80&gt; DocumentRoot "/var/www/html/typecho" ServerName example.com &lt;Directory "/var/www/html/typecho"&gt; Options FollowSymLinks AllowOverride All Require all granted &lt;/Directory&gt;&lt;/VirtualHost&gt;å¦‚å›¾ï¼šç²˜è´´å¥½åŽæŒ‰:wqä¿å­˜å¹¶é€€å‡ºã€‚å¤‡æ³¨ï¼šé€šè¿‡vimç¼–è¾‘è¿™ä¸ªæ–‡ä»¶åï¼Œä¿å­˜é€€å‡ºåŽä¼šç”ŸæˆåŒåæ–‡ä»¶ã€‚Â¶4.é‡å¯apacheæœåŠ¡1service httpd restartè‡³æ­¤ç¬¬ä¸€ç§æ–¹å¼ï¼Œå³ä¸æ›´æ”¹åŸŸåçš„æ–¹å¼æ¬å®¶å·¥ä½œå®Œæˆï¼Œæ— éœ€å¾€ä¸‹è¿›è¡Œã€‚ç¬¬äºŒç§æ–¹å¼ï¼Œå³æ›´æ”¹åŸŸåçš„æ–¹å¼æ¬å®¶çš„å·¥ä½œè¿˜å¾—å¾€ä¸‹ç»§ç»­ã€‚Â¶5.ä¿®æ”¹æ•°æ®åº“çš„åŸŸåå¯¹åº”çš„ç½‘å€ã€‚123UPDATE `typecho_options` SET `value` = 'http://example.com' WHERE `typecho_options`.`name` = 'siteUrl' AND `typecho_options`.`user` =0;UPDATE `typecho_contents` SET text = REPLACE(text, 'https://example-old.com', 'http://example.com') WHERE INSTR(text,'https://example-old.com') &gt; 0;æ³¨é‡Šä¸‹ï¼š https://example-old.com= æ›´æ¢å‰ä½¿ç”¨çš„è€åŸŸå http://example.com= æ›´æ¢åŽä½¿ç”¨çš„æ–°åŸŸå typecho_options = è¡¨åï¼Œæœ‰çš„äººè¡¨å¤´ä¸ä¸€æ ·éœ€è¦ä¿®æ”¹ æ¯”å¦‚ï¼šabc_options typecho_contents = è¡¨åï¼Œæœ‰çš„äººè¡¨å¤´ä¸ä¸€æ ·éœ€è¦ä¿®æ”¹ æ¯”å¦‚ï¼šabc_contents Â¶6.ç®€å•é¡µé¢è®¾ç½®è‡³æ­¤è¿˜åŽŸå¤§è‡´å®Œæˆï¼Œå‰©ä¸‹çš„è¿™è¦ç™»é™†è¿˜åŽŸçš„æ–°ç½‘ç«™åšä¸€äº›åŸŸåè®¾ç½®å³å¯ã€‚å°†å¤§è‡´ä»¥ä¸‹ç½‘å€æˆæ–°åŸŸåå¯¹åº”çš„ç½‘å€ã€‚]]></content>
      <categories>
        <category>blog</category>
      </categories>
      <tags>
        <tag>lamp</tag>
        <tag>typecho</tag>
        <tag>blogæ¬å®¶</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[typechoå’Œwordpressçš„ç®¡ç†å‘˜å¯†ç å¿˜è®°æ€Žä¹ˆåŠžï¼Ÿ]]></title>
    <url>%2Fblog%2Ftypecho_wordpress_password.html</url>
    <content type="text"><![CDATA[Â¶1. é‡ç½®typechoçš„ç®¡ç†å‘˜å¯†ç é€šè¿‡ç»ˆç«¯è¿›å…¥æ•°æ®åº“ï¼Œé€‰æ‹©è¡¨typecho_usersï¼Œç„¶åŽæ‰§è¡Œä»¥ä¸‹å‘½ä»¤ã€‚12UPDATE typecho_users SET PASSWORD = '$P$BfpuGkuI0iIH/4/eLbkYXcRpWyN0Je0' WHERE uid = 1;UPDATE typecho_users SET authcode = 'ff576420bcabf63885dd553174dbaa77ef2f641e' WHERE uid = 1;ç™»å½•å¯†ç æ˜¯ 123456 ã€‚Â¶2. é‡ç½®wordpressçš„ç®¡ç†å‘˜å¯†ç é€šè¿‡ç»ˆç«¯è¿›å…¥æ•°æ®åº“ï¼Œé€‰æ‹©è¡¨wp_usersï¼Œç„¶åŽæ‰§è¡Œä»¥ä¸‹å‘½ä»¤ã€‚1UPDATE `wp_users` SET `user_pass`='$P$BWZhQxx/R9UCBgECUhxsV0EKfqfEh31' where `user_login`='ç™»é™†ç”¨æˆ·å';ç™»å½•å¯†ç æ˜¯ï¼šadmin]]></content>
      <categories>
        <category>blog</category>
      </categories>
      <tags>
        <tag>typecho</tag>
        <tag>ç®¡ç†å‘˜å¯†ç </tag>
        <tag>wordpress</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å•è¡Œå’Œå¤šè¡Œæ–‡æœ¬åž‚ç›´å±…ä¸­]]></title>
    <url>%2Ffront%2Ftext_centered_vertically.html</url>
    <content type="text"><![CDATA[Â¶æ–‡æœ¬çš„çˆ¶ç›’å­ä½¿ç”¨ç»å¯¹å€¼é«˜åº¦æ—¶çš„æƒ…å†µï¼Œå¦‚height: 300px;é¦–å…ˆå…ˆæ˜Žç¡®ï¼Œè¡Œé«˜å’Œç›’å­ï¼ˆå…ƒç´ ï¼‰çš„é«˜åº¦ä¸æ˜¯ä¸€ä¸ªæ¦‚å¿µã€‚è¡Œé«˜å³æ–‡æœ¬ä¸­ä¸€è¡Œçš„é«˜åº¦ã€‚ç›’å­ä¸­å¯ä»¥æœ‰å¤šä¸ªæ–‡æœ¬è¡Œã€‚è§„å¾‹ï¼šæ–‡å­—åœ¨è¡Œé«˜ä¸­é»˜è®¤æ˜¯åž‚ç›´å±…ä¸­çš„ã€‚åœ¨ä¼ä¸šå¼€å‘ä¸­ï¼Œç»å¸¸å°†ç›’å­çš„é«˜åº¦å’Œè¡Œé«˜è®¾ç½®ä¸€æ ·ï¼Œé‚£ä¹ˆå°±èƒ½ä¿è¯ä¸€è¡Œæ–‡å­—åœ¨ç›’å­çš„é«˜åº¦ä¸­åž‚ç›´å±…ä¸­ï¼Œç®€è€Œè¨€ä¹‹ï¼Œè¦æƒ³ä¸€è¡Œæ–‡å­—åœ¨ç›’å­ä¸­åž‚ç›´å±…ä¸­ï¼Œé‚£ä¹ˆå°±éœ€è¦è®¾ç½®è¿™è¡Œæ–‡å­—çš„è¡Œé«˜ï¼ˆline-heightï¼‰ç­‰äºŽç›’å­çš„é«˜åº¦ã€‚åœ¨ä¼ä¸šå¼€å‘ä¸­å¦‚æžœä¸€ä¸ªç›’å­ä¸­æœ‰å¤šè¡Œæ–‡å­—ï¼Œé‚£ä¹ˆä¸èƒ½ä½¿ç”¨æ–‡å­—çš„è¡Œé«˜ç­‰äºŽç›’å­çš„é«˜åº¦æ¥å®žçŽ°æ–‡å­—åž‚ç›´å±…ä¸­ï¼Œåªèƒ½é€šè¿‡è®¾ç½®paddingå€¼æ¥è®©æ–‡å­—å±…ä¸­ã€‚å®žçŽ°è¿‡ç¨‹ï¼šå•è¡Œæ–‡å­—å®žçŽ°åž‚ç›´å±…ä¸­çš„æƒ…å†µï¼ˆè®¾divä¸ºçˆ¶ç›’å­ï¼Œæ–‡æœ¬ç›’å­pä¸ºå­ç›’å­ï¼‰ï¼ˆ1ï¼‰è®¾ç½®çˆ¶ç›’å­è¡Œé«˜ç­‰äºŽçˆ¶ç›’å­çš„é«˜åº¦å¤šè¡Œæ–‡å­—å®žçŽ°åž‚ç›´å±…ä¸­çš„æƒ…å†µï¼ˆè®¾divä¸ºçˆ¶ç›’å­ï¼Œæ–‡æœ¬ç›’å­pä¸ºå­ç›’å­ï¼‰ï¼ˆ1ï¼‰æ¸…é™¤æ‰€æœ‰å…ƒç´ çš„é»˜è®¤å†…å¤–è¾¹ï¼ˆ2ï¼‰æ˜¾å¼åœ°è®¾ç½®çˆ¶ç›’å­è¡Œé«˜ä»¥æ–¹ä¾¿è®¡ç®—ï¼ˆ3ï¼‰çˆ¶ç›’å­æ·»åŠ æ ·å¼box-sizing: border-box; ä»¥é˜²æ­¢å¢žåŠ æ–‡å­—åŽç›’å­çš„å®½é«˜å˜å¤§ã€‚ï¼ˆ4ï¼‰é€šè¿‡è®¾ç½®çˆ¶ç›’å­æ ·å¼padding-top: (çˆ¶ç›’å­é«˜åº¦-å¤šè¡Œæ–‡æœ¬è¡Œé«˜æ€»å’Œ)/2; padding-bottom: (çˆ¶ç›’å­é«˜åº¦-å¤šè¡Œæ–‡æœ¬è¡Œé«˜æ€»å’Œ)/2;12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152&lt;!DOCTYPE html&gt;&lt;html lang="en"&gt;&lt;head&gt; &lt;meta charset="UTF-8"&gt; &lt;title&gt;æ–‡æœ¬åž‚ç›´å±…ä¸­&lt;/title&gt; &lt;style type="text/css"&gt; /*æ¸…é™¤æ‰€æœ‰å…ƒç´ çš„é»˜è®¤å†…å¤–è¾¹è·ï¼Œè¿™å¯¹å¤šè¡Œæ–‡å­—å®žçŽ°åž‚ç›´å±…ä¸­æœ‰å½±å“ã€‚*/ *&#123; margin: 0px; padding: 0px; &#125; /*å•è¡Œæ–‡å­—å®žçŽ°åž‚ç›´å±…ä¸­çš„æ•ˆæžœ*/ .box1&#123; width: 300px; height:300px; background-color: gray; &#125; .box1&#123; /*å•è¡Œæ–‡å­—å®žçŽ°åž‚ç›´å±…ä¸­åªéœ€è¦è®¾ç½®ç›’å­è¡Œé«˜ç­‰äºŽçˆ¶ç›’å­çš„é«˜åº¦å³å¯*/ line-height: 300px; &#125; /*å¤šè¡Œæ–‡å­—å®žçŽ°åž‚ç›´å±…ä¸­çš„æ•ˆæžœ*/ .box2&#123; width: 300px; height: 300px; background-color: skyblue; &#125; .box2&#123; box-sizing: border-box; /*é˜²æ­¢å¢žåŠ æ–‡å­—åŽç›’å­çš„å®½é«˜å˜å¤§*/ line-height: 20px; /*é€šè¿‡åœ¨æµè§ˆå™¨æŸ¥çœ‹å‘çŽ°p2ä¸­çš„æ–‡å­—æœ‰ä¸‰è¡Œï¼Œæ¯è¡Œ20pxï¼Œå…±æœ‰4*20px=80pxï¼Œé‚£ä¹ˆbox2å‡åŽ»p2å‰©ä½™çš„çš„é«˜åº¦ä¸º300px-80px=220pxã€‚äºŽæ˜¯ä¸Šä¸‹å„è®¾ç½®å€¼ä¸º110pxçš„å†…è¾¹è·å³å¯å®žçŽ°å¤šè¡Œæ–‡å­—åž‚ç›´å±…ä¸­ã€‚*/ padding-top: 110px; padding-bottom: 110px; &#125; &lt;/style&gt;&lt;/head&gt;&lt;body&gt; &lt;div class="box1"&gt; &lt;p class="p1"&gt; Hello Worldï¼ &lt;/p&gt; &lt;/div&gt; &lt;div class="box2"&gt; &lt;p class="p2"&gt; 1. ä»€ä¹ˆæ˜¯Git ? Gitæ˜¯ä¸€ä¸ªå¼€æºçš„åˆ†å¸ƒå¼ç‰ˆæœ¬æŽ§åˆ¶ç³»ç»Ÿã€‚ Gitçš„åˆ†å¸ƒå¼ï¼šGité‡‡ç”¨äº†åˆ†å¸ƒå¼ç‰ˆæœ¬åº“çš„æ–¹å¼ï¼Œä¸ä¸€å®šè¦æœåŠ¡å™¨ç«¯è½¯ä»¶æ”¯æŒå³å¯åœ¨æœ¬åœ°å®Œæˆç‰ˆæœ¬æŽ§åˆ¶å·¥ä½œã€‚ &lt;/p&gt; &lt;/div&gt;&lt;/body&gt;&lt;/html&gt;Â¶æ–‡æœ¬çš„çˆ¶ç›’å­ä½¿ç”¨ç™¾åˆ†æ¯”å€¼é«˜åº¦æ—¶çš„æƒ…å†µï¼Œå¦‚height: 50%;divä½¿ç”¨line-heightå±…ä¸­æ–‡å­—çš„è¯,å°±å¿…é¡»ä½¿ç”¨ç»å¯¹çš„pxå€¼è®©line-heightç­‰äºŽçˆ¶ç›’å­çš„é«˜åº¦pxã€‚ä½†å¦‚æžœæ–‡æœ¬çš„çˆ¶ç›’å­divçš„é«˜åº¦æ˜¯ç™¾åˆ†æ¯”å€¼æ—¶ï¼Œå¦‚æžœç›´æŽ¥è®¾ç½®line-height:çˆ¶ç›’å­çš„ç™¾åˆ†æ¯”å€¼å¾—è¯æ˜¯æ— æ³•å®žçŽ°å…ƒç´ å†…éƒ¨çš„æ–‡å­—åž‚ç›´å±…ä¸­çš„ã€‚è§£å†³æ–¹æ³•ï¼šæ–¹æ³•ä¸€:â€‹ ç»™éœ€è¦å±…ä¸­çš„å…ƒç´ åŠ ä»¥ä¸‹ä»£ç æ ·å¼å’Œâ€‹ display:flex;â€‹ align-items:center;â€‹ å¦‚æžœè¿˜è¦å®žçŽ°æ°´å¹³å±…ä¸­çš„è¯å¯ä»¥åŠ ä¸Šjustify-content:center;æ–¹æ³•äºŒ:â€‹ å¢žåŠ ä¸€ä¸ªçˆ¶å…ƒç´ ,ç»™çˆ¶å…ƒç´ è®¾ç½®position:absolute; display:table; ç»™éœ€è¦å±…ä¸­çš„å…ƒç´ è®¾ç½®display:table-cell; vertical-align:middle;â€‹ ä½†æœ‰ä¸ªé—®é¢˜ï¼Œé‚£å°±æ˜¯è®¾ç½®display:table-cell; vertical-align:middle;äº†çš„å¤šä¸ªç›’å­ä¼šè·‘åˆ°ä¸€è¡Œé‡Œã€‚123456789101112131415161718192021222324&lt;html lang="en"&gt;&lt;head&gt;&lt;meta charset="UTF-8"&gt;&lt;title&gt;Document&lt;/title&gt;&lt;style type="text/css"&gt; html,body&#123; margin:0px; height:100%; &#125; div&#123; height: 50%; background-color: pink; display:flex; align-items:center; /*åž‚ç›´å±…ä¸­*/ /*justify-content:center; */ /*æ°´å¹³å±…ä¸­*/ &#125;&lt;/style&gt;&lt;/head&gt;&lt;body&gt; &lt;div&gt; &lt;p&gt;I am div !&lt;/p&gt; &lt;/div&gt;&lt;/body&gt;&lt;/html&gt;]]></content>
      <categories>
        <category>front</category>
      </categories>
      <tags>
        <tag>html</tag>
        <tag>css</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[text-align: center å’Œ margin: 0 auto çš„åŒºåˆ«]]></title>
    <url>%2Ffront%2Ftext_align_and_margin_0_auto.html</url>
    <content type="text"><![CDATA[Â¶1. text-align: center;ä½œç”¨å°±æ˜¯è®©ç›’å­é‡Œçš„æ–‡å­—æˆ–è€…å›¾ç‰‡æ°´å¹³å±…ä¸­ ã€‚1234567891011121314151617181920212223242526272829&lt;!DOCTYPE html&gt;&lt;html lang="en"&gt;&lt;head&gt; &lt;meta charset="UTF-8"&gt; &lt;title&gt;Document&lt;/title&gt; &lt;style type="text/css"&gt; .world_box&#123; width: 400px; height: 400px; background-color: skyblue; text-align: center; &#125; .image_box&#123; width: 400px; height: 400px; background-color: pink; text-align: center; &#125; &lt;/style&gt;&lt;/head&gt;&lt;body&gt; &lt;div class="world_box"&gt; æˆ‘æ˜¯æ–‡å­— &lt;/div&gt; &lt;div class="image_box"&gt; &lt;img src="https://example.com/logo.jpg" style="width: 200px;height: 200px;" /&gt; &lt;/div&gt;&lt;/body&gt;&lt;/html&gt;Â¶2. margin: 0 auto;ä½œç”¨æ˜¯è®©ç›’å­ç›¸å¯¹çˆ¶ç›’å­æ°´å¹³å±…ä¸­ï¼Œè€Œä¸èƒ½è®©ç›’å­ä¸­çš„æ–‡å­—å±…ä¸­ã€‚1234567891011121314151617181920&lt;!DOCTYPE html&gt;&lt;html lang="en"&gt;&lt;head&gt; &lt;meta charset="UTF-8"&gt; &lt;title&gt;Document&lt;/title&gt; &lt;style type="text/css"&gt; .div1&#123; width: 400px; height: 400px; background-color: skyblue; margin: 0 auto; &#125; &lt;/style&gt;&lt;/head&gt;&lt;body&gt; &lt;div class="div1"&gt; æˆ‘æ˜¯æ–‡å­— &lt;/div&gt;&lt;/body&gt;&lt;/html&gt;]]></content>
      <categories>
        <category>front</category>
      </categories>
      <tags>
        <tag>html</tag>
        <tag>css</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ç½‘é¡µå…ƒç´ çš„åˆ†ç±»å’Œå¸ƒå±€æ–¹å¼]]></title>
    <url>%2Ffront%2Fhtml_css_layout.html</url>
    <content type="text"><![CDATA[Â¶ä¸€ã€å…ƒç´ åˆ†ç±»Â¶1. è¡Œå†…å…ƒç´ /å†…è”å…ƒç´ ï¼ˆinlineï¼‰ï¼ˆ1ï¼‰è¡Œå†…å…ƒç´ ä¸ä¼šç‹¬å ä¸€è¡Œï¼Œå’Œå…¶ä»–å…ƒç´ éƒ½åœ¨ä¸€è¡Œä¸Šï¼Œå½“é‡åˆ°çˆ¶çº§å…ƒç´ è¾¹ç•Œæ‰ä¼šè¢«è¿«è‡ªåŠ¨æ¢è¡Œã€‚ï¼ˆ2ï¼‰è®¾ç½®å®½é«˜æ— æ•ˆã€‚å®½åº¦ï¼šè®¾ç½®widthæ— æ•ˆï¼Œå†…å®¹å†³å®šå®½åº¦ï¼ˆå¦‚æžœæ²¡æœ‰å†…å®¹å®½åº¦é»˜è®¤ä¸º0ï¼‰ã€‚é«˜åº¦ï¼šè®¾ç½®heightæ— æ•ˆï¼Œå†…å®¹å†³å®šé«˜åº¦ï¼ˆå¦‚æžœæ²¡æœ‰å†…å®¹é«˜åº¦é»˜è®¤ä¸º0ï¼‰ã€‚ï¼ˆ3ï¼‰ä¸€èˆ¬æƒ…å†µè¡Œå†…å…ƒç´ åªèƒ½å®¹çº³æ–‡æœ¬æˆ–è€…å…¶ä»–è¡Œå†…å…ƒç´ ï¼ˆå¦‚æ–‡å­—/å›¾ç‰‡/è¶…é“¾æŽ¥ï¼‰ï¼Œä¸èƒ½åŒ…å«å—çº§å…ƒç´ ã€‚ï¼ˆ4ï¼‰marginå’Œpaddingå¯¹è¡Œå†…å…ƒç´ çš„å·¦å³æ–¹å‘æœ‰æ•ˆï¼Œè€Œä¸Šä¸‹æ— æ•ˆã€‚æ­¤å¤–æœ‰ä¸€ç‚¹éœ€è¦æ³¨æ„ï¼špaddingå¯¹è¡Œå†…å…ƒç´ çš„ä¸Šä¸‹æ–¹å‘å®žé™…ä¸Šæ˜¯æ— æ•ˆçš„ï¼Œå³ä½¿è®¾ç½®äº†padding-topæˆ–è€…padding-bottomçš„è¡Œå†…å…ƒç´ ï¼ŒèƒŒæ™¯æ¸²æŸ“çš„æ—¶å€™ä¾ç„¶ä¼šæ¸²æŸ“ä¸Šï¼Œè¡Œå†…éžæ›¿æ¢å…ƒç´ ä¸Šè®¾ç½®çš„ä¸Šå†…è¾¹è·ä¸ä¼šå½±å“è¡Œé«˜è®¡ç®—ï¼Œå› æ­¤ï¼Œå¦‚æžœä¸€ä¸ªå…ƒç´ æ—¢æœ‰å†…è¾¹è·åˆæœ‰èƒŒæ™¯ï¼Œä»Žè§†è§‰ä¸Šçœ‹å¯èƒ½å»¶ä¼¸åˆ°å…¶ä»–è¡Œï¼Œæœ‰å¯èƒ½è¿˜ä¼šä¸Žå…¶ä»–å†…å®¹é‡å ï¼Œä½†æ˜¯ä¸ä¼šæŒ¤å¼€å…¶ä»–ç›’å­çš„å†…å®¹äº†,æ­¤æ—¶ç§°è¿™ä¸ªè¡Œå†…å…ƒç´ ä¸º â€œæ®‹ç–¾çš„ç›’æ¨¡åž‹â€ï¼Œè¿™ç§æƒ…å†µæ˜¯æ¯«æ— æ„ä¹‰çš„ï¼Œå¼€å‘ä¸­è¦é¿å…å¯¹è¡Œå†…å…ƒç´ è®¾ç½®padding-topæˆ–è€…padding-bottomã€‚ç›’æ¨¡åž‹ä¸­padding, border ä¸Žå—çº§å…ƒç´ å¹¶æ— å·®å¼‚ï¼Œéƒ½æ˜¯æ ‡å‡†çš„ç›’æ¨¡åž‹ï¼Œä½†æ˜¯ marginå´åªæœ‰æ°´å¹³æ–¹å‘çš„å€¼ï¼Œåž‚ç›´æ–¹å‘å¹¶æ²¡æœ‰èµ·ä½œç”¨ã€‚æ›¿æ¢çš„è¡Œå†…å…ƒç´ å…·æœ‰â€œå†…åœ¨å°ºå¯¸â€ï¼Œå°ºå¯¸æ˜¯æœ‰è‡ªèº«å†³å®šçš„ï¼Œè€Œä¸ä¼šå—å‘¨å›´çŽ¯å¢ƒçš„å½±å“ï¼Œå¦‚&lt;img&gt;å’Œ&lt;input&gt;ç­‰ï¼Œæ›¿æ¢çš„è¡Œå†…å…ƒç´ çš„é«˜åº¦æ˜¯ç”±heightå±žæ€§å†³å®šã€‚éžæ›¿æ¢çš„è¡Œå†…å…ƒç´ ï¼ˆå¦‚ a,spanç­‰å…ƒç´ ï¼‰çš„å®½åº¦æ˜¯å…¶å†…å®¹ç»è¿‡æµè§ˆå™¨è§£é‡ŠåŽå®žé™…çš„å®½åº¦ï¼Œè€Œä¸èƒ½é€šè¿‡è®¾å®šwidthå±žæ€§ä¸ºéžæ›¿æ¢çš„è¡Œå†…å…ƒç´ è®¾ç½®å®½åº¦ï¼Œéžæ›¿æ¢çš„è¡Œå†…å…ƒç´ çš„é«˜åº¦æ˜¯æœ‰æ¡†é«˜åº¦çš„è¡Œé«˜å†³å®šçš„ã€‚åž‚ç›´æ–¹é¢çš„è¾¹è·å¯¹äºŽéžæ›¿æ¢çš„å…ƒç´ æ— æ•ˆï¼Œå¯¹äºŽæ›¿æ¢çš„è¡Œå†…å…ƒç´ å¯ä»¥è¾¾åˆ°åº”ç”¨çš„æ•ˆæžœã€‚å¸¸è§å†…è”å…ƒç´ ï¼š12345678910111213141516171819202122232425262728293031â—Ž a - é”šç‚¹â—Ž abbr - ç¼©å†™â—Ž acronym - é¦–å­—â—Ž b - ç²—ä½“(ä¸æŽ¨è)â—Ž bdo - bidi overrideâ—Ž big - å¤§å­—ä½“â—Ž br - æ¢è¡Œâ—Ž cite - å¼•ç”¨â—Ž code - è®¡ç®—æœºä»£ç (åœ¨å¼•ç”¨æºç çš„æ—¶å€™éœ€è¦)â—Ž dfn - å®šä¹‰å­—æ®µâ—Ž em - å¼ºè°ƒâ—Ž font - å­—ä½“è®¾å®š(ä¸æŽ¨è)â—Ž i - æ–œä½“â—Ž img - å›¾ç‰‡â—Ž input - è¾“å…¥æ¡†â—Ž kbd - å®šä¹‰é”®ç›˜æ–‡æœ¬â—Ž label - è¡¨æ ¼æ ‡ç­¾â—Ž q - çŸ­å¼•ç”¨â—Ž s - ä¸­åˆ’çº¿(ä¸æŽ¨è)â—Ž samp - å®šä¹‰èŒƒä¾‹è®¡ç®—æœºä»£ç â—Ž select - é¡¹ç›®é€‰æ‹©â—Ž small - å°å­—ä½“æ–‡æœ¬â—Ž span - å¸¸ç”¨å†…è”å®¹å™¨ï¼Œå®šä¹‰æ–‡æœ¬å†…åŒºå—â—Ž strike - ä¸­åˆ’çº¿â—Ž strong - ç²—ä½“å¼ºè°ƒâ—Ž sub - ä¸‹æ ‡â—Ž sup - ä¸Šæ ‡â—Ž textarea - å¤šè¡Œæ–‡æœ¬è¾“å…¥æ¡†â—Ž tt - ç”µä¼ æ–‡æœ¬â—Ž u - ä¸‹åˆ’çº¿â—Ž var - å®šä¹‰å˜é‡Â¶2. å—çº§å…ƒç´ ï¼ˆblockï¼‰ï¼ˆ1ï¼‰å—çº§å…ƒç´ ç‹¬å ä¸€è¡Œã€‚ï¼ˆ2ï¼‰èƒ½è®¾ç½®å®½é«˜ã€‚å®½åº¦ï¼š1ã€å¯ä»¥è‡ªè¡Œè®¾ç½®widthçš„å€¼ï¼›2ã€å¦‚æžœæ²¡æœ‰è®¾ç½®widthï¼Œå®½åº¦çš„å€¼ä¸ºautoï¼ˆå³é»˜è®¤å®½åº¦æ˜¯çˆ¶å…ƒç´ çš„å®½åº¦ï¼‰ã€‚é«˜åº¦ï¼š1ã€å¯ä»¥è‡ªè¡Œè®¾ç½®heightçš„å€¼ï¼›2ã€å¦‚æžœæ²¡æœ‰è®¾ç½®heightï¼Œé»˜è®¤å€¼ä¸º0ï¼›ï¼ˆ3ï¼‰ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œå¯å®¹çº³è¡Œå†…å…ƒç´ å’Œå…¶ä»–å—çº§å…ƒç´ ä»¥åŠè¡Œå†…å—å…ƒç´ ã€‚ï¼ˆ4ï¼‰å†…å¤–è¾¹è·éƒ½å¯ä»¥è®¾ç½®ï¼Œå³marginå’Œpaddingå¯¹å—çº§å…ƒç´ çš„ä¸Šä¸‹å·¦å³æ–¹å‘æœ‰æ•ˆã€‚å¸¸è§å—å…ƒç´ ï¼š123456789101112131415161718192021222324â—Ž address - åœ°å€â—Ž blockquote - å—å¼•ç”¨â—Ž center - å±…ä¸­å¯¹é½å—â—Ž dir - ç›®å½•åˆ—è¡¨â—Ž div - å¸¸ç”¨å—çº§å®¹å™¨ï¼Œä¹Ÿæ˜¯css layoutçš„ä¸»è¦æ ‡ç­¾â—Ž dl - å®šä¹‰åˆ—è¡¨â—Ž fieldset - formæŽ§åˆ¶ç»„â—Ž form - äº¤äº’è¡¨å•â—Ž h1 - å¤§æ ‡é¢˜â—Ž h2 - å‰¯æ ‡é¢˜â—Ž h3 - 3çº§æ ‡é¢˜â—Ž h4 - 4çº§æ ‡é¢˜â—Ž h5 - 5çº§æ ‡é¢˜â—Ž h6 - 6çº§æ ‡é¢˜â—Ž hr - æ°´å¹³åˆ†éš”çº¿â—Ž isindex - input promptâ—Ž menu - èœå•åˆ—è¡¨â—Ž noframes - frameså¯é€‰å†…å®¹ï¼Œï¼ˆå¯¹äºŽä¸æ”¯æŒframeçš„æµè§ˆå™¨æ˜¾ç¤ºæ­¤åŒºå—å†…å®¹ï¼‰â—Ž noscript - å¯é€‰è„šæœ¬å†…å®¹ï¼ˆå¯¹äºŽä¸æ”¯æŒscriptçš„æµè§ˆå™¨æ˜¾ç¤ºæ­¤å†…å®¹ï¼‰â—Ž ol - æŽ’åºè¡¨å•â—Ž p - æ®µè½â—Ž pre - æ ¼å¼åŒ–æ–‡æœ¬â—Ž table - è¡¨æ ¼â—Ž ul - éžæŽ’åºåˆ—è¡¨ï¼ˆæ— åºåˆ—è¡¨ï¼‰Â¶3. è¡Œå†…å—å…ƒç´ ï¼ˆinline-blockï¼‰ï¼ˆ1ï¼‰è¡Œå†…å—å…ƒç´ ä¸ä¼šç‹¬å ä¸€è¡Œï¼Œå’Œå…¶ä»–è¡Œå†…å—å…ƒç´ éƒ½åœ¨ä¸€è¡Œä¸Šï¼Œå½“é‡åˆ°çˆ¶çº§å…ƒç´ è¾¹ç•Œæ‰ä¼šè¢«è¿«è‡ªåŠ¨æ¢è¡Œã€‚ï¼ˆ2ï¼‰èƒ½è®¾ç½®å®½é«˜ã€‚å®½åº¦ï¼š1ã€å¯ä»¥è‡ªè¡Œè®¾ç½®widthçš„å€¼ï¼Œ2ã€å¦‚æžœæ²¡æœ‰è®¾ç½®widthï¼Œå†…å®¹å†³å®šå®½åº¦ã€‚é«˜åº¦ï¼š1ã€å¯ä»¥è‡ªè¡Œè®¾ç½®heightçš„å€¼ï¼Œ2ã€å¦‚æžœæ²¡æœ‰è®¾ç½®heightï¼Œå†…å®¹å†³å®šé«˜åº¦ã€‚ï¼ˆ3ï¼‰ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œå¯å®¹çº³è¡Œå†…å…ƒç´ å’Œå…¶ä»–å—çº§å…ƒç´ ä»¥åŠè¡Œå†…å—å…ƒç´ ã€‚ï¼ˆ4ï¼‰å†…å¤–è¾¹è·éƒ½å¯ä»¥è®¾ç½®ï¼Œå³marginå’Œpaddingå¯¹è¡Œå†…å—å…ƒç´ çš„ä¸Šä¸‹å·¦å³æ–¹å‘æœ‰æ•ˆã€‚Â¶4. å…ƒç´ æ˜¾ç¤ºæ¨¡å¼è½¬åŒ–è¡Œå†…å…ƒç´ ã€å—çº§å…ƒç´ å’Œè¡Œå†…å—çº§å…ƒç´ ä¹‹é—´å¯ä»¥ä»»æ„è½¬åŒ–æ˜¾ç¤ºæ¨¡å¼ã€‚123display: inline; /*è½¬åŒ–æ˜¾ç¤ºæ¨¡å¼ä¸ºè¡Œå†…å…ƒç´ */display: block; /*è½¬åŒ–æ˜¾ç¤ºæ¨¡å¼ä¸ºå—çº§å…ƒç´ */display: inline-block; /*è½¬åŒ–æ˜¾ç¤ºæ¨¡å¼ä¸ºè¡Œå†…å—çº§å…ƒç´ */Â¶äºŒã€å¸ƒå±€æ–¹å¼ç½‘é¡µå¸ƒå±€æ–¹å¼å°±æ˜¯æµè§ˆå™¨å¯¹ç½‘é¡µå…ƒç´ è¿›è¡ŒæŽ’ç‰ˆçš„æ–¹å¼ã€‚å…±æœ‰ä¸‰ç§æ–¹å¼ï¼šÂ¶1. æ ‡å‡†æµï¼ˆæ–‡æ¡£æµ/æ™®é€šæµï¼‰çš„æŽ’ç‰ˆæ–¹å¼ï¼ˆ1ï¼‰æ˜¯æµè§ˆå™¨é»˜è®¤çš„æŽ’ç‰ˆæ–¹å¼ã€‚ï¼ˆ2ï¼‰åœ¨æ ‡å‡†æµä¸­ï¼Œæµè§ˆå™¨å¯¹ç½‘é¡µçš„å¸ƒå±€åˆ†ä¸ºåž‚ç›´æŽ’ç‰ˆå’Œæ°´å¹³æŽ’ç‰ˆä¸¤ç§å¸ƒå±€ã€‚åœ¨cssä¸­ï¼Œåˆå°†å…ƒç´ åˆ†ä¸ºå—çº§å…ƒç´ ã€è¡Œå†…å…ƒç´ å’Œè¡Œå†…å—çº§å…ƒç´ ä¸‰ç§å…ƒç´ ã€‚**åž‚ç›´æŽ’ç‰ˆï¼š**å—çº§å…ƒç´ ï¼šç‹¬å ä¸€è¡Œï¼Œå¯ä»¥è®¾ç½®å®½é«˜ã€‚æ°´å¹³æŽ’ç‰ˆï¼šè¡Œå†…å…ƒç´ ï¼šä¸ç‹¬å ä¸€è¡Œï¼Œå¯åœ¨ä¸€è¡Œå†…æŽ’å¸ƒï¼Œä¸èƒ½è®¾ç½®å®½é«˜ã€‚è¡Œå†…å—çº§å…ƒç´ ï¼šä¸ç‹¬å ä¸€è¡Œï¼Œå¯åœ¨ä¸€è¡Œå†…æŽ’å¸ƒï¼Œèƒ½è®¾ç½®å®½é«˜ã€‚ *å¤‡æ³¨ï¼šç›’å­åµŒå¥—å…³ç³»ä¸­ï¼Œå¦‚æžœå­å…ƒç´ çš„é«˜åº¦å¤§äºŽçˆ¶å…ƒç´ çš„é«˜åº¦ï¼ˆæˆ–è€…çˆ¶å…ƒç´ æ²¡æœ‰è®¾ç½®é«˜åº¦ï¼‰ï¼Œé‚£ä¹ˆå­å…ƒç´ ä¼šæ’‘èµ·çˆ¶å…ƒç´ çš„é«˜åº¦ã€‚* Â¶2. æµ®åŠ¨æµçš„æŽ’ç‰ˆæ–¹å¼ï¼ˆ1ï¼‰æ˜¯ä¸€ç§â€œåŠè„±ç¦»æ ‡å‡†æµâ€çš„æŽ’ç‰ˆæ–¹å¼ã€‚æµ®åŠ¨å…ƒç´ åªåœ¨æµ®åŠ¨å‰ä¸ºæ ‡å‡†æµå…ƒç´ æ—¶æ‰€åœ¨çš„è¡Œå†…è¿›è¡Œæµ®åŠ¨ï¼Œä¸ä¼šè·‘åˆ°å…¶ä»–è¡ŒåŽ»ã€‚ï¼ˆ2ï¼‰åªæœ‰ä¸€ç§æŽ’ç‰ˆæ–¹å¼ï¼Œå³æ°´å¹³æŽ’ç‰ˆã€‚ï¼ˆ3ï¼‰åªèƒ½è®¾ç½®å…ƒç´ å·¦å¯¹é½æˆ–è€…å³å¯¹é½ï¼Œä¸èƒ½è®¾ç½®å±…ä¸­å¯¹é½ã€‚ï¼ˆ4ï¼‰**æµ®åŠ¨æµè§£å†³çš„é—®é¢˜ï¼š**è§£å†³äº†æ ‡å‡†æµä¸æ–¹ä¾¿è®©å…ƒç´ å·¦å¯¹é½å’Œå³å¯¹é½çš„é—®é¢˜ã€‚ï¼ˆ5ï¼‰æµ®åŠ¨æµçš„ç‰¹ç‚¹ï¼šâ‘ . ä¸åŒºåˆ†å—çº§å…ƒç´ ã€è¡Œå†…å…ƒç´ ã€è¡Œå†…å—çº§å…ƒç´ çš„æŽ’ç‰ˆæ–¹å¼ã€‚æµ®åŠ¨æµä¸­çš„æ‰€æœ‰å…ƒç´ éƒ½æ˜¯æ°´å¹³æŽ’ç‰ˆå¹¶ä¸”è¡Œå†…å…ƒç´ åœ¨æµ®åŠ¨æµä¸­èƒ½å¤Ÿè®¾ç½®å®½é«˜ã€‚123456789101112131415161718192021222324252627282930313233343536373839404142434445&lt;!-- box1å’Œbox3æ˜¯æµ®åŠ¨æµå…ƒç´ ,box2å’Œbox4æ˜¯æ ‡å‡†æµå…ƒç´ ã€‚æµ®åŠ¨å…ƒç´ åªåœ¨æµ®åŠ¨å‰ä¸ºæ ‡å‡†æµå…ƒç´ æ—¶æ‰€åœ¨çš„è¡Œå†…è¿›è¡Œæµ®åŠ¨ï¼Œä¸ä¼šè·‘åˆ°å…¶ä»–è¡ŒåŽ»ã€‚ --&gt;&lt;!DOCTYPE html&gt;&lt;html lang="en"&gt;&lt;head&gt; &lt;meta charset="UTF-8"&gt; &lt;title&gt;Document&lt;/title&gt; &lt;style type="text/css"&gt; body&#123; margin: 0px; padding: 0px; &#125; .box1&#123; width: 300px; height: 300px; background-color: red; float: left; &#125; .box2&#123; width: 400px; height: 400px; background-color: blue; &#125; .box3&#123; width: 300px; height: 300px; background-color: orange; float: left; &#125; .box4&#123; width: 400px; height: 400px; background-color: green; &#125; &lt;/style&gt;&lt;/head&gt;&lt;body&gt; &lt;div class="box1"&gt;æˆ‘æ˜¯box1&lt;/div&gt; &lt;!-- æµ®åŠ¨å‰åœ¨ç¬¬ä¸€è¡Œï¼Œæµ®åŠ¨åŽè„±æ ‡åœ¨ç¬¬ä¸€è¡Œçš„ä¸Šæ–¹ï¼Œä¸å ç”¨æ ‡å‡†æµçš„ä½ç½® --&gt; &lt;div class="box2"&gt;æˆ‘æ˜¯box2&lt;/div&gt;&lt;!-- æ ‡å‡†æµå…ƒç´ box2å¡«å……æµ®åŠ¨æµå…ƒç´ box1çš„ä½ç½®ã€‚ç§»åŠ¨åˆ°ç¬¬ä¸€è¡Œ --&gt; &lt;div class="box3"&gt;æˆ‘æ˜¯box3&lt;/div&gt;&lt;!-- å› ä¸ºbox2ç§»åŠ¨åˆ°äº†ç¬¬ä¸€è¡Œï¼Œæ‰€ä»¥box3æµ®åŠ¨å‰ä¼šå¡«å……ç¬¬äºŒè¡Œç©ºå‡ºæ¥çš„ä½ç½®,æ•…æµ®åŠ¨å‰ä¸ºç¬¬äºŒè¡Œ ï¼Œæµ®åŠ¨åŽå†ç¬¬äºŒè¡Œçš„ä¸Šæ–¹--&gt; &lt;div class="box4"&gt;æˆ‘æ˜¯box4&lt;/div&gt;&lt;!-- æ ‡å‡†æµå…ƒç´ box4å¡«å……æµ®åŠ¨æµå…ƒç´ box3çš„ä½ç½®ã€‚ç§»åŠ¨åˆ°ç¬¬äºŒè¡Œ --&gt;&lt;/body&gt;&lt;/html&gt;â‘¡. æµ®åŠ¨æµä¸­çš„æ‰€æœ‰å…ƒç´ éƒ½å’Œæ ‡å‡†æµä¸­è¡Œå†…å—çº§å…ƒç´ å¾ˆç›¸ä¼¼ã€‚â‘¢. æµ®åŠ¨å…ƒç´ æŽ’åºè§„åˆ™ã€‚ç›¸åŒæ–¹å‘çš„æµ®åŠ¨å…ƒç´ ï¼šå…ˆæµ®åŠ¨çš„åœ¨å‰é¢ï¼ŒåŽæµ®åŠ¨çš„ä¼šæ˜¾ç¤ºåœ¨åŽé¢ã€‚ä¸åŒæ–¹å‘ä¸Šçš„æµ®åŠ¨å…ƒç´ ï¼šå·¦æµ®åŠ¨çš„å¾€å·¦è¾¹æ˜¾ç¤ºï¼Œå³æµ®åŠ¨çš„å¾€å³è¾¹æ˜¾ç¤ºã€‚æµ®åŠ¨å…ƒç´ æµ®åŠ¨ä¹‹åŽçš„ä½ç½®ï¼Œç”±æµ®åŠ¨å…ƒç´ æµ®åŠ¨ä¹‹å‰åœ¨æ ‡å‡†æµä¸­çš„ä½ç½®æ¥ç¡®å®šã€‚â‘£. æµ®åŠ¨å…ƒç´ åªä¼šè¦†ç›–æ ‡å‡†æµå…ƒç´ ï¼Œä¸ä¼šè¦†ç›–æµ®åŠ¨æµå…ƒç´ ã€‚â‘¤. æµ®åŠ¨å…ƒç´ çš„â€œè„±æ ‡â€œåœ¨åŒçˆ¶å…ƒç´ å†…ï¼Œå¦‚æžœå‰é¢çš„ä¸€ä¸ªå…ƒç´ æµ®åŠ¨äº†ï¼Œè€ŒåŽé¢çš„å—çº§å…ƒç´ æ²¡æœ‰æµ®åŠ¨ï¼Œé‚£ä¹ˆå‰é¢çš„å…ƒç´ ä¼šä»Žæ ‡å‡†æµä¸­è„±ç¦»å‡ºæ¥ï¼Œå°±ä¼šç©ºå‡ºä¸€ä¸ªä½ç½®ï¼ŒåŽé¢æ²¡æœ‰æµ®åŠ¨çš„æ ‡å‡†æµå…ƒç´ å°±ä¼šæŒ‰ç…§æ ‡å‡†æµå‘å·¦ä¸Šè§’æŽ’ç‰ˆçš„è§„åˆ™å¡«å……è¿™ä¸ªç©ºå‡ºæ¥çš„ä½ç½®ã€‚æ•ˆæžœæ˜¯ä¼šç›–ä½åŽé¢åŒä½ç½®çš„å…ƒç´ ã€‚åè¿‡æ¥ï¼Œå¦‚æžœå‰é¢æ˜¯æ ‡å‡†æµå—çº§å…ƒç´ ï¼ŒåŽé¢æ˜¯æµ®åŠ¨æµå…ƒç´ ï¼Œé‚£ä¹ˆåŽé¢çš„æµ®åŠ¨æµå…ƒç´ æ˜¯ä¸ä¼šè¦†ç›–ä½å‰é¢çš„æ ‡å‡†æµå—çº§å…ƒç´ çš„ï¼Œå› ä¸ºæ²¡æœ‰ç©ºå‡ºçš„ä½ç½®ç»™æµ®åŠ¨å…ƒç´ å¡«å……ï¼Œæ­¤æ—¶çš„æµ®åŠ¨å…ƒç´ åªä¼šåœ¨å‰é¢çš„æ ‡å‡†æµå—çº§å…ƒç´ çš„ä¸‹ä¸€è¡Œæµ®åŠ¨æ˜¾ç¤ºã€‚123456789101112131415161718192021222324252627282930313233343536373839&lt;!-- 1. æµ®åŠ¨æµä¸­çš„æ‰€æœ‰å…ƒç´ éƒ½æ˜¯æ°´å¹³æŽ’ç‰ˆå¹¶ä¸”è¡Œå†…å…ƒç´ åœ¨æµ®åŠ¨æµä¸­èƒ½å¤Ÿè®¾ç½®å®½é«˜ã€‚ 2 .åœ¨åŒçˆ¶å…ƒç´ å†…ï¼Œå¦‚æžœå‰é¢çš„ä¸€ä¸ªå…ƒç´ æµ®åŠ¨äº†ï¼Œè€ŒåŽé¢çš„å—çº§å…ƒç´ æ²¡æœ‰æµ®åŠ¨ï¼Œé‚£ä¹ˆå‰é¢çš„å…ƒç´ å°±ä¼šç›–ä½åŽé¢åŒä½ç½®çš„å…ƒç´ ã€‚åè¿‡æ¥ä¸ä¼šæœ‰è¿™ç§æƒ…å†µã€‚--&gt;&lt;!DOCTYPE html&gt;&lt;html lang="en"&gt; &lt;head&gt; &lt;meta charset="UTF-8"&gt; &lt;title&gt;Document&lt;/title&gt; &lt;style type="text/css"&gt; .span1&#123; background-color: red; /*æµ®åŠ¨æµä¸­è¡Œå†…å…ƒç´ æ­¤æ—¶èƒ½è®¾ç½®å®½é«˜äº†ã€‚*/ width: 300px; height: 300px; float: left; &#125; .div1&#123; background-color: blue; width: 300px; height: 300px; /*æµ®åŠ¨æµä¸­çš„æ‰€æœ‰å…ƒç´ éƒ½æ˜¯æ°´å¹³æŽ’ç‰ˆ*/ float: right; &#125; /*div2ä¼šè¢«span1è¦†ç›–,å¦‚æžœå‰é¢çš„ä¸€ä¸ªå…ƒç´ æµ®åŠ¨äº†ï¼Œè€ŒåŽé¢çš„å—çº§å…ƒç´ æ²¡æœ‰æµ®åŠ¨*/ .div2&#123; background-color: pink; width: 400px; height: 400px; &#125; &lt;/style&gt; &lt;/head&gt; &lt;body&gt; &lt;span class="span1"&gt;&lt;/span&gt; &lt;div class="div1"&gt;&lt;/div&gt; &lt;div class="div2"&gt;&lt;/div&gt; &lt;/body&gt;&lt;/html&gt;â‘¥. æµ®åŠ¨å…ƒç´ çš„è´´é çŽ°è±¡ï¼šå¦‚æžœçˆ¶å…ƒç´ ä¸­çš„æµ®åŠ¨è¡Œçš„å®½åº¦èƒ½å¤Ÿå®¹å¾—ä¸‹æ‰€æœ‰æµ®åŠ¨å…ƒç´ ï¼Œé‚£ä¹ˆæµ®åŠ¨å…ƒç´ å¹¶æŽ’æ˜¾ç¤ºã€‚å¦‚æžœçˆ¶å…ƒç´ ä¸­çš„æµ®åŠ¨è¡Œçš„å®½åº¦æ— æ³•å®¹å¾—ä¸‹æ‰€æœ‰æµ®åŠ¨å…ƒç´ ï¼Œé‚£ä¹ˆæœ€åŽä¸€ä¸ªå…ƒç´ ä¼šå¼€å§‹å¾€ä¸‹è¡Œç§»åŠ¨ä»¥è‡´äºŽèƒ½å¤Ÿè´´é ï¼Œå³ä»Žæ­¤å…ƒç´ å‰çš„å…ˆå‰æµ®åŠ¨å…ƒç´ ä¸€ä¸ªä¸€ä¸ªæ£€æŸ¥ï¼Œå¦‚æžœå®¹å¾—ä¸‹è¿™ä¸ªå…ƒç´ ï¼Œé‚£ä¹ˆè´´é åœ¨è¿™ä¸ªå…ˆå‰æµ®åŠ¨å…ƒç´ è¾¹ä¸Šã€‚å¦‚æžœè´´é äº†å‰é¢æ‰€æœ‰æµ®åŠ¨å…ƒç´ ä¹‹åŽéƒ½ä¸èƒ½å®¹çš„ä¸‹ï¼Œæœ€ç»ˆä¼šè´´é åœ¨è¿™äº›æµ®åŠ¨å…ƒç´ æ‰€åœ¨çš„çˆ¶å…ƒç´ çš„å·¦è¾¹æˆ–è€…å³è¾¹ä¸Šã€‚123456789101112131415161718192021222324252627282930313233343536373839404142434445464748&lt;!DOCTYPE html&gt;&lt;html lang="en"&gt; &lt;head&gt; &lt;meta charset="UTF-8"&gt; &lt;title&gt;Document&lt;/title&gt; &lt;style type="text/css"&gt; .father &#123; border: 2px solid; width: 500px; height: 1500px; background-color: #bcb2b2; &#125; .box1&#123; width: 100px; height: 500px; background-color: red; float: left; &#125; .box2&#123; width: 200px; height: 400px; background-color: blue; float: left; &#125; .box3&#123; width: 100px; height: 200px; background-color: orange; float: left; &#125; .box4&#123; width: 80px; height: 80px; background-color: green; float: left; &#125; &lt;/style&gt; &lt;/head&gt; &lt;body&gt; &lt;div class="father"&gt; &lt;div class="box1"&gt;æˆ‘æ˜¯box1&lt;/div&gt; &lt;div class="box2"&gt;æˆ‘æ˜¯box2&lt;/div&gt; &lt;div class="box3"&gt;æˆ‘æ˜¯box3&lt;/div&gt; &lt;!-- ç”¨æµè§ˆå™¨è°ƒè¯•å¢žåŠ box4çš„å®½åº¦ --&gt; &lt;div class="box4"&gt;æˆ‘æ˜¯box4&lt;/div&gt; &lt;/div&gt; &lt;/body&gt;&lt;/html&gt;â‘¦. æµ®åŠ¨å…ƒç´ çš„å­—å›´çŽ°åƒã€‚æµ®åŠ¨å…ƒç´ ä¼šè¦†ç›–æŽ‰åŽé¢çš„æ ‡å‡†æµå…ƒç´ ï¼Œä½†ä¸ä¼šç›–ä½æ ‡å‡†æµå…ƒç´ ä¸­çš„æ–‡å­—ã€‚123456789101112131415161718192021222324&lt;!DOCTYPE html&gt;&lt;html lang="en"&gt;&lt;head&gt; &lt;meta charset="UTF-8"&gt; &lt;title&gt;Document&lt;/title&gt; &lt;style type="text/css"&gt; div&#123; width: 100px; height: 100px; background-color: red; float: left; &#125; p&#123; width: 500px; height: 500px; background-color: skyblue; &#125; &lt;/style&gt;&lt;/head&gt;&lt;body&gt; &lt;div&gt;æˆ‘æ˜¯div&lt;/div&gt; &lt;p&gt;æˆ‘æ˜¯pï¼Œæˆ‘ä¼šè¢«æµ®åŠ¨å…ƒç´ è¦†ç›–åˆ°å—ï¼Ÿå¦‚æžœä½ çœ‹åˆ°å®Œæ•´çš„æˆ‘ï¼Œé‚£ä¹ˆæˆ‘ä¸ä¼šè¢«æµ®åŠ¨å…ƒç´ é®ç›–åˆ°å“¦ï¼&lt;/p&gt;&lt;/body&gt;&lt;/html&gt;â‘§. åœ¨æµ®åŠ¨æµä¸­å…ƒç´ ï¼ˆå†…å®¹ï¼‰ä¸ä¼šæ’‘èµ·çˆ¶å…ƒç´ çš„é«˜åº¦ã€‚Â¶3. å®šä½æµçš„æŽ’ç‰ˆæ–¹å¼Â¶ä¸‰ã€ç½‘é¡µè®¾è®¡æŠ€å·§åž‚ç›´æ–¹å‘ä¸€èˆ¬ä½¿ç”¨æ ‡å‡†æµï¼Œæ°´å¹³æ–¹å‘ä¸€èˆ¬ç”¨æµ®åŠ¨æµã€‚]]></content>
      <categories>
        <category>front</category>
      </categories>
      <tags>
        <tag>html</tag>
        <tag>css</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[é«˜åº¦è‡ªé€‚åº”å¸ƒå±€è®¾è®¡]]></title>
    <url>%2Ffront%2Fhighly_adaptive.html</url>
    <content type="text"><![CDATA[Demo1ï¼š123456789101112131415161718192021222324252627282930313233343536&lt;!DOCTYPE html&gt;&lt;html lang="en"&gt;&lt;head&gt;&lt;meta charset="UTF-8"&gt;&lt;title&gt;Document&lt;/title&gt;&lt;style type="text/css"&gt; html,body&#123; margin:0px; height:100%; &#125; .header&#123; height:15%; background:red; &#125; .main&#123; height: 70%; background-color: green; &#125; .footer&#123; height: 15%; background-color: gray; &#125; div&#123; display:flex; justify-content:center; align-items:center; &#125;&lt;/style&gt;&lt;/head&gt;&lt;body&gt; &lt;div class="header"&gt;header&lt;/div&gt; &lt;div class="main"&gt;main&lt;/div&gt; &lt;div class="footer"&gt;footer&lt;/div&gt;&lt;/body&gt;&lt;/html&gt;å½“ç»™bodyé‡Œçš„ç›’å­è®¾ç½®åŠåˆ†æ¯”æ—¶ï¼Œéœ€è¦å¯¹htmlå’Œbodyè®¾ç½®é«˜åº¦,è¦å®žçŽ°å±å¹•é«˜åº¦è‡ªé€‚åº”ï¼Œå°±è¦å°†htmlå’Œbodyçš„é«˜åº¦è®¾ç½®ä¸º100%ã€‚æ–‡å­—å±…ä¸­é—®é¢˜ï¼šdivä½¿ç”¨line-heightå±…ä¸­æ–‡å­—çš„è¯,å°±å¿…é¡»ä½¿ç”¨ç»å¯¹çš„pxå€¼è®©line-heightç­‰äºŽçˆ¶ç›’å­çš„é«˜åº¦pxã€‚ä½†å¦‚æžœæ–‡æœ¬çš„çˆ¶ç›’å­divçš„é«˜åº¦æ˜¯ç™¾åˆ†æ¯”å€¼æ—¶ï¼Œå¦‚æžœç›´æŽ¥è®¾ç½®line-height:çˆ¶ç›’å­çš„ç™¾åˆ†æ¯”å€¼å¾—è¯æ˜¯æ— æ³•å®žçŽ°å…ƒç´ å†…éƒ¨çš„æ–‡å­—åž‚ç›´å±…ä¸­çš„ã€‚è§£å†³æ–¹æ³•ï¼šæ–¹æ³•ä¸€ï¼ˆè¿™ç§æ–¹å¼é€‚ç”¨äºŽå•è¡Œå’Œå¤šè¡Œæ–‡æœ¬åž‚ç›´å±…ä¸­ï¼‰:â€‹ ç»™éœ€è¦å±…ä¸­çš„å…ƒç´ åŠ ä»¥ä¸‹ä»£ç æ ·å¼å’Œâ€‹ display:flex;â€‹ align-items:center;â€‹ å¦‚æžœè¿˜è¦å®žçŽ°æ°´å¹³å±…ä¸­çš„è¯å¯ä»¥åŠ ä¸Šjustify-content:center;æ–¹æ³•äºŒ:â€‹ å¢žåŠ ä¸€ä¸ªçˆ¶å…ƒç´ ,ç»™çˆ¶å…ƒç´ è®¾ç½®position:absolute; display:table; ç»™éœ€è¦å±…ä¸­çš„å…ƒç´ è®¾ç½®display:table-cell; vertical-align:middle;â€‹ ä½†æœ‰ä¸ªé—®é¢˜ï¼Œé‚£å°±æ˜¯è®¾ç½®display:table-cell; vertical-align:middle;äº†çš„å¤šä¸ªç›’å­ä¼šè·‘åˆ°ä¸€è¡Œé‡Œã€‚Demo2ï¼š12345678910111213141516171819202122232425262728293031323334353637383940&lt;!DOCTYPE html&gt;&lt;html lang="en"&gt;&lt;head&gt; &lt;meta charset="UTF-8"&gt; &lt;title&gt;Document&lt;/title&gt; &lt;style type="text/css"&gt; body,html&#123; margin: 0px; padding: 0px; &#125; .container &#123; display: flex; min-height: 100vh; flex-direction: column; &#125; header &#123; background: #cecece; min-height: 100px; &#125; content &#123; background: #bbbbbb; flex: 1; /* 1 ä»£è¡¨ç›¡å¯èƒ½æœ€å¤§ï¼Œæœƒè‡ªå‹•å¡«æ»¿é™¤äº† header footer ä»¥å¤–çš„ç©ºé–“ */ &#125; footer &#123; background: #333333; min-height: 100px; &#125; &lt;/style&gt;&lt;/head&gt;&lt;body&gt; &lt;div class="container"&gt; &lt;header&gt;&lt;/header&gt; &lt;content&gt;&lt;/content&gt; &lt;footer&gt;&lt;/footer&gt; &lt;/div&gt;&lt;/body&gt;&lt;/html&gt;]]></content>
      <categories>
        <category>front</category>
      </categories>
      <tags>
        <tag>html</tag>
        <tag>css</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ç›’å­è¾¹è·çš„æ¦‚å¿µå’Œå„ç§çŽ°è±¡]]></title>
    <url>%2Ffront%2Fdistance.html</url>
    <content type="text"><![CDATA[Â¶ç›’å­æ¨¡åž‹çš„é«˜åº¦å’Œå®½åº¦çš„æ¦‚å¿µå†…å®¹çš„å®½åº¦å’Œé«˜åº¦å°±æ˜¯é€šè¿‡å¯¹æ ‡ç­¾çš„width/heightå±žæ€§è®¾ç½®çš„å€¼ã€‚å…ƒç´ çš„å®½åº¦å’Œé«˜åº¦å®½åº¦=å·¦è¾¹æ¡†+å·¦å†…è¾¹è·+width+å³å†…è¾¹è·+å³è¾¹æ¡†é«˜åº¦=ä¸Šè¾¹æ¡†+ä¸Šå†…è¾¹è·+height+ä¸‹å†…è¾¹è·+ä¸‹è¾¹æ¡†å…ƒç´ ç©ºé—´çš„å®½åº¦å’Œé«˜åº¦å®½åº¦=å·¦å¤–è¾¹è·+å·¦è¾¹æ¡†+å·¦å†…è¾¹è·+width+å³å†…è¾¹è·+å³è¾¹æ¡†+æœ‰å¤–è¾¹è·é«˜åº¦=ä¸Šå¤–è¾¹è·+ä¸Šè¾¹æ¡†+ä¸Šå†…è¾¹è·+height+ä¸‹å†…è¾¹è·+ä¸‹è¾¹æ¡†+ä¸‹å¤–è¾¹è·Â¶ç›’å­æ¨¡åž‹å¤–è¾¹è·å åŠ å’Œåˆå¹¶çš„çŽ°è±¡åœ¨é»˜è®¤å¸ƒå±€çš„æ°´å¹³æ–¹å‘ä¸Šï¼Œé»˜è®¤æƒ…å†µä¸‹å¤–è¾¹è·æ˜¯ä¼šå åŠ çš„ã€‚ç›’å­ä¹‹é—´çš„è·ç¦»ç­‰äºŽä¸¤ä¸ªç›’å­å„è‡ªçš„ç›¸é‚»å¤–è¾¹è·ä¹‹å’Œã€‚åœ¨é»˜è®¤å¸ƒå±€çš„åž‚ç›´æ–¹å‘ä¸Šï¼Œé»˜è®¤æƒ…å†µä¸‹å¤–è¾¹è·æ˜¯ä¸ä¼šå åŠ çš„ï¼Œè€Œæ˜¯ä¼šå‡ºçŽ°åˆå¹¶çŽ°è±¡ï¼Œä¸¤ä¸ªç›’å­ä¸­ç›¸é‚»å¤–è¾¹è·å¤§çš„å†³å®šç›’å­ä¹‹é—´çš„è·ç¦»ã€‚æ°´å¹³æ–¹å‘å¤–è¾¹è·å åŠ çŽ°è±¡12345678910111213141516171819202122232425&lt;!DOCTYPE html&gt;&lt;html lang="en"&gt;&lt;head&gt; &lt;meta charset="UTF-8"&gt; &lt;title&gt;æ°´å¹³æ–¹å‘å¤–è¾¹è·å åŠ çŽ°è±¡&lt;/title&gt; &lt;style type="text/css"&gt; .box1&#123; width: 200px; height: 200px; background-color: blue; margin-bottom: 50px; &#125; .box2&#123; width: 200px; height: 200px; background-color: red; margin-top: 100px; &#125; &lt;/style&gt;&lt;/head&gt;&lt;body&gt; &lt;div class="box1"&gt;æˆ‘æ˜¯box1&lt;/div&gt; &lt;div class="box2"&gt;æˆ‘æ˜¯box2&lt;/div&gt;&lt;/body&gt;&lt;/html&gt;åž‚ç›´æ–¹å‘å¤–è¾¹è·åˆå¹¶çŽ°è±¡123456789101112131415161718192021222324252627&lt;!DOCTYPE html&gt;&lt;html lang="en"&gt;&lt;head&gt; &lt;meta charset="UTF-8"&gt; &lt;title&gt;åž‚ç›´æ–¹å‘å¤–è¾¹è·åˆå¹¶çŽ°è±¡&lt;/title&gt; &lt;style type="text/css"&gt; .box1&#123; width: 200px; height: 200px; background-color: blue; display: inline-block; margin-right: 50px; &#125; .box2&#123; width: 200px; height: 200px; background-color: red; display: inline-block; margin-left: 100px; &#125; &lt;/style&gt;&lt;/head&gt;&lt;body&gt; &lt;div class="box1"&gt;æˆ‘æ˜¯box1&lt;/div&gt; &lt;div class="box2"&gt;æˆ‘æ˜¯box2&lt;/div&gt;&lt;/body&gt;&lt;/html&gt;Â¶paddingå’Œborderå¯¹å…ƒç´ å®½é«˜çš„å½±å“å¢žåŠ paddingä¹‹åŽå…ƒç´ çš„å®½é«˜ä¹Ÿä¼šå‘ç”Ÿæ”¹å˜ï¼Œä½†æ˜¯å†…å®¹çš„å®½é«˜ä¸æ”¹å˜ã€‚å¦‚æžœå¢žåŠ paddingä¹‹åŽä»è¦ä¿æŒå…ƒç´ çš„å®½é«˜ï¼Œé‚£ä¹ˆå°±è¦å‡åŽ»å†…å®¹çš„å®½é«˜ã€‚åŒç†ï¼Œå¢žåŠ borderä¹‹åŽå…ƒç´ çš„å®½é«˜ä¹Ÿä¼šå‘ç”Ÿæ”¹å˜ï¼Œä½†æ˜¯å†…å®¹çš„å®½é«˜ä¸æ”¹å˜ã€‚å¦‚æžœå¢žåŠ borderä¹‹åŽä»è¦ä¿æŒå…ƒç´ çš„å®½é«˜ï¼Œé‚£ä¹ˆå°±è¦å‡åŽ»å†…å®¹çš„å®½é«˜ã€‚æ³¨æ„ï¼šmarginçš„å¢žåŠ ä¸ä¼šå¯¹å…ƒç´ çš„å®½é«˜äº§ç”Ÿå½±å“ã€‚css3ä¸­æ–°å¢žäº†ä¸€ä¸ªbox-sizingçš„å±žæ€§ï¼Œè¿™ä¸ªå±žæ€§å¯ä»¥ä¿è¯ç»™ç›’å­å¢žåŠ paddingå’Œborderä¹‹åŽï¼Œå…ƒç´ çš„å®½é«˜ä¸ä¼šå‘ç”Ÿæ”¹å˜ï¼ŒåŽŸç†ä¸Žä¸Šè¿°ä¸€æ ·ï¼Œå³è‡ªåŠ¨å‡åŽ»å†…å®¹çš„å®½é«˜ã€‚box-sizingçš„å–å€¼ï¼šcontent-box # å…ƒç´ çš„å®½é«˜=è¾¹æ¡†+å†…è¾¹è·+å†…å®¹å®½é«˜border-box #å…ƒç´ çš„å®½é«˜=åŽŸæœ¬è®¾ç½®çš„width/heightå€¼ã€‚1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980818283&lt;!DOCTYPE html&gt;&lt;html lang="en"&gt;&lt;head&gt; &lt;meta charset="UTF-8"&gt; &lt;title&gt;paddingå’Œborderå¯¹å…ƒç´ å®½é«˜çš„å½±å“&lt;/title&gt; &lt;style type="text/css"&gt; /*å¢žåŠ paddingä¹‹åŽï¼Œåœ¨ä¸ä¿®æ”¹width/heightå€¼çš„æƒ…å†µï¼Œå…ƒç´ çš„å®½é«˜ä¹Ÿä¼šå‘ç”Ÿæ”¹å˜ï¼Œä½†æ˜¯å†…å®¹çš„å®½é«˜ä¸æ”¹å˜ã€‚*/ .box1&#123; width: 100px; height: 100px; background-color: pink; &#125; .box1&#123; padding: 10px; &#125; /*å¢žåŠ borderä¹‹åŽï¼Œåœ¨ä¸ä¿®æ”¹width/heightå€¼çš„æƒ…å†µï¼Œå…ƒç´ çš„å®½é«˜ä¹Ÿä¼šå‘ç”Ÿæ”¹å˜ï¼Œä½†æ˜¯å†…å®¹çš„å®½é«˜ä¸æ”¹å˜ã€‚*/ .box2&#123; width: 100px; height: 100px; background-color: skyblue; &#125; .box2&#123; border: 10px black solid; &#125; /*å¢žåŠ paddingä¹‹åŽï¼Œwidth/heightå‡æŽ‰paddingçš„æƒ…å†µï¼Œå…ƒç´ çš„å®½é«˜ä¸ä¼šå‘ç”Ÿæ”¹å˜ï¼Œä½†æ˜¯å†…å®¹çš„å®½é«˜ä¼šæ”¹å˜ã€‚*/ .box3&#123; width: 100px; height: 100px; background-color: blue; &#125; .box3&#123; padding: 10px; width: 80px; height: 80px; &#125; /*å¢žåŠ borderä¹‹åŽï¼Œwidth/heightå‡æŽ‰borderçš„æƒ…å†µï¼Œå…ƒç´ çš„å®½é«˜ä¸ä¼šå‘ç”Ÿæ”¹å˜ï¼Œä½†æ˜¯å†…å®¹çš„å®½é«˜ä¼šæ”¹å˜ã€‚*/ .box4&#123; width: 100px; height: 100px; background-color: red; &#125; .box4&#123; border: 10px black solid; width: 80px; height: 80px; &#125; /*å¢žåŠ paddingä¹‹åŽï¼Œåœ¨æ·»åŠ box-sizing: border-box;çš„æƒ…å†µä¸‹ï¼Œå…ƒç´ çš„å®½é«˜ä¸ä¼šå‘ç”Ÿæ”¹å˜ï¼Œä½†æ˜¯å†…å®¹çš„å®½é«˜ä¼šæ”¹å˜ã€‚*/ .box5&#123; width: 100px; height: 100px; background-color: yellow; &#125; .box5&#123; padding: 10px; box-sizing: border-box; &#125; /*å¢žåŠ borderä¹‹åŽï¼Œåœ¨æ·»åŠ box-sizing: border-box;çš„æƒ…å†µä¸‹ï¼Œå…ƒç´ çš„å®½é«˜ä¸ä¼šå‘ç”Ÿæ”¹å˜ï¼Œä½†æ˜¯å†…å®¹çš„å®½é«˜ä¼šæ”¹å˜ã€‚*/ .box6&#123; width: 100px; height: 100px; background-color: green; &#125; .box6&#123; border: 10px black solid; box-sizing: border-box; &#125; &lt;/style&gt;&lt;/head&gt;&lt;body&gt; &lt;div class="box1"&gt;I am box1&lt;/div&gt; &lt;div class="box2"&gt;I am box2&lt;/div&gt; &lt;div class="box3"&gt;I am box3&lt;/div&gt; &lt;div class="box4"&gt;I am box4&lt;/div&gt; &lt;div class="box5"&gt;I am box5&lt;/div&gt; &lt;div class="box6"&gt;I am box6&lt;/div&gt;&lt;/body&gt;&lt;/html&gt;Â¶æ¸…é™¤é»˜è®¤è¾¹è·åœ¨ä¼ä¸šå¼€å‘ä¸­ä¸ºäº†æ›´å¥½æŽ§åˆ¶ç›’å­çš„å®½é«˜å’Œè®¡ç®—ç›’å­çš„å®½é«˜ç­‰ç­‰ï¼Œä¸€èˆ¬åœ¨ç¼–å†™ä»£ç æ—¶çš„ç¬¬ä¸€ä»¶äº‹å°±æ˜¯æ¸…é™¤ç›’å­é»˜è®¤çš„å†…å¤–è¾¹è·ã€‚ç”±äºŽå…ƒç´ ç§ç±»è¾ƒå¤šï¼Œç›’å­çš„å†…å¤–è¾¹è·ä¸å°½ç›¸åŒï¼Œç”šè‡³æœ‰çš„å…ƒç´ é»˜è®¤æ²¡æœ‰å†…å¤–è¾¹è·ã€‚æ•…æ¸…é™¤é»˜è®¤è¾¹è·çš„æ–¹æ³•å¯ä»¥ç”¨é€šé…ç¬¦é€‰æ‹©å™¨æ¥è®¾ç½®ï¼Œæ ¼å¼å¦‚ä¸‹ï¼š1234*&#123; margin: 0px; padding: 0px;&#125;ä½†æ˜¯ç”¨é€šé…ç¬¦é€‰æ‹©å™¨ä¼šéåŽ†é¡µé¢æ‰€æœ‰çš„æ ‡ç­¾ï¼Œå¯¼è‡´æ€§èƒ½ä¸è‰¯å¥½ï¼Œæ•…ä¼ä¸šå¼€å‘ä¸­ä¸€èˆ¬ä½¿ç”¨ä»¥ä¸‹æ¸…é™¤é»˜è®¤è¾¹è·çš„æ ¼å¼ï¼š1body,div,dl,dt,dd,ul,ol,li,h1,h2,h3,h4,h5,h6,pre,code,form,fieldset,legend,input,textarea,p,blockquote,th,td&#123;margin:0;padding:0&#125;å¯ä»Žhttp://yui.yahooapis.com/3.18.1/build/cssreset/cssreset-min.cssä¸­å¤åˆ¶ã€‚]]></content>
      <categories>
        <category>front</category>
      </categories>
      <tags>
        <tag>html</tag>
        <tag>css</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[æ¸…é™¤æµ®åŠ¨çš„æ–¹å¼]]></title>
    <url>%2Ffront%2Fclear_float.html</url>
    <content type="text"><![CDATA[fbox1å’Œfbox2æ˜¯ä¸¤ä¸ªçˆ¶ç›’å­ï¼Œå®½é«˜éƒ½æ²¡æœ‰è®¾ç½®ï¼Œä¸¤ä¸ªçˆ¶ç›’å­ä¸­å„è‡ªåˆåˆ†åˆ«æœ‰ä¸‰ä¸ªdivå­ç›’å­ï¼Œè¿™äº›å­ç›’å­éƒ½è®¾ç½®äº†éƒ½ä¸º100pxçš„å®½é«˜ï¼Œå¹¶ä¸”éƒ½å¾€å·¦è¾¹æµ®åŠ¨ï¼Œåœ¨å­ç›’å­æœªæµ®åŠ¨å‰çˆ¶ç›’å­çš„é«˜åº¦ç”±æ‰€æœ‰å¯¹åº”çš„å­ç›’å­å†³å®šã€‚ç”±äºŽå­ç›’å­éƒ½æµ®åŠ¨æœªå·¦ç§»æ—¶ï¼Œå­ç›’å­å„è‡ªéƒ½è„±æ ‡ï¼Œä»¥è‡´äºŽçˆ¶ç›’å­é«˜åº¦éšç€å­ç›’å­ä¸€ä¸ªä¸ªè„±æ ‡ï¼Œä¸¤ä¸ªçˆ¶ç›’å­é«˜åº¦æœ€ç»ˆéƒ½å‡å°‘ä¸º0ï¼ˆéƒ½æ˜¯ä»Žæµè§ˆå™¨é¡¶ç«¯å¼€å§‹ç®—çš„é«˜åº¦ï¼‰ï¼Œæœ€åŽå­ç›’å­åˆéƒ½å·¦æµ®å¾€å·¦è¾¹æŒ‰åºç§»åŠ¨ï¼Œå¯¼è‡´æ•´ä½“å­ç›’å­éƒ½æŽ’åœ¨ä¸€è¡Œå†…ã€‚éœ€æ±‚ï¼šè®©æ‰€æœ‰å­ç›’å­åœ¨å„è‡ªçš„çˆ¶ç›’å­å†…å·¦æµ®åŠ¨ï¼Œç¬¬äºŒä¸ªçˆ¶ç›’å­é‡Œé¢çš„å­ç›’å­ä¸è·‘åˆ°ç¬¬ä¸€ä¸ªå­ç›’å­çš„åŒä¸€è¡Œå†…ã€‚12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849&lt;!DOCTYPE html&gt;&lt;html lang="en"&gt;&lt;head&gt; &lt;meta charset="UTF-8"&gt; &lt;title&gt;æ¸…é™¤æµ®åŠ¨çš„æ–¹å¼ä¸€&lt;/title&gt; &lt;style type="text/css"&gt; /*æ¸…é™¤é»˜è®¤è¾¹è·*/ body,div,dl,dt,dd,ul,ol,li,h1,h2,h3,h4,h5,h6,pre,code,form,fieldset,legend,input,textarea,p,blockquote,th,td&#123;margin: 0; padding: 0; &#125; .fbox1&#123; background-color: pink; &#125; .fbox1 div&#123; width: 100px; height: 100px; border: solid; box-sizing: border-box; background-color: skyblue; float: left; &#125; .fbox2&#123; background-color: green; &#125; .fbox2 div&#123; width: 100px; height: 100px; border: solid; box-sizing: border-box; /*é˜²æ­¢å¢žåŠ ç›’å­è¾¹æ¡†å®½åº¦æˆ–è€…å†…è¾¹è·åŽä½¿å…ƒç´ å®½é«˜å˜åŒ–ã€‚*/ background-color: yellow; float: left; &#125; &lt;/style&gt;&lt;/head&gt;&lt;body&gt; &lt;div class="fbox1"&gt; &lt;div class="fbox1_sbox1"&gt;fbox1_sbox1&lt;/div&gt; &lt;div class="fbox1_sbox2"&gt;fbox1_sbox2&lt;/div&gt; &lt;div class="fbox1_sbox3"&gt;fbox1_sbox3&lt;/div&gt; &lt;/div&gt; &lt;div class="fbox2"&gt; &lt;div class="fbox2_sbox1"&gt;fbox2_sbox1&lt;/div&gt; &lt;div class="fbox2_sbox2"&gt;fbox2_sbox2&lt;/div&gt; &lt;div class="fbox2_sbox3"&gt;fbox2_sbox3&lt;/div&gt; &lt;/div&gt;&lt;/body&gt;&lt;/html&gt;è§£å†³æ–¹æ³•ä¸€ï¼šè®¾ç½®å‰ä¸€ä¸ªçˆ¶ç›’å­é«˜åº¦çš„æ–¹æ³•æ¸…é™¤æµ®åŠ¨ç¬¬ä¸€ä¸ªçˆ¶ç›’å­fbox1è®¾ç½®é«˜åº¦ä¸ºå…¶æœ€é«˜å­ç›’å­çš„é«˜åº¦ã€‚ç¼ºç‚¹ï¼šä½†æ˜¯ä¼ä¸šå¼€å‘ä¸­èƒ½ä¸å†™é«˜åº¦å°±ä¸å†™ï¼Œæ‰€ä»¥æ­¤æ–¹å¼å¾ˆå°‘ä½¿ç”¨ï¼Œä¸æŽ¨èã€‚ä¾‹å­ä¸­æ·»åŠ å¦‚ä¸‹æ ·å¼ï¼š123.fbox1&#123; height: 100px;&#125;è§£å†³æ–¹æ³•äºŒï¼šclear æ–¹æ³•æ¸…é™¤æµ®åŠ¨clear å±žæ€§å®šä¹‰äº†å…ƒç´ çš„å·¦è¾¹æˆ–è€…å³è¾¹ä¸Šä¸å…è®¸å‡ºçŽ°æµ®åŠ¨çš„å­å…ƒç´ ã€‚å¦‚æžœç»™æµ®åŠ¨å…ƒç´ çš„çˆ¶ç›’å­å£°æ˜Žå·¦è¾¹æˆ–å³è¾¹æ¸…é™¤ï¼Œé‚£ä¹ˆå®ƒé‡Œé¢çš„æµ®åŠ¨å…ƒç´ å°±åªä¼šåœ¨è¯¥çˆ¶ç›’å­ä¸­æµ®åŠ¨ï¼Œå¹¶ä¸”è¯¥çˆ¶ç›’å­å‰é¢çš„å…¶ä»–ç›’å­çš„å†…å®¹ï¼ˆå³ä½¿æ˜¯æµ®åŠ¨å­å…ƒç´ ï¼‰æŒ¡ä½å‘ä¸Šç§»åŠ¨ã€‚å³æœ¬ä¾‹å­ä¸­fbox2çš„é«˜åº¦è™½ç„¶ä¹Ÿä¸º0ï¼Œä½†æ˜¯æ˜¯ä»Žbox1çš„ä¸‹è¾¹æ¡†å¼€å§‹ç®—çš„ã€‚å¯èƒ½çš„å€¼å€¼æè¿°leftåœ¨å·¦ä¾§ä¸å…è®¸æµ®åŠ¨å…ƒç´ ã€‚rightåœ¨å³ä¾§ä¸å…è®¸æµ®åŠ¨å…ƒç´ ã€‚bothåœ¨å·¦å³ä¸¤ä¾§å‡ä¸å…è®¸æµ®åŠ¨å…ƒç´ ã€‚noneé»˜è®¤å€¼ã€‚å…è®¸æµ®åŠ¨å…ƒç´ å‡ºçŽ°åœ¨ä¸¤ä¾§ã€‚inheritè§„å®šåº”è¯¥ä»Žçˆ¶å…ƒç´ ç»§æ‰¿ clear å±žæ€§çš„å€¼ã€‚ä¾‹å­ä¸­æ·»åŠ å¦‚ä¸‹æ ·å¼ï¼š123.fbox2&#123; clear: both;&#125;ç¼ºç‚¹ï¼šæ¸…é™¤æµ®åŠ¨çš„å…ƒç´ ä¸èƒ½è®¾ç½®marginï¼Œæ¯”å¦‚box2è®¾ç½®äº†clear: both;ï¼ŒäºŽæ˜¯box2çš„marginå°±å¤±æ•ˆäº†ã€‚]]></content>
      <categories>
        <category>front</category>
      </categories>
      <tags>
        <tag>html</tag>
        <tag>css</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ç›’å­åµŒå¥—å±…ä¸­]]></title>
    <url>%2Ffront%2Fbox_nest_center.html</url>
    <content type="text"><![CDATA[Â¶ä¸€ã€çˆ¶ç›’å­ä¸ºç»å¯¹é«˜åº¦å€¼æ—¶å­ç›’å­çš„å±…ä¸­é—®é¢˜éœ€æ±‚ï¼šåœ¨ä¸€ä¸ªé•¿å®½ä¸º400pxçš„å¤§ç›’å­é‡Œæ”¾å…¥é•¿å®½ä¸º200pxçš„å°ç›’å­ï¼Œè®©å°ç›’å­ç›¸å¯¹å¤§ç›’å­æ°´å¹³å±…ä¸­å’Œåž‚ç›´å±…ä¸­ ã€‚Â¶1. çˆ¶ç›’å­å’Œå­ç›’å­çš„é«˜åº¦éƒ½ä¸ºç»å¯¹å€¼æ—¶Â¶ï¼ˆ1ï¼‰è®¾ç½®çˆ¶ç›’å­paddingåœ¨çˆ¶ç›’å­ä¸­è®¾ç½®ä¸Šå†…è¾¹è·å’Œå·¦å†…è¾¹è·å®žçŽ°å­ç›’å­æ°´å¹³åž‚ç›´å±…ä¸­ã€‚çˆ¶ç›’å­å¢žåŠ å†…è¾¹è·ä¼šå¯¼è‡´çˆ¶ç›’å­å®½é«˜å˜å¤§ï¼Œè¦å®žçŽ°å±…ä¸­æ•ˆæžœè¦è¿˜åŽŸçˆ¶ç›’å­çš„å®½é«˜ï¼Œæœ‰ä»¥ä¸‹ä¸¤ç§æ–¹å¼è§£å†³ï¼šæ–¹å¼ä¸€ã€ä½¿ç”¨paddingå’Œå¤§ç›’å­æ¶ˆåŽ»æ³•ã€‚ï¼ˆ1ï¼‰çˆ¶ç›’å­å†…å®¹çš„å®½é«˜ï¼ˆå³width/heightï¼‰è¦å‡åŽ»å¢žåŠ çš„å†…è¾¹è·ã€‚ï¼ˆ2ï¼‰è®¾ç½®çˆ¶ç›’å­ padding-topå’Œ padding-leftã€‚å³padding-top: (çˆ¶ç›’å­é«˜åº¦-å­ç›’å­é«˜åº¦)/2;å’Œpadding-left: (çˆ¶ç›’å­å®½åº¦-å­ç›’å­å®½åº¦)/2ã€‚1234567891011121314151617181920212223242526272829303132333435&lt;!DOCTYPE html&gt;&lt;html lang="en"&gt;&lt;head&gt; &lt;meta charset="UTF-8"&gt; &lt;title&gt;Document&lt;/title&gt; &lt;style type="text/css"&gt; .div1&#123; width: 400px; height:400px; background-color: pink; &#125; .div2&#123; width: 200px; height:200px; background-color: red; &#125; /*è§£å†³æ–¹æ³•ï¼š*/ .div1&#123;/*ç”±äºŽå¢žåŠ äº†å†…è¾¹è·ä½¿å¾—div1ç›’å­çš„é•¿å®½ä¹Ÿå¢žåŠ äº†ã€‚æ‰€ä»¥è¦åœ¨åŽŸæ¥div1é•¿å®½è¦å‡åŽ»å†…è¾¹è·çš„å¤§å°*/ width: 300px; height:300px; &#125; .div1&#123;/*åœ¨çˆ¶ç›’å­ä¸­è®¾ç½®ä¸Šå†…è¾¹è·å’Œå·¦å†…è¾¹è·å®žçŽ°å­ç›’å­æ°´å¹³åž‚ç›´å±…ä¸­*/ padding-top: 100px; /*(400px-200px)/2=100px*/ padding-left: 100px;/*(400px-200px)/2=100px*/ &#125; &lt;/style&gt;&lt;/head&gt;&lt;body&gt; &lt;div class="div1"&gt; &lt;div class="div2"&gt;&lt;/div&gt; &lt;/div&gt; &lt;/body&gt;&lt;/html&gt;æ–¹å¼äºŒã€çˆ¶ç›’å­ä½¿ç”¨paddingå’Œbox-sizing: border-box;â‘ çˆ¶ç›’å­å¢žåŠ box-sizing: border-box; æ ·å¼è‡ªåŠ¨å®Œæˆå†…å®¹å®½é«˜çš„æ¶ˆå‡ï¼Œå…åŽ»è®¡ç®—æ­¥éª¤ï¼ŒåŽŸç†å’Œâ€œçˆ¶ç›’å­å†…å®¹çš„å®½é«˜ï¼ˆå³width/heightï¼‰è¦å‡åŽ»å¢žåŠ çš„å†…è¾¹è·â€ä¸€æ ·ã€‚â‘¡è®¾ç½®çˆ¶ç›’å­ padding-topå’Œ padding-leftã€‚å³padding-top: (çˆ¶ç›’å­é«˜åº¦-å­ç›’å­é«˜åº¦)/2;å’Œpadding-left: (çˆ¶ç›’å­å®½åº¦-å­ç›’å­å®½åº¦)/2ã€‚123456789101112131415161718192021222324252627282930313233&lt;!DOCTYPE html&gt;&lt;html lang="en"&gt;&lt;head&gt; &lt;meta charset="UTF-8"&gt; &lt;title&gt;Document&lt;/title&gt; &lt;style type="text/css"&gt; .div1&#123; width: 400px; height:400px; background-color: pink; &#125; .div2&#123; width: 200px; height:200px; background-color: red; &#125; /*è§£å†³æ–¹æ³•ï¼š*/ .div1&#123;/*ä¸ºå…ƒç´ æŒ‡å®šçš„ä»»ä½•å†…è¾¹è·å’Œè¾¹æ¡†éƒ½å°†åœ¨å·²è®¾å®šçš„å®½åº¦å’Œé«˜åº¦å†…è¿›è¡Œç»˜åˆ¶,é˜²æ­¢çˆ¶ç›’å­æ·»åŠ å†…è¾¹è·ï¼Œå¯¼è‡´çˆ¶ç›’å­å®½é«˜å˜å¤§*/ box-sizing: border-box; &#125; .div1&#123;/*åœ¨çˆ¶ç›’å­ä¸­è®¾ç½®ä¸Šå†…è¾¹è·å’Œå·¦å†…è¾¹è·å®žçŽ°å­ç›’å­æ°´å¹³åž‚ç›´å±…ä¸­*/ padding-top: 100px; /*(400px-200px)/2=100px*/ padding-left: 100px; /*(400px-200px)/2=100px*/ &#125; &lt;/style&gt;&lt;/head&gt;&lt;body&gt; &lt;div class="div1"&gt; &lt;div class="div2"&gt;&lt;/div&gt; &lt;/div&gt;&lt;/body&gt;&lt;/html&gt;Â¶ï¼ˆ2ï¼‰è®¾ç½®å­ç›’å­marginï¼ˆ1ï¼‰æ–¹å¼ä¸€ã€ä½¿ç”¨marginå¹¶è®¾ç½®çˆ¶ç›’å­è¾¹æ¡†å±žæ€§â‘ å¦‚æžœä¸¤ä¸ªç›’å­å­˜åœ¨åµŒå¥—å…³ç³»ï¼Œé‚£ä¹ˆè®¾ç½®äº†é‡Œé¢ä¸€ä¸ªç›’å­çš„é¡¶éƒ¨çš„å¤–è¾¹è·ï¼Œå¤–é¢ä¸€ä¸ªç›’å­ä¹Ÿä¼šè¢«é¡¶ä¸‹æ¥ã€‚å¦‚æžœä¸æƒ³è¢«é¡¶ä¸‹æ¥å¯ä»¥ç»™å¤–é¢çš„ç›’å­æ·»åŠ ä¸€ä¸ªè¾¹æ¡†å±žæ€§ã€‚â‘¡è®¾ç½®å­ç›’å­margin-leftå’Œmargin-topã€‚å³margin-left: (çˆ¶ç›’å­å®½åº¦-å­ç›’å­å®½åº¦)/2ã€‚å’Œmargin-top: (çˆ¶ç›’å­é«˜åº¦-å­ç›’å­é«˜åº¦)/212345678910111213141516171819202122232425262728&lt;!DOCTYPE html&gt;&lt;html lang="en"&gt;&lt;head&gt; &lt;meta charset="UTF-8"&gt; &lt;title&gt;Document&lt;/title&gt; &lt;style type="text/css"&gt; .div1&#123; width: 400px; height:400px; background-color: pink; border: solid; /*æ·»åŠ ä¸€ä¸ªè¾¹æ¡†å±žæ€§ã€‚*/ &#125; .div2&#123; width: 200px; height:200px; background-color: red; margin-left: 100px; margin-top: 100px; &#125; &lt;/style&gt;&lt;/head&gt;&lt;body&gt; &lt;div class="div1"&gt; &lt;div class="div2"&gt;&lt;/div&gt; &lt;/div&gt; &lt;/body&gt;&lt;/html&gt;ï¼ˆ2ï¼‰æ–¹å¼äºŒã€ä½¿ç”¨margin: (çˆ¶ç›’å­é«˜åº¦-å­ç›’å­é«˜åº¦)/2 auto;å¹¶è®¾ç½®çˆ¶ç›’å­è¾¹æ¡†å±žæ€§â‘ å¦‚æžœä¸¤ä¸ªç›’å­å­˜åœ¨åµŒå¥—å…³ç³»ï¼Œåœ¨è®¾ç½®äº†é‡Œé¢ä¸€ä¸ªç›’å­çš„é¡¶éƒ¨çš„å¤–è¾¹è·åŽï¼Œå¤–é¢ä¸€ä¸ªç›’å­ä¹Ÿä¼šè¢«é¡¶ä¸‹æ¥ã€‚è¿™å°±æ˜¯æ‰€è°“çš„â€œå¡Œé™·â€çš„çŽ°è±¡ã€‚å¦‚æžœä¸æƒ³è¢«é¡¶ä¸‹æ¥å¯ä»¥ç»™å¤–é¢çš„ç›’å­æ·»åŠ ä¸€ä¸ªè¾¹æ¡†å±žæ€§ã€‚â‘¡è®¾ç½®å­ç›’å­å¤–è¾¹è·å®½åº¦è‡ªé€‚åº”ï¼Œmarginé«˜åº¦ç­‰äºŽ(çˆ¶ç›’å­é«˜åº¦-å­ç›’å­é«˜åº¦)/2ã€‚å³margin: (çˆ¶ç›’å­é«˜åº¦-å­ç›’å­é«˜åº¦)/2 auto;ã€‚1234567891011121314151617181920212223242526&lt;!DOCTYPE html&gt;&lt;html lang="en"&gt;&lt;head&gt; &lt;meta charset="UTF-8"&gt; &lt;title&gt;Document&lt;/title&gt; &lt;style type="text/css"&gt; .div1&#123; width: 400px; height:400px; background-color: pink; border: solid; /*æ·»åŠ ä¸€ä¸ªè¾¹æ¡†å±žæ€§ã€‚*/ &#125; .div2&#123; width: 200px; height:200px; background-color: red; margin: 100px auto; &lt;/style&gt;&lt;/head&gt;&lt;body&gt; &lt;div class="div1"&gt; &lt;div class="div2"&gt;&lt;/div&gt; &lt;/div&gt; &lt;/body&gt;&lt;/html&gt;åœ¨åµŒå¥—å…³ç³»çš„ç›’å­ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨margin: 0 auto;çš„æ–¹å¼æ¥è®©é‡Œé¢çš„ç›’å­ç›¸å¯¹äºŽå¤–é¢çš„ç›’å­æ°´å¹³å±…ä¸­ã€‚åœ¨æœ¬ä¾‹ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨margin: 100px auto;è®¾ç½®ä¸Šä¸‹é•¿åº¦æ¥æŽ§åˆ¶åž‚ç›´å±…ä¸­ã€‚å®žé™…å¼€å‘æ—¶ï¼Œå½“å­˜åœ¨ç›’å­åµŒå¥—å…³ç³»ï¼ˆçˆ¶å­å…³ç³»ï¼‰æ—¶ï¼Œé¦–å…ˆè€ƒè™‘ä½¿ç”¨paddingï¼Œå…¶æ¬¡æ‰è€ƒè™‘ä½¿ç”¨marginã€‚marginä¸»è¦ç”¨äºŽæŽ§åˆ¶å…„å¼Ÿä¹‹é—´çš„é—´éš™ã€‚Â¶2. çˆ¶ç›’å­ä¸ºç»å¯¹é«˜åº¦å€¼ï¼Œå­ç›’å­ä¸ºç™¾åˆ†æ¯”æ—¶çš„å­ç›’å­å±…ä¸­é—®é¢˜12345678910111213141516171819202122232425262728293031&lt;!DOCTYPE html&gt;&lt;html lang="en"&gt;&lt;head&gt;&lt;meta charset="UTF-8"&gt;&lt;title&gt;Document&lt;/title&gt;&lt;style type="text/css"&gt;/* html,body&#123; margin:0px; height:100%; &#125;*/ .fbox&#123; height: 500px; width: 500px; background-color: pink; border: solid; box-sizing: border-box; &#125; .sbox&#123; height: 50%; width: 50%; margin: 125px 125px; background-color: green; &#125;&lt;/style&gt;&lt;/head&gt;&lt;body&gt; &lt;div class="fbox"&gt; &lt;div class="sbox"&gt;I am div !&lt;/div&gt; &lt;/div&gt;&lt;/body&gt;&lt;/html&gt;Â¶äºŒã€çˆ¶ç›’å­ä¸ºç™¾åˆ†æ¯”é«˜åº¦å€¼æ—¶å­ç›’å­çš„å±…ä¸­é—®é¢˜Â¶1. çˆ¶ç›’å­å’Œå­ç›’å­éƒ½æ˜¯ç™¾åˆ†æ¯”è®¾ç½®é«˜åº¦æ—¶12345678910111213141516171819202122232425262728293031323334353637383940414243&lt;!DOCTYPE html&gt;&lt;html lang="en"&gt;&lt;head&gt; &lt;meta charset="UTF-8"&gt; &lt;title&gt;Document&lt;/title&gt; &lt;style type="text/css"&gt; html,body&#123; margin: 0px; padding: 0px; height: 100%; &#125; body&#123; background-color: pink; border: solid; box-sizing: border-box; &#125; .div1&#123; width: 50%; height:50%; position: absolute; left: 25%; top: 25%; background-color: green; box-sizing: border-box; &#125; .div2&#123; width: 50%; height:50%; position: absolute; left: 25%; top: 25%; background-color: red; &#125; &lt;/style&gt;&lt;/head&gt;&lt;body&gt; &lt;div class="div1"&gt; &lt;div class="div2"&gt;&lt;/div&gt; &lt;/div&gt; &lt;/body&gt;&lt;/html&gt;Â¶2. çˆ¶ç›’å­é«˜åº¦ä¸ºç™¾åˆ†æ¯”ï¼Œå­ç›’å­é«˜åº¦ä¸ºå…·ä½“ç»å¯¹å€¼æ—¶123456789101112131415161718192021222324252627282930 &lt;!DOCTYPE html&gt;&lt;html lang="en"&gt;&lt;head&gt;&lt;meta charset="UTF-8"&gt;&lt;title&gt;Document&lt;/title&gt;&lt;style type="text/css"&gt; html,body&#123; margin:0px; height:100%; &#125; .fbox&#123; height: 100%; background-color: pink; display:flex; align-items:center; /*åž‚ç›´å±…ä¸­*/ justify-content:center; /*æ°´å¹³å±…ä¸­*/ &#125; .sbox&#123; height: 100px; width: 100px; background-color: green; &#125;&lt;/style&gt;&lt;/head&gt;&lt;body&gt; &lt;div class="fbox"&gt; &lt;div class="sbox"&gt;I am div !&lt;/div&gt; &lt;/div&gt;&lt;/body&gt;&lt;/html&gt;123456789101112131415161718192021222324252627 &lt;!DOCTYPE html&gt;&lt;html lang="en"&gt;&lt;head&gt;&lt;meta charset="UTF-8"&gt;&lt;title&gt;Document&lt;/title&gt;&lt;style type="text/css"&gt; html,body&#123; margin:0px; height:100%; display:flex; align-items:center; /*åž‚ç›´å±…ä¸­*/ justify-content:center; /*æ°´å¹³å±…ä¸­*/ background-color: gray; &#125; .fbox&#123; height: 100px; width: 100px; background-color: pink; &#125;&lt;/style&gt;&lt;/head&gt;&lt;body&gt; &lt;div class="fbox"&gt; &lt;/div&gt;&lt;/body&gt;&lt;/html&gt;]]></content>
      <categories>
        <category>front</category>
      </categories>
      <tags>
        <tag>html</tag>
        <tag>css</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ç›’å­åµŒå¥—å…³ç³»ä¸­çš„å¡Œé™·çŽ°è±¡]]></title>
    <url>%2Ffront%2Fbox_collapse.html</url>
    <content type="text"><![CDATA[å½“ä¸¤ä¸ªç›’å­åœ¨åž‚ç›´æ–¹å‘ä¸Šè®¾ç½®marginå€¼æ—¶ï¼Œä¼šå‡ºçŽ°ä¸€ä¸ªæœ‰è¶£çš„å¡Œé™·çŽ°è±¡ã€‚ï¼ˆ1ï¼‰ä¸ºçˆ¶ç›’å­è®¾ç½®borderï¼Œä¸ºå¤–å±‚æ·»åŠ borderåŽçˆ¶å­ç›’å­å°±ä¸æ˜¯çœŸæ­£æ„ä¹‰ä¸Šçš„è´´åˆã€‚ï¼ˆ2ï¼‰ä¸ºçˆ¶ç›’å­æ·»åŠ overflow: hidden;ï¼ˆ3ï¼‰ä¸ºçˆ¶ç›’å­è®¾å®špaddingå€¼ã€‚12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576777879808182838485868788&lt;!DOCTYPE html&gt;&lt;html lang="en"&gt;&lt;head&gt; &lt;meta charset="UTF-8"&gt; &lt;title&gt;Document&lt;/title&gt; &lt;style type="text/css"&gt; *&#123; margin: 0px; padding: 0px; &#125; div &#123; box-sizing: border-box; /*é˜²æ­¢å¢žåŠ å†…è¾¹è·å’Œborderä¼šæ”¹å˜ç›’å­çš„å®½é«˜*/ &#125; /*ä¸è§£å†³å¡Œé™·çŽ°è±¡,fbox1å‡ºçŽ°å¡Œé™·çŽ°è±¡*/ .fbox1&#123; width: 200px; height:200px; background-color: green; &#125; .sbox1&#123; width: 100px; height:100px; background-color: red; margin-top: 100px; &#125; /*è§£å†³å¡Œé™·çŽ°è±¡æ–¹æ³•ä¸€*/ .fbox2&#123; width: 200px; height:200px; background-color: pink; /*æ·»åŠ ä¸€ä¸ªè¾¹æ¡†å±žæ€§ã€‚è§£å†³å¡Œé™·çŽ°è±¡*/ border: solid; &#125; .sbox2&#123; width: 100px; height:100px; background-color: red; margin-top: 100px; &#125; /*è§£å†³å¡Œé™·çŽ°è±¡æ–¹æ³•äºŒ*/ .fbox3&#123; width: 200px; height:200px; background-color: skyblue; /*æ·»åŠ overflow: hidden;ã€‚è§£å†³å¡Œé™·çŽ°è±¡*/ overflow: hidden; &#125; .sbox3&#123; width: 100px; height:100px; background-color: red; margin-top: 100px; &#125; /*è§£å†³å¡Œé™·çŽ°è±¡æ–¹æ³•ä¸‰*/ .fbox4&#123; width: 200px; height:200px; background-color: gray; /*ä¸ºçˆ¶ç›’å­è®¾å®špaddingå€¼ã€‚è§£å†³å¡Œé™·çŽ°è±¡*/ padding: 1px; &#125; .sbox4&#123; width: 100px; height:100px; background-color: red; margin-top: 100px; &#125; &lt;/style&gt;&lt;/head&gt;&lt;body&gt; &lt;div class="fbox1"&gt; &lt;div class="sbox1"&gt;&lt;/div&gt; &lt;/div&gt; &lt;div class="fbox2"&gt; &lt;div class="sbox2"&gt;&lt;/div&gt; &lt;/div&gt; &lt;div class="fbox3"&gt; &lt;div class="sbox3"&gt;&lt;/div&gt; &lt;/div&gt; &lt;div class="fbox4"&gt; &lt;div class="sbox4"&gt;&lt;/div&gt; &lt;/div&gt;&lt;/body&gt;&lt;/html&gt;]]></content>
      <categories>
        <category>front</category>
      </categories>
      <tags>
        <tag>html</tag>
        <tag>css</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[centos7çŽ¯å¢ƒä¸‹ä½¿ç”¨yumæ­å»ºlampçŽ¯å¢ƒï¼ˆç¼–è¯‘å®‰è£…ç‰ˆï¼‰]]></title>
    <url>%2Fdevops%2Flamp2.html</url>
    <content type="text"><![CDATA[Â¶å®‰è£…çš„é¡ºåºï¼š1Apache --&gt; Mysqlï¼ˆMariaDBï¼‰ --&gt; PHPÂ¶1.é…ç½®SELinuxï¼Œé˜²ç«å¢™12345678910ç¦ç”¨SELinuxï¼Œå¦åˆ™å¯èƒ½é€ æˆç¼–è¯‘å¤±è´¥æˆ–è€…å‡ºçŽ°å…¶ä»–æ„æ–™ä¸åˆ°çš„é—®é¢˜# vim /etc/selinux/config SELINUX=disabled# setenforce 0é…ç½®é˜²ç«å¢™æ”¾è¡Œhttpå’Œhttps# firewall-cmd --permanent --zone=public --add-service=http# firewall-cmd --permanent --zone=public --add-service=https# firewall-cmd --reloadÂ¶2.é…ç½®aliyun Yumæº12# wget -O /etc/yum.repos.d/CentOS-Base.repo http://mirrors.aliyun.com/repo/Centos-7.repo# yum makecacheÂ¶3.å®‰è£…å¼€å‘å·¥å…·ç»„å’Œä¾èµ–åŒ…12# yum -y groupinstall "development tools" # yum -y install gcc gcc-c++ zlib-devel pcre pcre-devel openssl openssl-devel expat-develÂ¶4.ç¼–è¯‘å®‰è£…apr-1.4å’Œapr-1.5æœ€æ–°ç‰ˆçš„httpd2.4éœ€è¦ä¾èµ–apr-1.4ä»¥ä¸Šç‰ˆæœ¬å’Œapr-1.5ä»¥ä¸Šç‰ˆæœ¬12345678910111213# wget http://archive.apache.org/dist/apr/apr-1.6.3.tar.gz# tar vxf apr-1.6.3.tar.gz# cd apr-1.6.3# ./configure --prefix=/usr/local/apr# make# make install# wget http://mirrors.shu.edu.cn/apache//apr/apr-util-1.6.1.tar.gz #æˆ–è€…ä¸‹è½½ï¼š wget http://archive.apache.org/dist/apr/apr-util-1.6.1.tar.gz# tar vxf apr-util-1.6.1.tar.gz# cd apr-util-1.6.1# ./configure --prefix=/usr/local/apr-util --with-apr=/usr/local/apr# make# make installÂ¶5.ç¼–è¯‘å®‰è£…httpd2.4.3312345678910111213141516171819202122232425# wget http://mirror.bit.edu.cn/apache//httpd/httpd-2.4.33.tar.bz2# tar vxf httpd-2.4.33.tar.bz2ç¼–è¯‘httpdä¹‹å‰æŠŠä¸Šä¸€æ­¥è§£åŽ‹å‡ºæ¥çš„aprå’Œapr-utilæ–‡ä»¶å¤åˆ¶åˆ°httpd-2.4.33/srclib/æ–‡ä»¶å¤¹ä¸‹ï¼Œå†è¿›è¡Œhttpdç¼–è¯‘# mv apr-1.6.3 httpd-2.4.33/srclib/apr# mv apr-util-1.6.1 httpd-2.4.33/srclib/apr-util# cd httpd-2.4.33# ./configure --prefix=/usr/local/apache --enable-so --enable-ssl --enable-cgi --enable-rewrite --with-zlib --with-pcre --with-included-apr --enable-modules=most --enable-mpms-shared=all --with-mpm=prefork# make# make installé…ç½®ä»¥æ”¯æŒchkconfigæŽ§åˆ¶# cp /usr/local/apache/bin/apachectl /etc/rc.d/init.d/httpd# vim /etc/rc.d/init.d/httpd åœ¨ç¬¬äºŒè¡ŒåŠ å…¥å¦‚ä¸‹ä¸‰è¡Œï¼ˆå‰é¢çš„#å·ä¸èƒ½çœç•¥ï¼‰ # Comments to support chkconfig on RedHat Linux # chkconfig: 35 85 15 # description: Apache is a World Wide Web server.# chkconfig --add httpd# chkconfig httpd on# systemctl restart httpd# vim /etc/profile.d/httpd.sh export PATH=$PATH:/usr/local/apache/bin# source /etc/profile.d/httpd.shåœ¨å¯åŠ¨ä¹‹å‰ï¼Œéœ€è¦æŸ¥çœ‹/usr/local/apache/conf/httpd.confä¸­çš„ServerNameæœ‰æ²¡æœ‰é…ç½®ï¼Œå¦‚æžœæ²¡æœ‰ï¼Œåˆ™éœ€è¦é…ç½®ï¼Œå¦‚æˆ‘çš„è™šæ‹Ÿæœºæ˜¯192.168.100.254ï¼Œé‚£ServerNameä¸º192.168.100.254:80ã€‚å¯é€‰æ“ä½œ1234567# groupadd -r apache # useradd -r -g apache apache# vim /usr/local/apache/conf/httpd.conf#User daemon#Group daemonUser apacheGroup apacheæ‰“å¼€ http://192.168.10.10/ å¯ä»¥çœ‹åˆ°httpdå·²ç»å·¥ä½œÂ¶6. ç¼–è¯‘å®‰è£…MariaDB10.2.6Â¶ï¼ˆ1ï¼‰ åˆ é™¤CentOS7.3é»˜è®¤æ•°æ®åº“é…ç½®æ–‡ä»¶æŸ¥çœ‹é»˜è®¤æ•°æ®åº“é…ç½®æ–‡ä»¶123456[root@localhost ~]# find -H /etc/ | grep my.c/etc/pki/tls/certs/make-dummy-cert/etc/pki/tls/certs/renew-dummy-cert/etc/my.cnf.d/etc/my.cnf.d/mysql-clients.cnf/etc/my.cnfåˆ é™¤é»˜è®¤æ•°æ®åº“é…ç½®æ–‡ä»¶1[root@localhost ~]# rm -rf /etc/my.cnf /etc/my.cnf.d/å†æ¬¡æŸ¥çœ‹é»˜è®¤æ•°æ®åº“é…ç½®æ–‡ä»¶123[root@localhost ~]# find -H /etc/ | grep my.c/etc/pki/tls/certs/make-dummy-cert/etc/pki/tls/certs/renew-dummy-certåˆ°ç›®å‰ä¸ºæ­¢, ç³»ç»Ÿæœ€å°åŒ–å®‰è£…è‡ªå¸¦çš„æ•°æ®åº“é…ç½®æ–‡ä»¶å·²ç»åˆ é™¤å¹²å‡€äº†!Â¶ï¼ˆ2ï¼‰å¸è½½ç³»ç»Ÿè‡ªå¸¦mariadb-libsæŸ¥è¯¢12[root@localhost ~]# rpm -qa|grep mariadb-libsmariadb-libs-5.5.52-1.el7.x86_64å¸è½½1[root@localhost ~]# rpm -e mariadb-libs-5.5.52-1.el7.x86_64 --nodepsÂ¶ï¼ˆ4ï¼‰å®‰è£…ç›¸å…³åŒ…12345678910111213[root@localhost ~]# yum -y install libaio libaio-devel [root@localhost ~]# yum -y install bison bison-devel [root@localhost ~]# yum -y install zlib-devel [root@localhost ~]# yum -y install openssl openssl-devel [root@localhost ~]# yum -y install ncurses ncurses-devel[root@localhost ~]# yum -y install libcurl-devel libarchive-devel [root@localhost ~]# yum -y install boost boost-devel [root@localhost ~]# yum -y install lsof [root@localhost ~]# yum -y install wget[root@localhost ~]# yum -y install gcc gcc-c++ make cmake[root@localhost ~]# yum -y install perl[root@localhost ~]# yum -y install kernel-headers kernel-devel[root@localhost ~]# yum -y install pcre-develÂ¶ï¼ˆ5ï¼‰ åˆ›å»ºå®¶ç›®å½•å­˜æ”¾è½¯ä»¶åŒ…ç›®å½•12[root@localhost ~]# mkdir soft[root@localhost ~]# cd softÂ¶ï¼ˆ6ï¼‰MariaDBå®˜ç½‘å¤åˆ¶æºç åŒ…é“¾æŽ¥åœ°å€å¹¶ä¸‹è½½è§£åŽ‹ä¸‹è½½ï¼ˆhttps://downloads.mariadb.org/mariadb/10.2.6/ï¼‰1[root@localhost soft]# wget http://112.5.240.21:81/1Q2W3E4R5T6Y7U8I9O0P1Z2X3C4V5B/ftp.hosteurope.de/mirror/archive.mariadb.org//mariadb-10.2.6/source/mariadb-10.2.6.tar.gzè§£åŽ‹1[root@localhost soft]# tar -zxvf mariadb-10.2.6.tar.gzÂ¶ï¼ˆ7ï¼‰åˆ›å»ºMariaDBå®‰è£…ç›®å½•ã€æ•°æ®åº“å­˜æ”¾ç›®å½•ã€å»ºç«‹ç”¨æˆ·å’Œç›®å½•è¿™é‡Œæå‰é¢„å®šMariaDBçš„å®‰è£…ç›®å½•ä¸º/usr/local/mysqlå¹¶ä¸”æ•°æ®åº“ç›®å½•ä¸º/data/mysqlï¼Œè¿™é‡Œè¦å»ºç«‹ç³»ç»Ÿç”¨æˆ·åŠç»„å’Œæ•°æ®åº“å­˜æ”¾ç›®å½•ï¼Œå¹¶ä¸”å°†æ•°æ®åº“å­˜æ”¾ç›®å½•èµ‹äºˆmysqlç”¨æˆ·åŠç»„æƒé™ï¼Œæ“ä½œå¦‚ä¸‹:è¯·æ³¨æ„ç‰¹åˆ«è¯´æ˜Žä¸€ä¸‹ï¼šè¿™é‡Œè¯´çš„æ•°æ®åº“ç›®å½•æ˜¯æŒ‡çš„å…·ä½“æ•°æ®åº“å­˜å‚¨æ–‡ä»¶, è€Œä¸æ˜¯å®‰è£…æ–‡ä»¶!åˆ›å»ºmysqlç³»ç»Ÿç”¨æˆ·ç»„1[root@localhost soft]# groupadd -r mysqlåˆ›å»ºç³»ç»Ÿç”¨æˆ·mysqlå¹¶åŠ å…¥åˆ°mysqlç³»ç»Ÿç”¨æˆ·ç»„1[root@localhost soft]# useradd -r -g mysql -s /sbin/nologin -d /usr/local/mysql -M mysqlä»¥ä¸‹æ˜¯ä¸Šé¢åˆ›å»ºç³»ç»Ÿç”¨æˆ·mysqlçš„å„ä¸ªå‚æ•°è¯´æ˜Žï¼š-r: æ·»åŠ ç³»ç»Ÿç”¨æˆ·( è¿™é‡ŒæŒ‡å°†è¦è¢«åˆ›å»ºçš„ç³»ç»Ÿç”¨æˆ·mysql )-g: æŒ‡å®šè¦åˆ›å»ºçš„ç”¨æˆ·æ‰€å±žç»„( è¿™é‡ŒæŒ‡æ·»åŠ åˆ°æ–°ç³»ç»Ÿç”¨æˆ·mysqlåˆ°mysqlç³»ç»Ÿç”¨æˆ·ç»„ )-s: æ–°ç³»ç»Ÿå¸æˆ·çš„ç™»å½•shell( /sbin/nologin è¿™é‡Œè®¾ç½®ä¸ºå°†è¦è¢«åˆ›å»ºç³»ç»Ÿç”¨æˆ·mysqlä¸èƒ½ç”¨æ¥ç™»å½•ç³»ç»Ÿ )-d: æ–°å¸æˆ·çš„ä¸»ç›®å½•( è¿™é‡ŒæŒ‡å®šå°†è¦è¢«åˆ›å»ºçš„ç³»ç»Ÿç”¨æˆ·mysqlçš„å®¶ç›®å½•ä¸º /usr/local/mysql )-M: ä¸è¦åˆ›å»ºç”¨æˆ·çš„ä¸»ç›®å½•( ä¹Ÿå°±æ˜¯è¯´å°†è¦è¢«åˆ›å»ºçš„ç³»ç»Ÿç”¨æˆ·mysqlä¸ä¼šåœ¨ /home ç›®å½•ä¸‹åˆ›å»º mysql å®¶ç›®å½• )åˆ›å»ºmariaå®‰è£…ç›®å½•1[root@localhost soft]# mkdir -p /usr/local/mysqlåˆ›å»ºæ•°æ®åº“å­˜æ”¾ç›®å½•1[root@localhost soft]# mkdir -p /data/mysqlæ”¹å˜æ•°æ®åº“å­˜æ”¾ç›®å½•æ‰€å±žç”¨æˆ·åŠç»„ä¸º mysql:mysql1[root@localhost soft]# chown -R mysql:mysql /data/mysqlÂ¶ï¼ˆ8ï¼‰æ‰§è¡Œç¼–è¯‘å®‰è£…1234567891011121314151617181920212223242526272829303132&gt; è¿›å…¥åˆ°è§£åŽ‹åŽçš„æºç åŒ…æ–‡ä»¶å¤¹[root@localhost soft]# cd mariadb-10.2.6&gt; è¾“å…¥ç¼–è¯‘å‚æ•°cmake . -DCMAKE_INSTALL_PREFIX=/usr/local/mysql \ -DMYSQL_DATADIR=/data/mysql \ -DSYSCONFDIR=/etc \ -DWITHOUT_TOKUDB=1 \ -DWITH_INNOBASE_STORAGE_ENGINE=1 \ -DWITH_ARCHIVE_STPRAGE_ENGINE=1 \ -DWITH_BLACKHOLE_STORAGE_ENGINE=1 \ -DWIYH_READLINE=1 \ -DWIYH_SSL=system \ -DVITH_ZLIB=system \ -DWITH_LOBWRAP=0 \ -DMYSQL_UNIX_ADDR=/tmp/mysql.sock \ -DDEFAULT_CHARSET=utf8 \ -DDEFAULT_COLLATION=utf8_general_ci&gt; å¦‚æžœç¼–è¯‘å¤±è´¥è¯·åˆ é™¤CMakeCache.txt[root@localhost soft]# rm -f CMakeCache.txt&gt; è®©æŒ‡ä»¤é‡æ–°æ‰§è¡Œï¼Œå¦åˆ™æ¯æ¬¡è¯»å–è¿™ä¸ªæ–‡ä»¶ï¼Œå‘½ä»¤ä¿®æ”¹æ­£ç¡®ä¹Ÿæ˜¯æŠ¥é”™&gt; cmakeæ²¡é—®é¢˜ï¼Œå¯ä»¥ç¼–è¯‘å¹¶ä¸”å®‰è£…äº†ï¼š make &amp;&amp; make install æ—¶é—´ä¼šæœ‰ç‚¹é•¿æ ¹æ®ä¸ªäººæœºå™¨å§ï¼Œä½ å¯ä»¥å¹²åˆ«çš„äº‹æƒ…åŽ»![root@localhost soft]# make &amp;&amp; make install&gt; æ‰§è¡Œå®Œæˆä¹Ÿå°±æ˜¯å®‰è£…å®Œæˆäº†, ä¸è¿‡è¯·æ³¨æ„, è¿™åªæ˜¯å®‰è£…äº†, å¹¶æ²¡æœ‰å¯åŠ¨, å¯åŠ¨ä¸æˆåŠŸç­‰äºŽæ²¡å®‰è£…, ä¸èƒ½ç”¨ä¹Ÿæ˜¯å¾’åŠ³æ— åŠŸä¸æ˜¯?Â¶ï¼ˆ9ï¼‰é…ç½®MariaDB1234567891011121314151617181920212223242526272829303132333435363738394041424344&gt; è¿›å…¥åˆ° MariaDB å®‰è£…ç›®å½•[root@localhost ~]# cd /usr/local/mysql/&gt; ä½¿ç”¨ `mysql` ç”¨æˆ·æ‰§è¡Œè„šæœ¬, å®‰è£…æ•°æ®åº“åˆ°æ•°æ®åº“å­˜æ”¾ç›®å½•[root@localhost mysql]# scripts/mysql_install_db --user=mysql --datadir=/data/mysql&gt; è¾“å‡ºä»¥ä¸‹ä¿¡æ¯:Installing MariaDB/MySQL system tables in '/data/mysql' ...OKTo start mysqld at boot time you have to copysupport-files/mysql.server to the right place for your systemPLEASE REMEMBER TO SET A PASSWORD FOR THE MariaDB root USER !To do so, start the server, then issue the following commands:'./bin/mysqladmin' -u root password 'new-password''./bin/mysqladmin' -u root -h localhost.localdomain password 'new-password'Alternatively you can run:'./bin/mysql_secure_installation'which will also give you the option of removing the testdatabases and anonymous user created by default. This isstrongly recommended for production servers.See the MariaDB Knowledgebase at http://mariadb.com/kb or theMySQL manual for more instructions.You can start the MariaDB daemon with:cd '.' ; ./bin/mysqld_safe --datadir='/data/maria'You can test the MariaDB daemon with mysql-test-run.plcd './mysql-test' ; perl mysql-test-run.plPlease report any problems at http://mariadb.org/jiraThe latest information about MariaDB is available at http://mariadb.org/.You can find additional information about the MySQL part at:http://dev.mysql.comConsider joining MariaDB's strong and vibrant community:https://mariadb.org/get-involved/Â¶ï¼ˆ10ï¼‰å¤åˆ¶MariaDBé…ç½®æ–‡ä»¶åˆ°/etcç›®å½•1234567&gt; è¿›è¡Œåˆ° MariaDB å®‰è£…ç›®å½•[root@localhost ~]# cd /usr/local/mysql/&gt; æ‹·è´support-filesç›®å½•ä¸‹çš„æ–‡ä»¶my-large.cnfåˆ°/etcç›®å½•å¹¶é‡å‘½åä¸ºmy.cnf[root@localhost mysql]# cp support-files/my-large.cnf /etc/my.cnfÂ¶ï¼ˆ11ï¼‰åˆ›å»ºå¯åŠ¨è„šæœ¬1[root@localhost mysql]# cp support-files/mysql.server /etc/rc.d/init.d/mysqldÂ¶ï¼ˆ12ï¼‰ å¯åŠ¨mysqldæœåŠ¡1[root@localhost mysql]# /etc/rc.d/init.d/mysqld startÂ¶ï¼ˆ13ï¼‰ é…ç½®çŽ¯å¢ƒå˜é‡, ä»¥ä¾¿åœ¨ä»»ä½•ç›®å½•ä¸‹è¾“å…¥mysql12345678910111213141516171819&gt; æ‰“å¼€å¹¶æ–°å»ºæ–‡ä»¶[root@localhost mysql]# vim /etc/profile.d/mysql.sh&gt; è¾“å…¥ä»¥ä¸‹å†…å®¹export PATH=$PATH:/usr/local/mysql/bin/&gt; ä¿å­˜å¹¶é€€å‡º:wq&gt; ä¸ºè„šæœ¬èµ‹äºŽå¯æ‰§è¡Œæƒé™[root@localhost mysql]# chmod 0777 /etc/profile.d/mysql.sh&gt; è¿›è¡Œmysql.shè„šæœ¬æ‰€åœ¨ç›®å½•, å¹¶æ‰§è¡Œè„šæœ¬, ä»¥ç«‹å³ç”Ÿæ•ˆçŽ¯å¢ƒå˜é‡[root@localhost mysql]# source /etc/profile.d/mysql.shÂ¶ï¼ˆ14ï¼‰åˆå§‹åŒ–MariaDB1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859&gt; è¿è¡ŒMariaDBåˆå§‹åŒ–è„šæœ¬[root@localhost mysql]# ./bin/mysql_secure_installation&gt; ä»¥ä¸‹æç¤ºï¼šEnter current password for root (enter for none): è¾“å…¥å½“å‰rootå¯†ç (æ²¡æœ‰è¾“å…¥)Set root password? [Y/n] è®¾ç½®rootå¯†ç ?(æ˜¯/å¦)New password: è¾“å…¥æ–°rootå¯†ç Re-enter new password: ç¡®è®¤è¾“å…¥rootå¯†ç Password updated successfully! å¯†ç æ›´æ–°æˆåŠŸBy default, a MariaDB installation has an anonymous user, allowing anyoneto log into MariaDB without having to have a user account created forthem. This is intended only for testing, and to make the installationgo a bit smoother. You should remove them before moving into aproduction environment.é»˜è®¤æƒ…å†µä¸‹,MariaDBå®‰è£…æœ‰ä¸€ä¸ªåŒ¿åç”¨æˆ·,å…è®¸ä»»ä½•äººç™»å½•MariaDBè€Œä»–ä»¬æ— éœ€åˆ›å»ºç”¨æˆ·å¸æˆ·ã€‚è¿™ä¸ªç›®çš„æ˜¯åªç”¨äºŽæµ‹è¯•,å®‰è£…åŽ»æ›´å¹³ç¼“ä¸€äº›ã€‚ä½ åº”è¯¥è¿›å…¥å‰åˆ é™¤å®ƒä»¬ç”Ÿäº§çŽ¯å¢ƒã€‚Remove anonymous users? [Y/n] åˆ é™¤åŒ¿åç”¨æˆ·?(æ˜¯/å¦)Normally, root should only be allowed to connect from 'localhost'. Thisensures that someone cannot guess at the root password from the network.é€šå¸¸æƒ…å†µä¸‹ï¼Œrootåªåº”å…è®¸ä»Žlocalhostè¿žæŽ¥ã€‚è¿™ç¡®ä¿å…¶ä»–ç”¨æˆ·æ— æ³•ä»Žç½‘ç»œçŒœæµ‹rootå¯†ç ã€‚Disallow root login remotely? [Y/n] ä¸å…è®¸rootç™»å½•è¿œç¨‹?(æ˜¯/å¦)By default, MariaDB comes with a database named 'test' that anyone canaccess. This is also intended only for testing, and should be removedbefore moving into a production environment.é»˜è®¤æƒ…å†µä¸‹ï¼ŒMariaDBæä¾›äº†ä¸€ä¸ªåä¸ºâ€œæµ‹è¯•â€çš„æ•°æ®åº“ï¼Œä»»ä½•äººéƒ½å¯ä»¥è®¿é—®ã€‚è¿™ä¹Ÿåªç”¨äºŽæµ‹è¯•ï¼Œåœ¨è¿›å…¥ç”Ÿäº§çŽ¯å¢ƒä¹‹å‰åº”è¯¥è¢«åˆ é™¤ã€‚Reloading the privilege tables will ensure that all changes made so farwill take effect immediately.é‡æ–°åŠ è½½æƒé™è¡¨å°†ç¡®ä¿æ‰€æœ‰åˆ°ç›®å‰ä¸ºæ­¢æ‰€åšçš„æ›´æ”¹å°†ç«‹å³ç”Ÿæ•ˆã€‚Reload privilege tables now? [Y/n] çŽ°åœ¨é‡æ–°åŠ è½½æƒé™è¡¨(æ˜¯/å¦)All done! If you've completed all of the above steps, your MariaDBinstallation should now be secure.å…¨éƒ¨å®Œæˆ!å¦‚æžœä½ å·²ç»å®Œæˆäº†ä»¥ä¸Šæ­¥éª¤,MariaDBå®‰è£…çŽ°åœ¨åº”è¯¥å®‰å…¨ã€‚Thanks for using MariaDB!æ„Ÿè°¢ä½¿ç”¨MariaDB!Â¶ï¼ˆ15ï¼‰è¿›å…¥MariaDBç»ˆç«¯å°ä¼™ä¼´ä»¬, ç»è¿‡ä»¥ä¸ŠåŠªåŠ›, ç»ˆäºŽæ˜¯è§åˆ°ç½²å…‰çš„æ—¶åˆ»å•¦ï¼å¦‚æžœè¯´åœ¨ åˆå§‹åŒ–MariaDB ä¸­æ²¡æœ‰è®¾ç½®å¯†ç , è¿›å…¥MariaDBç»ˆç«¯, ç›´æŽ¥è¾“å…¥ mysql å³å¯1[root@localhost ~]# mysqlå¦‚æžœè®¾ç½®äº†å¯†ç åˆ™åŠ å…¥å‚æ•°-u: ç”¨æˆ·å-p: å¯†ç -P: ç«¯å£å·-h: ä¸»æœºæ›´å¤šå‚æ•°å…·ä½“å«ä¹‰è¯·å‚æ•° mysql --help è¿›è¡ŒæŸ¥çœ‹!1[root@localhost ~]# mysql -u u_setting_username -pÂ¶ï¼ˆ16ï¼‰ç¼–è¯‘å®‰è£…åŽæ‰€æœ‰é…ç½®æ“ä½œæ³¨æ„ï¼š è¿™éƒ¨åˆ†æ˜¯å¯¹ä»¥ä¸Šç¼–è¯‘å®‰è£…åŽmariadbé…ç½®æ‰€æœ‰æ“ä½œçš„ä¸€ä¸ªæ€»ç»“, çœ‹å®¢å°ä¼™ä¼´ä»¬å°±ä¸ç”¨å†æ¬¡æ‰§è¡Œäº†, ä¸ºæ­¤æœ‰ä¸å°‘å°ä¼™ä¼´å·²å…¥å‘?, åšä¸»æ·±è¡¨æ­‰æ„ï¼ä¸å¥½æ„æ€è®©ä½ å…¥å‘äº†, å®žåœ¨æ˜¯ç½ªè¿‡å“¦ï¼?12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758[root@localhost ~]# cd /usr/local/mysql/[root@localhost mysql]# scripts/mysql_install_db --user=mysql --datadir=/data/mysql/Installing MariaDB/MySQL system tables in '/data/mysql/' ...OKTo start mysqld at boot time you have to copysupport-files/mysql.server to the right place for your systemPLEASE REMEMBER TO SET A PASSWORD FOR THE MariaDB root USER !To do so, start the server, then issue the following commands:'./bin/mysqladmin' -u root password 'new-password''./bin/mysqladmin' -u root -h localhost.localdomain password 'new-password'Alternatively you can run:'./bin/mysql_secure_installation'which will also give you the option of removing the testdatabases and anonymous user created by default. This isstrongly recommended for production servers.See the MariaDB Knowledgebase at http://mariadb.com/kb or theMySQL manual for more instructions.You can start the MariaDB daemon with:cd '.' ; ./bin/mysqld_safe --datadir='/data/mysql/'You can test the MariaDB daemon with mysql-test-run.plcd './mysql-test' ; perl mysql-test-run.plPlease report any problems at http://mariadb.org/jiraThe latest information about MariaDB is available at http://mariadb.org/.You can find additional information about the MySQL part at:http://dev.mysql.comConsider joining MariaDB's strong and vibrant community:https://mariadb.org/get-involved/[root@localhost mysql]# cp support-files/my-large.cnf /etc/my.cnf[root@localhost mysql]# cp support-files/mysql.server /etc/rc.d/init.d/mysqld[root@localhost mysql]# /etc/rc.d/init.d/mysqld startReloading systemd: [ OK ]Starting mysqld (via systemctl): [ OK ][root@localhost mysql]# touch /etc/profile.d/mysql.sh[root@localhost mysql]# echo 'export PATH=$PATH:/usr/local/mysql/bin/' &gt; /etc/profile.d/mysql.sh [root@localhost mysql]# chmod 0777 /etc/profile.d/mysql.sh [root@localhost mysql]# source /etc/profile.d/mysql.sh [root@localhost mysql]# mysqlWelcome to the MariaDB monitor. Commands end with ; or \g.Your MariaDB connection id is 10Server version: 10.2.6-MariaDB-log Source distributionCopyright (c) 2000, 2017, Oracle, MariaDB Corporation Ab and others.Type 'help;' or '\h' for help. Type '\c' to clear the current input statement.MariaDB [(none)]&gt;Â¶7. ç¼–è¯‘å®‰è£…mysqlÂ¶ï¼ˆ1ï¼‰å®‰è£…ä¾èµ–åŒ…1[root@vm ~] yum -y install gcc gcc-c++ ncurses ncurses-devel cmakeÂ¶ï¼ˆ2ï¼‰ä¸‹è½½ç›¸åº”æºç åŒ…12[root@vm ~] mkdir -p /root/oneinstack/src[root@vm ~] wget https://downloads.mysql.com/archives/get/file/mysql-boost-5.7.19.tar.gzÂ¶ï¼ˆ3ï¼‰æ·»åŠ mysqlç”¨æˆ·1[root@vm ~] useradd -M -s /sbin/nologin mysqlÂ¶ï¼ˆ4ï¼‰é¢„ç¼–è¯‘12345678910111213141516171819202122[root@vm ~] tar -zxvf mysql-boost-5.7.19.tar.gz[root@vm ~] cd mysql-5.7.19/[root@vm ~] mkdir -p /data/mysql[root@vm ~] cmake . -DCMAKE_INSTALL_PREFIX=/usr/local/mysql \-DMYSQL_DATADIR=/data/mysql \-DDOWNLOAD_BOOST=1 \-DWITH_BOOST=~/mysql-5.7.19/boost \-DSYSCONFDIR=/etc \-DWITH_INNOBASE_STORAGE_ENGINE=1 \-DWITH_PARTITION_STORAGE_ENGINE=1 \-DWITH_FEDERATED_STORAGE_ENGINE=1 \-DWITH_BLACKHOLE_STORAGE_ENGINE=1 \-DWITH_MYISAM_STORAGE_ENGINE=1 \-DENABLED_LOCAL_INFILE=1 \-DENABLE_DTRACE=0 \-DDEFAULT_CHARSET=utf8mb4 \-DDEFAULT_COLLATION=utf8mb4_general_ci \-DWITH_EMBEDDED_SERVER=1[root@vm ~] make -j `grep processor /proc/cpuinfo | wc -l`Â¶ï¼ˆ5ï¼‰ç¼–è¯‘å®‰è£…12[root@vm ~] make -j `grep processor /proc/cpuinfo | wc -l` [root@vm ~] make installç¼–è¯‘å¾ˆæ¶ˆè€—ç³»ç»Ÿèµ„æºï¼Œå°å†…å­˜å¯èƒ½ç¼–è¯‘é€šä¸è¿‡å¯åŠ¨è„šæœ¬ï¼Œè®¾ç½®å¼€æœºè‡ªå¯åŠ¨1234cp /usr/local/mysql/support-files/mysql.server /etc/init.d/mysqldchmod +x /etc/init.d/mysqldchkconfig --add mysqldchkconfig mysqld onÂ¶ï¼ˆ6ï¼‰é…ç½® /etc/my.cnfï¼Œä»…ä¾›å‚è€ƒ123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778cat &gt; /etc/my.cnf &lt;&lt; EOF[client]port = 3306socket = /tmp/mysql.sockdefault-character-set = utf8mb4[mysqld]port = 3306socket = /tmp/mysql.sockbasedir = /usr/local/mysqldatadir = /data/mysqlpid-file = /data/mysql/mysql.piduser = mysqlbind-address = 0.0.0.0server-id = 1init-connect = 'SET NAMES utf8mb4'character-set-server = utf8mb4#skip-name-resolve#skip-networkingback_log = 300max_connections = 1000max_connect_errors = 6000open_files_limit = 65535table_open_cache = 128max_allowed_packet = 4Mbinlog_cache_size = 1Mmax_heap_table_size = 8Mtmp_table_size = 16Mread_buffer_size = 2Mread_rnd_buffer_size = 8Msort_buffer_size = 8Mjoin_buffer_size = 8Mkey_buffer_size = 4Mthread_cache_size = 8query_cache_type = 1query_cache_size = 8Mquery_cache_limit = 2Mft_min_word_len = 4log_bin = mysql-binbinlog_format = mixedexpire_logs_days = 30log_error = /data/mysql/mysql-error.logslow_query_log = 1long_query_time = 1slow_query_log_file = /data/mysql/mysql-slow.logperformance_schema = 0explicit_defaults_for_timestamp#lower_case_table_names = 1skip-external-lockingdefault_storage_engine = InnoDB#default-storage-engine = MyISAMinnodb_file_per_table = 1innodb_open_files = 500innodb_buffer_pool_size = 64Minnodb_write_io_threads = 4innodb_read_io_threads = 4innodb_thread_concurrency = 0innodb_purge_threads = 1innodb_flush_log_at_trx_commit = 2innodb_log_buffer_size = 2Minnodb_log_file_size = 32Minnodb_log_files_in_group = 3innodb_max_dirty_pages_pct = 90innodb_lock_wait_timeout = 120bulk_insert_buffer_size = 8Mmyisam_sort_buffer_size = 8Mmyisam_max_sort_file_size = 10Gmyisam_repair_threads = 1interactive_timeout = 28800wait_timeout = 28800[mysqldump]quickmax_allowed_packet = 16M[myisamchk]key_buffer_size = 8Msort_buffer_size = 8Mread_buffer = 4Mwrite_buffer = 4MEOFÂ¶ï¼ˆ7ï¼‰åˆå§‹åŒ–æ•°æ®åº“1/usr/local/mysql/bin/mysqld --initialize-insecure --user=mysql --basedir=/usr/local/mysql --datadir=/data/mysqlæ³¨ï¼šä¹‹å‰ç‰ˆæœ¬mysql_install_dbæ˜¯åœ¨mysql_basedir/scriptä¸‹ï¼Œ5.7æ”¾åœ¨äº†mysql_install_db/binç›®å½•ä¸‹,ä¸”å·²è¢«åºŸå¼ƒâ€œâ€“initialize&quot;ä¼šç”Ÿæˆä¸€ä¸ªéšæœºå¯†ç (~/.mysql_secret)ï¼Œè€Œâ€â€“initialize-insecure&quot;ä¸ä¼šç”Ÿæˆå¯†ç â€“datadirç›®æ ‡ç›®å½•ä¸‹ä¸èƒ½æœ‰æ•°æ®æ–‡ä»¶Â¶ï¼ˆ8ï¼‰å¯åŠ¨æ•°æ®åº“1service mysqld status123dbrootpwd=123456 #æ•°æ®åº“rootå¯†ç /usr/local/mysql/bin/mysql -e "grant all privileges on *.* to root@'127.0.0.1' identified by \"$dbrootpwd\" with grant option;"/usr/local/mysql/bin/mysql -e "grant all privileges on *.* to root@'localhost' identified by \"$dbrootpwd\" with grant option;"Â¶8. mysqlå®˜ç½‘å·²ç¼–è¯‘äºŒè¿›åˆ¶åŒ…å®‰è£…mysqlå’Œmariadbç¼–è¯‘éœ€è¦å¾ˆé•¿æ—¶é—´ï¼Œè€Œä¸”åœ¨é…ç½®æ¯”è¾ƒä½Žçš„æœåŠ¡å™¨ä¸Šè¿˜å¯èƒ½ç¼–è¯‘å¤±è´¥ï¼Œå»ºè®®ç›´æŽ¥é€šè¿‡åœ¨çº¿åŒ…ç®¡ç†å·¥å…·(å¦‚yumæˆ–è€…apt)å®‰è£…æˆ–è€…å®˜ç½‘ä¸‹è½½å·²ç»ç¼–è¯‘å¥½çš„äºŒè¿›åˆ¶ç¨‹åºè¿›è¡Œå®‰è£…ï¼Œå¯¹äºŽåœ¨çº¿åŒ…ç®¡ç†å·¥å…·è¿™é‡Œå°±ä¸ä»‹ç»äº†ã€‚ä¸‹é¢æ˜¯å°±ä»‹ç»å·²ç»ç¼–è¯‘å¥½çš„äºŒè¿›åˆ¶ç¨‹åºå®‰è£…çš„æ–¹æ³•ã€‚123456789101112131415161718192021222324252627282930# wget http://211.143.146.211/1Q2W3E4R5T6Y7U8I9O0P1Z2X3C4V5B/ftp.hosteurope.de/mirror/archive.mariadb.org//mariadb-10.2.14/bintar-linux-x86_64/mariadb-10.2.14-linux-x86_64.tar.gzè§£åŽ‹å®‰è£…å¹¶æŒ‡å®šè§£åŽ‹è·¯å¾„/usr/localï¼Œåˆ›å»ºè½¯è¿žæŽ¥# tar xvf mariadb-10.2.14-linux-x86_64.tar.gz -C /usr/local# cd /usr/local# ln -s mariadb-10.2.14-linux-x86_64/ mysqlåˆ›å»ºmysqlç”¨æˆ·ï¼Œå¹¶æŒ‡å®šå®¶ç›®å½•ã€‚# mkdir /mysql# useradd -r -m -s /sbin/nologin -d /mysql/data mysqlç”Ÿæˆmysqlæ•°æ®åº“# /usr/local/mysql/scripts/mysql_install_db --datadir=/mysql/data --basedir=/usr/local/mysql --user=mysqlé…ç½®mysqlçš„é…ç½®æ–‡ä»¶# cp /usr/local/mysql/support-files/my-huge.cnf /etc/my.cnf# vim /etc/my.cnf ## åœ¨[mysqld]èŠ‚ç‚¹ä¸‹è¿½åŠ å¦‚ä¸‹ä¸‰è¡Œ [mysqld] datadir = /mysql/data innodb_file_per_table = ON skip_name_resolve = ONé…ç½®ä»¥æ”¯æŒchkconfigæŽ§åˆ¶# cp /usr/local/mysql/support-files/mysql.server /etc/init.d/mysqld# chkconfig --add mysqld# chkconfig mysqld on# systemctl restart mysqldæ‰§è¡Œå®‰å…¨åˆå§‹åŒ–æ•°æ®åº“è„šæœ¬# /usr/local/mysql/bin/mysql_secure_installation# vim /etc/profile.d/mysqld.sh export PATH=$PATH:/usr/local/mysql/bin:/usr/local/apache/bin# source /etc/profile.d/mysqld.shÂ¶9.ç¼–è¯‘å®‰è£…PHP7.1.1712345678910111213141516171819202122232425262728293031323334353637383940è§£å†³ä¾èµ–# yum install -y epel-release# yum -y install php-mcrypt libmcrypt libmcrypt-devel libxml2-develç¼–è¯‘å®‰è£…# wget http://cn2.php.net/distributions/php-7.1.17.tar.bz2# tar xvf php-7.1.17.tar.bz2# cd php-7.1.17# ./configure --prefix=/usr/local/php --enable-mysqlnd --with-mysqli=mysqlnd --with-openssl --with-pdo-mysql=mysqlnd --enable-mbstring --with-freetype-dir --with-jpeg-dir --with-png-dir --with-zlib --with-libxml-dir=/usr --enable-xml --enable-sockets --with-apxs2=/usr/local/apache/bin/apxs --with-mcrypt --with-config-file-path=/etc --with-config-file-scan-dir=/etc/php.d --enable-maintainer-zts --disable-fileinfoæ³¨æ„ï¼š php-7.0ä»¥ä¸Šç‰ˆæœ¬ä½¿ç”¨ â€“enable-mysqlnd â€“with-mysqli=mysqlnd ï¼ŒåŽŸâ€“with-mysqlä¸å†æ”¯æŒ# make# make installæä¾›phpé…ç½®æ–‡ä»¶# cp php.ini-production /etc/php.iniç¼–è¾‘apacheé…ç½®æ–‡ä»¶httpd.confï¼Œä»¥ä½¿apacheæ”¯æŒphp# vim /usr/local/apache/conf/httpd.conf æ·»åŠ å¦‚ä¸‹ä¸¤è¡Œ AddType application/x-httpd-php .php AddType application/x-httpd-php-source .phps æ‰¾åˆ°å¦‚ä¸‹è¡Œå¹¶è¿½åŠ index.php ç»“æžœå¦‚ä¸‹ DirectoryIndex index.html index.phpé‡å¯httpdæœåŠ¡ä»¥ä½¿é…ç½®ç”Ÿæ•ˆ# systemctl restart httpdæµ‹è¯•httpdã€mariadbã€phpæ˜¯å¦èƒ½å¤ŸååŒå·¥ä½œ# rm -rf /usr/local/apache/htdocs/index.html# vim /usr/local/apache/htdocs/index.php &lt;?php $mysqli=new mysqli("localhost","root","123456"); if(mysqli_connect_errno())&#123; echo "è¿žæŽ¥æ•°æ®åº“å¤±è´¥!"; $mysqli=null; exit; &#125; echo "è¿žæŽ¥æ•°æ®åº“æˆåŠŸ!"; $mysqli-&gt;close(); ?&gt;æ‰“å¼€http://192.168.10.10/ èƒ½çœ‹åˆ°&quot;è¿žæŽ¥æ•°æ®åº“æˆåŠŸ!&quot;å³å¯ï¼Œå¦åˆ™è¯·æ£€æŸ¥é”™è¯¯ã€‚Â¶10.ç¼–è¯‘å®‰è£…php-memcachedæ‰©å±•æœ€æ–°ç‰ˆXcache3.2æœ€é«˜åªæ”¯æŒåˆ°PHP 5.6,æ‰€ä»¥PHP7ä¸åœ¨æ”¯æŒåˆ—è¡¨é‡Œï¼Œæˆ‘ä»¥è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨php-memcachedæ¥æä¾›ç¼“å­˜åŠŸèƒ½12345678910111213141516171819202122ç¼–è¯‘å®‰è£…libmemcached# yum -y install cyrus-sasl-devel# wget https://launchpad.net/libmemcached/1.0/1.0.18/+download/libmemcached-1.0.18.tar.gz# tar -zxvf libmemcached-1.0.18.tar.gz# cd libmemcached-1.0.18# ./configure --prefix=/usr/local/libmemcached --with-memcached --enable-sasl# make# make installç¼–è¯‘å®‰è£…php-memcached# tar xvf memcached-3.0.4.tgz# cd memcached-3.0.4# /usr/local/php/bin/phpize Configuring for: PHP Api Version: 20160303 Zend Module Api No: 20160303 Zend Extension Api No: 320160303# ./configure --with-php-config=/usr/local/php/bin/php-config --with-libmemcached-dir=/usr/local/libmemcached --enable-memcached# make # make install# echo "extension=memcached.so" &gt;&gt; /etc/php.ini# systemctl restart httpd]]></content>
      <categories>
        <category>devops</category>
      </categories>
      <tags>
        <tag>apache</tag>
        <tag>ssl</tag>
        <tag>linux</tag>
        <tag>lamp</tag>
        <tag>mysql</tag>
        <tag>php</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[centos7çŽ¯å¢ƒä¸‹ä½¿ç”¨yumæ­å»ºlampçŽ¯å¢ƒ]]></title>
    <url>%2Fdevops%2Flamp.html</url>
    <content type="text"><![CDATA[Â¶1ã€æ­å»º MySQL æ•°æ®åº“Â¶1.1 å®‰è£… MariaDBï¼š1# yum install mariadb-server -yÂ¶1.2 å¯åŠ¨ MySQL æœåŠ¡ï¼š1234567# systemctl start mariadb # å¯åŠ¨æœåŠ¡# systemctl enable mariadb # è®¾ç½®å¼€æœºå¯åŠ¨è®¾ç½® MySQL è´¦æˆ· root å¯†ç ï¼šmysqladmin -u root password '******'#å¦‚mysqladmin -u root password '123456'Â¶1.3 è¿œç¨‹è¿žæŽ¥mysql(1)è¿žæŽ¥åˆ°mysqlï¼Œè¾“å…¥ä¸‹è¾¹å‘½ä»¤ï¼Œç„¶åŽè¾“å…¥mysqlå¯†ç è¿›å…¥mysqlå‘½ä»¤è¡Œ1mysql -uroot -p(2)è¾“å…¥ä¸‹è¾¹çš„å‘½ä»¤æŽˆæƒè¿œç¨‹è¿žæŽ¥12MariaDB [(none)]&gt; GRANT ALL PRIVILEGES ON *.* TO 'root'@'%'IDENTIFIED BY '123456' WITH GRANT OPTION; #123456æ˜¯è¿œç¨‹è®¿é—®çš„å¯†ç ï¼Œä¿®æ”¹æˆä½ éœ€è¦å¯†ç MariaDB [(none)]&gt; flush privileges; #åˆ·æ–°ä¸€ä¸‹(3)å¦‚æžœæœåŠ¡å™¨çš„é˜²ç«å¢™æœ‰å¼€å¯ï¼Œé‚£ä¹ˆéœ€è¦æ”¾è¡Œmysqlç«¯å£æˆ–è€…å…³é—­é˜²ç«å¢™ï¼Œé€€å‡ºmysqlå‘½ä»¤è¡ŒåŽæ‰§è¡Œä¸‹è¾¹å‘½ä»¤æ”¾è¡Œmysqlç«¯å£ï¼š12$ firewall-cmd --permanent --add-port=3306/tcp$ firewall-cmd --reloadæˆ–è€…å…³é—­é˜²ç«å¢™ï¼š1$ service firewalld stop # å…³é—­(4)è¿œç¨‹ç»ˆç«¯è¿žæŽ¥mysql1$ mysql -h ip -u root -p123456 #è¿™é‡Œçš„ipæ˜¯æœåŠ¡å™¨çš„ipåœ°å€Â¶1.4 å…¶ä»–æ“ä½œåˆ›å»ºmysqlæ–°ç”¨æˆ·å¹¶ç»™è¯¥ç”¨æˆ·æŒ‡å®šçš„æ•°æ®åº“æƒé™1234#åˆ›å»ºç”¨æˆ·åä¸ºqcmokeä¸”ç™»å½•å¯†ç ä¸º123456çš„æ–°ç”¨æˆ·MariaDB [(none)]&gt; CREATE USER 'qcmoke'@'%' IDENTIFIED BY '123456';#èµ‹äºˆqcmokeç”¨æˆ·å¯¹åç§°ä¸ºxdclassçš„æ•°æ®åº“æ‰€æœ‰æƒé™MariaDB [(none)]&gt; GRANT ALL ON xdclass.* TO 'qcmoke'@'%';Â¶2ã€å®‰è£… Apache æœåŠ¡å®‰è£… Apache1# yum install httpd -yå¯åŠ¨ Apache æœåŠ¡ï¼š12# systemctl start httpd # å¯åŠ¨æœåŠ¡# systemctl enable httpd # è®¾ç½®å¼€æœºå¯åŠ¨Â¶3ã€å®‰è£… PHPå®‰è£… PHP å’Œ PHP-MYSQL æ”¯æŒå·¥å…·1# yum install php php-mysql -yæ£€éªŒ PHP æ˜¯å¦å®‰è£…æˆåŠŸæˆ‘ä»¬åœ¨/var/www/htmlç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªinfo.phpæ–‡ä»¶æ¥æ£€æŸ¥phpæ˜¯å¦å®‰è£…æˆåŠŸï¼Œç¤ºä¾‹ä»£ç å‚è€ƒå¦‚ä¸‹1&lt;?php phpinfo(); ?&gt;Â¶4ã€é‡å¯ Apache æœåŠ¡1# systemctl restart httpdæ­¤æ—¶ï¼Œè®¿é—® http://localhost/info.php å¯æµè§ˆåˆ°æˆ‘ä»¬åˆšåˆšåˆ›å»ºçš„ info.php é¡µé¢è¯´æ˜Žæ­å»ºæˆåŠŸã€‚]]></content>
      <categories>
        <category>devops</category>
      </categories>
      <tags>
        <tag>centos</tag>
        <tag>lamp</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[centos7 apache2.4.6é…ç½®å•ipå¤šåŸŸå]]></title>
    <url>%2Fdevops%2Fapache_much_ip.html</url>
    <content type="text"><![CDATA[è¯´æ˜Žï¼šåœ¨é…ç½®å‰ä¿è¯å·²ç»æ­å»ºå¥½LAMPçŽ¯å¢ƒã€‚æ­å»ºè¯¦æƒ…è¯·çœ‹ã€Šcentos7çŽ¯å¢ƒä¸‹ä½¿ç”¨yumæ­å»ºlampçŽ¯å¢ƒã€‹ ã€‚å¹¶åœ¨/var/www/html/ç›®å½•ä¸‹å«æœ‰ä¸¤ä¸ªç«™ç‚¹ç›®å½•ã€‚å¦‚æœ¬äººæ­å»ºäº†ä¸¤ä¸ªåšå®¢ç½‘ç«™ï¼Œåˆ†åˆ«æ˜¯typechoå’Œwordpressã€‚Â¶ä¸€ã€åˆ›å»ºvhost.confé…ç½®æ–‡ä»¶ç¬¬ä¸€æ­¥ï¼šé¦–å…ˆåœ¨/etc/httpd/conf.d/ç›®å½•ä¸‹åˆ›å»ºvhost.confé…ç½®æ–‡ä»¶123# cd /etc/httpd/conf.d/# touch vhost.conf# vim vhost.confÂ¶äºŒã€é…ç½®vhost.confç¬¬äºŒæ­¥ï¼šæŒ‰iè¿›å…¥ç¼–è¾‘æ¨¡å¼ï¼Œå¤åˆ¶ä»¥ä¸‹é…ç½®å†…å®¹ç²˜è´´åˆ°vhost.confä¸­ï¼ˆä»¥ä¸‹åŸŸåå’Œç›®å½•è¯·æ ¹æ®è‡ªå·±çš„å®žé™…æƒ…å†µæ¥ä¿®æ”¹ï¼Œå…¶ä¸­DocumentRootå’ŒDirectoryæ›´æ¢è‡ªå·±çš„é¡¹ç›®ç»å¯¹è·¯å¾„ï¼ŒServerNameä¸ºä¸»åŸŸåï¼ŒServerAliasä¸ºè¾…åŠ©åŸŸåï¼‰ã€‚123456789101112131415161718192021&lt;VirtualHost *:80&gt; DocumentRoot "/var/www/html/typecho" ServerName example.com ServerAlias blog.example.com &lt;Directory "/var/www/html/typecho"&gt; Options FollowSymLinks AllowOverride All Require all granted &lt;/Directory&gt;&lt;/VirtualHost&gt;&lt;VirtualHost *:80&gt; DocumentRoot "/var/www/html/wordpress" ServerName example.com ServerAlias wordpress.example.com &lt;Directory "/var/www/html/wordpress"&gt; Options FollowSymLinks AllowOverride All Require all granted &lt;/Directory&gt;&lt;/VirtualHost&gt;ç²˜è´´å¥½åŽæŒ‰:wqé€€å‡ºÂ¶ä¸‰ã€æ£€æµ‹apacheé…ç½®ç¬¬ä¸‰æ­¥ï¼šç¡®è®¤apacheé…ç½®æ˜¯å¦æ­£ç¡®12345# httpd -t AH00558: httpd: Could not reliably determine the server's fully qualified domain name, using localhost.localdomain. Set the 'ServerName' directive globally to suppress this message Syntax OKÂ¶å››ã€é‡å¯apacheç¬¬å››æ­¥ï¼šé‡å¯apacheæœåŠ¡1# service httpd restartÂ¶äº”ã€è®¿é—®åŸŸååœ°å€ç¬¬äº”æ­¥ï¼šæµè§ˆå™¨åˆ†åˆ«è®¿é—®blog.example.comå’Œwordpress.example.comå¤‡æ³¨ï¼šå¦‚æžœç”¨æˆ·è®¿é—®çš„æ˜¯example.com, é‚£ä¹ˆä¼šä¼˜å…ˆå¯»æ‰¾ç¬¬ä¸€ä¸ªè™šæ‹Ÿä¸»æœºã€‚æ­¤å¤„ä¸º/var/www/html/typecho]]></content>
      <categories>
        <category>devops</category>
      </categories>
      <tags>
        <tag>apache</tag>
        <tag>å•ipå¤šåŸŸå</tag>
        <tag>cento</tag>
      </tags>
  </entry>
</search>
